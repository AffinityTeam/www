(function(e){function t(t){for(var a,l,i=t[0],o=t[1],r=t[2],u=0,h=[];u<i.length;u++)l=i[u],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&h.push(c[l][0]),c[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,r||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==c[o]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},c={app:0},s=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var r=0;r<i.length;r++)t(i[r]);var d=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0240":function(e,t,n){"use strict";n("4201")},"02ba":function(e,t,n){},"0828":function(e,t,n){},1748:function(e,t,n){},"18d6":function(e,t,n){"use strict";n("7d45")},"1a0c":function(e,t,n){"use strict";n("c415")},"1a69":function(e,t,n){"use strict";n("336f")},"1f8e":function(e,t,n){"use strict";n("0828")},"1fa8":function(e,t,n){"use strict";n("6a0c")},"28db":function(e,t,n){"use strict";n("858b")},"336f":function(e,t,n){},"357f":function(e,t,n){},3941:function(e,t,n){"use strict";n("5016")},"3f31":function(e,t,n){},4201:function(e,t,n){},"42ae":function(e,t,n){},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=s,e.exports=c,c.id="4678"},5016:function(e,t,n){},"55f5":function(e,t,n){"use strict";n("a2bb")},"58be":function(e,t,n){"use strict";n("e552")},"69af":function(e,t,n){},"6a0c":function(e,t,n){},"6f42":function(e,t,n){},7587:function(e,t,n){"use strict";n("9856")},"79ca":function(e,t,n){"use strict";n("b70d")},"7bd0":function(e,t,n){"use strict";n("ed86")},"7c1b":function(e,t,n){},"7d45":function(e,t,n){},8241:function(e,t,n){},"858b":function(e,t,n){},"8e1f":function(e,t,n){},"8f0a":function(e,t,n){"use strict";n("1748")},9519:function(e,t,n){},9856:function(e,t,n){},"9d72":function(e,t,n){"use strict";n("b16a")},"9ede":function(e,t,n){},a273:function(e,t,n){},a2bb:function(e,t,n){},a472:function(e,t,n){"use strict";n("9519")},a883:function(e,t,n){},b16a:function(e,t,n){},b70d:function(e,t,n){},ba8f:function(e,t,n){},c415:function(e,t,n){},c507:function(e,t,n){"use strict";n("02ba")},c6e0:function(e,t,n){"use strict";n("3f31")},cd49:function(e,t,n){"use strict";n.r(t),n.d(t,"emitter",(function(){return Uo}));var a=n("b85c"),c=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7a23")),s={class:"v-application"};function l(e,t,n,a,l,i){var o=Object(c["A"])("schedules-navigation"),r=Object(c["A"])("alert"),d=Object(c["A"])("router-view"),u=Object(c["A"])("dashboard");return Object(c["s"])(),Object(c["e"])("div",null,[Object(c["h"])(u,{"enable-by-config":!0,"config-url":"/Config/Dashboard","info-url":"/Auth/GetInfo","logout-url":"/Auth/Logout"},{default:Object(c["L"])((function(){return[Object(c["h"])("div",s,[Object(c["h"])(o),Object(c["h"])(r),Object(c["h"])(d)])]})),_:1})])}n("357f");var i=Object(c["P"])("data-v-722227b2");Object(c["v"])("data-v-722227b2");var o={class:"schedules"},r={class:"sch-nav justify-space-between align-center primary body-2"},d={class:"white--text"},u={key:0,class:"d-flex align-center"},h={class:"sch-nav-options mr-1 pa-0"},f={href:"/help/index",class:"sch-nav-help align-center mr-2",target:"_blank"},b=Object(c["h"])("span",{class:"icon-help-round white"},null,-1);Object(c["t"])();var m=i((function(e,t){var n=Object(c["B"])("tooltip");return Object(c["s"])(),Object(c["e"])("div",o,[Object(c["h"])("div",r,[Object(c["h"])("div",d,"Schedules - "+Object(c["D"])(e.userFullName),1),e.user?(Object(c["s"])(),Object(c["e"])("div",u,[Object(c["h"])("ul",h,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.authorizedMenus,(function(t){return Object(c["s"])(),Object(c["e"])("li",{class:["nav-box mr-1 py-1 px-2 my-1 caption",{selected:t.selected}],onClick:function(n){return e.selectMenu(t)}},[Object(c["h"])("div",null,Object(c["D"])(t.display),1)],10,["onClick"])})),256))]),Object(c["M"])(Object(c["h"])("a",f,[b],512),[[n,{content:"Help"},void 0,{top:!0}]])])):Object(c["f"])("",!0)])])})),p=(n("99af"),n("159b"),n("7db0"),n("d3b7"),n("bc3a")),O=n.n(p),j=!1;Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST&&(j=!0,O.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST),O.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",O.a.interceptors.response.use((function(e){return e}),(function(e){return e&&e.response&&401==e.response.status&&location.reload(),Promise.reject(e)}));var g=function(e){return O.a.post("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data?JSON.parse(e.data):e.data}))},y=function(){return O.a.post("Auth/GetInfo").then((function(e){return e.data}))};function D(){return O.a.get("StandardSchedules").then((function(e){return e.data}))}function v(){return O.a.get("ShiftTypes").then((function(e){return e.data}))}function S(e){return O.a.get("ScheduleDetail/".concat(e)).then((function(e){return e.data}))}function k(e){return O.a.post("PostSchedule",e).then((function(e){return e.data}))}function A(e){return O.a.get("DeleteSchedule/".concat(e)).then((function(e){return e.data}))}function w(e){return O.a.post("AllocateSchedule",e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function E(e,t){return O.a.get("RemoveEmployeeWorkSchedule/".concat(t,"/").concat(e)).then((function(e){return e.data}))}function C(e,t){return O.a.post("UpdateEmployeeWorkSchedule/".concat(t),e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function x(){return O.a.get("EmployeeOptions").then((function(e){return e.data}))}function T(e){return O.a.get("EmployeeWorkSchedules/".concat(e)).then((function(e){return e.data}))}function M(e){return O.a.get("EmployeeWorkScheduleDetail/".concat(e)).then((function(e){return e.data}))}function F(e){return O.a.get("FlexScheduleDetail/".concat(e)).then((function(e){return e.data}))}function N(e){return O.a.get("FlexSchedules",{params:e}).then((function(e){return e.data}))}function I(e){return O.a.post("CreateFlexSchedule/",e).then((function(e){return e.data}))}function L(e,t){return O.a.put("UpdateFlexSchedule/".concat(e),t).then((function(e){return e.data}))}function P(e){return O.a.get("GetManagedEmployees/".concat(e,"?fields=EmployeeNo,CommonName,StdHoursPerWeek,PositionCode")).then((function(e){return"string"===typeof e.data?JSON.parse(e.data):e.data}))}function W(e){return O.a.get("GetPositions/".concat(e)).then((function(e){return e.data}))}function B(){return O.a.get("GetCostElements").then((function(e){return e.data}))}j&&(g=function(e){return console.log("data",e),O.a.get("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data?JSON.parse(e.data):e.data}))},y=function(){return O.a.get("Auth/GetInfo").then((function(e){return e.data}))});var R={EmployeeWorkSchedule:g,AuthGetInfo:y,StandardSchedules:D,ShiftTypes:v,ScheduleDetail:S,PostSchedule:k,DeleteSchedule:A,AllocateSchedule:w,RemoveEmployeeWorkSchedule:E,UpdateEmpSchedRequest:C,EmployeesList:x,EmpWorkScheds:T,EmpSchedDetailRequest:M,GetFlexScheduleDetail:F,GetFlexSchedules:N,CreateFlexSchedule:I,UpdateFlexSchedule:L,GetManagedEmployees:P,GetPosition:W,GetCostelements:B},Y=Object(c["i"])({name:"scheduleNavigation",data:function(){return{user:null,menus:[{text:"Work Schedule",display:"My Schedules",route:"/my-schedules",selected:!1,default:!0},{text:"Flex Schedule",display:"Flex Schedule",route:"/flex-schedule",selected:!1,default:!1},{text:"Schedule Management",display:"Team Schedules",route:"/team-schedules",selected:!1,default:!1},{text:"Employee Allocation",display:"Employee Allocations",route:"/employee-allocations",selected:!1,default:!1}],selectedMenu:null}},computed:{userFullName:function(){var e=this.user;return e?"".concat(e.FirstName," ").concat(e.LastName):""},authorizedMenus:function(){var e=[],t=this.user.AccessibleMenus;t.push("Flex Schedule");for(var n=this.menus,a=0;a<this.menus.length;a++){var c=n[a];-1!=t.indexOf(c.text)&&e.push(c)}return e}},methods:{selectMenu:function(e){this.$router.push(e.route),this.menus.forEach((function(e){e.selected=!1})),e.selected=!0},isSelected:function(e){return this.selectedMenu&&this.selectedMenu.text==e}},mounted:function(){var e=this;if(!window.Affinity||window.Affinity&&!window.Affinity.user)console.log("no affinity requesting authInfo"),R.AuthGetInfo().then((function(t){e.user=t}));else{console.log("loading user from Affinity lib"),this.user=window.Affinity.user;var t=this.menus.find((function(t){return t.route===e.$route.path}));if(!t){var n=this.menus.find((function(e){return!0===e.default}));this.selectMenu(n)}}}});n("18d6");Y.render=m,Y.__scopeId="data-v-722227b2";var H=Y,U=Object(c["P"])("data-v-9b88c2bc");Object(c["v"])("data-v-9b88c2bc");var $={class:"promt-box"},V={key:0,class:"mr-2 d-inline"},_=Object(c["h"])("img",{class:"loader-icon",src:"data:image/gif;base64,R0lGODlhEAAQAPQAADMzM8zMzDs7O3h4eERERKGhoYKCgszMzJaWlra2tmNjY1lZWb+/v21tbcjIyKqqqoyMjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="},null,-1),K={key:0,class:"promptButtons mt-4"},z={class:"label text-capitalize"},Q=Object(c["h"])("span",{class:""}," ",-1),G={class:"label text-capitalize"};Object(c["t"])();var J=U((function(e,t,n,a,s,l){var i=Object(c["A"])("modal");return Object(c["s"])(),Object(c["e"])(i,{ref:"alertModalRef",noBox:!0},{body:U((function(){return[Object(c["h"])("div",$,[Object(c["h"])("div",null,[e.showLoader?(Object(c["s"])(),Object(c["e"])("div",V,[_])):Object(c["f"])("",!0),Object(c["h"])("div",{class:"content ",innerHTML:e.message},null,8,["innerHTML"])]),e.showButtons?(Object(c["s"])(),Object(c["e"])("div",K,[Object(c["h"])("button",{type:"button",class:["orange white--text small",{"mr-4":e.showCancel}],tabindex:"9999998",onClick:t[1]||(t[1]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},[Object(c["h"])("span",z,Object(c["D"])(e.confirmButtonText),1)],2),Q,e.showCancel?(Object(c["s"])(),Object(c["e"])("button",{key:0,class:"grey white--text small",small:"",tabindex:"9999999",onClick:t[2]||(t[2]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},[Object(c["h"])("span",G,Object(c["D"])(e.cancelButtonText),1)])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])]})),_:1},512)})),q=Object(c["P"])("data-v-370a3a58");Object(c["v"])("data-v-370a3a58");var X={key:0,class:"modal-mask"},Z={class:"modal-wrapper"},ee={class:"modal-header"},te={class:"modal-body"},ne={class:"modal-footer"};Object(c["t"])();var ae=q((function(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])(c["b"],{name:"modal"},{default:q((function(){return[e.show?(Object(c["s"])(),Object(c["e"])("div",X,[Object(c["h"])("div",Z,[Object(c["h"])("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=function(){return e.clickWrapper&&e.clickWrapper.apply(e,arguments)})}),Object(c["h"])("div",{class:["modal-box",{"no-modal-box":e.noBox}],style:e.getCustomPosition()},[Object(c["h"])("div",ee,[Object(c["z"])(e.$slots,"header")]),Object(c["h"])("div",te,[Object(c["z"])(e.$slots,"body")]),Object(c["h"])("div",ne,[Object(c["z"])(e.$slots,"footer")])],6)])])):Object(c["f"])("",!0)]})),_:1})})),ce=(n("a9e3"),Object(c["i"])({name:"modal",props:{customPosition:{type:Boolean,default:!1},top:{type:Number},left:{type:Number},noBox:{type:Boolean}},data:function(){return{show:!1}},methods:{toggleShow:function(e){console.log("toggle clicked"),console.log("top",this.top),this.show=!0===e||!1===e?e:!this.show},clickWrapper:function(){this.show=!1,this.$emit("cancel")},getCustomPosition:function(){if(this.customPosition){var e={position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px")};return e}return""}}}));n("79ca");ce.render=ae,ce.__scopeId="data-v-370a3a58";var se=ce,le=Object(c["i"])({name:"alert",components:{Modal:se},data:function(){return{dialog:!1,message:"some message ",showLoader:!1,showButtons:!1,showCancel:!1,confirmButtonText:"Ok",cancelButtonText:"Cancel"}},mounted:function(){var e=this;Uo.on("alert",(function(t){console.log("emitter alert"),e.dialog=!0,e.message=t,e.showLoader=!1,e.showButtons=!0})),Uo.on("dialog--loading--request",(function(t){console.log("emitter loading request"),e.dialog=!0,e.message=t,e.showCancel=!1,e.showButtons=!1,e.showLoader=!0})),Uo.on("clearDialog",(function(){console.log("emitter clear dialog"),e.clearDialog(),e.dialog=!1})),Uo.on("dialog",(function(t){console.log("emitter on dialog"),e.toggleShow(),e.dialog=!!t,e.message=t.message,e.showCancel=t.showCancel,e.showButtons=t.showButtons,e.showLoader=t.showLoader,e.confirmButtonText=t.confirmButtonText?t.confirmButtonText:"Ok",e.cancelButtonText=t.cancelButtonText?t.cancelButtonText:"Cancel",t.onOk&&(e.onOk=function(){t.onOk(),e.dialog=!1,e.toggleShow()}),t.onCancel&&(e.onCancel=function(){t.onCancel(),e.dialog=!1,e.toggleShow()})}))},methods:{clearDialog:function(){this.$refs.alertModalRef.toggleShow(!1)},toggleShow:function(){this.$refs.alertModalRef.toggleShow()},onOk:function(){this.$refs.alertModalRef.toggleShow()},onCancel:function(){this.$refs.alertModalRef.toggleShow()}}});n("f962");le.render=J,le.__scopeId="data-v-9b88c2bc";var ie=le,oe={key:0,class:"UIPromtBoxBG"},re=Object(c["h"])("div",{class:"UIPromtBox loader"},[Object(c["h"])("span",{class:"img-loader"}),Object(c["h"])("span",{class:"content aligncenter"},"Please wait")],-1),de={key:1,class:"UIPromtBoxBG"},ue={class:"UIPromtBox error-text"},he=Object(c["h"])("br",null,null,-1),fe={key:2,class:"pagewrapper"},be={class:"pagecontent"},me={class:"contentwrapper"};function pe(e,t,n,a,s,l){var i=Object(c["A"])("dash-header"),o=Object(c["A"])("navbar"),r=Object(c["A"])("dash-footer");return Object(c["s"])(),Object(c["e"])("div",{class:{dashboard:s.enabled,"show-nav":s.showNav,"hide-nav":s.hideNav}},[s.loading?(Object(c["s"])(),Object(c["e"])("div",oe,[re])):s.error?(Object(c["s"])(),Object(c["e"])("div",de,[Object(c["h"])("div",ue,[Object(c["h"])("span",null,Object(c["D"])(s.error),1),he,Object(c["h"])("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=function(){return l.reloadPage&&l.reloadPage.apply(l,arguments)})},"Please retry")])])):(Object(c["s"])(),Object(c["e"])("div",fe,[Object(c["h"])(i,{title:l.userFullName,logoUrl:l.logoUrl,onNavtoggle:l.onNavToggle},null,8,["title","logoUrl","onNavtoggle"]),Object(c["h"])(o,{apps:s.apps,"logout-url":n.logoutUrl,onHide:l.onNavHide},null,8,["apps","logout-url","onHide"]),Object(c["h"])("div",be,[Object(c["h"])("div",me,[Object(c["z"])(e.$slots,"default")])]),Object(c["h"])(r,{version:n.version},null,8,["version"])]))],2)}var Oe={class:"dash-header"},je={id:"desktop-nav-toggle",class:"dash-menu-toggle"},ge={class:"dash-header-title displayname"},ye={class:"dash-header-logo"};function De(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",Oe,[Object(c["h"])("div",{id:"mobile-nav-toggle",class:"dash-menu-toggle",onMousedown:t[2]||(t[2]=Object(c["O"])((function(){}),["stop"]))},[Object(c["h"])("span",{class:"icon-list",onClick:t[1]||(t[1]=function(t){return e.$emit("navtoggle",!0)})})],32),Object(c["h"])("div",je,[Object(c["h"])("span",{class:"icon-list",onClick:t[3]||(t[3]=function(t){return e.$emit("navtoggle",!1)})})]),Object(c["h"])("div",ge,Object(c["D"])(n.title),1),Object(c["h"])("div",ye,[Object(c["h"])("img",{src:n.logoUrl},null,8,["src"])])])}var ve={props:{title:String,logoUrl:String}};ve.render=De;var Se=ve,ke={class:"top"},Ae={class:"bottom"},we=Object(c["h"])("div",{class:"divider"},null,-1),Ee=Object(c["h"])("span",{class:"dash-nav-item-inner"},[Object(c["h"])("span",{class:"icon icon-logout"}),Object(c["h"])("span",{class:"label"},"Logout")],-1);function Ce(e,t,n,a,s,l){var i=Object(c["A"])("nav-item"),o=Object(c["A"])("scrollable");return Object(c["s"])(),Object(c["e"])("div",{id:"dash-nav",class:"dash-nav accordion",onMousedown:t[1]||(t[1]=function(){return l.onMouseDown&&l.onMouseDown.apply(l,arguments)})},[Object(c["h"])("div",ke,[Object(c["h"])(o,{"scroll-x":!1},{default:Object(c["L"])((function(){return[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(l.enabledApps,(function(e,t){return Object(c["s"])(),Object(c["e"])(i,{data:e,key:t},null,8,["data"])})),128))]})),_:1})]),Object(c["h"])("div",Ae,[we,Object(c["h"])("a",{class:"dash-nav-item",href:l.signoutUrl},[Ee],8,["href"])])],32)}var xe=Object(c["h"])("span",{class:"sub-nav-icon icon-arrow-line-small-up"},null,-1),Te={class:"label"},Me={key:0,ref:"menu",class:"sub-nav"};function Fe(e,t,n,a,s,l){var i=Object(c["A"])("_self");return Object(c["s"])(),Object(c["e"])("a",{class:["dash-nav-item",{selected:l.selected,"has-sub-nav":l.hasMenu,expanded:!s.expanding}],href:l.url,target:l.target},[Object(c["h"])("div",{class:"dash-nav-item-inner",onClick:t[1]||(t[1]=function(){return l.toggleMenu&&l.toggleMenu.apply(l,arguments)})},[xe,Object(c["h"])("span",{class:"icon icon-"+n.data.Icon},null,2),Object(c["h"])("span",Te,Object(c["D"])(n.data.Text||n.data.Name),1)]),l.hasMenu&&s.expanded?(Object(c["s"])(),Object(c["e"])("div",Me,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(n.data.Menu,(function(e,t){return Object(c["s"])(),Object(c["e"])(i,{data:e,"is-owned":!0,key:t},null,8,["data"])})),128))],512)):Object(c["f"])("",!0)],10,["href","target"])}var Ne=n("c909"),Ie=n.n(Ne),Le=n("cffa"),Pe=n("5c40"),We={name:"nav-item",props:{data:{type:Object,default:function(){return{}}},host:String,isOwned:Boolean},data:function(){return{expanded:!1,expanding:!1}},computed:{target:function(){return this.data.External?this.data.Name||"_blank":"_self"},selected:function(){var e=new Ie.a(this.url).path().toLowerCase();return!this.isOwned&&Affinity.app==this.data.Name||"/"!==e&&e===window.location.pathname.toLowerCase()||"/cleverforms/inbox"===e&&"/inbox"===window.location.pathname.toLowerCase()||"/cleverforms/template"===e&&"/template"===window.location.pathname.toLowerCase()||"/cleverforms/admin"===e&&"/admin"===window.location.pathname.toLowerCase()},hasMenu:function(){return this.data.Menu&&this.data.Menu.length>0},url:function(){return this.hasMenu?"javascript:void(0);":this.data.Url}},methods:{toggleMenu:function(){var e=this;this.hasMenu&&(this.expanding=!this.expanded,this.expanding?(this.expanded=!0,Object(Pe["r"])((function(){Le["a"].from(e.$refs.menu,{duration:.25,height:0})}))):Le["a"].to(this.$refs.menu,{duration:.25,height:0,onComplete:function(){e.expanded=!1}}))}},mounted:function(){this.expanded=this.selected&&this.hasMenu,this.expanding=this.expanded}};We.render=Fe;var Be=We,Re={ref:"container",class:"scrollable"};function Ye(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",Re,[Object(c["z"])(e.$slots,"default")],512)}var He=n("b7f5"),Ue=n("eec4"),$e=n.n(Ue),Ve=(n("7da8"),{props:{scrollX:{type:Boolean,default:!0},scrollY:{type:Boolean,default:!0}},data:function(){return{ps:null,resizeDetector:$e()({strategy:"scroll"})}},methods:{onResize:function(){this.ps&&this.ps.update(this.$refs.container)}},mounted:function(){this.ps=new He["a"](this.$refs.container,{suppressScrollX:!this.scrollX,suppressScrollY:!this.scrollY}),this.resizeDetector.listenTo(this.$refs.container,this.onResize);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.listenTo(t,this.onResize)}},beforeUnmount:function(){this.resizeDetector.uninstall(this.$refs.container);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.uninstall(t)}}});Ve.render=Ye;var _e=Ve,Ke={props:{apps:Array,logoutUrl:String},data:function(){return{mousedown:!1}},computed:{enabledApps:function(){if(this.apps instanceof Array){var e=[];return this.apps.forEach((function(t){t&&t.Enabled&&e.push(t)})),e}return[]},signoutUrl:function(){if(this.logoutUrl)return this.logoutUrl;for(var e=this.apps[0].Url,t=1;t<this.apps.length;t++){var n=this.apps[t];if(n&&n.Name==Affinity.app)return e+"/Root/ExternalLogout?redirectUrl="+encodeURI(n.Url)}return"/Auth/SignOut"}},methods:{onMouseDown:function(){this.mousedown=!0},onBodyMouseDown:function(e){this.mousedown||this.$emit("hide"),this.mousedown=!1}},created:function(){document.body.addEventListener("mousedown",this.onBodyMouseDown)},beforeDestroy:function(){document.body.removeEventListener("mousedown",this.onBodyMouseDown)},components:{NavItem:Be,Scrollable:_e}};Ke.render=Ce;var ze=Ke,Qe={class:"dash-footer"},Ge={key:0,class:"version"},Je=Object(c["h"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},"Affinity Employer Services",-1),qe=Object(c["h"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},[Object(c["h"])("span",{class:"dash-footer-logo"})],-1);function Xe(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",Qe,[n.version?(Object(c["s"])(),Object(c["e"])("span",Ge,"Version "+Object(c["D"])(n.version),1)):Object(c["f"])("",!0),Object(c["g"])(" © Copyright "+Object(c["D"])(l.year)+" Affinity - ",1),Je,qe])}var Ze={props:{version:String},computed:{year:function(){return(new Date).getFullYear()}}};Ze.render=Xe;var et=Ze,tt=(n("e439"),n("a273"),n("8241"),n("9ede"),n("69af"),{props:{version:String,enableByConfig:Boolean,configUrl:String,infoUrl:String,logoutUrl:String,legacyAuth:Boolean},data:function(){return{user:null,error:null,apps:[{Enabled:!0,Name:"Dashboard",Url:"",Icon:"gauge"}],loading:!0,enabled:!0,showNav:!1,hideNav:!1}},computed:{userFullName:function(){return this.user?"".concat(this.user.FirstName," ").concat(this.user.LastName):""},logoUrl:function(){var e=this.apps[0].Url;return e&&this.user?"".concat(e,"/Root/Logo?company=").concat(this.user.CompanyNo,"&employee=").concat(this.user.EmployeeNo):""}},methods:{authorize:function(e){var t=this;console.log("dashboard authorize");var n={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.legacyAuth?Affinity.authroot+"/GetUser":this.infoUrl};O()(n).then((function(n){var a=Affinity.user=t.legacyAuth?{FirstName:n.data.Firstname,LastName:n.data.Lastname,PayPoint:n.data.PayPoint,CompanyNo:n.data.CompanyNumber,EmployeeNo:n.data.EmployeeNumber}:n.data;t.enabled=!t.enableByConfig||a.UseDashboard,e&&e()})).catch((function(e){console.log("err",e),t.error="Unable to load the page.",t.loading=!1}))},getConfig:function(){var e=this,t={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.configUrl};O()(t).then((function(t){var n=t.data;e.user=Affinity.user,e.apps[0].Url=n.Url,n.Apps&&n.Apps.forEach((function(t){e.apps.push(t.Link)})),n.Forms&&e.user.EmployeeNo<=5e6&&n.Forms.forEach((function(t){t.Enabled&&e.apps.push(t)})),e.loading=!1,Object(Pe["r"])((function(){e.$emit("ready",n)}))})).catch((function(){e.error="Unable to load the page."})).then((function(){e.loading=!1}))},reloadPage:function(){window.location.reload()},onNavToggle:function(e){e?this.showNav=!this.showNav:this.hideNav=!this.hideNav},onNavHide:function(){this.showNav=!1}},created:function(){var e=this;console.log("dashboard created"),this.authorize((function(){e.enabled?e.getConfig():e.loading=!1}))},components:{"dash-header":Se,navbar:ze,"dash-footer":et}});n("1a69");tt.render=pe;var nt=tt,at=nt,ct={name:"App",components:{Dashboard:at,schedulesNavigation:H,Alert:ie},mounted:function(){console.log("app vue created")}};n("7bd0");ct.render=l;var st=ct,lt=n("6c02"),it={class:"mt-4 mt-md-10"},ot={class:"my-schedules-search-filter d-flex flex-wrap align-center mb-sm-4"},rt={class:" mr-2 mr-sm-6 date-searcher d-flex align-center"},dt=Object(c["h"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date From",-1),ut=Object(c["h"])("span",{class:"icon-popup white xs-icon"},null,-1),ht=Object(c["h"])("span",{class:"icon-calendar white xs-icon"},null,-1),ft=Object(c["h"])("span",{class:"icon-cross white"},null,-1),bt={class:"date-searcher d-flex align-center ml-4"},mt=Object(c["h"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date To",-1),pt=Object(c["h"])("span",{class:"icon-popup white","x-small":""},null,-1),Ot=Object(c["h"])("span",{class:"icon-calendar white","x-small":""},null,-1),jt=Object(c["h"])("span",{class:"icon-cross white","x-small":""},null,-1),gt=Object(c["h"])("span",{class:"mr-1 icon-printer","x-small":""},null,-1),yt=Object(c["h"])("span",{class:"text-capitalize"},"Print",-1),Dt={style:{"margin-top":"10px"}},vt={class:"schedules-data-small",style:{overflow:"auto"}},St={class:"",style:{width:"100%"}},kt={class:"weekInfoDisplay py-2"},At={class:"schedules-data-small-head"},wt={class:"dayScheduleDisplay"},Et={key:0},Ct={key:0},xt={key:1},Tt={key:2},Mt={id:"workSchedules",class:"schedules-data-medium section",style:{overflow:"auto"}},Ft={class:"my-schedules aff-table"},Nt=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Week"),Object(c["h"])("th",null,"Mon"),Object(c["h"])("th",null,"Tue"),Object(c["h"])("th",null,"Wed"),Object(c["h"])("th",null,"Thu"),Object(c["h"])("th",null,"Fri"),Object(c["h"])("th",null,"Sat"),Object(c["h"])("th",null,"Sun")])],-1),It={class:"myschedules-tr"},Lt={class:"weekInfoRows"},Pt={class:"myschedules-td"},Wt={key:0},Bt={class:"bold-text"},Rt={key:0},Yt={key:1};function Ht(e,t){var n=Object(c["A"])("date-picker"),a=Object(c["B"])("tooltip");return Object(c["s"])(),Object(c["e"])("div",it,[Object(c["h"])("div",ot,[Object(c["h"])("div",rt,[dt,Object(c["h"])("input",{value:e.$filters.reformatDate(e.fromDate),class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[1]||(t[1]=function(t){return e.updateDateText(t,e.fromDate,"fromDate")}),onClick:t[2]||(t[2]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")}),"onClick:clear":t[3]||(t[3]=function(t){return e.fromDate=null})},null,40,["value"]),Object(c["M"])(Object(c["h"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",onClick:t[4]||(t[4]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")})},[ut],512),[[a,{content:"Open calendar"},void 0,{top:!0}]]),Object(c["M"])(Object(c["h"])("button",{class:"green small px-aff-10 lh-0",onClick:t[5]||(t[5]=function(t){return e.selectDateTodayForFromDate()})},[ht],512),[[a,{content:"Set to today"},void 0,{top:!0}]]),Object(c["M"])(Object(c["h"])("button",{class:"orange small px-aff-10 lh-0",onClick:t[6]||(t[6]=function(t){return e.fromDate=null})},[ft],512),[[a,{content:"Clear"},void 0,{top:!0}]])]),Object(c["h"])("div",bt,[mt,Object(c["h"])("input",{value:e.$filters.reformatDate(e.toDate),outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[7]||(t[7]=function(t){return e.updateDateText(t,e.toDate,"toDate")}),onClick:t[8]||(t[8]=function(t){return e.updateDateTime(t,e.toDate,"toDate")}),"onClick:clear":t[9]||(t[9]=function(t){return e.toDate=null})},null,40,["value"]),Object(c["M"])(Object(c["h"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",tile:"",onClick:t[10]||(t[10]=function(t){return e.updateDateTime(t,e.toDate,"toDate")})},[pt],512),[[a,{content:"Open calendar"},void 0,{top:!0}]]),Object(c["M"])(Object(c["h"])("button",{class:"green small px-aff-10 lh-0",tile:"",onClick:t[11]||(t[11]=function(t){return e.selectDateTodayForToDate()})},[Ot],512),[[a,{content:"Set to today"},void 0,{top:!0}]]),Object(c["M"])(Object(c["h"])("button",{class:"orange small px-aff-10 lh-0",tile:"",onClick:t[12]||(t[12]=function(t){return e.toDate=null})},[jt],512),[[a,{content:"Clear"},void 0,{top:!0}]])]),Object(c["h"])("button",{class:"light-blue white--text ml-4 ml-sm-4 mt-sm-0 px-aff-10 small",onClick:t[13]||(t[13]=function(t){return e.printWorkSchedule()})},[gt,yt])]),Object(c["h"])("div",Dt,[Object(c["h"])("div",vt,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.schedules,(function(t){return Object(c["s"])(),Object(c["e"])("div",St,[Object(c["h"])("div",kt,[Object(c["h"])("div",At,[Object(c["h"])("div",null,[Object(c["h"])("h3",null,Object(c["D"])(t.weekName),1)]),Object(c["h"])("div",null,Object(c["D"])(t.weekDateRange),1)])]),(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(t.detailArr,(function(n,a){return Object(c["s"])(),Object(c["e"])("div",wt,[Object(c["h"])("div",null,Object(c["D"])(t.weekName)+" - "+Object(c["D"])(e.getWeekDayByIndex(a)),1),e.displayScheduleDetail(n)?(Object(c["s"])(),Object(c["e"])("div",Et,[Object(c["h"])("div",null,Object(c["D"])(n.shiftDescription),1),n.startTime?(Object(c["s"])(),Object(c["e"])("div",Ct,"Start Time:"+Object(c["D"])(n.startTime),1)):Object(c["f"])("",!0),n.finishTime?(Object(c["s"])(),Object(c["e"])("div",xt,"Finish Time:"+Object(c["D"])(n.finishTime),1)):Object(c["f"])("",!0),n.hours?(Object(c["s"])(),Object(c["e"])("div",Tt,"Hours:"+Object(c["D"])(n.hours),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])})),256))])})),256))]),Object(c["h"])("div",Mt,[Object(c["h"])("div",Ft,[Object(c["h"])("table",null,[Nt,Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.schedules,(function(t){return Object(c["s"])(),Object(c["e"])("tr",It,[Object(c["h"])("td",Lt,[Object(c["h"])("div",null,Object(c["D"])(t.weekName),1),Object(c["h"])("div",null,Object(c["D"])(t.weekDateRange),1)]),(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(t.detailArr,(function(t){return Object(c["s"])(),Object(c["e"])("td",Pt,[e.displayScheduleDetail(t)?(Object(c["s"])(),Object(c["e"])("div",Wt,[Object(c["h"])("div",null,Object(c["D"])(t.date),1),Object(c["h"])("div",Bt,Object(c["D"])(t.shiftDescription),1),t.hours?(Object(c["s"])(),Object(c["e"])("div",Rt,"Hours:"+Object(c["D"])(t.hours),1)):Object(c["f"])("",!0),t.startTime?(Object(c["s"])(),Object(c["e"])("div",Yt,Object(c["D"])(t.startTime)+" - "+Object(c["D"])(t.finishTime),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])})),256))])})),256))])])])])]),Object(c["h"])(n,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.datePickerTargetDay},null,8,["top","leftInput","date"])])}var Ut=n("1da1"),$t=(n("96cf"),n("c1df")),Vt=n.n($t);function _t(){Uo.emit("dialog",{message:"here is a test dialog",showButtons:!0,showCancel:!0,okColor:"orange"})}function Kt(e){Uo.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){e.onOk()},onCancel:function(){e.onCancel&&e.onCancel()}})}function zt(e){Uo.emit("dialog",{dialog:!0,message:e,showLoader:!1,showButtons:!0,onOk:function(){},onCancel:function(){}})}function Qt(e){Uo.emit("dialog",{dialog:!0,message:e||"Loading",showCancel:!1,showButtons:!1,showLoader:!0})}function Gt(){Uo.emit("clearDialog")}var Jt={testDialog:_t,loading:Qt,clear:Gt,checkChange:Kt,alert:zt},qt=Object(c["P"])("data-v-dbcc9dca");Object(c["v"])("data-v-dbcc9dca");var Xt={class:"v3-calendar"},Zt={class:"dp-heading"},en={class:"db-content"},tn={class:"dp-week-of-day"},nn={class:"dp-week-days"},an={class:"date-wrapper"};Object(c["t"])();var cn=qt((function(e,t){var n=Object(c["A"])("Modal");return Object(c["s"])(),Object(c["e"])(n,{ref:"ModalRef",top:e.top,left:e.calculateLeft(e.left),customPosition:!(!e.top&&!e.left),onCancel:e.cancelPickDate},{body:qt((function(){return[Object(c["h"])("div",Xt,[Object(c["h"])("section",Zt,[Object(c["h"])("span",{class:"icon-arrow-left",onClick:t[1]||(t[1]=function(){return e.previousMonth&&e.previousMonth.apply(e,arguments)})}),Object(c["h"])("div",null,Object(c["D"])(e.selectedDate.format("YYYY MMM")),1),Object(c["h"])("span",{class:"icon-arrow-right",onClick:t[2]||(t[2]=function(){return e.nextMonth&&e.nextMonth.apply(e,arguments)})})]),Object(c["h"])("section",en,[Object(c["h"])("div",tn,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.weekOfDays,(function(e){return Object(c["s"])(),Object(c["e"])("span",null,Object(c["D"])(e.shortName),1)})),256))]),Object(c["h"])("div",nn,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.calendarArr,(function(t){return Object(c["s"])(),Object(c["e"])("span",an,[Object(c["h"])("span",{class:["date-number-cell",{"today-target":e.colorToday(t),"last-month-day":t.lastMonth,"next-month-day":t.nextMonth,selected:t.selected}],onClick:function(n){return e.selectDate(t)}},Object(c["D"])(t.dateNumber),11,["onClick"])])})),256))])])])]})),_:1},8,["top","left","customPosition","onCancel"])})),sn=Object(c["i"])({name:"DatePicker",components:{Modal:se},props:{top:{type:Number},leftInput:{type:Number},date:{type:Object}},data:function(){return{left:0,currentYear:2021,datePickerPromise:null,resolve:null,reject:null,selectedDate:Vt()(),weekOfDays:[{fullName:"Sunday",shortName:"Sun",dayNumber:0},{fullName:"Monday",shortName:"Mon",dayNumber:1},{fullName:"Tuesday",shortName:"Tue",dayNumber:2},{fullName:"Wednesday",shortName:"Wed",dayNumber:3},{fullName:"Thursday",shortName:"Thu",dayNumber:4},{fullName:"Friday",shortName:"Fri",dayNumber:5},{fullName:"Saturday",shortName:"Sat",dayNumber:6}]}},setup:function(){var e=Object(c["x"])([]),t=Object(c["x"])();return t.value=Vt()().month(),console.log(e),{currentMonth:t,calendarArr:e}},mounted:function(){var e=this;console.log("mounted date picker"),this.calculateMonth(),console.log("top",this.top),console.log("left",this.left),this.datePickerPromise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},methods:{cancelPickDate:function(){this.reject()},calculateLeft:function(){return this.leftInput?(window.innerWidth<this.leftInput+370?this.left=window.innerWidth-400:this.left=this.leftInput,this.left):""},nextMonth:function(){this.currentMonth=this.currentMonth+1,this.calculateMonth()},previousMonth:function(){this.currentMonth=this.currentMonth-1,this.calculateMonth()},colorToday:function(e){var t=Vt()();return t.year()===e.year&&t.month()+1===e.month&&t.date()===e.dateNumber},selectDateOnly:function(e){var t,n=Object(a["a"])(this.calendarArr);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.year===e.year()&&c.month===e.month()+1&&c.dateNumber===e.date()?c.selected=!0:c.selected=!1}}catch(s){n.e(s)}finally{n.f()}},selectDate:function(e){console.log("selected date",e),this.selectedDate=this.selectedDate.date(e.dateNumber);var t,n=Object(a["a"])(this.calendarArr);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.selected=!1}}catch(s){n.e(s)}finally{n.f()}e.selected=!0,this.$refs.ModalRef.toggleShow(),this.resolve(this.selectedDate.clone())},calculateMonth:function(e){e||(e=Vt()());var t=e.clone().month(this.currentMonth),n=t.startOf("month").day(),a=t.endOf("month").day(),c=[],s=t.clone().date(0).date(),l=s-(n-1);for(l;l<=s;l++)c.push({year:t.clone().date(0).year(),month:t.clone().date(0).month()+1,dateNumber:l,selected:!1,lastMonth:!0});var i=1,o=t.endOf("month").date();for(i;i<=o;i++)c.push({year:t.year(),month:t.month()+1,dateNumber:i,selected:!1});var r=1,d=7-a-1;for(r;r<=d;r++)c.push({year:t.clone().add(1,"month").year(),month:t.clone().add(1,"month").month()+1,dateNumber:r,selected:!1,nextMonth:!0});this.calendarArr=c,t.endOf("month").date()<=this.selectedDate.date()?this.selectedDate=t.endOf("month").clone():this.selectedDate=t.date(this.selectedDate.date())},toggleShow:function(e){var t=this;return console.log("this.top date picker",this.top),e?(this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year(),this.selectDateOnly(e)):(e=Vt()(),this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year()),this.$refs.ModalRef.toggleShow(),this.datePickerPromise=new Promise((function(e,n){t.resolve=e,t.reject=n})),this.waitPickDate()},waitPickDate:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.datePickerPromise);case 1:case"end":return t.stop()}}),t)})))()}}});n("1f8e");sn.render=cn,sn.__scopeId="data-v-dbcc9dca";var ln,on=sn;(function(e){e["fromDate"]="fromDate",e["toDate"]="toDate"})(ln||(ln={}));var rn=Object(c["i"])({name:"mySchedules",components:{DatePicker:on},data:function(){return{title:"Work Schedule",schedules:[],user:null,datePickerFormat:"dd/MM/yyyy",menu1:!1,menu2:!1,fromDate:null,toDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:Vt()(),selectedDateType:ln.fromDate}},mounted:function(){var e=new Date;e.setHours(0,0,0,0);var t=e.getDate(),n=e.getDay(),a=new Date;a.setHours(0,0,0,0);var c=new Date;c.setHours(0,0,0,0);var s=0==n?7:n;a.setDate(t-(s-1)),c.setDate(t+(7-s)),this.fromDate=Vt()(a),this.toDate=Vt()(c),this.loadSchedules(this.fromDate,this.toDate)},methods:{updateDateText:function(e,t,n){"toDate"===n?this.toDate=Vt()(e.target.value,"DD/MM/YYYY"):this.fromDate=Vt()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t,n){var a=e.target.getClientRects()[0];this.dateModalTop=a.bottom,this.dateModalLeft=a.left,this.selectedDateType=n,this.datePickerTargetDay="toDate"===n?this.toDate?this.toDate:Vt()():this.fromDate?this.fromDate:Vt()(),this.dateModal=!0,this.openDatePicker()},printWorkSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("workSchedules").innerHTML,n=window.open("","Print",e);n.document.write("<html>"),n.document.write("<head>"),n.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),n.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),n.document.write("</head>"),n.document.write("<body>"),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),n.print(),n.close()},loadSchedules:function(e,t){var n=this;if(null!==e&&e.startOf("day"),null!==t&&""!==t&&t.startOf("day"),this.schedules=[],null!==t||null!==e){null!==t&&null===e&&(e=t),null===t&&null!==e&&(t=e);var c={employeeNo:null,fromDate:null,toDate:null};if(null!==e&&null!==t){var s=e.format("DD/MM/YYYY"),l=t.format("DD/MM/YYYY");c={employeeNo:1148,fromDate:s,toDate:l}}console.log("dialog loading EmployeeWorkSchedule"),Jt.loading(),R.EmployeeWorkSchedule(c).then((function(e){var t,c=e,s=Object(a["a"])(c);try{for(s.s();!(t=s.n()).done;){var l=t.value;l.detailArr=[],l.detailArr.push(l.mondayScheduleDetail),l.detailArr.push(l.tuesdayScheduleDetail),l.detailArr.push(l.wednesdayScheduleDetail),l.detailArr.push(l.thursdayScheduleDetail),l.detailArr.push(l.fridayScheduleDetail),l.detailArr.push(l.saturdayScheduleDetail),l.detailArr.push(l.sundayScheduleDetail);var i,o=Object(a["a"])(l.detailArr);try{for(o.s();!(i=o.n()).done;){var r=i.value;("12:00 am"===r.finishTime&&"12:00 am"===r.startTime||"12:00 AM"===r.finishTime&&"12:00 AM"===r.startTime)&&(r.finishTime="",r.startTime=""),"0"===r.hours&&(r.hours="",r.shiftDescription="")}}catch(d){o.e(d)}finally{o.f()}}}catch(d){s.e(d)}finally{s.f()}n.schedules=c,Jt.clear()})).finally((function(){Jt.clear(),console.log("dialog clear EmployeeWorkSchedule")}))}},displayScheduleDetail:function(e){return 0!==e.hours&&null!==e.hours&&""!==e.hours},selectDateTodayForFromDate:function(){this.fromDate=Vt()().startOf("day"),this.toDate=null,this.loadSchedules(this.fromDate,this.toDate)},selectDateTodayForToDate:function(){this.toDate=Vt()(),this.toDate.hour(11),this.toDate.minute(59),this.toDate<this.fromDate&&(this.fromDate=null),this.loadSchedules(this.fromDate,this.toDate)},getWeekDayByIndex:function(e){var t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return t[e]},openDatePicker:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return n=t.sent,e.selectedDateType===ln.toDate?e.toDate=n:e.selectedDateType===ln.fromDate&&(e.fromDate=n),e.loadSchedules(e.fromDate,e.toDate),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()}}});n("fcab");rn.render=Ht;var dn=rn,un=Object(c["P"])("data-v-5cb8baa9");Object(c["v"])("data-v-5cb8baa9");var hn={class:"vue-sched-management"},fn={class:"sched-card-default mr-4 mr-xs-0"},bn=Object(c["h"])("div",null,[Object(c["h"])("h3",null,"Schedules")],-1),mn={key:0,class:"sched-card-default sched-detail-card sche-detail-mt"},pn={key:0},On=Object(c["h"])("h3",null,"Create New Schedule",-1),jn={key:1,class:"d-flex justify-space-between"},gn=Object(c["h"])("h3",null,"Schedule Details",-1),yn={key:3,class:"sched-man-allocations mt-4"},Dn=Object(c["h"])("div",{class:"caption font-weight-bold text-start"},"Employee Allocations",-1),vn={class:"aff-table mt-4"},Sn=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Employee Name"),Object(c["h"])("th",{class:"text-center"},"Date From"),Object(c["h"])("th",{class:"text-center"},"Date To")])],-1),kn={class:"text-center"},An={class:"text-center"},wn={class:"d-flex justify-end mt-2"};Object(c["t"])();var En=un((function(e,t){var n=Object(c["A"])("search-schedule"),a=Object(c["A"])("schedule-detail");return Object(c["s"])(),Object(c["e"])("div",hn,[Object(c["M"])(Object(c["h"])("div",fn,[bn,Object(c["h"])(n,{ref:"searchScheduleRef",onCreateNewSchedule:e.createNewSchedule,onSelectSchedFromSearch:e.selectSchedulesDetail},null,8,["onCreateNewSchedule","onSelectSchedFromSearch"])],512),[[c["J"],!e.createNew]]),e.schedDetail?(Object(c["s"])(),Object(c["e"])("div",mn,[e.createNew?(Object(c["s"])(),Object(c["e"])("div",pn,[On])):(Object(c["s"])(),Object(c["e"])("div",jn,[gn,Object(c["h"])("span",{class:"icon-cross vp-icon",onClick:t[1]||(t[1]=function(t){return e.closeScheduleDetail(!0)})})])),e.schedDetail?(Object(c["s"])(),Object(c["e"])(a,{key:2,ref:"detail",shiftTypeList:e.shiftTypeList,detail:e.schedDetail,"read-only":0,onCancel:e.cancelScheduleDetail,onReload:e.reloadSchedulesDetail,onScheduleSaved:e.scheduleSaved,onScheduleDeleted:e.scheduleDeleted},null,8,["shiftTypeList","detail","onCancel","onReload","onScheduleSaved","onScheduleDeleted"])):Object(c["f"])("",!0),e.schedDetail&&e.schedDetail.EmpAllocations&&e.schedDetail.EmpAllocations.length>0?(Object(c["s"])(),Object(c["e"])("div",yn,[Dn,Object(c["h"])("div",vn,[Object(c["h"])("table",null,[Sn,Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.schedDetail.EmpAllocations,(function(t){return Object(c["s"])(),Object(c["e"])("tr",{class:{"hide-none-active-detail":!t.isActive&&e.showActiveSchedule}},[Object(c["h"])("td",null,Object(c["D"])(t.EmployeeName),1),Object(c["h"])("td",kn,Object(c["D"])(t.DateFrom|e.date),1),Object(c["h"])("td",An,Object(c["D"])(t.DateTo|e.date),1)],2)})),256))])])]),Object(c["h"])("div",wn,[Object(c["h"])("button",{class:"grey white--text text-capitalize small",onClick:t[2]||(t[2]=function(){return e.toggleShowActiveSchedule&&e.toggleShowActiveSchedule.apply(e,arguments)})},[Object(c["M"])(Object(c["h"])("span",null,"Show Active",512),[[c["J"],!e.showActiveSchedule]]),Object(c["M"])(Object(c["h"])("span",null,"Show All",512),[[c["J"],e.showActiveSchedule]])])])])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])})),Cn=Object(c["P"])("data-v-348312c8");Object(c["v"])("data-v-348312c8");var xn={class:"default-form sched-detail-form mt-4"},Tn={class:"caption d-flex justify-space-between"},Mn={class:"full-width d-flex align-center"},Fn=Object(c["h"])("div",{class:"form-label"},"Name",-1),Nn={key:0,class:"red--text"},In={class:"caption d-flex mt-4"},Ln=Object(c["h"])("div",{class:"form-label"},"Description",-1),Pn={class:"caption mt-4"},Wn=Object(c["h"])("div",{class:"form-label"},"Effective Date",-1),Bn={class:"caption mt-4 ml-4 d-inline number-of-weeks"},Rn=Object(c["h"])("div",{class:"d-inline mr-4 bold-text"},"Number of Weeks",-1),Yn=Object(c["h"])("label",{for:"now"},null,-1),Hn={class:"mobile-arrow"},Un=Object(c["h"])("span",null,"icon-arrowhead-up",-1),$n=Object(c["h"])("span",{class:"mt-1"},"icon-arrowhead-down",-1),Vn={class:"section-table ui-gridbox-scrollable-titles mt-4"},_n={class:"aff-table sched-detail-table"},Kn=Object(c["h"])("th",null,"Week",-1),zn=Object(c["h"])("th",null,"Day",-1),Qn=Object(c["h"])("th",null,"Hours",-1),Gn=Object(c["h"])("th",null,"Start",-1),Jn=Object(c["h"])("th",null,"Finish",-1),qn={class:"table-date-counter"},Xn={class:"mr-2"},Zn={class:"shift-select-td"},ea={class:"schedules-buttons form-row d-flex flex-wrap justify-end mt-2"},ta={key:0},na={key:1},aa=Object(c["h"])("span",{class:"icon-trash mr-1"},null,-1),ca=Object(c["h"])("span",null,"Delete",-1),sa=Object(c["h"])("span",{class:"icon-briefcase mr-1"},null,-1),la=Object(c["h"])("span",null,"Archive",-1),ia=Object(c["h"])("span",{class:"icon-cancel mr-1"},null,-1),oa=Object(c["h"])("span",null,"Cancel",-1),ra=Object(c["h"])("span",{class:"icon-save mr-1"},null,-1),da=Object(c["h"])("span",null,"Save",-1);Object(c["t"])();var ua=Cn((function(e,t){var n=Object(c["A"])("date-picker"),a=Object(c["B"])("tooltip");return Object(c["s"])(),Object(c["e"])("div",xn,[Object(c["h"])("form",{onChange:t[22]||(t[22]=function(){return e.formUpdated&&e.formUpdated.apply(e,arguments)}),onSubmit:t[23]||(t[23]=Object(c["O"])((function(t){return e.formSubmited(t)}),["prevent"]))},[Object(c["h"])("div",Tn,[Object(c["h"])("div",Mn,[Fn,e.isNewSchedule?Object(c["M"])((Object(c["s"])(),Object(c["e"])("input",{key:0,class:"caption",name:"name",onKeyup:t[1]||(t[1]=function(t){return e.hasChanges=!0}),counter:"49","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.detail.Name=t})},null,544)),[[c["I"],e.detail.Name]]):Object(c["M"])((Object(c["s"])(),Object(c["e"])("div",{key:1,class:"label-detail"},Object(c["D"])(e.detail.Name),513)),[[a,{content:e.detail.Name,delay:{show:3e3,hide:100}},void 0,{top:!0}]])]),e.detail.Archive?(Object(c["s"])(),Object(c["e"])("div",Nn,"Archived")):Object(c["f"])("",!0)]),Object(c["h"])("div",In,[Ln,Object(c["M"])(Object(c["h"])("textarea",{class:"white caption description-area","hide-details":"",rows:"2",onKeyup:t[3]||(t[3]=function(t){return e.hasChanges=!0}),outlined:"",dense:"","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.detail.Description=t})},null,544),[[c["I"],e.detail.Description]])]),Object(c["h"])("div",Pn,[Wn,Object(c["h"])("input",{class:"date-input",value:e.$filters.reformatDate(e.detail.StartDate),onClick:t[5]||(t[5]=function(){return e.openDatePicker&&e.openDatePicker.apply(e,arguments)})},null,8,["value"]),Object(c["h"])("div",Bn,[Rn,Yn,Object(c["M"])(Object(c["h"])("input",{class:"number-input",id:"now",name:"now",type:"number","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.detail.NoOfWeeks=t}),onChange:t[7]||(t[7]=function(){return e.updateNoOfWeeks&&e.updateNoOfWeeks.apply(e,arguments)}),onKeydown:t[8]||(t[8]=function(){return e.numLimitKeyDown&&e.numLimitKeyDown.apply(e,arguments)}),style:{width:"60px"}},null,544),[[c["I"],e.detail.NoOfWeeks]]),Object(c["h"])("div",Hn,[e.detail.NoOfWeeks<12?(Object(c["s"])(),Object(c["e"])("button",{key:0,type:"button",icon:"",small:"",color:"grey",onClick:t[9]||(t[9]=function(){return e.increaseNumber&&e.increaseNumber.apply(e,arguments)})},[Un])):Object(c["f"])("",!0),e.detail.NoOfWeeks>1?(Object(c["s"])(),Object(c["e"])("button",{key:1,type:"button",icon:"",small:"",color:"grey",onClick:t[10]||(t[10]=function(){return e.reduceNumber&&e.reduceNumber.apply(e,arguments)})},[$n])):Object(c["f"])("",!0)])])]),Object(c["h"])("div",Vn,[Object(c["h"])("div",_n,[Object(c["h"])("table",{class:["sched-detail-days",{"shift-min-width":e.showShift}]},[Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Kn,zn,Qn,Gn,Jn,Object(c["M"])(Object(c["h"])("th",null,"Shift",512),[[c["J"],e.showShift]])])]),Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.detail.Days,(function(n){return Object(c["s"])(),Object(c["e"])("tr",{key:n.DayNumber},[Object(c["h"])("td",null,[Object(c["M"])(Object(c["h"])("span",null,Object(c["D"])(n.Week),513),[[c["J"],e.isFirstDayOfWeek(n.DayOfWeek)]])]),Object(c["h"])("td",qn,[Object(c["h"])("span",Xn,Object(c["D"])(n.DayNumber+1),1),Object(c["h"])("span",null,Object(c["D"])(e.getDayOfWeek(n.DayOfWeek)),1)]),Object(c["h"])("td",null,[Object(c["M"])(Object(c["h"])("input",{type:"number",step:"any",min:"0",max:"24","onUpdate:modelValue":function(e){return n.Hours=e},class:"caption sched-detail-table-input",center:"",name:"Sche Hour",outlined:"",dense:"","hide-details":"",autocomplete:"off",error:n.error,onKeydown:t[11]||(t[11]=function(t){return e.numLimitKeyDown(t,!0,!1)}),onChange:function(t){return e.checkHour(n)},"data-test":n.Hours},null,40,["onUpdate:modelValue","error","onChange","data-test"]),[[c["I"],n.Hours,void 0,{number:!0}]])]),Object(c["h"])("td",null,[Object(c["h"])("input",{value:e.$filters.reformatTime(n.StartTime),name:"Sche StartTime",outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,n,"StartTime")},onKeydown:t[12]||(t[12]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[13]||(t[13]=function(t){return e.fromDate=null})},null,40,["value","onChange"])]),Object(c["h"])("td",null,[Object(c["h"])("input",{value:e.$filters.reformatTime(n.FinishTime),name:"Sche FinishTime",outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,n,"FinishTime")},onKeydown:t[14]||(t[14]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[15]||(t[15]=function(t){return e.fromDate=null})},null,40,["value","onChange"])]),Object(c["M"])(Object(c["h"])("td",Zn,[Object(c["M"])(Object(c["h"])("select",{class:"caption",dense:"",outlined:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0},"onUpdate:modelValue":function(e){return n.ShiftId=e},onChange:t[16]||(t[16]=function(t){return e.hasChanges=!0}),items:e.shifts,"item-text":"name","item-value":"name"},null,40,["onUpdate:modelValue","items"]),[[c["H"],n.ShiftId]])],512),[[c["J"],e.showShift]])])})),128))])],2)])]),Object(c["h"])("div",ea,[Object(c["h"])("button",{type:"button",class:"white--text grey caption text-capitalize mr-2 mt-2 small",onClick:t[17]||(t[17]=function(){return e.toggleShift&&e.toggleShift.apply(e,arguments)})},[e.showShift?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("span",ta,"Show Shift")),e.showShift?(Object(c["s"])(),Object(c["e"])("span",na,"Hide Shift")):Object(c["f"])("",!0)]),!e.isNewSchedule&&e.detail.EmpAllocations&&0===e.detail.EmpAllocations.length?(Object(c["s"])(),Object(c["e"])("button",{key:0,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[18]||(t[18]=function(t){return e.deleteSchedule()})},[aa,ca],8,["disabled"])):Object(c["f"])("",!0),e.detail.Archive||e.isNewSchedule?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("button",{key:1,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[19]||(t[19]=function(t){return e.archiveSchedule()})},[sa,la],8,["disabled"])),Object(c["h"])("button",{type:"button",class:"white--text grey text-capitalize mr-2 mt-2 small",disabled:!e.hasChanges&&!e.isNewSchedule,onClick:t[20]||(t[20]=function(t){return e.cancelChanges()})},[ia,oa],8,["disabled"]),Object(c["h"])("button",{type:"button",class:"white--text text-capitalize mr-1 mt-2 green small",disabled:!e.hasChanges,onClick:t[21]||(t[21]=function(t){return e.updateDetail()})},[ra,da],8,["disabled"])])],32),Object(c["h"])(n,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.detail.StartDate},null,8,["top","leftInput","date"])])})),ha=n("ade3"),fa=(n("d81d"),n("b0c0"),n("a434"),Object(c["i"])({name:"schedule-detail",components:{DatePicker:on},props:["detail","shiftTypeList","readOnly"],data:function(){return{week:1,tablePadding:"0 0;",hasChanges:!1,isDateToCleared:!1,shifts:[],showShift:!0,initialEmpSched:null,startDateMenu:!1,dateModalTop:0,dateModalLeft:0,timePickerTargetDay:null,selectedTimeType:"Start"}},computed:{isNewSchedule:function(){var e=this.detail;return e.Id<=0}},mounted:function(){this.loadShiftTypes(),this.hasChanges=-1==this.detail.Id,this.$emit("dataChanged",this.hasChanges),this.remapDays()},watch:Object(ha["a"])({},"detail",(function(e,t){this.remapDays(),e!=t&&-1==e.Id&&(this.detail.Days=[],this.createNewDays(1,1))})),methods:{formSubmited:function(e){return e.preventDefault(),e.stopPropagation(),!1},increaseNumber:function(){this.detail.NoOfWeeks++,this.updateNoOfWeeks()},reduceNumber:function(){this.detail.NoOfWeeks--,this.updateNoOfWeeks()},toggleShift:function(){this.showShift=!this.showShift},remapDays:function(){for(var e=0,t=Vt()(this.detail.StartDate),n=7*this.detail.NoOfWeeks,a=new Array(n),c=0;c<n;c++)c%7==0&&e++,a[c]={DayNumber:c,DayOfWeek:t.day(),Week:e,Date:Vt()(t),Hours:0,StartTime:null,FinishTime:null,ShiftId:null},t.add(1,"day");this.showShift=!1,this.detail.Days.map((function(e){e.StartTime&&(a[e.DayNumber].StartTime=Vt()(e.StartTime)),e.FinishTime&&(a[e.DayNumber].FinishTime=Vt()(e.FinishTime)),a[e.DayNumber].Hours=e.Hours,a[e.DayNumber].ShiftId=e.ShiftId})),this.detail.Days=a,this.detail.StartDate=Vt()(this.detail.StartDate),this.hasChanges=!1},timeTextChanged:function(e,t,n){var a=Vt()(e.target.value,"HH:mm");if("FinishTime"===n){if(t.FinishTime&&a.hour()===t.FinishTime.hour()&&a.minute()===t.FinishTime.minute())return;if(""===e)return void(t.FinishTime=null);t.FinishTime=a}else{if(t.StartTime&&a.hour()===t.StartTime.hour()&&a.minute()===t.StartTime.minute())return;if(""===e)return void(t.StartTime=null);t.StartTime=a}this.timePickerTargetDay=t,this.autoCalcTime(n),this.hasChanges=!0,console.log("timeTextChanged")},autoCalcTime:function(e){var t=this.timePickerTargetDay;if(!t.FinishTime||"00:00"===t.FinishTime.format("HH:mm")||!t.StartTime||"00:00"===t.StartTime.format("HH:mm")||t.Hours&&0!==t.Hours)!t.FinishTime||!t.Hours||t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")?!t.StartTime||!t.Hours||t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")?t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")&&t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")&&(t.Hours||0!==t.Hours)&&(console.log("type",e),"StartTime"===e?t.FinishTime=t.StartTime.clone().add(t.Hours,"hours"):"FinishTime"===e&&(t.StartTime=t.FinishTime.clone().subtract(t.Hours,"hours"))):t.FinishTime=t.StartTime.clone().add(t.Hours,"hours"):t.StartTime=t.FinishTime.clone().subtract(t.Hours,"hours");else{t.FinishTime.year(t.StartTime.year()),t.FinishTime.month(t.StartTime.month()),t.FinishTime.day(t.StartTime.day());var n=t.FinishTime.startOf("minute").diff(t.StartTime.startOf("minute"),"hours",!0);t.Hours=Math.round(100*n)/100}},updateDateText:function(e,t){this.startDateMenu=!1,t.set(Vt()(e,"DD/MM/YYYY").toObject()),this.remapDays()},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=Vt()(e)),this.detail.StartDate=e,this.remapDays()},isFirstDayOfWeek:function(e){var t=Vt()(this.detail.StartDate);return e==t.day()},loadShiftTypes:function(){for(var e=this.shiftTypeList,t=0;t<e.length;t++)if(void 0!==e[t].ShiftType&&null!==e[t].ShiftType&&e[t].ShiftType.length<=5){var n={name:e[t].ShiftType};this.shifts.push(n)}this.shifts.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:0}))},getDayOfWeek:function(e){if(e<0||e>6)return console.error("day No not correct"),"unknown";var t=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];return t[e]},checkHour:function(e){if(this.hasChanges=!0,e.Hours>24)return Jt.alert("You can only enter up to 24 hours."),void(e.Hours=24);console.log("hour",e.Hours),e.StartTime&&e.Hours&&e.FinishTime||e.StartTime&&e.Hours?e.FinishTime=e.StartTime.clone().add(e.Hours,"hours"):e.Hours&&e.FinishTime&&(e.StartTime=e.FinishTime.clone().add(e.Hours,"hours"))},updateNoOfWeeks:function(e){var t=this.detail.Days.length,n=Math.floor(t/7);if(this.detail.NoOfWeeks>n)this.createNewDays(n+1,this.detail.NoOfWeeks);else{var a=7*this.detail.NoOfWeeks;this.detail.Days.splice(a)}},numLimitKeyDown:function(e,t,n){var a=[8,9,13,46,16,17];a.push(65,67,86,88),t&&a.push(190,110),n&&a.push(186),e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||a.indexOf(e.keyCode)>-1||(e.preventDefault(),e.stopPropagation())},cancelChanges:function(){var e=this;if(this.hasChanges){var t="You haven't saved your changes.  <br /> Are you sure you want to cancel?";Jt.checkChange({message:t,confirmButtonText:"Yes",cancelButtonText:"No",onOk:function(){e.hasChanges=!1,e.$emit("cancel")}})}else this.$emit("cancel")},reloadDetail:function(){this.hasChanges&&this.$emit("reload")},createNewDays:function(e,t){if(!(e>t)){var n=e,a=this.detail.Days.length;while(n<=t){var c=Vt()(this.detail.StartDate);c.add(a,"day"),this.detail.Days.push({DayNumber:a,DayOfWeek:c.day(),Week:n,Date:c,Hours:0,StartTime:null,FinishTime:null,ShiftId:null,startDateModal:!1,endDateModal:!1}),a++,n=Math.floor(a/7)+1}}},archiveSchedule:function(){this.hasChanges||(this.detail.Archive?Jt.alert("Unable to archive schedule, it's already archived."):(this.detail.Archive=!0,this.doUpdateDetail()))},deleteSchedule:function(){var e=this;this.hasChanges||(this.detail.EmpAllocations.length>0?Jt.alert("Unable to delete schedule, it's currently allocated to employees"):Uo.emit("dialog",{message:"Are you sure you want to permanently delete this work schedule?",showButtons:!0,showCancel:!0,okColor:"red",onOk:function(){e.doDeleteSchedule()},onCancel:function(){}}))},doDeleteSchedule:function(){var e=this;Jt.loading(),R.DeleteSchedule(this.detail.Id).then((function(t){e.$emit("schedule-deleted"),Jt.clear()}))},updateDetail:function(){this.hasChanges&&this.doUpdateValidation()&&this.doUpdateDetail()},doUpdateValidation:function(){return console.log("validation"),!this.detail.Name&&!this.detail.Description||""===this.detail.Name&&""===this.detail.Description?(Jt.alert("Schedule name cannot be blank. <br /> Schedule description cannot be blank."),!1):this.detail.Name&&""!==this.detail.Name?this.detail.Description&&""!==this.detail.Description?void 0!==this.detail.Name&&null!==this.detail.Name&&this.detail.Name.length>50?(Jt.alert("Schedule names must be 50 characters or fewer (including spaces)."),!1):!(void 0!==this.detail.Description&&null!==this.detail.Description&&this.detail.Description.length>50)||(Jt.alert("Schedule descriptions must be 50 characters or fewer (including spaces)."),!1):(Jt.alert("Schedule description cannot be blank."),!1):(Jt.alert("Schedule name cannot be blank."),!1)},doUpdateDetail:function(){var e={Id:this.detail.Id,NoOfWeeks:this.detail.NoOfWeeks,StartDate:Vt()(this.detail.StartDate).format("DD/MMM/YYYY"),Name:this.detail.Name,Description:this.detail.Description,Archive:this.detail.Archive,Days:[]};console.log("doUpdateDetail this.detail",this.detail),this.detail.Days.map((function(t){(t.Hours>0||null!==t.ShiftId&&""!==t.ShiftId)&&(""===t.ShiftId&&(t.ShiftId=null),e.Days.push({DayNumber:t.DayNumber,StartTime:t.StartTime?t.StartTime.format("kk:mm"):null,FinishTime:t.FinishTime?t.FinishTime.format("kk:mm"):null,Hours:t.Hours>24?24:t.Hours,ShiftId:t.ShiftId}))})),Jt.loading()},formUpdated:function(){this.hasChanges=!0},openDatePicker:function(e){var t=this;return Object(Ut["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.target.getClientRects()[0],t.dateModalTop=a.bottom,t.dateModalLeft=a.left,n.next=5,t.$refs.DatePickerRef.toggleShow(t.detail.StartDate);case 5:t.detail.StartDate=n.sent;case 6:case"end":return n.stop()}}),n)})))()}}}));n("d2c7");fa.render=ua,fa.__scopeId="data-v-348312c8";var ba=fa,ma=Object(c["P"])("data-v-2bb750bc");Object(c["v"])("data-v-2bb750bc");var pa={id:"sched-man-list ",class:"sched-man-list mt-4"},Oa={class:"d-flex align-center flex-wrap"},ja={class:"filter-dropdown"},ga={class:"custom-select",tabindex:"1",ref:"selectRef"},ya={class:"custom-select-selected"},Da={class:"custom-select-items"},va={class:"cell-config"},Sa=Object(c["h"])("span",{class:"icon-plus btn-icon white"},null,-1),ka=Object(c["h"])("span",{class:"font-weight-regular text-capitalize white"}," Create",-1),Aa={class:"aff-table sche-search-table mt-4"},wa={class:"ui-grid"},Ea=Object(c["g"])("Name "),Ca=Object(c["g"])("Description "),xa=Object(c["g"])("Weeks "),Ta=Object(c["g"])("H/W "),Ma=Object(c["g"])("Allocated"),Fa={style:{width:"50px"}},Na={style:{width:"100px"}},Ia={class:"sched-search-desc"},La={class:"text-center"},Pa={class:"text-center"},Wa={class:"text-center"};Object(c["t"])();var Ba=ma((function(e,t){var n=Object(c["B"])("tooltip");return Object(c["M"])((Object(c["s"])(),Object(c["e"])("div",pa,[Object(c["h"])("div",null,[Object(c["h"])("div",Oa,[Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filters.searchTerm=t}),type:"text",placeholder:"Search for schedules","hide-details":"",class:"sched-search-box body-2 underline-input"},null,512),[[c["I"],e.filters.searchTerm]]),Object(c["h"])("div",ja,[Object(c["h"])("div",ga,[Object(c["h"])("div",ya,Object(c["D"])(e.filters.selected),1),Object(c["h"])("div",Da,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.filters.options,(function(t,n){return Object(c["s"])(),Object(c["e"])("div",{class:"custom-select-item",key:n,tabindex:n+99,onClick:function(n){return e.choseFilter(n,t)}},[Object(c["h"])("div",va,Object(c["D"])(t),1)],8,["tabindex","onClick"])})),128))])],512)]),Object(c["h"])("button",{class:"blue ml-2 small",onClick:t[2]||(t[2]=function(t){return e.createNewSchedule()})},[Sa,ka])])]),Object(c["h"])("div",Aa,[Object(c["h"])("table",wa,[Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",{style:{width:"120px"},onClick:t[3]||(t[3]=function(t){return e.updateSort(0)})},[Ea,Object(c["h"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[0],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[0]}},null,2)]),Object(c["h"])("th",{onClick:t[4]||(t[4]=function(t){return e.updateSort(1)})},[Ca,Object(c["h"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[1],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[1]}},null,2)]),Object(c["h"])("th",{style:{width:"70px"},class:"text-center",onClick:t[5]||(t[5]=function(t){return e.updateSort(2)})},[xa,Object(c["h"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[2],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[2]}},null,2)]),Object(c["h"])("th",{style:{width:"60px"},class:"text-center",onClick:t[6]||(t[6]=function(t){return e.updateSort(3)})},[Ta,Object(c["h"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[3],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[3]}},null,2)]),Object(c["h"])("th",{style:{width:"80px"},class:"text-center",onClick:t[7]||(t[7]=function(t){return e.updateSort(4)})},[Ma,Object(c["h"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[4],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[4]}},null,2)])])]),Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.schedList,(function(t){return Object(c["s"])(),Object(c["e"])("tr",{onClick:function(n){return e.selectSchedulesDetail(t)},class:t.classObject},[Object(c["h"])("td",Fa,[Object(c["h"])("div",null,Object(c["D"])(t.Name),1)]),Object(c["M"])(Object(c["h"])("td",Na,[Object(c["h"])("div",Ia,Object(c["D"])(t.Description),1)],512),[[n,{content:t.Description,delay:{show:3e3,hide:100}},void 0,{right:!0}]]),Object(c["h"])("td",La,[Object(c["h"])("div",null,Object(c["D"])(t.NoOfWeeks),1)]),Object(c["h"])("td",Pa,[Object(c["h"])("div",null,Object(c["D"])(t.HoursPerWeek),1)]),Object(c["h"])("td",Wa,[Object(c["h"])("div",null,Object(c["D"])(t.Count),1)])],10,["onClick"])})),256))])])])],512)),[[c["J"],!e.createNew]])})),Ra=(n("498a"),Object(c["i"])({name:"SearchSchedule",data:function(){return{selectedSched:null,schedList:[],shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showFilters:!0,filters:{searchTerm:"",sort:"Name",sortOptions:["Name","Description","NoOfWeeks","HoursPerWeek","Count"],orderBy:"Asc",orderByArrow:["Asc","Asc","Asc","Asc","Asc"],partTimeSche:!1,fullTimeSche:!0,activeSche:!0,inActiveSche:!1,archivedSche:!1,options:["Show All","Show Active","Show Inactive","Show Archived"],selected:"Show Active",all:!1},searchTermFocus:!1}},mounted:function(){this.showFilters=!0,this.getSchedulesList(),console.log("schedules management created"),this.$watch("filters",this.refreshFilters,{deep:!0}),console.log("schedules ready created")},methods:{choseFilter:function(e,t){e.target.blur(),this.filters.selected=t;var n=e.target.blur();console.log("fawef",n);var a=this.$refs.selectRef;a.blur()},createNewSchedule:function(){this.$emit("createNewSchedule")},selectSchedulesDetail:function(e){this.schedList.map((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedSched=e,this.$emit("selectSchedFromSearch",this.selectedSched)},deselectScheDetail:function(){this.schedList.forEach((function(e){e.classObject.selected=!1})),this.selectedSched=null},toggleFilters:function(){this.showFilters=!this.showFilters},refreshFilters:function(){var e=this,t=this;this.schedList.sort((function(e,n){var a,c,s=1;return"Desc"===t.filters.orderBy&&(s=-1),"string"===typeof e[t.filters.sort]?(a=e[t.filters.sort].toLowerCase(),c=n[t.filters.sort].toLowerCase()):(a=e[t.filters.sort],c=n[t.filters.sort]),a<c?-1*s:a>c?1*s:0}));var n=this.filters.searchTerm.toLowerCase().trim();this.schedList.forEach((function(a){a.classObject.selected=!!t.selectedSched&&t.selectedSched.Id==a.Id,a.classObject.visible=!0,e.filters.all?a.classObject.visible=!0:(a.classObject.visible=e.getDropDownFilterResult(a),a.classObject.visible&&0!=n.length&&(a.classObject.visible=(-1!==a.Name.toLowerCase().indexOf(n)||-1!==a.Description.toLowerCase().indexOf(n))&&a.classObject.visible)),a.classObject.hidden=!a.classObject.visible})),console.log("sched refresh filter",this.schedList)},getDropDownFilterResult:function(e){switch(this.filters.selected){case"Show All":return!0;case"Show Active":return!0===e.isActive&&!1===e.Archive;case"Show Inactive":return!1===e.isActive&&!1===e.Archive;case"Show Archived":return!0===e.Archive}},getSchedulesList:function(){var e=this;Jt.loading(),R.StandardSchedules().then((function(t){console.log("response",t);var n=[];t.Data.map((function(t){t.classObject={selected:!1,visible:!0,hidden:!1},e.selectedSched&&e.selectedSched.Id===t.Id&&(e.selectedSched=t,t.classObject.selected=!0),n.push(t.NoOfWeeks)})),n.unshift("All"),e.schedList=t.Data,e.refreshFilters(),Jt.clear()}))},updateSort:function(e){this.filters.orderBy=this.filters.orderByArrow[e]="Asc"===this.filters.orderByArrow[e]?"Desc":"Asc",this.filters.sort=this.filters.sortOptions[e],this.filters.orderByArrow.forEach((function(t,n){n!==e&&"Asc"}))}}}));n("0240");Ra.render=Ba,Ra.__scopeId="data-v-2bb750bc";var Ya=Ra,Ha=Object(c["i"])({name:"schedulesManagement",components:{SearchSchedule:Ya,"schedule-detail":ba},data:function(){return{selectedSched:null,shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showActiveSchedule:!0}},mounted:function(){this.getShiftTypeList()},methods:{getShiftTypeList:function(){var e=this;R.ShiftTypes().then((function(t){e.shiftTypeList=t}))},toggleShowActiveSchedule:function(){this.showActiveSchedule=!this.showActiveSchedule},selectSchedulesDetail:function(e){var t=this;this.$refs.detail&&this.$refs.detail.hasChanges?Jt.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.loadScheduleDetail(e)}}):this.loadScheduleDetail(e)},loadScheduleDetail:function(e){var t=this;Jt.loading(),R.ScheduleDetail(e.Id).then((function(n){t.schedDetail=n.Data,t.checkEmpAllocationActive(),Jt.clear(),t.selectedSched=e}),(function(e){Jt.clear(),"Network Error"===e.message?Jt.alert("Lost Internet connection. Please try again after reconnect."):Jt.alert("Something went wrong")}))},checkEmpAllocationActive:function(){this.schedDetail.EmpAllocations.forEach((function(e){if(e.DateTo){var t=Vt()(e.DateFrom),n=Vt()(e.DateTo);e.isActive=n.diff(Vt()(),"day")>=0&&t.diff(Vt()(),"day")<=0}else e.isActive=!0}))},createNewSchedule:function(){console.log("create new got called"),this.createNew=!0;var e=Vt()();e.hour(0),e.minute(0),e.second(0),this.schedDetail={Id:-1,Name:"",Description:"",NoOfWeeks:1,StartDate:e,Days:[]},this.$refs.detail&&(this.$refs.detail.hasChanges=!0)},cancelScheduleDetail:function(){console.log("cancel called"),this.createNew&&(this.createNew=!1),this.schedDetail=null},reloadSchedulesDetail:function(){console.log("reloadSchedulesDetail"),this.selectedSched?this.selectSchedulesDetail(this.selectedSched):this.schedDetail=null,this.createNew=!1},closeScheduleDetail:function(e){var t=this;if(!e||!this.$refs.detail.hasChanges)return this.schedDetail=null,this.createNew=!1,this.selectedSched=null,void this.$refs.searchScheduleRef.deselectScheDetail();Jt.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.closeScheduleDetail(!1)}})},scheduleSaved:function(e){this.selectedSched?(this.schedDetail=e,this.selectedSched={Id:e.Id}):this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList(),this.createNew=!1},scheduleDeleted:function(){this.selectedSched=null,this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList()}}});n("58be"),n("1a0c");Ha.render=En,Ha.__scopeId="data-v-5cb8baa9";var Ua=Ha,$a=Object(c["P"])("data-v-5d191eec");Object(c["v"])("data-v-5d191eec");var Va={class:"outter-h-scroll"},_a={class:"fix-content-width"},Ka={key:0,class:"emp-detail pa-4 mr-4 mr-xs-0"},za={class:"section"},Qa=Object(c["h"])("div",{class:"d-flex justify-space-between"},[Object(c["h"])("h3",null,"Selected Employees")],-1),Ga={class:"emp-selection-list mt-4 caption"},Ja=Object(c["h"])("span",{class:"icon-calendar white lh-0"},null,-1),qa=Object(c["h"])("span",{class:"icon-minus white lh-0"},null,-1),Xa=Object(c["h"])("span",{class:"icon-minus white lh-0"},null,-1),Za=Object(c["h"])("span",{class:"icon-calendar white lh-0"},null,-1),ec={class:"schedules-buttons mt-2 d-flex justify-end"},tc=Object(c["h"])("span",{class:"icon-cancel mr-2 vert-mid white lh-0"},null,-1),nc=Object(c["h"])("span",{class:"text-capitalize white "},"Clear",-1),ac=Object(c["h"])("span",{class:"icon-cancel vert-mid white lh-0"},null,-1),cc=Object(c["h"])("span",{class:"text-capitalize white"},"Clear",-1),sc={class:"section mt-4",style:{height:"100%"}},lc=Object(c["h"])("h3",{class:"bold-text"},"Allocate Schedule",-1),ic={class:"mt-4 allocate-sche-form"},oc={class:"custom-select",tabindex:"1",ref:"selectRef"},rc={class:"custom-select-selected"},dc={class:"custom-select-items"},uc={class:"cell-config"},hc={key:0,class:"mt-4"},fc=Object(c["h"])("div",{class:"bold-text"},"Description",-1),bc={class:"caption"},mc={class:"bold-text mt-4"},pc=Object(c["g"])("No. of Weeks: "),Oc={class:"ml-4"},jc={class:"d-flex justify-space-between"},gc={class:"mt-4 date-input-warpper"},yc=Object(c["h"])("div",{class:"bold-text"},"Date From",-1),Dc={class:"mt-4 date-input-warpper"},vc=Object(c["h"])("div",{class:"bold-text"},"Date To",-1),Sc={class:"mt-4"},kc=Object(c["h"])("div",{class:"bold-text"},"Notes",-1),Ac={key:1,class:"form-row mt-4"},wc={class:"label-width"},Ec={class:"schedules-buttons mt-4 d-flex justify-end"},Cc=Object(c["h"])("span",{class:"icon-cancel vert-mid lh-0 white--text mr-1"},null,-1),xc=Object(c["h"])("span",{class:"text-capitalize white--text"},"Cancel",-1),Tc=Object(c["h"])("span",{class:"icon-paperplane vert-mid lh-0 white--text mr-1"},null,-1),Mc=Object(c["h"])("span",{class:"text-capitalize white--text"},"Allocate",-1);Object(c["t"])();var Fc=$a((function(e,t){var n=Object(c["A"])("search-employee"),a=Object(c["A"])("employee-schedule"),s=Object(c["A"])("date-picker"),l=Object(c["B"])("tooltip");return Object(c["s"])(),Object(c["e"])("div",Va,[Object(c["h"])("div",_a,[Object(c["h"])(n,{class:"mr-4 mr-xs-0",ref:"SearchEmployeeRef",onUpdateSelectedEmpList:e.updateEmpList},null,8,["onUpdateSelectedEmpList"]),e.bulkEmpList.length>0?(Object(c["s"])(),Object(c["e"])("div",Ka,[Object(c["h"])("div",za,[Qa,Object(c["h"])("div",Ga,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.bulkEmpList,(function(t,n){return Object(c["s"])(),Object(c["e"])("div",{class:["d-flex justify-space-between align-center py-1 px-2",{"emp-select-item-odd":n%2}]},[Object(c["h"])("div",null,[Object(c["M"])(Object(c["h"])("span",{class:"list-text"},Object(c["D"])(t.EmployeeName)+" ("+Object(c["D"])(t.EmployeeNo)+")",513),[[l,{content:"Remove from Employee Selection List"},void 0,{right:!0}]])]),Object(c["h"])("div",null,[e.isMobileView?Object(c["f"])("",!0):Object(c["M"])((Object(c["s"])(),Object(c["e"])("button",{key:0,class:"blue small",style:{"margin-right":"3px"},onClick:function(n){return e.showScheduleDetail(t)}},[Ja],8,["onClick"])),[[l,{content:"View Schedule Allocations"},void 0,{right:!0}]]),e.isMobileView?Object(c["f"])("",!0):Object(c["M"])((Object(c["s"])(),Object(c["e"])("button",{key:1,class:"orange small",onClick:function(n){return e.removeEmployee(t)}},[qa],8,["onClick"])),[[l,{content:"Remove from Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(c["s"])(),Object(c["e"])("button",{key:2,class:"orange small",onClick:function(n){return e.removeEmployee(t)}},[Xa],8,["onClick"])):Object(c["f"])("",!0),e.isMobileView?(Object(c["s"])(),Object(c["e"])("button",{key:3,class:"blue ml-1 small",style:{"margin-right":"3px"},onClick:function(n){return e.showScheduleDetail(t)}},[Za],8,["onClick"])):Object(c["f"])("",!0)])],2)})),256))]),Object(c["h"])("div",ec,[e.isMobileView?Object(c["f"])("",!0):Object(c["M"])((Object(c["s"])(),Object(c["e"])("button",{key:0,class:"button grey small",onClick:t[1]||(t[1]=function(t){return e.clearSelectedEmployee()})},[tc,nc],512)),[[l,{content:"Clear Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(c["s"])(),Object(c["e"])("button",{key:1,class:"button grey small",onClick:t[2]||(t[2]=function(t){return e.clearSelectedEmployee()})},[ac,cc])):Object(c["f"])("",!0)])]),Object(c["h"])("div",null,[Object(c["h"])("div",sc,[lc,Object(c["h"])("div",ic,[Object(c["h"])("form",null,[Object(c["h"])("div",oc,[Object(c["h"])("div",rc,[Object(c["M"])(Object(c["h"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectSearchInput=t}),onKeyup:t[4]||(t[4]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[c["I"],e.selectSearchInput]])]),Object(c["h"])("div",dc,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.cloneSchedList,(function(n,a){return Object(c["s"])(),Object(c["e"])("div",{class:"custom-select-item",ref:"selectDropdownRef",key:a,tabindex:a+99,onKeyup:t[5]||(t[5]=Object(c["N"])((function(){return e.navDownList&&e.navDownList.apply(e,arguments)}),["down"])),onClick:function(t){return e.chooseSchedule(t,n)}},[Object(c["h"])("div",uc,Object(c["D"])(n.Name),1)],40,["tabindex","onClick"])})),128))])],512),e.selectedSchedule&&e.selectedSchedule.Name?(Object(c["s"])(),Object(c["e"])("div",hc,[fc,Object(c["h"])("div",bc,Object(c["D"])(e.selectedSchedule.Description),1),Object(c["h"])("div",mc,[pc,Object(c["h"])("span",Oc,Object(c["D"])(e.selectedSchedule.NoOfWeeks),1)])])):Object(c["f"])("",!0),Object(c["h"])("div",jc,[Object(c["h"])("div",gc,[yc,Object(c["h"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateFrom),class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input",onChange:t[6]||(t[6]=function(t){return e.updateDateText(t,e.schedAllocation.DateFrom)}),onClick:t[7]||(t[7]=function(t){return e.updateDateTime(t,e.schedAllocation.DateFrom,"DateFrom")}),"onClick:clear":t[8]||(t[8]=function(t){return e.fromDate=!1})},null,40,["value"])]),Object(c["h"])("div",Dc,[vc,Object(c["h"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateTo),class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input",onChange:t[9]||(t[9]=function(t){return e.updateDateText(t,e.schedAllocation.DateTo)}),onClick:t[10]||(t[10]=function(t){return e.updateDateTime(t,e.schedAllocation.DateTo,"DateTo")}),"onClick:clear":t[11]||(t[11]=function(t){return e.toDateMenu=!1})},null,40,["value"])])]),Object(c["h"])("div",Sc,[kc,Object(c["M"])(Object(c["h"])("textarea",{rows:"3",class:"white caption",onKeyup:t[12]||(t[12]=function(t){return e.hasChanges=!0}),"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.schedAllocation.Comment=t})},null,544),[[c["I"],e.schedAllocation.Comment]])]),e.schedAllocation.DateFrom?(Object(c["s"])(),Object(c["e"])("div",Ac,[Object(c["h"])("label",wc,"End existing schedules on "+Object(c["D"])(e.capDate),1),Object(c["M"])(Object(c["h"])("input",{type:"checkbox",value:"1","onUpdate:modelValue":t[14]||(t[14]=function(t){return e.schedAllocation.EndExistingScheds=t})},null,512),[[c["G"],e.schedAllocation.EndExistingScheds]])])):Object(c["f"])("",!0),Object(c["h"])("div",Ec,[Object(c["h"])("button",{class:"grey vert-mid small",onClick:t[15]||(t[15]=function(t){return e.closeSchedAllocation()})},[Cc,xc]),Object(c["h"])("button",{class:"green ml-4 small",onClick:t[16]||(t[16]=function(t){return e.allocateEmployees()})},[Tc,Mc])])])])])])])):Object(c["f"])("",!0),e.selectedEmpForDetail?(Object(c["s"])(),Object(c["e"])(a,{key:1,ref:"EmployeeScheduleRef",employee:e.selectedEmpForDetail,onClose:e.resetSelectedEmpForDetail},null,8,["employee","onClose"])):Object(c["f"])("",!0),Object(c["h"])(s,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])])})),Nc=(n("4de4"),n("fb6a"),n("466d"),n("ac1f"),Object(c["P"])("data-v-9e5ee39c"));Object(c["v"])("data-v-9e5ee39c");var Ic={class:"emp-workSched-card pa-4"},Lc={class:"d-flex justify-space-between"},Pc={class:"d-flex justify-end align-center mt-4 caption"},Wc=Object(c["h"])("label",{class:"default-line-height"},"Active Only",-1),Bc={key:0,class:"section-table aff-table mt-2"},Rc=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Schedule Name"),Object(c["h"])("th",{class:"text-center"},"Date From"),Object(c["h"])("th",{class:"text-center"},"Date To")])],-1),Yc={class:"text-center"},Hc={class:"text-center"},Uc={key:1};Object(c["t"])();var $c=Nc((function(e,t){var n=Object(c["A"])("emp-schedule-detail");return Object(c["s"])(),Object(c["e"])("div",Ic,[Object(c["h"])("div",Lc,[Object(c["h"])("h3",null,Object(c["D"])(e.selectedEmp.EmployeeName)+" ("+Object(c["D"])(e.selectedEmp.EmployeeNo)+")",1),Object(c["h"])("span",{class:"icon-cross vp-icon",onClick:t[1]||(t[1]=function(t){return e.closeEmployeeSchedule(!0)})})]),Object(c["h"])("div",Pc,[Object(c["M"])(Object(c["h"])("input",{class:"override-width mr-2",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.activeOnly=t}),onChange:t[3]||(t[3]=function(){return e.updateActiveOnly&&e.updateActiveOnly.apply(e,arguments)}),"true-value":1,"false-value":0},null,544),[[c["G"],e.activeOnly]]),Wc]),e.empSchedList.length>0?(Object(c["s"])(),Object(c["e"])("div",Bc,[Object(c["h"])("table",null,[Rc,Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.empSchedList,(function(t){return Object(c["s"])(),Object(c["e"])("tr",{class:t.classObject,onClick:function(n){return e.selectEmpSchedCheck(t)}},[Object(c["h"])("td",null,Object(c["D"])(t.WorkSchedName),1),Object(c["h"])("td",Yc,Object(c["D"])(e.$filters.reformatDate(t.DateFrom)),1),Object(c["h"])("td",Hc,Object(c["D"])(e.$filters.reformatDate(t.DateTo)),1)],10,["onClick"])})),256))])])])):(Object(c["s"])(),Object(c["e"])("div",Uc," Work schedule empty.")),e.selectedEmpSched?(Object(c["s"])(),Object(c["e"])(n,{key:2,ref:"empScheDetailRef",empSched:e.selectedEmpSched,onDeleted:e.deleteSelection,onUpdated:e.updatedEmpSchedule},null,8,["empSched","onDeleted","onUpdated"])):Object(c["f"])("",!0)])})),Vc=Object(c["P"])("data-v-04d53c9e");Object(c["v"])("data-v-04d53c9e");var _c={key:0,class:"section default-form sched-empSched-form mt-4"},Kc=Object(c["h"])("h3",null,"Schedule Details",-1),zc={class:"caption mt-2"},Qc=Object(c["h"])("div",{class:"form-label"},"Name",-1),Gc={class:"label-empSched"},Jc={class:"caption d-flex mt-4"},qc=Object(c["h"])("div",{class:"form-label"},"Number of Weeks",-1),Xc={class:"label-empSched"},Zc={class:"d-flex justify-space-between"},es={class:"caption mt-4"},ts=Object(c["h"])("div",{class:"date-label"},"Date From",-1),ns={class:"caption mt-4"},as=Object(c["h"])("div",{class:"date-label"},"Date To",-1),cs={class:"caption mt-4"},ss=Object(c["h"])("div",{class:"date-label"},"Notes",-1),ls={class:"section-table ui-gridbox-scrollable-titles mt-4"},is={class:"aff-table sched-empSched-table"},os={class:"sched-empSched-days"},rs=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Week"),Object(c["h"])("th",null,"Day"),Object(c["h"])("th",{class:"text-center"},"Hours"),Object(c["h"])("th",{class:"text-center"},"Start"),Object(c["h"])("th",{class:"text-center"},"Finish"),Object(c["h"])("th",null,"Shift")])],-1),ds={class:"text-center"},us={class:"mr-2 days-width"},hs={class:"text-center"},fs={class:"text-center"},bs={class:"px-2"},ms={class:"text-center"},ps={class:"px-2"},Os={class:"shift-select-td"},js={class:"schedules-buttons form-row d-flex justify-end mt-4"},gs=Object(c["h"])("span",{class:"icon-briefcase mr-1"},null,-1),ys=Object(c["h"])("span",null,"Remove",-1),Ds=Object(c["h"])("span",{class:"icon-cancel mr-1"},null,-1),vs=Object(c["h"])("span",null,"Cancel",-1),Ss=Object(c["h"])("span",{class:"icon-save mr-1"},null,-1),ks=Object(c["h"])("span",null,"Update",-1);Object(c["t"])();var As=Vc((function(e,t){var n=Object(c["A"])("date-picker");return e.empSchedDetail&&e.empSchedDetail.Detail?(Object(c["s"])(),Object(c["e"])("div",_c,[Kc,Object(c["h"])("form",{onSubmit:t[12]||(t[12]=Object(c["O"])((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[Object(c["h"])("div",zc,[Qc,Object(c["h"])("div",Gc,Object(c["D"])(e.empSchedDetail.Detail.Name),1)]),Object(c["h"])("div",Jc,[qc,Object(c["h"])("div",Xc,Object(c["D"])(e.empSchedDetail.Detail.NoOfWeeks),1)]),Object(c["h"])("div",Zc,[Object(c["h"])("div",es,[ts,Object(c["h"])("input",Object(c["m"])({value:e.$filters.reformatDate(e.empSchedDetail.DateFrom)},e.attrs,Object(c["E"])(e.on),{outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[1]||(t[1]=function(t){return e.updateDateText(t,e.empSchedDetail.DateFrom)}),onClick:t[2]||(t[2]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateFrom,"DateFrom")}),"onClick:clear":t[3]||(t[3]=function(t){return e.fromDate=!1})}),null,16,["value"])]),Object(c["h"])("div",ns,[as,Object(c["h"])("input",Object(c["m"])({value:e.$filters.reformatDate(e.empSchedDetail.DateTo)},e.attrs,Object(c["E"])(e.on),{autocomplete:"off",outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[4]||(t[4]=function(t){return e.updateDateText(t,e.empSchedDetail.DateTo)}),onClick:t[5]||(t[5]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateTo,"DateTo")}),"onClick:clear":t[6]||(t[6]=function(t){return e.toDateMenu=!1})}),null,16,["value"])])]),Object(c["h"])("div",cs,[ss,Object(c["M"])(Object(c["h"])("textarea",{class:"white caption schedule-textarea",onKeyup:t[7]||(t[7]=function(t){return e.hasChanges=!0}),"hide-details":"",rows:"2",outlined:"",dense:"","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.empSchedDetail.Comment=t})},null,544),[[c["I"],e.empSchedDetail.Comment]])]),Object(c["h"])("div",ls,[Object(c["h"])("div",is,[Object(c["h"])("table",os,[rs,Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.empSchedDetail.Detail.Days,(function(t){return Object(c["s"])(),Object(c["e"])("tr",null,[Object(c["h"])("td",ds,[Object(c["M"])(Object(c["h"])("span",null,Object(c["D"])(t.Week),513),[[c["J"],e.isFirstDayOfWeek(t.DayOfWeek)]])]),Object(c["h"])("td",null,[Object(c["h"])("span",us,Object(c["D"])(t.DayNumber+1),1),Object(c["h"])("span",null,Object(c["D"])(e.getDayOfWeek(t.DayOfWeek)),1)]),Object(c["h"])("td",hs,Object(c["D"])(t.Hours),1),Object(c["h"])("td",fs,[Object(c["h"])("span",bs,Object(c["D"])(e.$filters.reformatTime(t.StartTime)),1)]),Object(c["h"])("td",ms,[Object(c["h"])("span",ps,Object(c["D"])(e.$filters.reformatTime(t.FinishTime)),1)]),Object(c["h"])("td",Os,Object(c["D"])(t.ShiftId),1)])})),256))])])])]),Object(c["h"])("div",js,[Object(c["h"])("button",{type:"button",class:"white--text small red text-capitalize mr-2",onClick:t[9]||(t[9]=function(t){return e.RemoveSchedule()})},[gs,ys]),Object(c["h"])("button",{type:"button",class:"white--text small grey text-capitalize mr-2",disabled:!e.hasChanges,onClick:t[10]||(t[10]=function(t){return e.cancelChanges()})},[Ds,vs],8,["disabled"]),Object(c["h"])("button",{type:"button",class:"white--text small green text-capitalize mr-1",disabled:!e.hasChanges,onClick:t[11]||(t[11]=function(t){return e.updateEmpSched()})},[Ss,ks],8,["disabled"])])],32),Object(c["h"])(n,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])):Object(c["f"])("",!0)})),ws=Object(c["i"])({name:"emp-schedule-detail",props:["empSched"],components:{DatePicker:on},data:function(){return{dateModalTop:null,dateModalLeft:null,datePickerTargetDay:null,dateType:"",empSchedDetail:null,hasChanges:!1,fromDateMenu:!1,toDateMenu:!1,fromDatePickerValue:"",toDatePickerValue:""}},computed:{},mounted:function(){this.$emit("dataChanged",this.hasChanges),this.getEmpSchedDetail()},watch:Object(ha["a"])({},"empSched",(function(e,t){e!=t&&(this.empSchedDetail=null,this.hasChanges=null,this.fromDateMenu=!1,this.toDateMenu=!1,this.getEmpSchedDetail())})),methods:{getEmpSchedDetail:function(){var e=this;Jt.loading(),R.EmpSchedDetailRequest(this.empSched.EmployeeNo+"/"+this.empSched.Id).then((function(t){if(e.empSchedDetail=t.Data,console.log("res",t),e.empSchedDetail.Detail){for(var n=0,a=Vt()(e.empSchedDetail.Detail.StartDate),c=7*e.empSchedDetail.Detail.NoOfWeeks,s=new Array(c),l=0;l<c;l++)l%7==0&&n++,s[l]={DayNumber:l,DayOfWeek:a.day(),Week:n,Date:Vt()(a),Hours:0,StartTime:null,FinishTime:null,ShiftId:null},a.add(1,"day");e.empSchedDetail.Detail.Days.map((function(e){e.StartTime&&(s[e.DayNumber].StartTime=Vt()(e.StartTime)),e.FinishTime&&(s[e.DayNumber].FinishTime=Vt()(e.FinishTime)),s[e.DayNumber].Hours=e.Hours,s[e.DayNumber].ShiftId=e.ShiftId})),e.empSchedDetail.Detail.Days=s,e.empSchedDetail.Detail.StartDate=Vt()(e.empSchedDetail.Detail.StartDate),t.Data.DateFrom&&(e.empSchedDetail.DateFrom=Vt()(t.Data.DateFrom,"YYYY-MM-DD")),t.Data.DateTo&&(e.empSchedDetail.DateTo=Vt()(t.Data.DateTo,"YYYY-MM-DD")),console.log("date to",t.Data.DateTo),e.datePickerFormattedFromDate(),e.datePickerFormattedToDate()}})).finally((function(){return Jt.clear()}))},submitForm:function(){return!1},updateDateText:function(e,t){this.toDateMenu=!1,t.set(Vt()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.fromDatePickerValue=this.empSchedDetail.DateFrom?Vt()(this.empSchedDetail.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.empSchedDetail.DateTo?Vt()(this.empSchedDetail.DateTo).format("YYYY-MM-DD"):void 0},fromDateDatePickerHandler:function(e){"string"===typeof e&&(e=Vt()(e)),this.empSchedDetail.DateFrom=e,this.hasChanges=!0,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=Vt()(e)),this.empSchedDetail.DateTo=e,this.hasChanges=!0,this.datePickerFormattedToDate()},isFirstDayOfWeek:function(e){var t=Vt()(this.empSchedDetail.Detail.StartDate);return e==t.day()},getDayOfWeek:function(e){if(e<0||e>6)return"unknown";var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[e]},RemoveSchedule:function(){var e=this;Jt.checkChange({message:"Are you sure?",onOk:function(){Jt.loading(),R.RemoveEmployeeWorkSchedule(e.empSchedDetail.Id,e.empSched.EmployeeNo).then((function(t){e.$emit("deleted")})).finally((function(){return Jt.clear()}))}})},cancelChanges:function(){var e=this;if(this.hasChanges){console.log("cancel changes");var t="There is currently unsaved schedule changes <br /> Do you want to discard your changes?";console.log("emitter",Uo),Uo.emit("dialog",{message:t,showButtons:!0,showCancel:!0,okColor:"orange",onOk:function(){e.getEmpSchedDetail(),e.hasChanges=!1},onCancel:function(){}})}else this.getEmpSchedDetail()},updateEmpSched:function(){var e=this,t=Vt()(this.empSchedDetail.DateFrom),n=Vt()(this.empSchedDetail.DateTo);if(t&&n&&t>n)Jt.alert("<br />Date From cannot be before Date To.");else{Uo.emit("dialog",{message:"Updating Employee Schedule",showButtons:!1,showLoader:!0,noClose:!1}),Jt.loading();var a={Id:this.empSchedDetail.Id,DateFrom:t?t.format("DD/MMM/YYYY"):null,DateTo:n?n.format("DD/MMM/YYYY"):null,Comment:this.empSchedDetail.Comment};R.UpdateEmpSchedRequest(a,this.empSched.EmployeeNo).then((function(t){Jt.clear(),e.$emit("updated")})).catch((function(e){Jt.alert(e.message),console.error("err",e)}))}},updateDateTime:function(e,t,n){var a=e.target.getClientRects()[0];this.dateModalTop=a.bottom,this.dateModalLeft=a.left,console.log("updateDateTime",t),this.datePickerTargetDay=t,this.dateType=n,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:n=t.sent,"DateTo"===e.dateType?e.empSchedDetail.DateTo=n:"DateFrom"===e.dateType&&(e.empSchedDetail.DateFrom=n),e.hasChanges=!0;case 5:case"end":return t.stop()}}),t)})))()}}});n("28db");ws.render=As,ws.__scopeId="data-v-04d53c9e";var Es=ws,Cs=Object(c["i"])({name:"employeeSchedule",components:{EmpScheduleDetail:Es},props:["employee"],data:function(){return{selectedEmp:null,empSchedList:[],activeOnly:!1,selectedEmpSched:null}},setup:function(e){var t=Object(c["x"])(e.employee);return{selectedEmp:t}},mounted:function(){console.log("this employee",this.employee),this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")},watch:{employee:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")}},methods:{selectEmpSchedCheck:function(e){var t=this;this.$refs.empScheDetailRef&&this.$refs.empScheDetailRef.hasChanges?Jt.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.selectEmpSched(e)}}):this.selectEmpSched(e)},selectEmpSched:function(e){this.empSchedList.forEach((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedEmpSched=e},getEmpWorkScheds:function(){var e=this;Jt.loading(),R.EmpWorkScheds(this.selectedEmp.EmployeeNo+(this.activeOnly?"?activeOnly=true":"?activeOnly=false")).then((function(t){t.Data.map((function(e,t){e.classObject={selected:!1,odd:t%2},e.DateFrom=new Date(Date.parse(e.DateFrom)),e.DateTo&&(e.DateTo=new Date(Date.parse(e.DateTo)))})),e.empSchedList=t.Data,Jt.clear()}))},updateActiveOnly:function(){this.getEmpWorkScheds()},closeEmployeeSchedule:function(e){var t=this;e&&this.$refs.empScheDetailRef&&(!this.$refs.empScheDetailRef||this.$refs.empScheDetailRef.hasChanges)?Jt.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.closeEmployeeSchedule(!1)}}):this.$emit("close")},deleteSelection:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()},updatedEmpSchedule:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()}}});n("7587");Cs.render=$c,Cs.__scopeId="data-v-9e5ee39c";var xs=Cs,Ts=Object(c["P"])("data-v-d14d6750");Object(c["v"])("data-v-d14d6750");var Ms={class:"section shadow sched-card-default pa-4"},Fs=Object(c["h"])("h3",null,"Select Employees",-1),Ns={class:"aff-table mt-4"},Is={class:"ui-grid"},Ls={class:"name-text-width"},Ps={class:"current-schedules-width"},Ws={class:"schedule-name"},Bs={class:"schedule-name"},Rs=Object(c["h"])("span",{class:"icon-add-to-list"},null,-1),Ys=Object(c["h"])("span",{class:"icon-add-to-list"},null,-1),Hs=Object(c["h"])("span",{class:"icon-minus white--text small"},null,-1);Object(c["t"])();var Us=Ts((function(e,t){var n=Object(c["B"])("tooltip");return Object(c["s"])(),Object(c["e"])("div",Ms,[Fs,Object(c["M"])(Object(c["h"])("input",{class:"mt-2 caption text-field-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchTerm=t}),"hide-details":"",dense:"",outlined:"",type:"text",placeholder:"Search for employees "},null,512),[[c["I"],e.searchTerm]]),Object(c["h"])("div",Ns,[Object(c["h"])("table",Is,[Object(c["h"])("tbody",null,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.empList,(function(t){return Object(c["s"])(),Object(c["e"])("tr",{class:t.classObject,onClick:function(n){return e.toggleEmployeeSelect(t)}},[Object(c["h"])("td",null,[Object(c["h"])("span",Ls,Object(c["D"])(t.EmployeeName)+" ("+Object(c["D"])(t.EmployeeNo)+")",1),Object(c["h"])("span",Ps,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(t.WorkschedNames,(function(e){return Object(c["s"])(),Object(c["e"])("div",Ws,Object(c["D"])(e),1)})),256)),Object(c["h"])("div",Bs,Object(c["D"])(t.PersonalSchedule),1)])]),Object(c["h"])("td",null,[e.isMobileView||t.classObject.selected?Object(c["f"])("",!0):Object(c["M"])((Object(c["s"])(),Object(c["e"])("button",{key:0,class:"green white--text fsmall",onClick:Object(c["O"])((function(n){return e.addEmployee(t)}),["stop"])},[Rs],8,["onClick"])),[[n,{content:"Add to Employee Selection List"},void 0,{right:!0}]]),e.isMobileView&&!t.classObject.selected?(Object(c["s"])(),Object(c["e"])("button",{key:1,class:"green white--text fsmall",onClick:Object(c["O"])((function(n){return e.addEmployee(t)}),["stop"])},[Ys],8,["onClick"])):Object(c["f"])("",!0),t.classObject.selected?Object(c["M"])((Object(c["s"])(),Object(c["e"])("button",{key:2,class:"grey fsmall",onClick:Object(c["O"])((function(n){return e.removeEmployee(t)}),["stop"])},[Hs],8,["onClick"])),[[n,{content:"Remove Employee From Selection List"},void 0,{right:!0}]]):Object(c["f"])("",!0)])],10,["onClick"])})),256))])])])])})),$s=(n("25f0"),Object(c["i"])({name:"SearchEmployee",data:function(){return{searchTerm:"",empList:[],selectedEmpList:[],selectedEmp:null,isMobileView:!1}},mounted:function(){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(console.log("is mobile view true"),this.isMobileView=!0):this.isMobileView=!1,this.getEmployeesList()},watch:{searchTerm:function(e,t){if(t!=e)if(0==e.trim().length)this.empList.forEach((function(e){e.classObject.visible=!0,e.classObject.hidden=!1}));else{var n=e.toLowerCase().trim();this.empList.forEach((function(e){e.classObject.visible=e.EmployeeName&&e.EmployeeName.toLowerCase().indexOf(n)>-1||e.EmployeeNo&&e.EmployeeNo.toString().indexOf(n)>-1,e.classObject.hidden=!e.classObject.visible}))}}},methods:{getEmployeesList:function(){var e=this;Jt.loading(),R.EmployeesList().then((function(t){t.Data.map((function(e,t){e.classObject={visible:!0,hidden:!1,selected:!1,odd:t%2}})),e.empList=t.Data})).finally((function(){Jt.clear()}))},toggleEmployeeSelect:function(e){e.classObject.selected?this.removeEmployee(e):this.addEmployee(e)},removeEmployee:function(e){e.classObject.selected=!1,this.selectedEmpList.splice(this.selectedEmpList.indexOf(e),1),this.$emit("updateSelectedEmpList",this.selectedEmpList)},addEmployee:function(e){e.classObject.selected=!0,this.selectedEmpList.push(e),this.$emit("updateSelectedEmpList",this.selectedEmpList)},clearSelectedEmployeeList:function(){this.selectedEmpList.forEach((function(e){e.classObject.selected=!1})),this.selectedEmpList=[],this.$emit("updateSelectedEmpList",this.selectedEmpList)}}}));n("1fa8");$s.render=Us,$s.__scopeId="data-v-d14d6750";var Vs=$s,_s=Object(c["i"])({name:"employeeAllocation",components:{SearchEmployee:Vs,EmployeeSchedule:xs,DatePicker:on},data:function(){return{bulkEmpList:[],schedList:[],hasChanges:!1,cloneSchedList:[],selectSearchInput:"",schedAllocation:{WorkschedId:-1,DateFrom:Vt()(),DateTo:null,Comment:"",EndExistingScheds:!0},selectedSchedule:{},selectedEmpForDetail:null,startDateMenu:!1,toDateMenu:!1,startDatePickerValue:"",toDatePickerValue:"",datePickerTargetDay:null,dateType:"",isMobileView:!1,dateModalTop:null,dateModalLeft:null}},mounted:function(){var e=this;this.isMobileView=this.checkIsMobileView(),R.StandardSchedules().then((function(t){e.schedList=t.Data.filter((function(e){return!1===e.Archive})),e.cloneSchedList=e.schedList.slice()})),this.$watch("schedAllocation",(function(t,n){t===n&&(e.hasChanges=!0)}),{deep:!0})},computed:{selectedSched:function(){var e=this;if(-1===this.schedAllocation.WorkschedId)return!1;var t=this.schedList;return t.find((function(t){return t.Id===e.schedAllocation.WorkschedId}))},capDate:function(){if(this.schedAllocation.DateFrom){var e=this.schedAllocation,t=Vt()(e.DateFrom),n=t.subtract(1,"day");return n.format("DD/MM/YYYY")}}},methods:{testDown:function(){console.log("down")},navDownList:function(){console.log("nav down list")},updateSearchList:function(e){var t=this;console.log("test",e),"ArrowDown"===e.key&&this.$refs.selectDropdownRef.focus(),this.cloneSchedList=this.schedList.filter((function(e){return console.log("o"),e.Name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1}))},updateDateText:function(e,t){this.startDateMenu=!1,this.toDateMenu=!1,t.set(Vt()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.startDatePickerValue=this.schedAllocation.DateFrom?Vt()(this.schedAllocation.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.schedAllocation.DateTo?Vt()(this.schedAllocation.DateTo).format("YYYY-MM-DD"):void 0},updateEmpList:function(e){this.bulkEmpList=e},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=Vt()(e)),this.schedAllocation.DateFrom=e,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=Vt()(e)),this.schedAllocation.DateTo=e,this.datePickerFormattedToDate()},removeEmployee:function(e){this.$refs.SearchEmployeeRef.removeEmployee(e)},clearSelectedEmployee:function(){var e=this;this.hasChanges?Jt.checkChange({message:"There are currently Schedule Allocation changes <br /> Do you want to discard your changes?",onOk:function(){e.$refs.SearchEmployeeRef.clearSelectedEmployeeList(),e.resetSchedAllocation()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},allocateEmployees:function(){var e=this,t="";if((this.selectedSchedule.Id<1||!this.selectedSchedule.Id)&&(t+="<br />Select a schedule that you want to allocate."),this.schedAllocation.DateFrom&&this.schedAllocation.DateTo&&this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo)>0&&(t+="<br />Date To cannot be before Date From."),""==t){var n={WorkschedId:this.selectedSchedule.Id,EmployeeList:[],DateFrom:Vt()(this.schedAllocation.DateFrom)?Vt()(this.schedAllocation.DateFrom).format("DD/MMM/YYYY"):null,DateTo:Vt()(this.schedAllocation.DateTo)?Vt()(this.schedAllocation.DateTo).format("DD/MMM/YYYY"):null,Comment:this.schedAllocation.Comment,EndExistingScheds:this.schedAllocation.EndExistingScheds};this.bulkEmpList.length>0&&this.bulkEmpList.forEach((function(e){n.EmployeeList.push(e.EmployeeNo)})),Jt.loading(),R.AllocateSchedule(n).then((function(t){e.hasChanges=!1,e.resetSchedAllocation(),Jt.clear(),e.$refs.EmployeeScheduleRef&&e.$refs.EmployeeScheduleRef.getEmpWorkScheds()})).catch((function(e){Jt.alert(e.message),console.error("err",e)}))}},closeSchedAllocation:function(){var e=this;this.hasChanges?Jt.checkChange({message:"You have unsaved changes. Are you sure to discard the changes?",onOk:function(){e.resetSchedAllocation(),e.hasChanges=!1,e.$refs.SearchEmployeeRef.clearSelectedEmployeeList()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},showScheduleDetail:function(e){this.selectedEmpForDetail=e},resetSelectedEmpForDetail:function(){this.selectedEmpForDetail=null},resetSchedAllocation:function(){this.hasChanges=!1,this.schedAllocation={WorkschedId:-1,DateFrom:Vt()(),DateTo:null,Comment:"",EndExistingScheds:!0}},checkIsMobileView:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},chooseSchedule:function(e,t){e.target.blur(),console.log("schedList",this.schedList),this.selectedSchedule=t,this.selectSearchInput=this.selectedSchedule.Name;var n=e.target.blur();console.log("fawef",n);var a=this.$refs.selectRef;a.blur();var c=this.$refs.selectInputRef;c.blur()},updateDateTime:function(e,t,n){var a=e.target.getClientRects()[0];this.dateModalTop=a.bottom,this.dateModalLeft=a.left,this.datePickerTargetDay=t,this.dateType=n,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:n=t.sent,"DateTo"===e.dateType?e.schedAllocation.DateTo=n:"DateFrom"===e.dateType&&(e.schedAllocation.DateFrom=n);case 4:case"end":return t.stop()}}),t)})))()}}});n("c507");_s.render=Fc,_s.__scopeId="data-v-5d191eec";var Ks=_s,zs=(n("ddb0"),Object(c["P"])("data-v-100c43e2"));Object(c["v"])("data-v-100c43e2");var Qs={class:"d-flex mt-4 justify-space-between"},Gs={class:"ml-2"},Js={class:"weekDetail d-flex align-center"},qs=Object(c["h"])("div",null,null,-1),Xs={class:"schedules-data-medium mt-4",style:{overflow:"auto"}},Zs={class:"flex-sche-table"},el={class:"table-head"},tl={class:"schedule-head-grid"},nl=Object(c["h"])("div",{class:"table-cell"},null,-1),al=Object(c["h"])("div",{class:"table-cell"},"Std Hour",-1),cl=Object(c["h"])("div",{class:"table-cell"},"Total Hour",-1),sl={class:"table-cell"},ll={class:"table-body"},il={class:"schedules-arr"},ol={class:"content-cell"},rl={class:"content-cell"},dl={class:"content-cell"};Object(c["t"])();var ul=zs((function(e,t){var n=Object(c["A"])("flex-schedule-cell-control"),a=Object(c["A"])("Icon"),s=Object(c["A"])("dynamic-day-cell"),l=Object(c["A"])("edit-flex-schedule"),i=Object(c["A"])("date-picker");return Object(c["s"])(),Object(c["e"])(c["a"],null,[Object(c["h"])("div",Qs,[Object(c["h"])("div",Gs,[Object(c["h"])(n)]),Object(c["h"])("div",Js,[Object(c["h"])("span",{class:"arrow-height mr-4",onClick:t[1]||(t[1]=function(){return e.getLastWeek&&e.getLastWeek.apply(e,arguments)})},[Object(c["h"])(a,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#0000008a"}},null,8,["icon"])]),Object(c["h"])("span",{onClick:t[2]||(t[2]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},Object(c["D"])(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+Object(c["D"])(e.dayFocus.format("DD-MM-YYYY")),1),Object(c["h"])("span",{class:"arrow-height ml-4",onClick:t[3]||(t[3]=function(){return e.getNextWeek&&e.getNextWeek.apply(e,arguments)})},[Object(c["h"])(a,{icon:e.$icons.chevronRight,height:"30",style:{color:"#0000008a"}},null,8,["icon"])])]),qs]),Object(c["h"])("div",Xs,[Object(c["h"])("div",Zs,[Object(c["h"])("div",el,[Object(c["h"])("div",tl,[nl,al,cl,(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.weekDays,(function(e){return Object(c["s"])(),Object(c["e"])("div",sl,Object(c["D"])(e.day),1)})),256))])]),Object(c["h"])("div",ll,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.scheduleWeek.keys(),(function(t){return Object(c["s"])(),Object(c["e"])("div",il,[Object(c["h"])("div",ol,Object(c["D"])(e.scheduleWeek.get(t).EmployeeName),1),Object(c["h"])("div",rl,Object(c["D"])(e.scheduleWeek.get(t).StdHoursPerWeek),1),Object(c["h"])("div",dl,Object(c["D"])(e.getTotalHour(e.scheduleWeek.get(t).sche)),1),(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.scheduleWeek.get(t).sche,(function(t){return Object(c["s"])(),Object(c["e"])("div",{class:"content-cell",style:t.column},[Object(c["h"])(s,{scheDay:t,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","onOpenEditDialog"])],4)})),256))])})),256))])])]),Object(c["h"])("div",null,[Object(c["h"])(l,{ref:"EditModalRef",isEdit:e.isEditingDialog},null,8,["isEdit"]),Object(c["h"])(i,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"])])],64)})),hl=n("3835"),fl=(n("4ec9"),n("3ca3"),Object(c["P"])("data-v-03a53dc2"));Object(c["v"])("data-v-03a53dc2");var bl={class:"bold"},ml={key:0},pl={key:1},Ol=Object(c["g"])(" Schedule "),jl={class:"edit-form mt-4 copy2"},gl=Object(c["h"])("label",null,"Start Time: ",-1),yl=Object(c["h"])("label",null,"End Time: ",-1),Dl=Object(c["h"])("div",{class:"mt-4"},null,-1),vl=Object(c["h"])("div",null,null,-1),Sl=Object(c["h"])("label",null,"Net Hours: ",-1),kl=Object(c["h"])("label",null,"Break Length",-1),Al=Object(c["h"])("label",null,"Shift Id",-1),wl=Object(c["h"])("label",null,"Position",-1),El={key:0},Cl=Object(c["h"])("label",null,"CostElement 1",-1),xl=Object(c["h"])("label",null,"CostElement 2",-1),Tl={class:"mt-4 full-width d-flex justify-end"},Ml=Object(c["h"])("span",{class:"white"},"Edit",-1),Fl=Object(c["h"])("span",{class:"white"},"Create",-1),Nl=Object(c["h"])("span",{class:"white"},"Cancel",-1);Object(c["t"])();var Il,Ll,Pl,Wl=fl((function(e,t){var n=Object(c["A"])("custom-select"),a=Object(c["A"])("Modal");return Object(c["s"])(),Object(c["e"])(a,{ref:"ModalRef"},{header:fl((function(){return[Object(c["h"])("div",null,[Object(c["h"])("h2",bl,[e.isEdit?(Object(c["s"])(),Object(c["e"])("span",ml,"Edit")):(Object(c["s"])(),Object(c["e"])("span",pl,"Create")),Ol])])]})),body:fl((function(){return[Object(c["h"])("div",null,[Object(c["h"])("div",jl,[gl,Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.day.startTime=t})},null,512),[[c["I"],e.day.startTime]]),yl,Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.day.endTime=t})},null,512),[[c["I"],e.day.endTime]]),Dl,vl,Sl,Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.day.hours=t})},null,512),[[c["I"],e.day.hours]]),kl,Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.day.breakLength=t})},null,512),[[c["I"],e.day.breakLength]]),Al,Object(c["h"])("div",null,[e.shiftOptions&&e.shiftOptions.length>0?(Object(c["s"])(),Object(c["e"])(n,{key:0,options:e.shiftOptions,displayKey:"description",selected:e.selectedShift,onSelectOption:e.selectShift},null,8,["options","selected","onSelectOption"])):Object(c["f"])("",!0)]),wl,Object(c["h"])("div",null,[e.positionOptions&&1===e.positionOptions.length?(Object(c["s"])(),Object(c["e"])("span",El,Object(c["D"])(e.positionOptions[0].positionTitle),1)):e.positionOptions&&e.positionOptions.length>1?(Object(c["s"])(),Object(c["e"])(n,{key:1,options:e.positionOptions,displayKey:"positionTitle",selected:e.selectedPosition,onSelectOption:e.selectPositionCustom},null,8,["options","selected","onSelectOption"])):Object(c["M"])((Object(c["s"])(),Object(c["e"])("input",{key:2,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.day.position=t})},null,512)),[[c["I"],e.day.position]])]),Cl,Object(c["h"])("div",null,[e.costElementOptions&&e.costElementOptions.length>0?(Object(c["s"])(),Object(c["e"])(n,{key:0,options:e.costElementOptions,displayKey:"description",selected:e.selectedCostElement1,onSelectOption:e.selectCostElement1},null,8,["options","selected","onSelectOption"])):Object(c["f"])("",!0)]),xl,Object(c["h"])("div",null,[e.costElementOptions&&e.costElementOptions.length>0?(Object(c["s"])(),Object(c["e"])(n,{key:0,options:e.costElementOptions,displayKey:"description",selected:e.selectedCostElement2,onSelectOption:e.selectCostElement2},null,8,["options","selected","onSelectOption"])):Object(c["f"])("",!0)])])])]})),footer:fl((function(){return[Object(c["h"])("div",Tl,[e.isEdit?(Object(c["s"])(),Object(c["e"])("button",{key:0,class:"blue normal copy2",onClick:t[6]||(t[6]=function(t){return e.updateSche()})},[Ml])):Object(c["f"])("",!0),e.isEdit?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("button",{key:1,class:"blue normal copy2",onClick:t[7]||(t[7]=function(t){return e.createSche()})},[Fl])),Object(c["h"])("button",{class:"ml-2 normal orange copy2",onClick:t[8]||(t[8]=function(t){return e.cancel()})},[Nl])])]})),_:1},512)})),Bl=n("5502"),Rl=(n("c1f9"),n("4fad"),n("2ef0")),Yl=n.n(Rl),Hl={date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:""};(function(e){e["loadTargetSchedule"]="LOAD_TARGET_SCHEDULE"})(Ll||(Ll={})),function(e){e["clearForm"]="CLEAR_FORM",e["setScheduleDay"]="SET_SCHEDULE_DAY",e["saveScheduleDayToWeek"]="SAVE_SCHEDULE_DAY_TO_WEEK",e["updateEditConfig"]="UPDATE_EDIT_CONFIG",e["createNewScheduleDay"]="CREATE_NEW_SCHEDULE_DAY"}(Pl||(Pl={}));var Ul=Object(ha["a"])({},Ll.loadTargetSchedule,(function(e,t){e.commit;console.log("scheduleId",t),R.GetFlexScheduleDetail(t).then((function(e){console.log("GetFlexScheduleDetail",e)}))})),$l=(Il={},Object(ha["a"])(Il,Pl.clearForm,(function(e){e.flexScheduleDay=Hl})),Object(ha["a"])(Il,Pl.createNewScheduleDay,(function(e,t){e.flexScheduleDay=Hl,e.selectedFlexDay=t})),Object(ha["a"])(Il,Pl.setScheduleDay,(function(e,t){console.log("emit",t),e.selectedFlexDay=t,e.flexScheduleDay.startTime=t.startTime,e.flexScheduleDay.endTime=t.endTime,e.flexScheduleDay.hours=t.Hours;var n=Object.fromEntries(Object.entries(t.scheduleDetail).map((function(e){var t=Object(hl["a"])(e,2),n=t[0],a=t[1];return[n.charAt(0).toLowerCase()+n.slice(1),a]})));e.flexScheduleDay=Yl.a.merge({},e.flexScheduleDay,n),console.log("state",e.flexScheduleDay)})),Object(ha["a"])(Il,Pl.saveScheduleDayToWeek,(function(e){e.selectedFlexDay?(e.selectedFlexDay.startTime=e.flexScheduleDay.startTime,e.selectedFlexDay.endTime=e.flexScheduleDay.endTime,e.selectedFlexDay.scheduleDetail=Yl.a.merge({},e.selectedFlexDay.scheduleDetail,e.flexScheduleDay)):console.error("missing selected flex day")})),Object(ha["a"])(Il,Pl.updateEditConfig,(function(e,t){e.editFlexScheduleDayConfig=Yl.a.clone(t)})),Il),Vl={state:{selectedDate:Vt()(),calendarFocusDate:Vt()(),selectedFlexDay:null,flexScheduleDay:{date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:""},editFlexScheduleDayConfig:{startTime:!1,endTime:!1,hours:!1,breakLength:!1,shiftId:!1,position:!1,costElement1:!1,costElement2:!1},scheduleWeek:[],flexScheduleCellSetting:{showHours:{value:!1,name:"Net Hours"},showBreakLength:{value:!1,name:"Break Length"},showShiftId:{value:!1,name:"Shift Id"},showPosition:{value:!1,name:"Position"},showCostElement1:{value:!1,name:"Cost Element 1"},showCostElement2:{value:!1,name:"Cost Element 2"}}},mutations:$l,actions:Ul},_l=Vl,Kl=n("53ca"),zl=Object(c["P"])("data-v-7330ab18");Object(c["v"])("data-v-7330ab18");var Ql={class:"custom-select",tabindex:"1",ref:"selectRef"},Gl={class:"custom-select-selected"},Jl={key:0},ql={key:1},Xl={class:"cell-config"};Object(c["t"])();var Zl=zl((function(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",null,[Object(c["h"])("span",null,[Object(c["h"])("div",Ql,[Object(c["h"])("div",Gl,[e.selected&&"object"===Object(Kl["a"])(e.selected)?(Object(c["s"])(),Object(c["e"])("span",Jl,Object(c["D"])(e.selected[e.displayKey]),1)):e.selected?(Object(c["s"])(),Object(c["e"])("span",ql,Object(c["D"])(e.selected),1)):Object(c["f"])("",!0)]),Object(c["h"])("div",{class:"custom-select-items",style:{left:e.left+"px"}},[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.options,(function(t,n){return Object(c["s"])(),Object(c["e"])("div",{class:"custom-select-item",key:n,onClick:function(n){e.selectOption(n,t)}},[Object(c["h"])("div",Xl,[Object(c["h"])("label",null,Object(c["D"])(t[e.displayKey]),1)])],8,["onClick"])})),128))],4)],512)])])})),ei=Object(c["i"])({name:"CustomSelect",props:{options:{type:Array,default:[]},displayKey:{type:String,default:""},selected:{}},data:function(){return{left:0}},mounted:function(){this.left=this.$refs.selectRef.getClientRects()[0].left,console.log("left",this.left)},methods:{selectOption:function(e,t){e.target.blur();var n=this.$refs.selectRef;n.blur(),this.$emit("selectOption",t)}}});n("55f5");ei.render=Zl,ei.__scopeId="data-v-7330ab18";var ti=ei,ni=Object(c["i"])({name:"EditFlexSchedule",components:{Modal:se,CustomSelect:ti},props:{isEdit:{type:Boolean}},data:function(){return{flexScheduleDay:{},selectedPosition:{},selectedShift:{},selectedCostElement1:{},selectedCostElement2:{},day:{}}},setup:function(){var e=Object(Bl["b"])();return{shiftOptions:Object(c["c"])((function(){return console.log("store.state.LookUp.shift",e.state.LookUp.shifts),e.state.LookUp.shifts})),costElementOptions:Object(c["c"])((function(){return console.log("costElementOptions",e.state.LookUp.costElements),e.state.LookUp.costElements}))}},computed:{positionOptions:function(){var e=this.$store.state.LookUp.positions;return 1===e.length&&(this.selectedPosition=e[0]),e}},mounted:function(){this.$store;this.day=this.$store.state.FlexSchedule.flexScheduleDay,console.log("edit flex schedule mounted")},methods:{selectCostElement1:function(e){this.selectedCostElement1=e},selectCostElement2:function(e){this.selectedCostElement2=e},selectShift:function(e){this.selectedShift=e},selectPositionCustom:function(e){console.log("position",e),this.selectedPosition=e},selectPosition:function(e,t){this.selectedPosition=t,e.target.blur();var n=this.$refs.selectRef;n.blur()},clearForm:function(){this.$store.commit(Pl.clearForm)},cancel:function(){this.$store.commit(Pl.clearForm),this.toggleShow()},updateSche:function(){var e={EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),StartTime:this.day.startTime,EndTime:this.day.endTime,Hours:this.day.hours,ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};R.UpdateFlexSchedule(this.$store.state.FlexSchedule.selectedFlexDay.id,e).then((function(e){console.log("res",e)})),this.$store.commit(Pl.saveScheduleDayToWeek),this.toggleShow()},createSche:function(){var e=[{EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),StartTime:this.day.startTime,EndTime:this.day.endTime,Hours:this.day.hours,ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1.id,CostElement2:this.selectedCostElement2.id}}];R.CreateFlexSchedule(e).then((function(e){})),this.$store.commit(Pl.saveScheduleDayToWeek),this.toggleShow()},openEdit:function(){var e,t=this;this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(e=this.shiftOptions.find((function(e){return e.shiftType===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId}))),e&&(this.selectedShift=e),this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(this.selectedCostElement1=this.costElementOptions.find((function(e){return e.id===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1})),this.selectedCostElement2=this.costElementOptions.find((function(e){return e.id===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2}))),console.log("this.selectedShift",this.selectedShift),this.day=this.$store.state.FlexSchedule.flexScheduleDay,this.$refs.ModalRef.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});n("ce2c");ni.render=Wl,ni.__scopeId="data-v-03a53dc2";var ai=ni,ci=Object(c["P"])("data-v-36faa946");Object(c["v"])("data-v-36faa946");var si={class:"day-info"},li={class:"display-day"},ii={key:1},oi={class:"d-flex flex-column align-center"},ri=Object(c["h"])("label",null,"Start Time",-1),di={class:"mt-2 d-flex flex-column align-center"},ui=Object(c["h"])("label",{class:"px-2"},"End Time",-1),hi=Object(c["h"])("span",{class:"white"},"Create",-1),fi={key:0},bi={key:1},mi={key:1},pi=Object(c["h"])("span",{class:"white caption"},"Edit",-1);Object(c["t"])();var Oi=ci((function(e,t,n,a,s,l){var i=Object(c["A"])("editable-cell-element");return Object(c["s"])(),Object(c["e"])("div",si,[Object(c["h"])("div",li,[Object(c["h"])("div",null,[e.editTime||!e.scheDay.startTime&&!e.scheDay.endTime?e.editTime?(Object(c["s"])(),Object(c["e"])("div",ii,[Object(c["h"])("div",oi,[ri,Object(c["M"])(Object(c["h"])("input",{class:"time-input","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.scheDay.startTime=t})},null,512),[[c["I"],e.scheDay.startTime]])]),Object(c["h"])("div",di,[ui,Object(c["M"])(Object(c["h"])("input",{class:"time-input","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.scheDay.endTime=t})},null,512),[[c["I"],e.scheDay.endTime]])]),Object(c["h"])("button",{class:"mt-2",onClick:t[4]||(t[4]=function(t){e.editTime=!1,e.updateEditing(!1)})},"Confirm")])):(Object(c["s"])(),Object(c["e"])("div",{key:2,class:["create-day",{"create-day-show":!e.scheDay.time&&!e.scheDay.schedule}]},[Object(c["h"])("button",{class:"blue small",onClick:t[5]||(t[5]=function(t){return e.createSche(e.scheDay)})},[hi])],2)):(Object(c["s"])(),Object(c["e"])("div",{key:0,onClick:t[1]||(t[1]=function(t){return e.updateEditTime(!0)})},[Object(c["h"])("div",null,Object(c["D"])(e.scheDay.startTime)+" - "+Object(c["D"])(e.scheDay.endTime),1)]))]),e.editTime?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("div",fi,[e.cellSettings.showHours.value&&e.scheDay.hours?(Object(c["s"])(),Object(c["e"])(i,{key:0,class:"mt-1",label:"Net hours:",modelValue:e.scheDay.hours,onStartedEditing:t[6]||(t[6]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[7]||(t[7]=function(t){e.scheDay.hours=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0),e.scheDay.scheduleDetail?(Object(c["s"])(),Object(c["e"])("div",bi,[e.cellSettings.showBreakLength.value?(Object(c["s"])(),Object(c["e"])(i,{key:0,class:"mt-1",label:"Break Length:",modelValue:e.scheDay.scheduleDetail.breakLength,onStartedEditing:t[8]||(t[8]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[9]||(t[9]=function(t){e.scheDay.scheduleDetail.breakLength=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0),e.cellSettings.showShiftId.value?(Object(c["s"])(),Object(c["e"])(i,{key:1,class:"mt-1",label:"Shift Id:",modelValue:e.scheDay.scheduleDetail.shiftId,onStartedEditing:t[10]||(t[10]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[11]||(t[11]=function(t){e.scheDay.scheduleDetail.shiftId=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0),e.cellSettings.showPosition.value?(Object(c["s"])(),Object(c["e"])(i,{key:2,class:"mt-1",label:"Position:",modelValue:e.scheDay.scheduleDetail.position,fullWidthInput:!0,onStartedEditing:t[12]||(t[12]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[13]||(t[13]=function(t){e.scheDay.scheduleDetail.position=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0),e.cellSettings.showCostElement1.value?(Object(c["s"])(),Object(c["e"])(i,{key:3,class:"mt-1",label:"CostElement1:",modelValue:e.scheDay.scheduleDetail.costElement1,fullWidthInput:!0,onStartedEditing:t[14]||(t[14]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[15]||(t[15]=function(t){e.scheDay.scheduleDetail.costElement1=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0),e.cellSettings.showCostElement2.value?(Object(c["s"])(),Object(c["e"])(i,{key:4,class:"mt-1",label:"CostElement2:",modelValue:e.scheDay.scheduleDetail.costElement2,fullWidthInput:!0,onStartedEditing:t[16]||(t[16]=function(t){return e.editing=!0}),"onUpdate:modelValue":t[17]||(t[17]=function(t){e.scheDay.scheduleDetail.costElement2=t,e.updateEditing})},null,8,["modelValue"])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])),e.editing||!e.scheDay.startTime&&!e.scheDay.endTime?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])("div",mi,[Object(c["h"])("button",{class:" detail-button blue small mt-2",onClick:t[18]||(t[18]=function(t){return e.moreDetail(e.scheDay)})},[pi])]))])])})),ji=Object(c["P"])("data-v-0e06818a");Object(c["v"])("data-v-0e06818a");var gi=Object(c["h"])("span",{class:"icon-tick "},null,-1),yi=Object(c["h"])("span",{class:"icon-cross"},null,-1);Object(c["t"])();var Di=ji((function(e,t,n,a,s,l){return e.editing?(Object(c["s"])(),Object(c["e"])("div",{key:0,class:["d-flex flex-wrap justify-center",{"input-width-full":e.fullWidthInput}]},[Object(c["h"])("label",null,Object(c["D"])(e.label),1),Object(c["M"])(Object(c["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t}),class:"input-width"},null,512),[[c["I"],e.value]]),Object(c["h"])("button",{class:"ml-1 btn-xsmall blue",onClick:t[2]||(t[2]=function(){return e.update&&e.update.apply(e,arguments)})},[gi]),Object(c["h"])("button",{class:"ml-1 btn-xsmall orange",onClick:t[3]||(t[3]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},[yi])],2)):(Object(c["s"])(),Object(c["e"])("div",{key:1,onClick:t[4]||(t[4]=function(t){return e.changeEditing(!0)})},[Object(c["h"])("label",null,Object(c["D"])(e.label),1),Object(c["g"])(" "+Object(c["D"])(e.modelValue),1)]))})),vi=Object(c["i"])({name:"EditableCellElement",props:{modelValue:{type:[String,Number]},label:{type:String},fullWidthInput:{type:Boolean}},data:function(){return{value:"",editing:!1}},methods:{changeEditing:function(){this.value=this.modelValue,this.editing=!0,this.$emit("updateEditing",!0)},update:function(){this.$emit("update:modelValue",this.value),this.editing=!1},cancel:function(){this.editing=!1,this.$emit("updateEditing",!1)}}});n("8f0a");vi.render=Di,vi.__scopeId="data-v-0e06818a";var Si,ki,Ai,wi,Ei=vi;(function(e){e["setShifts"]="SET_SHIFTS",e["setPosition"]="SET_POSITION",e["setCostElements"]="SET_COST_ELEMENTS"})(Ai||(Ai={})),function(e){e["getPositions"]="GET_POSITIONS",e["getShifts"]="GET_SHIFTS",e["getCostElement"]="GET_COST_ELEMENT"}(wi||(wi={}));var Ci=(Si={},Object(ha["a"])(Si,Ai.setShifts,(function(e,t){e.shifts=t})),Object(ha["a"])(Si,Ai.setPosition,(function(e,t){e.positions=t})),Object(ha["a"])(Si,Ai.setCostElements,(function(e,t){e.costElements=t})),Si),xi=(ki={},Object(ha["a"])(ki,wi.getPositions,(function(e,t){var n=e.commit;R.GetPosition(t).then((function(e){console.log("positon",e);var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(hl["a"])(e,2),n=t[0],a=t[1];return[n.charAt(0).toLowerCase()+n.slice(1),a]})))}));n(Ai.setPosition,t)}))})),Object(ha["a"])(ki,wi.getShifts,(function(e){var t=e.commit;R.ShiftTypes().then((function(e){var n=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(hl["a"])(e,2),n=t[0],a=t[1];return[n.charAt(0).toLowerCase()+n.slice(1),a]})))}));console.log("convertedShifts",n),t(Ai.setShifts,n)}))})),Object(ha["a"])(ki,wi.getCostElement,(function(e){var t=e.commit;R.GetCostelements().then((function(e){var n=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(hl["a"])(e,2),n=t[0],a=t[1];return[n.charAt(0).toLowerCase()+n.slice(1),a]})))}));console.log("convertedShifts",n),t(Ai.setCostElements,n)}))})),ki),Ti={state:{shifts:[],positions:[],costElements:[]},mutations:Ci,actions:xi},Mi=Ti,Fi=Object(c["i"])({name:"DynamicScheCell",components:{EditableCellElement:Ei},props:{scheDay:{type:Object}},data:function(){return{editTime:!1,editing:!1}},setup:function(){var e=Object(Bl["b"])(),t=e.state.FlexSchedule.flexScheduleCellSetting;return{cellSettings:t}},methods:{updateElement:function(e,t,n){t.startTime=e},moreDetail:function(e){this.$store.commit(Pl.setScheduleDay,e),this.$emit("openEditDialog",!0)},updateEditTime:function(e){this.editTime=e,e&&(this.editing=!0)},createSche:function(e){console.log("scheDay",e),this.$store.dispatch(wi.getPositions,e.employeeNo),this.$store.commit(Pl.createNewScheduleDay,e),this.$emit("openEditDialog",!1)},updateEditing:function(e){this.editing=!0===e||!1===e?e:!this.editing}}});n("c6e0");Fi.render=Oi,Fi.__scopeId="data-v-36faa946";var Ni=Fi,Ii=Object(c["P"])("data-v-dadce0a0");Object(c["v"])("data-v-dadce0a0");var Li={class:"cell-config-list"},Pi={class:"custom-select",tabindex:"1"},Wi=Object(c["h"])("div",{class:"custom-select-selected"}," Cell Options ",-1),Bi={class:"custom-select-items"},Ri={class:"cell-config"};Object(c["t"])();var Yi=Ii((function(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",Li,[Object(c["h"])("div",null,[Object(c["h"])("div",Pi,[Wi,Object(c["h"])("div",Bi,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.cellSettings,(function(t,n){return Object(c["s"])(),Object(c["e"])("div",{class:"custom-select-item",key:n,onClick:function(n){e.checkOptions(t)}},[Object(c["h"])("div",Ri,[Object(c["h"])("label",null,Object(c["D"])(t.name),1),Object(c["M"])(Object(c["h"])("input",{type:"checkbox","onUpdate:modelValue":function(e){return t.value=e}},null,8,["onUpdate:modelValue"]),[[c["G"],t.value]])])],8,["onClick"])})),128))])])])])})),Hi=Object(c["i"])({name:"FlexScheduleCellControl",setup:function(){var e=Object(Bl["b"])(),t=Object(c["x"])(!1),n=Object(c["x"])([]),a=e.state.FlexSchedule.flexScheduleCellSetting;return{open:t,cellSettings:a,optionSelected:n}},methods:{checkOptions:function(e){}}});n("a472");Hi.render=Yi,Hi.__scopeId="data-v-dadce0a0";var Ui=Hi,$i=Object(c["P"])("data-v-50175295");Object(c["v"])("data-v-50175295");var Vi=Object(c["h"])("div",{class:"heading"},null,-1),_i={class:"content"},Ki={class:"clock-frame"},zi={ref:"clockRef",width:"200",height:"200",style:{"background-color":"white"}},Qi=Object(c["h"])("div",{class:"controls"},null,-1);Object(c["t"])();var Gi=$i((function(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])("div",null,[Vi,Object(c["h"])("div",_i,[Object(c["h"])("div",Ki,[Object(c["h"])("canvas",zi,null,512)]),Qi])])})),Ji=(n("cb29"),Object(c["i"])({name:"TimePicker",setup:function(){for(var e=Object(c["x"])([]),t=Object(c["x"])([]),n=Object(c["x"])(null),a=0;a<12;a++)e.value.push(a);for(var s=0;s<=55;s+=5)t.value.push(s);return Object(c["q"])((function(){console.log(n.value);var e=n.value,t=e.getContext("2d"),a=e.height/2;function c(){t.arc(0,0,a,0,2*Math.PI),t.fillStyle="lightGrey",t.fill(),s(t,a),l(t,a),i(t,a)}function s(e,t){e.beginPath(),e.arc(0,0,5,0,2*Math.PI),e.fillStyle="#333",e.fill()}function l(e,t){var n;e.font="18px arial",e.textBaseline="middle",e.textAlign="center";for(var a=1;a<13;a++)n=a*Math.PI/6,console.log("ang",n),e.rotate(n),e.translate(0,.85*-t),e.rotate(-n),e.fillText(a.toString(),0,0),e.rotate(n),e.translate(0,.85*t),e.rotate(-n)}function i(e,t){new Date;var n=5,a=15;n%=12,n=n*Math.PI/6,o(e,n,.5*t,5),a=a*Math.PI/30,o(e,a,.7*t,3)}function o(e,t,n,a){e.beginPath(),e.lineWidth=a,e.lineCap="round",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-n),e.stroke(),e.rotate(-t)}t.translate(a,a),a*=.9,c()})),{clockHours:e,clockMinutes:t,clockRef:n}}}));Ji.render=Gi,Ji.__scopeId="data-v-50175295";var qi=Ji,Xi=n("c850"),Zi=Object(c["P"])("data-v-ba02b0d0");Object(c["v"])("data-v-ba02b0d0");var eo={class:"custom-select",tabindex:"1",ref:"selectRef"},to={class:"custom-select-selected"},no={class:"custom-select-items"},ao={class:"cell-config"};Object(c["t"])();var co=Zi((function(e,t){return Object(c["s"])(),Object(c["e"])("div",eo,[Object(c["h"])("div",to,[Object(c["M"])(Object(c["h"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectSearchInput=t}),onKeyup:t[2]||(t[2]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[c["I"],e.selectSearchInput]])]),Object(c["h"])("div",no,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(e.dropDownList,(function(t,n){return Object(c["s"])(),Object(c["e"])("div",{class:["custom-select-item",{targeting:t.targeting}],ref:"selectDropdownRef",key:n,tabindex:n+99,onClick:function(n){return e.chooseOption(n,t)}},[Object(c["h"])("div",ao,Object(c["D"])(t.name),1)],10,["tabindex","onClick"])})),128))])],512)})),so=Object(c["i"])({name:"AutoComplete",props:{inputList:{type:Array},optionName:{type:String}},data:function(){return{editing:!1,targetingIndex:null}},setup:function(e){e.optionName?(console.log("inputLIst",e.inputList),console.log("inputLIst",e.optionName)):console.error("need object, optionName is missing");var t=Object(c["x"])(e.inputList.map((function(t,n){return{targeting:!1,name:t[e.optionName],index:n}}))),n=Object(c["x"])(t.value.slice()),a=Object(c["x"])("");return{originList:t,dropDownList:n,selectSearchInput:a}},methods:{updateSearchList:function(e){var t=this;console.log("test",e),"ArrowDown"!==e.key?"ArrowUp"!==e.key?"Enter"===e.key&&this.targetingIndex?this.selectFromTarget():this.dropDownList=this.originList.filter((function(e){return console.log("o"),e.targeting=!1,e.name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1})):this.moveTargetUp():this.moveTargetDown()},moveTargetDown:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex+1<this.dropDownList.length?(this.targetingIndex++,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex,this.dropDownList.length,this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},moveTargetUp:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex-1>=0?(this.targetingIndex--,this.dropDownList[this.targetingIndex].targeting=!0):this.targetingIndex-1<0?(this.targetingIndex=this.dropDownList.length-1,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},selectFromTarget:function(){this.selectSearchInput=this.dropDownList[this.targetingIndex].name,this.$emit("selected",this.inputList[this.targetingIndex])},chooseOption:function(e,t){this.selectSearchInput=t.name,this.$emit("selected",this.inputList[t.index]),e.target.blur()}}});n("3941");so.render=co,so.__scopeId="data-v-ba02b0d0";var lo=so,io=Object(c["i"])({name:"FlexSchedule",components:{DatePicker:on,TimePicker:qi,EditFlexSchedule:ai,DynamicDayCell:Ni,FlexScheduleCellControl:Ui,Icon:Xi["a"],AutoComplete:lo},data:function(){return{dayFocus:Vt()(),weekDays:[],scheduleWeek:[],selectedWeekStart:Vt()(),autoCompleteList:[{name:"1",display:"display 1"},{name:"2",display:"display 2"},{name:"3",display:"display 3"},{name:"4",display:"display 4"}],isEditingDialog:!1,datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map}},setup:function(){},mounted:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){var n,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(wi.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(wi.getShifts),e.$store.dispatch(wi.getCostElement),n=Vt()(),a=n.clone().startOf("week"),c=n.clone().endOf("week"),e.loadDate(a,c);case 7:case"end":return t.stop()}}),t)})))()},methods:{loadDate:function(e,t){var n=this;return Object(Ut["a"])(regeneratorRuntime.mark((function c(){var s,l,i,o,r,d,u,h,f,b,m;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,Promise.all([n.getDateData(e,t),R.GetManagedEmployees(Affinity.user.EmployeeNo).then((function(e){return console.log("res employees",e),e.map((function(e){return{EmployeeName:e.CommonName,EmployeeNo:e.EmployeeNo,StdHoursPerWeek:e.StdHoursPerWeek,PositionCode:e.PositionCode}}))}))]);case 2:s=c.sent,l=Object(hl["a"])(s,2),i=l[0],o=l[1],r=Object(a["a"])(o);try{for(r.s();!(d=r.n()).done;)u=d.value,n.scheduleWeekMap.set(u.EmployeeNo,u)}catch(p){r.e(p)}finally{r.f()}h=Object(a["a"])(i);try{for(h.s();!(f=h.n()).done;)b=f.value,n.scheduleWeekMap.get(b.EmployeeNo)&&!n.scheduleWeekMap.get(b.EmployeeNo).sche?n.scheduleWeekMap.get(b.EmployeeNo).sche=[b]:n.scheduleWeekMap.get(b.EmployeeNo)&&n.scheduleWeekMap.get(b.EmployeeNo).sche.push(b)}catch(p){h.e(p)}finally{h.f()}m={weekStart:Vt()().startOf("week"),weekEnd:Vt()().endOf("week"),scheduleWeek:n.scheduleWeekMap},n.$store.state.FlexSchedule.calendarFocusDate=Vt()(),n.getNewWeek(m),console.log("scheduleWeekMap",n.scheduleWeekMap);case 14:case"end":return c.stop()}}),c)})))()},chooseCalendarDate:function(e){var t=this;return Object(Ut["a"])(regeneratorRuntime.mark((function n(){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.target.getClientRects()[0],t.datePickerTop=a.bottom,t.datePickerLeft=a.left,n.prev=3,n.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:c=n.sent,n.next=12;break;case 9:return n.prev=9,n.t0=n["catch"](3),n.abrupt("return");case 12:t.selectDate(c);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})))()},selectDate:function(e){var t=this;return Object(Ut["a"])(regeneratorRuntime.mark((function n(){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,a=e.clone().startOf("week"),c=e.clone().endOf("week"),n.abrupt("return",t.getDateData(a,c));case 5:case"end":return n.stop()}}),n)})))()},getSelectedWeek:function(e){var t=e.clone().startOf("week");e.clone().endOf("week");this.weekDays=[];for(var n=0;n<=6;n++){var a=Vt()(t).add(n,"days");this.weekDays.push({momentDay:a,day:a.format("ddd, MMM Do")})}},getDateData:function(e,t){var n=this;return Object(Ut["a"])(regeneratorRuntime.mark((function a(){var c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c={},e&&t&&(c={startDate:e.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD")}),a.abrupt("return",R.GetFlexSchedules(c).then((function(e){return n.reformatData(e)})));case 3:case"end":return a.stop()}}),a)})))()},scheDaysToColumn:function(){var e,t=Object(a["a"])(this.scheduleWeek.values());try{for(t.s();!(e=t.n()).done;){for(var n=e.value,c=n.EmployeeName,s=n.EmployeeNo,l=function(e){var t=void 0;n.sche?t=n.sche.find((function(t){return t.dayInWeek===e})):n.sche=[],t||(0!==e||n.sche[0]&&null!==n.sche[0].dayInWeek&&void 0!==n.sche[0].dayInWeek?n.sche.push({dayInWeek:e,employeeName:c,employeeNo:s}):(n.sche[0]={},n.sche[0].dayInWeek=0,n.sche[0].employeeName=c,n.sche[0].employeeNo=s))},i=0;i<=6;i++)l(i);n.sche.sort((function(e,t){return e.dayInWeek-t.dayInWeek}));var o,r=Object(a["a"])(n.sche);try{for(r.s();!(o=r.n()).done;){var d=o.value;d.column="grid-column-start: ".concat(d.dayInWeek+4),d.editing=!1}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}console.log("this.scheduleWeek",this.scheduleWeek)},getLastWeek:function(){this.dayFocus.subtract(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");console.log("this.scheduleWeekMap",this.scheduleWeekMap),this.loadDate(e,t)},getNextWeek:function(){this.dayFocus.add(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},getNewWeek:function(e){var t=e;this.getSelectedWeek(t.weekStart),this.scheduleWeek=this.$store.state.FlexSchedule.scheduleWeek=t.scheduleWeek,this.scheDaysToColumn()},moreDetail:function(e){this.$store.commit(Pl.setScheduleDay,e)},getTotalHour:function(e){var t,n=0,c=Object(a["a"])(e);try{for(c.s();!(t=c.n()).done;){var s=t.value;s.hours&&(n+=s.hours)}}catch(l){c.e(l)}finally{c.f()}return n},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},openEditDialog:function(e){this.isEditingDialog=e,this.$refs.EditModalRef.openEdit()},reformatData:function(e){return e.forEach((function(e){e.id=e.Id,e.startTime=Vt()(e.StartTime).format("HH:mm"),e.endTime=Vt()(e.EndTime).format("HH:mm"),e.hours=e.Hours,e.scheduleDetail=e.ScheduleData,e.dayInWeek=Vt()(e.Date).day()})),e}}});n("9d72");io.render=ul,io.__scopeId="data-v-100c43e2";var oo=io,ro=Object(c["P"])("data-v-71c5192d");Object(c["v"])("data-v-71c5192d");var uo=Object(c["h"])("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1",crossorigin:"anonymous"},null,-1),ho={class:"col-sm-4"},fo=Object(c["h"])("p",null,"Login form style 3",-1),bo={class:"card"},mo={class:"card-body"},po=Object(c["h"])("h4",{class:"card-title text-center mb-4 mt-1"},"Sign in",-1),Oo=Object(c["h"])("hr",null,null,-1),jo=Object(c["h"])("p",{class:"text-success text-center"},"Some message goes here",-1),go={class:"form-group"},yo={class:"input-group"},Do={class:"form-group mt-2"},vo={class:"input-group"},So=Object(c["h"])("div",{class:"form-group mt-4"},[Object(c["h"])("button",{type:"submit",class:"btn btn-primary btn-block"}," Login ")],-1);Object(c["t"])();var ko=ro((function(e,t,n,a,s,l){return Object(c["s"])(),Object(c["e"])(c["a"],null,[uo,Object(c["h"])("aside",ho,[fo,Object(c["h"])("div",bo,[Object(c["h"])("article",mo,[po,Oo,jo,Object(c["h"])("form",{onSubmit:t[3]||(t[3]=Object(c["O"])((function(){return l.login&&l.login.apply(l,arguments)}),["prevent"]))},[Object(c["h"])("div",go,[Object(c["h"])("div",yo,[Object(c["M"])(Object(c["h"])("input",{name:"",class:"form-control",placeholder:"Email or login","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.username=e})},null,512),[[c["I"],s.username]])])]),Object(c["h"])("div",Do,[Object(c["h"])("div",vo,[Object(c["M"])(Object(c["h"])("input",{class:"form-control",placeholder:"******",type:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return s.password=e})},null,512),[[c["I"],s.password]])])]),So],32)])])])],64)})),Ao={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){console.log("login"),console.log(this.username),console.log(this.password),O.a.post("http://localhost:61160/api/Authentication/post",{username:this.username,password:this.password}).then((function(e){console.log("res",e)}))}}};Ao.render=ko,Ao.__scopeId="data-v-71c5192d";var wo=Ao,Eo=[{path:"/login",name:"Login",component:wo},{path:"/my-schedules",name:"My Schedule",component:dn},{path:"/flex-schedule",name:"Flex Schedule",component:oo},{path:"/team-schedules",name:"Schedule Management",component:Ua},{path:"/employee-allocations",name:"Employee Allocation",component:Ks},{path:"/",name:"Home",component:dn}],Co=Object(lt["a"])({history:Object(lt["b"])("/"),routes:Eo}),xo=Co,To={state:{magic:123},modules:{FlexSchedule:_l,LookUp:Mi}},Mo=new Bl["a"].Store(To),Fo=(n("ba8f"),n("8e1f"),n("14b7")),No=n("e37d"),Io={reformatDate:function(e){var t;if(!e)return e;if("string"===typeof e)return e;if("object"===Object(Kl["a"])(e)&&"Date"===(null===(t=e.constructor)||void 0===t?void 0:t.name)){var n=Vt()(e);return n.format("DD/MM/YYYY")}if(e.isValid()){var a=Vt()(e);return null!=a&&a.isValid()?a.format("DD/MM/YYYY"):e}return e},reformatTime:function(e){if(!e)return e;var t=Vt()(e);if(null==t||!t.isValid()){var n=Vt()(e,"h:m");return null!=n&&n.isValid()?n.format("HH:mm"):e}return t.format("HH:mm")},ordinalSuffix:function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}},Lo=Io,Po=n("97d2"),Wo=n("5210"),Bo=n("963c"),Ro=n("f68e"),Yo={chevronUp:Po["a"],chevronLeft:Wo["a"],chevronRight:Bo["a"],chevronDown:Ro["a"]},Ho=Yo,Uo=Object(Fo["a"])();navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(a["a"])(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.unregister()}}catch(s){n.e(s)}finally{n.f()}}));var $o=Object(c["d"])(st);$o.config.globalProperties.emitter=Uo,$o.use(No["a"]),$o.use(Mo).use(xo).mount("#app"),$o.config.globalProperties.$filters=Lo,$o.config.globalProperties.$icons=Ho},ce2c:function(e,t,n){"use strict";n("7c1b")},d2c7:function(e,t,n){"use strict";n("6f42")},e439:function(e,t,n){},e552:function(e,t,n){},ed86:function(e,t,n){},f962:function(e,t,n){"use strict";n("42ae")},fcab:function(e,t,n){"use strict";n("a883")}});
//# sourceMappingURL=app.js.map