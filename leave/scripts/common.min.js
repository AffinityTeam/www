var doc,datalistTest,File,mybasepath;if("Affinity"in window||(window.Affinity={}),Affinity.started=(new Date).getTime(),Affinity.views={},Affinity.Components={},Affinity.Components.Commons={},Affinity.Components.Commons.Version="6.0.11.1",Affinity.Components.Commons.Notes="WebWorker support (disabled)",Affinity.Components.Commons.Name="UI Framewrok Commons",Affinity.Components.Commons.File="commons.6.0.0.js",Affinity.Components.Commons.Notes="API Structure change",Affinity.Components.Commons.Jira="",Affinity.Components.MooTools={},Affinity.Components.MooTools.Version="1.6.0",Affinity.Components.MooTools.Name="MooTools Core",Affinity.Components.MooTools.File="MooTools-Core-1.6.0.js",Affinity.Components.MooTools.Jira="",Affinity.Components.MoreTools={},Affinity.Components.MoreTools.Version="1.6.0",Affinity.Components.MoreTools.Name="MooTools More",Affinity.Components.MoreTools.File="MooTools-More-1.6.0.js",Affinity.Components.MoreTools.Jira="",typeof console=="undefined"&&(console={log:function(){}}),typeof MooTools=="undefined")throw new ReferenceError("This site requires MooTools 1.6.0 and MooTools.More 1.6.0");doc=document.documentElement;doc.setAttribute("data-useragent",navigator.userAgent);"events"in Affinity||(Affinity.events={});Affinity.mobile=!1;Affinity.events={over:"mouseover",out:"mouseout",overAll:"mouseenter",outAll:"mouseleave",start:"mousedown",move:"mousemove",end:"mouseup",click:"click"};Affinity.icons={AddToList:"&#xe096;",Air:"&#xe047;",Alarm:"&#xe855;",AlarmAdd:"&#xe856;",Archive:"&#xe0a2;",ArrowDown:"&#xe0c0;",ArrowDownCircle:"&#xe0c8;",ArrowDownSmall:"&#xe0c4;",ArrowLeft:"&#xe0bf;",ArrowLeftCircle:"&#xe0c7;",ArrowLeftSmall:"&#xe0c3;",ArrowLineBigDown:"&#xe0d8;",ArrowLineBigLeft:"&#xe0d7;",ArrowLineBigRight:"&#xe0da;",ArrowLineBigUp:"&#xe0d9;",ArrowLineDown:"&#xe0d0;",ArrowLineLeft:"&#xe0cf;",ArrowLineRight:"&#xe0d2;",ArrowLineSmallDown:"&#xe0d4;",ArrowLineSmallLeft:"&#xe0d3;",ArrowLineSmallRight:"&#xe0d6;",ArrowLineSmallUp:"&#xe0d5;",ArrowLineUp:"&#xe0d1;",ArrowLongDown:"&#xe0dc;",ArrowLongLeft:"&#xe0db;",ArrowLongRight:"&#xe0de;",ArrowLongUp:"&#xe0dd;",ArrowRight:"&#xe0c2;",ArrowRightCircle:"&#xe0ca;",ArrowRightSmall:"&#xe0c6;",ArrowUp:"&#xe0c1;",ArrowUpCircle:"&#xe0c9;",ArrowUpSmall:"&#xe0c5;",ArrowheadDown:"&#xe0cc;",ArrowheadLeft:"&#xe0cb;",ArrowheadRight:"&#xe0ce;",ArrowheadUp:"&#xe0cd;",ArrowheadUpDown:"&#xe0df;",Back:"&#xe093;",Bag:"&#xe03b;",Barcode:"&#xe0fc;",Battery:"&#xe04d;",Bell:"&#xe029;",Blocked:"&#xe084;",Book:"&#xe039;",Book2:"&#xe0ac;",Bookmark:"&#xe0aa;",Bookmarks:"&#xe0ab;",Box:"&#xe06a;",Braces:"&#xe104;",Briefcase:"&#xe046;",Brightness:"&#xe060;",BrogressThird:"&#xe05c;",Browser:"&#xe058;",Brush:"&#xe053;",Bucket:"&#xe04e;",BulletList:"&#xe095;",Calendar:"&#xe041;",Camera:"&#xe030;",Cancel:"&#xe083;",Car:"&#xe909;",Cart:"&#xe069;",Cc:"&#xe0e3;",CcBy:"&#xe0e4;",CcNc:"&#xe0e5;",CcNcEu:"&#xe0e6;",CcNcJp:"&#xe0e7;",CcNd:"&#xe0e9;",CcPd:"&#xe0ea;",CcSa:"&#xe0e8;",CcShare:"&#xe0ec;",CcShare3:"&#xe0ed;",CcZero:"&#xe0eb;",Ccw:"&#xe08c;",Cd:"&#xe045;",Chat:"&#xe021;",Clipboard:"&#xe068;",Clock:"&#xe03f;",Cloud:"&#xe0a8;",Code:"&#xe061;",CodeA:"&#xe0ee;",CodeD:"&#xe0f0;",CodeH:"&#xe0ef;",CodeM:"&#xe10e;",CodeP:"&#xe10f;",CodeR:"&#xe0f1;",CodeS:"&#xe0f2;",Cog:"&#xe02c;",Comment:"&#xe022;",Compare:"&#xe103;",Compass:"&#xe016;",Cone:"&#xe055;",CreditCard:"&#xe065;",Cross:"&#xe07a;",CrossRound:"&#xe080;",CrossSquare:"&#xe07d;",Csharp:"&#xe0ff;",Cup:"&#xe051;",Cw:"&#xe08b;",Cycle:"&#xe08a;",Database:"&#xe066;",Directions:"&#xe005;",Docs:"&#xe09c;",DollarRound:"&#xe0fe;",Dot:"&#xe0e2;",Dots:"&#xe0e1;",DotsVert:"&#xe000;",Download:"&#xe0a5;",Drive:"&#xe050;",Droplet:"&#xe044;",Droplets:"&#xe06f;",Earth:"&#xe056;",Education:"&#xe038;",Eightball:"&#xe901;",Ellipsis:"&#xe0e0;",EmptyInbox:"&#xe00b;",Export:"&#xe013;",Extension:"&#xe87b;",Eye:"&#xe03e;",Feather:"&#xe009;",FieldEdit:"&#xe001;",FileExcel:"&#xe908;",FilePdf:"&#xe902;",FileWord:"&#xe907;",First:"&#xe0b3;",Flag:"&#xe02b;",Flashlight:"&#xe027;",FlowBranch:"&#xe0bb;",FlowCascade:"&#xe0ba;",FlowLine:"&#xe0bd;",FlowParallel:"&#xe0be;",FlowTree:"&#xe0bc;",Folder:"&#xe0a1;",Forward:"&#xe00e;",Gauge:"&#xe049;",Ghost:"&#xe0fa;",Gift:"&#xe105;",GraphBars:"&#xe073;",GraphLinefill:"&#xe074;",GraphPie:"&#xe072;",GraphStatistics:"&#xe071;",Grid:"&#xe070;",HeartEmpty:"&#xe01c;",HeartFull:"&#xe01b;",HelpRound:"&#xe088;",History:"&#xe092;",Hourglass:"&#xe048;",House:"&#xe024;",Incident:"&#xe548;",Infinity:"&#xe063;",Info:"&#xe085;",InfoRound:"&#xe086;",Install:"&#xe0a7;",Key:"&#xe04c;",Keyboard:"&#xe057;",Kiwi:"&#xe102;",Lab:"&#xe903;",Landscape:"&#xe09d;",Language:"&#xe04a;",Last:"&#xe0b4;",Layout:"&#xe097;",Leaf:"&#xe034;",LifeRing:"&#xe03d;",LightBulb:"&#xe064;",Lightning:"&#xe042;",Link:"&#xe02a;",List:"&#xe098;",Location:"&#xe014;",LocationArrow:"&#xe017;",Lock:"&#xe075;",LockApproved:"&#xe90c;",LockDeclined:"&#xe90d;",LockOpen:"&#xe90a;",LockPaid:"&#xe90e;",LockSubmitted:"&#xe90b;",Login:"&#xe078;",Logout:"&#xe077;",Loop:"&#xe091;",Magnet:"&#xe04f;",Mail:"&#xe006;",Map:"&#xe015;",Megaphone:"&#xe031;",Microphone:"&#xe040;",Minus:"&#xe081;",MinusRound:"&#xe07e;",MinusSquare:"&#xe07b;",Mobile:"&#xe003;",Moneybag:"&#xe0fd;",Moon:"&#xe032;",MoreLeft:"&#xe10a;",MoreRight:"&#xe10d;",Mouse:"&#xe004;",Music:"&#xe036;",MusicSemi:"&#xe035;",MusicSquare:"&#xe0a0;",Mute:"&#xe0b9;",Network:"&#xe04b;",New:"&#xe037;",Newspaper:"&#xe03a;",Next:"&#xe0b1;",Page:"&#xe099;",PageEmpty:"&#xe09b;",PageFull:"&#xe09a;",Palette:"&#xe033;",Paperclip:"&#xe00a;",Paperplane:"&#xe007;",Pause:"&#xe0ae;",Pencil:"&#xe008;",Phone:"&#xe002;",Pictures:"&#xe09e;",Pin:"&#xe904;",Plane:"&#xe03c;",Play:"&#xe0ad;",Plugin:"&#xe905;",Plus:"&#xe082;",PlusRound:"&#xe07f;",PlusSquare:"&#xe07c;",Poop:"&#xe101;",Popup:"&#xe025;",Previous:"&#xe0b2;",Printer:"&#xe028;",ProgressEmpty:"&#xe05d;",ProgressFull:"&#xe05a;",ProgressHalf:"&#xe05b;",Prompt:"&#xe109;",PromptAlert:"&#xe10c;",PromptInfo:"&#xe10b;",Publish:"&#xe059;",Qrcode:"&#xe0fb;",Question:"&#xe087;",Quote:"&#xe023;",Record:"&#xe0af;",Repeat:"&#xe090;",Reply:"&#xe00c;",ReplyAll:"&#xe00d;",ResizeEnlarge:"&#xe0b5;",ResizeShrink:"&#xe0b6;",Return:"&#xe08f;",ReturnBack:"&#xe08e;",Rocket:"&#xe052;",Rss:"&#xe06c;",Save:"&#xe0a6;",Scaledown:"&#xe107;",Scaleup:"&#xe108;",Schedule:"&#xe900;",Screen:"&#xe062;",Search:"&#xe026;",Sharable:"&#xe01a;",Share:"&#xe019;",Shield:"&#xe906;",Shuffle:"&#xe08d;",Sound:"&#xe0b8;",StarEmpty:"&#xe01e;",StarFull:"&#xe01d;",Stop:"&#xe0b0;",Suitcase:"&#xe054;",Sun:"&#xe05f;",SunSmall:"&#xe05e;",Switch:"&#xe094;",Sync:"&#xe100;",Tag:"&#xe02f;",Target:"&#xe018;",Thermometer:"&#xe06e;",ThumbsDown:"&#xe020;",ThumbsUp:"&#xe01f;",Thunder:"&#xe043;",Tick:"&#xe079;",Ticket:"&#xe06b;",Tools:"&#xe02d;",Traffic:"&#xe565;",Trash:"&#xe0a3;",Trophy:"&#xe02e;",Upload:"&#xe0a4;",Upload2:"&#xe0a9;",User:"&#xe0f3;",UserAdd:"&#xe0f5;",UserAddOld:"&#xe011;",UserBlock:"&#xe0f7;",UserBoss:"&#xe0f8;",UserCheck:"&#xe18a;",UserCheckOutline:"&#xe18b;",UserDel:"&#xe0f6;",UserOld:"&#xe00f;",Users:"&#xe0f4;",UsersOld:"&#xe010;",Vcard:"&#xe012;",Video:"&#xe09f;",Voicemail:"&#xe067;",Volume:"&#xe0b7;",Warning:"&#xe089;",Wireless:"&#xe06d;",Wrench:"&#xe0f9;",Zzz:"&#xe106;"};Affinity.colors={green:"#7abd2d",blue:"#44b5ec",lightblue:"#e3eef3",orange:"#ff6600",yellow:"#ffbd00",red:"#ff0000",grey:"#888888"};Affinity.icons.getIcon=function(n,t){return n&&n in Affinity.icons?Affinity.icons[n]:n&&(n=n.replace("icon","").trim().camelCase(),n in Affinity.icons)?Affinity.icons[n]:t&&t in Affinity.icons?Affinity.icons[t]:""};Affinity.appname="none";Affinity.apiversion=2;Affinity.urlroot="";Affinity.authroot="";Affinity.zelosroot="";Affinity.lookupapi="";Affinity.uisession=String.uniqueID();Affinity.uiready=!1;Affinity.login=null;Affinity.datalist=!1;Affinity.loaders={};Affinity.loaders.dark="data:image/gif;base64,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";Affinity.loaders.light="data:image/gif;base64,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";Affinity.loaders.blue="data:image/gif;base64,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";Affinity.loaders.large={};Affinity.loaders.large.light="data:image/gif;base64,R0lGODlhIAAgAPMAAO/v7wAAALq6unx8fKurq5CQkDIyMlBQUMvLy9bW1rCwsBwcHAMDAwAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA==";Affinity.loaders.large.dark="data:image/gif;base64,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";Affinity.agent=window.navigator.userAgent;Affinity.oldess=!1;Affinity.oldessLaunched=!1;Affinity.oldessFrame=!1;Affinity.oldessWindow=!1;Affinity.getScrollBarWidth=function(){var t=document.createElement("p"),n,r,i;return t.style.width="100%",t.style.height="200px",n=document.createElement("div"),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),document.body.appendChild(n),r=t.offsetWidth,n.style.overflow="scroll",i=t.offsetWidth,r==i&&(i=n.clientWidth),document.body.removeChild(n),r-i};Affinity.scrollBarSize=0;window.addEvent("domready",function(){Affinity.scrollBarSize=Affinity.getScrollBarWidth()});Affinity.UI={};Affinity.UI.debug={};Affinity.UI.lookups={};Affinity.UI.lookupLoaders=[];Affinity.UI.displaylookups={};Affinity.UI.displaylookupLoaders=[];Affinity.UI.dependancies={};Affinity.UI.dependancyLoaders=[];Affinity.UI.autocomplete={};Affinity.UI.lastAutoKill={};Affinity.UI.delayAutoKill=function(n,t){document.getElement("."+t)&&(document.getElement("."+t).removeEvents(),document.getElement("."+t).destroy());window.Affinity.UI.lastAutoKill[n]=null;delete window.Affinity.UI.lastAutoKill[n]};datalistTest=document.createElement("datalist");"options"in datalistTest&&(Affinity.datalist=!0);datalistTest=null;delete datalistTest;Affinity.essmessage="";(function(){window.Affinity.oldess=!1;var t=new URI(window.location.href),n=typeOf(uriObj.parsed.query)==="null"?{}:uriObj.parsed.query.parseQueryString();("sessionKey"in n||"isEss"in n)&&(window.Affinity.oldess=!0,"iframe"in n&&(window.Affinity.oldessLaunched=!1,window.Affinity.oldessFrame=!0,window.Affinity.oldessWindow=window.parent),"external"in n&&(window.Affinity.oldessLaunched=!0,window.Affinity.oldessFrame=!1,window.Affinity.oldessWindow=window.opener),window.Affinity.oldess&&!1 in n&&!1 in n&&window.addEvent("UiReady",function(){window.Affinity.appname==="cleverforms"?(window.Affinity.oldessLaunched=!1,window.Affinity.oldessFrame=!0,window.Affinity.oldessWindow=window.parent):(window.Affinity.oldessLaunched=!0,window.Affinity.oldessFrame=!1,window.Affinity.oldessWindow=window.opener)}))});Affinity.UI.scrolling=!1;Affinity.UI.autoscroll=function(n){var t=window;if(Affinity.oldessFrame)try{t=window.parent.window}catch(f){}try{var i=t.document.documentElement,r=t.document.body,u=i&&i.scrollTop||r&&r.scrollTop||0;n>0&&t.scrollTo(0,u+10);n<0&&t.scrollTo(0,u-10)}catch(f){}};document.addEvent(Affinity.events.move,function(n){var t;if(Affinity.UI.drageventFired){var r=n.client.y,i=window.innerHeight||window.document.documentElement.clientHeight,o=50,s=i-50;if(Affinity.oldessFrame)try{t=window.parent;i=t.innerHeight||t.document.documentElement.clientHeight;var u=t.document.documentElement,f=t.document.body,h=u&&u.scrollTop||f&&f.scrollTop||0,c=document.documentMode&&document.documentMode<9?Affinity.oldessFrame.querySelectorAll(".ContentBody")[0].offsetTop:Affinity.oldessFrame.getElementsByClassName("ContentBody")[0].offsetTop;var e=h-c,o=50+e,s=e+i-50}catch(n){}r>s?Affinity.UI.scrolling||(document.getElement(".dragger")&&document.getElement(".dragger").setStyle("display","none"),Affinity.UI.scrolling=!0,Affinity.UI.scroller=Affinity.UI.autoscroll.periodical(25,window,[1])):r<o?Affinity.UI.scrolling||(document.getElement(".dragger")&&document.getElement(".dragger").setStyle("display","none"),Affinity.UI.scrolling=!0,Affinity.UI.scroller=Affinity.UI.autoscroll.periodical(25,window,[-1])):Affinity.UI.scrolling&&(document.getElement(".dragger")&&document.getElement(".dragger").setStyle("display","block"),Affinity.UI.scrolling=!1,clearInterval(Affinity.UI.scroller))}});document.addEvent(Affinity.events.end,function(){Affinity.UI.drageventFired=!1;Affinity.UI.scrolling&&(document.getElement(".dragger")&&document.getElement(".dragger").setStyle("display","block"),Affinity.UI.scrolling=!1,clearInterval(Affinity.UI.scroller))});Affinity.Konami=new Class({Implements:[Options],options:{onSuccess:function(){}},input:"",pattern:"38384040373937396665",initialize:function(n){this.setOptions(n);document.addEvent("keydown",function(n){this.input+=n.code;this.input.length>this.pattern.length&&(this.input=this.input.substr(this.input.length-this.pattern.length));this.input==this.pattern&&this.options.onSuccess()}.bind(this))}});Affinity.RickRoll=new Class({Implements:[Options],Binds:["inject","destroy"],options:{},input:"",ytBox:!1,pattern:"8273677582797676",initialize:function(n){this.setOptions(n);document.addEvent("keydown",function(n){this.input+=n.code;this.input.length>this.pattern.length&&(this.input=this.input.substr(this.input.length-this.pattern.length));this.input==this.pattern&&this.inject()}.bind(this))},inject:function(){this.destroy();this.ytBox=new Element("div").setStyles({position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(255,255,255,0.8)","text-align":"center","z-index":99999999999}).inject(document.body,"bottom").set("html",'<iframe width="420" height="315" style="position:fixed;top:50%;left:50%;margin:-157px 0 0 -210px;" src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ?rel=0&amp;autoplay=1&amp;showinfo=0" frameborder="0" allowfullscreen><\/iframe>').addEvent("click",this.destroy)},destroy:function(){this.ytBox&&(this.ytBox.removeEvents(),this.ytBox.destroy())}});new Affinity.RickRoll;Affinity.CookieMonster=new new Class({Read:function(n){var t,i;if(Affinity.isie){if(t=document.cookie.indexOf(n+"="),t!=-1)return t+=n.length+1,i=document.cookie.indexOf(";",t),i==-1&&(i=document.cookie.length),unescape(document.cookie.substring(t,i))}else return Cookie.read(n)},Write:function(n,t,i){var r=new URI(window.location.href).parsed.host,u=new Date;if(typeOf(i)!=="null"&&!isNaN(i)&&parseFloat(i)>0){var e=new Date(u.getTime()+i*6e4),o=u.toUTCString(),f=e.toUTCString();if(log("&#169; Cookie Write Expires - name: "+n+", value: "+t),log("  expires: "+f+", now: "+o+", expires value: "+i+", in days: "+parseFloat(i)/1440+", domain: "+r),Affinity.isie)try{return document.cookie=n+"="+escape(t)+"; expires="+f+"; domain:"+r,t}catch(s){return!1}else try{return Cookie.write(n,t,{duration:parseFloat(i)/1440}),t}catch(s){return!1}}else if(log("&#169; Cookie Write - name: "+n+", value: "+t),Affinity.isie)try{return document.cookie=n+"="+escape(t)+";",t}catch(s){return!1}else try{return Cookie.write(n,t),t}catch(s){return!1}},Delete:function(n){if(log("&#169; Cookie Delete - name: "+n),Affinity.isie){document.cookie=n+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;";try{return Cookie.dispose(n),!0}catch(t){return!1}}else try{return Cookie.dispose(n),!0}catch(t){return!1}}});Affinity.logger=new new Class({Binds:["build","enable","disable","enableLog","disableLog","log","clear","open","close"],enabled:!1,__prelog:[],initialize:function(){window.log=this.log;window.logClear=this.clear;window.logEnable=this.enableLog;window.logDisable=this.disableLog},build:function(){if(!Affinity.uiready){window.removeEvent("UiReady",this.build);window.addEvent("UiReady",this.build);return}window.removeEvent("UiReady",this.build);document.id("_log")&&document.id("_log").destroy();document.id("_logbutton")&&document.id("_logbutton").destroy();this.enabled=!0;this.logBox=new Element("div",{id:"_log"}).inject(document.body,"bottom");this.logsBox=new Element("div",{html:"","class":"logs"}).inject(this.logBox,"top");this.closeButton=new Element("div",{html:"close","class":"close"}).inject(this.logBox,"top");this.clearButton=new Element("div",{html:"clear","class":"clear"}).inject(this.logBox,"top");this.hiddenButton=new Element("div",{id:"_logbutton"}).inject(this.logBox,"after");this.hiddenButton.setStyles({position:"absolute",top:5,left:5,width:30,height:30,"z-index":9999999998});this.logBox.setStyles({position:"absolute",top:40,left:5,width:"80%",height:"80%",border:"1px solid black","background-color":"#fff",color:"000","z-index":9999999999,"-webkit-transform":"translateX(0)",transform:"translateX(0)",display:"none"});this.logsBox.setStyles({width:"100%",height:"100%",padding:10,overflow:"scroll","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"});this.clearButton.setStyles({position:"absolute",top:10,right:80,padding:5,"background-color":"#fff",cursor:"pointer"});this.closeButton.setStyles({position:"absolute",top:10,right:30,padding:5,"background-color":"#fff",cursor:"pointer"});this.closeButton.addEvent(Affinity.events.click,this.close);this.clearButton.addEvent(Affinity.events.click,this.clear);this.hiddenButton.addEvent(Affinity.events.click,this.open);this.log("// log started "+new Date);this.__prelog.length>0&&Array.each(this.__prelog,function(n){this.log(n[0],n[1])}.bind(this));this.enabled=!1;window.fireEvent("LogReady")},enable:function(){this.destroy();this.build();this.open()},disable:function(){this.destroy()},enableLog:function(){return this.enabled=!0,this.log("// log enabled "+new Date),'Log Enabled. Enter "disableLog()" to stop.'},disableLog:function(){return this.log("// log disabled "+new Date),this.enabled=!1,'Log disabled. Enter "enableLog()" to start.'},log:function(n,t){if(this.enabled){if(typeOf(n)==="string"&&(n==="show"||n==="open")){this.open();return}var i=typeOf(n)==="object"||typeOf(n)==="array"?JSON.stringify(n,null,2):typeOf(n)==="element"?"element type: "+n.get("tag")+"\r\n"+JSON.stringify(n.getProperties("id","class","style","src","title","alt"),null,2):n;typeOf(t)==="object"?new Element("<pre>",{html:i}).inject(this.logsBox,"top").setStyles(t):typeOf(t)==="string"?new Element("<pre>",{html:i}).inject(this.logsBox,"top").set("style",t):new Element("<pre>",{html:i}).inject(this.logsBox,"top")}else this.__prelog.push([n,t])},clear:function(){this.enabled&&(this.logsBox.empty(),this.log("// log cleared "+new Date))},open:function(){this.enabled&&(this.logBox.getStyle("display")==="none"?this.logBox.setStyle("display","block"):this.logBox.setStyle("display","none"))},close:function(){this.enabled&&(this.logBox.getStyle("display")==="block"?this.logBox.setStyle("display","none"):this.logBox.setStyle("display","block"))},destroy:function(){window.removeEvent("UiReady",this.build);this.enabled=!1;this.closeButton&&this.closeButton.remveEvents();this.clearButton&&this.clearButton.remveEvents();this.hiddenButton&&this.hiddenButton.remveEvents();this.logBox&&this.logBox.destroy()}});Affinity.SmartClose=new Class({Binds:["isActive","checkActive","isOver","setClose","overAll","outAll","windowClick"],over:!1,isOverCheckTimer:!1,initialize:function(n){if(Affinity.mobile)return"is mobile";this.class="smart-close-"+String.uniqueID();this.element=n;this.element.addClass(this.class);this.element.isOver=this.isOver;this.element.addEvent(Affinity.events.overAll,this.overAll);this.element.addEvent(Affinity.events.outAll,this.outAll);this.element.addEvent("focus",this.setClose)},isActive:function(){if(document.activeElement){if(document.activeElement===this.element||document.activeElement.getParent("."+this.class)===this.element)return!0}else return!1;return!0},checkActive:function(){this.isActive()||(this.over=!1,this.windowClick())},isOver:function(){return this.isActive()||(this.over=!1),this.over},setClose:function(){window.removeEvent(Affinity.events.click,this.windowClick);window.addEvent(Affinity.events.click,this.windowClick)},overAll:function(){clearTimeout(this.isOverCheckTimer);this.setClose();this.over=!0;this.isOverCheckTimer=this.checkActive.delay(1e3,this)},outAll:function(){clearTimeout(this.isOverCheckTimer);this.over=!1},windowClick:function(){this.over||(this.element.fireEvent("SmartClose"),window.removeEvent(Affinity.events.click,this.windowClick))}});Affinity.UI.mobileZooming=!1;Affinity.mobile&&window.addEvents({touchmove:function(n){n.touches.length===2&&(Affinity.UI.mobileZooming=!0)},touchend:function(){if(Affinity.UI.mobileZooming){var n=document.createEvent("HTMLEvents");n.initEvent("resize",!0,!1);window.dispatchEvent(n)}Affinity.UI.mobileZooming=!1}});Affinity.GetCacheSafePath=function(n){if(!Affinity.isie||typeOf(n)!=="string")return n;return n+(n.contains("?")?"&ran=":"?ran=")+String.uniqueID()+"-"+Date.parse(new Date).format("%s")};Affinity.ProcessUrl=function(n){var t,u="/_Api/Zelos",i=n.replace("%3F","?"),i=Affinity.isTeampayoffice&&new RegExp("timesheets"+u,"i").test(i)?i.replace(new RegExp("timesheets"+u,"i"),u):i,i=Affinity.isTeampayofficeBranch&&new RegExp("tb"+u,"i").test(i)?i.replace(new RegExp("tb"+u,"i"),u):i,i=i.replace(u+"?",""),e=i.indexOf("&")>-1&&i.indexOf("?")===-1?i.replace("&","?"):i,r=new URI(e),f={};return typeOf(r.parsed.query)!=="null"&&(queryObj=r.parsed.query.parseQueryString(),Object.each(queryObj,function(n,t){typeOf(n)==="array"&&(queryObj[t]=n[n.length-1])}),f=Object.toQueryString(queryObj)),r.parsed.query="",t=r.toString(),t=typeOf(r.parsed.scheme)!=="null"?t.replace(r.parsed.scheme+"://",""):t,t=typeOf(r.parsed.host)!=="null"?t.replace(r.parsed.host,""):t,t=typeOf(r.parsed.port)!=="null"?t.replace(":"+r.parsed.port,""):t,t=t.indexOf(u)===-1?u+"?"+t:t,t=(t.charAt(0)==="/"?t.substring(1):t)+"?"+decodeURIComponent(Object.toQueryString(f)),t=Affinity.isTeampayoffice&&!Affinity.isTeampayofficeBranch&&t.indexOf("timesheets")===-1?"/timesheets/"+t:t,t=Affinity.isTeampayofficeBranch&&t.indexOf("tb")===-1?"/tb/"+t:t,t=t.replace(new RegExp("//","g"),"/"),t=t.replace("??","?"),t.replace("?/","?")};Affinity.ProcessUrlObj=function(n,t){var i,r,u="/_Api/Zelos";return t=typeOf(t)!=="null"?t:{},r=t.parseQueryString(),Object.each(r,function(n,t){typeOf(n)==="array"&&(r[t]=n[n.length-1])}),t=Object.toQueryString(r),n.parsed.query="",n.parsed.directory=Affinity.isTeampayoffice&&new RegExp("timesheets/","i").test(n.parsed.directory)?n.parsed.directory.replace(new RegExp("timesheets/","i"),""):n.parsed.directory,n.parsed.directory=Affinity.isTeampayofficeBranch&&new RegExp("tb/","i").test(n.parsed.directory)?n.parsed.directory.replace(new RegExp("tb/","i"),""):n.parsed.directory,n.parsed.directory=n.parsed.directory.replace(new RegExp("//","g"),"/"),i=n.toString(),i=typeOf(n.parsed.scheme)!=="null"?i.replace(n.parsed.scheme+"://",""):i,i=typeOf(n.parsed.host)!=="null"?i.replace(n.parsed.host,""):i,i=typeOf(n.parsed.port)!=="null"?i.replace(":"+n.parsed.port,""):i,i=i.indexOf(u)===-1?u+"?"+i:i,i=(i.charAt(0)==="/"?i.substring(1):i)+"?"+decodeURIComponent(Object.toQueryString(t)),i=Affinity.isTeampayoffice&&!Affinity.isTeampayofficeBranch&&i.indexOf("timesheets")===-1?"/timesheets/"+i:i,i=Affinity.isTeampayofficeBranch&&i.indexOf("tb")===-1?"/tb/"+i:i,i=i.replace(new RegExp("//","g"),"/"),i=i.replace("??","?"),i.replace("?/","?")};Locale.define("en-NZ","Date",{dateOrder:["date","month","year","/"],shortDate:"%D/%M/%Y",shortTime:"%I:%M%p",AM:"am",PM:"pm"}).inherit("en-US","Date");Locale.define("en-AU").inherit("en-NZ","Date");Locale.use("en-NZ");Date.implement({toZelos:function(){return Date.parse(this.format("%d/%m/%Y %H:%M:%S")).format("%Y-%m-%dT%H:%M:%S")},toTime:function(){try{return this.format("%k:%M:%S")}catch(n){return"Invalid Date"}},toTime24:function(){this.toTime()},toTime12:function(){try{return this.format("%l:%M:%S %p").toLowerCase()}catch(n){return"Invalid Date"}},toSimple:function(){try{return this.format("%d-%m-%Y")}catch(n){return"Invalid Date"}},toSimpleDateTime:function(){try{return this.format("%d-%m-%Y %k:%M:%S")}catch(n){return"Invalid Date"}},toServer:function(){try{return this.format("%d.%m.%Y %k:%M:%S %z")}catch(n){return"Invalid Date"}},toFriendly:function(){try{return this.format("%A %B %e%o %Y").replace(/  /gi," ")}catch(n){return"Invalid Date"}},toFriendlyShort:function(){try{return this.format("%a %b %e%o %Y").replace(/  /gi," ")}catch(n){return"Invalid Date"}},toWords:function(){try{return this.timeDiffInWords()}catch(n){return"Invalid Date"}},toWordsShort:function(){try{return this.timeDiffInWords().replace(/year/g,"yr").replace(/month/g,"mnth").replace(/hour/g,"hr").replace(/minute/g,"min").replace(/second/g,"sec").replace(/about/g,"")}catch(n){return"Invalid Date"}},matches:function(n,t,i){if(typeOf(n)!=="null"){var r=Date.parse(this),u=Date.parse(n);if(r&&u&&typeOf(r)=="date"&&typeOf(u)==="date"&&r.isValid()&&u.isValid()&&(typeOf(t)==="boolean"&&t&&(r=r.setSeconds(0),u=u.setSeconds(0)),typeOf(i)==="boolean"&&i&&(r=r.setMilliseconds(0),u=u.setMilliseconds(0)),r=r.getTime(),u=u.getTime(),r===u))return!0}return!1},elapsed:function(){return((new Date).getTime()-this.getTime())/1e3},sameDay:function(n){if(typeOf(n)!=="null"){var t=Date.parse(this),i=Date.parse(n);if(t&&i&&typeOf(t)=="date"&&typeOf(i)==="date"&&t.isValid()&&i.isValid()&&(t=t.clearTime().getTime(),i=i.clearTime().getTime(),t===i))return!0}return!1},lessThan:function(n){if(typeOf(n)!=="null"){var t=Date.parse(this),i=Date.parse(n);if(t&&i&&typeOf(t)=="date"&&typeOf(i)==="date"&&t.isValid()&&i.isValid()&&(t=t.clearTime().getTime(),i=i.clearTime().getTime(),t<i))return!0}return!1},lessThanOrEqualTo:function(n){return typeOf(n)!=="null"&&(this.sameDay(n)||this.lessThan(n))?!0:!1},greaterThan:function(n){if(typeOf(n)!=="null"){var t=Date.parse(this),i=Date.parse(n);if(t&&i&&typeOf(t)=="date"&&typeOf(i)==="date"&&t.isValid()&&i.isValid()&&(t=t.clearTime().getTime(),i=i.clearTime().getTime(),t>i))return!0}return!1},greaterThanOrEqualTo:function(n){return typeOf(n)!=="null"&&(this.sameDay(n)||this.greaterThan(n))?!0:!1}});Date.defineFormat("zelos",function(n){return n.toZelos()});Date.CurentYear=(new Date).get("year");Date.FormatStrings=[["christmas","12.25."+(Date.CurentYear+1)],["xmas","12.25."+(Date.CurentYear+1)],["newyear","1.1."+(Date.CurentYear+1)],["new year","1.1."+(Date.CurentYear+1)]];Date.TimeTravel=[["second",/(\+|\-)\s*[0-9]+( )*(seconds|second|sec|s)/],["minute",/(\+|\-)\s*[0-9]+( )*(minutes|minute|min|m)/],["hour",/(\+|\-)\s*[0-9]+( )*(hours|hour|h)/],["day",/(\+|\-)\s*[0-9]+( )*(days|day|d)/],["week",/(\+|\-)\s*[0-9]+( )*(weeks|week|w)/],["month",/(\+|\-)\s*[0-9]+( )*(months|month)/],["year",/(\+|\-)\s*[0-9]+( )*(years|year|y)/]];String.implement({toDate:function(){Locale.use("en-GB");var n,i,r,t;if(s=this.toLowerCase().trim(),s==="now")return new Date;for(s.contains("now ")&&(s=s.replace(/(now |today )/,(new Date).format("%k:%H:%S "))),/^\d+$/.test(s)&&s.length>=6&&(s=s.length>8?parseInt(s,10)*1e3+"":s.substr(0,2)+"."+s.substr(2,2)+"."+s.substr(4)),n=0;n<Date.FormatStrings.length;n++)if(s.contains(Date.FormatStrings[n][0])){s=s.replace(Date.FormatStrings[n][0],Date.FormatStrings[n][1]);break}for(n=0;n<Date.TimeTravel.length;n++)s.test(Date.TimeTravel[n][1])&&(i=s.match(Date.TimeTravel[n][1])[0],r=i.match(/[0-9]+/)[0],i.indexOf("+")&&(t=Date.parse(s.replace(i,"").trim()).decrement(Date.TimeTravel[n][0],parseFloat(r))),i.indexOf("-")&&(t=Date.parse(s.replace(i,"").trim()).increment(Date.TimeTravel[n][0],parseFloat(r))));t=t==null?Date.parse(s):t;try{return t.format("%s")==0?"Invalid Date":t}catch(u){return"Invalid Date"}}});Object.valueFromKeyString=function(n,t){var r,i,f,u;try{for(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),r=t.split("."),i=0,f=r.length;i<f;++i)if(u=r[i],u in n)n=n[u];else return!1;return n}catch(e){return null}};Array.implement({mapFromKey:function(n){if(this.length>0&&n in this[0])return this.reduce(function(t,i){return t[i[n]]=i,t},{})}});JSON.Unauthorized=function(n,t){var r=!1,i=typeOf(n);return(i==="object"||i==="array")&&(n=JSON.encode(n),i="string"),i==="string"&&(n.test("unauthorized","gi")||n.test("unauthorised","gi")||n.test("/(401/)","gi")||n.test("/(403/)","gi"))&&(log("&#x270B; json response is unauthorized"+(typeOf(t)!==null?" ("+unescape(t)+")":"")+" &#x270B;"),log(JSON.stringify(n,null,2)),log("&#x270B; END json response is unauthorized log &#x270B;"),window.prompts&&Affinity.prompts.hide(),window.fireEvent("unauthorized"),r=!0),n=null,r};Element.implement({hasWidget:function(n){return this.retrieve(n)?!0:!1},getWidget:function(n){return this.retrieve(n)?this.retrieve(n):this.retrieve("widget")?this.retrieve("widget"):!1},destroyWidget:function(n){var t=this.getWidget(n);return t&&"destroy"in t&&t.destroy(),delete t,null},exists:function(){try{if(document.contains(this))return this}catch(n){}return!1}});DOMEvent.implement({getTarget:function(n){return this.target.hasClass(n)?this.target:this.target.get("id")===n?this.target:this.target.getParent("."+n)?this.target.getParent("."+n):this.target.getParent("#"+n)?this.target.getParent("#"+n):this.target}});Element.implement({hasEvent:function(n,t){var i=this.retrieve("events");switch(i&&i[n]&&(t==undefined||i[n].keys.contains(t))){case null:case!1:case undefined:case 0:return!1;default:return!0}}});Affinity.FormElement=new Class({Implements:[Options,Events],Binds:["clearEvents","setEvents","sanatiseValue","cloneValue","setValue","getValue","getDisplayValue","checkChanged","lookup","lookupComplete","destroy"],options:{},element:!1,dynamicContents:!1,dynamicFirstLoad:!0,defaultValue:"",valueEmpty:!1,changed:!1,initialize:function(n,t){this.setOptions(t);this.element=n;n.retrieve("defaultValue")||(this.element=n,this.setEvents(),this.defaultValue=this.sanatiseValue(n.value),this.element.store("defaultValue",this.defaultValue));this.element.store("widget",this);this.element.store("elementWidget",this);this.element.addClass("widget");this.element.value=this.sanatiseValue(this.element.value);this.lastValue=this.element.value},reset:function(){this.changed=!0;this.defaultValue=this.sanatiseValue(this.element.value);this.lastValue=this.element.value;this.element.store("defaultValue",this.defaultValue);this.element.fireEvent("changed",{target:this.element,defaultValue:this.defaultValue,value:this.element.value,type:"changed",originalEvent:null});this.element.addClass("changed").removeClass("restored")},clearEvents:function(){this.element.removeEvent("input",this.checkChanged);this.element.removeEvent("lookup",this.lookup);this.element.removeEvent("lookupComplete",this.lookupComplete);this.element.removeEvent("change",this.checkChanged);this.element.removeEvent("blur",this.checkChanged)},setEvents:function(){this.clearEvents();this.element.get("list")?this.element.addEvent("input",this.checkChanged):(this.element.addEvent("lookup",this.lookup),this.element.addEvent("lookupComplete",this.lookupComplete),this.element.addEvent("change",this.checkChanged),this.element.addEvent("blur",this.checkChanged))},sanatiseValue:function(n){try{return n===null||n===undefined||n.trim()===""?"":n}catch(t){return n}},cloneValue:function(n){return(n+"").trim()},getValue:function(){return this.element.value},setValue:function(n){this.element.value=this.sanatiseValue(n);this.defaultValue=this.element.value;this.lastValue=this.element.value;this.element.store("defaultValue",this.defaultValue);this.element.removeClass("changed").removeClass("restored");this.changed=!1},getDisplayValue:function(){return this.element.value},checkChanged:function(n){var t;return t=typeOf(n)!=="null"&&typeOf(n.target)!=="null"?n.target.value:this.sanatiseValue(this.element.value),this.cloneValue(t)!==this.cloneValue(this.defaultValue)?(this.changed=!0,this.lastValue===this.element.value&&(this.element.fireEvent("changed",{target:this.element,defaultValue:this.defaultValue,value:this.element.value,type:"changed",originalEvent:n}),this.element.addClass("changed").removeClass("restored")),this.lastValue=this.element.value):(this.changed=!1,this.element.fireEvent("restored",{target:this.element,defaultValue:this.defaultValue,value:this.element.value,type:"restored",originalEvent:n}),this.lastValue=this.element.value,this.element.addClass("restored").removeClass("changed")),this.changed},lookup:function(){this.dynamicContents=!0},lookupComplete:function(n){this.dynamicFirstLoad&&(this.defaultValue=n.defaultValue,this.element.store("defaultValue",this.defaultValue),this.dynamicFirstLoad=!1);this.checkChanged({target:this.element})},destroy:function(){this.clearEvents();this.element.eliminate("defaultValue");this.element.eliminate("elementWidget")}});Element.implement({makeFormElement:function(){return this.get("tag").test("select|input|textarea|datalist","gi")&&new Affinity.FormElement(this),this}});Affinity.ElementValueTracker=new Class({Implements:[Options,Events],Binds:["__removeEvents","__addEvents","__elementChanged","__elementBlured","__doChangeCheck","__doChangeCheckThrottled","__lookupComplete","addElement","removeElement","setValue","hasChanged","hasRestored","getValue","getDefault","getLast","changeStatus"],options:{},elements:[],values:[],valuesDefault:[],valuesLast:[],id:!1,initialize:function(n){this.id=String.uniqueID();n&&!n.hasClass("has-change-tracker")&&this.addElement(n)},__removeEvents:function(n){n.removeEvent("change",this.__elementChanged);n.removeEvent("blur",this.__elementBlured)},__addEvents:function(n){n.addEvent("change",this.__elementChanged);n.addEvent("blur",this.__elementBlured)},__cloneValue:function(n){var i=typeOf(n)==="number"?!0:!1,t=(n+"").trim();return i?parseFloat(t):t},__sanatiseValue:function(n){try{return n===null||n===undefined||n.trim()===""?"":n}catch(t){return n}},__isSame:function(n,t){return(n+"").trim().toLowerCase()===(t+"").trim().toLowerCase()},__doChangeCheck:function(n){clearTimeout(this.__doChangeCheckThrottle);this.__doChangeCheckThrottle=this.__doChangeCheckThrottled.delay(100,this,[n])},__doChangeCheckThrottle:!1,__doChangeCheckThrottled:function(n){if(n&&["object","event","domevent"].contains(typeOf(n))&&"target"in n&&this.elements.indexOf(n.target)>-1){var t,i;Array.each(this.elements,function(n,r){t=i=!1;this.values[r]=this.__sanatiseValue(n.value);this.__isSame(this.values[r],this.valuesDefault[r])?i=!0:t=!0;n.removeClass("cant-select-default");t&&(n.removeClass("value-restored").addClass("value-changed"),n.fireEvent("ElementChanged",{value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}),this.fireEvent("ElementChanged",{value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}),window.fireEvent("AnElementChanged",{target:this.elements[r],value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}),this.values[r]!==this.valuesDefault[r]&&(n.get("class").test(new RegExp("dependencies","gi"))||n.get("class").test(new RegExp("lookup","gi")))&&n.addClass("cant-select-default"));i&&(n.removeClass("value-changed").addClass("value-restored"),n.fireEvent("ElementRestored",{value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}),this.fireEvent("ElementRestored",{value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}),window.fireEvent("AnElementRestored",{target:this.elements[r],value:this.values[r],last:this.valuesLast[r],"default":this.valuesDefault[r]}));this.valuesLast[r]=this.values[r]}.bind(this))}},__elementChanged:function(n){this.__doChangeCheck(n)},__elementBlured:function(n){this.__doChangeCheck(n)},__lookupComplete:function(n){this.__doChangeCheck.delay(500,this,[n])},addElement:function(n){if(!n.retrieve("changetracker")){var t="value"in n?n.value:"",i=n.get("data-default-value")?n.get("data-default-value"):t;this.elements.indexOf(n)===-1?(this.elements.push(n),this.values.push(t),this.valuesDefault.push(i),this.valuesLast.push(t),this.__removeEvents(n),this.__addEvents(n),n.addEvent("lookupComplete",this.__lookupComplete),n.addClass("has-change-tracker"),n.store("changetracker",this)):this.setValue(n,t)}},removeElement:function(n){if(this.elements.indexOf(n)!==-1){var t=this.elements.indexOf(n);this.elements.splice(t,1);this.values.splice(t,1);this.valuesLast.splice(t,1);this.valuesDefault.splice(t,1);this.__removeEvents(n);n.removeClass("value-restored").removeClass("value-changed").removeClass("has-change-tracker");n.eliminate("changetracker")}},setValue:function(n,t){if(this.elements.indexOf(n)!==-1){var i=this.elements.indexOf(n);n.value=t;n.removeClass("value-restored").removeClass("value-changed");this.values[i]=t;this.valuesDefault[i]=t;this.valuesLast[i]=t;this.__removeEvents(n);this.__addEvents(n)}else this.addElement(n)},hasChanged:function(){var n=!1;return Array.each(this.elements,function(t,i){t.hasClass("value-changed")&&(n=!0);this.__isSame(this.values[i],this.valuesDefault[i])||(n=!0)}.bind(this)),n},hasRestored:function(){var n=!1;return Array.each(this.elements,function(t){t.hasClass("value-restored")&&(n=!0)}.bind(this)),n},getValue:function(n){var i=n||this.elements[0],t=this.elements.indexOf(i);if(t!==-1)return this.values[t];throw new Error("Target element not tracked");},getDefault:function(n){var i=n||this.elements[0],t=this.elements.indexOf(i);if(t!==-1)return this.valuesDefault[t];throw new Error("Target element not tracked");},getLast:function(n){var i=n||this.elements[0],t=this.elements.indexOf(i);if(t!==-1)return this.valuesLast[t];throw new Error("Target element not tracked");},changeStatus:function(){return{changed:this.hasChanged(),restored:this.hasRestored(),values:this.values,last:this.valuesLast,defaults:this.valuesDefault}},destroy:function(){Array.each(this.elements,function(n){this.__removeEvents(n);n.removeClass("value-restored").removeClass("value-changed").removeClass("has-change-tracker");n.eliminate("changetracker")}.bind(this))}});Element.implement({addChangeTracker:function(){return this.get("tag").test("select|input|textarea|datalist","gi")&&new Affinity.ElementValueTracker(this),this},hasChanged:function(){if(this.retrieve("changetracker"))return this.retrieve("changetracker").hasChanged()},getTrackedValue:function(){if(this.retrieve("changetracker"))return this.retrieve("changetracker").getValue(this)},getTrackedDefault:function(){if(this.retrieve("changetracker"))return this.retrieve("changetracker").getDefault(this)},getTrackedLast:function(){if(this.retrieve("changetracker"))return this.retrieve("changetracker").getLast(this)},fireTrackedChange:function(){if(this.retrieve("changetracker"))return this.retrieve("changetracker").__elementChanged({target:this}),this.retrieve("changetracker").getValue(this)}});Element.implement({exists:function(){try{if(document.body.contains(this)||this.ownerDocument&&this.ownerDocument.body.contains(this))return this}catch(n){return!1}return!1}});Element.Events.added={onAdd:function(){this.exists()?this.fireEvent("exists",this):(this.store("_exists_method",function(){this.exists()&&(clearInterval(this.retrieve("_exists_timer")),this.eliminate("_exists_timer"),this.eliminate("_exists_method"),this.fireEvent("exists",this))}),this.store("_exists_timer",this.retrieve("_exists_method").periodical(100,this)))},onRemove:function(){clearInterval(this.retrieve("_exists_timer"));this.eliminate("_exists_timer");this.eliminate("_exists_method")}};Element.Events.removed={onAdd:function(){this.exists()?(this.store("_not_exists_method",function(){this.exists()||(clearInterval(this.retrieve("_not_exists_timer")),this.eliminate("_not_exists_timer"),this.eliminate("_not_exists_method"),this.fireEvent("notexists",!0))}),this.store("_not_exists_timer",this.retrieve("_not_exists_method").periodical(1e3,this))):this.fireEvent("notexists",!0)},onRemove:function(){clearInterval(this.retrieve("_not_exists_timer"));this.eliminate("_not_exists_method");this.eliminate("_not_exists_method")}};String.prototype.soundex=function(){var f=this,t,n="",r,e,o,u;for(f=f.toUpperCase(),n=f,n=n.replace(/[^A-Z]/gi," "),n=n.replace(/^\s*/g,""),n=n.replace(/\s*$/g,""),n=n.replace(/^GH/g,"G"),n=n.replace(/DG/g,"G"),n=n.replace(/GH/g,"H"),n=n.replace(/GN/g,"N"),n=n.replace(/KN/g,"N"),n=n.replace(/PH/g,"F"),n=n.replace(/MP([STZ])/g,"M$1"),n=n.replace(/^PS/g,"S"),n=n.replace(/^PF/g,"F"),n=n.replace(/MB/g,"M"),n=n.replace(/TCH/g,"CH"),u=n.substr(0,1),(u=="H"||u=="W")&&(n="-"+n.substr(1)),n=n.replace(/[AEIOUYHW]/g,"0"),n=n.replace(/[BPFV]/g,"1"),n=n.replace(/[CSGJKQXZ]/g,"2"),n=n.replace(/[DT]/g,"3"),n=n.replace(/[L]/g,"4"),n=n.replace(/[MN]/g,"5"),n=n.replace(/[R]/g,"6"),o=n.length,e="",t="",i=0;i<o;i++)r=n.charAt(i),r==e?t+=" ":(t+=r,e=r);return n=t,n=n.substr(1),n=n.replace(/\s/g,""),n=n.replace(/0/g,""),n+="0000000000",n=u+n,n.substr(0,5)};String.prototype.distance=function(n){var u=this.toLowerCase(),f=n.toLowerCase(),r,t,i;if(u.length===0)return f.length;if(f.length===0)return u.length;for(r=[],t=0;t<=f.length;t++)r[t]=[t];for(i=0;i<=u.length;i++)r[0][i]=i;for(t=1;t<=f.length;t++)for(i=1;i<=u.length;i++)r[t][i]=f.charAt(t-1)==u.charAt(i-1)?r[t-1][i-1]:Math.min(r[t-1][i-1]+1,Math.min(r[t][i-1]+1,r[t-1][i]+1));return r[f.length][u.length]};typeOf(File)=="null"&&(File={});typeOf(Request)=="null"&&(File={});File.Upload=new Class({Implements:[Options,Events],options:{onComplete:function(){}},initialize:function(n){var t=this;this.setOptions(n);this.uploadReq=new Request.File({onComplete:function(){t.fireEvent("complete",arguments);this.reset()}});this.options.data&&this.data(this.options.data);this.options.images&&this.addMultiple(this.options.images)},data:function(n){var t=this;this.options.url.indexOf("?")<0&&(this.options.url+="?");Object.each(n,function(n,i){t.options.url.charAt(t.options.url.length-1)!="?"&&(t.options.url+="&");t.options.url+=encodeURIComponent(i)+"="+encodeURIComponent(n)})},addMultiple:function(n){var t=this;n.each(function(n){t.add(n)})},add:function(n){var i=n;if(typeOf(n)!=="null"){var n=document.id(n),r=n.get("name"),t=n.files[0];this.uploadReq.append("fileData",t)}},addPostData:function(n){this.uploadReq.addPostData(n)},send:function(n){n&&this.add(n);this.uploadReq.send({url:this.options.url})}});Request.File=new Class({Extends:Request,options:{emulation:!1,urlEncoded:!1},initialize:function(n){this.xhr=new Browser.Request;this.formData=new FormData;this.setOptions(n);this.headers=this.options.headers},append:function(n,t){return this.formData.append(n,t),this.formData},addPostData:function(n){var t=this;Object.each(n,function(n,i){t.formData.append(i,n)})},reset:function(){this.formData=new FormData},send:function(n){var i=n.url||this.options.url,t;return this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0,t=this.xhr,t.open("POST",i,!0),t.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(n,i){try{t.setRequestHeader(i,n)}catch(r){this.fireEvent("exception",[i,n])}},this),this.fireEvent("request"),t.send(this.formData),this.options.async||this.onStateChange(),this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)),this}});Affinity.Shake=new Class({Implements:Options,options:{distance:4,duration:50,transition:Fx.Transitions.Sine.easeInOut,loops:2},initialize:function(n,t){this.setOptions(t);this.element=n;this.tween=new Fx.Tween(this.element,{link:"chain",duration:this.options.duration,transition:this.options.transition,property:"margin-left"})},shake:function(){var n=this.options.distance;for(this.loops=0;this.loops<this.options.loops;this.loops++)this.tween.start("left",n).start("left",-n),this.tween.start("left",n).start("left",0);delete n},stop:function(){this.loops=this.options.loops;this.tween.cancel();this.element.setStyle("margin-left",0)}});window.addEvent("UiReady",function(){Affinity.oldess&&Affinity.oldessFrame&&Affinity.agent.contains("Chrome")&&Affinity.agent.contains("Windows NT 6.2")&&window.addEvent("click",function(){document.getElement("body").className.contains("redraw")?(document.getElement("body").setStyle("width","100%"),document.getElement("body").className="newui"):(document.getElement("body").setStyle("width","99.9%"),document.getElement("body").className="newui redraw")});typeof masterMessage!="undefined"&&Affinity.isie&&Affinity.ieversion<9&&masterMessage({message:'<strong class="color red large">Warning!<\/strong><br /><br />We do not support Internet Explorer 8 and less.<br />Some functionality may not work.<br /><br />We recommend <a href="https://www.google.com/chrome/browser/desktop/" target="_blank" class="color green">Chrome<\/a> or updating to at least IE9.<br /><br />Continue at your own risk.',okText:"Accept and Continue"})});Affinity.PageReady=function(){window.removeEvent("PageReady",Affinity.PageReady);Affinity.apiversion>1?(Affinity.zelosroot=Affinity.zelosroot,Affinity.lookupapi=Affinity.zelosroot+"?api=Lookup/Get"):Affinity.lookupapi=Affinity.zelosroot+"?api=Lookup/Get";document.documentMode&&document.documentMode==8&&document.getElement("body").addClass("ie8");Affinity.mobile;var n=document.body.classList;Affinity.ismac=n.contains("mac")?!0:!1;Affinity.isie=n.contains("ie")?!0:!1;Affinity.isEdge=n.contains("ieedge");Affinity.isie&&(Affinity.ieversion=Browser.version);Affinity.isie&&(Affinity.iedocmode=document.documentMode?document.documentMode:!1);Affinity.ismobile=n.contains("mobile")?!0:!1;Affinity.mobile&&(Affinity.ismobile=!0);Affinity.isTeampayoffice=window.location.href.toLowerCase().indexOf("teampayoffice")!==-1?!0:!1;Affinity.isTeampayofficeBranch=Affinity.isTeampayoffice?window.location.href.toLowerCase().indexOf("/tb")!==-1?!0:!1:!1;Affinity.refreshControll={};Affinity.refreshControll.initialLoad=!0;Affinity.refreshControll.lastRefresh=(new Date).getTime();window.addEvent("keydown",function(n){if(n.key==="f5"||n.key==="F5"||n.control&&(n.key==="r"||n.key==="R")){var t=(new Date).getTime(),i=Affinity.refreshControll.initialLoad?7e3:5e3;t-Affinity.refreshControll.lastRefresh<i&&(n.stop(),uialert({message:"Refreshing this often can slow things down.<br />If you believe the page is not responding,<br />please contact Affinity Help desk.",showButtons:!0}));Affinity.refreshControll.lastRefresh=(new Date).getTime();Affinity.refreshControll.initialLoad=!1}});Affinity&&Affinity.isie&&Affinity.ieversion<9&&document.addEvent("keydown",function(n){(n.key==8||n.key==="backspace")&&(n.target.get("tag").test("select","gi")||n.target.disabled||n.target.readOnly)&&n.preventDefault()});window.addEvent("userComplete",function(n){document.getElements(".displayname").set("html",n.commonName?n.commonName:n.displayName?n.displayName:"")});try{parent&&"parentFrameResize"in parent&&(window.addEvent("ResizeFrame",function(){var i,n,t;document.getElement(".content")&&(i=document.getElement(".content"),n=i.getScrollSize(),parent&&"parentFrameResize"in parent&&window.parent.window!==window&&(t=window.parent.window.innerWidth?window.parent.window.innerWidth-70:window.parent.window.document.body.offsetWidth-70,n.x=t&&t>0?t:1e3,parent.parentFrameResize({x:n.x,y:n.y+100})))}),window.fireEvent("ResizeFrame"),function(){window.fireEvent("ResizeFrame")}.delay(500))}catch(t){}};window.addEvent("PageReady",Affinity.PageReady);window.addEvent("load",function(){(function(){Affinity.disableAutoPageReady||Affinity.uiready||window.fireEvent("PageReady")}).delay(1e3,this)});Affinity.log=!0;Affinity.user=null;Affinity.prettyuploads=!0;Affinity.selectToAutoNum=0;Affinity.selectmax=2e3;Affinity.enableSelectLimit=!0;Affinity.useWebWorkers=!1;Affinity.enableFavourites=!1;Affinity.disableAutoPageReady=!1;window.config=document.config=Affinity;var UIAutoComplete=new Class({Version:"1.0.9.2",File:"ui.autocomplete.js",Notes:"Position including scroll",Implements:[Options],Binds:["processNew","doAutoComplete","hideAll"],options:{},widgets:{},initialize:function(n){this.setOptions(n);Affinity.UI.autocomplete||(Affinity.UI.autocomplete={});Affinity.UI.lastAutoKill={};typeOf(Affinity.UI.ghostFocus)==="null"&&(Affinity.UI.ghostFocus=new Element("input",{type:"text"}),new Element("div",{"class":"subhidden"}).adopt(Affinity.UI.ghostFocus).inject(document.body,"bottom"));window.autocompletes=this;this.processNew()},processNew:function(){Array.each(document.getElements(".ui-autocomplete"),function(n){n.hasClass("has-lookup")||n.hasClass("lookup-loading")||(n.removeClass("ui-autocomplete"),ac=Affinity.mobile&&"UIAutoCompleteMobileWidget"in window?new UIAutoCompleteMobileWidget({selectElement:n}):new UIAutoCompleteWidget({selectElement:n}),this.widgets[ac.uuid]||(this.widgets[ac.uuid]=ac))}.bind(this))},doAutoComplete:function(n){var t=new UIAutoCompleteWidget({selectElement:n});this.widgets[t.uuid]||(this.widgets[t.uuid]=t)},hideAll:function(n){Object.each(this.widgets,function(t){typeOf(n)!=="null"&&n.uuid?t.uuid!==n.uuid&&t.hide("master hide all"):t.hide("master hide all")}.bind(this))}}),UIAutoCompleteWidget=new Class({debug:!1,Implements:[Options,Events],Binds:["fuzzyWorkerComplete","cleanDisplay","processOptions","updateOptions","stopEvent","getValue","setValue","getDisplayValue","position","windowClickStart","windowClickEnd","listOver","listOut","elementOver","elementOut","doFocus","doClick","doKeyUp","doKeyDown","fuzzySearch","continueWithFuzzySearch","itemClicked","escapeRegExp","obscure","reveal","hide","show","clearList","revert","destroy","searchMode_fireChangeEvents","searchMode_valueToOption","searchMode_iconClicked","searchMode_displayBlur",],options:{stopInitialChange:!1,selectElement:null},webworkerpath:"./scripts/common/ui.autocomplete.web.worker.js",list:[],selectElement:null,listElement:null,displayElement:null,changed:!1,defaultChangeValue:null,center:!1,autowidth:!1,uuid:"",killid:"",type:"autocomplete",initialize:function(n){if(Affinity.mobile&&"UIAutoCompleteMobileWidget"in window)return new UIAutoCompleteMobileWidget(n);this.setOptions(n);this.useWebWorkers=Affinity.useWebWorkers?typeof Worker!="undefined"?!0:!1:!1;this.useWebWorkers&&(this.fuzzyWorker=new Worker(this.webworkerpath),this.fuzzyWorker.onmessage=this.fuzzyWorkerComplete);this.searchMode=!1;Affinity&&Affinity.mobile&&(this.searchMode=!0);this.icons={};this.icons.search=Affinity.icons.Search;this.selectElement=this.options.selectElement;this.selectElement.hasClass("ui-autocomplete-center")&&(this.center=!0);this.selectElement.hasClass("ui-autocomplete-autowidth")&&(this.autowidth=!0);this.bestguess=null;this.selectElement.set("tabindex",5e3);this.hiddenWrapper=new Element("div",{"class":"subhidden"}).inject(this.selectElement,"after");this.selectElement.inject(this.hiddenWrapper);this.uuid=this.selectElement.get("id")==null?String.uniqueID():this.selectElement.get("id");this.killid="ac-destroy-"+String.uniqueID();window.autocompletes.widgets[this.uuid]||(window.autocompletes.widgets[this.uuid]=this);this.selectElement.set("id",this.uuid);this.processOptions.delay(100,this);this.selectElement.store("widget",this);this.valuetracker=this.selectElement.retrieve("changetracker")?this.selectElement.retrieve("changetracker"):new Affinity.ElementValueTracker;this.valuetracker.addElement(this.selectElement);document.addEvent("scroll",this.position);document.addEvent("resize",this.position)},fuzzyWorkerComplete:function(n){var t=n.data,i,r;switch(t.job){case"getOptions":this.searchMode&&(this.massiveSelect.innerHTML=t.html,Affinity.prompts.adopt(this.massiveSelect),this.massiveSelect.removeClass("hidden"),new UIAutoCompleteWidget({selectElement:this.massiveSelect,onComplete:function(n){this.massiveLoader.destroy();Affinity.prompts.center();Affinity.prompts.showButtons();Affinity.prompts.show();n.position()}.bind(this)}));break;case"getList":i=null;this.listElement.getElements("li")&&this.listElement.getElements("li").removeEvent(Affinity.events.click,this.itemClicked);this.listElement.innerHTML=t.html;this.fuzzySearchItemsTotal=t.data.total;this.fuzzySearchItems=t.data.items;this.items=this.listElement.getElements("li");this.items.addEvent(Affinity.events.click,this.itemClicked);t.data.defaultID&&(i=this.listElement.getElement("#"+n.data.data.defaultID),this.defaultValue=i,this.lastSelected=i,this.defaultChangeValue=i.get("data-value"));this.continueProcessOptsions(i);break;case"resetList":this.listElement.innerHTML=t.html;this.iconElement&&this.iconElement.removeClass("working");t.select&&(this.lastSelected=document.id(t.select),this.defaultValue=document.id(t.select),this.bestguess=document.id(t.select),this.selectElement.value="");this.selectElement.selectedIndex=0;this.listElement.scrollTo(0,0);this.defaultChangeValue=this.defaultValue.value;this.listElement.getElements("li")&&this.listElement.getElements("li").removeEvent(Affinity.events.click,this.itemClicked);this.fuzzySearchItemsTotal=t.data.total;this.fuzzySearchItems=t.data.items;this.items=this.listElement.getElements("li");this.items.addEvent(Affinity.events.click,this.itemClicked);window.fireEvent("elementChanged",{element:this.selectElement});break;case"doSearch":r=[];this.listElement.getElements("li")&&this.listElement.getElements("li").removeEvent(Affinity.events.click,this.itemClicked);this.listElement.innerHTML=t.html;t.bestguess&&(this.bestguess=document.id(t.bestguess));this.iconElement&&this.iconElement.removeClass("working");this.items=this.listElement.getElements("li");this.items.addEvent(Affinity.events.click,this.itemClicked)}},cleanDisplay:function(n){if(typeOf(n)==="string"&&n.trim()!==""){var t=n.split(",").filter(function(n){return n!==""}).join(", ");return t.trim().replace(/&amp;/gi,"&")}return n},getValue:function(){return this.selectElement.value},setValue:function(n,t){var r,i;if(t=t||!0,n=this.cleanDisplay(n),typeOf(this.listElement)!=="null")if(this.searchMode)this.datalistElement.getElement("option[value="+n+"]")&&(this.displayElement.value=n,this.mobileChange());else{if(!n||n===""||typeOf(this.fuzzySearchItems)==="null"||this.fuzzySearchItems===!1){this.itemClicked({target:this.listElement.getElement("li"),fireEvents:t});return}for(r=!1,i=0;i<this.fuzzySearchItems.length;i++)if(this.fuzzySearchItems[i].value+""==n+""){r=document.id(this.fuzzySearchItems[i].id);break}r?this.itemClicked({target:r,fireEvents:t}):this.itemClicked({target:this.listElement.getElement("li"),fireEvents:t})}},getDisplayValue:function(){return this.cleanDisplay(this.displayElement.value)},status:"closed",searchMode_firstPass:!0,searchMode_lastKnownValue:"",searchMode_fireChangeEvents:function(n){this.changed=typeOf(n)==="boolean"&&n===!0?!0:!1;this.defaultChangeValue!==this.selectElement.value&&(this.defaultChangeValue=this.selectElement.value,this.changed=!0);!this.searchMode_firstPass&&this.changed&&this.searchMode_lastKnownValue===this.selectElement.value&&(this.changed=!1);this.changed&&(this.defaultChangeValue=this.selectElement.value,this.selectElement.get("onChange")||this.selectElement.get("onchange")?this.selectElement.onChange():this.selectElement.fireEvent("change",{target:this.selectElement}),window.fireEvent("elementChanged",{element:this.selectElement,callee:"autocomplete search mode"}));this.searchMode_firstPass=!1},searchMode_valueToOption:function(n,t,i){var u,r;if(i=i||!1,this.selectElement.retrieve("data-store")&&this.selectElement.retrieve("data-key"))this.selectElement.empty(),new Element("option",{value:n,html:t}).inject(this.selectElement),this.selectElement.value=n,this.selectElement.selectedIndex=0;else for(this.selectElement.value=n,u=this.selectElement.getElements("options"),r=0;r<u.length;r++)if(u[r].value===n){this.selectElement.selectedIndex=r;break}this.displayElement.value=n;this.displayElement.store("data-search-value",n);this.searchMode_fireChangeEvents(i)},searchMode_iconClicked:function(){var t=this.cleanDisplay(this.displayElement.value),n,i;!Affinity.mobile&&t.trim()!==""&&t.length>1||Affinity.mobile?(n=new Element("select",{"class":"override ui-autocomplete-center hidden"}),i=new Element("span",{html:'Loading list <img src="'+Affinity.loaders.dark+'" />'}),uialert({message:"Set Value<br /><br />",showButtons:!0,showCancel:!0,canClose:!Affinity.mobile,position:{position:"fixed",top:10},onOk:function(){var n=document.id("UIPromtBox").getElement("select"),i=n.selectedIndex||0,r=n.getElements("option"),t=r[i],u=t.get("value");this.searchMode_valueToOption(t.get("value"),t.get("html"),!0);n.getWidget()&&n.getWidget().destroy();n.destroy()}.bind(this),onCancel:function(){n.getWidget()&&n.getWidget().destroy();n.destroy()},onClose:function(){n.getWidget()&&n.getWidget().destroy();n.destroy()}}),Affinity.prompts.adopt(i),Affinity.prompts.hideButtons(),function(){if(this.selectElement.retrieve("data-store")&&this.selectElement.retrieve("data-key")){var e,r=this.selectElement.retrieve("data-store"),u=this.selectElement.retrieve("data-key"),f=Affinity.UI[r][u].api;f=f.contains("limit")?f.substr(0,f.indexOf("limit")-1):f;Affinity.UI[r][u].data.length===0?new Request.JSONP({callbackKey:"jsoncallback",url:f,method:"get",timeout:3e4,onComplete:function(f){JSON.Unauthorized(f,Affinity.UI[r][u].id+", lookup massive loader")||("error"in f?i.set("html","Failed loading list. Please refresh and try again."):typeOf(f)==="array"&&f.length>0&&(Affinity.UI[r][u].data=f,Affinity.UI[r][u].loaded=!0,this.useWebWorkers?(this.massiveSelect=n,this.massiveLoader=i,this.fuzzyWorker.postMessage({job:"getOptions",data:Affinity.UI[r][u].data,searchFor:t,ismobile:Affinity.mobile})):(Array.each(Affinity.UI[r][u].data,function(i){(i.Value.toLowerCase().indexOf(t.toLowerCase())>-1||Affinity.mobile)&&(e=new Element("option",{value:i.Key,html:this.cleanDisplay(i.Value)}).inject(n),i.Value===t&&e.set("selected","selected"))}.bind(this)),Affinity.prompts.adopt(n),n.removeClass("hidden"),new UIAutoCompleteWidget({selectElement:n,onComplete:function(n){i.destroy();Affinity.prompts.center();Affinity.prompts.showButtons();Affinity.prompts.show();n.position();Affinity.oldess&&Affinity.oldessWindow.scrollTo(0,0)}}))))}.bind(this),onError:function(){i.set("html","Failed loading list. Please refresh and try again.");Affinity.prompts.showButtons()}.bind(this),onFailure:function(){i.set("html","Failed loading list. Please refresh and try again.");Affinity.prompts.showButtons()}.bind(this),onTimeout:function(){i.set("html","List loader timed out. Please refresh and try again.");Affinity.prompts.showButtons()}.bind(this)}).send():this.useWebWorkers?(this.massiveSelect=n,this.massiveLoader=i,this.fuzzyWorker.postMessage({job:"getOptions",data:Affinity.UI[r][u].data,searchFor:t,ismobile:Affinity.mobile})):(Array.each(Affinity.UI[r][u].data,function(i){(i.Value.toLowerCase().indexOf(t.toLowerCase())>-1||Affinity.mobile)&&(e=new Element("option",{value:i.Key,html:this.cleanDisplay(i.Value)}).inject(n),i.Value===t&&e.set("selected","selected"))}.bind(this)),Affinity.prompts.adopt(n),n.removeClass("hidden"),new UIAutoCompleteWidget({selectElement:n,onComplete:function(n){i.destroy();Affinity.prompts.center();Affinity.prompts.showButtons();Affinity.prompts.show();n.position();Affinity.oldess&&Affinity.oldessWindow.scrollTo(0,0)}}))}else this.useWebWorkers?(this.massiveSelect=n,this.massiveLoader=i,this.fuzzyWorker.postMessage({job:"getOptions",data:Affinity.UI[r][u].data,searchFor:t,ismobile:Affinity.mobile})):(Array.each(this.selectElement.getElements("option"),function(i){(i.get("html").stripTags().toLowerCase().indexOf(t.toLowerCase())>-1||Affinity.mobile)&&(i=new Element("option",{value:i.get("value")?i.get("value"):i.get("html").stripTags(),html:this.cleanDisplay(i.get("html"))}).inject(n),i.get("html")===t&&i.set("selected","selected"))}.bind(this)),Affinity.prompts.adopt(n),n.removeClass("hidden"),new UIAutoCompleteWidget({selectElement:n,onComplete:function(n){i.destroy();Affinity.prompts.center();Affinity.prompts.showButtons();Affinity.prompts.show();n.position();Affinity.oldess&&Affinity.oldessWindow.scrollTo(0,0)}}))}.delay(300,this)):t.trim()!==""&&t.length===1?uialert({message:"You must enter more than 1 character",showButtons:!0}):uialert({message:"You must enter a search term",showButtons:!0})},searchMode_displayBlur:function(){var t=this.cleanDisplay(this.displayElement.value),n=this.displayElement.retrieve("data-search-value");(n===""||t!==n)&&(n=t);this.selectElement.retrieve("data-store")&&this.selectElement.retrieve("data-key")&&(this.selectElement.empty(),this.searchMode_valueToOption(n,t))},updateOptions:function(){this.clearList();this.processOptions()},processCount:0,processOptions:function(){var i,r,u,n,e,f,t,o;typeOf(this.selectElement)!=="null"&&this.selectElement&&"getElements"in this.selectElement&&(i=this.selectElement.getElements("option"),(i.length>Affinity.selectmax||this.selectElement.hasClass("massive"))&&(this.searchMode=!0),this.searchMode&&this.selectElement.hasClass("override")&&(this.searchMode=!1),r=!0,u=!0,this.searchMode?(n=this.uuid,Affinity.UI.lastAutoKill[n]&&(document.getElement("."+Affinity.UI.lastAutoKill[n].killid)&&(clearTimeout(Affinity.UI.lastAutoKill[n].destroy),this.displayElement=document.getElement("."+Affinity.UI.lastAutoKill[n].killid).removeClass(Affinity.UI.lastAutoKill[n].killid).set("id",n+"-Display").inject(this.hiddenWrapper,"before"),this.displayElement.destroyWidget("elementWidget"),this.displayElement.removeEvents(),r=!1),Affinity.UI.lastAutoKill[n]=null,delete Affinity.UI.lastAutoKill[n]),r&&(this.displayElement=new Element("input",{type:"text","class":"ui-autocomplete-display",id:n+"-Display"}).inject(this.hiddenWrapper,"before")),this.displayElement.addClass(this.killid),n=this.uuid+"_icon",Affinity.UI.lastAutoKill[n]&&(document.getElement("."+Affinity.UI.lastAutoKill[n].killid)&&(clearTimeout(Affinity.UI.lastAutoKill[n].destroy),this.iconElement=document.getElement("."+Affinity.UI.lastAutoKill[n].killid).removeClass(Affinity.UI.lastAutoKill[n].killid).set("id",n+"-Display-Icon").inject(this.hiddenWrapper,"before"),this.iconElement.removeEvents(),u=!1),Affinity.UI.lastAutoKill[n]=null,delete Affinity.UI.lastAutoKill[n]),u&&(this.iconElement=new Element("span",{"class":"ui-autocomplete-display-icon searchmode",id:n+"-Display-Icon",html:Affinity.icons.Search}).inject(this.displayElement,"after")),this.iconElement.addClass(this.killid+"_icon"),this.iconElement.removeClass("loading"),this.selectElement.hasClass("massive")&&this.selectElement.retrieve("data-store")&&this.selectElement.retrieve("data-key")&&(this.displayElement.addEvent("blur",this.searchMode_displayBlur),this.iconElement.addEvent(Affinity.events.click,this.searchMode_iconClicked),this.searchMode_valueToOption(this.selectElement.retrieve("data-value"),this.selectElement.retrieve("data-label"))),this.selectElement.hasClass("massive")||(this.selectElement.addClass("massive"),this.displayElement.addEvent("blur",this.searchMode_displayBlur),this.iconElement.addEvent(Affinity.events.click,this.searchMode_iconClicked),this.selectElement.retrieve("data-store")&&this.selectElement.retrieve("data-key")?this.searchMode_valueToOption(this.selectElement.retrieve("data-value"),this.selectElement.retrieve("data-label")):i.length>0&&(e=this.selectElement.selectedIndex&&this.selectElement.selectedIndex>0?this.selectElement.selectedIndex:0,this.searchMode_valueToOption(i[e].get("value")||"",i[e].get("html")))),this.selectElement.set("data-display-id",this.uuid+"-Display"),this.fireEvent("complete",this)):(this.displayElement?this.listElement.empty():(n=this.uuid,Affinity.UI.lastAutoKill[n]&&(document.getElement("."+Affinity.UI.lastAutoKill[n].killid)&&(clearTimeout(Affinity.UI.lastAutoKill[n].destroy),this.displayElement=document.getElement("."+Affinity.UI.lastAutoKill[n].killid),this.displayElement.removeClass(Affinity.UI.lastAutoKill[n].killid).set("id",n+"-Display").cloneEvents(this.selectElement),this.displayElement.destroyWidget("elementWidget"),this.displayElement.removeEvents(),r=!1),Affinity.UI.lastAutoKill[n]=null,delete Affinity.UI.lastAutoKill[n]),r&&(this.displayElement=new Element("input",{type:"text","class":"ui-autocomplete-display",id:this.uuid+"-Display"}).cloneEvents(this.selectElement).inject(this.hiddenWrapper,"before")),this.displayElement.addClass(this.selectElement.get("class")),this.displayElement.addClass(this.killid),n=this.uuid+"_icon",Affinity.UI.lastAutoKill[n]&&(document.getElement("."+Affinity.UI.lastAutoKill[n].killid)&&(clearTimeout(Affinity.UI.lastAutoKill[n].destroy),this.iconElement=document.getElement("."+Affinity.UI.lastAutoKill[n].killid).removeClass(Affinity.UI.lastAutoKill[n].killid).set("id",n+"-Display-Icon").inject(this.hiddenWrapper,"before"),this.iconElement.removeEvents(),u=!1),Affinity.UI.lastAutoKill[n]=null,delete Affinity.UI.lastAutoKill[n]),u&&(this.iconElement=new Element("span",{"class":"ui-autocomplete-display-icon",id:n+"-Display-Icon",html:this.icons.search}).inject(this.displayElement,"after")),this.iconElement.addClass(this.killid+"_icon"),this.iconElement.removeClass("loading"),this.displayElement.makeFormElement(),this.displayElement.addClass("widget"),this.displayElement.store("widget",this),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&this.displayElement.set("autocomplete","off"),this.selectElement.hasClass("has-message-icon")&&this.displayElement.addClass("has-message-icon"),this.selectElement.set("data-display-id",this.uuid+"-Display"),this.listElement=new Element("ul",{"class":"ui-autocomplete-list",id:this.domid}).inject(document.body,"bottom"),this.autowidth&&this.listElement.addClass("auto-width"),Affinity.mobile?window.addEvent("mobileback",function(){this.hide()}.bind(this)):(new Affinity.SmartClose(this.displayElement),new Affinity.SmartClose(this.listElement),this.displayElement.addEvent("SmartClose",function(){this.listElement.isOver()||this.hide()}.bind(this)),this.listElement.addEvent("SmartClose",function(){this.displayElement.isOver()||this.hide()}.bind(this))),(this.displayElement.hasClass("width-auto")||this.displayElement.hasClass("width-full"))&&this.listElement.setStyle("width",this.displayElement.getSize().x),this.listElement.set("tween",{duration:100}),this.listElement.fade("hide"),this.displayElement.addEvent("focus",this.doFocus),this.listElement.set("tween",{duration:100,onComplete:function(n){n.getStyle("opacity")===0?n.addClass("hidden"):n.removeClass("hidden")}}),this.listElement.fade("hide")),this.items=[],this.fuzzySearchItems=[],o=null,this.defaultValue=null,this.useWebWorkers?(this.iconElement&&this.iconElement.addClass("working"),this.fuzzyWorker.postMessage({job:"getList",html:this.selectElement.innerHTML,defaultValue:this.selectElement.get("data-default-value")||!1,uuid:this.uuid})):(Array.each(this.selectElement.getElements("option"),function(n,i){f=this.cleanDisplay(n.get("html"));value=n.get("value");t=new Element("li",{html:f,"data-value":value,"class":"visible",id:this.uuid+"-li-"+i});t.set("data-index",i);t.set("data-value",value);t.addEvent(Affinity.events.click,this.itemClicked);t.inject(this.listElement);n.selected&&(o=t,this.defaultValue=t,t.addClass("selected"),this.lastSelected=t,this.defaultChangeValue=n.value);this.items.push(t);this.fuzzySearchItems.push({id:this.uuid+"-li-"+i,html:f,klass:"visible",searchstr:f,value:n.value})}.bind(this)),this.continueProcessOptsions(o))))},continueProcessOptsions:function(n){this.searchMode||(this.useWebWorkers||(this.fuzzySearchItemsTotal=this.fuzzySearchItems.length),this.iconElement&&this.iconElement.removeClass("working"),this.fuzzySearchLargeDataDelay=!1,!0&&(this.fuzzySearchLargeDataDelay=100),this.fuzzySearchItemsTotal>=2e3&&this.fuzzySearchItemsTotal<3e3&&(this.fuzzySearchLargeDataDelay=250),this.fuzzySearchItemsTotal>=3e3&&this.fuzzySearchItemsTotal<5e3&&(this.fuzzySearchLargeDataDelay=500),this.fuzzySearchItemsTotal>=5e3&&(this.fuzzySearchLargeDataDelay=1e3),Affinity.isie&&Affinity.ieversion===11&&(this.fuzzySearchLargeDataDelay=1001),this.defaultValue===null&&(this.defaultValue=this.listElement.getElement("li")),this.keyHeldCheck=!1,this.keyHeld=!1,this.keyHeldDelay=null,this.displayElement.addEvent("keyup",this.doKeyUp),this.displayElement.addEvent("keydown",this.doKeyDown),n!==null&&this.defaultSelected({target:n}),this.fireEvent("complete",this),this.selectElement.value!==this.defaultChangeValue?(this.defaultChangeValue=this.selectElement.value,this.changed=!0):this.changed=!1,this.options.stopInitialChange&&this.selectElement.fireEvent("change",{target:this.selectElement}),this.checkExistsPeriodical=this.checkExists.periodical(1e3,this));this.displayElement&&this.valuetracker.addElement(this.displayElement)},stopEvent:function(n){n.stop()},reset:function(){if(!this.searchMode){var n=!1;typeOf(this.defaultValue)!=="null"&&this.defaultValue&&this.defaultValue.get("tag")==="li"&&(n=this.defaultValue);typeOf(this.lastSelected)!=="null"&&this.lastSelected&&this.lastSelected.get("tag")==="li"&&(n=this.lastSelected);Array.each(this.items,function(t){t.inject(this.listElement);t.removeClass("selected");t.removeClass("hidden");t.addClass("visible");this.fuzzySearchLargeDataDelay||t.set("html",this.cleanDisplay(t.get("html").stripTags()));n&&t===n&&(t.addClass("selected"),this.listElement.scrollTo(0,t.getPosition(this.listElement).y-5),this.displayElement.value=this.cleanDisplay(n.get("html").stripTags()))}.bind(this))}},checkExists:function(){document.contains(this.selectElement)||(clearInterval(this.checkExistsPeriodical),this.destroy())},doFocusDelay:!1,doFocus:function(){clearTimeout(this.doFocusDelay);this.doFocusDelay=function(){this.status=="closed"&&this.show("displayElement focus")}.delay(100,this);Affinity.mobile&&(this.displayElement.selectionStart=0,this.displayElement.selectionEnd=999999)},doClick:function(n){this.stopEvent(n);this.displayElement.select()},doKeyUp:function(n){n.key=="tab"||n.shift||(n.key=="tab"&&this.hide("on key up tab"),clearTimeout(this.keyHeldDelay),this.keyHeld||this.elementKeyUp(n),this.keyHeld=!1,this.keyHeldCheck=!1)},doKeyDown:function(n){if(n.key=="tab"&&this.hide("on key down tab"),n.key!="tab"){if(n.key=="enter"){this.stopEvent(n);return}if(n.key=="down"||n.key=="up"){if(this.keyHeldCheck||this.keyHeld){this.stopEvent(n);return}this.keyHeldCheck||this.keyHeld||(this.keyHeldCheck=!0,this.keyHeldDelay=this.elementKeySetHeld.delay(500,this,[n]))}}},elementKeySetHeld:function(n){this.keyHeld=!0;this.elementKeyUp(n)},getTopVisibleElement:function(){for(var i=this.listElement.getElements("li.visible"),t,r,n=0;n<i.length;n++)if(t=i[n],r=t.getPosition(this.listElement),r.y>0)return t},getBottomVisibleElement:function(){for(var u=this.listElement.getSize().y,i=this.listElement.getElements("li.visible"),t,r,n=i.length-1;n>0;n--)if(t=i[n],r=t.getPosition(this.listElement),r.y<u)return t},scrollToTop:function(n){var i=this.listElement.getScroll().y,t=n.getPosition(this.listElement).y,r=n.getSize().y;t<0&&this.listElement.scrollTo(0,i+t-r+10)},scrollToBottom:function(n){var u=this.listElement.getScroll().y,t=this.listElement.getSize().y,i=n.getPosition(this.listElement).y,r=n.getSize().y;i>t-r&&this.listElement.scrollTo(0,u+(i-t)+r+5)},escapeRegExp:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},fuzzyRunning:!1,fuzzySearch:function(n,t,i,r){var v,f,o,u,h,e,tt,l,y,k,p,s,w,a,d,g,nt,c,b;if(!this.fuzzyRunning)return this.fuzzyRunning=!0,v=[],this.useWebWorkers?(this.fuzzyDoSearchData={searchData:n,target:r},this.iconElement&&this.iconElement.addClass("working"),this.fuzzyWorker.postMessage({job:"doSearch",data:n,searchKey:t,searchFor:i,perfDelay:this.fuzzySearchLargeDataDelay})):(f=[],isNaN(i)?Array.each(n,function(n,r){u=document.id(n.id);h=0;tt=[];i=i.toLowerCase();l=n[t].toLowerCase().trim();y=i===l;k=l.indexOf(i)>-1?!0:!1;w=i.split(" ");p=w.length;y?(s=p,e=99999,h=99999,this.fuzzySearchLargeDataDelay?u.removeClass("hidden").addClass("visible"):(c="<strong>"+this.cleanDisplay(u.get("html").stripTags())+"<\/strong>",u.set("html",c).removeClass("hidden").addClass("visible"))):!y&&k?(s=l.split(i).length-1||0,e=s,h=e+100,this.fuzzySearchLargeDataDelay?u.removeClass("hidden").addClass("visible"):(c=this.cleanDisplay(u.get("html").stripTags()).replace(new RegExp("("+this.escapeRegExp(i)+")","gi"),"<strong>$1<\/strong>"),u.set("html",c).removeClass("hidden").addClass("visible"))):this.fuzzySearchLargeDataDelay<1001&&(a=l.split(" "),s=0,Array.each(w,function(n){Array.each(a,function(t){n!=" "&&n!=""&&(d=n.soundex(),g=t.soundex(),nt=d.distance(g),nt==0&&(s+=1))})}),h=s,e=Number.round(s/p,2)||0,h>=0&&(this.fuzzySearchLargeDataDelay?u.removeClass("hidden").addClass("visible"):(c=this.cleanDisplay(u.get("html").stripTags()),u.set("html",c).removeClass("hidden").addClass("visible"))));o={originalIndex:r,score:h,wordScore:e};f.push(o)}.bind(this)):Array.each(n,function(n,r){u=document.id(n.id);n[t].contains(i)?(e=n[t].split(i).length-1||0,a=n[t].split(" "),f.push({originalIndex:r,score:e,wordScore:e/a}),u.removeClass("hidden").addClass("visible")):u.addClass("hidden").removeClass("visible")}),f.sort(function(n,t){return parseFloat(n.score)===parseFloat(t.score)?parseFloat(n.wordScore)<parseFloat(t.wordScore)?1:-1:parseFloat(n.score)<parseFloat(t.score)?1:-1}),b=!1,Array.each(f,function(t){o=n[t.originalIndex];o.score=t.score;o.wordScore=t.wordScore;v.push(o);u=document.id(o.id);t.score>0?(u.inject(r),b=!0):u.addClass("hidden").removeClass("visible")}),!b&&f.length>0&&f[0].originalIndex&&n[f[0].originalIndex]&&n[f[0].originalIndex].id&&(this.bestguess=document.id(n[f[0].originalIndex].id))),this.fuzzyRunning=!1,v},elementKeyUp:function(n){var i=this.cleanDisplay(this.displayElement.value.toLowerCase()),t=this.listElement.getElement("li.visible.selected")||!1;if(n.key=="enter"&&t){this.stopEvent(n);this.itemClicked({target:t});return}if(n.key=="down"||n.key=="up"){this.status=="closed"&&this.show();n.preventDefault();n.key=="down"&&this.elementDown(n);n.key=="up"&&this.elementUp(n);this.keyHeld&&this.elementKeyUp.delay(50,this,[n]);return}if(n.code===8||n.code===16||n.code===32||n.code===46||n.code>=48&&n.code<=57||n.code>=65&&n.code<=90||n.code>=96&&n.code<=105)this.status=="closed"&&this.show();else return;if(i===""){this.useWebWorkers?this.fuzzyWorker.postMessage({job:"resetList"}):(Array.each(this.items,function(n){n.inject(this.listElement);n.set("html",this.cleanDisplay(n.get("html").stripTags()));n.removeClass("selected").removeClass("hidden").addClass("visible");n.get("html").trim()===""&&(n.addClass("selected"),t!==n&&(this.changed=!0),this.lastSelected=n,this.defaultValue=n,this.selectElement.value="",this.selectElement.selectedIndex=0,this.listElement.scrollTo(0,0),this.defaultChangeValue=this.selectElement.getElements("option")[0].value)}.bind(this)),this.bestguess=this.defaultValue,window.fireEvent("elementChanged",{element:this.selectElement}));return}this.listElement.getElements("li").removeClass("selected");this.listElement.scrollTo(0,0);t&&(this.lastSelected=t);this.fuzzySearchLargeDataDelay?(clearTimeout(this.fuzzySearchDelay),this.fuzzySearchDelay=this.continueWithFuzzySearch.delay(this.fuzzySearchLargeDataDelay,this)):this.continueWithFuzzySearch();this.position()},continueWithFuzzySearch:function(){var n=this.fuzzySearch(this.fuzzySearchItems,"searchstr",this.cleanDisplay(this.displayElement.value.toLowerCase()),this.listElement);this.position()},elementUp:function(){if(this.listElement.getElements("li.visible").length===0){this.hide("elementUp with empty list");return}var r=this.listElement.getElement("li.visible.selected"),u=this.getTopVisibleElement(),n=this.getBottomVisibleElement(),t=-1,i=this.listElement.getElements("li.visible");r&&(t=i.indexOf(r),r.removeClass("selected"));t>i.indexOf(n)?n&&"addClass"in n&&n.addClass("selected"):t>0?i[t-1]&&"addClass"in i[t-1]&&(i[t-1].addClass("selected"),this.scrollToTop(i[t-1])):this.listElement.scrollHeight==this.listElement.clientHeight?n&&"addClass"in n&&n.addClass("selected"):u&&"addClass"in u&&u.addClass("selected");window.fireEvent("elementChanged",{element:this.selectElement})},elementDown:function(){if(this.listElement.getElements("li.visible").length===0){this.hide("elementDown with empty list");return}var r=this.listElement.getElement("li.visible.selected"),n=this.getTopVisibleElement(),u=this.getBottomVisibleElement(),t=-1,i=this.listElement.getElements("li.visible");r&&"addClass"in r&&(t=i.indexOf(r),r.removeClass("selected"));t<i.indexOf(n)?n&&"addClass"in n&&n.addClass("selected"):t<i.length-1?i[t+1]&&"addClass"in i[t+1]&&(i[t+1].addClass("selected"),this.scrollToBottom(i[t+1])):this.listElement.scrollHeight==this.listElement.clientHeight?n&&"addClass"in n&&n.addClass("selected"):u&&"addClass"in u&&u.addClass("selected")},defaultSelected:function(n){var t=this.cleanDisplay(n.target.get("html").stripTags());this.listElement.getElements("li").removeClass("selected");n.target.addClass("selected");this.displayElement.value=t;this.selectElement.selectedIndex=n.target.get("data-index");this.selectElement.value=n.target.get("data-value")},itemClicked:function(n){this.hide("item clicked");var t=n.target.get("tag")=="li"?n.target:n.target.getParent("li"),i=n.hasOwnProperty("fireEvents")&&n.fireEvents===!1?!1:!0;this.listElement.getElements("li").removeClass("selected");t.addClass("selected");this.lastSelected=t;this.displayElement.value=this.cleanDisplay(t.get("html").stripTags());this.selectElement.selectedIndex=t.get("data-index");this.selectElement.value=t.get("data-value");this.selectElement.value!==this.defaultChangeValue?(this.defaultChangeValue=this.selectElement.value,this.changed=!0):this.changed=!1;i&&(this.selectElement.get("onChange")||this.selectElement.get("onchange")?this.selectElement.onChange():this.selectElement.fireEvent("change",{target:this.selectElement}),window.fireEvent("elementChanged",{element:this.selectElement,callee:"autocomplete itemClicked"}),this.fireEvent("elementChanged",this.selectElement.value))},position:function(){if(this.displayElement&&this.listElement)try{var n=this.displayElement.getPosition(),u=this.displayElement.measure(function(){return this.getSize()}),i=window.getSize(),f=document.body.scrollTop||0,e=n.y+u.y+f+5,r=n.x,t=this.listElement.measure(function(){return this.getSize()});this.center&&(r=n.x+u.x/2-t.x/2);i.y-n.y<t.y&&(e=n.y-t.y-5+f);n.x+t.x>i.x&&(r=i.x-t.x-5);this.listElement.setStyles({position:Affinity.mobile?"fixed":"absolute",top:e,left:r})}catch(o){}},obscure:function(){this.hide();this.iconElement&&this.iconElement.addClass("hidden");this.displayElement&&this.displayElement.addClass("hidden")},reveal:function(){this.iconElement&&this.iconElement.removeClass("hidden");this.displayElement.removeClass("hidden")},hide:function(){if(this.status!=="closed"){clearTimeout(this.doFocusDelay);clearTimeout(this.fuzzySearchDelay);var n=this.listElement;n.fade("out");this.status="closed",function(){n.addClass("hidden");this.listElement&&"getElement"in this.listElement&&!this.listElement.getElement("li.visible.selected")&&(this.lastSelected=this.listElement.getElement("li.visible.selected"));this.reset()}.delay(250,this)}},show:function(){var n,t;this.status!=="open"&&this.listElement&&"getElements"in this.listElement&&this.listElement.getElements("li.visible").length>0&&(window.autocompletes.hideAll(this),clearTimeout(this.doFocusDelay),n=this.listElement,n.removeClass("hidden"),this.position(),n.fade("in"),this.status="open",this.position.delay(250,this),this.listElement&&"getElement"in this.listElement&&this.listElement.getElement("li.visible.selected")&&(t=this.listElement.getElement("li.visible.selected"),this.listElement.scrollTo(0,t.getPosition(this.listElement).y-5)))},clearList:function(){this.listElement&&(Array.each(this.listElement.getElements("li"),function(n){n.removeEvents()}.bind(this)),this.listElement.empty())},revert:function(n){var i=typeOf(n)==="null"?!1:n,t;if(this.useWebWorkers&&this.fuzzyWorker&&"terminate"in this.fuzzyWorker&&(this.fuzzyWorker.terminate(),this.fuzzyWorker=!1),t="moo remove children",clearTimeout(this.doFocusDelay),clearTimeout(this.fuzzySearchDelay),clearInterval(this.checkExistsPeriodical),this.doFocusDelay=null,this.fuzzySearchDelay=null,this.checkExistsPeriodical=null,this.displayElement&&(Affinity.UI.lastAutoKill[this.uuid]={},Affinity.UI.lastAutoKill[this.uuid].id=this.uuid+"",Affinity.UI.lastAutoKill[this.uuid].killid=this.killid+"",Affinity.UI.lastAutoKill[this.uuid].destroy=Affinity.UI.delayAutoKill.delay(2e3,window,[this.uuid+"",this.killid+""]),this.iconElement&&(this.iconElement.addClass("loading"),Affinity.UI.lastAutoKill[this.uuid+"_icon"]={},Affinity.UI.lastAutoKill[this.uuid+"_icon"].id=this.uuid+"_icon",Affinity.UI.lastAutoKill[this.uuid+"_icon"].killid=this.killid+"_icon",Affinity.UI.lastAutoKill[this.uuid+"_icon"].destroy=Affinity.UI.delayAutoKill.delay(2e3,window,[this.uuid+"_icon",this.killid+"_icon"]))),Affinity.mobile||(document.removeEvent("scroll",this.position),document.removeEvent("resize",this.position)),this.listElement){if(this.listElement.set("tween",null),this.listElement.removeEvents(),t==="native remove")try{this.listElement.parentNode.removeChild(this.listElement)}catch(r){}if(t==="native remove children"){while(this.listElement.lastChild)this.listElement.lastChild.removeEventListener(Affinity.events.click,this.itemClicked),this.listElement.removeChild(this.listElement.lastChild);try{this.listElement.parentNode.removeChild(this.listElement)}catch(r){}}t==="moo remove"&&this.listElement.destroy();t==="moo remove children"&&(this.clearList(),this.listElement.destroy())}return this.displayElement&&(this.displayElement.removeEvents(),this.displayElement.getWidget("elementWidget")&&this.displayElement.getWidget("elementWidget").destroy(),this.searchMode&&this.displayElement.eliminate("value")),this.selectElement&&(this.selectElement.inject(this.hiddenWrapper,"before"),this.selectElement.eliminate("widget"),i&&(this.selectElement.retrieve("changetracker")&&this.selectElement.retrieve("changetracker").destroy(),this.selectElement.destroy())),this.hiddenWrapper&&this.hiddenWrapper.destroy(),window.autocompletes.widgets[this.uuid]&&(window.autocompletes.widgets[this.uuid]=null,delete window.autocompletes.widgets[this.uuid]),Object.each(this,function(n,t){this[t]=null;delete this[t]}.bind(this)),!0},destroy:function(){this.useWebWorkers&&this.fuzzyWorker&&(this.fuzzyWorker.terminate(),this.fuzzyWorker=!1);this.revert(!0)}}),UIDateCalendar=new Class({Version:"1.0.0.0",File:"ui.date.calendar.js",Implements:[Options,Events],Binds:["processNew","processDateInput","hideAll"],options:{outputFormat:"%d.%m.%Y",displayFormat:"%a the %e%o of %b %Y"},widgets:{},initialize:function(n){this.setOptions(n);Affinity.UI||(Affinity.UI={});Affinity.UI.calendars=this;this.processNew()},processNew:function(){Array.each(document.getElements("input.uidate-calendar"),this.processDateInput)},processDateInput:function(n){var t,i;if(!n.hasClass("uidone")){n.addClass("uidone");t={target:n,postName:n.get("name")||"",postId:n.get("id")||"",startDate:n.get("data-start-date")||new Date,validationMethods:n.get("data-validate-method")||"",validationErrorStr:n.get("data-validate-error-str")||"",showInline:n.hasClass("show-inline")?!0:!1,nullable:!1};switch(n.get("data-calendar-type")){case"date":t.showCalendar=!0;t.showTime=!1;break;case"time":t.showCalendar=!1;t.showTime=!0;break;case"datetime":t.showCalendar=!0;t.showTime=!0;break;case"hoursmins":t.showCalendar=!0;t.showTime=!0;t.hoursmins=!0;break;default:t.showCalendar=!0;t.showTime=!1}n.get("data-calendar-display-format")&&(t.displayFormat=n.get("data-calendar-display-format"));n.get("data-calendar-return-format")&&(t.outputFormat=n.get("data-calendar-return-format"));n.get("data-calendar-nullable")&&(t.nullable=n.get("data-calendar-nullable").trim().toLowerCase()==="true"?!0:!1);n.get("data-calendar-hoursmins")&&(t.hoursmins=n.get("data-calendar-hoursmins").trim().toLowerCase()==="true"?!0:!1);n.hasClass("preserve-original-input")&&(t.preserveOriginalInput=!0);t.hoursmins&&!n.get("data-start-date")&&(t.startDate.setMinutes(0),t.startDate.setHours(0),t.startDate.setSeconds(0),t.startDate.setMilliseconds(0));i=new UIDateTimeWidget(t);this.widgets[i.uuid]||(this.widgets[i.uuid]=i);delete i;delete t}},hideAll:function(n){Object.each(this.widgets,function(t){typeOf(n)!=="null"&&n.uuid?t.uuid!==n.uuid&&t.hide():t.hide()}.bind(this))}}),UIDateTimeWidget=new Class({Implements:[Options,Events],options:{target:null,preserveOriginalInput:!1,outputFormat:"%d.%m.%Y",displayFormat:"%a %e %b %Y",showCalendar:!0,showTime:!1,startDate:null,labelName:"",postId:"",postName:"",validationMethods:"",validationErrorStr:"",cssPosition:"absolute",watchOutput:!1,nullable:!1,hoursmins:!1,showInline:!1},Binds:["getDate","getDateObject","getValue","getDisplayValue","documentClick","calendarClick","calendarEnter","calendarLeave","monthElementClicked","yearElementClicked","monthSelectorClicked","yearSelectorClicked","lastMonth","nextMonth","resetCalendar","nextMonthDown","lastMonthDown","dayClicked","timeChanged","setCalendarDate","changeMonth","changeYear","attemptParse","setToday","setNone","externalShow","watchOutputChanges","obscure","reveal","show","hide","destroy"],row:null,date:null,__uiDate:null,__selectedDate:null,getValue:function(){return this.date.format(this.options.displayFormat)},getDisplayValue:function(){return this.date.format(this.options.outputFormat)},initialize:function(n){var t,i,r;this.setOptions(n);this.showDefault=this.options.startDate=="none"?!1:!0;t=new Date;this.__uiDate=t.clone();this.__selectedDate=this.date=!1;this.options.startDate=="none"?this.options.target&&"value"in this.options.target&&this.options.target.value.trim()!==""?Date.parse(this.options.target.value).isValid()?(this.__uiDate=Date.parse(this.options.target.value),this.__selectedDate=this.__uiDate.clone(),this.date=this.__uiDate.clone(),this.showDefault=!0):this.showDefault=!1:this.showDefault=!1:this.options.startDate=="today"?(this.__uiDate=t.clone(),this.__selectedDate=this.__uiDate.clone(),this.date=this.__uiDate.clone()):this.options.startDate&&this.options.startDate!==null&&Date.parse(this.options.startDate).isValid()&&(this.__uiDate=Date.parse(this.options.startDate),this.__selectedDate=this.__uiDate.clone(),this.date=this.__uiDate.clone());this.options.hoursmins&&t.getTime()===this.__uiDate.getTime()&&(this.__uiDate.setMinutes(0),this.__uiDate.setHours(0),this.__uiDate.setSeconds(0),this.__uiDate.setMilliseconds(0),this.__selectedDate=this.__uiDate.clone(),this.date=this.__uiDate.clone());this.options.nullable&&(this.showDefault=!1);this.id=this.options.target!=null?this.options.target.get("id")?this.options.target.get("id"):String.uniqueID():String.uniqueID();this.uuid=this.id;Affinity.UI.calendars.widgets[this.uuid]||(Affinity.UI.calendars.widgets[this.uuid]=this);this.display=new Element("input",{type:"text","class":"ui-calendar-display data-hj-whitelist widget",id:this.id+"-Display"}).store("widget",this);this.output=new Element("input",{type:"hidden",name:this.options.postName,id:this.options.postId,"data-display-id":this.id+"-Display"});Affinity.mobile&&this.display.set("readonly","true");this.options.validationMethods!=""&&(this.output.addClass("validate"),this.output.set("data-validate-method",this.options.validationMethods),this.options.validationErrorStr&&this.output.set("data-validate-error-str",this.options.validationErrorStr));this.watch=this.options.watchOutput||!1;typeOf(this.options.target)!=="null"&&this.options.target.hasClass("uidate-watch")&&(this.watch=!0);this.watch&&(this.watchTimer=this.watchOutputChanges.periodical(500,this));this.reuse=this.options.preserveOriginalInput||!1;typeOf(this.options.target)!=="null"&&this.options.target.hasClass("uidate-preserve")&&(this.reuse=!0);this.reuse?typeOf(this.options.target)==="null"?(this.row=new Element("div"),this.label=new Element("label",{html:this.options.labelName}).inject(this.row),this.target=new Element("div",{"class":"hidden"}).inject(this.label,"after")):(this.row=this.options.target.getParent(".form-row")||!1,this.target=this.options.target,this.output=this.target,i=new Element("div",{"class":"subhidden"}),this.target.store("widget",this),this.row?(i.inject(this.row,"top"),this.display.inject(this.row,"bottom")):(i.inject(this.output,"before"),this.display.inject(this.output,"after")),this.output.inject(i)):(this.options.target==null?(this.row=new Element("div"),this.label=new Element("label",{html:this.options.labelName}).inject(this.row),this.target=new Element("div",{"class":"hidden"}).inject(this.label,"after")):(this.target=new Element("div",{"class":"hidden"}).inject(this.options.target,"after"),this.options.target.value&&(r=Date.parse(this.options.target.value),r.isValid()&&(this.options.startDate=r)),this.row=this.options.target.getParent(".form-row"),this.options.postId=this.options.target.get("id"),this.options.postName==""&&(this.options.postName=this.options.target.get("name"),this.output.set("name",this.options.postName)),this.display.cloneEvents(this.options.target),this.options.target.set("id","__"+this.options.target.get("id")),this.options.target.set("name",null),this.options.target.removeEvents(),this.options.target.store("widget",this).addClass("hidden")),this.row!==null&&this.row.set("class","form-row ui-calendar-row "+this.id),this.display.inject(this.target,"after"),this.output.inject(this.target,"after"),this.target.destroy());this.icons={};this.icons.Open=Affinity.icons.Popup||"&#xe012;";this.icons.Today=Affinity.icons.Calendar||"&#xe02e;";this.icons.Clear=Affinity.icons.Cross||"&#xe067;";this.icons.Tick=Affinity.icons.Tick;this.dontClose=!1;this.calendarOver=!1;this.buttons=new Element("span",{"class":"ui-calendar-buttons"}).inject(this.display,"after");this.showbutton=new Element("span",{"class":"ui-calendar-button button w-icon-only blue ui-has-tooltip",html:"<span>"+this.icons.Open+"<\/span>","data-calendar":this.id,"data-tooltip":"Open","data-tooltip-dir":"top"}).inject(this.buttons);this.todaybutton=new Element("span",{"class":"ui-calendar-button button w-icon-only green ui-has-tooltip",html:"<span>"+this.icons.Today+"<\/span>","data-calendar":this.id,"data-tooltip":"Set date to today","data-tooltip-dir":"top"}).inject(this.buttons);this.clearbutton=new Element("span",{"class":"ui-calendar-button button w-icon-only orange ui-has-tooltip",html:"<span>"+this.icons.Clear+"<\/span>","data-calendar":this.id,"data-tooltip":"Clear the date","data-tooltip-dir":"top"}).inject(this.buttons);this.calendarBox=new Element("div",{"class":"ui-calendar",id:this.domid}).inject(document.body);this.calendarBox.set("reveal",{duration:250});this.options.showInline||this.calendarBox.addEvent(Affinity.events.click,this.calendarClick);Affinity.mobile&&this.options.showInline||(this.calendarBox.addEvent(Affinity.events.overAll,this.calendarEnter),this.calendarBox.addEvent(Affinity.events.outAll,this.calendarLeave));this.options.showInline||(this.display.addEvent(Affinity.events.click,this.externalShow),this.showbutton.addEvent(Affinity.events.click,this.externalShow),this.display.addEvent("blur",this.attemptParse),document.addEvent(Affinity.events.click,this.documentClick),this.todaybutton.addEvent(Affinity.events.click,this.setToday),this.clearbutton.addEvent(Affinity.events.click,this.setNone));this.output&&this.date&&typeOf(this.output)==="element"&&typeOf(this.date)==="date"&&this.options.outputFormat&&this.output.store("defaultValue",this.date.format(this.options.outputFormat));this.printField=!1;this.display.getParent(".ui-calendar-row")&&this.display.getParent(".ui-calendar-row").getElement(".print-field")&&(this.printField=this.display.getParent(".ui-calendar-row").getElement(".print-field"));this.buildCalendar();window.addEvent("resize",function(){(this.status="open")&&this.position()}.bind(this));Affinity.mobile&&(window.addEvent("mobileback",this.documentClick),"onorientationchange"in window&&window.addEvent("orientationchange",function(){(this.status="open")&&this.position()}.bind(this)));this.valuetracker=new Affinity.ElementValueTracker;this.display&&this.valuetracker.addElement(this.display);this.output&&this.valuetracker.addElement(this.output);this.checkExistsPeriodical=this.checkExists.periodical(1e3,this);this.options.showInline&&(this.buttons.addClass("hidden"),this.display.addClass("hidden"),this.calendarBox.addClass("inline"),this.calendarBox.inject(this.display.getParent(),"bottom"),this.show())},checkExists:function(){document.contains(this.output)||(clearInterval(this.checkExistsPeriodical),this.destroy())},documentClick:function(){this.status=="open"&&this.hide(null,"doc "+this.id)},calendarClick:function(n){n.stopPropagation();n.preventDefault()},calendarEnter:function(){this.calendarOver=!0},calendarLeave:function(){this.calendarOver=!1},monthElementClicked:function(n){this.calendarContainer.reveal();this.monthbox.dissolve();this.changeMonth(n.target.get("data-value"));this.monthbox.getElements(".active").removeClass("active");n.target.addClass("active");this.options.showTime&&this.timeWidget&&this.timeWidget.showDisplay()},yearElementClicked:function(n){this.calendarContainer.reveal();this.yearbox.dissolve();this.changeYear(n.target.get("data-value"));this.yearbox.getElements(".active").removeClass("active");n.target.addClass("active");this.options.showTime&&this.timeWidget&&this.timeWidget.showDisplay()},monthSelectorClicked:function(){this.monthbox.reveal();this.options.showTime&&this.timeWidget&&(this.timeWidget.hide(),this.timeWidget.hideDisplay());this.calendarContainer.dissolve()},yearSelectorClicked:function(){this.yearbox.reveal();this.options.showTime&&this.timeWidget&&(this.timeWidget.hide(),this.timeWidget.hideDisplay());this.calendarContainer.dissolve(),function(){var n=this.yearbox.getElement(".active").getPosition(this.yearbox).y;this.yearbox.scrollTo(0,n-5)}.delay(500,this)},nextMonthDown:function(n){n.preventDefault();n.stopPropagation()},lastMonthDown:function(n){n.preventDefault();n.stopPropagation()},getHumanHour:function(n){return n==0?"Midnight":n<12?n+" am":n>12?n-12+" pm":"Midday"},buildCalendar:function(){var t=new Date,n,f,i,r,u,e;if(this.options.showCalendar){for(this.calendarContainer=new Element("div").inject(this.calendarBox),this.lastButton=new Element("span",{html:"&#9668;","class":"ui-calendar-nextlast"}).inject(this.calendarContainer),i=new Element("span",{html:"","class":"ui-calendar-monthyear"}).inject(this.calendarContainer),this.nextButton=new Element("span",{html:"&#9658;","class":"ui-calendar-nextlast"}).inject(this.calendarContainer),this.monthButton=new Element("span",{"class":"ui-calendar-month"}).inject(i),this.yearButton=new Element("span",{"class":"ui-calendar-year"}).inject(i),this.monthbox=new Element("div",{"class":"ui-calendar-monthbox"}).inject(this.calendarBox),this.monthbox.set("reveal",{duration:250}),this.monthbox.toggle(),this.yearbox=new Element("div",{"class":"ui-calendar-yearbox"}).inject(this.calendarBox),this.yearbox.set("reveal",{duration:250}),this.yearbox.toggle(),n=0;n<12;n++)this.monthbox.adopt(new Element("span",{"class":"m"+n+(n===t.getMonth()?" today":""),html:t.clone().set("month",n).format("%b"),"data-value":n}).addEvent(Affinity.events.click,this.monthElementClicked));for(r=t.clone(),n=r.getFullYear()-100;n<r.getFullYear()+50;n++)new Element("span",{"class":"y"+n+(n===t.getFullYear()?" today":""),html:n,"data-value":n}).addEvent(Affinity.events.click,this.yearElementClicked).inject(this.yearbox,"top");for(n=0;n<7;n++)t.set("day",n),new Element("span",{html:t.format("%a"),"class":"ui-calendar-daylabel"}).inject(this.calendarContainer);for(n=0;n<42;n++)f=new Element("span",{"class":"ui-calendar-day"}).adopt(new Element("span")).inject(this.calendarContainer),this.setupClickable(f);this.nextButton.addEvent(Affinity.events.click,this.nextMonth);this.lastButton.addEvent(Affinity.events.click,this.lastMonth);this.monthButton.addEvent(Affinity.events.click,this.monthSelectorClicked);this.yearButton.addEvent(Affinity.events.click,this.yearSelectorClicked);Affinity.mobile||(this.nextButton.addEvent("mousedown",this.nextMonthDown),this.lastButton.addEvent("mousedown",this.lastMonthDown))}this.options.showTime&&(u=150,this.options.showCalendar&&(this.calendarContainer.set("reveal",{duration:250}),u=this.calendarContainer.measure(function(){return this.getSize()}).x-20),e=this.__selectedDate?this.__selectedDate.clone():!1,this.timeWidget=new UITimePickerWidget({target:this.calendarBox,displayInput:this.display,timeonly:this.options.showCalendar?!1:!0,date:e,hoursmins:this.options.hoursmins,dateWidget:this,onTimeSet:function(n){typeOf(n)==="date"&&n.isValid()&&(this.__selectedDate?n.getTime()!==this.__selectedDate.getTime()&&(this.date.setHours(n.getHours()),this.date.setMinutes(n.getMinutes()),this.__selectedDate=this.date.clone(),this.__uiDate=this.date.clone(),this.setCalendarDate()):this.date?n.getTime()!==this.date.getTime()&&(this.date.setHours(n.getHours()),this.date.setMinutes(n.getMinutes()),this.__uiDate=this.date.clone(),this.__selectedDate=this.date.clone(),this.setCalendarDate()):this.options.nullable?this.options.showCalendar||(this.date=n,this.date.setHours(n.getHours()),this.date.setMinutes(n.getMinutes()),this.__uiDate=this.date.clone(),this.__selectedDate=this.date.clone(),this.setCalendarDate()):(this.date=n,this.date.setHours(n.getHours()),this.date.setMinutes(n.getMinutes()),this.__uiDate=this.date.clone(),this.__selectedDate=this.date.clone(),this.setCalendarDate()))}.bind(this),onOpen:function(){this.options.showCalendar&&this.calendarContainer.dissolve()}.bind(this),onDone:function(n){this.options.showCalendar?this.calendarContainer.reveal():this.hide(n,"timeWidget");this.output.fireEvent("change",{target:this.output})}.bind(this),width:u}));this.setupCalendar(this.options.startDate==null?!1:!0)},setupCalendar:function(n){var s=typeOf(n)!=="null"?n:!1,r=new Date;if(this.options.showCalendar){var t=1,f=this.__uiDate.get("month"),e=this.__uiDate.get("year"),u=this.__uiDate.get("lastdayofmonth"),i=this.__uiDate.clone().set("date",1).get("day"),o;this.calendarBox.getElement(".ui-calendar-month").set("html",this.__uiDate.format("%B"));this.calendarBox.getElement(".ui-calendar-year").set("html",this.__uiDate.getFullYear());this.calendarBox.getElements(".ui-calendar-day").removeClass("today").removeClass("selected").removeClass("active");Array.each(this.calendarBox.getElements(".ui-calendar-day"),function(n,s){n.set("class","ui-calendar-day");n.getElement("span").set("html","&nbsp;");s>=i&&s<i+u&&t==r.get("date")&&f==r.get("month")&&e==r.get("year")&&n.addClass("today");s>=i&&s<i+u&&t==this.__uiDate.get("date")&&f==this.__uiDate.get("month")&&e==this.__uiDate.get("year")&&n.addClass("selected");s>=i&&s<i+u&&(o=this.__uiDate.clone().set("date",t).format("%b%d%Y"),n.getElement("span").set("html",t),n.addClass(o),n.addClass("active"),n.store("date",this.__uiDate.clone().set("date",t)),t++)}.bind(this));this.monthbox.getElements(".active").removeClass("active");this.monthbox.getElement(".m"+this.__uiDate.getMonth()).addClass("active");this.yearbox.getElements(".active").removeClass("active");this.yearbox.getElement(".y"+this.__uiDate.getFullYear()).addClass("active")}this.options.showTime&&this.timeWidget.setTime(this.__uiDate);s&&this.setCalendarDate()},setupClickable:function(n){n.addEvent(Affinity.events.click,this.dayClicked)},dayClicked:function(n){var t,i=n.target.hasClass("ui-calendar-day")?n.target:n.target.getParent(".ui-calendar-day"),r;i.hasClass("active")&&(this.calendarBox.getElements(".ui-calendar-day.selected").removeClass("selected"),t=i.retrieve("date"),this.date=t.clone(),this.__uiDate=t.clone(),this.__selectedDate=t.clone(),i.addClass("selected"),r=this.setCalendarDate(),this.fireEvent("dateClicked",this.date),this.options.showTime||this.hide())},nextMonth:function(){var t=this.__uiDate.get("month"),n=t;n=n+1>11?0:n+1;this.changeMonth(n);n===0&&this.changeYear(this.__uiDate.get("year")+1)},lastMonth:function(){var t=this.__uiDate.get("month"),n=t;n=n-1<0?11:n-1;this.changeMonth(n);n===11&&this.changeYear(this.__uiDate.get("year")-1)},changeMonth:function(n){this.doEvent=!1;var r=this.__uiDate.clone().set("date",1).set("month",n),i=r.get("lastdayofmonth"),t=this.__uiDate.get("date");t=t>i?i:t;this.__uiDate.set("date",1).set("month",n).set("date",t);this.setupCalendar();this.setCalendarDate()},changeYear:function(n){this.doEvent=!1;var r=this.__uiDate.clone().set("date",1).set("month",n),i=r.get("lastdayofmonth"),t=this.__uiDate.get("date");t=t>i?i:t;this.__uiDate.set("date",1).set("year",n).set("date",t);this.setupCalendar();this.setCalendarDate()},doEvent:!0,setCalendarDate:function(){var n=!1;return this.__selectedDate&&(this.__selectedDate.format(this.options.outputFormat)!==this.output.value&&(n=!0),this.display.value=this.__selectedDate.format(this.options.displayFormat),this.output.value=this.__selectedDate.format(this.options.outputFormat),this.printField&&this.printField.set("html",this.display.value)),this.doEvent&&(n&&window.fireEvent("formElementChanged",{element:this.output}),this.fireEvent("dateChanged",this.date),window.fireEvent("elementChanged",{element:this.output}),this.output.fireEvent("change",{target:this.output})),this.doEvent=!0,!0},getDate:function(){var n=this.getDateObject();return n?n.format(this.options.outputFormat):!1},getDateObject:function(){if(this.__selectedDate)return this.__selectedDate;if(!this.options.nullable){if(this.date)return this.date;if(this.__uiDate)return this.__uiDate}return!1},getRawDate:function(){if(!this.__selectedDate||this.output.value==="")return!1;var n=Date.parse(this.output.value);return n!==null&&typeOf(n)&&n.isValid()?n:!1},setDate:function(n,t){if(n&&typeOf(n)!=="date")try{n=Date.parse(n)}catch(i){return}n&&typeOf(n)==="date"&&n.isValid()?(typeOf(t)==="boolean"&&t===!1&&(this.doEvent=!1),this.date=n,this.__uiDate=n.clone(),this.__selectedDate=n.clone(),this.setupCalendar(),this.setCalendarDate(),this.doEvent=!0):this.options.nullable?(typeOf(t)==="boolean"&&t===!1&&(this.doEvent=!1),this.__uiDate=new Date,this.date=this.__selectedDate=!1,this.setupCalendar(),this.output.value="",this.display.value="",this.doEvent=!0):(this.date=new Date,this.__uiDate=this.date.clone(),this.__selectedDate=this.date.clone(),this.setupCalendar(),this.setCalendarDate(),this.doEvent=!0)},setToday:function(){this.date=new Date;this.__uiDate=this.date.clone();this.__selectedDate=this.date.clone();this.dontClose=!1;this.setupCalendar(!0)},setNone:function(){this.date=this.__uiDate=new Date;this.__selectedDate=!1;this.output.value="";this.display.value="";this.showDefault=!1;this.dontClose=!1;this.output.fireEvent("change",{target:this.output})},attemptParse:function(n){var i,t,r;if((typeOf(n)==="null"||!n.type||n.type!=="blur"||this.status!=="open"||!this.calendarOver)&&(this.options.showCalendar||!this.options.showTime||!this.timeWidget)){i=this.display.value;t=!1;try{t=Date.parse(i)}catch(n){console.log(n)}t&&typeOf(t)=="date"?t.isValid()?(r=this.__selectedDate?this.__selectedDate.clone():!1,this.date=t,this.__uiDate=t.clone(),this.__selectedDate=t.clone(),typeOf(n)!=="null"?this.setupCalendar(!0):this.setupCalendar(),r&&t.setMilliseconds(0)===this.date.setMilliseconds(0)||(this.setCalendarDate(),this.output.fireEvent("change",{target:this.output}))):(this.__selectedDate=!1,this.display.value="Invalid Date. No date set.",this.output.value="",this.output.fireEvent("change",{target:this.output})):this.options.nullable?(this.output.value="",this.__uiDate=new Date,this.date=this.__selectedDate=!1,this.output.fireEvent("change",{target:this.output})):(this.display.value=this.__selectedDate?this.__selectedDate.format(this.options.displayFormat):this.__uiDate.format(this.options.displayFormat),this.printField&&this.printField.set("html",this.display.value));this.hide(null,"attemptParse "+this.id)}},positionOverride:!1,position:function(){var u=this.positionOverride?this.positionOverride.getPosition():this.display.getPosition(),t=this.positionOverride?this.positionOverride.getSize():this.display.getSize(),n=window.getSize(),o=u.y+t.y+5,r=u.x,i,f,s=this.options.cssPosition,e=this.calendarBox.measure(function(){return this.getSize()});if(Affinity.mobile){this.calendarBox.hasClass("scaled")||(r=0,t=e,n=parent.getSize(),n.x-=40,n.y-=40,i=t.x>t.y?Number(n.x/t.x).round(2):Number(n.y/t.y).round(2),t.y*i>n.y&&(i=Number(n.y/t.y).round(2)),t.x*i>n.x&&(i=Number(n.x/t.x).round(2)),n.x+40>t.x*i&&(r=(n.x+40-t.x*i)/2),f={position:"fixed",top:r,left:r,"-webkit-transform":"scale("+i+")","-webkit-transform-origin":"0 0",transform:"scale("+i+")","transform-origin":"0 0"},this.calendarBox.setStyles(f),this.calendarBox.addClass("scaled"));return}n.y-(u.y-window.getScroll().y)<e.y&&(o=u.y-e.y-5);u.x-window.getScroll().x+e.x>n.x&&(r=n.x-e.x-5);s==="fixed"&&(o-=window.getScroll().y);f={position:s,top:o,left:r};this.calendarBox.setStyles(f);this.delayedRePosition&&clearTimeout(this.delayedRePosition);this.delayedRePosition=setTimeout(function(){this.calendarBox.setStyles(f)}.bind(this),500)},watchOutputChanges:function(){var t=this.output.value,n=Date.parse(t);n&&n.hasOwnProperty("isValid")&&n.isValid()&&n!==this.date&&this.setDate(n,!1)},externalShow:function(n){n.stopPropagation();Affinity.UI.calendars.hideAll(this);Affinity.mobile&&this.display.blur();this.show()},obscure:function(){this.hide();this.showbutton&&this.showbutton.addClass("hidden");this.todaybutton&&this.todaybutton.addClass("hidden");this.clearbutton&&this.clearbutton.addClass("hidden");this.display&&this.display.addClass("hidden")},reveal:function(){this.showbutton&&this.showbutton.removeClass("hidden");this.todaybutton&&this.todaybutton.removeClass("hidden");this.clearbutton&&this.clearbutton.removeClass("hidden");this.display&&this.display.removeClass("hidden")},show:function(){this.options.showInline||(Affinity.UI.calendars.hideAll(this),this.position());this.calendarBox.reveal();this.status="open"},hide:function(){this.options.showInline||this.dontClose||(this.monthbox&&this.monthbox.dissolve(),this.yearbox&&this.yearbox.dissolve(),this.calendarContainer&&this.calendarContainer.reveal(),this.calendarBox&&this.calendarBox.dissolve(),this.status="closed")},destroy:function(){if(clearInterval(this.checkExistsPeriodical),this.showbutton&&this.showbutton.removeEvents(),this.todaybutton&&this.todaybutton.removeEvents(),this.clearbutton&&this.clearbutton.removeEvents(),this.display&&this.display.removeEvents(),document.removeEvent(Affinity.events.click,this.documentClick),this.options.showCalendar&&(this.calendarContainer&&(Array.each(this.calendarContainer.getElements(".ui-calendar-day"),function(n){n.removeEvents();n.destroy()}.bind(this)),this.calendarContainer.set("reveal",null),this.calendarContainer.set("tween",null),this.calendarContainer.removeEvents()),this.monthbox&&(Array.each(this.monthbox.getElements("span"),function(n){n.removeEvents();n.destroy()}.bind(this)),this.monthbox.set("reveal",null),this.monthbox.set("tween",null),this.monthbox.removeEvents()),this.yearbox&&(Array.each(this.yearbox.getElements("span"),function(n){n.removeEvents();n.destroy()}.bind(this)),this.yearbox.set("reveal",null),this.yearbox.set("tween",null),this.yearbox.removeEvents()),this.nextButton&&this.nextButton.removeEvents(),this.lastButton&&this.lastButton.removeEvents(),this.yearButton&&this.yearButton.removeEvents(),this.monthButton&&this.monthButton.removeEvents()),this.options.showTime&&this.timeWidget.destroy(),Affinity.UI.calendars.widgets[this.uuid]&&(Affinity.UI.calendars.widgets[this.uuid]=null,delete Affinity.UI.calendars.widgets[this.uuid]),this.buttons&&(this.buttons.empty(),this.buttons.destroy()),this.display&&this.display.destroy(),this.output&&this.output.destroy(),this.calendarBox&&(this.calendarBox.set("reveal",null),this.calendarBox.set("tween",null),this.calendarBox.removeEvents(),this.calendarBox.empty(),this.calendarBox.destroy()),this.options.target)try{this.options.target.eliminate("widget");this.options.target.destroy()}catch(n){}Object.each(this,function(n,t){this[t]=null;delete this[t]}.bind(this))}}),UIGrid=new Class({Version:"1.0.0.0",File:"ui.grid.js",Implements:[Options],Binds:["processTables","setupTable","zebra"],options:{},tables:{},initialize:function(n){this.setOptions(n);this.processTables();Affinity.UI.Grids={};Affinity.UI.Grids.Zebra=this.zebra},processTables:function(n,t){var i;n==null?Array.each(document.getElements("table.ui-grid"),function(n){i=n.get("id")==""?String.uniqueID():n.get("id");typeOf(this.tables[i])=="null"?(this.tables[i]=n,this.setupTable(n,t)):this.zebra(n,t)}.bind(this)):n.hasClass("ui-grid")&&(i=n.get("id")==""?String.uniqueID():n.get("id"),typeOf(this.tables[i])=="null"?(this.tables[i]=n,this.setupTable(n,t)):this.zebra(n,t));delete i},setupTable:function(n,t){this.zebra(n,t)},zebra:function(n,t){var r="tr",u,i;typeof t!="undefined"&&typeof t=="string"&&(r="tr."+t);u=n==null?document.getElements("table.ui-grid"):[n];i=0;Array.each(u,function(n){i=0;"getElements"in n&&(n.getElements(r).removeClass("odd"),Array.each(n.getElements("tbody "+r),function(n){n.hasClass("hidden")||(n.addClass(i%2==0?"":"odd"),i++)}.bind(this)))}.bind(this));delete i}}),UIHelpBubble=new Class({Version:"1.0.0.0",File:"ui.help.bubble.js",Implements:[Options],Binds:["populate","alignTo","position","hide","show"],options:{fadeTime:100},initialize:function(n){this.setOptions(n);document.getElement(".helpBubble.float")||(this.helpBubble=new Element("div",{"class":"helpBubble right float"}).inject(document.body,"bottom"),this.helpBubble.set("tween",{duration:this.options.fadeTime}),this.helpBubble.fade("hide"))},populate:function(n){this.helpBubble&&(this.helpBubble.empty(),typeOf(n)=="element"&&this.helpBubble.adopt(n),typeOf(n)=="string"&&this.helpBubble.set("html",n),this.addClass("right"),this.setDirection("left"))},alignTo:function(n){var t=n.getPosition(),i=n.getSize();this.position({x:t.x+i.x+5,y:t.y+i.y/2-15})},setDirection:function(n){if(this.helpBubble){n=n.toLowerCase().trim()||"left";var t=["top","left","right","bottom","bottom-right","top-right"];t.contains(n)&&(Array.each(t,function(n){this.helpBubble.removeClass(n)}.bind(this)),this.addClass(n))}},addClass:function(n){this.helpBubble&&this.helpBubble.addClass(n)},position:function(n){this.helpBubble&&this.helpBubble.setStyles({top:n.y,left:n.x})},show:function(n){this.helpBubble&&(n&&n===!0&&(this.helpBubble.addEvent(Affinity.events.outAll,this.hide),this.helpBubble.addEvent(Affinity.events.overAll,this.show)),this.helpBubble.fade("in"))},hide:function(){this.helpBubble&&(this.helpBubble.removeEvents(),this.helpBubble.fade("out"))},getSize:function(){if(this.helpBubble)return this.helpBubble.measure(function(){return this.getSize()})}});Locale.define("en-NZ","Date",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dateOrder:["date","month","year","/"],ordinal:function(n){return n>3&&n<21?"th":["th","st","nd","rd","th"][Math.min(n%10,4)]},AM:"am",PM:"pm"});Locale.use("en-NZ");window.components=[["UIHelpBubble","helpbubble"],["UIGrid"],["UISortableGrid"],["UIDynamicGrid"],["UIScrollableGrid"],["UITabs"],["UIInbox"],["UIHidables"],["UIFormHideables","formhideables"],["UISectionHideables","sectionHidables"],["UIHideToggle","hidetoggle"],["UIUplaoders"],["UIUplaodersMulti","uploaders"],["UIReplaceArrows","arrows"],["UIValidation"],["UISanitise"],["UIDateDropDowns"],["UISelectLookup","lookups"],["UIDisplayLookup","displaylookups"],["UIDateCalendar"],["UIListBuilder"],["UIDateCleverInput"],["UIAutoComplete"],["UIQuickSearch"],["UIModal","modal"],["UIDrawPanels"],["UITooltips","tooltips"],["UIHelpIcon","helpicon"],["UIPompts","prompts"],["UIFormatDate"],["UIBankNumber","banknumber"],["UITaxNumber","taxnumber"],["UIMasterMessage","masterMessage"],["UIAddress","address"],["UIPager"],["UITextareaAutoSize","textAutoSize"]];mybasepath=window.basepath||"";window.addEvent("PageReady",function(){var t,r,i,n,u;if("Affinity"in window||(window.Affinity={}),!Affinity.uiready){for(r=0;r<window.components.length;r++)if(t=window.components[r],typeof window[t[0]]!="undefined"&&typeOf(window[t[0]])==="class")if(n=t[0].replace("UI","ui"),n in Affinity)console.log('name collision in Affinity for "'+n+'"');else if(Affinity[n]=new window[t[0]],Affinity.Components[n]={},Affinity.Components[n].Version=Affinity[n].Version||"",Affinity.Components[n].Name=Affinity[n].Name||t[0].replace(new RegExp("UI","gi"),"").split(/(?=[A-Z])/).join(" "),Affinity.Components[n].File=Affinity[n].File||"",Affinity.Components[n].Jira=Affinity[n].Jira||"",t.length>1)for(u=1;u<t.length;u++)i=t[u],i in Affinity?console.log('name collision in Affinity for "'+i+'"'):Affinity[i]=Affinity[n];n=null;i=null;t=null;Affinity.useWebWorkers=Affinity.isie&&Affinity.ieversion<=11?!1:Affinity.useWebWorkers;Affinity.uiready=!0;window.fireEvent("UiReady")}});var UILogin=new Class({Version:"1.0.1.2",Notes:"Feature branch for Timesheets Mileage",File:"ui.login.js",Notes:"API structure change",Implements:[Options,Events],Binds:["cont","show","hide","getAdminDates","getUser","check","login","logout","logged","setSession","clearSession","htmlTemplateLoadError","htmlTemplateLoadSuccess","requestSessionFailed","requestSessionFailedException","requestSessionFailedTimeout","getUserInformation"],options:{title:!1,auto:!0,showCancel:!1,target:null,targetbg:null,logoutButton:null,htmlTemplateUrl:null,underlay:!1},publicHolidays:[],user:{},access:{},keepSession:!1,rememberMe:!1,logstatus:"loggedout",profile_stub:{employeeNumber:null,firstName:null,lastName:null,commonName:null,currentPayPeriodBegins:null,currentPaydate:null,previousPaydate:null,nextPaydate:null,newestTimesheetDate:null,oldestTimesheetDate:null,showTimesheetFrom:null,startDayOfTheWeek:null,publicHolidays:[],admin:!1},area_stub:{IsManager:!1,IsEmployee:!1,DefaultView:!1,WeeklyDays:!1},area_timesheets_stub:{IsManager:!1,IsEmployee:!1,ShowPeriodView:!1,ShowWeeklyView:!1,ShowDetailView:!1,ShowOverviewView:!1,ShowDualDetailView:!1,ShowBulkView:!1,ShowMileageView:!1,ReadonlyWeeklyView:!1,ReadonlyDetailView:!1,ReadonlyDualdetailView:!1,DefaultView:!1,WeeklyDays:!1,AddUnit:!1,EnableFavourite:!1},hoiday_stub:{DateTime:null,Description:""},screenFilter_stub:{FieldName:"",ModelName:"",Label:""},initialize:function(n){this.setOptions(n);!1 in window&&(window.Affinity={});Affinity.login={};Affinity.login.companyNumber=!1;Affinity.login.profile={};Affinity.login.userProfiles={};Affinity.login.areas={};Affinity.login.controller=this;window.addEvent("unauthorized",function(){this.logout({redirectToGateway:!0})}.bind(this));window.addEvent("logoutViaTab",function(){this.logout()}.bind(this));window.addEvent("logout",function(){this.getDomainName(window.location.host).indexOf("localhost")>-1?this.logout():this.logout({redirectToGateway:!0})}.bind(this));this.options.htmlTemplateUrl!==null?new Request.HTML({url:mybasepath+this.options.htmlTemplateUrl,evalScripts:!1,onFailure:this.htmlTemplateLoadError,onError:this.htmlTemplateLoadError,onSuccess:this.htmlTemplateLoadSuccess}).get():this.setup()},htmlTemplateLoadSuccess:function(n){Array.each(n,function(n){n.inject(document.body,"bottom")});this.options.title&&document.getElement(".login-underlay-header .heading").set("html",this.options.title);this.options.target=document.id("login-box");this.options.targetbg=document.id("login-box-bg");this.options.underlay?(this.options.targetbg=document.id("login-underlay"),document.id("login-box-bg")&&document.id("login-box-bg").destroy()):(this.options.targetbg=document.id("login-box-bg"),document.id("login-underlay")&&document.id("login-underlay").destroy());Affinity.mobile||this.options.target.removeClass("invisible");this.options.target.getElement(".font-icons").set("html",Affinity.icons.Key);this.setup()},htmlTemplateLoadError:function(){Affinity.prompts.hide();this.fireEvent("error",'"'+mybasepath+this.options.htmlTemplateUrl+'" must exist in your project.')},setup:function(){var t,n,i;if(this.user.firstName="",this.user.lastname="",this.user.displayname="",this.user.employeeNumber="",this.user.companyNumber="",this.options.underlay?this.options.targetbg.addClass("hidden"):(this.options.targetbg.set("tween",{duration:250}),this.options.targetbg.fade("hide")),this.options.target.set("tween",{duration:250}),this.options.target.fade("hide"),this.options.showCancel&&(this.options.target.getElement(".button.grey").removeClass("hidden"),this.options.target.getElement(".button.grey").addEvent(Affinity.events.click,this.cancel.bind(this))),this.userInput=this.options.target.getElement("input#username"),this.passInput=this.options.target.getElement("input#password"),this.rememberMeInput=this.options.target.getElement("input#rememberme"),this.keepSeesionInput=this.options.target.getElement("input#keeplogged"),this.errormesg=this.options.target.getElement(".errormsg"),this.username="",this.button=this.options.target.getElement(".button.green"),this.loader=new Element("img",{src:Affinity.loaders.light}).inject(this.button,"after"),this.loader.addClass("hidden"),this.button.addEvent(Affinity.events.click,this.processlogin.bind(this)),this.options.logoutButton!=null&&this.options.logoutButton.addEvent(Affinity.events.click,this.logout.bind(this)),window.addEvent("keyup",function(n){n.key=="enter"&&this.status=="open"&&this.processlogin()}.bind(this)),t="",t=Affinity.apiversion>1?Affinity.GetCacheSafePath(Affinity.authroot):Affinity.GetCacheSafePath(Affinity.zelosroot+"?api=Authentication/Get"),this.requestSession=new Request.JSON({url:t,method:"get",timeout:6e4,onSuccess:this.setSession,onError:this.requestSessionFailed,onFailure:this.requestSessionFailed,onException:this.requestSessionFailedException,onTimeout:this.requestSessionFailedTimeout}),Affinity.mobile&&("onorientationchange"in window?window.addEvent("orientationchange",function(){(this.status="open")&&this.position()}.bind(this)):window.addEvent("resize",function(){(this.status="open")&&this.position()}.bind(this))),this.fireEvent("ready"),n=new URI(window.location.href),typeOf(n.parsed.query)!=="null"&&(i=n.parsed.query.parseQueryString(),typeOf(i.sessionKey)!=="null")){this.checkSessionKey(i.sessionKey);delete n;return}this.options.auto&&this.check()},getUserRequest:null,getUser:function(n){if(log("&#x2794; attempting getUser profile ("+n+") ..."),Affinity.login.userProfiles.hasOwnProperty(n))return window.fireEvent("gotUser",Affinity.login.userProfiles[n]),log("&#x2714; attempted getUser profile ("+n+") succeeded - already exists in local",{color:"green"}),Affinity.login.userProfiles[n];if(typeOf(n)!=="string"||typeOf(n)==="string"&&n.trim()==="")return window.fireEvent("gotUser",!1),!1;this.getUserRequest&&"isRunning"in this.getUserRequest&&this.getUserRequest.isRunning()&&this.getUserRequest.cancel();var t=Affinity.GetCacheSafePath(Affinity.authroot+"/GetEmployeeProfile?EmployeeNo="+n);this.getUserRequest=new Request.JSON({url:t,onRequest:function(){log("&#x2794; attempting getUser profile request ("+n+") ...",{color:"blue"})},onSuccess:function(t){if(JSON.Unauthorized(t,"login getUser profile ("+n+")")){log("&#x2714; attempted getUser profile ("+n+") failed - unauthorized",{color:"red"});window.fireEvent("gotUser",!1);return}if(t.hasOwnProperty("error")&&typeOf(t.error)!=="null"){if(typeOf(t.error)==="object"){log("&#x2714; attempted getUser profile ("+n+") failed with errors - "+JSON.stringify(t.error),{color:"red"});window.fireEvent("gotUser",!1);return}log("&#x2714; attempted getUser profile ("+n+") failed with errors - "+t.error.split("\r\n").join(", "),{color:"red"});window.fireEvent("gotUser",!1);return}log("&#x2714; attempted getUser profile ("+n+") succeeded from zelos",{color:"green","font-weight":"bold"});var i=Object.clone(this.profile_stub);i.firstName=t.FirstName;i.lastName=t.LastName;i.commonName=t.CommonName;i.employeeNumber=t.EmployeeNumber;i.companyNumber=Affinity.login.profile.companyNumber;i.payPoints=typeOf(t.PayPoints)!=="null"?t.PayPoints:!1;i.employeeGroups=typeOf(t.EmployeeGroups)!=="null"?t.EmployeeGroups:[];i.screenFilters=typeOf(t.ScreenFilters)!=="null"?t.ScreenFilters:[];i.publicHolidays=typeOf(t.PublicHolidays)!=="null"?t.PublicHolidays:[];i.currentPayPeriodBegins=typeOf(t.CurrentPayPeriodBegins)!=="null"?Date.parse(t.CurrentPayPeriodBegins):!1;i.currentPaydate=typeOf(t.CurrentPaydate)!=="null"?Date.parse(t.CurrentPaydate):!1;i.previousPaydate=typeOf(t.PreviousPaydate)!=="null"?Date.parse(t.PreviousPaydate):!1;i.nextPaydate=typeOf(t.NextPaydate)!=="null"?Date.parse(t.NextPaydate):!1;i.oldestTimesheetDate=typeOf(t.OldestTimesheetDate)!=="null"?Date.parse(t.OldestTimesheetDate):!1;i.newestTimesheetDate=typeOf(t.NewestTimesheetDate)!=="null"?Date.parse(t.NewestTimesheetDate):!1;i.startDayOfTheWeek=typeOf(t.StartDayOfTheWeek)!=="null"?parseInt(t.StartDayOfTheWeek):0;i.rowsPerPage=typeOf(t.RowsPerPage)!=="null"?parseInt(t.RowsPerPage):20;t.EmployeeNumber>5e6&&(i=this.getAdminDates(i));Affinity.login.userProfiles[i.employeeNumber]=Object.clone(i);window.fireEvent("gotUser",i)},onError:function(t){log("&#x2714; attempted getUser profile ("+n+") failed with errors - "+t,{color:"red"});window.fireEvent("gotUser",!1)},onException:function(t,i){log("&#x2714; attempted getUser profile ("+n+") failed with errors - "+t+": "+i,{color:"red"})}.bind(this),onFailure:function(t){var i="",r;switch(t.status){case 401:i="unauthorized.";break;case 404:i="path not found.";break;case 500:try{r=JSON.decode(t.responseText)}catch(u){r=!1;i=t.responseText}r&&(i=r.error?r.error:t.responseText);delete r;break;default:i=t.statusText}i.contains(401)||i.toLowerCase().contains("unauthorized")?log("&#x2714; attempted getUser profile ("+n+") failed - unauthorized",{color:"red"}):log("&#x2714; attempted getUser profile ("+n+") failed with errors - "+i,{color:"red"});window.fireEvent("gotUser",!1)},onTimeout:function(){log("&#x2714; attempted getUser profile ("+n+") timeout",{color:"red"});window.fireEvent("gotUser",!1)}}).get()},checkRequest:!1,check:function(){var r,t,n,i,u;if(Affinity.apiversion>1)r=Affinity.GetCacheSafePath(Affinity.authroot+"/GetUser"),this.checkRequest=new Request.JSON({url:r,onSuccess:function(n){if(typeof n=="object"&&"success"in n&&!n.success){var t="error"in n&&typeof u=="string"?n.error:"unknown error";console.debug("GetUser Failed: ");console.debug(n);log("** login check failed - "+t+" **");this.logout()}else log("** login check succeeded **"),console.debug("GetUser Succeeded"),this.setSession(n)}.bind(this),onFailure:function(n){console.debug("GetUser Failed");console.debug(n)}.bind(this),onException:function(n,t){console.debug("GetUser Exceptioned");console.debug(n+t)}.bind(this),onTimeout:function(){console.debug("GetUser Timmed out")}}).get();else{if(t=Affinity.appname+"Session",n=Affinity.CookieMonster.Read(t),Affinity.session=!1,typeOf(n)==="string"&&typeOf(n)!==""&&typeOf(n)!=="undefined"&&(Affinity.session=n),i=t+": "+Affinity.seesion,Affinity.session||(typeOf(n)==="boolean"?i="no session key - cookie "+t+" is false":typeOf(n)==="string"&&n===""?i="no session key - cookie "+t+" is empty":typeOf(n)==="string"&&n==="undefined"?i="no session key - cookie "+t+" is undefined":typeOf(n)==="null"&&(i="no session key - cookie "+t+" is null or undefined")),log("** check login status ("+i+") **"),!Affinity.session){log("** login check failed **");this.clearSession();this.logout({});this.login();return}if(u="",this.user=!1,Affinity.CookieMonster.Read(Affinity.appname+"User")&&(user=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"User")),typeOf(user.firstName)==="null"&&typeOf(user.lastname)==="null"||user.firstName==="null"&&user.lastname==="null"||(user.firstName+"").trim()+(user.lastname+"").trim()+(user.displayName+"").trim()==""||user.employeeNumber===""||typeOf(user.employeeNumber)==="null"||user.employeeNumber=="null"||user.companyNumber===""||typeOf(user.companyNumber)==="null"||user.companyNumber=="null"||(this.user=user,window.fireEvent("userComplete",user))),!this.user){log("** login check failed - minimum data requirement not met **");this.clearSession();this.logout({message:"Minimum login details are not set."});this.button.removeClass("hidden");this.loader.addClass("hidden");this.login();return}log("** login check succeeded **");this.companyNumber=Affinity.CookieMonster.Read(Affinity.appname+"CompanyNumber");this.keepSession=Affinity.CookieMonster.Read(Affinity.appname+"KeepSession")==="false"?!1:!0;this.rememberMe=Affinity.CookieMonster.Read(Affinity.appname+"RememberMe")==="false"?!1:Affinity.CookieMonster.Read(Affinity.appname+"RememberMe");this.rememberMe!==null&&this.rememberMe!==!1?(this.username=this.rememberMe,this.rememberMe=!0):(this.username="",this.rememberMe=!1);this.keepSession=this.keepSession!==null&&this.keepSession!==!1?!0:!1;Affinity.session?(Affinity.CookieMonster.Read(Affinity.appname+"Areas")&&(this.areas=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"Areas"))),Affinity.CookieMonster.Read(Affinity.appname+"PayPoints")&&(this.payPoints=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"PayPoints"))),Affinity.CookieMonster.Read(Affinity.appname+"EmployeeGroups")&&(this.employeeGroups=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"EmployeeGroups"))),Affinity.CookieMonster.Read(Affinity.appname+"ScreenFilters")&&(this.screenFilters=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"ScreenFilters"))),Affinity.CookieMonster.Read(Affinity.appname+"PublicHolidays")&&(this.publicHolidays=JSON.decode(Affinity.CookieMonster.Read(Affinity.appname+"PublicHolidays"))),this.logged()):this.logout()}},getAdminDates:function(n){var i=(new Date).clearTime(),r="-7",u="+7",f="-6",e="+1",t,o,s,h;return n.admin=!0,"Affinity"in window&&typeOf(Affinity)==="object"&&"AdminPayPeriodBegins"in Affinity&&Affinity.AdminPayPeriodBegins&&(r=Affinity.AdminPayPeriodBegins,u=Affinity.AdminPayPeriodEnds,f=Affinity.AdminOldestTimesheet,e=Affinity.AdminNewestTimesheet),t=parseInt(r.replace("-","")),r.contains("+")?n.currentPayPeriodBegins=i.clone().increment("day",t):r.contains("-")&&(n.currentPayPeriodBegins=i.clone().decrement("day",t)),t=parseInt(u.replace("-","")),u.contains("+")?n.currentPayPeriodEnds=i.clone().increment("day",t):u.contains("-")&&(n.currentPayPeriodEnds=i.clone().decrement("day",t)),t=parseInt(f.replace("-","")),f.contains("+")?n.oldestTimesheetDate=i.clone().increment("month",t):f.contains("-")&&(n.oldestTimesheetDate=i.clone().decrement("month",t)),t=parseInt(e.replace("-","")),e.contains("+")?n.newestTimesheetDate=i.clone().increment("month",t):e.contains("-")&&(n.newestTimesheetDate=i.clone().decrement("month",t)),o=i.clone().decrement("month",1),s=i.clone(),h=i.clone().increment("month",1),n.currentPaydate=s.set("date",s.get("lastdayofmonth")),n.previousPaydate=o.set("date",o.get("lastdayofmonth")),n.nextPaydate=h.set("date",h.get("lastdayofmonth")),n},setSession:function(n){var f,i,t,u,r;if(typeOf(n)==="object"&&"success"in n&&!n.success){this.clearSession();this.logout({message:"Invalid username or password."+("error"in n?"<!--"+n.error+"-->":"")});return}if("isEss"in n&&typeOf(n.isEss)==="boolean"&&n.isEss===!0&&(Affinity.oldess=!0,Affinity.oldessLaunched=!0,Affinity.oldessFrame=!1,Affinity.oldessWindow=window.opener),(typeOf(n.Commonname)==="null"||n.Commonname==="")&&(n.Commonname=(n.Firstname+" "+n.Lastname).replace("  "," ").trim()),f=!1,Affinity.session=!1,Affinity.apiversion<2&&(Affinity.session=!1,typeOf(n.SessionKey)==="string"&&typeOf(n.SessionKey)!==""&&typeOf(n.SessionKey)!=="undefined"?Affinity.session=n.SessionKey:f=!0),i="",f&&(i+="No session key (required for old API method)\r\n"),(typeOf(n.Firstname)==="null"||typeOf(n.Firstname)==="string"&&n.Firstname.trim()==="")&&(i+="No first name\r\n"),(typeOf(n.Lastname)==="null"||typeOf(n.Lastname)==="string"&&n.Lastname.trim()==="")&&(i+="No last name\r\n"),(typeOf(n.EmployeeNumber)==="null"||typeOf(n.EmployeeNumber)==="string"&&n.EmployeeNumber.trim()==="")&&(i+="No employee number\r\n"),(typeOf(n.CompanyNumber)==="null"||typeOf(n.CompanyNumber)==="string"&&n.CompanyNumber.trim()==="")&&(i+="No company number\r\n"),i!==""){log("&#x2718; attempted login succeeded with errors - Minimum login details are not set");this.clearSession();this.logout({message:"Minimum login details are not set.<!--\r\n"+i+"\r\n-->"});return}if(log("&#x2714; attempted login succeeded"),this.button.removeClass("hidden"),this.loader.addClass("hidden"),this.employeeNumber=n.EmployeeNumber,this.companyNumber=n.CompanyNumber,this.values={},Object.each(n,function(n,t){(typeOf(n)==="string"||typeOf(n)==="number")&&(this.values[t]=n);this[t]=n}.bind(this)),typeOf(this.values.ShowTimesheetFrom)==="null"&&(this.values.ShowTimesheetFrom=Date.parse(new Date).decrement("day",14),this.ShowTimesheetFrom=this.values.ShowTimesheetFrom),typeOf(this.values.NewestTimesheetDate)==="null"&&typeOf(this.values.ShowTimesheetFrom)!=="null"&&(typeOf(this.values.ShowTimesheetFrom)==="string"?this.values.NewestTimesheetDate=Date.parse(this.values.ShowTimesheetFrom).increment("month",1):typeOf(this.values.ShowTimesheetFrom)==="date"&&(this.values.NewestTimesheetDate=this.values.ShowTimesheetFrom.clone().increment("month",1)),this.NewestTimesheetDate=this.values.NewestTimesheetDate),this.areas=this.Areas,this.payPoints=n.PayPoints,this.employeeGroups=n.EmployeeGroups,this.screenFilters=n.ScreenFilters,n.PublicHolidays&&(this.publicHolidays=n.PublicHolidays),this.user={},this.user.firstName=this.values.Firstname,this.user.lastname=this.values.Lastname,this.user.displayName=this.values.Commonname,this.user.employeeNumber=this.employeeNumber,this.user.companyNumber=this.companyNumber,t=Object.clone(this.profile_stub),t.firstName=n.Firstname,t.lastName=n.Lastname,t.commonName=n.Commonname,t.employeeNumber=n.EmployeeNumber,t.companyNumber=n.CompanyNumber,t.payPoints=typeOf(n.PayPoints)!=="null"?n.PayPoints:!1,t.employeeGroups=typeOf(n.EmployeeGroups)!=="null"?n.EmployeeGroups:[],t.screenFilters=typeOf(n.ScreenFilters)!=="null"?n.ScreenFilters:[],t.publicHolidays=typeOf(n.PublicHolidays)!=="null"?n.PublicHolidays:[],t.currentPayPeriodBegins=typeOf(n.CurrentPayPeriodBegins)!=="null"?Date.parse(n.CurrentPayPeriodBegins):!1,t.currentPaydate=typeOf(n.CurrentPaydate)!=="null"?Date.parse(n.CurrentPaydate):!1,t.previousPaydate=typeOf(n.PreviousPaydate)!=="null"?Date.parse(n.PreviousPaydate):!1,t.nextPaydate=typeOf(n.NextPaydate)!=="null"?Date.parse(n.NextPaydate):!1,t.oldestTimesheetDate=typeOf(n.OldestTimesheetDate)!=="null"?Date.parse(n.OldestTimesheetDate):!1,t.newestTimesheetDate=typeOf(n.NewestTimesheetDate)!=="null"?Date.parse(n.NewestTimesheetDate):!1,t.startDayOfTheWeek=typeOf(n.StartDayOfTheWeek)!=="null"?parseInt(n.StartDayOfTheWeek):0,t.rowsPerPage=typeOf(n.RowsPerPage)!=="null"?parseInt(n.RowsPerPage):20,n.EmployeeNumber>5e6&&(t=this.getAdminDates(t)),Affinity.login.profile=Object.clone(t),Affinity.login.hasOwnProperty("userProfiles")||(Affinity.login.userProfiles={}),Affinity.login.userProfiles[t.employeeNumber]=Object.clone(t),Affinity.login.areas={},"Areas"in n&&typeOf(n.Areas)==="object"&&Object.each(n.Areas,function(n,t){Affinity.login.areas[t]={};u={};u=t==="Timesheet"?Object.clone(this.area_timesheets_stub):Object.clone(this.area_stub);Object.each(u,function(i,r){r in n&&(Affinity.login.areas[t][r]=n[r])}.bind(this))}.bind(this)),this.companyNumber=this.CompanyNumber,this.employeeNumber=this.EmployeeNumber,this.errormesg.addClass("hidden"),this.keepSeesionInput.checked?(Affinity.CookieMonster.Write(Affinity.appname+"KeepSession",!0),this.keepSession=!0):(Affinity.CookieMonster.Write(Affinity.appname+"KeepSession",!1),this.keepSession=!1),this.rememberMeInput.checked?(Affinity.CookieMonster.Write(Affinity.appname+"RememberMe",this.userInput.value),this.rememberMe=!0,this.username=this.userInput.value):(Affinity.CookieMonster.Write(Affinity.appname+"RememberMe",!1),this.rememberMe=!1,this.username=""),!(Affinity.apiversion>1)&&(Affinity.CookieMonster.Write(Affinity.appname+"Values",JSON.stringify(this.values)),Affinity.CookieMonster.Write(Affinity.appname+"Values",JSON.stringify(this.values)),Affinity.CookieMonster.Write(Affinity.appname+"Areas",JSON.stringify(this.areas)),Affinity.CookieMonster.Write(Affinity.appname+"PayPoints",JSON.stringify(this.payPoints)),Affinity.CookieMonster.Write(Affinity.appname+"EmployeeGroups",JSON.stringify(this.employeeGroups)),Affinity.CookieMonster.Write(Affinity.appname+"ScreenFilters",JSON.stringify(this.screenFilters)),n.PublicHolidays&&Affinity.CookieMonster.Write(Affinity.appname+"PublicHolidays",JSON.stringify(this.publicHolidays)),Affinity.CookieMonster.Write(Affinity.appname+"User",JSON.stringify(this.user)),Affinity.CookieMonster.Write(Affinity.appname+"CompanyNumber",this.companyNumber,720),Affinity.CookieMonster.Write(Affinity.appname+"EmployeeNumber",this.employeeNumber,720),this.keepSession?Affinity.CookieMonster.Write(Affinity.appname+"Session",Affinity.session):Affinity.CookieMonster.Write(Affinity.appname+"Session",Affinity.session,720),typeOf(n.success)!=="null"&&!n.success||typeOf(n.Error)!=="null"||typeOf(n.error)!=="null")){r=!1;this.errormesg.set("html","We could not log you in");this.errormesg.addClass("hidden");typeOf(n.error)!=="null"&&n.error!==""?r=this.sanatiseError(n.error):typeOf(n.Error)!=="null"&&n.Error!==""&&(r=this.sanatiseError(n.error));r&&(this.errormesg.set("html",r),this.errormesg.removeClass("hidden"));log("&#x2718; attempted login succeeded with errors - "+r);this.button.removeClass("hidden");this.loader.addClass("hidden");this.clearSession();this.show();this.requestSessionFailed();return}this.logstatus==="loggedout"&&(this.logstatus="loggedin",window.fireEvent("userComplete",Affinity.login.profile),this.logged())},clearSession:function(n){if(Affinity.apiversion>1||(Affinity.CookieMonster.Delete(Affinity.appname+"User"),Affinity.CookieMonster.Delete(Affinity.appname+"Areas"),Affinity.CookieMonster.Delete(Affinity.appname+"PayPoints"),Affinity.CookieMonster.Delete(Affinity.appname+"PublicHolidays"),Affinity.CookieMonster.Delete(Affinity.appname+"EmployeeGroups"),Affinity.CookieMonster.Delete(Affinity.appname+"ScreenFilters"),Affinity.CookieMonster.Delete(Affinity.appname+"Values"),Affinity.CookieMonster.Delete(Affinity.appname+"CompanyNumber"),Affinity.CookieMonster.Delete(Affinity.appname+"EmployeeNumber"),Affinity.CookieMonster.Delete(Affinity.appname+"Session"),Affinity.session=!1),typeOf(this.values)==="object"&&Object.each(this.values,function(n,t){this[t]=null;delete this[t]}.bind(this)),this.values={},this.user.firstName="",this.user.lastname="",this.user.displayname="",this.user.employeeNumber="",this.user.companyNumber="",this.user={},this.areas={Timesheet:{},Employee:{}},this.payPoints=[],this.employeeGroups=[],this.screenFilters=[],this.companyNumber=null,this.employeeNumber=null,this.publicHolidays=[],typeOf(n)!=="null"&&typeOf(n.redirectToGateway)!==undefined&&n.redirectToGateway){var t=this.getDomainName(window.location.host),i="https://www."+t+"/#/Login?redirectUrl=https://dashboard."+t+"/Leave",r=document.querySelector(".dashboard#app");r==null&&(i="https://www."+t+"/#/");window.location.href=i;return}this.show();this.logstatus="loggedout";window.scrollTo(0,0);window.fireEvent("loggedout")},requestSessionFailed:function(n){typeOf(n)!=="null"&&(n.statusText?log("&#x2718; attempted login failed - "+n.statustext):log("&#x2718; attempted login failed with errors - "+JSON.stringify(n)));this.errormesg.removeClass("hidden");this.button.removeClass("hidden");this.loader.addClass("hidden")},requestSessionFailedException:function(){log("&#x2718; attempted login failed with exception(s)");this.errormesg.set("html","There was an exception. Please try again.");this.errormesg.removeClass("hidden");this.requestSessionFailed()},requestSessionFailedTimeout:function(){log("&#x2718; attempted login timed out");this.errormesg.set("html","Attempt timed out. Please check your connection and try again.");this.errormesg.removeClass("hidden");this.requestSessionFailed()},checkSessionKeyRequest:!1,checkSessionKey:function(n){var t,i;Affinity.apiversion>1?(t=Affinity.GetCacheSafePath(Affinity.authroot+"/CheckSession"),this.checkSessionKeyRequest=new Request.JSON({url:t,onSuccess:this.setSession,onError:this.show,onFailure:this.show}),this.checkSessionKeyRequest.setHeader("sessionkey",n),this.checkSessionKeyRequest.get()):(t=Affinity.GetCacheSafePath(Affinity.zelosroot+"?api=Authentication/Get"),log("&#x2794; attempting login ..."),i=new Request.JSON({url:t,method:"get",onSuccess:this.setSession,onError:this.show,onFailure:this.show}),i.setHeader("sessionkey",n),i.get(),delete url)},logged:function(){Affinity.apiversion>1?window.fireEvent("loggedin",!0):window.fireEvent("loggedin",Affinity.session);this.hide()},login:function(){this.show()},processlogin:function(){this.button.addClass("hidden");this.loader.removeClass("hidden");log("&#x2794; attempting login ...");var n="";n=Affinity.apiversion>1?Affinity.GetCacheSafePath(Affinity.authroot):Affinity.GetCacheSafePath(Affinity.zelosroot+"?api=Authentication/Get");this.requestSession.url=this.requestSession.options.url=n;this.requestSession.setHeader("username",this.userInput.value);this.requestSession.setHeader("password",this.passInput.value);this.requestSession.get()},logout:function(n){var r,t,i;if(log("** log out **"),clearTimeout(this.hiddenTimer),this.clearSession(n),this.button.removeClass("hidden"),this.loader.addClass("hidden"),this.logstatus="loggingout...",typeOf(n)!=="null"){if(typeOf(n.closewindow)!=="null"&&n.closewindow){window.close();return}typeOf(n.message)==="string"&&(log("** log out message: \r\n"+n.message.replace("<!--","").replace("-->","")+"\r\n"),this.errormesg.set("html",n.message),this.errormesg.removeClass("hidden"))}Affinity.apiversion>1?(t=Affinity.GetCacheSafePath(Affinity.authroot+"/Logout"),r=new Request.JSON({url:t,method:"get",onRequest:function(){log("&#x2794; attempting logout ...",{color:"blue"})},onSuccess:function(){log("&#x2714; attempted logout succeeded from zelos",{color:"green"})},onError:function(n){log("&#x2714; attempted logout failed with errors - "+n,{color:"red"})},onException:function(n,t){log("&#x2714; attempted logout failed with errors - "+n+": "+t,{color:"red"})}.bind(this),onFailure:function(n){var t="",i;switch(n.status){case 401:t="unauthorized.";break;case 404:t="path not found.";break;case 500:try{i=JSON.decode(n.responseText)}catch(r){i=!1;t=n.responseText}i&&(t=i.error?i.error:n.responseText);delete i;break;default:t=n.statusText}t.contains(401)||t.toLowerCase().contains("unauthorized")?log("&#x2714; attempted logout failed - unauthorized",{color:"red"}):log("&#x2714; attempted logout failed with errors - "+t,{color:"red"})},onTimeout:function(){log("&#x2714; attempted logout timeout",{color:"red"})}}).get(),t=null):(i=Affinity.session+"",i&&i!==""&&(t=Affinity.GetCacheSafePath(Affinity.zelosroot+"?api=Authentication/Logout")),typeOf(t)!=="null"&&(r=new Request.JSON({url:t,method:"get"}),r.setHeader("sessionkey",i),r.get(),t=i=null));n!=null&&typeOf(n.redirectToGateway)!="undefined"&&n.redirectToGateway||this.show(),function(){this.clearSession(n)}.delay(250,this)},sanatiseError:function(n){return typeOf(n)!=="null"&&n.toLowerCase().contains("failed to authenticate")?"Your Username or Password were incorrect":typeOf(n)==="null"?"We could not log you in":n.contains(" - ")?n.substring(n.indexOf(" - ")+3):n},getDomainName:function(n){return n.substring(n.lastIndexOf(".",n.lastIndexOf(".")-1)+1)},position:function(){var n=this.options.target.measure(function(){return this.getSize()});if(Affinity.mobile){if(!this.options.target.hasClass("scaled")){var i,r,u=0,n=this.options.target.measure(function(){return this.getSize()}),t=window.getSize();t.x-=40;t.y-=40;i=n.x>n.y?Number(t.x/n.x).round(2):Number(t.y/n.y).round(2);n.y*i>t.y&&(i=Number(t.y/n.y).round(2));t.x+40>n.x*i&&(u=(t.x+40-n.x*i)/2);r={left:u,"-webkit-transform":"scale("+i+")","-webkit-transform-origin":"0 0",transform:"scale("+i+")","transform-origin":"0 0"};this.options.target.setStyles(r);this.options.target.removeClass("invisible");this.options.target.addClass("scaled")}}else this.options.target.setStyles({"margin-top":0-(n.y/2+40)});delete n},hiddenTimer:null,setAsHidden:function(){this.options.target.addClass("hidden");this.options.targetbg.addClass("hidden")},set:function(n){if(n.username&&(this.userInput.value=n.username),n.password&&(this.passInput.value=n.password),n.zelosServer||n.zelosroot){n.zelosServer&&(Affinity.zelosroot=n.zelosServer);n.zelosroot&&(Affinity.zelosroot=n.zelosroot);n.apiroot&&(Affinity.zelosroot=n.apiroot);var t="";t=Affinity.apiversion>1?Affinity.GetCacheSafePath(Affinity.zelosroot):Affinity.GetCacheSafePath(Affinity.zelosroot+"?api=Authentication/Get");this.requestSession.options.url=this.requestSession.url=t}},show:function(){this.status="open";this.userInput.value="";this.passInput.value="";this.rememberMeInput.checked=!1;this.keepSeesionInput.checked=!1;this.rememberMe&&(this.rememberMeInput.checked="checked",this.userInput.value=this.username);this.keepSession&&(this.keepSeesionInput.checked="checked");clearTimeout(this.hiddenTimer);this.options.target.removeClass("hidden");this.options.targetbg.removeClass("hidden");this.options.target.fade("in");this.options.underlay||this.options.targetbg.fade("in");this.position()},hide:function(){this.status="closed";clearTimeout(this.hiddenTimer);this.options.underlay?this.options.targetbg.addClass("hidden"):this.options.targetbg.fade("out");this.options.target.fade("out");this.hiddenTimer=this.setAsHidden.delay(260,this)},cancel:function(){this.requestSession&&this.requestSession.isRunning()&&this.requestSession.cancel();this.hide()}}),UIModal=new Class({Version:"1.0.0.0",File:"ui.modal.js",Implements:[Options],Binds:["setElement","setString","adopt","position","clear","closeButtonCloser","backgroundCloser","show","hide"],Options:{},backgroundCloses:!0,initialize:function(n){this.setOptions(n);this.icons={};this.icons.del=Affinity.icons.CrossRound;document.id("uimodalbg")||(this.modalbg=new Element("div",{id:"uimodalbg","class":"white hidden"}).inject(document.body,"bottom"));document.id("uimodal")||(this.modal=new Element("div",{id:"uimodal","class":"shadow hidden"}).inject(document.body,"bottom"),this.modalclose=new Element("div",{"class":"uimodalclose"}).inject(this.modal),new Element("span",{"class":"icon-cross"}).inject(this.modalclose),this.modalbody=new Element("div",{"class":"uimodalbody"}).inject(this.modal));this.modalbg=document.id("uimodalbg");this.modal=document.id("uimodal");this.modalbg.set("tween",{duration:250});this.modal.set("tween",{duration:250});this.modalclose=this.modal.getElement(".uimodalclose");this.modalbody=this.modal.getElement(".uimodalbody");this.modalbg.addEvent("click",this.backgroundCloser);this.modalclose.addEvent("click",this.closeButtonCloser);this.modalbg.removeClass("hidden").fade("hide");this.modal.removeClass("hidden").fade("hide");window.addEvent("resize",function(){this.position()}.bind(this));this.position();this.scroll={};this.scroll.enable=function(){this.modal.addClass("scroll")}.bind(this);this.scroll.disable=function(){this.modal.removeClass("scroll")}.bind(this);this.close={};this.close.enable=function(){this.modalclose.removeClass("hidden")}.bind(this);this.close.disable=function(){this.modalclose.addClass("hidden")}.bind(this)},getCalculatedTop:function(){var n;if(Affinity.oldess&&Affinity.oldessFrame){var i=window.parent.window,r=i.document.documentElement,u=i.document.body,e=r&&r.scrollTop||u&&u.scrollTop||0,f=0,t=window.parent.document.getElementById("ctl00_MainPanel");return t&&(f=document.documentMode&&document.documentMode<9?t.querySelectorAll(".ContentBody")[0].offsetTop:t.getElementsByClassName("ContentBody")[0].offsetTop),n=e-f,n<10&&(n=10),n+10}return 10},position:function(){var n=window.getSize();this.modalbg.setStyles({width:n.x,height:n.y});this.modal.setStyles({left:n.x/2-this.modal.getDimensions().width/2,top:this.getCalculatedTop()});this.modalbody.setStyles({"max-height":n.y-60});delete n},setElement:function(n){this.modalbody.empty();n.inject(this.modalbody);this.position();this.close.enable();this.scroll.enable()},adopt:function(n){this.setElement(n)},setString:function(n){this.modalbody.empty();this.modalbody.set("html",n);this.position();this.close.enable();this.scroll.enable()},backgroundCloser:function(n){this.closeButtonCloser(n)},closeButtonCloser:function(){window.fireEvent("leaveEditDetailCloses");this.backgroundCloses&&this.hide()},hide:function(){"beforeClose"in this&&typeOf(this.beforeClose)==="function"&&(this.beforeClose(),this.beforeClose=null,delete this.beforeClose);document.body.removeClass("uimodal-open");this.modalbg.fade("out");this.modal.fade("out");this.clear.delay(500,this)},show:function(n){n==null?(n=!0,this.modalclose.fade("show")):this.modalclose.fade("hide");document.body.addClass("uimodal-open");this.backgroundCloses=n;this.modalbg.fade("in");this.modal.fade("in")},clear:function(){this.modalbody.empty()}}),UIPromptPositionObject={position:"absolute",top:!1,left:!1},UILoaderObject={message:"Loading",onClose:function(){},timeout:null,position:{},showButtons:!1,showLoader:!0,noClose:!0,cssSelector:""},UIMessageObject={message:"Message!",onClose:function(){},timeout:null,position:{},cssSelector:""},UIAlertObject={message:"Alert!",messageAlign:"center",okText:"Ok",okIcon:"",okColor:"green",cancelText:"Cancel",cancelIcon:"",cancelColor:"grey",onOk:function(){},onCancel:function(){},onClose:function(){},showButtons:!0,showCancel:!1,noClose:!1,showLoader:!1,append:!1,position:{},cssSelector:"",showHiddenInfo:!1,hiddenInfoMessage:"",hiddenInfoButtonText:""},UIConfirmObject={message:"Yes or No?",messageAlign:"center",okText:"Yes",okIcon:"",okColor:"green",cancelText:"No",cancelIcon:"",cancelColor:"grey",onOk:function(){},onCancel:function(){},onClose:function(){},noClose:!0,position:{},cssSelector:""},UIPromptObject={message:"Enter text",messageAlign:"center",lines:1,okText:"Ok",okIcon:"",okColor:"green",cancelText:"Cancel",cancelIcon:"",cancelColor:"grey",value:"",onOk:function(){},onCancel:function(){},onClose:function(){},noClose:!0,position:{},cssSelector:""},UIPompts=new Class({Version:"1.0.4.0",Sequence:1050,Name:"Prompts",File:"ui.prompts.js",Jira:"",Notes:"Added value for TS Favs edit",Implements:[Options],Binds:["returnOptionsObject","message","alert","prompt","confirm","loader","center","show","escape","hide","hideDelay","clearHideDelay","okKeyUp"],options:{},status:"closed",message:"",currentObj:!1,container:!1,currentType:"",initialize:function(n){if(this.setOptions(n),this.promptBoxBG=document.id("UIPromtBoxBG")?document.id("UIPromtBoxBG"):new Element("div",{id:"UIPromtBoxBG","class":"UIPromtBoxBG"}).inject(document.body,"bottom"),this.promptBoxBG.set("tween",{duration:250}),this.promptBoxBG.fade("hide"),document.id("UIPromtBox"))this.promptBox=document.id("UIPromtBox");else{var t=new Element("div",{"class":"mobile-wrap"}).inject(document.body,"bottom");this.promptBox=new Element("div",{id:"UIPromtBox","class":"UIPromtBox"}).inject(t)}this.promptBox.set("tween",{duration:250});this.promptBox.fade("hide");this.container=this.promptBox;this.trueButton=new Element("span",{"class":"button true-button w-icon",tabindex:9999998}).adopt(new Element("span",{html:Affinity.icons.Tick||"&#xe066;"}),new Element("span",{"class":"label",html:""}));this.falseButton=new Element("span",{"class":"button false-button w-icon",tabindex:9999999}).adopt(new Element("span",{html:Affinity.icons.Cancel||"&#xe070;"}),new Element("span",{"class":"label",html:""}));this.promptBoxBG.removeEvents();this.promptBoxBG.addEvent("keyup",function(n){if(n.stop(),!this.obj.noClose&&n.key=="esc"){this.hide();return}n.key=="enter"&&this.obj.onOk()}.bind(this));Affinity.mobile&&(window.removeEvent("mobileback",this.escape),window.addEvent("mobileback",this.escape));window.prompts=this;window.uimessage=this.message;window.uialert=this.alert;window.uiconfirm=this.confirm;window.uiprompt=this.prompt;window.uiloader=this.loader},returnOptionsObject:function(n){var t=Object.clone(n);return Object.merge({},t)},message:function(n){var t=this.returnOptionsObject(UIMessageObject);t.message=n.message?n.message:t.message;t.messageAlign=n.messageAlign?n.messageAlign:t.messageAlign;t.timeout=n.timeout?n.timeout:t.timeout;t.cssSelector=n.cssSelector?n.cssSelector:t.cssSelector;window.onPromptClose=n.onClose?n.onClose:t.onClose;t.position=this.returnOptionsObject(UIPromptPositionObject);n.position&&(t.position.position=n.position.position?n.position.position:t.position.position,t.position.top=n.position.top?n.position.top:t.position.top,t.position.left=n.position.left?n.position.left:t.position.left);this.currentObj=t;this.promptBox.className=t.cssSelector!==""?"UIPromtBox "+t.cssSelector:"UIPromtBox";this.promptBox.empty();this.promptBox.adopt(new Element("span",{html:t.message,"class":"content align"+t.messageAlign}));this.center();this.show();t.timeout!==null&&this.hide.delay(t.timeout,this)},addLargeMessage:function(n){var t=new Element("div",{html:n,styles:{width:"100%","max-height":150,overflow:"auto","text-align":"left",margin:"10px 0"}});this.promptBox.getElement(".promptButtons")?t.inject(this.promptBox.getElement(".promptButtons"),"before"):t.inject(this.promptBox);this.center();t=null},adopt:function(){for(var t=this.promptBox.getElement(".content"),n=0;n<arguments.length;n++)t.adopt(arguments[n]);n=t=null;this.center()},alert:function(n){var t,i,r;if(this.currentType=n.type||"",t=this.returnOptionsObject(UIAlertObject),t.message=n.message?n.message:t.message,t.messageAlign=n.messageAlign?n.messageAlign:t.messageAlign,t.okText=n.okText?n.okText:t.okText,t.okIcon=n.okIcon?n.okIcon:Affinity.icons.Tick,t.okColor=n.okColor?n.okColor:t.okColor,t.cancelText=n.cancelText?n.cancelText:t.cancelText,t.cancelIcon=n.cancelIcon?n.cancelIcon:Affinity.icons.Cancel,t.cancelColor=n.cancelColor?n.cancelColor:t.cancelColor,t.onOk=n.onOk?n.onOk:t.onOk,t.onCancel=n.onCancel?n.onCancel:t.onCancel,t.showButtons=typeOf(n.showButtons)==="boolean"?n.showButtons:t.showButtons,t.showCancel=typeOf(n.showCancel)==="boolean"?n.showCancel:t.showCancel,t.noClose=typeOf(n.noClose)==="boolean"?n.noClose:t.noClose,t.showLoader=typeOf(n.showLoader)==="boolean"?n.showLoader:t.showLoader,t.append=n.append?n.append:t.append,t.cssSelector=n.cssSelector?n.cssSelector:t.cssSelector,window.onPromptClose=n.onClose?n.onClose:t.onClose,t.showHiddenInfo=typeOf(n.showHiddenInfo)==="boolean"?n.showHiddenInfo:t.showHiddenInfo,t.hiddenInfoMessage=n.hiddenInfoMessage?n.hiddenInfoMessage:t.hiddenInfoMessage,t.hiddenInfoButtonText=n.hiddenInfoButtonText?n.hiddenInfoButtonText:t.hiddenInfoButtonText,n.isCloseOnClick!==undefined&&(t.isCloseOnClick=n.isCloseOnClick),t.position=this.returnOptionsObject(UIPromptPositionObject),n.position&&(t.position.position=n.position.position?n.position.position:t.position.position,t.position.top=n.position.top?n.position.top:t.position.top,t.position.left=n.position.left?n.position.left:t.position.left),this.currentObj=t,this.promptBox.className=t.cssSelector!==""?"UIPromtBox "+t.cssSelector:"UIPromtBox",this.onEnterMethod=function(){t.onOk();this.hide()}.bind(this),this.onCancelMethod=function(){t.onCancel();this.hide()}.bind(this),i=this.falseButton.clone().removeEvents().addClass(t.cancelColor).addClass("hidden").addEvent("click",this.onCancelMethod),i.getElement("span").set("html",t.cancelIcon),i.getElement(".label").set("html",t.cancelText),r=new Element("span",{html:"&nbsp;","class":"hidden"}),this.message=t.append?this.message+(this.message!==""?"<br />":"")+t.message:t.message,this.promptBox.empty(),this.promptBox.adopt(new Element("span",{html:this.message,"class":"content align"+t.messageAlign})),t.showHiddenInfo){var u=new Element("div",{"class":"hiddenInfoContainer",style:"display: none;",html:"<br />"+t.hiddenInfoMessage}).inject(this.promptBox),f=new Element("div",{"class":"tooltip-view ui-has-tooltip more-button tile-more-button",style:"text-align: center;",html:'<br /><span class="button more w-icon more-info-button"><span class="icon-info"><\/span><span class="btn-tag tile-more">'+t.hiddenInfoButtonText+"<\/span><\/span>"}).inject(this.promptBox),e=new Element("div",{style:"text-align: center;","class":"tooltip-view ui-has-tooltip more-button tile-more-button",html:'<span class="button more w-icon more-info-button"><span><\/span><span class="btn-tag tile-more">Hide<\/span><\/span>'}).inject(u);f.addEvent(Affinity.events.click,function(){u.style.display="block";f.style.display="none"}.bind(this));e.addEvent(Affinity.events.click,function(){u.style.display="none";f.style.display="block"}.bind(this))}return t.showLoader?(this.promptBox.adopt(new Element("img",{src:Affinity.loaders.dark})),this.promptBox.addClass("loader")):this.promptBox.removeClass("loader"),t.noClose?this.promptBox.getElement("promptButtons")&&this.promptBox.getElement("promptButtons").destroy():t.showButtons&&(this.promptBox.adopt(new Element("div",{"class":"promptButtons"}).adopt(this.trueButton.clone().removeEvents().addClass(t.okColor).addEvent("click",this.onEnterMethod),r,i)),this.promptBox.getElement(".true-button span").set("html",t.okIcon),this.promptBox.getElement(".true-button .label").set("html",t.okText)),this.promptBoxBG.removeEvent(Affinity.events.click,this.hide),t.showButtons||t.noClose?t.showCancel&&(r.removeClass("hidden"),i.removeClass("hidden")):this.promptBoxBG.addEvent(Affinity.events.click,this.hide),window.removeEvent("keyup",this.okKeyUp),window.addEvent("keyup",this.okKeyUp),this.center(),this.show(),this},prompt:function(n){var t,i;return this.currentType=n.type||"",t=this.returnOptionsObject(UIPromptObject),t.message=n.message?n.message:t.message,t.messageAlign=n.messageAlign?n.messageAlign:t.messageAlign,t.value=n.value?n.value:t.value,t.lines=n.lines?n.lines:t.lines,t.okText=n.okText?n.okText:t.okText,t.okIcon=n.okIcon?n.okIcon:Affinity.icons.Tick,t.okColor=n.okColor?n.okColor:t.okColor,t.onOk=n.onOk?n.onOk:t.onOk,t.cancelText=n.cancelText?n.cancelText:t.cancelText,t.cancelIcon=n.cancelIcon?n.cancelIcon:Affinity.icons.Cancel,t.cancelColor=n.cancelColor?n.cancelColor:t.cancelColor,t.onCancel=n.onCancel?n.onCancel:t.onCancel,t.noClose=typeOf(n.noClose)==="boolean"?n.noClose:t.noClose,t.cssSelector=n.cssSelector?n.cssSelector:t.cssSelector,window.onPromptClose=n.onClose?n.onClose:t.onClose,t.position=this.returnOptionsObject(UIPromptPositionObject),n.position&&(t.position.position=n.position.position?n.position.position:t.position.position,t.position.top=n.position.top?n.position.top:t.position.top,t.position.left=n.position.left?n.position.left:t.position.left),this.currentObj=t,this.promptBox.className=t.cssSelector!==""?"UIPromtBox "+t.cssSelector:"UIPromtBox",this.onEnterMethod=function(){var n=document.id("UIPromtBox").getElement(".promptinput").value;this.hide();t.onOk(n)}.bind(this),this.onCancelMethod=function(){var n=document.id("UIPromtBox").getElement(".promptinput").value;this.hide();t.onCancel(n)}.bind(this),i=t.lines<2?new Element("input",{type:"text","class":"promptinput data-hj-whitelist",tabindex:9999997}):new Element("textarea",{rows:t.lines,"class":"promptinput data-hj-whitelist",tabindex:9999997}),i.value=t.value,this.promptBox.empty(),this.promptBox.adopt(new Element("span",{html:t.message,"class":"content align"+t.messageAlign}),new Element("div",{"class":"promptButtons"}).adopt(i),new Element("div",{"class":"promptButtons"}).adopt(this.trueButton.clone().removeEvents().addClass(t.okColor).addEvent("click",this.onEnterMethod),new Element("span",{html:"&nbsp;"}),this.falseButton.clone().removeEvents().addClass(t.cancelColor).addEvent("click",this.onCancelMethod))),this.promptBoxBG.removeEvent(Affinity.events.click,this.hide),t.noClose||this.promptBoxBG.addEvent(Affinity.events.click,this.hide),window.removeEvent("keyup",this.okKeyUp),window.addEvent("keyup",this.okKeyUp),this.promptBox.getElement(".true-button span").set("html",t.okIcon),this.promptBox.getElement(".true-button .label").set("html",t.okText),this.promptBox.getElement(".false-button span").set("html",t.cancelIcon),this.promptBox.getElement(".false-button .label").set("html",t.cancelText),this.center(),this.show(),this.promptBox.getElement(".promptinput").focus(),this},confirm:function(n){this.currentType=n.type||"";var t=this.returnOptionsObject(UIConfirmObject);return t.message=n.message?n.message:t.message,t.messageAlign=n.messageAlign?n.messageAlign:t.messageAlign,t.okText=n.okText?n.okText:t.okText,t.okIcon=n.okIcon?n.okIcon:Affinity.icons.Tick,t.okColor=n.okColor?n.okColor:t.okColor,t.onOk=n.onOk?n.onOk:t.onOk,t.cancelText=n.cancelText?n.cancelText:t.cancelText,t.cancelIcon=n.cancelIcon?n.cancelIcon:Affinity.icons.Cancel,t.cancelColor=n.cancelColor?n.cancelColor:t.cancelColor,t.onCancel=n.onCancel?n.onCancel:t.onCancel,t.noClose=typeOf(n.noClose)==="boolean"?n.noClose:t.noClose,t.cssSelector=n.cssSelector?n.cssSelector:t.cssSelector,window.onPromptClose=n.onClose?n.onClose:t.onClose,t.position=this.returnOptionsObject(UIPromptPositionObject),n.position&&(t.position.position=n.position.position?n.position.position:t.position.position,t.position.top=n.position.top?n.position.top:t.position.top,t.position.left=n.position.left?n.position.left:t.position.left),this.currentObj=t,this.promptBox.className=t.cssSelector!==""?"UIPromtBox "+t.cssSelector:"UIPromtBox",this.onEnterMethod=function(){this.hide();t.onOk(!0)}.bind(this),this.onCancelMethod=function(){this.hide();t.onCancel(!1)}.bind(this),this.promptBox.empty(),this.promptBox.adopt(new Element("span",{html:t.message,"class":"content align"+t.messageAlign}),new Element("div",{"class":"promptButtons"}).adopt(this.trueButton.clone().removeEvents().addClass(t.okColor).addEvent("click",this.onEnterMethod),new Element("span",{html:"&nbsp;"}),this.falseButton.clone().removeEvents().addClass(t.cancelColor).addEvent("click",this.onCancelMethod))),this.promptBoxBG.removeEvent(Affinity.events.click,this.hide),t.noClose||this.promptBoxBG.addEvent(Affinity.events.click,this.hide),this.currentObj=t,window.removeEvent("keyup",this.okKeyUp),window.addEvent("keyup",this.okKeyUp),this.promptBox.getElement(".true-button span").set("html",t.okIcon),this.promptBox.getElement(".true-button .label").set("html",t.okText),this.promptBox.getElement(".false-button span").set("html",t.cancelIcon),this.promptBox.getElement(".false-button .label").set("html",t.cancelText),this.center(),this.show(),this},loader:function(n){this.currentType=n.type||"";var t=this.returnOptionsObject(UILoaderObject);t.message=n.message?n.message:t.message;t.messageAlign=n.messageAlign?n.messageAlign:t.messageAlign;t.cssSelector=n.cssSelector?n.cssSelector:t.cssSelector;window.onPromptClose=n.onClose?n.onClose:t.onClose;t.position=this.returnOptionsObject(UIPromptPositionObject);n.position&&(t.position.position=n.position.position?n.position.position:t.position.position,t.position.top=n.position.top?n.position.top:t.position.top,t.position.left=n.position.left?n.position.left:t.position.left);this.currentObj=t;this.promptBox.className=t.cssSelector!==""?"UIPromtBox "+t.cssSelector:"UIPromtBox";this.message=t.append?this.message+(this.message!==""?"<br />":"")+t.message:t.message;this.promptBox.empty();this.promptBox.adopt(new Element("span",{html:this.message,"class":"content align"+t.messageAlign}));this.promptBox.adopt(new Element("img",{src:Affinity.loaders.dark}));this.promptBox.addClass("loader");window.removeEvent("keyup",this.okKeyUp);this.promptBoxBG.removeEvent(Affinity.events.click,this.hide);this.center();this.show()},getCalculatedTop:function(){var t,u,h;if(Affinity.oldess&&Affinity.oldessFrame){var c=this.promptBox.getSize(),f=c.y/2,n=window.parent.window,e=n.document.documentElement,o=n.document.body,l=e&&e.scrollTop||o&&o.scrollTop||0,s=n.innerHeight||n.document.documentElement.clientHeight,i=0,r=window.parent.document.getElementById("ctl00_MainPanel");return r&&(i=document.documentMode&&document.documentMode<9?r.querySelectorAll(".ContentBody")[0].offsetTop:r.getElementsByClassName("ContentBody")[0].offsetTop),this.promptBox.getStyle("position")==="fixed"?s/2-i:(t=l+s/2-i,t<f+10&&(t=f+10),t+10)}return u=document.getSize(),this.promptBox.getStyle("position")==="fixed"?u.y/2:(h=document.getScroll(),u.y/2+h.y)},center:function(){var n;if(!Affinity.mobile){var f=this.promptBox.getSize(),t=this.getCalculatedTop(),i="50%",r=0-f.y/2,u=0-f.x/2,e="absolute";typeOf(this.currentObj)!=="null"&&typeOf(this.currentObj.position)!=="null"&&(n=this.currentObj.position,e=n.position?n.position:"absolute",t=n.top?n.top:t,i=n.left?n.left:i,r=n.top?0:r,u=n.left?0:u);this.promptBox.setStyles({position:e,top:t,left:i,margin:r+"px 0 0 "+u+"px"})}},okKeyUp:function(n){n.key=="enter"&&this.status=="open"&&(this.promptBox.getElement(".promptinput")?this.promptBox.getElement(".promptinput")!=document.activeElement&&this.onEnterMethod():this.onEnterMethod())},showButtons:function(){this.promptBox.getElement(".promptButtons")&&(this.promptBox.getElement(".promptButtons").removeClass("hidden"),this.promptBoxBG&&(this.promptBoxBG.removeEvent(Affinity.events.click,this.hide),this.promptBoxBG.addEvent(Affinity.events.click,this.hide)))},hideButtons:function(){this.promptBox.getElement(".promptButtons")&&(this.promptBox.getElement(".promptButtons").addClass("hidden"),this.promptBoxBG&&this.promptBoxBG.removeEvent(Affinity.events.click,this.hide))},show:function(){document.body.addClass("uiprompt-open");this.promptBoxBG.fade("in");this.promptBox.fade("in");this.status="open"},escape:function(){this.currentOb&&!this.currentOb.noClose&&this.hide()},clearOnClose:function(){window.onPromptClose=function(){}},hide:function(n){if(document.body.removeClass("uiprompt-open"),typeof n!="string"||n===""||n===this.currentType){"onPromptClose"in window&&window.onPromptClose();this.clearOnClose();this.promptBoxBG.fade("out");this.promptBox.fade("out");this.status="closed";this.message="";window.removeEvent("keyup",this.okKeyUp);try{this.promptBoxBG.removeEvent(Affinity.events.click,this.hide)}catch(t){}this.currentObj=!1;this.currentType=""}},hideDelayTimer:!1,hideDelay:function(n){this.clearHideDelay();this.hideDelayTimer=this.hide.delay(n)},clearHideDelay:function(){clearTimeout(this.hideDelayTimer)}}),UITooltips=new Class({Version:"1.0.2.0",File:"ui.tooltip.js",Implements:[Options],Binds:["processNew","init","processTooltip","removeTooltip","itemOver","itemOut"],options:{},initialize:function(n){this.setOptions(n);Affinity.UI.Tooltips={};Affinity.UI.Tooltips.Process=this.processNew;Affinity.UI.Tooltips.Remove=this.removeTooltip;Affinity.UI.Tooltips.Hide=this.hideAll;this.init()},processNew:function(){this.init()},init:function(){if(Affinity.helpbubble)Array.each(document.getElements(".ui-has-tooltip"),this.processTooltip.bind(this));else throw"UI Tooltips requires UI Help Bubble";},processTooltip:function(n,t){n.get("data-tooltip")&&(n.hasEvent(Affinity.events.overAll,this.itemOver)||(n.addEvent(Affinity.events.overAll,this.itemOver),n.addEvent(Affinity.events.outAll,this.itemOut),n.get("tag")==="input"&&n.addEvent("blur",this.itemOut)),typeOf(t)==="boolean"&&t&&this.itemOver({target:n}))},removeTooltip:function(n){n.removeClass("ui-has-tooltip");n.erase("data-tooltip");n.erase("data-tooltip-dir");n.removeEvent(Affinity.events.overAll,this.itemOver);n.removeEvent(Affinity.events.outAll,this.itemOut);n.get("tag")==="input"&&n.removeEvent("blur",this.itemOut)},itemOver:function(n){var f=n.target.hasClass("ui-has-tooltip")?n.target:n.target.getParent("ui-has-tooltip"),r;if(f&&(Affinity.helpbubble.populate(f.get("data-tooltip")),r=Affinity.helpbubble.getSize(),typeOf(r)==="object"&&"y"in r)){var s=f.get("data-tooltip-dir")?f.get("data-tooltip-dir").toLowerCase().trim():"right",o=document.getScrollSize(),i=f.getPosition(),e=f.getSize(),h=document.getScroll(),u,t={x:0,y:0};switch(s){case"top":u="bottom";t.x=i.x;t.y=i.y-r.y-10;break;case"bottom":u="top";t.x=i.x;t.y=i.y+r.y-5;break;case"right":u="left";t.x=i.x+e.x+5;t.y=i.y+e.y/2-20;break;case"left":u="right";t.x=i.x-r.x-5;t.y=i.y+e.y/2-20;break;case"top,left":u="bottom-right";t.x=i.x+e.x-r.x;t.y=i.y-r.y-10;break;case"top,right":u="bottom";t.x=i.x;t.y=i.y-r.y-10;break;case"bottom,left":u="top-right";t.x=i.x+e.x-r.x;t.y=i.y+r.y;break;case"bottom,right":u="top";t.x=i.x;t.y=i.y+r.y;break;case"top,center":u="bottom";t.x=i.x;t.y=i.y-r.y-10;break;case"bottom,center":u="top";t.x=i.x;t.y=i.y+r.y-5}Affinity.helpbubble.setDirection(u);t.x+r.x>o.x&&(t.x=o.x-r.x-5);t.y+r.y>o.y&&(t.y=o.y-r.y-5);Affinity.helpbubble.position(t);Affinity.helpbubble.show(f.hasClass("ui-tooltip-selectable")?!0:!1)}},itemOut:function(){Affinity.helpbubble.hide()},hideAll:function(){Affinity.helpbubble.hide()}}),UIUplaodersMulti=new Class({Version:"1.0.0.0",File:"ui.upload.multi.js",Implements:[Options,Events],Binds:["processNew","processUploader","addFile","addFileCont","addFileRow","deleteFile"],options:{auto:!0,maxsize:20971520,samenames:!0},uploaders:{},initialize:function(n){(this.setOptions(n),this.icons={},this.icons.del=Affinity.icons.CrossRound||"&#xe06d;",Affinity.prettyuploads)&&this.options.auto&&Array.each(document.getElements(".uploadmulti"),this.processUploader)},processNew:function(){Array.each(document.getElements(".uploadmulti"),this.processUploader)},processUploader:function(n){var t,e,f,i,o;if(Affinity.prettyuploads&&!n.hasClass("uidone")){n.store("count",1);t=new HtmlTable({properties:{"class":"ui-grid"},headers:["File",""],rows:[]});new Element("div",{"class":"upload-table hidden"}).adopt(t.element).inject(n);n.addClass("uidone");var s=n.hasClass("isrequired")?!0:!1,r=new Element("label").inject(n),u=n.get("data-question-name")+"_file0";n.getElement("input").set("name",u).set("id",u).addEvent("change",this.addFile).inject(r).fade("hide");e=new Element("span",{"class":"button blue"}).adopt(new Element("span",{"class":"icon-add-to-list"}),new Element("span",{html:"Add&nbsp;File"})).inject(r);new Element("span",{html:"","class":"uploadlabel"}).inject(r);f=n.getElement(".initialValues");f&&(i=f.value.trim(),i!==""&&(o=i.split(","),Array.each(o,function(n){this.addFileRow(t.element,n,n)}.bind(this)),window.fireEvent("multiFileDefaults",{initialValues:i,table:t.element})));delete t;delete r;delete u;delete e;delete i;Affinity.uiGrid.processTables(t.element)}},addFile:function(n){var t,i;if(n.stop(),t={},t.uploadInput=n.target,t.uploader=t.uploadInput.getParent(".uploadmulti"),t.table=t.uploader.getElement("table"),t.questionName=t.uploader.get("data-question-name"),t.filePath=t.uploadInput.value,t.fileName=t.filePath,t.count=t.uploader.retrieve("count")+1,t.inputId=t.questionName+"_file"+t.count,t.fileEventData={fileElement:t.uploadInput,questionName:t.questionName,table:t.table},t.filePath===""||typeOf(t.filePath)=="null"){delete t;return}if(t.uploadInput.files&&t.uploadInput.files[0].size>this.options.maxsize){window.fireEvent("multiFileTooLarge",{fileElement:t.uploadInput,maxsize:this.options.maxsize,size:t.uploadInput.files[0].size,table:t.table});t.uploadInput.value="";try{delete t.uploadInput.files}catch(n){}delete t;return}if(t.fileName.contains("fakepath")&&(t.fileName=t.fileName.substring(t.uploadInput.value.indexOf("fakepath")+9)),t.fileName.contains("/")&&(t.fileName=t.fileName.substring(t.uploadInput.value.lastIndexOf("/")+1)),t.fileName.contains("\\")&&(t.fileName=t.fileName.substring(t.uploadInput.value.lastIndexOf("\\")+1)),i=!1,Array.each(t.table.getElements("tr"),function(n){n.retrieve("fileName")&&n.retrieve("fileName").trim()===t.fileName.trim()&&(i=!0)}),i)if(this.options.samenames)uiconfirm({message:"You already have a file named '"+t.fileName+"'.<br />Would you like to continue anyway?",onOk:function(){this.addFileCont(n,t)}.bind(this),onCancel:function(){t.uploadInput.value="";try{delete t.uploadInput.files}catch(n){}delete t}.bind(this)});else{uialert({message:"Filenames must be different.<br />You already have a file with name '"+t.fileName+"'."});t.uploadInput.value="";try{delete t.uploadInput.files}catch(n){}delete t;return}else this.addFileCont(n,t)},addFileCont:function(n,t){n.stop();this.addFileRow(t.table,t.fileName,null,t.inputId);var i=t.table.getParent(".uploadmulti");t.uploadInput.set("class","").addClass("subhidden").set("name",t.inputId).set("id",t.inputId).removeEvents(),function(){t.uploadInput=t.uploadInput.clone().set("name",t.questionName+"_file0").set("id",t.questionName+"_file0").set("class","").addClass("new-master").inject(t.uploadInput,"before").fade("hide");t.uploadInput.removeEvents();t.uploadInput.addEvent("change",this.addFile);t.uploadInput.value="";t.uploader.store("count",t.count);window.fireEvent("multiFileAdded",t.fileEventData);i.fireEvent("multiFileAdded",t.fileEventData)}.delay(50,this);delete t},addFileRow:function(n,t,i,r,u){var e,f;e=i!==null?'<span class="button orange delete w-icon-only"><span>'+this.icons.del+"<\/span><\/span>":'<span class="button orange delete new w-icon-only"><span>'+this.icons.del+"<\/span><\/span>";n.retrieve("HtmlTable").push([t,e]);f=n.getElements("tbody tr").getLast();f.store("fileName",t);i!==null&&(f.store("fileId",i),f.addEvent("click",this.downloadFile.bind(this)),f.addClass("saved"));u&&(f.removeEvents(),f.getElement("td").empty(),new Element("a",{href:u,target:"_blank",html:t}).inject(f.getElement("td")));r!==null&&f.store("inputId",r);f.getElements(".delete").addEvent("click",this.deleteFile);Affinity.uiGrid.zebra(n);n.getParent().removeClass("hidden");delete e;delete f},deleteFile:function(n){var s,f;n.stop();var o=!1,h=n.target.hasClass("button")?n.target:n.target.getParent(".button"),u=n.target.getParent(".uploadmulti"),t=n.target.getParent("tr"),i=t.getParent("table"),e=u.get("data-question-name"),r=!1;t.retrieve("fileId")&&(r=t.retrieve("fileId"));h.hasClass("new")?(s=t.retrieve("inputId"),u.getElement("#"+s)&&u.getElement("#"+s).destroy()):(window.fireEvent("validateMultiFileDelete",{row:t,table:i,deletionTarget:{deleteName:f,deletedId:r,questionName:e,table:i}}),u.fireEvent("validateMultiFileDelete",{row:t,table:i,deletionTarget:{deleteName:f,deletedId:r,questionName:e,table:i}}),o=t.hasClass("preventDeletion"),o||(t.retrieve("fileId")&&(r=t.retrieve("fileId")),f=t.getElement("td").get("html"),window.fireEvent("multiFileDeleted",{deleteName:f,deletedId:r,questionName:e,table:i}),u.fireEvent("multiFileDeleted",{deleteName:f,deletedId:r,questionName:e,table:i}),delete r,delete f));o?t.removeClass("preventDeletion"):(t.destroy(),Affinity.uiGrid.zebra(i),i.getElements("tbody tr").length==0&&i.getParent().addClass("hidden"),delete h,delete u,delete t,delete i,delete e)},downloadFile:function(n){n.stop();var t=n.target.get("tag")=="td"?n.target:n.target.getParent("td"),i=t.getParent("tr").retrieve("fileId"),r=t.getParent("tr").retrieve("dowloadUrl");i&&r&&window.open(r+"?documentId="+i,"_blank")},setMaxSize:function(n){this.options.maxsize=n},reset:function(n){var t=!1,i=!1,r,u;if(typeOf(n)==="element"&&(n.hasClass("uploadmulti")&&(t=n),typeOf(n)==="element"&&n.get("type")&&(n.get("type")==="input"||n.get("type")==="file")&&(t=n.getParent(".uploadmulti"))),t&&t.getElement("label input")&&(i=t.getElement("label input")),t){if(r=t.getElement("table"),u=t.get("data-question-name"),Array.each(t.getElements("label input"),function(n){n!==i&&n.destroy()}),t.store("count",1),i&&(i.set("name",u+"_file0").set("id",u+"_file0").set("class",null).set("type","file").removeEvents().addEvent("change",this.addFile.bind(this)).fade("hide"),i.value="","files"in i))try{i.files=[]}catch(f){}r.getElement("tbody").empty();r.getParent().addClass("hidden")}}});(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.Chart=n()}})(function(){return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(){},{}],2:[function(n,t){function u(n){var t;if(n){var f=[0,0,0],e=1,u=n.match(/^#([a-fA-F0-9]{3})$/);if(u)for(u=u[1],t=0;t<f.length;t++)f[t]=parseInt(u[t]+u[t],16);else if(u=n.match(/^#([a-fA-F0-9]{6})$/))for(u=u[1],t=0;t<f.length;t++)f[t]=parseInt(u.slice(t*2,t*2+2),16);else if(u=n.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(t=0;t<f.length;t++)f[t]=parseInt(u[t+1]);e=parseFloat(u[4])}else if(u=n.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(t=0;t<f.length;t++)f[t]=Math.round(parseFloat(u[t+1])*2.55);e=parseFloat(u[4])}else if(u=n.match(/(\w+)/)){if(u[1]=="transparent")return[0,0,0,0];if(f=r[u[1]],!f)return}for(t=0;t<f.length;t++)f[t]=i(f[t],0,255);return e=e||e==0?i(e,0,1):1,f[3]=e,f}}function f(n){var r,t;if(n&&(r=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,t=n.match(r),t)){var u=parseFloat(t[4]),f=i(parseInt(t[1]),0,360),e=i(parseFloat(t[2]),0,100),o=i(parseFloat(t[3]),0,100),s=i(isNaN(u)?1:u,0,1);return[f,e,o,s]}}function h(n){var r,t;if(n&&(r=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,t=n.match(r),t)){var u=parseFloat(t[4]),f=i(parseInt(t[1]),0,360),e=i(parseFloat(t[2]),0,100),o=i(parseFloat(t[3]),0,100),s=i(isNaN(u)?1:u,0,1);return[f,e,o,s]}}function v(n){var t=u(n);return t&&t.slice(0,3)}function y(n){var t=f(n);return t&&t.slice(0,3)}function p(n){var t=u(n);return t?t[3]:(t=f(n))||(t=h(n))?t[3]:void 0}function w(n){return"#"+e(n[0])+e(n[1])+e(n[2])}function b(n,t){return t<1||n[3]&&n[3]<1?c(n,t):"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}function c(n,t){return t===undefined&&(t=n[3]!==undefined?n[3]:1),"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+t+")"}function k(n,t){if(t<1||n[3]&&n[3]<1)return l(n,t);var i=Math.round(n[0]/255*100),r=Math.round(n[1]/255*100),u=Math.round(n[2]/255*100);return"rgb("+i+"%, "+r+"%, "+u+"%)"}function l(n,t){var i=Math.round(n[0]/255*100),r=Math.round(n[1]/255*100),u=Math.round(n[2]/255*100);return"rgba("+i+"%, "+r+"%, "+u+"%, "+(t||n[3]||1)+")"}function d(n,t){return t<1||n[3]&&n[3]<1?a(n,t):"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)"}function a(n,t){return t===undefined&&(t=n[3]!==undefined?n[3]:1),"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+t+")"}function g(n,t){return t===undefined&&(t=n[3]!==undefined?n[3]:1),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+(t!==undefined&&t!==1?", "+t:"")+")"}function nt(n){return o[n.slice(0,3)]}function i(n,t,i){return Math.min(Math.max(t,n),i)}function e(n){var t=n.toString(16).toUpperCase();return t.length<2?"0"+t:t}var r=n(6),o,s;t.exports={getRgba:u,getHsla:f,getRgb:v,getHsl:y,getHwb:h,getAlpha:p,hexString:w,rgbString:b,rgbaString:c,percentString:k,percentaString:l,hslString:d,hslaString:a,hwbString:g,keyword:nt};o={};for(s in r)o[r[s]]=s},{"6":6}],3:[function(n,t){var u=n(5),r=n(2),i=function(n){if(n instanceof i)return n;if(!(this instanceof i))return new i(n);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var t;if(typeof n=="string")if(t=r.getRgba(n),t)this.setValues("rgb",t);else if(t=r.getHsla(n))this.setValues("hsl",t);else if(t=r.getHwb(n))this.setValues("hwb",t);else throw new Error('Unable to parse color from string "'+n+'"');else if(typeof n=="object")if(t=n,t.r!==undefined||t.red!==undefined)this.setValues("rgb",t);else if(t.l!==undefined||t.lightness!==undefined)this.setValues("hsl",t);else if(t.v!==undefined||t.value!==undefined)this.setValues("hsv",t);else if(t.w!==undefined||t.whiteness!==undefined)this.setValues("hwb",t);else if(t.c!==undefined||t.cyan!==undefined)this.setValues("cmyk",t);else throw new Error("Unable to parse color from object "+JSON.stringify(n));};i.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var n=this.values;return n.alpha!==1?n.hwb.concat([n.alpha]):n.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var n=this.values;return n.rgb.concat([n.alpha])},hslaArray:function(){var n=this.values;return n.hsl.concat([n.alpha])},alpha:function(n){return n===undefined?this.values.alpha:(this.setValues("alpha",n),this)},red:function(n){return this.setChannel("rgb",0,n)},green:function(n){return this.setChannel("rgb",1,n)},blue:function(n){return this.setChannel("rgb",2,n)},hue:function(n){return n&&(n%=360,n=n<0?360+n:n),this.setChannel("hsl",0,n)},saturation:function(n){return this.setChannel("hsl",1,n)},lightness:function(n){return this.setChannel("hsl",2,n)},saturationv:function(n){return this.setChannel("hsv",1,n)},whiteness:function(n){return this.setChannel("hwb",1,n)},blackness:function(n){return this.setChannel("hwb",2,n)},value:function(n){return this.setChannel("hsv",2,n)},cyan:function(n){return this.setChannel("cmyk",0,n)},magenta:function(n){return this.setChannel("cmyk",1,n)},yellow:function(n){return this.setChannel("cmyk",2,n)},black:function(n){return this.setChannel("cmyk",3,n)},hexString:function(){return r.hexString(this.values.rgb)},rgbString:function(){return r.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return r.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return r.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return r.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return r.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return r.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return r.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var n=this.values.rgb;return n[0]<<16|n[1]<<8|n[2]},luminosity:function(){for(var i,r=this.values.rgb,n=[],t=0;t<r.length;t++)i=r[t]/255,n[t]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4);return.2126*n[0]+.7152*n[1]+.0722*n[2]},contrast:function(n){var t=this.luminosity(),i=n.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(n){var t=this.contrast(n);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var n=this.values.rgb,t=(n[0]*299+n[1]*587+n[2]*114)/1e3;return t<128},light:function(){return!this.dark()},negate:function(){for(var t=[],n=0;n<3;n++)t[n]=255-this.values.rgb[n];return this.setValues("rgb",t),this},lighten:function(n){var t=this.values.hsl;return t[2]+=t[2]*n,this.setValues("hsl",t),this},darken:function(n){var t=this.values.hsl;return t[2]-=t[2]*n,this.setValues("hsl",t),this},saturate:function(n){var t=this.values.hsl;return t[1]+=t[1]*n,this.setValues("hsl",t),this},desaturate:function(n){var t=this.values.hsl;return t[1]-=t[1]*n,this.setValues("hsl",t),this},whiten:function(n){var t=this.values.hwb;return t[1]+=t[1]*n,this.setValues("hwb",t),this},blacken:function(n){var t=this.values.hwb;return t[2]+=t[2]*n,this.setValues("hwb",t),this},greyscale:function(){var n=this.values.rgb,t=n[0]*.3+n[1]*.59+n[2]*.11;return this.setValues("rgb",[t,t,t]),this},clearer:function(n){var t=this.values.alpha;return this.setValues("alpha",t-t*n),this},opaquer:function(n){var t=this.values.alpha;return this.setValues("alpha",t+t*n),this},rotate:function(n){var t=this.values.hsl,i=(t[0]+n)%360;return t[0]=i<0?360+i:i,this.setValues("hsl",t),this},mix:function(n,t){var i=this,r=n,e=t===undefined?.5:t,u=2*e-1,o=i.alpha()-r.alpha(),f=((u*o==-1?u:(u+o)/(1+u*o))+1)/2,s=1-f;return this.rgb(f*i.red()+s*r.red(),f*i.green()+s*r.green(),f*i.blue()+s*r.blue()).alpha(i.alpha()*e+r.alpha()*(1-e))},toJSON:function(){return this.rgb()},clone:function(){var f=new i,r=this.values,e=f.values,n,u;for(var t in r)r.hasOwnProperty(t)&&(n=r[t],u={}.toString.call(n),u==="[object Array]"?e[t]=n.slice(0):u==="[object Number]"?e[t]=n:console.error("unexpected color value:",n));return f}};i.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]};i.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]};i.prototype.getValues=function(n){for(var i=this.values,r={},t=0;t<n.length;t++)r[n.charAt(t)]=i[n][t];return i.alpha!==1&&(r.a=i.alpha),r};i.prototype.setValues=function(n,t){var r=this.values,o=this.spaces,c=this.maxes,f=1,i,s,h,e;if(n==="alpha")f=t;else if(t.length)r[n]=t.slice(0,n.length),f=t[n.length];else if(t[n.charAt(0)]!==undefined){for(i=0;i<n.length;i++)r[n][i]=t[n.charAt(i)];f=t.a}else if(t[o[n][0]]!==undefined){for(s=o[n],i=0;i<n.length;i++)r[n][i]=t[s[i]];f=t.alpha}if(r.alpha=Math.max(0,Math.min(1,f===undefined?r.alpha:f)),n==="alpha")return!1;for(i=0;i<n.length;i++)h=Math.max(0,Math.min(c[n][i],r[n][i])),r[n][i]=Math.round(h);for(e in o)e!==n&&(r[e]=u[n][e](r[n]));return!0};i.prototype.setSpace=function(n,t){var i=t[0];return i===undefined?this.getValues(n):(typeof i=="number"&&(i=Array.prototype.slice.call(t)),this.setValues(n,i),this)};i.prototype.setChannel=function(n,t,i){var r=this.values[n];return i===undefined?r[t]:i===r[t]?this:(r[t]=i,this.setValues(n,r),this)};typeof window!="undefined"&&(window.Color=i);t.exports=i},{"2":2,"5":5}],4:[function(n,t){function u(n){var u=n[0]/255,f=n[1]/255,e=n[2]/255,r=Math.min(u,f,e),t=Math.max(u,f,e),o=t-r,i,h,s;return t==r?i=0:u==t?i=(f-e)/o:f==t?i=2+(e-u)/o:e==t&&(i=4+(u-f)/o),i=Math.min(i*60,360),i<0&&(i+=360),s=(r+t)/2,h=t==r?0:s<=.5?o/(t+r):o/(2-t-r),[i,h*100,s*100]}function c(n){var r=n[0],u=n[1],f=n[2],o=Math.min(r,u,f),i=Math.max(r,u,f),e=i-o,t,s,h;return s=i==0?0:e/i*100,i==o?t=0:r==i?t=(u-f)/e:u==i?t=2+(f-r)/e:f==i&&(t=4+(r-u)/e),t=Math.min(t*60,360),t<0&&(t+=360),h=i/255*100,[t,s,h]}function f(n){var i=n[0],r=n[1],t=n[2],f=u(n)[0],e=1/255*Math.min(i,Math.min(r,t)),t=1-1/255*Math.max(i,Math.max(r,t));return[f,e*100,t*100]}function e(n){var i=n[0]/255,r=n[1]/255,u=n[2]/255,f,e,o,t;return t=Math.min(1-i,1-r,1-u),f=(1-i-t)/(1-t)||0,e=(1-r-t)/(1-t)||0,o=(1-u-t)/(1-t)||0,[f*100,e*100,o*100,t*100]}function o(n){return nt[JSON.stringify(n)]}function y(n){var t=n[0]/255,i=n[1]/255,r=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var u=t*.4124+i*.3576+r*.1805,f=t*.2126+i*.7152+r*.0722,e=t*.0193+i*.1192+r*.9505;return[u*100,f*100,e*100]}function p(n){var u=y(n),i=u[0],t=u[1],r=u[2],f,e,o;return i/=95.047,t/=100,r/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,f=116*t-16,e=500*(i-t),o=200*(t-r),[f,e,o]}function ft(n){return k(p(n))}function l(n){var h=n[0]/360,o=n[1]/100,i=n[2]/100,r,f,t,s,u,e;if(o==0)return u=i*255,[u,u,u];for(f=i<.5?i*(1+o):i+o-i*o,r=2*i-f,s=[0,0,0],e=0;e<3;e++)t=h+1/3*-(e-1),t<0&&t++,t>1&&t--,u=6*t<1?r+(f-r)*6*t:2*t<1?f:3*t<2?r+(f-r)*(2/3-t)*6:r,s[e]=u*255;return s}function et(n){var f=n[0],i=n[1]/100,t=n[2]/100,r,u;return t===0?[0,0,0]:(t*=2,i*=t<=1?t:2-t,u=(t+i)/2,r=2*i/(t+i),[f,r*100,u*100])}function ot(n){return f(l(n))}function st(n){return e(l(n))}function ht(n){return o(l(n))}function a(n){var r=n[0]/60,u=n[1]/100,t=n[2]/100,s=Math.floor(r)%6,o=r-Math.floor(r),i=255*t*(1-u),f=255*t*(1-u*o),e=255*t*(1-u*(1-o)),t=255*t;switch(s){case 0:return[t,e,i];case 1:return[f,t,i];case 2:return[i,t,e];case 3:return[i,f,t];case 4:return[e,i,t];case 5:return[t,i,f]}}function ct(n){var f=n[0],r=n[1]/100,u=n[2]/100,i,t;return t=(2-r)*u,i=r*u,i/=t<=1?t:2-t,i=i||0,t/=2,[f,i*100,t*100]}function lt(n){return f(a(n))}function at(n){return e(a(n))}function vt(n){return o(a(n))}function s(n){var h=n[0]/360,t=n[1]/100,o=n[2]/100,s=t+o,f,i,e,u;s>1&&(t/=s,o/=s);f=Math.floor(6*h);i=1-o;e=6*h-f;(f&1)!=0&&(e=1-e);u=t+e*(i-t);switch(f){default:case 6:case 0:r=i;g=u;b=t;break;case 1:r=u;g=i;b=t;break;case 2:r=t;g=i;b=u;break;case 3:r=t;g=u;b=i;break;case 4:r=u;g=t;b=i;break;case 5:r=i;g=t;b=u}return[r*255,g*255,b*255]}function yt(n){return u(s(n))}function pt(n){return c(s(n))}function wt(n){return e(s(n))}function bt(n){return o(s(n))}function h(n){var f=n[0]/100,e=n[1]/100,o=n[2]/100,t=n[3]/100,i,r,u;return i=1-Math.min(1,f*(1-t)+t),r=1-Math.min(1,e*(1-t)+t),u=1-Math.min(1,o*(1-t)+t),[i*255,r*255,u*255]}function kt(n){return u(h(n))}function dt(n){return c(h(n))}function gt(n){return f(h(n))}function ni(n){return o(h(n))}function it(n){var u=n[0]/100,f=n[1]/100,e=n[2]/100,t,i,r;return t=u*3.2406+f*-1.5372+e*-.4986,i=u*-.9689+f*1.8758+e*.0415,r=u*.0557+f*-.204+e*1.057,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t=t*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i=i*12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,t=Math.min(Math.max(0,t),1),i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),[t*255,i*255,r*255]}function rt(n){var i=n[0],t=n[1],r=n[2],u,f,e;return i/=95.047,t/=100,r/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,u=116*t-16,f=500*(i-t),e=200*(t-r),[u,f,e]}function ti(n){return k(rt(n))}function w(n){var f=n[0],e=n[1],o=n[2],r,i,u,t;return f<=8?(i=f*100/903.3,t=7.787*(i/100)+16/116):(i=100*Math.pow((f+16)/116,3),t=Math.pow(i/100,1/3)),r=r/95.047<=.008856?r=95.047*(e/500+t-16/116)/7.787:95.047*Math.pow(e/500+t,3),u=u/108.883<=.008859?u=108.883*(t-o/200-16/116)/7.787:108.883*Math.pow(t-o/200,3),[r,i,u]}function k(n){var e=n[0],i=n[1],r=n[2],u,t,f;return u=Math.atan2(r,i),t=u*180/Math.PI,t<0&&(t+=360),f=Math.sqrt(i*i+r*r),[e,f,t]}function ut(n){return it(w(n))}function d(n){var f=n[0],i=n[1],e=n[2],r,u,t;return t=e/180*Math.PI,r=i*Math.cos(t),u=i*Math.sin(t),[f,r,u]}function ii(n){return w(d(n))}function ri(n){return ut(d(n))}function i(n){return v[n]}function ui(n){return u(i(n))}function fi(n){return c(i(n))}function ei(n){return f(i(n))}function oi(n){return e(i(n))}function si(n){return p(i(n))}function hi(n){return y(i(n))}var v,nt,tt;t.exports={rgb2hsl:u,rgb2hsv:c,rgb2hwb:f,rgb2cmyk:e,rgb2keyword:o,rgb2xyz:y,rgb2lab:p,rgb2lch:ft,hsl2rgb:l,hsl2hsv:et,hsl2hwb:ot,hsl2cmyk:st,hsl2keyword:ht,hsv2rgb:a,hsv2hsl:ct,hsv2hwb:lt,hsv2cmyk:at,hsv2keyword:vt,hwb2rgb:s,hwb2hsl:yt,hwb2hsv:pt,hwb2cmyk:wt,hwb2keyword:bt,cmyk2rgb:h,cmyk2hsl:kt,cmyk2hsv:dt,cmyk2hwb:gt,cmyk2keyword:ni,keyword2rgb:i,keyword2hsl:ui,keyword2hsv:fi,keyword2hwb:ei,keyword2cmyk:oi,keyword2lab:si,keyword2xyz:hi,xyz2rgb:it,xyz2lab:rt,xyz2lch:ti,lab2xyz:w,lab2rgb:ut,lab2lch:k,lch2lab:d,lch2xyz:ii,lch2rgb:ri};v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};nt={};for(tt in v)nt[JSON.stringify(v[tt])]=tt},{}],5:[function(n,t){var f=n(4),i=function(){return new u},r,u;for(r in f){i[r+"Raw"]=function(n){return function(t){return typeof t=="number"&&(t=Array.prototype.slice.call(arguments)),f[n](t)}}(r);var o=/(\w+)2(\w+)/.exec(r),e=o[1],s=o[2];i[e]=i[e]||{};i[e][s]=i[r]=function(n){return function(t){var i,r;if(typeof t=="number"&&(t=Array.prototype.slice.call(arguments)),i=f[n](t),typeof i=="string"||i===undefined)return i;for(r=0;r<i.length;r++)i[r]=Math.round(i[r]);return i}}(r)}u=function(){this.convs={}};u.prototype.routeSpace=function(n,t){var i=t[0];return i===undefined?this.getValues(n):(typeof i=="number"&&(i=Array.prototype.slice.call(t)),this.setValues(n,i))};u.prototype.setValues=function(n,t){return this.space=n,this.convs={},this.convs[n]=t,this};u.prototype.getValues=function(n){var t=this.convs[n],r,u;return t||(r=this.space,u=this.convs[r],t=i[r][n](u),this.convs[n]=t),t};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(n){u.prototype[n]=function(){return this.routeSpace(n,arguments)}});t.exports=i},{"4":4}],6:[function(n,t){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(n,t){var i=n(27)();n(26)(i);n(22)(i);n(25)(i);n(21)(i);n(23)(i);n(24)(i);n(28)(i);n(32)(i);n(30)(i);n(31)(i);n(33)(i);n(29)(i);n(34)(i);n(35)(i);n(36)(i);n(37)(i);n(38)(i);n(41)(i);n(39)(i);n(40)(i);n(42)(i);n(43)(i);n(44)(i);n(15)(i);n(16)(i);n(17)(i);n(18)(i);n(19)(i);n(20)(i);n(8)(i);n(9)(i);n(10)(i);n(11)(i);n(12)(i);n(13)(i);n(14)(i);window.Chart=t.exports=i},{"10":10,"11":11,"12":12,"13":13,"14":14,"15":15,"16":16,"17":17,"18":18,"19":19,"20":20,"21":21,"22":22,"23":23,"24":24,"25":25,"26":26,"27":27,"28":28,"29":29,"30":30,"31":31,"32":32,"33":33,"34":34,"35":35,"36":36,"37":37,"38":38,"39":39,"40":40,"41":41,"42":42,"43":43,"44":44,"8":8,"9":9}],8:[function(n,t){"use strict";t.exports=function(n){n.Bar=function(t,i){return i.type="bar",new n(t,i)}}},{}],9:[function(n,t){"use strict";t.exports=function(n){n.Bubble=function(t,i){return i.type="bubble",new n(t,i)}}},{}],10:[function(n,t){"use strict";t.exports=function(n){n.Doughnut=function(t,i){return i.type="doughnut",new n(t,i)}}},{}],11:[function(n,t){"use strict";t.exports=function(n){n.Line=function(t,i){return i.type="line",new n(t,i)}}},{}],12:[function(n,t){"use strict";t.exports=function(n){n.PolarArea=function(t,i){return i.type="polarArea",new n(t,i)}}},{}],13:[function(n,t){"use strict";t.exports=function(n){n.Radar=function(t,i){return i.options=n.helpers.configMerge({aspectRatio:1},i.options),i.type="radar",new n(t,i)}}},{}],14:[function(n,t){"use strict";t.exports=function(n){var t={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(n){return"("+n.xLabel+", "+n.yLabel+")"}}}};n.defaults.scatter=t;n.controllers.scatter=n.controllers.line;n.Scatter=function(t,i){return i.type="scatter",new n(t,i)}}},{}],15:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}};n.controllers.bar=n.DatasetController.extend({dataElementType:n.elements.Rectangle,initialize:function(t,i){n.DatasetController.prototype.initialize.call(this,t,i);this.getMeta().bar=!0},getBarCount:function(){var n=this,i=0;return t.each(n.chart.data.datasets,function(t,r){var u=n.chart.getDatasetMeta(r);u.bar&&n.chart.isDatasetVisible(r)&&++i},n),i},update:function(n){var i=this;t.each(i.getMeta().data,function(t,r){i.updateElement(t,r,n)},i)},updateElement:function(n,i,r){var u=this,s=u.getMeta(),l=u.getScaleForId(s.xAxisID),h=u.getScaleForId(s.yAxisID),c=h.getBasePixel(),e=u.chart.options.elements.rectangle,f=n.custom||{},o=u.getDataset();t.extend(n,{_xScale:l,_yScale:h,_datasetIndex:u.index,_index:i,_model:{x:u.calculateBarX(i,u.index),y:r?c:u.calculateBarY(i,u.index),label:u.chart.data.labels[i],datasetLabel:o.label,base:r?c:u.calculateBarBase(u.index,i),width:u.calculateBarWidth(i),backgroundColor:f.backgroundColor?f.backgroundColor:t.getValueAtIndexOrDefault(o.backgroundColor,i,e.backgroundColor),borderSkipped:f.borderSkipped?f.borderSkipped:e.borderSkipped,borderColor:f.borderColor?f.borderColor:t.getValueAtIndexOrDefault(o.borderColor,i,e.borderColor),borderWidth:f.borderWidth?f.borderWidth:t.getValueAtIndexOrDefault(o.borderWidth,i,e.borderWidth)}});n.pivot()},calculateBarBase:function(n,t){var u=this,l=u.getMeta(),r=u.getScaleForId(l.yAxisID),s=0,i,c,e,o;if(r.options.stacked){var f=u.chart,h=f.data.datasets,a=Number(h[n].data[t]);for(i=0;i<n;i++)c=h[i],e=f.getDatasetMeta(i),e.bar&&e.yAxisID===r.id&&f.isDatasetVisible(i)&&(o=Number(c.data[t]),s+=a<0?Math.min(o,0):Math.max(o,0));return r.getPixelForValue(s)}return r.getBasePixel()},getRuler:function(n){var r=this,c=r.getMeta(),t=r.getScaleForId(c.xAxisID),f=r.getBarCount(),u,o,s,h;u=t.options.type==="category"?t.getPixelForTick(n+1)-t.getPixelForTick(n):t.width/t.ticks.length;var e=u*t.options.categoryPercentage,l=(u-u*t.options.categoryPercentage)/2,i=e/f;return t.ticks.length!==r.chart.data.labels.length&&(o=t.ticks.length/r.chart.data.labels.length,i=i*o),s=i*t.options.barPercentage,h=i-i*t.options.barPercentage,{datasetCount:f,tickWidth:u,categoryWidth:e,categorySpacing:l,fullBarWidth:i,barWidth:s,barSpacing:h}},calculateBarWidth:function(n){var t=this.getScaleForId(this.getMeta().xAxisID),i;return t.options.barThickness?t.options.barThickness:(i=this.getRuler(n),t.options.stacked?i.categoryWidth:i.barWidth)},getBarIndex:function(n){for(var i=0,r,t=0;t<n;++t)r=this.chart.getDatasetMeta(t),r.bar&&this.chart.isDatasetVisible(t)&&++i;return i},calculateBarX:function(n,t){var r=this,o=r.getMeta(),f=r.getScaleForId(o.xAxisID),e=r.getBarIndex(t),i=r.getRuler(n),u=f.getPixelForValue(null,n,t,r.chart.isCombo);return(u-=r.chart.isCombo?i.tickWidth/2:0,f.options.stacked)?u+i.categoryWidth/2+i.categorySpacing:u+i.barWidth/2+i.categorySpacing+i.barWidth*e+i.barSpacing/2+i.barSpacing*e},calculateBarY:function(n,t){var i=this,l=i.getMeta(),u=i.getScaleForId(l.yAxisID),f=Number(i.getDataset().data[n]),o,s,r,c,h,e;if(u.options.stacked){for(o=0,s=0,r=0;r<t;r++)c=i.chart.data.datasets[r],h=i.chart.getDatasetMeta(r),h.bar&&h.yAxisID===u.id&&i.chart.isDatasetVisible(r)&&(e=Number(c.data[n]),e<0?s+=e||0:o+=e||0);return f<0?u.getPixelForValue(s+f):u.getPixelForValue(o+f)}return u.getPixelForValue(f)},draw:function(n){var i=this,r=n||1;t.each(i.getMeta().data,function(n,t){var u=i.getDataset().data[t];u===null||u===undefined||isNaN(u)||n.transition(r).draw()},i)},setHoverStyle:function(n){var u=this.chart.data.datasets[n._datasetIndex],f=n._index,i=n.custom||{},r=n._model;r.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:t.getValueAtIndexOrDefault(u.hoverBackgroundColor,f,t.getHoverColor(r.backgroundColor));r.borderColor=i.hoverBorderColor?i.hoverBorderColor:t.getValueAtIndexOrDefault(u.hoverBorderColor,f,t.getHoverColor(r.borderColor));r.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:t.getValueAtIndexOrDefault(u.hoverBorderWidth,f,r.borderWidth)},removeHoverStyle:function(n){var r=this.chart.data.datasets[n._datasetIndex],u=n._index,i=n.custom||{},f=n._model,e=this.chart.options.elements.rectangle;f.backgroundColor=i.backgroundColor?i.backgroundColor:t.getValueAtIndexOrDefault(r.backgroundColor,u,e.backgroundColor);f.borderColor=i.borderColor?i.borderColor:t.getValueAtIndexOrDefault(r.borderColor,u,e.borderColor);f.borderWidth=i.borderWidth?i.borderWidth:t.getValueAtIndexOrDefault(r.borderWidth,u,e.borderWidth)}});n.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(n,t){var i="";return n.length>0&&(n[0].yLabel?i=n[0].yLabel:t.labels.length>0&&n[0].index<t.labels.length&&(i=t.labels[n[0].index])),i},label:function(n,t){var i=t.datasets[n.datasetIndex].label||"";return i+": "+n.xLabel}}}};n.controllers.horizontalBar=n.controllers.bar.extend({updateElement:function(n,i,r){var u=this,s=u.getMeta(),h=u.getScaleForId(s.xAxisID),l=u.getScaleForId(s.yAxisID),c=h.getBasePixel(),f=n.custom||{},e=u.getDataset(),o=u.chart.options.elements.rectangle;t.extend(n,{_xScale:h,_yScale:l,_datasetIndex:u.index,_index:i,_model:{x:r?c:u.calculateBarX(i,u.index),y:u.calculateBarY(i,u.index),label:u.chart.data.labels[i],datasetLabel:e.label,base:r?c:u.calculateBarBase(u.index,i),height:u.calculateBarHeight(i),backgroundColor:f.backgroundColor?f.backgroundColor:t.getValueAtIndexOrDefault(e.backgroundColor,i,o.backgroundColor),borderSkipped:f.borderSkipped?f.borderSkipped:o.borderSkipped,borderColor:f.borderColor?f.borderColor:t.getValueAtIndexOrDefault(e.borderColor,i,o.borderColor),borderWidth:f.borderWidth?f.borderWidth:t.getValueAtIndexOrDefault(e.borderWidth,i,o.borderWidth)},draw:function(){function h(n){return c[(o+n)%4]}var t=this._chart.ctx,n=this._view,s=n.height/2,r=n.y-s,u=n.y+s,f=n.base-(n.base-n.x),e=n.borderWidth/2,i;n.borderWidth&&(r+=e,u-=e,f+=e);t.beginPath();t.fillStyle=n.backgroundColor;t.strokeStyle=n.borderColor;t.lineWidth=n.borderWidth;var c=[[n.base,u],[n.base,r],[f,r],[f,u]],o=["bottom","left","top","right"].indexOf(n.borderSkipped,0);for(o===-1&&(o=0),t.moveTo.apply(t,h(0)),i=1;i<4;i++)t.lineTo.apply(t,h(i));t.fill();n.borderWidth&&t.stroke()},inRange:function(n,t){var i=this._view,r=!1;return i&&(r=i.x<i.base?t>=i.y-i.height/2&&t<=i.y+i.height/2&&n>=i.x&&n<=i.base:t>=i.y-i.height/2&&t<=i.y+i.height/2&&n>=i.base&&n<=i.x),r}});n.pivot()},calculateBarBase:function(n,t){var u=this,l=u.getMeta(),r=u.getScaleForId(l.xAxisID),s=0,i,c,e,o;if(r.options.stacked){var f=u.chart,h=f.data.datasets,a=Number(h[n].data[t]);for(i=0;i<n;i++)c=h[i],e=f.getDatasetMeta(i),e.bar&&e.xAxisID===r.id&&f.isDatasetVisible(i)&&(o=Number(c.data[t]),s+=a<0?Math.min(o,0):Math.max(o,0));return r.getPixelForValue(s)}return r.getBasePixel()},getRuler:function(n){var r=this,c=r.getMeta(),t=r.getScaleForId(c.yAxisID),f=r.getBarCount(),u,o,s,h;u=t.options.type==="category"?t.getPixelForTick(n+1)-t.getPixelForTick(n):t.width/t.ticks.length;var e=u*t.options.categoryPercentage,l=(u-u*t.options.categoryPercentage)/2,i=e/f;return t.ticks.length!==r.chart.data.labels.length&&(o=t.ticks.length/r.chart.data.labels.length,i=i*o),s=i*t.options.barPercentage,h=i-i*t.options.barPercentage,{datasetCount:f,tickHeight:u,categoryHeight:e,categorySpacing:l,fullBarHeight:i,barHeight:s,barSpacing:h}},calculateBarHeight:function(n){var t=this,i=t.getScaleForId(t.getMeta().yAxisID),r;return i.options.barThickness?i.options.barThickness:(r=t.getRuler(n),i.options.stacked?r.categoryHeight:r.barHeight)},calculateBarX:function(n,t){var i=this,l=i.getMeta(),u=i.getScaleForId(l.xAxisID),f=Number(i.getDataset().data[n]),o,s,r,c,h,e;if(u.options.stacked){for(o=0,s=0,r=0;r<t;r++)c=i.chart.data.datasets[r],h=i.chart.getDatasetMeta(r),h.bar&&h.xAxisID===u.id&&i.chart.isDatasetVisible(r)&&(e=Number(c.data[n]),e<0?s+=e||0:o+=e||0);return f<0?u.getPixelForValue(s+f):u.getPixelForValue(o+f)}return u.getPixelForValue(f)},calculateBarY:function(n,t){var r=this,o=r.getMeta(),f=r.getScaleForId(o.yAxisID),e=r.getBarIndex(t),i=r.getRuler(n),u=f.getPixelForValue(null,n,t,r.chart.isCombo);return(u-=r.chart.isCombo?i.tickHeight/2:0,f.options.stacked)?u+i.categoryHeight/2+i.categorySpacing:u+i.barHeight/2+i.categorySpacing+i.barHeight*e+i.barSpacing/2+i.barSpacing*e}})}},{}],16:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(n,t){var r=t.datasets[n.datasetIndex].label||"",i=t.datasets[n.datasetIndex].data[n.index];return r+": ("+i.x+", "+i.y+", "+i.r+")"}}}};n.controllers.bubble=n.DatasetController.extend({dataElementType:n.elements.Point,update:function(n){var i=this,r=i.getMeta(),u=r.data;t.each(u,function(t,r){i.updateElement(t,r,n)})},updateElement:function(i,r,u){var f=this,a=f.getMeta(),h=f.getScaleForId(a.xAxisID),c=f.getScaleForId(a.yAxisID),e=i.custom||{},v=f.getDataset(),o=v.data[r],y=f.chart.options.elements.point,l=f.index,s;t.extend(i,{_xScale:h,_yScale:c,_datasetIndex:l,_index:r,_model:{x:u?h.getPixelForDecimal(.5):h.getPixelForValue(typeof o=="object"?o:NaN,r,l,f.chart.isCombo),y:u?c.getBasePixel():c.getPixelForValue(o,r,l),radius:u?0:e.radius?e.radius:f.getRadius(o),hitRadius:e.hitRadius?e.hitRadius:t.getValueAtIndexOrDefault(v.hitRadius,r,y.hitRadius)}});n.DatasetController.prototype.removeHoverStyle.call(f,i,y);s=i._model;s.skip=e.skip?e.skip:isNaN(s.x)||isNaN(s.y);i.pivot()},getRadius:function(n){return n.r||this.chart.options.elements.point.radius},setHoverStyle:function(i){var r=this;n.DatasetController.prototype.setHoverStyle.call(r,i);var u=r.chart.data.datasets[i._datasetIndex],f=i._index,e=i.custom||{},o=i._model;o.radius=e.hoverRadius?e.hoverRadius:t.getValueAtIndexOrDefault(u.hoverRadius,f,r.chart.options.elements.point.hoverRadius)+r.getRadius(u.data[f])},removeHoverStyle:function(t){var i=this;n.DatasetController.prototype.removeHoverStyle.call(i,t,i.chart.options.elements.point);var u=i.chart.data.datasets[t._datasetIndex].data[t._index],r=t.custom||{},f=t._model;f.radius=r.radius?r.radius:i.getRadius(u)}})}},{}],17:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=n.defaults;i.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(n){var t=[],i;t.push('<ul class="'+n.id+'-legend">');var u=n.data,r=u.datasets,f=u.labels;if(r.length)for(i=0;i<r[0].data.length;++i)t.push('<li><span style="background-color:'+r[0].backgroundColor[i]+'"><\/span>'),f[i]&&t.push(f[i]),t.push("<\/li>");return t.push("<\/ul>"),t.join("")},legend:{labels:{generateLabels:function(n){var i=n.data;return i.labels.length&&i.datasets.length?i.labels.map(function(r,u){var h=n.getDatasetMeta(0),e=i.datasets[0],c=h.data[u],f=c&&c.custom||{},o=t.getValueAtIndexOrDefault,s=n.options.elements.arc,l=f.backgroundColor?f.backgroundColor:o(e.backgroundColor,u,s.backgroundColor),a=f.borderColor?f.borderColor:o(e.borderColor,u,s.borderColor),v=f.borderWidth?f.borderWidth:o(e.borderWidth,u,s.borderWidth);return{text:r,fillStyle:l,strokeStyle:a,lineWidth:v,hidden:isNaN(e.data[u])||h.data[u].hidden,index:u}}):[]}},onClick:function(n,t){for(var f=t.index,r=this.chart,u,i=0,e=(r.data.datasets||[]).length;i<e;++i)u=r.getDatasetMeta(i),u.data[f].hidden=!u.data[f].hidden;r.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:Math.PI*2,tooltips:{callbacks:{title:function(){return""},label:function(n,t){return t.labels[n.index]+": "+t.datasets[n.datasetIndex].data[n.index]}}}};i.pie=t.clone(i.doughnut);t.extend(i.pie,{cutoutPercentage:0});n.controllers.doughnut=n.controllers.pie=n.DatasetController.extend({dataElementType:n.elements.Arc,linkScales:t.noop,getRingIndex:function(n){for(var i=0,t=0;t<n;++t)this.chart.isDatasetVisible(t)&&++i;return i},update:function(n){var u=this,i=u.chart,h=i.chartArea,c=i.options,w=c.elements.arc,b=h.right-h.left-w.borderWidth,k=h.bottom-h.top-w.borderWidth,d=Math.min(b,k),v={x:0,y:0},y=u.getMeta(),p=c.cutoutPercentage,g=c.circumference,r;if(g<Math.PI*2){r=c.rotation%(Math.PI*2)+Math.PI*2*(r>=Math.PI?-1:r<-Math.PI?1:0);var f=r+g,e={x:Math.cos(r),y:Math.sin(r)},o={x:Math.cos(f),y:Math.sin(f)},tt=r<=0&&0<=f||r<=Math.PI*2&&Math.PI*2<=f,it=r<=Math.PI*.5&&Math.PI*.5<=f||r<=Math.PI*2.5&&Math.PI*2.5<=f,rt=r<=-Math.PI&&-Math.PI<=f||r<=Math.PI&&Math.PI<=f,ut=r<=-Math.PI*.5&&-Math.PI*.5<=f||r<=Math.PI*1.5&&Math.PI*1.5<=f,s=p/100,l={x:rt?-1:Math.min(e.x*(e.x<0?1:s),o.x*(o.x<0?1:s)),y:ut?-1:Math.min(e.y*(e.y<0?1:s),o.y*(o.y<0?1:s))},a={x:tt?1:Math.max(e.x*(e.x>0?1:s),o.x*(o.x>0?1:s)),y:it?1:Math.max(e.y*(e.y>0?1:s),o.y*(o.y>0?1:s))},nt={width:(a.x-l.x)*.5,height:(a.y-l.y)*.5};d=Math.min(b/nt.width,k/nt.height);v={x:(a.x+l.x)*-.5,y:(a.y+l.y)*-.5}}i.borderWidth=u.getMaxBorderWidth(y.data);i.outerRadius=Math.max((d-i.borderWidth)/2,0);i.innerRadius=Math.max(p?i.outerRadius/100*p:1,0);i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount();i.offsetX=v.x*i.outerRadius;i.offsetY=v.y*i.outerRadius;y.total=u.calculateTotal();u.outerRadius=i.outerRadius-i.radiusLength*u.getRingIndex(u.index);u.innerRadius=u.outerRadius-i.radiusLength;t.each(y.data,function(t,i){u.updateElement(t,i,n)})},updateElement:function(n,i,r){var u=this,f=u.chart,s=f.chartArea,e=f.options,h=e.animation,l=(s.left+s.right)/2,a=(s.top+s.bottom)/2,v=e.rotation,y=e.rotation,c=u.getDataset(),p=r&&h.animateRotate?0:n.hidden?0:u.calculateCircumference(c.data[i])*(e.circumference/(2*Math.PI)),w=r&&h.animateScale?0:u.innerRadius,b=r&&h.animateScale?0:u.outerRadius,k=t.getValueAtIndexOrDefault,o;t.extend(n,{_datasetIndex:u.index,_index:i,_model:{x:l+f.offsetX,y:a+f.offsetY,startAngle:v,endAngle:y,circumference:p,outerRadius:b,innerRadius:w,label:k(c.label,i,f.data.labels[i])}});o=n._model;this.removeHoverStyle(n);r&&h.animateRotate||(o.startAngle=i===0?e.rotation:u.getMeta().data[i-1]._model.endAngle,o.endAngle=o.startAngle+o.circumference);n.pivot()},removeHoverStyle:function(t){n.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var r=this.getDataset(),u=this.getMeta(),i=0,n;return t.each(u.data,function(t,u){n=r.data[u];isNaN(n)||t.hidden||(i+=Math.abs(n))}),i},calculateCircumference:function(n){var t=this.getMeta().total;return t>0&&!isNaN(n)?Math.PI*2*(n/t):0},getMaxBorderWidth:function(n){for(var t=0,f=this.index,e=n.length,r,u,i=0;i<e;i++)r=n[i]._model?n[i]._model.borderWidth:0,u=n[i]._chart?n[i]._chart.config.data.datasets[f].hoverBorderWidth:0,t=r>t?r:t,t=u>t?u:t;return t}})}},{}],18:[function(n,t){"use strict";t.exports=function(n){function i(n,i){return t.getValueOrDefault(n.showLine,i.showLines)}var t=n.helpers;n.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}};n.controllers.line=n.DatasetController.extend({datasetElementType:n.elements.Line,dataElementType:n.elements.Point,addElementAndReset:function(t){var r=this,u=r.chart.options,f=r.getMeta();n.DatasetController.prototype.addElementAndReset.call(r,t);i(r.getDataset(),u)&&f.dataset._model.tension!==0&&r.updateBezierControlPoints()},update:function(n){var o=this,a=o.getMeta(),s=a.dataset,h=a.data||[],v=o.chart.options,f=v.elements.line,c=o.getScaleForId(a.yAxisID),e,l,r,u=o.getDataset(),y=i(u,v);for(y&&(r=s.custom||{},u.tension!==undefined&&u.lineTension===undefined&&(u.lineTension=u.tension),s._scale=c,s._datasetIndex=o.index,s._children=h,s._model={spanGaps:u.spanGaps?u.spanGaps:v.spanGaps,tension:r.tension?r.tension:t.getValueOrDefault(u.lineTension,f.tension),backgroundColor:r.backgroundColor?r.backgroundColor:u.backgroundColor||f.backgroundColor,borderWidth:r.borderWidth?r.borderWidth:u.borderWidth||f.borderWidth,borderColor:r.borderColor?r.borderColor:u.borderColor||f.borderColor,borderCapStyle:r.borderCapStyle?r.borderCapStyle:u.borderCapStyle||f.borderCapStyle,borderDash:r.borderDash?r.borderDash:u.borderDash||f.borderDash,borderDashOffset:r.borderDashOffset?r.borderDashOffset:u.borderDashOffset||f.borderDashOffset,borderJoinStyle:r.borderJoinStyle?r.borderJoinStyle:u.borderJoinStyle||f.borderJoinStyle,fill:r.fill?r.fill:u.fill!==undefined?u.fill:f.fill,steppedLine:r.steppedLine?r.steppedLine:t.getValueOrDefault(u.steppedLine,f.stepped),cubicInterpolationMode:r.cubicInterpolationMode?r.cubicInterpolationMode:t.getValueOrDefault(u.cubicInterpolationMode,f.cubicInterpolationMode),scaleTop:c.top,scaleBottom:c.bottom,scaleZero:c.getBasePixel()},s.pivot()),e=0,l=h.length;e<l;++e)o.updateElement(h[e],e,n);for(y&&s._model.tension!==0&&o.updateBezierControlPoints(),e=0,l=h.length;e<l;++e)h[e].pivot()},getPointBackgroundColor:function(n,i){var r=this.chart.options.elements.point.backgroundColor,u=this.getDataset(),f=n.custom||{};return f.backgroundColor?r=f.backgroundColor:u.pointBackgroundColor?r=t.getValueAtIndexOrDefault(u.pointBackgroundColor,i,r):u.backgroundColor&&(r=u.backgroundColor),r},getPointBorderColor:function(n,i){var r=this.chart.options.elements.point.borderColor,u=this.getDataset(),f=n.custom||{};return f.borderColor?r=f.borderColor:u.pointBorderColor?r=t.getValueAtIndexOrDefault(u.pointBorderColor,i,r):u.borderColor&&(r=u.borderColor),r},getPointBorderWidth:function(n,i){var r=this.chart.options.elements.point.borderWidth,u=this.getDataset(),f=n.custom||{};return f.borderWidth?r=f.borderWidth:u.pointBorderWidth?r=t.getValueAtIndexOrDefault(u.pointBorderWidth,i,r):u.borderWidth&&(r=u.borderWidth),r},updateElement:function(n,i,r){var f=this,e=f.getMeta(),o=n.custom||{},u=f.getDataset(),s=f.index,h=u.data[i],v=f.getScaleForId(e.yAxisID),y=f.getScaleForId(e.xAxisID),c=f.chart.options.elements.point,l,a,p=f.chart.data.labels||[],w=p.length===1||u.data.length===1||f.chart.isCombo;u.radius!==undefined&&u.pointRadius===undefined&&(u.pointRadius=u.radius);u.hitRadius!==undefined&&u.pointHitRadius===undefined&&(u.pointHitRadius=u.hitRadius);l=y.getPixelForValue(typeof h=="object"?h:NaN,i,s,w);a=r?v.getBasePixel():f.calculatePointY(h,i,s);n._xScale=y;n._yScale=v;n._datasetIndex=s;n._index=i;n._model={x:l,y:a,skip:o.skip||isNaN(l)||isNaN(a),radius:o.radius||t.getValueAtIndexOrDefault(u.pointRadius,i,c.radius),pointStyle:o.pointStyle||t.getValueAtIndexOrDefault(u.pointStyle,i,c.pointStyle),backgroundColor:f.getPointBackgroundColor(n,i),borderColor:f.getPointBorderColor(n,i),borderWidth:f.getPointBorderWidth(n,i),tension:e.dataset._model?e.dataset._model.tension:0,steppedLine:e.dataset._model?e.dataset._model.steppedLine:!1,hitRadius:o.hitRadius||t.getValueAtIndexOrDefault(u.pointHitRadius,i,c.hitRadius)}},calculatePointY:function(n,t,i){var o=this,s=o.chart,v=o.getMeta(),r=o.getScaleForId(v.yAxisID),c=0,l=0,u,a,h,f,e;if(r.options.stacked){for(u=0;u<i;u++)a=s.data.datasets[u],h=s.getDatasetMeta(u),h.type==="line"&&h.yAxisID===r.id&&s.isDatasetVisible(u)&&(f=Number(r.getRightValue(a.data[t])),f<0?l+=f||0:c+=f||0);return e=Number(r.getRightValue(n)),e<0?r.getPixelForValue(l+e):r.getPixelForValue(c+e)}return r.getPixelForValue(n)},updateBezierControlPoints:function(){function s(n,t,i){return Math.max(Math.min(n,i),t)}var h=this,e=h.getMeta(),u=h.chart.chartArea,r=e.data||[],i,o,c,n,f;if(e.dataset._model.spanGaps&&(r=r.filter(function(n){return!n._model.skip})),e.dataset._model.cubicInterpolationMode=="monotone")t.splineCurveMonotone(r);else for(i=0,o=r.length;i<o;++i)c=r[i],n=c._model,f=t.splineCurve(t.previousItem(r,i)._model,n,t.nextItem(r,i)._model,e.dataset._model.tension),n.controlPointPreviousX=f.previous.x,n.controlPointPreviousY=f.previous.y,n.controlPointNextX=f.next.x,n.controlPointNextY=f.next.y;if(h.chart.options.elements.line.capBezierPoints)for(i=0,o=r.length;i<o;++i)n=r[i]._model,n.controlPointPreviousX=s(n.controlPointPreviousX,u.left,u.right),n.controlPointPreviousY=s(n.controlPointPreviousY,u.top,u.bottom),n.controlPointNextX=s(n.controlPointNextX,u.left,u.right),n.controlPointNextY=s(n.controlPointNextY,u.top,u.bottom)},draw:function(n){for(var f=this,e=f.getMeta(),r=e.data||[],o=n||1,t=0,u=r.length;t<u;++t)r[t].transition(o);for(i(f.getDataset(),f.chart.options)&&e.dataset.transition(o).draw(),t=0,u=r.length;t<u;++t)r[t].draw()},setHoverStyle:function(n){var r=this.chart.data.datasets[n._datasetIndex],u=n._index,f=n.custom||{},i=n._model;i.radius=f.hoverRadius||t.getValueAtIndexOrDefault(r.pointHoverRadius,u,this.chart.options.elements.point.hoverRadius);i.backgroundColor=f.hoverBackgroundColor||t.getValueAtIndexOrDefault(r.pointHoverBackgroundColor,u,t.getHoverColor(i.backgroundColor));i.borderColor=f.hoverBorderColor||t.getValueAtIndexOrDefault(r.pointHoverBorderColor,u,t.getHoverColor(i.borderColor));i.borderWidth=f.hoverBorderWidth||t.getValueAtIndexOrDefault(r.pointHoverBorderWidth,u,i.borderWidth)},removeHoverStyle:function(n){var i=this,r=i.chart.data.datasets[n._datasetIndex],u=n._index,e=n.custom||{},f=n._model;r.radius!==undefined&&r.pointRadius===undefined&&(r.pointRadius=r.radius);f.radius=e.radius||t.getValueAtIndexOrDefault(r.pointRadius,u,i.chart.options.elements.point.radius);f.backgroundColor=i.getPointBackgroundColor(n,u);f.borderColor=i.getPointBorderColor(n,u);f.borderWidth=i.getPointBorderWidth(n,u)}})}},{}],19:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(n){var t=[],i;t.push('<ul class="'+n.id+'-legend">');var u=n.data,r=u.datasets,f=u.labels;if(r.length)for(i=0;i<r[0].data.length;++i)t.push('<li><span style="background-color:'+r[0].backgroundColor[i]+'">'),f[i]&&t.push(f[i]),t.push("<\/span><\/li>");return t.push("<\/ul>"),t.join("")},legend:{labels:{generateLabels:function(n){var i=n.data;return i.labels.length&&i.datasets.length?i.labels.map(function(r,u){var h=n.getDatasetMeta(0),e=i.datasets[0],c=h.data[u],f=c.custom||{},o=t.getValueAtIndexOrDefault,s=n.options.elements.arc,l=f.backgroundColor?f.backgroundColor:o(e.backgroundColor,u,s.backgroundColor),a=f.borderColor?f.borderColor:o(e.borderColor,u,s.borderColor),v=f.borderWidth?f.borderWidth:o(e.borderWidth,u,s.borderWidth);return{text:r,fillStyle:l,strokeStyle:a,lineWidth:v,hidden:isNaN(e.data[u])||h.data[u].hidden,index:u}}):[]}},onClick:function(n,t){for(var f=t.index,r=this.chart,u,i=0,e=(r.data.datasets||[]).length;i<e;++i)u=r.getDatasetMeta(i),u.data[f].hidden=!u.data[f].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(n,t){return t.labels[n.index]+": "+n.yLabel}}}};n.controllers.polarArea=n.DatasetController.extend({dataElementType:n.elements.Arc,linkScales:t.noop,update:function(n){var r=this,i=r.chart,u=i.chartArea,e=r.getMeta(),f=i.options,o=f.elements.arc,s=Math.min(u.right-u.left,u.bottom-u.top);i.outerRadius=Math.max((s-o.borderWidth/2)/2,0);i.innerRadius=Math.max(f.cutoutPercentage?i.outerRadius/100*f.cutoutPercentage:1,0);i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount();r.outerRadius=i.outerRadius-i.radiusLength*r.index;r.innerRadius=r.outerRadius-i.radiusLength;e.count=r.countVisibleElements();t.each(e.data,function(t,i){r.updateElement(t,i,n)})},updateElement:function(n,i,r){for(var u=this,s=u.chart,e=u.getDataset(),l=s.options,h=l.animation,f=s.scale,w=t.getValueAtIndexOrDefault,a=s.data.labels,v=u.calculateCircumference(e.data[i]),b=f.xCenter,k=f.yCenter,y=0,d=u.getMeta(),o=0;o<i;++o)isNaN(e.data[o])||d.data[o].hidden||++y;var c=l.startAngle,g=n.hidden?0:f.getDistanceFromCenterForValue(e.data[i]),p=c+v*y,nt=p+(n.hidden?0:v),tt=h.animateScale?0:f.getDistanceFromCenterForValue(e.data[i]);t.extend(n,{_datasetIndex:u.index,_index:i,_scale:f,_model:{x:b,y:k,innerRadius:0,outerRadius:r?tt:g,startAngle:r&&h.animateRotate?c:p,endAngle:r&&h.animateRotate?c:nt,label:w(a,i,a[i])}});u.removeHoverStyle(n);n.pivot()},removeHoverStyle:function(t){n.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var i=this.getDataset(),r=this.getMeta(),n=0;return t.each(r.data,function(t,r){isNaN(i.data[r])||t.hidden||n++}),n},calculateCircumference:function(n){var t=this.getMeta().count;return t>0&&!isNaN(n)?2*Math.PI/t:0}})}},{}],20:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}};n.controllers.radar=n.DatasetController.extend({datasetElementType:n.elements.Line,dataElementType:n.elements.Point,linkScales:t.noop,addElementAndReset:function(t){n.DatasetController.prototype.addElementAndReset.call(this,t);this.updateBezierControlPoints()},update:function(n){var f=this,e=f.getMeta(),h=e.dataset,s=e.data,i=h.custom||{},r=f.getDataset(),u=f.chart.options.elements.line,o=f.chart.scale;r.tension!==undefined&&r.lineTension===undefined&&(r.lineTension=r.tension);t.extend(e.dataset,{_datasetIndex:f.index,_children:s,_loop:!0,_model:{tension:i.tension?i.tension:t.getValueOrDefault(r.lineTension,u.tension),backgroundColor:i.backgroundColor?i.backgroundColor:r.backgroundColor||u.backgroundColor,borderWidth:i.borderWidth?i.borderWidth:r.borderWidth||u.borderWidth,borderColor:i.borderColor?i.borderColor:r.borderColor||u.borderColor,fill:i.fill?i.fill:r.fill!==undefined?r.fill:u.fill,borderCapStyle:i.borderCapStyle?i.borderCapStyle:r.borderCapStyle||u.borderCapStyle,borderDash:i.borderDash?i.borderDash:r.borderDash||u.borderDash,borderDashOffset:i.borderDashOffset?i.borderDashOffset:r.borderDashOffset||u.borderDashOffset,borderJoinStyle:i.borderJoinStyle?i.borderJoinStyle:r.borderJoinStyle||u.borderJoinStyle,scaleTop:o.top,scaleBottom:o.bottom,scaleZero:o.getBasePosition()}});e.dataset.pivot();t.each(s,function(t,i){f.updateElement(t,i,n)},f);f.updateBezierControlPoints()},updateElement:function(n,i,r){var o=this,u=n.custom||{},f=o.getDataset(),s=o.chart.scale,e=o.chart.options.elements.point,h=s.getPointPositionForValue(i,f.data[i]);t.extend(n,{_datasetIndex:o.index,_index:i,_scale:s,_model:{x:r?s.xCenter:h.x,y:r?s.yCenter:h.y,tension:u.tension?u.tension:t.getValueOrDefault(f.tension,o.chart.options.elements.line.tension),radius:u.radius?u.radius:t.getValueAtIndexOrDefault(f.pointRadius,i,e.radius),backgroundColor:u.backgroundColor?u.backgroundColor:t.getValueAtIndexOrDefault(f.pointBackgroundColor,i,e.backgroundColor),borderColor:u.borderColor?u.borderColor:t.getValueAtIndexOrDefault(f.pointBorderColor,i,e.borderColor),borderWidth:u.borderWidth?u.borderWidth:t.getValueAtIndexOrDefault(f.pointBorderWidth,i,e.borderWidth),pointStyle:u.pointStyle?u.pointStyle:t.getValueAtIndexOrDefault(f.pointStyle,i,e.pointStyle),hitRadius:u.hitRadius?u.hitRadius:t.getValueAtIndexOrDefault(f.hitRadius,i,e.hitRadius)}});n._model.skip=u.skip?u.skip:isNaN(n._model.x)||isNaN(n._model.y)},updateBezierControlPoints:function(){var n=this.chart.chartArea,i=this.getMeta();t.each(i.data,function(r,u){var f=r._model,e=t.splineCurve(t.previousItem(i.data,u,!0)._model,f,t.nextItem(i.data,u,!0)._model,f.tension);f.controlPointPreviousX=Math.max(Math.min(e.previous.x,n.right),n.left);f.controlPointPreviousY=Math.max(Math.min(e.previous.y,n.bottom),n.top);f.controlPointNextX=Math.max(Math.min(e.next.x,n.right),n.left);f.controlPointNextY=Math.max(Math.min(e.next.y,n.bottom),n.top);r.pivot()})},draw:function(n){var i=this.getMeta(),r=n||1;t.each(i.data,function(n){n.transition(r)});i.dataset.transition(r).draw();t.each(i.data,function(n){n.draw()})},setHoverStyle:function(n){var u=this.chart.data.datasets[n._datasetIndex],i=n.custom||{},f=n._index,r=n._model;r.radius=i.hoverRadius?i.hoverRadius:t.getValueAtIndexOrDefault(u.pointHoverRadius,f,this.chart.options.elements.point.hoverRadius);r.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:t.getValueAtIndexOrDefault(u.pointHoverBackgroundColor,f,t.getHoverColor(r.backgroundColor));r.borderColor=i.hoverBorderColor?i.hoverBorderColor:t.getValueAtIndexOrDefault(u.pointHoverBorderColor,f,t.getHoverColor(r.borderColor));r.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:t.getValueAtIndexOrDefault(u.pointHoverBorderWidth,f,r.borderWidth)},removeHoverStyle:function(n){var r=this.chart.data.datasets[n._datasetIndex],i=n.custom||{},u=n._index,f=n._model,e=this.chart.options.elements.point;f.radius=i.radius?i.radius:t.getValueAtIndexOrDefault(r.radius,u,e.radius);f.backgroundColor=i.backgroundColor?i.backgroundColor:t.getValueAtIndexOrDefault(r.pointBackgroundColor,u,e.backgroundColor);f.borderColor=i.borderColor?i.borderColor:t.getValueAtIndexOrDefault(r.pointBorderColor,u,e.borderColor);f.borderWidth=i.borderWidth?i.borderWidth:t.getValueAtIndexOrDefault(r.pointBorderWidth,u,e.borderWidth)}})}},{}],21:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:t.noop,onComplete:t.noop};n.Animation=n.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null});n.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(n,t,i,r){var u=this,f;for(r||(n.animating=!0),f=0;f<u.animations.length;++f)if(u.animations[f].chartInstance===n){u.animations[f].animationObject=t;return}u.animations.push({chartInstance:n,animationObject:t});u.animations.length===1&&u.requestAnimationFrame()},cancelAnimation:function(n){var i=t.findIndex(this.animations,function(t){return t.chartInstance===n});i!==-1&&(this.animations.splice(i,1),n.animating=!1)},requestAnimationFrame:function(){var n=this;n.request===null&&(n.request=t.requestAnimFrame.call(window,function(){n.request=null;n.startDigest()}))},startDigest:function(){var n=this,f=Date.now(),i=0,t,r,u;for(n.dropFrames>1&&(i=Math.floor(n.dropFrames),n.dropFrames=n.dropFrames%1),t=0;t<n.animations.length;)n.animations[t].animationObject.currentStep===null&&(n.animations[t].animationObject.currentStep=0),n.animations[t].animationObject.currentStep+=1+i,n.animations[t].animationObject.currentStep>n.animations[t].animationObject.numSteps&&(n.animations[t].animationObject.currentStep=n.animations[t].animationObject.numSteps),n.animations[t].animationObject.render(n.animations[t].chartInstance,n.animations[t].animationObject),n.animations[t].animationObject.onAnimationProgress&&n.animations[t].animationObject.onAnimationProgress.call&&n.animations[t].animationObject.onAnimationProgress.call(n.animations[t].chartInstance,n.animations[t]),n.animations[t].animationObject.currentStep===n.animations[t].animationObject.numSteps?(n.animations[t].animationObject.onAnimationComplete&&n.animations[t].animationObject.onAnimationComplete.call&&n.animations[t].animationObject.onAnimationComplete.call(n.animations[t].chartInstance,n.animations[t]),n.animations[t].chartInstance.animating=!1,n.animations.splice(t,1)):++t;r=Date.now();u=(r-f)/n.frameDuration;n.dropFrames+=u;n.animations.length>0&&n.requestAnimationFrame()}}}},{}],22:[function(n,t){"use strict";t.exports=function(n){var t=n.canvasHelpers={};t.drawPoint=function(n,t,i,r,u){var c,s,e,o,h,f;if(typeof t=="object"&&(c=t.toString(),c==="[object HTMLImageElement]"||c==="[object HTMLCanvasElement]")){n.drawImage(t,r-t.width/2,u-t.height/2);return}if(!isNaN(i)&&!(i<=0)){switch(t){default:n.beginPath();n.arc(r,u,i,0,Math.PI*2);n.closePath();n.fill();break;case"triangle":n.beginPath();s=3*i/Math.sqrt(3);h=s*Math.sqrt(3)/2;n.moveTo(r-s/2,u+h/3);n.lineTo(r+s/2,u+h/3);n.lineTo(r,u-2*h/3);n.closePath();n.fill();break;case"rect":f=1/Math.SQRT2*i;n.beginPath();n.fillRect(r-f,u-f,2*f,2*f);n.strokeRect(r-f,u-f,2*f,2*f);break;case"rectRot":f=1/Math.SQRT2*i;n.beginPath();n.moveTo(r-f,u);n.lineTo(r,u+f);n.lineTo(r+f,u);n.lineTo(r,u-f);n.closePath();n.fill();break;case"cross":n.beginPath();n.moveTo(r,u+i);n.lineTo(r,u-i);n.moveTo(r-i,u);n.lineTo(r+i,u);n.closePath();break;case"crossRot":n.beginPath();e=Math.cos(Math.PI/4)*i;o=Math.sin(Math.PI/4)*i;n.moveTo(r-e,u-o);n.lineTo(r+e,u+o);n.moveTo(r-e,u+o);n.lineTo(r+e,u-o);n.closePath();break;case"star":n.beginPath();n.moveTo(r,u+i);n.lineTo(r,u-i);n.moveTo(r-i,u);n.lineTo(r+i,u);e=Math.cos(Math.PI/4)*i;o=Math.sin(Math.PI/4)*i;n.moveTo(r-e,u-o);n.lineTo(r+e,u+o);n.moveTo(r-e,u+o);n.lineTo(r+e,u-o);n.closePath();break;case"line":n.beginPath();n.moveTo(r-i,u);n.lineTo(r+i,u);n.closePath();break;case"dash":n.beginPath();n.moveTo(r,u);n.lineTo(r+i,u);n.closePath()}n.stroke()}}}},{}],23:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.types={};n.instances={};n.controllers={};n.Controller=function(i){return this.chart=i,this.config=i.config,this.options=this.config.options=t.configMerge(n.defaults.global,n.defaults[this.config.type],this.config.options||{}),this.id=t.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),n.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this};t.extend(n.Controller.prototype,{initialize:function(){var t=this;return n.plugins.notify("beforeInit",[t]),t.bindEvents(),t.ensureScalesHaveIDs(),t.buildOrUpdateControllers(),t.buildScales(),t.updateLayout(),t.resetElements(),t.initToolTip(),t.update(),n.plugins.notify("afterInit",[t]),t},clear:function(){return t.clear(this.chart),this},stop:function(){return n.animationService.cancelAnimation(this),this},resize:function(i){var r=this,u=r.chart,f=u.canvas,e=t.getMaximumWidth(f),o=u.aspectRatio,s=r.options.maintainAspectRatio&&isNaN(o)===!1&&isFinite(o)&&o!==0?e/o:t.getMaximumHeight(f),c=u.width!==e||u.height!==s,h;if(!c)return r;if(f.width=u.width=e,f.height=u.height=s,t.retinaScale(u),h={width:e,height:s},n.plugins.notify("resize",[r,h]),r.options.onResize)r.options.onResize(r,h);return i||(r.stop(),r.update(r.options.responsiveAnimationDuration)),r},ensureScalesHaveIDs:function(){var i=this.options,r=i.scales||{},n=i.scale;t.each(r.xAxes,function(n,t){n.id=n.id||"x-axis-"+t});t.each(r.yAxes,function(n,t){n.id=n.id||"y-axis-"+t});n&&(n.id=n.id||"scale")},buildScales:function(){var i=this,r=i.options,f=i.scales={},u=[];r.scales&&(u=u.concat((r.scales.xAxes||[]).map(function(n){return{options:n,dtype:"category"}}),(r.scales.yAxes||[]).map(function(n){return{options:n,dtype:"linear"}})));r.scale&&u.push({options:r.scale,dtype:"radialLinear",isDefault:!0});t.each(u,function(r){var e=r.options,s=t.getValueOrDefault(e.type,r.dtype),o=n.scaleService.getScaleConstructor(s),u;o&&(u=new o({id:e.id,options:e,ctx:i.chart.ctx,chart:i}),f[u.id]=u,r.isDefault&&(i.scale=u))});n.scaleService.addScalesToLayout(this)},updateLayout:function(){n.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var i=this,r=[],f=[],u;if(t.each(i.data.datasets,function(t,u){var e=i.getDatasetMeta(u);e.type||(e.type=t.type||i.config.type);r.push(e.type);e.controller?e.controller.updateIndex(u):(e.controller=new n.controllers[e.type](i,u),f.push(e.controller))},i),r.length>1)for(u=1;u<r.length;u++)if(r[u]!==r[u-1]){i.isCombo=!0;break}return f},resetElements:function(){var n=this;t.each(n.data.datasets,function(t,i){n.getDatasetMeta(i).controller.reset()},n)},update:function(i,r){var u=this,f;n.plugins.notify("beforeUpdate",[u]);u.tooltip._data=u.data;f=u.buildOrUpdateControllers();t.each(u.data.datasets,function(n,t){u.getDatasetMeta(t).controller.buildOrUpdateElements()},u);n.layoutService.update(u,u.chart.width,u.chart.height);n.plugins.notify("afterScaleUpdate",[u]);t.each(f,function(n){n.reset()});u.updateDatasets();n.plugins.notify("afterUpdate",[u]);u.render(i,r)},updateDatasets:function(){var t=this,i,r;if(n.plugins.notify("beforeDatasetsUpdate",[t])){for(i=0,r=t.data.datasets.length;i<r;++i)t.getDatasetMeta(i).controller.update();n.plugins.notify("afterDatasetsUpdate",[t])}},render:function(i,r){var e=this,u,f;return n.plugins.notify("beforeRender",[e]),u=e.options.animation,u&&(typeof i!="undefined"&&i!==0||typeof i=="undefined"&&u.duration!==0)?(f=new n.Animation,f.numSteps=(i||u.duration)/16.66,f.easing=u.easing,f.render=function(n,i){var u=t.easingEffects[i.easing],r=i.currentStep/i.numSteps,f=u(r);n.draw(f,r,i.currentStep)},f.onAnimationProgress=u.onProgress,f.onAnimationComplete=u.onComplete,n.animationService.addAnimation(e,f,i,r)):(e.draw(),u&&u.onComplete&&u.onComplete.call&&u.onComplete.call(e)),e},draw:function(i){var r=this,u=i||1;r.clear();n.plugins.notify("beforeDraw",[r,u]);t.each(r.boxes,function(n){n.draw(r.chartArea)},r);r.scale&&r.scale.draw();n.plugins.notify("beforeDatasetsDraw",[r,u]);t.each(r.data.datasets,function(n,t){r.isDatasetVisible(t)&&r.getDatasetMeta(t).controller.draw(i)},r,!0);n.plugins.notify("afterDatasetsDraw",[r,u]);r.tooltip.transition(u).draw();n.plugins.notify("afterDraw",[r,u])},getElementAtEvent:function(n){var i=this,u=t.getRelativePosition(n,i.chart),r=[];return t.each(i.data.datasets,function(n,f){if(i.isDatasetVisible(f)){var e=i.getDatasetMeta(f);t.each(e.data,function(n){if(n.inRange(u.x,u.y))return r.push(n),r})}}),r.slice(0,1)},getElementsAtEvent:function(n){var i=this,u=t.getRelativePosition(n,i.chart),r=[],f=function(){var n,r,t;if(i.data.datasets)for(n=0;n<i.data.datasets.length;n++)if(r=i.getDatasetMeta(n),i.isDatasetVisible(n))for(t=0;t<r.data.length;t++)if(r.data[t].inRange(u.x,u.y))return r.data[t]}.call(i);return f?(t.each(i.data.datasets,function(n,t){if(i.isDatasetVisible(t)){var e=i.getDatasetMeta(t),u=e.data[f._index];u&&!u._view.skip&&r.push(u)}},i),r):r},getElementsAtXAxis:function(n){var i=this,u=t.getRelativePosition(n,i.chart),r=[],f=function(){var n,r,t;if(i.data.datasets)for(n=0;n<i.data.datasets.length;n++)if(r=i.getDatasetMeta(n),i.isDatasetVisible(n))for(t=0;t<r.data.length;t++)if(r.data[t].inLabelRange(u.x,u.y))return r.data[t]}.call(i);return f?(t.each(i.data.datasets,function(n,u){if(i.isDatasetVisible(u)){var e=i.getDatasetMeta(u),o=t.findIndex(e.data,function(n){return f._model.x===n._model.x});o===-1||e.data[o]._view.skip||r.push(e.data[o])}},i),r):r},getElementsAtEventForMode:function(n,t){var i=this;switch(t){case"single":return i.getElementAtEvent(n);case"label":return i.getElementsAtEvent(n);case"dataset":return i.getDatasetAtEvent(n);case"x-axis":return i.getElementsAtXAxis(n);default:return n}},getDatasetAtEvent:function(n){var t=this.getElementAtEvent(n);return t.length>0&&(t=this.getDatasetMeta(t[0]._datasetIndex).data),t},getDatasetMeta:function(n){var r=this,t=r.data.datasets[n],i;return t._meta||(t._meta={}),i=t._meta[r.id],i||(i=t._meta[r.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,n=0,i=this.data.datasets.length;n<i;++n)this.isDatasetVisible(n)&&t++;return t},isDatasetVisible:function(n){var t=this.getDatasetMeta(n);return typeof t.hidden=="boolean"?!t.hidden:!this.data.datasets[n].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var i=this,r;i.stop();i.clear();t.unbindEvents(i,i.events);t.removeResizeListener(i.chart.canvas.parentNode);r=i.chart.canvas;r.width=i.chart.width;r.height=i.chart.height;i.chart.originalDevicePixelRatio!==undefined&&i.chart.ctx.scale(1/i.chart.originalDevicePixelRatio,1/i.chart.originalDevicePixelRatio);r.style.width=i.chart.originalCanvasStyleWidth;r.style.height=i.chart.originalCanvasStyleHeight;n.plugins.notify("destroy",[i]);delete n.instances[i.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new n.Tooltip({_chart:t.chart,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var n=this;t.bindEvents(n,n.options.events,function(t){n.eventHandler(t)})},updateHoverStyle:function(n,t,i){var e=i?"setHoverStyle":"removeHoverStyle",r,u,f;switch(t){case"single":n=[n[0]];break;case"label":case"dataset":case"x-axis":break;default:return}for(u=0,f=n.length;u<f;++u)r=n[u],r&&this.getDatasetMeta(r._datasetIndex).controller[e](r)},eventHandler:function(n){var i=this,u=i.tooltip,e=i.options||{},r=e.hover,f=e.tooltips;return i.lastActive=i.lastActive||[],i.lastTooltipActive=i.lastTooltipActive||[],n.type==="mouseout"?(i.active=[],i.tooltipActive=[]):(i.active=i.getElementsAtEventForMode(n,r.mode),i.tooltipActive=i.getElementsAtEventForMode(n,f.mode)),r.onHover&&r.onHover.call(i,i.active),(n.type==="mouseup"||n.type==="click")&&(e.onClick&&e.onClick.call(i,n,i.active),i.legend&&i.legend.handleEvent&&i.legend.handleEvent(n)),i.lastActive.length&&i.updateHoverStyle(i.lastActive,r.mode,!1),i.active.length&&r.mode&&i.updateHoverStyle(i.active,r.mode,!0),(f.enabled||f.custom)&&(u.initialize(),u._active=i.tooltipActive,u.update(!0)),u.pivot(),i.animating||t.arrayEquals(i.active,i.lastActive)&&t.arrayEquals(i.tooltipActive,i.lastTooltipActive)||(i.stop(),(f.enabled||f.custom)&&u.update(!0),i.render(r.animationDuration,!0)),i.lastActive=i.active,i.lastTooltipActive=i.tooltipActive,i}})}},{}],24:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=t.noop;n.DatasetController=function(n,t){this.initialize.call(this,n,t)};t.extend(n.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(n,t){var i=this;i.chart=n;i.index=t;i.linkScales();i.addElements()},updateIndex:function(n){this.index=n},linkScales:function(){var n=this,t=n.getMeta(),i=n.getDataset();t.xAxisID===null&&(t.xAxisID=i.xAxisID||n.chart.options.scales.xAxes[0].id);t.yAxisID===null&&(t.yAxisID=i.yAxisID||n.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(n){return this.chart.scales[n]},reset:function(){this.update(!0)},createMetaDataset:function(){var n=this,t=n.datasetElementType;return t&&new t({_chart:n.chart.chart,_datasetIndex:n.index})},createMetaData:function(n){var t=this,i=t.dataElementType;return i&&new i({_chart:t.chart.chart,_datasetIndex:t.index,_index:n})},addElements:function(){for(var t=this,i=t.getMeta(),f=t.getDataset().data||[],r=i.data,n=0,u=f.length;n<u;++n)r[n]=r[n]||t.createMetaData(i,n);i.dataset=i.dataset||t.createMetaDataset()},addElementAndReset:function(n){var t=this,i=t.createMetaData(n);t.getMeta().data.splice(n,0,i);t.updateElement(i,n,!0)},buildOrUpdateElements:function(){var u=this.getMeta(),r=u.data,n=this.getDataset().data.length,t=r.length,i;if(n<t)r.splice(n,t-n);else if(n>t)for(i=t;i<n;++i)this.addElementAndReset(i)},update:i,draw:function(n){var i=n||1;t.each(this.getMeta().data,function(n){n.transition(i).draw()})},removeHoverStyle:function(n,i){var u=this.chart.data.datasets[n._datasetIndex],f=n._index,r=n.custom||{},e=t.getValueAtIndexOrDefault,o=n._model;o.backgroundColor=r.backgroundColor?r.backgroundColor:e(u.backgroundColor,f,i.backgroundColor);o.borderColor=r.borderColor?r.borderColor:e(u.borderColor,f,i.borderColor);o.borderWidth=r.borderWidth?r.borderWidth:e(u.borderWidth,f,i.borderWidth)},setHoverStyle:function(n){var u=this.chart.data.datasets[n._datasetIndex],f=n._index,i=n.custom||{},e=t.getValueAtIndexOrDefault,o=t.getHoverColor,r=n._model;r.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:e(u.hoverBackgroundColor,f,o(r.backgroundColor));r.borderColor=i.hoverBorderColor?i.hoverBorderColor:e(u.hoverBorderColor,f,o(r.borderColor));r.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:e(u.hoverBorderWidth,f,r.borderWidth)}});n.DatasetController.extend=t.inherits}},{}],25:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.elements={};n.Element=function(n){t.extend(this,n);this.initialize.apply(this,arguments)};t.extend(n.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var n=this;return n._view||(n._view=t.clone(n._model)),n._start=t.clone(n._view),n},transition:function(n){var i=this;return(i._view||(i._view=t.clone(i._model)),n===1)?(i._view=i._model,i._start=null,i):(i._start||i.pivot(),t.each(i._model,function(r,u){var e,f;if(u[0]!=="_")if(i._view.hasOwnProperty(u)){if(r!==i._view[u])if(typeof r=="string")try{e=t.color(i._model[u]).mix(t.color(i._start[u]),n);i._view[u]=e.rgbString()}catch(o){i._view[u]=r}else typeof r=="number"?(f=i._start[u]!==undefined&&isNaN(i._start[u])===!1?i._start[u]:0,i._view[u]=(i._model[u]-f)*n+f):i._view[u]=r}else i._view[u]=typeof r!="number"||isNaN(i._view[u])?r:r*n},i),i)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return t.isNumber(this._model.x)&&t.isNumber(this._model.y)}});n.Element.extend=t.inherits}},{}],26:[function(n,t){"use strict";var i=n(3);t.exports=function(n){function u(n,t,i){var r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!=-1&&(r=r/100*t.parentNode[i])):r=n,r}function f(n){return n!==undefined&&n!==null&&n!=="none"}function e(n,t,i){var r=document.defaultView,e=n.parentNode,o=r.getComputedStyle(n)[t],s=r.getComputedStyle(e)[t],h=f(o),c=f(s),l=Number.POSITIVE_INFINITY;return h||c?Math.min(h?u(o,n,i):l,c?u(s,e,i):l):"none"}var t=n.helpers={},r;t.each=function(n,i,r,u){var f,e,o;if(t.isArray(n))if(e=n.length,u)for(f=e-1;f>=0;f--)i.call(r,n[f],f);else for(f=0;f<e;f++)i.call(r,n[f],f);else if(typeof n=="object")for(o=Object.keys(n),e=o.length,f=0;f<e;f++)i.call(r,n[o[f]],o[f])};t.clone=function(n){var i={};return t.each(n,function(n,r){i[r]=t.isArray(n)?n.slice(0):typeof n=="object"&&n!==null?t.clone(n):n}),i};t.extend=function(n){for(var r=function(t,i){n[i]=t},i=1,u=arguments.length;i<u;i++)t.each(arguments[i],r);return n};t.configMerge=function(i){var r=t.clone(i);return t.each(Array.prototype.slice.call(arguments,1),function(i){t.each(i,function(i,u){if(u==="scales")r[u]=t.scaleMerge(r.hasOwnProperty(u)?r[u]:{},i);else if(u==="scale")r[u]=t.configMerge(r.hasOwnProperty(u)?r[u]:{},n.scaleService.getScaleDefaults(i.type),i);else if(r.hasOwnProperty(u)&&t.isArray(r[u])&&t.isArray(i)){var f=r[u];t.each(i,function(n,i){i<f.length?f[i]=typeof f[i]=="object"&&f[i]!==null&&typeof n=="object"&&n!==null?t.configMerge(f[i],n):n:f.push(n)})}else r[u]=r.hasOwnProperty(u)&&typeof r[u]=="object"&&r[u]!==null&&typeof i=="object"?t.configMerge(r[u],i):i})}),r};t.scaleMerge=function(i,r){var u=t.clone(i);return t.each(r,function(i,r){r==="xAxes"||r==="yAxes"?u.hasOwnProperty(r)?t.each(i,function(i,f){var o=t.getValueOrDefault(i.type,r==="xAxes"?"category":"linear"),e=n.scaleService.getScaleDefaults(o);f>=u[r].length||!u[r][f].type?u[r].push(t.configMerge(e,i)):u[r][f]=i.type&&i.type!==u[r][f].type?t.configMerge(u[r][f],e,i):t.configMerge(u[r][f],i)}):(u[r]=[],t.each(i,function(i){var f=t.getValueOrDefault(i.type,r==="xAxes"?"category":"linear");u[r].push(t.configMerge(n.scaleService.getScaleDefaults(f),i))})):u[r]=u.hasOwnProperty(r)&&typeof u[r]=="object"&&u[r]!==null&&typeof i=="object"?t.configMerge(u[r],i):i}),u};t.getValueAtIndexOrDefault=function(n,i,r){return n===undefined||n===null?r:t.isArray(n)?i<n.length?n[i]:r:n};t.getValueOrDefault=function(n,t){return n===undefined?t:n};t.indexOf=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1};t.where=function(n,i){if(t.isArray(n)&&Array.prototype.filter)return n.filter(i);var r=[];return t.each(n,function(n){i(n)&&r.push(n)}),r};t.findIndex=Array.prototype.findIndex?function(n,t,i){return n.findIndex(t,i)}:function(n,t,i){i=i===undefined?n:i;for(var r=0,u=n.length;r<u;++r)if(t.call(i,n[r],r,n))return r;return-1};t.findNextWhere=function(n,t,i){var r,u;for((i===undefined||i===null)&&(i=-1),r=i+1;r<n.length;r++)if(u=n[r],t(u))return u};t.findPreviousWhere=function(n,t,i){var r,u;for((i===undefined||i===null)&&(i=n.length),r=i-1;r>=0;r--)if(u=n[r],t(u))return u};t.inherits=function(n){var r=this,i=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return r.apply(this,arguments)},u=function(){this.constructor=i};return u.prototype=r.prototype,i.prototype=new u,i.extend=t.inherits,n&&t.extend(i.prototype,n),i.__super__=r.prototype,i};t.noop=function(){};t.uid=function(){var n=0;return function(){return n++}}();t.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};t.almostEquals=function(n,t,i){return Math.abs(n-t)<i};t.max=function(n){return n.reduce(function(n,t){return isNaN(t)?n:Math.max(n,t)},Number.NEGATIVE_INFINITY)};t.min=function(n){return n.reduce(function(n,t){return isNaN(t)?n:Math.min(n,t)},Number.POSITIVE_INFINITY)};t.sign=Math.sign?function(n){return Math.sign(n)}:function(n){return(n=+n,n===0||isNaN(n))?n:n>0?1:-1};t.log10=Math.log10?function(n){return Math.log10(n)}:function(n){return Math.log(n)/Math.LN10};t.toRadians=function(n){return n*(Math.PI/180)};t.toDegrees=function(n){return n*(180/Math.PI)};t.getAngleFromPoint=function(n,t){var i=t.x-n.x,r=t.y-n.y,f=Math.sqrt(i*i+r*r),u=Math.atan2(r,i);return u<-.5*Math.PI&&(u+=2*Math.PI),{angle:u,distance:f}};t.aliasPixel=function(n){return n%2==0?0:.5};t.splineCurve=function(n,t,i,r){var f=n.skip?t:n,u=t,e=i.skip?t:i,h=Math.sqrt(Math.pow(u.x-f.x,2)+Math.pow(u.y-f.y,2)),c=Math.sqrt(Math.pow(e.x-u.x,2)+Math.pow(e.y-u.y,2)),o=h/(h+c),s=c/(h+c),l,a;return o=isNaN(o)?0:o,s=isNaN(s)?0:s,l=r*o,a=r*s,{previous:{x:u.x-l*(e.x-f.x),y:u.y-l*(e.y-f.y)},next:{x:u.x+a*(e.x-f.x),y:u.y+a*(e.y-f.y)}}};t.EPSILON=Number.EPSILON||1e-14;t.splineCurveMonotone=function(n){for(var e=(n||[]).map(function(n){return{model:n._model,deltaK:0,mK:0}}),s=e.length,f,i,u,h,c,l,a,o,r=0;r<s;++r)(i=e[r],i.model.skip)||(f=r>0?e[r-1]:null,u=r<s-1?e[r+1]:null,u&&!u.model.skip&&(i.deltaK=(u.model.y-i.model.y)/(u.model.x-i.model.x)),i.mK=!f||f.model.skip?i.deltaK:!u||u.model.skip?f.deltaK:this.sign(f.deltaK)!=this.sign(i.deltaK)?0:(f.deltaK+i.deltaK)/2);for(r=0;r<s-1;++r)if(i=e[r],u=e[r+1],!i.model.skip&&!u.model.skip){if(t.almostEquals(i.deltaK,0,this.EPSILON)){i.mK=u.mK=0;continue}(h=i.mK/i.deltaK,c=u.mK/i.deltaK,a=Math.pow(h,2)+Math.pow(c,2),a<=9)||(l=3/Math.sqrt(a),i.mK=h*l*i.deltaK,u.mK=c*l*i.deltaK)}for(r=0;r<s;++r)(i=e[r],i.model.skip)||(f=r>0?e[r-1]:null,u=r<s-1?e[r+1]:null,f&&!f.model.skip&&(o=(i.model.x-f.model.x)/3,i.model.controlPointPreviousX=i.model.x-o,i.model.controlPointPreviousY=i.model.y-o*i.mK),u&&!u.model.skip&&(o=(u.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+o,i.model.controlPointNextY=i.model.y+o*i.mK))};t.nextItem=function(n,t,i){return i?t>=n.length-1?n[0]:n[t+1]:t>=n.length-1?n[n.length-1]:n[t+1]};t.previousItem=function(n,t,i){return i?t<=0?n[n.length-1]:n[t-1]:t<=0?n[0]:n[t-1]};t.niceNum=function(n,i){var u=Math.floor(t.log10(n)),r=n/Math.pow(10,u),f;return f=i?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10,f*Math.pow(10,u)};r=t.easingEffects={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-1*n*(n-2)},easeInOutQuad:function(n){return(n/=1/2)<1?1/2*n*n:-1/2*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1*((n=n/1-1)*n*n+1)},easeInOutCubic:function(n){return(n/=1/2)<1?1/2*n*n*n:1/2*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-1*((n=n/1-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=1/2)<1?1/2*n*n*n*n:-1/2*((n-=2)*n*n*n-2)},easeInQuint:function(n){return 1*(n/=1)*n*n*n*n},easeOutQuint:function(n){return 1*((n=n/1-1)*n*n*n*n+1)},easeInOutQuint:function(n){return(n/=1/2)<1?1/2*n*n*n*n*n:1/2*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-1*Math.cos(n/1*(Math.PI/2))+1},easeOutSine:function(n){return 1*Math.sin(n/1*(Math.PI/2))},easeInOutSine:function(n){return-1/2*(Math.cos(Math.PI*n/1)-1)},easeInExpo:function(n){return n===0?1:1*Math.pow(2,10*(n/1-1))},easeOutExpo:function(n){return n===1?1:1*(-Math.pow(2,-10*n)+1)},easeInOutExpo:function(n){return n===0?0:n===1?1:(n/=1/2)<1?1/2*Math.pow(2,10*(n-1)):1/2*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-1*(Math.sqrt(1-(n/=1)*n)-1)},easeOutCirc:function(n){return 1*Math.sqrt(1-(n=n/1-1)*n)},easeInOutCirc:function(n){return(n/=1/2)<1?-1/2*(Math.sqrt(1-n*n)-1):1/2*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)))},easeOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*n)*Math.sin((n*1-r)*2*Math.PI/t)+1)},easeInOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1/2)==2?1:(t||(t=1*.3*1.5),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),n<1)?-.5*i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t):i*Math.pow(2,-10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)*.5+1},easeInBack:function(n){var t=1.70158;return 1*(n/=1)*n*((t+1)*n-t)},easeOutBack:function(n){var t=1.70158;return 1*((n=n/1-1)*n*((t+1)*n+t)+1)},easeInOutBack:function(n){var t=1.70158;return(n/=1/2)<1?1/2*n*n*(((t*=1.525)+1)*n-t):1/2*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:function(n){return 1-r.easeOutBounce(1-n)},easeOutBounce:function(n){return(n/=1)<1/2.75?1*7.5625*n*n:n<2/2.75?1*(7.5625*(n-=1.5/2.75)*n+.75):n<2.5/2.75?1*(7.5625*(n-=2.25/2.75)*n+.9375):1*(7.5625*(n-=2.625/2.75)*n+.984375)},easeInOutBounce:function(n){return n<1/2?r.easeInBounce(n*2)*.5:r.easeOutBounce(n*2-1)*.5+1*.5}};t.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}();t.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){return window.clearTimeout(n,1e3/60)}}();t.getRelativePosition=function(n,i){var f,e,s=n.originalEvent||n,r=n.currentTarget||n.srcElement,u=r.getBoundingClientRect(),o=s.touches;o&&o.length>0?(f=o[0].clientX,e=o[0].clientY):(f=s.clientX,e=s.clientY);var h=parseFloat(t.getStyle(r,"padding-left")),c=parseFloat(t.getStyle(r,"padding-top")),l=parseFloat(t.getStyle(r,"padding-right")),a=parseFloat(t.getStyle(r,"padding-bottom")),v=u.right-u.left-h-l,y=u.bottom-u.top-c-a;return f=Math.round((f-u.left-h)/v*r.width/i.currentDevicePixelRatio),e=Math.round((e-u.top-c)/y*r.height/i.currentDevicePixelRatio),{x:f,y:e}};t.addEvent=function(n,t,i){n.addEventListener?n.addEventListener(t,i):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i};t.removeEvent=function(n,i,r){n.removeEventListener?n.removeEventListener(i,r,!1):n.detachEvent?n.detachEvent("on"+i,r):n["on"+i]=t.noop};t.bindEvents=function(n,i,r){var u=n.events=n.events||{};t.each(i,function(i){u[i]=function(){r.apply(n,arguments)};t.addEvent(n.chart.canvas,i,u[i])})};t.unbindEvents=function(n,i){var r=n.chart.canvas;t.each(i,function(n,i){t.removeEvent(r,i,n)})};t.getConstraintWidth=function(n){return e(n,"max-width","clientWidth")};t.getConstraintHeight=function(n){return e(n,"max-height","clientHeight")};t.getMaximumWidth=function(n){var i=n.parentNode,f=parseInt(t.getStyle(i,"padding-left"))+parseInt(t.getStyle(i,"padding-right")),r=i.clientWidth-f,u=t.getConstraintWidth(n);return isNaN(u)?r:Math.min(r,u)};t.getMaximumHeight=function(n){var i=n.parentNode,f=parseInt(t.getStyle(i,"padding-top"))+parseInt(t.getStyle(i,"padding-bottom")),r=i.clientHeight-f,u=t.getConstraintHeight(n);return isNaN(u)?r:Math.min(r,u)};t.getStyle=function(n,t){return n.currentStyle?n.currentStyle[t]:document.defaultView.getComputedStyle(n,null).getPropertyValue(t)};t.retinaScale=function(n){var f=n.ctx,t=n.canvas,r=t.width,u=t.height,i=n.currentDevicePixelRatio=window.devicePixelRatio||1;i!==1&&(t.height=u*i,t.width=r*i,f.scale(i,i),n.originalDevicePixelRatio=n.originalDevicePixelRatio||i);t.style.width=r+"px";t.style.height=u+"px"};t.clear=function(n){n.ctx.clearRect(0,0,n.width,n.height)};t.fontString=function(n,t,i){return t+" "+n+"px "+i};t.longestText=function(n,i,r,u){var o,f,e,s,h;if(u=u||{},o=u.data=u.data||{},f=u.garbageCollect=u.garbageCollect||[],u.font!==i&&(o=u.data={},f=u.garbageCollect=[],u.font=i),n.font=i,e=0,t.each(r,function(i){i!==undefined&&i!==null&&t.isArray(i)!==!0?e=t.measureText(n,o,f,e,i):t.isArray(i)&&t.each(i,function(i){i===undefined||i===null||t.isArray(i)||(e=t.measureText(n,o,f,e,i))})}),s=f.length/2,s>r.length){for(h=0;h<s;h++)delete o[f[h]];f.splice(0,s)}return e};t.measureText=function(n,t,i,r,u){var f=t[u];return f||(f=t[u]=n.measureText(u).width,i.push(u)),f>r&&(r=f),r};t.numberOfLabelLines=function(n){var i=1;return t.each(n,function(n){t.isArray(n)&&n.length>i&&(i=n.length)}),i};t.drawRoundedRectangle=function(n,t,i,r,u,f){n.beginPath();n.moveTo(t+f,i);n.lineTo(t+r-f,i);n.quadraticCurveTo(t+r,i,t+r,i+f);n.lineTo(t+r,i+u-f);n.quadraticCurveTo(t+r,i+u,t+r-f,i+u);n.lineTo(t+f,i+u);n.quadraticCurveTo(t,i+u,t,i+u-f);n.lineTo(t,i+f);n.quadraticCurveTo(t,i,t+f,i);n.closePath()};t.color=function(t){return i?t instanceof CanvasGradient?i(n.defaults.global.defaultColor):i(t):(console.log("Color.js not found!"),t)};t.addResizeListener=function(n,t){var r=document.createElement("iframe"),u="chartjs-hidden-iframe",i;r.classlist?r.classlist.add(u):r.setAttribute("class",u);r.tabIndex=-1;i=r.style;i.width="100%";i.display="block";i.border=0;i.height=0;i.margin=0;i.position="absolute";i.left=0;i.right=0;i.top=0;i.bottom=0;n.insertBefore(r,n.firstChild);(r.contentWindow||r).onresize=function(){t&&t()}};t.removeResizeListener=function(n){var t=n.querySelector(".chartjs-hidden-iframe");t&&t.parentNode.removeChild(t)};t.isArray=Array.isArray?function(n){return Array.isArray(n)}:function(n){return Object.prototype.toString.call(n)==="[object Array]"};t.arrayEquals=function(n,i){var r,e,u,f;if(!n||!i||n.length!=i.length)return!1;for(r=0,e=n.length;r<e;++r)if(u=n[r],f=i[r],u instanceof Array&&f instanceof Array){if(!t.arrayEquals(u,f))return!1}else if(u!=f)return!1;return!0};t.callCallback=function(n,t,i){n&&typeof n.call=="function"&&n.apply(i,t)};t.getHoverColor=function(n){return n instanceof CanvasPattern?n:t.color(n).saturate(.5).darken(.1).rgbString()}}},{"3":3}],27:[function(n,t){"use strict";t.exports=function(){var n=function(t,i){var r=this,u=n.helpers;return r.config=i||{data:{datasets:[]}},t.length&&t[0].getContext&&(t=t[0]),t.getContext&&(t=t.getContext("2d")),r.ctx=t,r.canvas=t.canvas,t.canvas.style.display=t.canvas.style.display||"block",r.width=t.canvas.width||parseInt(u.getStyle(t.canvas,"width"),10)||u.getMaximumWidth(t.canvas),r.height=t.canvas.height||parseInt(u.getStyle(t.canvas,"height"),10)||u.getMaximumHeight(t.canvas),r.aspectRatio=r.width/r.height,(isNaN(r.aspectRatio)||isFinite(r.aspectRatio)===!1)&&(r.aspectRatio=i.aspectRatio!==undefined?i.aspectRatio:2),r.originalCanvasStyleWidth=t.canvas.style.width,r.originalCanvasStyleHeight=t.canvas.style.height,u.retinaScale(r),r.controller=new n.Controller(r),u.addResizeListener(t.canvas.parentNode,function(){r.controller&&r.controller.config.options.responsive&&r.controller.resize()}),r.controller?r.controller:r};return n.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(n){var t=[],i;for(t.push('<ul class="'+n.id+'-legend">'),i=0;i<n.data.datasets.length;i++)t.push('<li><span style="background-color:'+n.data.datasets[i].backgroundColor+'"><\/span>'),n.data.datasets[i].label&&t.push(n.data.datasets[i].label),t.push("<\/li>");return t.push("<\/ul>"),t.join("")}}},n.Chart=n,n}},{}],28:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.layoutService={defaults:{},addBox:function(n,t){n.boxes||(n.boxes=[]);n.boxes.push(t)},removeBox:function(n,t){n.boxes&&n.boxes.splice(n.boxes.indexOf(t),1)},update:function(n,i,r){function ht(n){var t,i=n.isHorizontal();i?(t=n.update(n.options.fullWidth?g:u,st),f-=t.height):(t=n.update(ot,rt),u-=t.width);tt.push({horizontal:i,minSize:t,box:n})}function ut(n){var i=t.findNextWhere(tt,function(t){return t.box===n}),r;i&&(n.isHorizontal()?(r={left:e,right:y,top:0,bottom:0},n.update(n.options.fullWidth?g:u,nt/2,r)):n.update(i.minSize.width,f))}function ct(n){var i=t.findNextWhere(tt,function(t){return t.box===n}),r={left:0,right:0,top:o,bottom:p};i&&n.update(i.minSize.width,f,r)}function it(n){n.isHorizontal()?(n.left=n.options.fullWidth?s:e,n.right=n.options.fullWidth?i-s:e+u,n.top=d,n.bottom=d+n.height,d=n.bottom):(n.left=k,n.right=k+n.width,n.top=o,n.bottom=o+f,k=n.right)}var w,b,k,d;if(n){var s=0,v=0,h=t.where(n.boxes,function(n){return n.options.position==="left"}),c=t.where(n.boxes,function(n){return n.options.position==="right"}),l=t.where(n.boxes,function(n){return n.options.position==="top"}),a=t.where(n.boxes,function(n){return n.options.position==="bottom"}),ft=t.where(n.boxes,function(n){return n.options.position==="chartArea"});l.sort(function(n,t){return(t.options.fullWidth?1:0)-(n.options.fullWidth?1:0)});a.sort(function(n,t){return(n.options.fullWidth?1:0)-(t.options.fullWidth?1:0)});var g=i-2*s,nt=r-2*v,et=g/2,rt=nt/2,ot=(i-et)/(h.length+c.length),st=(r-rt)/(l.length+a.length),u=g,f=nt,tt=[];t.each(h.concat(c,l,a),ht);var e=s,y=s,o=v,p=v;t.each(h.concat(c),ut);t.each(h,function(n){e+=n.width});t.each(c,function(n){y+=n.width});t.each(l.concat(a),ut);t.each(l,function(n){o+=n.height});t.each(a,function(n){p+=n.height});t.each(h.concat(c),ct);e=s;y=s;o=v;p=v;t.each(h,function(n){e+=n.width});t.each(c,function(n){y+=n.width});t.each(l,function(n){o+=n.height});t.each(a,function(n){p+=n.height});w=r-o-p;b=i-e-y;(b!==u||w!==f)&&(t.each(h,function(n){n.height=w}),t.each(c,function(n){n.height=w}),t.each(l,function(n){n.options.fullWidth||(n.width=b)}),t.each(a,function(n){n.options.fullWidth||(n.width=b)}),f=w,u=b);k=s;d=v;t.each(h.concat(l),it);k+=u;d+=f;t.each(c,it);t.each(a,it);n.chartArea={left:e,top:o,right:e+u,bottom:o+f};t.each(ft,function(t){t.left=n.chartArea.left;t.top=n.chartArea.top;t.right=n.chartArea.right;t.bottom=n.chartArea.bottom;t.update(u,f)})}}}}},{}],29:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=t.noop;n.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(n,t){var r=t.datasetIndex,i=this.chart,u=i.getDatasetMeta(r);u.hidden=u.hidden===null?!i.data.datasets[r].hidden:null;i.update()},labels:{boxWidth:40,padding:10,generateLabels:function(n){var i=n.data;return t.isArray(i.datasets)?i.datasets.map(function(i,r){return{text:i.label,fillStyle:t.isArray(i.backgroundColor)?i.backgroundColor[0]:i.backgroundColor,hidden:!n.isDatasetVisible(r),lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,pointStyle:i.pointStyle,datasetIndex:r}},this):[]}}};n.Legend=n.Element.extend({initialize:function(n){t.extend(this,n);this.legendHitBoxes=[];this.doughnutMode=!1},beforeUpdate:i,update:function(n,t,i){var r=this;return r.beforeUpdate(),r.maxWidth=n,r.maxHeight=t,r.margins=i,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:i,beforeSetDimensions:i,setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height);n.paddingLeft=0;n.paddingTop=0;n.paddingRight=0;n.paddingBottom=0;n.minSize={width:0,height:0}},afterSetDimensions:i,beforeBuildLabels:i,buildLabels:function(){var n=this;n.legendItems=n.options.labels.generateLabels.call(n,n.chart);n.options.reverse&&n.legendItems.reverse()},afterBuildLabels:i,beforeFit:i,fit:function(){var i=this,p=i.options,r=p.labels,h=p.display,s=i.ctx,c=n.defaults.global,l=t.getValueOrDefault,u=l(r.fontSize,c.defaultFontSize),g=l(r.fontStyle,c.defaultFontStyle),nt=l(r.fontFamily,c.defaultFontFamily),tt=t.fontString(u,g,nt),w=i.legendHitBoxes=[],f=i.minSize,b=i.isHorizontal(),e,a;if(b?(f.width=i.maxWidth,f.height=h?10:0):(f.width=h?10:0,f.height=i.maxHeight),h)if(s.font=tt,b)e=i.lineWidths=[0],a=i.legendItems.length?u+r.padding:0,s.textAlign="left",s.textBaseline="top",t.each(i.legendItems,function(n,t){var o=r.usePointStyle?u*Math.sqrt(2):r.boxWidth,f=o+u/2+s.measureText(n.text).width;e[e.length-1]+f+r.padding>=i.width&&(a+=u+r.padding,e[e.length]=i.left);w[t]={left:0,top:0,width:f,height:u};e[e.length-1]+=f+r.padding}),f.height+=a;else{var it=r.padding,k=i.columnWidths=[],v=r.padding,o=0,y=0,d=u+it;t.each(i.legendItems,function(n,t){var e=r.usePointStyle?2*r.boxWidth:r.boxWidth,i=e+u/2+s.measureText(n.text).width;y+d>f.height&&(v+=o+r.padding,k.push(o),o=0,y=0);o=Math.max(o,i);y+=d;w[t]={left:0,top:0,width:i,height:u}});v+=o;k.push(o);f.width+=v}i.width=f.width;i.height=f.height},afterFit:i,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var r=this,l=r.options,e=l.labels,h=n.defaults.global,c=h.elements.line,v=r.width,p=r.lineWidths,a;if(l.display){var i=r.ctx,u,o=t.getValueOrDefault,w=o(e.fontColor,h.defaultFontColor),f=o(e.fontSize,h.defaultFontSize),k=o(e.fontStyle,h.defaultFontStyle),d=o(e.fontFamily,h.defaultFontFamily),g=t.fontString(f,k,d);i.textAlign="left";i.textBaseline="top";i.lineWidth=.5;i.strokeStyle=w;i.fillStyle=w;i.font=g;var s=e.boxWidth,b=r.legendHitBoxes,nt=function(t,r,u){if(!isNaN(s)&&!(s<=0)){if(i.save(),i.fillStyle=o(u.fillStyle,h.defaultColor),i.lineCap=o(u.lineCap,c.borderCapStyle),i.lineDashOffset=o(u.lineDashOffset,c.borderDashOffset),i.lineJoin=o(u.lineJoin,c.borderJoinStyle),i.lineWidth=o(u.lineWidth,c.borderWidth),i.strokeStyle=o(u.strokeStyle,h.defaultColor),i.setLineDash&&i.setLineDash(o(u.lineDash,c.borderDash)),l.labels&&l.labels.usePointStyle){var e=f*Math.SQRT2/2,a=e/Math.SQRT2,v=t+a,y=r+a;n.canvasHelpers.drawPoint(i,u.pointStyle,e,v,y)}else i.strokeRect(t,r,s,f),i.fillRect(t,r,s,f);i.restore()}},tt=function(n,t,r,u){i.fillText(r.text,s+f/2+n,t);r.hidden&&(i.beginPath(),i.lineWidth=2,i.moveTo(s+f/2+n,t+f/2),i.lineTo(s+f/2+n+u,t+f/2),i.stroke())},y=r.isHorizontal();u=y?{x:r.left+(v-p[0])/2,y:r.top+e.padding,line:0}:{x:r.left+e.padding,y:r.top+e.padding,line:0};a=f+e.padding;t.each(r.legendItems,function(n,t){var c=i.measureText(n.text).width,l=e.usePointStyle?f+f/2+c:s+f/2+c,o=u.x,h=u.y;y?o+l>=v&&(h=u.y+=a,u.line++,o=u.x=r.left+(v-p[u.line])/2):h+a>r.bottom&&(o=u.x=o+r.columnWidths[u.line]+e.padding,h=u.y=r.top,u.line++);nt(o,h,n);b[t].left=o;b[t].top=h;tt(o,h,n,c);y?u.x+=l+e.padding:u.y+=a})}},handleEvent:function(n){var i=this,s=t.getRelativePosition(n,i.chart.chart),f=s.x,e=s.y,h=i.options,o,u,r;if(f>=i.left&&f<=i.right&&e>=i.top&&e<=i.bottom)for(o=i.legendHitBoxes,u=0;u<o.length;++u)if(r=o[u],f>=r.left&&f<=r.left+r.width&&e>=r.top&&e<=r.top+r.height){h.onClick&&h.onClick.call(i,n,i.legendItems[u]);break}}});n.plugins.register({beforeInit:function(t){var r=t.options,i=r.legend;i&&(t.legend=new n.Legend({ctx:t.chart.ctx,options:i,chart:t}),n.layoutService.addBox(t,t.legend))}})}},{}],30:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers.noop;n.plugins={_plugins:[],register:function(n){var t=this._plugins;[].concat(n).forEach(function(n){t.indexOf(n)===-1&&t.push(n)})},unregister:function(n){var t=this._plugins;[].concat(n).forEach(function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(n,t){for(var u=this._plugins,f=u.length,r,i=0;i<f;++i)if(r=u[i],typeof r[n]=="function"&&r[n].apply(r,t||[])===!1)return!1;return!0}};n.PluginBase=n.Element.extend({beforeInit:t,afterInit:t,beforeUpdate:t,afterUpdate:t,beforeDraw:t,afterDraw:t,destroy:t});n.pluginService=n.plugins}},{}],31:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(n){return t.isArray(n)?n:""+n}}};n.Scale=n.Element.extend({beforeUpdate:function(){t.callCallback(this.options.beforeUpdate,[this])},update:function(n,i,r){var u=this;return u.beforeUpdate(),u.maxWidth=n,u.maxHeight=i,u.margins=t.extend({left:0,right:0,top:0,bottom:0},r),u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeDataLimits(),u.determineDataLimits(),u.afterDataLimits(),u.beforeBuildTicks(),u.buildTicks(),u.afterBuildTicks(),u.beforeTickToLabelConversion(),u.convertTicksToLabels(),u.afterTickToLabelConversion(),u.beforeCalculateTickRotation(),u.calculateTickRotation(),u.afterCalculateTickRotation(),u.beforeFit(),u.fit(),u.afterFit(),u.afterUpdate(),u.minSize},afterUpdate:function(){t.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){t.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height);n.paddingLeft=0;n.paddingTop=0;n.paddingRight=0;n.paddingBottom=0},afterSetDimensions:function(){t.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){t.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:t.noop,afterDataLimits:function(){t.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){t.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:t.noop,afterBuildTicks:function(){t.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){t.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var n=this;n.ticks=n.ticks.map(function(t,i,r){return n.options.ticks.userCallback?n.options.ticks.userCallback(t,i,r):n.options.ticks.callback(t,i,r)},n)},afterTickToLabelConversion:function(){t.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){t.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var i=this,u=i.ctx,e=n.defaults.global,r=i.options.ticks,f=t.getValueOrDefault(r.fontSize,e.defaultFontSize),p=t.getValueOrDefault(r.fontStyle,e.defaultFontStyle),w=t.getValueOrDefault(r.fontFamily,e.defaultFontFamily),l=t.fontString(f,p,w),o,a,s;if(u.font=l,o=u.measureText(i.ticks[0]).width,a=u.measureText(i.ticks[i.ticks.length-1]).width,i.labelRotation=r.minRotation||0,i.paddingRight=0,i.paddingLeft=0,i.options.display&&i.isHorizontal()){i.paddingRight=a/2+3;i.paddingLeft=o/2+3;i.longestTextCache||(i.longestTextCache={});for(var h=t.longestText(u,l,i.ticks,i.longestTextCache),v=h,c,y,b=i.getPixelForTick(1)-i.getPixelForTick(0)-6;v>b&&i.labelRotation<r.maxRotation;){if(c=Math.cos(t.toRadians(i.labelRotation)),y=Math.sin(t.toRadians(i.labelRotation)),s=c*o,s+f/2>i.yLabelWidth&&(i.paddingLeft=s+f/2),i.paddingRight=f/2,y*h>i.maxHeight){i.labelRotation--;break}i.labelRotation++;v=c*h}}i.margins&&(i.paddingLeft=Math.max(i.paddingLeft-i.margins.left,0),i.paddingRight=Math.max(i.paddingRight-i.margins.right,0))},afterCalculateTickRotation:function(){t.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){t.callCallback(this.options.beforeFit,[this])},fit:function(){var i=this,r=i.minSize={width:0,height:0},f=i.options,s=n.defaults.global,e=f.ticks,l=f.scaleLabel,a=f.gridLines,h=f.display,c=i.isHorizontal(),u=t.getValueOrDefault(e.fontSize,s.defaultFontSize),nt=t.getValueOrDefault(e.fontStyle,s.defaultFontStyle),tt=t.getValueOrDefault(e.fontFamily,s.defaultFontFamily),v=t.fontString(u,nt,tt),y=t.getValueOrDefault(l.fontSize,s.defaultFontSize),p=f.gridLines.tickMarkLength,b,d,g;if(r.width=c?i.isFullWidth()?i.maxWidth-i.margins.left-i.margins.right:i.maxWidth:h&&a.drawTicks?p:0,r.height=c?h&&a.drawTicks?p:0:i.maxHeight,l.display&&h&&(c?r.height+=y*1.5:r.width+=y*1.5),e.display&&h){i.longestTextCache||(i.longestTextCache={});var o=t.longestText(i.ctx,v,i.ticks,i.longestTextCache),w=t.numberOfLabelLines(i.ticks),it=u*.5;if(c){i.longestLabelWidth=o;b=Math.sin(t.toRadians(i.labelRotation))*i.longestLabelWidth+u*w+it*w;r.height=Math.min(i.maxHeight,r.height+b);i.ctx.font=v;var k=i.ctx.measureText(i.ticks[0]).width,rt=i.ctx.measureText(i.ticks[i.ticks.length-1]).width,ut=Math.cos(t.toRadians(i.labelRotation)),ft=Math.sin(t.toRadians(i.labelRotation));i.paddingLeft=i.labelRotation!==0?ut*k+3:k/2+3;i.paddingRight=i.labelRotation!==0?ft*(u/2)+3:rt/2+3}else d=i.maxWidth-r.width,g=e.mirror,g?o=0:o+=i.options.ticks.padding,o<d?r.width+=o:r.width=i.maxWidth,i.paddingTop=u/2,i.paddingBottom=u/2}i.margins&&(i.paddingLeft=Math.max(i.paddingLeft-i.margins.left,0),i.paddingTop=Math.max(i.paddingTop-i.margins.top,0),i.paddingRight=Math.max(i.paddingRight-i.margins.right,0),i.paddingBottom=Math.max(i.paddingBottom-i.margins.bottom,0));i.width=r.width;i.height=r.height},afterFit:function(){t.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(n){return n===null||typeof n=="undefined"?NaN:typeof n=="number"&&isNaN(n)?NaN:typeof n=="object"?n instanceof Date||n.isValid?n:this.getRightValue(this.isHorizontal()?n.x:n.y):n},getLabelForIndex:t.noop,getPixelForValue:t.noop,getValueForPixel:t.noop,getPixelForTick:function(n,t){var i=this,f,e;if(i.isHorizontal()){var o=i.width-(i.paddingLeft+i.paddingRight),r=o/Math.max(i.ticks.length-(i.options.gridLines.offsetGridLines?0:1),1),u=r*n+i.paddingLeft;return t&&(u+=r/2),f=i.left+Math.round(u),f+(i.isFullWidth()?i.margins.left:0)}return e=i.height-(i.paddingTop+i.paddingBottom),i.top+n*(e/(i.ticks.length-1))},getPixelForDecimal:function(n){var t=this;if(t.isHorizontal()){var i=t.width-(t.paddingLeft+t.paddingRight),r=i*n+t.paddingLeft,u=t.left+Math.round(r);return u+(t.isFullWidth()?t.margins.left:0)}return t.top+n*t.height},getBasePixel:function(){var n=this,t=n.min,i=n.max;return n.getPixelForValue(n.beginAtZero?0:t<0&&i<0?i:t>0&&i>0?t:0)},draw:function(i){var r=this,e=r.options,k,d,g,nt,tt;if(e.display){var u=r.ctx,h=n.defaults.global,f=e.ticks,o=e.gridLines,c=e.scaleLabel,v=r.labelRotation!==0,s,st=f.autoSkip,y=r.isHorizontal(),p;f.maxTicksLimit&&(p=f.maxTicksLimit);var ht=t.getValueOrDefault(f.fontColor,h.defaultFontColor),et=t.getValueOrDefault(f.fontSize,h.defaultFontSize),ct=t.getValueOrDefault(f.fontStyle,h.defaultFontStyle),lt=t.getValueOrDefault(f.fontFamily,h.defaultFontFamily),at=t.fontString(et,ct,lt),l=o.tickMarkLength,vt=t.getValueOrDefault(o.borderDash,h.borderDash),yt=t.getValueOrDefault(o.borderDashOffset,h.borderDashOffset),pt=t.getValueOrDefault(c.fontColor,h.defaultFontColor),a=t.getValueOrDefault(c.fontSize,h.defaultFontSize),wt=t.getValueOrDefault(c.fontStyle,h.defaultFontStyle),bt=t.getValueOrDefault(c.fontFamily,h.defaultFontFamily),kt=t.fontString(a,wt,bt),ot=t.toRadians(r.labelRotation),dt=Math.cos(ot),b=r.longestLabelWidth*dt;if(u.fillStyle=ht,k=[],y){if(s=!1,v&&(b/=2),(b+f.autoSkipPadding)*r.ticks.length>r.width-(r.paddingLeft+r.paddingRight)&&(s=1+Math.floor((b+f.autoSkipPadding)*r.ticks.length/(r.width-(r.paddingLeft+r.paddingRight)))),p&&r.ticks.length>p)while(!s||r.ticks.length/(s||1)>p)s||(s=1),s+=1;st||(s=!1)}var gt=e.position==="right"?r.left:r.right-l,ni=e.position==="right"?r.left+l:r.right,ti=e.position==="bottom"?r.top:r.bottom-l,ii=e.position==="bottom"?r.top+l:r.bottom;if(t.each(r.ticks,function(n,u){var st,ht,a,p,w,b,d,g,nt,tt,it,rt,h,ut,c,ft,ct,et;n!==undefined&&n!==null&&n!==""&&(st=r.ticks.length===u+1,ht=s>1&&u%s>0||u%s==0&&u+s>=r.ticks.length,(!ht||st)&&n!==undefined&&n!==null)&&(u===(typeof r.zeroLineIndex!="undefined"?r.zeroLineIndex:0)?(a=o.zeroLineWidth,p=o.zeroLineColor):(a=t.getValueAtIndexOrDefault(o.lineWidth,u),p=t.getValueAtIndexOrDefault(o.color,u)),ft="middle",y?(v||(ft=e.position==="top"?"bottom":"top"),c=v?"right":"center",ct=r.getPixelForTick(u)+t.aliasPixel(a),h=r.getPixelForTick(u,o.offsetGridLines)+f.labelOffset,ut=v?r.top+12:e.position==="top"?r.bottom-l:r.top+l,w=d=nt=it=ct,b=ti,g=ii,tt=i.top,rt=i.bottom):(e.position==="left"?f.mirror?(h=r.right+f.padding,c="left"):(h=r.right-f.padding,c="right"):f.mirror?(h=r.left-f.padding,c="right"):(h=r.left+f.padding,c="left"),et=r.getPixelForTick(u),et+=t.aliasPixel(a),ut=r.getPixelForTick(u,o.offsetGridLines),w=gt,d=ni,nt=i.left,it=i.right,b=g=tt=rt=et),k.push({tx1:w,ty1:b,tx2:d,ty2:g,x1:nt,y1:tt,x2:it,y2:rt,labelX:h,labelY:ut,glWidth:a,glColor:p,glBorderDash:vt,glBorderDashOffset:yt,rotation:-1*ot,label:n,textBaseline:ft,textAlign:c}))}),t.each(k,function(n){var i,r,e;if(o.display&&(u.save(),u.lineWidth=n.glWidth,u.strokeStyle=n.glColor,u.setLineDash&&(u.setLineDash(n.glBorderDash),u.lineDashOffset=n.glBorderDashOffset),u.beginPath(),o.drawTicks&&(u.moveTo(n.tx1,n.ty1),u.lineTo(n.tx2,n.ty2)),o.drawOnChartArea&&(u.moveTo(n.x1,n.y1),u.lineTo(n.x2,n.y2)),u.stroke(),u.restore()),f.display){if(u.save(),u.translate(n.labelX,n.labelY),u.rotate(n.rotation),u.font=at,u.textBaseline=n.textBaseline,u.textAlign=n.textAlign,i=n.label,t.isArray(i))for(r=0,e=0;r<i.length;++r)u.fillText(""+i[r],0,e),e+=et*1.5;else u.fillText(i,0,0);u.restore()}}),c.display&&(nt=0,y?(d=r.left+(r.right-r.left)/2,g=e.position==="bottom"?r.bottom-a/2:r.top+a/2):(tt=e.position==="left",d=tt?r.left+a/2:r.right-a/2,g=r.top+(r.bottom-r.top)/2,nt=tt?-.5*Math.PI:.5*Math.PI),u.save(),u.translate(d,g),u.rotate(nt),u.textAlign="center",u.textBaseline="middle",u.fillStyle=pt,u.font=kt,u.fillText(c.labelString,0,0),u.restore()),o.drawBorder){u.lineWidth=t.getValueAtIndexOrDefault(o.lineWidth,0);u.strokeStyle=t.getValueAtIndexOrDefault(o.color,0);var it=r.left,rt=r.right,ut=r.top,ft=r.bottom,w=t.aliasPixel(u.lineWidth);y?(ut=ft=e.position==="top"?r.bottom:r.top,ut+=w,ft+=w):(it=rt=e.position==="left"?r.right:r.left,it+=w,rt+=w);u.beginPath();u.moveTo(it,ut);u.lineTo(rt,ft);u.stroke()}}}})}},{}],32:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers;n.scaleService={constructors:{},defaults:{},registerScaleType:function(n,i,r){this.constructors[n]=i;this.defaults[n]=t.clone(r)},getScaleConstructor:function(n){return this.constructors.hasOwnProperty(n)?this.constructors[n]:undefined},getScaleDefaults:function(i){return this.defaults.hasOwnProperty(i)?t.scaleMerge(n.defaults.scale,this.defaults[i]):{}},updateScaleDefaults:function(n,i){var r=this.defaults;r.hasOwnProperty(n)&&(r[n]=t.extend(r[n],i))},addScalesToLayout:function(i){t.each(i.scales,function(t){n.layoutService.addBox(i,t)})}}}},{}],33:[function(n,t){"use strict";t.exports=function(n){var i=n.helpers,t;n.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};t=i.noop;n.Title=n.Element.extend({initialize:function(t){var r=this;i.extend(r,t);r.options=i.configMerge(n.defaults.global.title,t.options);r.legendHitBoxes=[]},beforeUpdate:function(){var t=this.chart.options;t&&t.title&&(this.options=i.configMerge(n.defaults.global.title,t.title))},update:function(n,t,i){var r=this;return r.beforeUpdate(),r.maxWidth=n,r.maxHeight=t,r.margins=i,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:t,beforeSetDimensions:t,setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height);n.paddingLeft=0;n.paddingTop=0;n.paddingRight=0;n.paddingBottom=0;n.minSize={width:0,height:0}},afterSetDimensions:t,beforeBuildLabels:t,buildLabels:t,afterBuildLabels:t,beforeFit:t,fit:function(){var t=this,o=i.getValueOrDefault,u=t.options,s=n.defaults.global,f=u.display,e=o(u.fontSize,s.defaultFontSize),r=t.minSize;t.isHorizontal()?(r.width=t.maxWidth,r.height=f?e+u.padding*2:0):(r.width=f?e+u.padding*2:0,r.height=t.maxHeight);t.width=r.width;t.height=r.height},afterFit:t,isHorizontal:function(){var n=this.options.position;return n==="top"||n==="bottom"},draw:function(){var u=this,t=u.ctx,f=i.getValueOrDefault,r=u.options,e=n.defaults.global;if(r.display){var s=f(r.fontSize,e.defaultFontSize),p=f(r.fontStyle,e.defaultFontStyle),w=f(r.fontFamily,e.defaultFontFamily),b=i.fontString(s,p,w),a=0,h,c,o=u.top,l=u.left,v=u.bottom,y=u.right;t.fillStyle=f(r.fontColor,e.defaultFontColor);t.font=b;u.isHorizontal()?(h=l+(y-l)/2,c=o+(v-o)/2):(h=r.position==="left"?l+s/2:y-s/2,c=o+(v-o)/2,a=Math.PI*(r.position==="left"?-.5:.5));t.save();t.translate(h,c);t.rotate(a);t.textAlign="center";t.textBaseline="middle";t.fillText(r.text,0,0);t.restore()}}});n.plugins.register({beforeInit:function(t){var r=t.options,i=r.title;i&&(t.titleBlock=new n.Title({ctx:t.chart.ctx,options:i,chart:t}),n.layoutService.addBox(t,t.titleBlock))}})}},{}],34:[function(n,t){"use strict";t.exports=function(n){function i(n,i){return i&&(t.isArray(i)?Array.prototype.push.apply(n,i):n.push(i)),n}function r(n){var t,s,i,u,r,f,e,o;if(!n.length)return!1;for(i=[],u=[],t=0,s=n.length;t<s;++t)r=n[t],r&&r.hasValue()&&(f=r.tooltipPosition(),i.push(f.x),u.push(f.y));for(e=0,o=0,t=0;t<i.length;++t)i[t]&&(e+=i[t],o+=u[t]);return{x:Math.round(e/i.length),y:Math.round(o/i.length)}}function u(n){var r=n._xScale,u=n._yScale||n._scale,t=n._index,i=n._datasetIndex;return{xLabel:r?r.getLabelForIndex(t,i):"",yLabel:u?u.getLabelForIndex(t,i):"",index:t,datasetIndex:i}}var t=n.helpers;n.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:t.noop,title:function(n,t){var r="",i=t.labels,f=i?i.length:0,u;return n.length>0&&(u=n[0],r=i[u.index]),r},afterTitle:t.noop,beforeBody:t.noop,beforeLabel:t.noop,label:function(n,t){var i=t.datasets[n.datasetIndex].label||"";return i+": "+n.yLabel},labelColor:function(n,t){var r=t.getDatasetMeta(n.datasetIndex),u=r.data[n.index],i=u._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},afterLabel:t.noop,afterBody:t.noop,beforeFooter:t.noop,footer:t.noop,afterFooter:t.noop}};n.Tooltip=n.Element.extend({initialize:function(){var f=this,r=n.defaults.global,i=f._options,u=t.getValueOrDefault;t.extend(f,{_model:{xPadding:i.xPadding,yPadding:i.yPadding,xAlign:i.xAlign,yAlign:i.yAlign,bodyFontColor:i.bodyFontColor,_bodyFontFamily:u(i.bodyFontFamily,r.defaultFontFamily),_bodyFontStyle:u(i.bodyFontStyle,r.defaultFontStyle),_bodyAlign:i.bodyAlign,bodyFontSize:u(i.bodyFontSize,r.defaultFontSize),bodySpacing:i.bodySpacing,titleFontColor:i.titleFontColor,_titleFontFamily:u(i.titleFontFamily,r.defaultFontFamily),_titleFontStyle:u(i.titleFontStyle,r.defaultFontStyle),titleFontSize:u(i.titleFontSize,r.defaultFontSize),_titleAlign:i.titleAlign,titleSpacing:i.titleSpacing,titleMarginBottom:i.titleMarginBottom,footerFontColor:i.footerFontColor,_footerFontFamily:u(i.footerFontFamily,r.defaultFontFamily),_footerFontStyle:u(i.footerFontStyle,r.defaultFontStyle),footerFontSize:u(i.footerFontSize,r.defaultFontSize),_footerAlign:i.footerAlign,footerSpacing:i.footerSpacing,footerMarginTop:i.footerMarginTop,caretSize:i.caretSize,cornerRadius:i.cornerRadius,backgroundColor:i.backgroundColor,opacity:0,legendColorBackground:i.multiKeyBackground}})},getTitle:function(){var t=this,u=t._options,r=u.callbacks,f=r.beforeTitle.apply(t,arguments),e=r.title.apply(t,arguments),o=r.afterTitle.apply(t,arguments),n=[];return n=i(n,f),n=i(n,e),i(n,o)},getBeforeBody:function(){var n=this._options.callbacks.beforeBody.apply(this,arguments);return t.isArray(n)?n:n!==undefined?[n]:[]},getBody:function(n,r){var u=this,f=u._options.callbacks,e=[];return t.each(n,function(n){var t={before:[],lines:[],after:[]};i(t.before,f.beforeLabel.call(u,n,r));i(t.lines,f.label.call(u,n,r));i(t.after,f.afterLabel.call(u,n,r));e.push(t)}),e},getAfterBody:function(){var n=this._options.callbacks.afterBody.apply(this,arguments);return t.isArray(n)?n:n!==undefined?[n]:[]},getFooter:function(){var t=this,r=t._options.callbacks,u=r.beforeFooter.apply(t,arguments),f=r.footer.apply(t,arguments),e=r.afterFooter.apply(t,arguments),n=[];return n=i(n,u),n=i(n,f),i(n,e)},update:function(n){var i=this,s=i._options,e=i._model,h=i._active,o=i._data,p=i._chartInstance,c,v,a;if(h.length){e.opacity=1;var y=[],l=r(h),f=[];for(c=0,v=h.length;c<v;++c)f.push(u(h[c]));s.itemSort&&(f=f.sort(function(n,t){return s.itemSort(n,t,o)}));h.length>1&&t.each(f,function(n){y.push(s.callbacks.labelColor.call(i,n,p))});t.extend(e,{title:i.getTitle(f,o),beforeBody:i.getBeforeBody(f,o),body:i.getBody(f,o),afterBody:i.getAfterBody(f,o),footer:i.getFooter(f,o),x:Math.round(l.x),y:Math.round(l.y),caretPadding:t.getValueOrDefault(l.padding,2),labelColors:y});a=i.getTooltipSize(e);i.determineAlignment(a);t.extend(e,i.getBackgroundPoint(e,a))}else i._model.opacity=0;return n&&s.custom&&s.custom.call(i,e),i},getTooltipSize:function(n){var u=this._chart.ctx,i={height:n.yPadding*2,width:0},s=n.body,f=s.reduce(function(n,t){return n+t.before.length+t.lines.length+t.after.length},0),o,r;f+=n.beforeBody.length+n.afterBody.length;var h=n.title.length,e=n.footer.length,l=n.titleFontSize,c=n.bodyFontSize,a=n.footerFontSize;return i.height+=h*l,i.height+=(h-1)*n.titleSpacing,i.height+=h?n.titleMarginBottom:0,i.height+=f*c,i.height+=f?(f-1)*n.bodySpacing:0,i.height+=e?n.footerMarginTop:0,i.height+=e*a,i.height+=e?(e-1)*n.footerSpacing:0,o=0,r=function(n){i.width=Math.max(i.width,u.measureText(n).width+o)},u.font=t.fontString(l,n._titleFontStyle,n._titleFontFamily),t.each(n.title,r),u.font=t.fontString(c,n._bodyFontStyle,n._bodyFontFamily),t.each(n.beforeBody.concat(n.afterBody),r),o=s.length>1?c+2:0,t.each(s,function(n){t.each(n.before,r);t.each(n.lines,r);t.each(n.after,r)}),o=0,u.font=t.fontString(a,n._footerFontStyle,n._footerFontFamily),t.each(n.footer,r),i.width+=2*n.xPadding,i},determineAlignment:function(n){var r=this,t=r._model,u=r._chart,i=r._chartInstance.chartArea,f,e,h,c,o,s,l;t.y<n.height?t.yAlign="top":t.y>u.height-n.height&&(t.yAlign="bottom");s=(i.left+i.right)/2;l=(i.top+i.bottom)/2;t.yAlign==="center"?(f=function(n){return n<=s},e=function(n){return n>s}):(f=function(t){return t<=n.width/2},e=function(t){return t>=u.width-n.width/2});h=function(t){return t+n.width>u.width};c=function(t){return t-n.width<0};o=function(n){return n<=l?"top":"bottom"};f(t.x)?(t.xAlign="left",h(t.x)&&(t.xAlign="center",t.yAlign=o(t.y))):e(t.x)&&(t.xAlign="right",c(t.x)&&(t.xAlign="center",t.yAlign=o(t.y)))},getBackgroundPoint:function(n,t){var i={x:n.x,y:n.y},s=n.caretSize,e=n.caretPadding,h=n.cornerRadius,r=n.xAlign,f=n.yAlign,u=s+e,o=h+e;return r==="right"?i.x-=t.width:r==="center"&&(i.x-=t.width/2),f==="top"?i.y+=u:i.y-=f==="bottom"?t.height+u:t.height/2,f==="center"?r==="left"?i.x+=u:r==="right"&&(i.x-=u):r==="left"?i.x-=o:r==="right"&&(i.x+=o),i},drawCaret:function(n,i,r){var l=this._view,s=this._chart.ctx,u,e,h,o,c,v,f=l.caretSize,k=l.cornerRadius,y=l.xAlign,d=l.yAlign,a=n.x,p=n.y,w=i.width,g=i.height,b;d==="center"?(y==="left"?(u=a,e=u-f,h=u):(u=a+w,e=u+f,h=u),c=p+g/2,o=c-f,v=c+f):(y==="left"?(u=a+k,e=u+f,h=e+f):y==="right"?(u=a+w-k,e=u-f,h=e-f):(e=a+w/2,u=e-f,h=e+f),d==="top"?(o=p,c=o-f,v=o):(o=p+g,c=o+f,v=o));b=t.color(l.backgroundColor);s.fillStyle=b.alpha(r*b.alpha()).rgbString();s.beginPath();s.moveTo(u,o);s.lineTo(e,c);s.lineTo(h,v);s.closePath();s.fill()},drawTitle:function(n,i,r,u){var e=i.title,f,c;if(e.length){r.textAlign=i._titleAlign;r.textBaseline="top";var o=i.titleFontSize,s=i.titleSpacing,h=t.color(i.titleFontColor);for(r.fillStyle=h.alpha(u*h.alpha()).rgbString(),r.font=t.fontString(o,i._titleFontStyle,i._titleFontFamily),f=0,c=e.length;f<c;++f)r.fillText(e[f],n.x,n.y),n.y+=o+s,f+1===e.length&&(n.y+=i.titleMarginBottom-s)}},drawBody:function(n,i,r,u){var f=i.bodyFontSize,l=i.bodySpacing,a=i.body,s,h,o,e,c;r.textAlign=i._bodyAlign;r.textBaseline="top";s=t.color(i.bodyFontColor);h=s.alpha(u*s.alpha()).rgbString();r.fillStyle=h;r.font=t.fontString(f,i._bodyFontStyle,i._bodyFontFamily);o=0;e=function(t){r.fillText(t,n.x+o,n.y);n.y+=f+l};t.each(i.beforeBody,e);c=a.length>1;o=c?f+2:0;t.each(a,function(o,s){t.each(o.before,e);t.each(o.lines,function(o){c&&(r.fillStyle=t.color(i.legendColorBackground).alpha(u).rgbaString(),r.fillRect(n.x,n.y,f,f),r.strokeStyle=t.color(i.labelColors[s].borderColor).alpha(u).rgbaString(),r.strokeRect(n.x,n.y,f,f),r.fillStyle=t.color(i.labelColors[s].backgroundColor).alpha(u).rgbaString(),r.fillRect(n.x+1,n.y+1,f-2,f-2),r.fillStyle=h);e(o)});t.each(o.after,e)});o=0;t.each(i.afterBody,e);n.y-=l},drawFooter:function(n,i,r,u){var e=i.footer,f;e.length&&(n.y+=i.footerMarginTop,r.textAlign=i._footerAlign,r.textBaseline="top",f=t.color(i.footerFontColor),r.fillStyle=f.alpha(u*f.alpha()).rgbString(),r.font=t.fontString(i.footerFontSize,i._footerFontStyle,i._footerFontFamily),t.each(e,function(t){r.fillText(t,n.x,n.y);n.y+=i.footerFontSize+i.footerSpacing}))},draw:function(){var r=this._chart.ctx,n=this._view,e;if(n.opacity!==0){var f=this.getTooltipSize(n),i={x:n.x,y:n.y},u=Math.abs(n.opacity<.001)?0:n.opacity;this._options.enabled&&(e=t.color(n.backgroundColor),r.fillStyle=e.alpha(u*e.alpha()).rgbString(),t.drawRoundedRectangle(r,i.x,i.y,f.width,f.height,n.cornerRadius),r.fill(),this.drawCaret(i,f,u),i.x+=n.xPadding,i.y+=n.yPadding,this.drawTitle(i,n,r,u),this.drawBody(i,n,r,u),this.drawFooter(i,n,r,u))}}})}},{}],35:[function(n,t){"use strict";t.exports=function(n){var i=n.helpers,t=n.defaults.global;t.elements.arc={backgroundColor:t.defaultColor,borderColor:"#fff",borderWidth:2};n.elements.Arc=n.Element.extend({inLabelRange:function(n){var t=this._view;return t?Math.pow(n-t.x,2)<Math.pow(t.radius+t.hoverRadius,2):!1},inRange:function(n,t){var r=this._view,h,c;if(r){for(var o=i.getAngleFromPoint(r,{x:n,y:t}),u=o.angle,s=o.distance,e=r.startAngle,f=r.endAngle;f<e;)f+=2*Math.PI;while(u>f)u-=2*Math.PI;while(u<e)u+=2*Math.PI;return h=u>=e&&u<=f,c=s>=r.innerRadius&&s<=r.outerRadius,h&&c}return!1},tooltipPosition:function(){var n=this._view,t=n.startAngle+(n.endAngle-n.startAngle)/2,i=(n.outerRadius-n.innerRadius)/2+n.innerRadius;return{x:n.x+Math.cos(t)*i,y:n.y+Math.sin(t)*i}},draw:function(){var t=this._chart.ctx,n=this._view,i=n.startAngle,r=n.endAngle;t.beginPath();t.arc(n.x,n.y,n.outerRadius,i,r);t.arc(n.x,n.y,n.innerRadius,r,i,!0);t.closePath();t.strokeStyle=n.borderColor;t.lineWidth=n.borderWidth;t.fillStyle=n.backgroundColor;t.fill();t.lineJoin="bevel";n.borderWidth&&t.stroke()}})}},{}],36:[function(n,t){"use strict";t.exports=function(n){var i=n.helpers,t=n.defaults.global;n.defaults.global.elements.line={tension:.4,backgroundColor:t.defaultColor,borderWidth:3,borderColor:t.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0};n.elements.Line=n.Element.extend({draw:function(){function p(t,i){var r=i._view;i._view.steppedLine===!0?(n.lineTo(i._view.x,t._view.y),n.lineTo(i._view.x,i._view.y)):i._view.tension===0?n.lineTo(r.x,r.y):n.bezierCurveTo(t._view.controlPointNextX,t._view.controlPointNextY,r.controlPointPreviousX,r.controlPointPreviousY,r.x,r.y)}var v=this,o=v._view,y=o.spanGaps,h=o.scaleZero,a=v._loop,n=v._chart.ctx,e,f,r,c,s,u,l;if(n.save(),e=v._children.slice(),f=-1,a&&e.length&&e.push(e[0]),e.length&&o.fill){for(n.beginPath(),r=0;r<e.length;++r)c=e[r],s=i.previousItem(e,r),u=c._view,r===0?(a?n.moveTo(h.x,h.y):n.moveTo(u.x,h),u.skip||(f=r,n.lineTo(u.x,u.y))):(s=f===-1?s:e[f],u.skip?y||f!==r-1||(a?n.lineTo(h.x,h.y):n.lineTo(s._view.x,h)):(f!==r-1?y&&f!==-1?p(s,c):a?n.lineTo(u.x,u.y):(n.lineTo(u.x,h),n.lineTo(u.x,u.y)):p(s,c),f=r));a||f===-1||n.lineTo(e[f]._view.x,h);n.fillStyle=o.backgroundColor||t.defaultColor;n.closePath();n.fill()}for(l=t.elements.line,n.lineCap=o.borderCapStyle||l.borderCapStyle,n.setLineDash&&n.setLineDash(o.borderDash||l.borderDash),n.lineDashOffset=o.borderDashOffset||l.borderDashOffset,n.lineJoin=o.borderJoinStyle||l.borderJoinStyle,n.lineWidth=o.borderWidth||l.borderWidth,n.strokeStyle=o.borderColor||t.defaultColor,n.beginPath(),f=-1,r=0;r<e.length;++r)c=e[r],s=i.previousItem(e,r),u=c._view,r===0?u.skip||(n.moveTo(u.x,u.y),f=r):(s=f===-1?s:e[f],u.skip||((f===r-1||y)&&f!==-1?p(s,c):n.moveTo(u.x,u.y),f=r));n.stroke();n.restore()}})}},{}],37:[function(n,t){"use strict";t.exports=function(n){var r=n.helpers,i=n.defaults.global,t=i.defaultColor;i.elements.point={radius:3,pointStyle:"circle",backgroundColor:t,borderWidth:1,borderColor:t,hitRadius:1,hoverRadius:4,hoverBorderWidth:1};n.elements.Point=n.Element.extend({inRange:function(n,t){var i=this._view;return i?Math.pow(n-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2):!1},inLabelRange:function(n){var t=this._view;return t?Math.pow(n-t.x,2)<Math.pow(t.radius+t.hitRadius,2):!1},tooltipPosition:function(){var n=this._view;return{x:n.x,y:n.y,padding:n.radius+n.borderWidth}},draw:function(){var u=this._view,f=this._chart.ctx,e=u.pointStyle,o=u.radius,s=u.x,h=u.y;u.skip||(f.strokeStyle=u.borderColor||t,f.lineWidth=r.getValueOrDefault(u.borderWidth,i.elements.point.borderWidth),f.fillStyle=u.backgroundColor||t,n.canvasHelpers.drawPoint(f,e,o,s,h))}})}},{}],38:[function(n,t){"use strict";t.exports=function(n){var t=n.defaults.global;t.elements.rectangle={backgroundColor:t.defaultColor,borderWidth:0,borderColor:t.defaultColor,borderSkipped:"bottom"};n.elements.Rectangle=n.Element.extend({draw:function(){function h(n){return c[(o+n)%4]}var t=this._chart.ctx,n=this._view,s=n.width/2,r=n.x-s,u=n.x+s,f=n.base-(n.base-n.y),e=n.borderWidth/2,i;n.borderWidth&&(r+=e,u-=e,f+=e);t.beginPath();t.fillStyle=n.backgroundColor;t.strokeStyle=n.borderColor;t.lineWidth=n.borderWidth;var c=[[r,n.base],[r,f],[u,f],[u,n.base]],o=["bottom","left","top","right"].indexOf(n.borderSkipped,0);for(o===-1&&(o=0),t.moveTo.apply(t,h(0)),i=1;i<4;i++)t.lineTo.apply(t,h(i));t.fill();n.borderWidth&&t.stroke()},height:function(){var n=this._view;return n.base-n.y},inRange:function(n,t){var i=this._view;return i?i.y<i.base?n>=i.x-i.width/2&&n<=i.x+i.width/2&&t>=i.y&&t<=i.base:n>=i.x-i.width/2&&n<=i.x+i.width/2&&t>=i.base&&t<=i.y:!1},inLabelRange:function(n){var t=this._view;return t?n>=t.x-t.width/2&&n<=t.x+t.width/2:!1},tooltipPosition:function(){var n=this._view;return{x:n.x,y:n.y}}})}},{}],39:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=n.Scale.extend({getLabels:function(){var n=this.chart.data;return(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels},determineDataLimits:function(){var n=this,r=n.getLabels(),i;n.minIndex=0;n.maxIndex=r.length-1;n.options.ticks.min!==undefined&&(i=t.indexOf(r,n.options.ticks.min),n.minIndex=i!==-1?i:n.minIndex);n.options.ticks.max!==undefined&&(i=t.indexOf(r,n.options.ticks.max),n.maxIndex=i!==-1?i:n.maxIndex);n.min=r[n.minIndex];n.max=r[n.maxIndex]},buildTicks:function(){var n=this,t=n.getLabels();n.ticks=n.minIndex===0&&n.maxIndex===t.length-1?t:t.slice(n.minIndex,n.maxIndex+1)},getLabelForIndex:function(n){return this.ticks[n]},getPixelForValue:function(n,t,i,r){var u=this,e=Math.max(u.maxIndex+1-u.minIndex-(u.options.gridLines.offsetGridLines?0:1),1),o,f;if(n!==undefined&&isNaN(t)&&(o=u.getLabels(),f=o.indexOf(n),t=f!==-1?f:t),u.isHorizontal()){var a=u.width-(u.paddingLeft+u.paddingRight),s=a/e,h=s*(t-u.minIndex)+u.paddingLeft;return(u.options.gridLines.offsetGridLines&&r||u.maxIndex===u.minIndex&&r)&&(h+=s/2),u.left+Math.round(h)}var v=u.height-(u.paddingTop+u.paddingBottom),c=v/e,l=c*(t-u.minIndex)+u.paddingTop;return u.options.gridLines.offsetGridLines&&r&&(l+=c/2),u.top+Math.round(l)},getPixelForTick:function(n,t){return this.getPixelForValue(this.ticks[n],n+this.minIndex,null,t)},getValueForPixel:function(n){var t=this,u=Math.max(t.ticks.length-(t.options.gridLines.offsetGridLines?0:1),1),i=t.isHorizontal(),f=i?t.width-(t.paddingLeft+t.paddingRight):t.height-(t.paddingTop+t.paddingBottom),r=f/u;return n-=i?t.left:t.top,t.options.gridLines.offsetGridLines&&(n-=r/2),n-=i?t.paddingLeft:t.paddingTop,n<=0?0:Math.round(n/r)},getBasePixel:function(){return this.bottom}});n.scaleService.registerScaleType("category",i,{position:"bottom"})}},{}],40:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i={position:"left",ticks:{callback:function(n,i,r){var e=r.length>3?r[2]-r[1]:r[1]-r[0],o,u,f;return Math.abs(e)>1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),o=t.log10(Math.abs(e)),u="",n!==0?(f=-1*Math.floor(o),f=Math.max(Math.min(f,20),0),u=n.toFixed(f)):u="0",u}}},r=n.LinearScaleBase.extend({determineDataLimits:function(){function e(t){return s?t.xAxisID===n.id:t.yAxisID===n.id}var n=this,u=n.options,i=n.chart,o=i.data,f=o.datasets,s=n.isHorizontal();if(n.min=null,n.max=null,u.stacked){var r={},h=!1,c=!1;t.each(f,function(f,o){var s=i.getDatasetMeta(o),l,a;r[s.type]===undefined&&(r[s.type]={positiveValues:[],negativeValues:[]});l=r[s.type].positiveValues;a=r[s.type].negativeValues;i.isDatasetVisible(o)&&e(s)&&t.each(f.data,function(t,i){var r=+n.getRightValue(t);isNaN(r)||s.data[i].hidden||(l[i]=l[i]||0,a[i]=a[i]||0,u.relativePoints?l[i]=100:r<0?(c=!0,a[i]+=r):(h=!0,l[i]+=r))})});t.each(r,function(i){var r=i.positiveValues.concat(i.negativeValues),u=t.min(r),f=t.max(r);n.min=n.min===null?u:Math.min(n.min,u);n.max=n.max===null?f:Math.max(n.max,f)})}else t.each(f,function(r,u){var f=i.getDatasetMeta(u);i.isDatasetVisible(u)&&e(f)&&t.each(r.data,function(t,i){var r=+n.getRightValue(t);isNaN(r)||f.data[i].hidden||(n.min===null?n.min=r:r<n.min&&(n.min=r),n.max===null?n.max=r:r>n.max&&(n.max=r))})});this.handleTickRangeOptions()},getTickLimit:function(){var u,r=this,i=r.options.ticks,f;return r.isHorizontal()?u=Math.min(i.maxTicksLimit?i.maxTicksLimit:11,Math.ceil(r.width/50)):(f=t.getValueOrDefault(i.fontSize,n.defaults.global.defaultFontSize),u=Math.min(i.maxTicksLimit?i.maxTicksLimit:11,Math.ceil(r.height/(2*f)))),u},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(n,t){return+this.getRightValue(this.chart.data.datasets[t].data[n])},getPixelForValue:function(n){var t=this,f=t.paddingLeft,e=t.paddingBottom,u=t.start,o=+t.getRightValue(n),i,r,s=t.end-u;return t.isHorizontal()?(r=t.width-(f+t.paddingRight),i=t.left+r/s*(o-u),Math.round(i+f)):(r=t.height-(t.paddingTop+e),i=t.bottom-e-r/s*(o-u),Math.round(i))},getValueForPixel:function(n){var t=this,i=t.isHorizontal(),r=t.paddingLeft,u=t.paddingBottom,f=i?t.width-(r+t.paddingRight):t.height-(t.paddingTop+u),e=(i?n-t.left-r:t.bottom-u-n)/f;return t.start+(t.end-t.start)*e},getPixelForTick:function(n){return this.getPixelForValue(this.ticksAsNumbers[n])}});n.scaleService.registerScaleType("linear",r,i)}},{}],41:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=t.noop;n.LinearScaleBase=n.Scale.extend({handleTickRangeOptions:function(){var n=this,f=n.options,i=f.ticks,r,u;i.beginAtZero&&(r=t.sign(n.min),u=t.sign(n.max),r<0&&u<0?n.max=0:r>0&&u>0&&(n.min=0));i.min!==undefined?n.min=i.min:i.suggestedMin!==undefined&&(n.min=Math.min(n.min,i.suggestedMin));i.max!==undefined?n.max=i.max:i.suggestedMax!==undefined&&(n.max=Math.max(n.max,i.suggestedMax));n.min===n.max&&(n.max++,i.beginAtZero||n.min--)},getTickLimit:i,handleDirectionalChanges:i,buildTicks:function(){var n=this,a=n.options,u=n.ticks=[],i=a.ticks,v=t.getValueOrDefault,o=n.getTickLimit(),r,h,c,e;o=Math.max(2,o);h=i.fixedStepSize&&i.fixedStepSize>0||i.stepSize&&i.stepSize>0;h?r=v(i.fixedStepSize,i.stepSize):(c=t.niceNum(n.max-n.min,!1),r=t.niceNum(c/(o-1),!0));var s=Math.floor(n.min/r)*r,l=Math.ceil(n.max/r)*r,f=(l-s)/r;for(f=t.almostEquals(f,Math.round(f),r/1e3)?Math.round(f):Math.ceil(f),u.push(i.min!==undefined?i.min:s),e=1;e<f;++e)u.push(s+e*r);u.push(i.max!==undefined?i.max:l);n.handleDirectionalChanges();n.max=t.max(u);n.min=t.min(u);i.reverse?(u.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice();t.zeroLineIndex=t.ticks.indexOf(0);n.Scale.prototype.convertTicksToLabels.call(t)}})}},{}],42:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i={position:"left",ticks:{callback:function(n,i,r){var u=n/Math.pow(10,Math.floor(t.log10(n)));return n===0?"0":u===1||u===2||u===5||i===0||i===r.length-1?n.toExponential():""}}},r=n.Scale.extend({determineDataLimits:function(){function s(t){return c?t.xAxisID===n.id:t.yAxisID===n.id}var n=this,u=n.options,f=u.ticks,i=n.chart,h=i.data,e=h.datasets,o=t.getValueOrDefault,c=n.isHorizontal(),r;n.min=null;n.max=null;n.minNotZero=null;u.stacked?(r={},t.each(e,function(f,e){var o=i.getDatasetMeta(e);i.isDatasetVisible(e)&&s(o)&&(r[o.type]===undefined&&(r[o.type]=[]),t.each(f.data,function(t,i){var f=r[o.type],e=+n.getRightValue(t);isNaN(e)||o.data[i].hidden||(f[i]=f[i]||0,u.relativePoints?f[i]=100:f[i]+=e)}))}),t.each(r,function(i){var r=t.min(i),u=t.max(i);n.min=n.min===null?r:Math.min(n.min,r);n.max=n.max===null?u:Math.max(n.max,u)})):t.each(e,function(r,u){var f=i.getDatasetMeta(u);i.isDatasetVisible(u)&&s(f)&&t.each(r.data,function(t,i){var r=+n.getRightValue(t);isNaN(r)||f.data[i].hidden||(n.min===null?n.min=r:r<n.min&&(n.min=r),n.max===null?n.max=r:r>n.max&&(n.max=r),r!==0&&(n.minNotZero===null||r<n.minNotZero)&&(n.minNotZero=r))})});n.min=o(f.min,n.min);n.max=o(f.max,n.max);n.min===n.max&&(n.min!==0&&n.min!==null?(n.min=Math.pow(10,Math.floor(t.log10(n.min))-1),n.max=Math.pow(10,Math.floor(t.log10(n.max))+1)):(n.min=1,n.max=10))},buildTicks:function(){for(var n=this,h=n.options,e=h.ticks,o=t.getValueOrDefault,r=n.ticks=[],i=o(e.min,Math.pow(10,Math.floor(t.log10(n.min)))),u,f,s;i<n.max;)r.push(i),i===0?(u=Math.floor(t.log10(n.minNotZero)),f=Math.round(n.minNotZero/Math.pow(10,u))):(u=Math.floor(t.log10(i)),f=Math.floor(i/Math.pow(10,u))+1),f===10&&(f=1,++u),i=f*Math.pow(10,u);s=o(e.max,i);r.push(s);n.isHorizontal()||r.reverse();n.max=t.max(r);n.min=t.min(r);e.reverse?(r.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();n.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(n,t){return+this.getRightValue(this.chart.data.datasets[t].data[n])},getPixelForTick:function(n){return this.getPixelForValue(this.tickValues[n])},getPixelForValue:function(n){var i=this,r,e,o=i.start,u=+i.getRightValue(n),f,h=i.paddingTop,s=i.paddingBottom,c=i.paddingLeft,a=i.options,l=a.ticks;return i.isHorizontal()?(f=t.log10(i.end)-t.log10(o),u===0?e=i.left+c:(r=i.width-(c+i.paddingRight),e=i.left+r/f*(t.log10(u)-t.log10(o))+c)):(r=i.height-(h+s),o!==0||l.reverse?i.end===0&&l.reverse?(f=t.log10(i.start)-t.log10(i.minNotZero),e=u===i.end?i.top+h:u===i.minNotZero?i.top+h+r*.02:i.top+h+r*.02+r*.98/f*(t.log10(u)-t.log10(i.minNotZero))):(f=t.log10(i.end)-t.log10(o),r=i.height-(h+s),e=i.bottom-s-r/f*(t.log10(u)-t.log10(o))):(f=t.log10(i.end)-t.log10(i.minNotZero),e=u===o?i.bottom-s:u===i.minNotZero?i.bottom-s-r*.02:i.bottom-s-r*.02-r*.98/f*(t.log10(u)-t.log10(i.minNotZero)))),e},getValueForPixel:function(n){var i=this,f=t.log10(i.end)-t.log10(i.start),u,r;return i.isHorizontal()?(r=i.width-(i.paddingLeft+i.paddingRight),u=i.start*Math.pow(10,(n-i.left-i.paddingLeft)*f/r)):(r=i.height-(i.paddingTop+i.paddingBottom),u=Math.pow(10,(i.bottom-i.paddingBottom-n)*f/r)/i.start),u}});n.scaleService.registerScaleType("logarithmic",r,i)}},{}],43:[function(n,t){"use strict";t.exports=function(n){var t=n.helpers,i=n.defaults.global,r={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(n){return n}}},u=n.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var n=this,u=n.options,f=u.ticks,r,e;n.width=n.maxWidth;n.height=n.maxHeight;n.xCenter=Math.round(n.width/2);n.yCenter=Math.round(n.height/2);r=t.min([n.height,n.width]);e=t.getValueOrDefault(f.fontSize,i.defaultFontSize);n.drawingArea=u.display?r/2-(e/2+f.backdropPaddingY):r/2},determineDataLimits:function(){var n=this,i=n.chart;n.min=null;n.max=null;t.each(i.data.datasets,function(r,u){if(i.isDatasetVisible(u)){var f=i.getDatasetMeta(u);t.each(r.data,function(t,i){var r=+n.getRightValue(t);isNaN(r)||f.data[i].hidden||(n.min===null?n.min=r:r<n.min&&(n.min=r),n.max===null?n.max=r:r>n.max&&(n.max=r))})}});n.handleTickRangeOptions()},getTickLimit:function(){var n=this.options.ticks,r=t.getValueOrDefault(n.fontSize,i.defaultFontSize);return Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*r)))},convertTicksToLabels:function(){var t=this;n.LinearScaleBase.prototype.convertTicksToLabels.call(t);t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(n,t){return+this.getRightValue(this.chart.data.datasets[t].data[n])},fit:function(){var l=this.options.pointLabels,y=t.getValueOrDefault(l.fontSize,i.defaultFontSize),nt=t.getValueOrDefault(l.fontStyle,i.defaultFontStyle),tt=t.getValueOrDefault(l.fontFamily,i.defaultFontFamily),it=t.fontString(y,nt,tt),p=t.min([this.height/2-y-5,this.width/2]),r,n,u,o,s=this.width,a,w,h=0,v,b,k,d,f,e,g,c;for(this.ctx.font=it,n=0;n<this.getValueCount();n++)r=this.getPointPosition(n,p),u=this.ctx.measureText(this.pointLabels[n]?this.pointLabels[n]:"").width+5,g=this.getIndexAngle(n)+Math.PI/2,c=g*360/(2*Math.PI)%360,c===0||c===180?(o=u/2,r.x+o>s&&(s=r.x+o,a=n),r.x-o<h&&(h=r.x-o,v=n)):c<180?r.x+u>s&&(s=r.x+u,a=n):r.x-u<h&&(h=r.x-u,v=n);k=h;d=Math.ceil(s-this.width);w=this.getIndexAngle(a);b=this.getIndexAngle(v);f=d/Math.sin(w+Math.PI/2);e=k/Math.sin(b+Math.PI/2);f=t.isNumber(f)?f:0;e=t.isNumber(e)?e:0;this.drawingArea=Math.round(p-(e+f)/2);this.setCenterPoint(e,f)},setCenterPoint:function(n,t){var i=this,r=i.width-t-i.drawingArea,u=n+i.drawingArea;i.xCenter=Math.round((u+r)/2+i.left);i.yCenter=Math.round(i.height/2+i.top)},getIndexAngle:function(n){var t=Math.PI*2/this.getValueCount(),i=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0,r=i*Math.PI/180;return n*t-Math.PI/2+r},getDistanceFromCenterForValue:function(n){var t=this,i;return n===null?0:(i=t.drawingArea/(t.max-t.min),t.options.reverse?(t.max-n)*i:(n-t.min)*i)},getPointPosition:function(n,t){var i=this,r=i.getIndexAngle(n);return{x:Math.round(Math.cos(r)*t)+i.xCenter,y:Math.round(Math.sin(r)*t)+i.yCenter}},getPointPositionForValue:function(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var n=this,t=n.min,i=n.max;return n.getPointPositionForValue(0,n.beginAtZero?0:t<0&&i<0?i:t>0&&i>0?t:0)},draw:function(){var r=this,f=r.options,c=f.gridLines,u=f.ticks,l=f.angleLines,h=f.pointLabels,e=t.getValueOrDefault,o,v,y,w;if(f.display){var n=r.ctx,a=e(u.fontSize,i.defaultFontSize),k=e(u.fontStyle,i.defaultFontStyle),d=e(u.fontFamily,i.defaultFontFamily),g=t.fontString(a,k,d);if(t.each(r.ticks,function(o,s){var v,y,h,l,w,p;if(s>0||f.reverse){if(v=r.getDistanceFromCenterForValue(r.ticksAsNumbers[s]),y=r.yCenter-v,c.display&&s!==0)if(n.strokeStyle=t.getValueAtIndexOrDefault(c.color,s-1),n.lineWidth=t.getValueAtIndexOrDefault(c.lineWidth,s-1),f.lineArc)n.beginPath(),n.arc(r.xCenter,r.yCenter,v,0,Math.PI*2),n.closePath(),n.stroke();else{for(n.beginPath(),h=0;h<r.getValueCount();h++)l=r.getPointPosition(h,v),h===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y);n.closePath();n.stroke()}u.display&&(w=e(u.fontColor,i.defaultFontColor),n.font=g,u.showLabelBackdrop&&(p=n.measureText(o).width,n.fillStyle=u.backdropColor,n.fillRect(r.xCenter-p/2-u.backdropPaddingX,y-a/2-u.backdropPaddingY,p+u.backdropPaddingX*2,a+u.backdropPaddingY*2)),n.textAlign="center",n.textBaseline="middle",n.fillStyle=w,n.fillText(o,r.xCenter,y))}}),!f.lineArc){n.lineWidth=l.lineWidth;n.strokeStyle=l.color;var p=r.getDistanceFromCenterForValue(f.reverse?r.min:r.max),nt=e(h.fontSize,i.defaultFontSize),tt=e(h.fontStyle,i.defaultFontStyle),it=e(h.fontFamily,i.defaultFontFamily),rt=t.fontString(nt,tt,it);for(o=r.getValueCount()-1;o>=0;o--){l.display&&(v=r.getPointPosition(o,p),n.beginPath(),n.moveTo(r.xCenter,r.yCenter),n.lineTo(v.x,v.y),n.stroke(),n.closePath());y=r.getPointPosition(o,p+5);w=e(h.fontColor,i.defaultFontColor);n.font=rt;n.fillStyle=w;var b=r.pointLabels,ut=this.getIndexAngle(o)+Math.PI/2,s=ut*360/(2*Math.PI)%360;n.textAlign=s===0||s===180?"center":s<180?"left":"right";n.textBaseline=s===90||s===270?"middle":s>270||s<90?"bottom":"top";n.fillText(b[o]?b[o]:"",y.x,y.y)}}}}});n.scaleService.registerScaleType("radialLinear",u,r)}},{}],44:[function(n,t){"use strict";var i=n(1);i=typeof i=="function"?i:window.moment;t.exports=function(n){var t=n.helpers,r={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},u=n.Scale.extend({initialize:function(){if(!i)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");n.Scale.prototype.initialize.call(this)},getLabelMoment:function(n,t){return typeof this.labelMoments[n]!="undefined"?this.labelMoments[n][t]:null},getMomentStartOf:function(n){var t=this;return t.options.time.unit==="week"&&t.options.time.isoWeekday!==!1?n.clone().startOf("isoWeek").isoWeekday(t.options.time.isoWeekday):n.clone().startOf(t.tickUnit)},determineDataLimits:function(){var n=this,r;n.labelMoments=[];r=[];n.chart.data.labels&&n.chart.data.labels.length>0?(t.each(n.chart.data.labels,function(t){var i=n.parseTime(t);i.isValid()&&(n.options.time.round&&i.startOf(n.options.time.round),r.push(i))},n),n.firstTick=i.min.call(n,r),n.lastTick=i.max.call(n,r)):(n.firstTick=null,n.lastTick=null);t.each(n.chart.data.datasets,function(u,f){var e=[],o=n.chart.isDatasetVisible(f);typeof u.data[0]=="object"&&u.data[0]!==null?t.each(u.data,function(t){var r=n.parseTime(n.getRightValue(t));r.isValid()&&(n.options.time.round&&r.startOf(n.options.time.round),e.push(r),o&&(n.firstTick=n.firstTick!==null?i.min(n.firstTick,r):r,n.lastTick=n.lastTick!==null?i.max(n.lastTick,r):r))},n):e=r;n.labelMoments.push(e)},n);n.options.time.min&&(n.firstTick=n.parseTime(n.options.time.min));n.options.time.max&&(n.lastTick=n.parseTime(n.options.time.max));n.firstTick=(n.firstTick||i()).clone();n.lastTick=(n.lastTick||i()).clone()},buildTicks:function(){var i=this,f,e,u,o,p,w,c,l,a,s,v,b;i.ctx.save();var y=t.getValueOrDefault(i.options.ticks.fontSize,n.defaults.global.defaultFontSize),k=t.getValueOrDefault(i.options.ticks.fontStyle,n.defaults.global.defaultFontStyle),d=t.getValueOrDefault(i.options.ticks.fontFamily,n.defaults.global.defaultFontFamily),g=t.fontString(y,k,d);if(i.ctx.font=g,i.ticks=[],i.unitScale=1,i.scaleSizeInUnits=0,i.options.time.unit)i.tickUnit=i.options.time.unit||"day",i.displayFormat=i.options.time.displayFormats[i.tickUnit],i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.unitScale=t.getValueOrDefault(i.options.time.unitStepSize,1);else{var nt=i.isHorizontal()?i.width-(i.paddingLeft+i.paddingRight):i.height-(i.paddingTop+i.paddingBottom),tt=i.tickFormatFunction(i.firstTick,0,[]),h=i.ctx.measureText(tt).width,it=Math.cos(t.toRadians(i.options.ticks.maxRotation)),rt=Math.sin(t.toRadians(i.options.ticks.maxRotation));for(h=h*it+y*rt,f=nt/h,i.tickUnit="millisecond",i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.displayFormat=i.options.time.displayFormats[i.tickUnit],e=0,u=r.units[e];e<r.units.length;)if(i.unitScale=1,t.isArray(u.steps)&&Math.ceil(i.scaleSizeInUnits/f)<t.max(u.steps)){for(o=0;o<u.steps.length;++o)if(u.steps[o]>=Math.ceil(i.scaleSizeInUnits/f)){i.unitScale=t.getValueOrDefault(i.options.time.unitStepSize,u.steps[o]);break}break}else if(u.maxStep===!1||Math.ceil(i.scaleSizeInUnits/f)<u.maxStep){i.unitScale=t.getValueOrDefault(i.options.time.unitStepSize,Math.ceil(i.scaleSizeInUnits/f));break}else++e,u=r.units[e],i.tickUnit=u.name,p=i.firstTick.diff(i.getMomentStartOf(i.firstTick),i.tickUnit,!0),w=i.getMomentStartOf(i.lastTick.clone().add(1,i.tickUnit)).diff(i.lastTick,i.tickUnit,!0),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)+p+w,i.displayFormat=i.options.time.displayFormats[u.name]}for(i.options.time.min?c=i.getMomentStartOf(i.firstTick):(i.firstTick=i.getMomentStartOf(i.firstTick),c=i.firstTick),i.options.time.max||(l=i.getMomentStartOf(i.lastTick),a=l.diff(i.lastTick,i.tickUnit,!0),a<0?i.lastTick=i.getMomentStartOf(i.lastTick.add(1,i.tickUnit)):a>=0&&(i.lastTick=l),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)),i.options.time.displayFormat&&(i.displayFormat=i.options.time.displayFormat),i.ticks.push(i.firstTick.clone()),s=1;s<=i.scaleSizeInUnits;++s){if(v=c.clone().add(s,i.tickUnit),i.options.time.max&&v.diff(i.lastTick,i.tickUnit,!0)>=0)break;s%i.unitScale==0&&i.ticks.push(v)}b=i.ticks[i.ticks.length-1].diff(i.lastTick,i.tickUnit);(b!==0||i.scaleSizeInUnits===0)&&(i.options.time.max?(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.ticks[0],i.tickUnit,!0)):(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)));i.ctx.restore()},getLabelForIndex:function(n,t){var i=this,r=i.chart.data.labels&&n<i.chart.data.labels.length?i.chart.data.labels[n]:"";return typeof i.chart.data.datasets[t].data[0]=="object"&&(r=i.getRightValue(i.chart.data.datasets[t].data[n])),i.options.time.tooltipFormat&&(r=i.parseTime(r).format(i.options.time.tooltipFormat)),r},tickFormatFunction:function(n,i,r){var u=n.format(this.displayFormat),f=this.options.ticks,e=t.getValueOrDefault(f.callback,f.userCallback);return e?e(u,i,r):u},convertTicksToLabels:function(){var n=this;n.tickMoments=n.ticks;n.ticks=n.ticks.map(n.tickFormatFunction,n)},getPixelForValue:function(n,t,i){var r=this,f,u,e,o,s,h,c;return n&&n.isValid||(n=r.parseTime(r.getRightValue(n))),f=n&&n.isValid&&n.isValid()?n:r.getLabelMoment(i,t),f?(u=f.diff(r.firstTick,r.tickUnit,!0),e=u!==0?u/r.scaleSizeInUnits:u,r.isHorizontal()?(o=r.width-(r.paddingLeft+r.paddingRight),s=o*e+r.paddingLeft,r.left+Math.round(s)):(h=r.height-(r.paddingTop+r.paddingBottom),c=h*e+r.paddingTop,r.top+Math.round(c))):void 0},getPixelForTick:function(n){return this.getPixelForValue(this.tickMoments[n],null,null)},getValueForPixel:function(n){var t=this,u=t.isHorizontal()?t.width-(t.paddingLeft+t.paddingRight):t.height-(t.paddingTop+t.paddingBottom),r=(n-(t.isHorizontal()?t.left+t.paddingLeft:t.top+t.paddingTop))/u;return r*=t.scaleSizeInUnits,t.firstTick.clone().add(i.duration(r,t.tickUnit).asSeconds(),"seconds")},parseTime:function(n){var t=this;return typeof t.options.time.parser=="string"?i(n,t.options.time.parser):typeof t.options.time.parser=="function"?t.options.time.parser(n):typeof n.getMonth=="function"||typeof n=="number"?i(n):n.isValid&&n.isValid()?n:typeof t.options.time.format!="string"&&t.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),t.options.time.format(n)):i(n,t.options.time.format)}});n.scaleService.registerScaleType("time",u,{position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}})}},{"1":1}]},{},[7])(7)})