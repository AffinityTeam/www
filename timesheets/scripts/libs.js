var Element,IFrame,Elements,Cookie,InputValidator;(function(){"use strict";var c=this,g=c.Chart,t=function(t){var i,r;this.canvas=t.canvas,this.ctx=t;var u=function(n,t){return n["offset"+t]?n["offset"+t]:document.defaultView.getComputedStyle(n).getPropertyValue(t)},i=this.width=u(t.canvas,"Width"),r=this.height=u(t.canvas,"Height");return t.canvas.width=i,t.canvas.height=r,i=this.width=t.canvas.width,r=this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};t.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},t.types={};var n=t.helpers={},i=n.each=function(n,t,i){var f=Array.prototype.slice.call(arguments,3),r,u;if(n)if(n.length===+n.length)for(r=0;r<n.length;r++)t.apply(i,[n[r],r].concat(f));else for(u in n)t.apply(i,[n[u],u].concat(f))},l=n.clone=function(n){var t={};return i(n,function(i,r){n.hasOwnProperty(r)&&(t[r]=i)}),t},r=n.extend=function(n){return i(Array.prototype.slice.call(arguments,1),function(t){i(t,function(i,r){t.hasOwnProperty(r)&&(n[r]=i)})}),n},nt=n.merge=function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),r.apply(null,n)},tt=n.indexOf=function(n,t){if(Array.prototype.indexOf)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1},p=(n.where=function(t,i){var r=[];return n.each(t,function(n){i(n)&&r.push(n)}),r},n.findNextWhere=function(n,t,i){var r,u;for(i||(i=-1),r=i+1;r<n.length;r++)if(u=n[r],t(u))return u},n.findPreviousWhere=function(n,t,i){var r,u;for(i||(i=n.length),r=i-1;r>=0;r--)if(u=n[r],t(u))return u},n.inherits=function(n){var i=this,t=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return i.apply(this,arguments)},u=function(){this.constructor=t};return u.prototype=i.prototype,t.prototype=new u,t.extend=p,n&&r(t.prototype,n),t.__super__=i.prototype,t}),a=n.noop=function(){},it=n.uid=function(){var n=0;return function(){return"chart-"+n++}}(),rt=n.warn=function(n){window.console&&"function"==typeof window.console.warn&&console.warn(n)},ut=n.amd="function"==typeof define&&define.amd,u=n.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},h=n.max=function(n){return Math.max.apply(Math,n)},o=n.min=function(n){return Math.min.apply(Math,n)},w=(n.cap=function(n,t,i){if(u(t)){if(n>t)return t}else if(u(i)&&i>n)return i;return n},n.getDecimalPlaces=function(n){return n%1!=0&&u(n)?n.toString().split(".")[1].length:0}),v=n.radians=function(n){return n*(Math.PI/180)},b=(n.getAngleFromPoint=function(n,t){var i=t.x-n.x,r=t.y-n.y,f=Math.sqrt(i*i+r*r),u=2*Math.PI+Math.atan2(r,i);return 0>i&&0>r&&(u+=2*Math.PI),{angle:u,distance:f}},n.aliasPixel=function(n){return n%2==0?0:.5}),ft=(n.splineCurve=function(n,t,i,r){var u=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),f=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),e=r*u/(u+f),o=r*f/(u+f);return{inner:{x:t.x-e*(i.x-n.x),y:t.y-e*(i.y-n.y)},outer:{x:t.x+o*(i.x-n.x),y:t.y+o*(i.y-n.y)}}},n.calculateOrderOfMagnitude=function(n){return Math.floor(Math.log(n)/Math.LN10)}),f=(n.calculateScaleRange=function(n,t,i,r,u){var w=2,v=Math.floor(t/(1.5*i)),y=w>=v,c=h(n),l=o(n);c===l&&(c+=.5,l>=.5&&!r?l-=.5:c+=.5);for(var b=Math.abs(c-l),s=ft(b),k=Math.ceil(c/(1*Math.pow(10,s)))*Math.pow(10,s),p=r?0:Math.floor(l/(1*Math.pow(10,s)))*Math.pow(10,s),a=k-p,f=Math.pow(10,s),e=Math.round(a/f);(e>v||v>2*e)&&!y;)if(e>v)f*=2,e=Math.round(a/f),e%1!=0&&(y=!0);else if(u&&s>=0){if(f/2%1!=0)break;f/=2,e=Math.round(a/f)}else f/=2,e=Math.round(a/f);return y&&(e=w,f=a/e),{steps:e,stepValue:f,min:p,max:p+e*f}},n.template=function(n,t){function r(n,t){var r=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[n]=i[n];return t?r(t):r}if(n instanceof Function)return n(t);var i={};return r(n,t)}),s=(n.generateLabels=function(n,t,r,u){var e=new Array(t);return labelTemplateString&&i(e,function(t,i){e[i]=f(n,{value:r+u*(i+1)})}),e},n.easingEffects={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-1*n*(n-2)},easeInOutQuad:function(n){return(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1*((n=n/1-1)*n*n+1)},easeInOutCubic:function(n){return(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-1*((n=n/1-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},easeInQuint:function(n){return 1*(n/=1)*n*n*n*n},easeOutQuint:function(n){return 1*((n=n/1-1)*n*n*n*n+1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-1*Math.cos(n/1*(Math.PI/2))+1},easeOutSine:function(n){return 1*Math.sin(n/1*(Math.PI/2))},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n/1)-1)},easeInExpo:function(n){return 0===n?1:1*Math.pow(2,10*(n/1-1))},easeOutExpo:function(n){return 1===n?1:1*(-Math.pow(2,-10*n)+1)},easeInOutExpo:function(n){return 0===n?0:1===n?1:(n/=.5)<1?.5*Math.pow(2,10*(n-1)):.5*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-1*(Math.sqrt(1-(n/=1)*n)-1)},easeOutCirc:function(n){return 1*Math.sqrt(1-(n=n/1-1)*n)},easeInOutCirc:function(n){return(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:1==(n/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t)))},easeOutElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:1==(n/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*n)*Math.sin(2*(1*n-r)*Math.PI/t)+1)},easeInOutElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:2==(n/=.5)?1:(t||(t=.3*1.5),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),1>n?-.5*i*Math.pow(2,10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t):i*Math.pow(2,-10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t)*.5+1)},easeInBack:function(n){var t=1.70158;return 1*(n/=1)*n*((t+1)*n-t)},easeOutBack:function(n){var t=1.70158;return 1*((n=n/1-1)*n*((t+1)*n+t)+1)},easeInOutBack:function(n){var t=1.70158;return(n/=.5)<1?.5*n*n*(((t*=1.525)+1)*n-t):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:function(n){return 1-s.easeOutBounce(1-n)},easeOutBounce:function(n){return(n/=1)<1/2.75?7.5625*n*n:2/2.75>n?1*(7.5625*(n-=1.5/2.75)*n+.75):2.5/2.75>n?1*(7.5625*(n-=2.25/2.75)*n+.9375):1*(7.5625*(n-=2.625/2.75)*n+.984375)},easeInOutBounce:function(n){return.5>n?.5*s.easeInBounce(2*n):.5*s.easeOutBounce(2*n-1)+.5}}),k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}(),et=n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){return window.clearTimeout(n,1e3/60)}}(),ot=(n.animationLoop=function(n,t,i,r,u,f){var e=0,h=s[i]||s.linear,o=function(){e++;var i=e/t,s=h(i);n.call(f,s,i,e),r.call(f,s,i),t>e?f.animationFrame=k(o):u.apply(f)};k(o)},n.getRelativePosition=function(n){var r,u,t=n.originalEvent||n,f=n.currentTarget||n.srcElement,i=f.getBoundingClientRect();return t.touches?(r=t.touches[0].clientX-i.left,u=t.touches[0].clientY-i.top):(r=t.clientX-i.left,u=t.clientY-i.top),{x:r,y:u}},n.addEvent=function(n,t,i){n.addEventListener?n.addEventListener(t,i):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}),st=n.removeEvent=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=a},ht=(n.bindEvents=function(n,t,r){n.events||(n.events={}),i(t,function(t){n.events[t]=function(){r.apply(n,arguments)},ot(n.chart.canvas,t,n.events[t])})},n.unbindEvents=function(n,t){i(t,function(t,i){st(n.chart.canvas,i,t)})}),ct=n.getMaximumWidth=function(n){var t=n.parentNode;return t.clientWidth},lt=n.getMaximumHeight=function(n){var t=n.parentNode;return t.clientHeight},at=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(n){var t=n.ctx,i=n.canvas.width,r=n.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),vt=n.clear=function(n){n.ctx.clearRect(0,0,n.width,n.height)},e=n.fontString=function(n,t,i){return t+" "+n+"px "+i},y=n.longestText=function(n,t,r){n.font=t;var u=0;return i(r,function(t){var i=n.measureText(t).width;u=i>u?i:u}),u},d=n.drawRoundedRectangle=function(n,t,i,r,u,f){n.beginPath(),n.moveTo(t+f,i),n.lineTo(t+r-f,i),n.quadraticCurveTo(t+r,i,t+r,i+f),n.lineTo(t+r,i+u-f),n.quadraticCurveTo(t+r,i+u,t+r-f,i+u),n.lineTo(t+f,i+u),n.quadraticCurveTo(t,i+u,t,i+u-f),n.lineTo(t,i+f),n.quadraticCurveTo(t,i,t+f,i),n.closePath()};t.instances={},t.Type=function(n,i,r){this.options=i,this.chart=r,this.id=it(),t.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,n)},r(t.Type.prototype,{initialize:function(){return this},clear:function(){return vt(this.chart),this},stop:function(){return et(this.animationFrame),this},resize:function(n){this.stop();var t=this.chart.canvas,i=ct(this.chart.canvas),r=this.options.maintainAspectRatio?i/this.chart.aspectRatio:lt(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=r,at(this.chart),"function"==typeof n&&n.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:a,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return f(this.options.legendTemplate,this)},destroy:function(){this.clear(),ht(this,this.events);var n=this.chart.canvas;n.width=this.chart.width,n.height=this.chart.height,n.style.removeProperty?(n.style.removeProperty("width"),n.style.removeProperty("height")):(n.style.removeAttribute("width"),n.style.removeAttribute("height")),delete t.instances[this.id]},showTooltip:function(r,u){var c,l,e,s;if("undefined"==typeof this.activeElements&&(this.activeElements=[]),c=function(n){var t=!1;return n.length!==this.activeElements.length?t=!0:(i(n,function(n,i){n!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,r),c||u){if(this.activeElements=r,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),r.length>0)if(this.datasets&&this.datasets.length>1){for(s=this.datasets.length-1;s>=0&&(l=this.datasets[s].points||this.datasets[s].bars||this.datasets[s].segments,e=tt(l,r[0]),-1===e);s--);var a=[],v=[],y=function(){var t,f,s,i,c,l=[],r=[],u=[];return n.each(this.datasets,function(n){t=n.points||n.bars||n.segments,t[e]&&t[e].hasValue()&&l.push(t[e])}),n.each(l,function(t){r.push(t.x),u.push(t.y),a.push(n.template(this.options.multiTooltipTemplate,t)),v.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),c=o(u),s=h(u),i=o(r),f=h(r),{x:i>this.chart.width/2?i:f,y:(c+s)/2}}.call(this,e);new t.MultiTooltip({x:y.x,y:y.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:a,legendColors:v,legendColorBackground:this.options.multiTooltipKeyBackground,title:r[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else i(r,function(n){var i=n.tooltipPosition();new t.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:f(this.options.tooltipTemplate,n),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),t.Type.extend=function(n){var i=this,u=function(){return i.apply(this,arguments)},f,e;return(u.prototype=l(i.prototype),r(u.prototype,n),u.extend=t.Type.extend,n.name||i.prototype.name)?(f=n.name||i.prototype.name,e=t.defaults[i.prototype.name]?l(t.defaults[i.prototype.name]):{},t.defaults[f]=r(e,n.defaults),t.types[f]=u,t.prototype[f]=function(n,i){var r=nt(t.defaults.global,t.defaults[f],i||{});return new u(n,r,this)}):rt("Name not provided for this chart, so it hasn't been registered"),i},t.Element=function(n){r(this,n),this.initialize.apply(this,arguments),this.save()},r(t.Element.prototype,{initialize:function(){},restore:function(n){return n?i(n,function(n){this[n]=this._saved[n]},this):r(this,this._saved),this},save:function(){return this._saved=l(this),delete this._saved._saved,this},update:function(n){return i(n,function(n,t){this._saved[t]=this[t],this[t]=n},this),this},transition:function(n,t){return i(n,function(n,i){this[i]=(n-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return u(this.value)}}),t.Element.extend=p,t.Point=t.Element.extend({display:!0,inRange:function(n,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(n-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var n=this.ctx;n.beginPath(),n.arc(this.x,this.y,this.radius,0,2*Math.PI),n.closePath(),n.strokeStyle=this.strokeColor,n.lineWidth=this.strokeWidth,n.fillStyle=this.fillColor,n.fill(),n.stroke()}}}),t.Arc=t.Element.extend({inRange:function(t,i){var r=n.getAngleFromPoint(this,{x:t,y:i}),u=r.angle>=this.startAngle&&r.angle<=this.endAngle,f=r.distance>=this.innerRadius&&r.distance<=this.outerRadius;return u&&f},tooltipPosition:function(){var n=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(n)*t,y:this.y+Math.sin(n)*t}},draw:function(){try{var n=this.ctx;n.beginPath(),n.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),n.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),n.closePath(),n.strokeStyle=this.strokeColor,n.lineWidth=this.strokeWidth,n.fillStyle=this.fillColor,n.fill(),n.lineJoin="bevel",this.showStroke&&n.stroke()}catch(t){}}}),t.Rectangle=t.Element.extend({draw:function(){var n=this.ctx,f=this.width/2,t=this.x-f,i=this.x+f,r=this.base-(this.base-this.y),u=this.strokeWidth/2;this.showStroke&&(t+=u,i-=u,r+=u),n.beginPath(),n.fillStyle=this.fillColor,n.strokeStyle=this.strokeColor,n.lineWidth=this.strokeWidth,n.moveTo(t,this.base),n.lineTo(t,r),n.lineTo(i,r),n.lineTo(i,this.base),n.fill(),this.showStroke&&n.stroke()},height:function(){return this.base-this.y},inRange:function(n,t){return n>=this.x-this.width/2&&n<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),t.Tooltip=t.Element.extend({draw:function(){var n=this.chart.ctx,r,u;n.font=e(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,i=n.measureText(this.text).width+2*this.xPadding,f=this.fontSize+2*this.yPadding,o=f+this.caretHeight+t;if(this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-o<0&&(this.yAlign="below"),r=this.x-i/2,u=this.y-o,n.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":n.beginPath(),n.moveTo(this.x,this.y-t),n.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),n.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),n.closePath(),n.fill();break;case"below":u=this.y+t+this.caretHeight,n.beginPath(),n.moveTo(this.x,this.y+t),n.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),n.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),n.closePath(),n.fill()}switch(this.xAlign){case"left":r=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}d(n,r,u,i,f,this.cornerRadius),n.fill(),n.fillStyle=this.textColor,n.textAlign="center",n.textBaseline="middle",n.fillText(this.text,r+i/2,u+f/2)}}}),t.MultiTooltip=t.Element.extend({initialize:function(){var n;this.font=e(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=e(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=y(this.ctx,this.font,this.labels)+this.fontSize+3,r=h([i,t]);this.width=r+2*this.xPadding,n=this.height/2,this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(n){var t=this.y-this.height/2+this.yPadding,i=n-1;return 0===n?t+this.titleFontSize/2:t+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{d(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(n,i){t.fillStyle=this.textColor,t.fillText(n,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),t.Scale=t.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?y(this.ctx,this.font,this.yLabels):0},addXLabel:function(n){this.xLabels.push(n),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,n=this.endPoint-this.startPoint;for(this.calculateYRange(n),this.buildYLabels(),this.calculateXLabelRotation();n>this.endPoint-this.startPoint;)n=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(n),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var r,e,n,u,t,i,f;if(this.ctx.font=this.font,n=this.ctx.measureText(this.xLabels[0]).width,u=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=u/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(i=y(this.ctx,this.font,this.xLabels),this.xLabelWidth=i,f=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>f&&0===this.xLabelRotation||this.xLabelWidth>f&&this.xLabelRotation<=90&&this.xLabelRotation>0;)t=Math.cos(v(this.xLabelRotation)),r=t*n,e=t*u,r+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=r+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=t*i;this.xLabelRotation>0&&(this.endPoint-=Math.sin(v(this.xLabelRotation))*i+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:a,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(n){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(n-this.min)},calculateX:function(n){var r=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),t=r/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=t*n+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=t/2),Math.round(i)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,u=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,i(this.yLabels,function(i,f){var s=this.endPoint-u*f,e=Math.round(s),o=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(i,r-10,s),0!==f||o||(o=!0),o&&t.beginPath(),f>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),e+=n.aliasPixel(t.lineWidth),o&&(t.moveTo(r,e),t.lineTo(this.width,e),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r-5,e),t.lineTo(r,e),t.stroke(),t.closePath()},this),i(this.xLabels,function(n,i){var e=this.calculateX(i)+b(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),f=this.xLabelRotation>0,u=this.showVerticalLines;0!==i||u||(u=!0),u&&t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),u&&(t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(e,f?this.endPoint+12:this.endPoint+8),t.rotate(-1*v(this.xLabelRotation)),t.font=this.font,t.textAlign=f?"right":"center",t.textBaseline=f?"middle":"top",t.fillText(n,0,0),t.restore()},this))}}),t.RadialScale=t.Element.extend({initialize:function(){this.size=o([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(n){var t=this.drawingArea/(this.max-this.min);return(n-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,n,i,h,a,y,v,p,w,b,r,s,k=o([this.height/2-this.pointLabelFontSize-5,this.width/2]),c=this.width,l=0;for(this.ctx.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),n=0;n<this.valuesCount;n++)t=this.getPointPosition(n,k),i=this.ctx.measureText(f(this.templateString,{value:this.labels[n]})).width+5,0===n||n===this.valuesCount/2?(h=i/2,t.x+h>c&&(c=t.x+h,a=n),t.x-h<l&&(l=t.x-h,v=n)):n<this.valuesCount/2?t.x+i>c&&(c=t.x+i,a=n):n>this.valuesCount/2&&t.x-i<l&&(l=t.x-i,v=n);w=l,b=Math.ceil(c-this.width),y=this.getIndexAngle(a),p=this.getIndexAngle(v),r=b/Math.sin(y+Math.PI/2),s=w/Math.sin(p+Math.PI/2),r=u(r)?r:0,s=u(s)?s:0,this.drawingArea=k-(s+r)/2,this.setCenterPoint(s,r)},setCenterPoint:function(n,t){var i=this.width-t-this.drawingArea,r=n+this.drawingArea;this.xCenter=(r+i)/2,this.yCenter=this.height/2},getIndexAngle:function(n){var t=2*Math.PI/this.valuesCount;return n*t-Math.PI/2},getPointPosition:function(n,t){var i=this.getIndexAngle(n);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){var n,t,u,f;if(this.display&&(n=this.ctx,i(this.yLabels,function(t,i){var r,f,o,u,s;if(i>0){if(f=i*(this.drawingArea/this.steps),o=this.yCenter-f,this.lineWidth>0)if(n.strokeStyle=this.lineColor,n.lineWidth=this.lineWidth,this.lineArc)n.beginPath(),n.arc(this.xCenter,this.yCenter,f,0,2*Math.PI),n.closePath(),n.stroke();else{for(n.beginPath(),u=0;u<this.valuesCount;u++)r=this.getPointPosition(u,this.calculateCenterOffset(this.min+i*this.stepValue)),0===u?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);n.closePath(),n.stroke()}this.showLabels&&((n.font=e(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)&&(s=n.measureText(t).width,n.fillStyle=this.backdropColor,n.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.fontColor,n.fillText(t,this.xCenter,o))}},this),!this.lineArc))for(n.lineWidth=this.angleLineWidth,n.strokeStyle=this.angleLineColor,t=this.valuesCount-1;t>=0;t--){this.angleLineWidth>0&&(u=this.getPointPosition(t,this.calculateCenterOffset(this.max)),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(u.x,u.y),n.stroke(),n.closePath()),f=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5),n.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),n.fillStyle=this.pointLabelFontColor;var s=this.labels.length,o=this.labels.length/2,r=o/2,h=r>t||t>s-r,c=t===r||t===s-r;n.textAlign=0===t?"center":t===o?"center":o>t?"left":"right",n.textBaseline=c?"middle":h?"bottom":"top",n.fillText(this.labels[t],f.x,f.y)}}}),n.addEvent(window,"resize",function(){var n;return function(){clearTimeout(n),n=setTimeout(function(){i(t.instances,function(n){if(n.options.responsive)try{n.resize(n.render,!0)}catch(t){}})},50)}}()),ut?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t),c.Chart=t,t.noConflict=function(){return c.Chart=g,t}}).call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(n,t,i){var f=this.calculateBaseWidth(),e=this.calculateX(i)-f/2,u=this.calculateBarWidth(n);return e+u*t+t*r.barDatasetSpacing+u/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(n){var t=this.calculateBaseWidth()-(n-1)*r.barDatasetSpacing;return t/n}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(n){n.restore(["fillColor","strokeColor"])}),n.each(i,function(n){n.fillColor=n.highlightFill,n.strokeColor=n.highlightStroke}),this.showTooltip(i)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(r),n.each(t.data,function(n,u){r.bars.push(new this.BarClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(i.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,r){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])}),this.eachBars(function(n){n.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(i,r){n.each(i.bars,t,this,r)},this)},getBarsAtEvent:function(t){for(var i,u=[],f=n.getRelativePosition(t),e=function(n){u.push(n.bars[i])},r=0;r<this.datasets.length;r++)for(i=0;i<this.datasets[r].bars.length;i++)if(this.datasets[r].bars[i].inRange(f.x,f.y))return n.each(this.datasets,e),u;return u},buildScale:function(t){var r=this,u=function(){var n=[];return r.eachBars(function(t){n.push(t.value)}),n},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(u(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(i)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].bars.push(new this.BarClass({value:n,label:i,x:this.scale.calculateBarX(this.datasets.length,t,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[t].strokeColor,fillColor:this.datasets[t].fillColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(n){n.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear(),this.chart.ctx,this.scale.draw(i),n.each(this.datasets,function(t,r){n.each(t.bars,function(n,t){n.hasValue()&&(n.base=this.scale.endPoint,n.transition({x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.calculateY(n.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var r=this,t=r.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(i){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])}),n.each(i,function(n){n.fillColor=n.highlightColor}),this.showTooltip(i)}),this.calculateTotal(i),n.each(i,function(n,t){this.addData(n,t,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:n.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:n.color,highlightColor:n.highlight||n.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(n.value),label:n.label})),i||(this.reflow(),this.update())},calculateCircumference:function(n){return 2*Math.PI*(Math.abs(n)/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(n){this.total+=Math.abs(n.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(n){n.restore(["fillColor"])}),n.each(this.segments,function(n){n.save()}),this.render()},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(n){n.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear(),n.each(this.segments,function(n,t){n.transition({circumference:this.calculateCircumference(n.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),n.endAngle=n.startAngle+n.circumference,n.draw(),0===t&&(n.startAngle=1.5*Math.PI),t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(n){return Math.pow(n-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])}),n.each(i,function(n){n.fillColor=n.highlightFill,n.strokeColor=n.highlightStroke}),this.showTooltip(i)}),n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),n.each(t.data,function(n,u){r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(i.labels),this.eachPoints(function(t,i){n.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])}),this.eachPoints(function(n){n.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(n){n.inRange(r.x,r.y)&&i.push(n)})},this),i},buildScale:function(i){var u=this,f=function(){var n=[];return u.eachPoints(function(t){n.push(t.value)}),n},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:i.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(f(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:i,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(r)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(n){n.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var u=t||1;this.clear();var i=this.chart.ctx,r=function(n){return null!==n.value},e=function(t,i,u){return n.findNextWhere(i,r,u)||t},f=function(t,i,u){return n.findPreviousWhere(i,r,u)||t};this.scale.draw(u),n.each(this.datasets,function(t){var o=n.where(t.points,r);n.each(t.points,function(n,t){n.hasValue()&&n.transition({y:this.scale.calculateY(n.value),x:this.scale.calculateX(t)},u)},this),this.options.bezierCurve&&n.each(o,function(t,i){var r=i>0&&i<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(f(t,o,i),t,e(t,o,i),r),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(o,function(n,t){if(0===t)i.moveTo(n.x,n.y);else if(this.options.bezierCurve){var r=f(n,o,t);i.bezierCurveTo(r.controlPoints.outer.x,r.controlPoints.outer.y,n.controlPoints.inner.x,n.controlPoints.inner.y,n.x,n.y)}else i.lineTo(n.x,n.y)},this),i.stroke(),this.options.datasetFill&&o.length>0&&(i.lineTo(o[o.length-1].x,this.scale.endPoint),i.lineTo(o[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(o,function(n){n.draw()})},this)}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:i.length}),this.updateScaleRange(i),this.scale.update(),n.each(i,function(n,t){this.addData(n,t,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])}),n.each(i,function(n){n.fillColor=n.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:n.color,highlightColor:n.highlight||n.color,label:n.label,value:n.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(n.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(n){this.total+=n.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[],r;n.each(t,function(n){i.push(n.value)}),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly),n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(n){n.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(n){n.update({outerRadius:this.scale.calculateCenterOffset(n.value)})},this)},draw:function(t){var i=t||1;this.clear(),n.each(this.segments,function(n,t){n.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(n.value)},i),n.endAngle=n.startAngle+n.circumference,0===t&&(n.startAngle=1.5*Math.PI),t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle),n.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(i),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])}),n.each(i,function(n){n.fillColor=n.highlightFill,n.strokeColor=n.highlightStroke}),this.showTooltip(i)}),n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),n.each(t.data,function(n,u){var f;this.scale.animation||(f=this.scale.getPointPosition(u,this.scale.calculateCenterOffset(n))),r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var f=n.getRelativePosition(t),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},f),e=2*Math.PI/this.scale.valuesCount,i=Math.round((r.angle-1.5*Math.PI)/e),u=[];return(i>=this.scale.valuesCount||0>i)&&(i=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(n){u.push(n.points[i])}),u},buildScale:function(n){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:n.labels,valuesCount:n.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(n.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return n.each(t,function(t){t.data?i=i.concat(t.data):n.each(t.points,function(n){i.push(n.value)})}),i}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(t,i){this.scale.valuesCount++,n.each(t,function(n,t){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(n));this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:r.x,y:r.y,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(n){n.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(n){n.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var r=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(n,t){n.hasValue()&&n.transition(this.scale.getPointPosition(t,this.scale.calculateCenterOffset(n.value)),r)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(n,t){0===t?i.moveTo(n.x,n.y):i.lineTo(n.x,n.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),n.each(t.points,function(n){n.hasValue()&&n.draw()})},this)}})}.call(this),!function(){function ll(n){return n&&(n.ownerDocument||n.document||n).documentElement}function bt(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function nr(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function si(n){return null===n?NaN:+n}function ct(n){return!isNaN(n)}function al(n){return{left:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}}function uk(n){return n.length}function fk(n){for(var t=1;n*t%1;)t*=10;return t}function vl(n,t){for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}function lt(){this._=Object.create(null)}function ar(n){return(n+="")===nb||n[0]===gf?gf+n:n}function vu(n){return(n+="")[0]===gf?n.slice(1):n}function yl(n){return ar(n)in this._}function pl(n){return(n=ar(n))in this._&&delete this._[n]}function wl(){var n=[],t;for(t in this._)n.push(vu(t));return n}function bl(){var n=0,t;for(t in this._)++n;return n}function kl(){for(var n in this._)return!1;return!0}function fo(){this._=Object.create(null)}function v(n){return n}function ek(n,t,i){return function(){var r=i.apply(t,arguments);return r===t?n:r}}function eo(n,t){var i,u,r;if(t in n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0,u=gh.length;u>i;++i)if(r=gh[i]+t,r in n)return r}function l(){}function oo(){}function dl(n){function r(){for(var i,r=t,u=-1,f=r.length;++u<f;)(i=r[u].on)&&i.apply(this,arguments);return n}var t=[],i=new lt;return r.on=function(r,u){var e,f=i.get(r);return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)},r}function kt(){n.event.preventDefault()}function so(){for(var i,t=n.event;i=t.sourceEvent;)t=i;return t}function ho(t){for(var i=new oo,r=0,u=arguments.length;++r<u;)i[arguments[r]]=dl(i);return i.of=function(r,u){return function(f){try{var e=f.sourceEvent=n.event;f.target=t,n.event=f,i[f.type].apply(r,u)}finally{n.event=e}}},i}function dt(n){return ne(n,e),n}function co(n){return"function"==typeof n?n:function(){return nc(n,this)}}function gl(n){return"function"==typeof n?n:function(){return tc(n,this)}}function na(t,i){function r(){this.removeAttribute(t)}function u(){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=n.ns.qualify(t),null==i?t.local?u:r:"function"==typeof i?t.local?s:o:t.local?e:f}function ta(n){return n.trim().replace(/\s+/g," ")}function ia(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function ra(n){return(n+"").trim().split(/^|\s+/)}function ua(n,t){function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(this,arguments);++r<i;)n[r](this,u)}n=ra(n).map(ok);var i=n.length;return"function"==typeof t?u:r}function ok(n){var t=ia(n);return function(i,r){if(u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||i.setAttribute("class",ta(u+" "+n))):i.setAttribute("class",ta(u.replace(t," ")))}}function fa(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return null==t?r:"function"==typeof t?f:u}function ea(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);null==i?delete this[n]:this[n]=i}return null==t?i:"function"==typeof t?u:r}function oa(t){function i(){var n=this.ownerDocument,i=this.namespaceURI;return i?n.createElementNS(i,t):n.createElement(t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=n.ns.qualify(t)).local?r:i}function sk(){var n=this.parentNode;n&&n.removeChild(this)}function lo(n){return{__data__:n}}function sa(n){return function(){return ic(this,n)}}function hk(n){return arguments.length||(n=nr),function(t,i){return t&&i?n(t.__data__,i.__data__):!t-!i}}function at(n,t){for(var i=0,u=n.length;u>i;i++)for(var f,e=n[i],r=0,o=e.length;o>r;r++)(f=e[r])&&t(f,r,i);return n}function ha(n){return ne(n,ot),n}function ck(n){var t,i;return function(r,u,f){var e,o=n[f].update,s=o.length;for(f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(e=o[t])&&++t<s;);return e}}function ca(t,i,r){function o(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function h(){var n=s(i,ti(arguments));o.call(this),this.addEventListener(t,this[u]=n,n.$=r),n._=i}function c(){var u,f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),i,r;for(i in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[i])}var u="__on"+t,f=t.indexOf("."),s=la,e;return f>0&&(t=t.slice(0,f)),e=ie.get(t),e&&(t=e,s=lk),f?i?h:o:i?l:c}function la(t,i){return function(r){var u=n.event;n.event=r,i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function lk(n,t){var i=la(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||i.call(t,n)}}function yu(t){var i=".dragsuppress-"+ ++tb,f="click"+i,u=n.select(bt(t)).on("touchmove"+i,kt).on("dragstart"+i,kt).on("selectstart"+i,kt),r,e;return(null==pi&&(pi="onselectstart"in t?!1:eo(t.style,"userSelect")),pi)&&(r=ll(t).style,e=r[pi],r[pi]="none"),function(n){if(u.on(i,null),pi&&(r[pi]=e),n){var t=function(){u.on(f,null)};u.on(f,function(){kt(),t()},!0),setTimeout(t,0)}}}function ao(t,i){var u,r,f,e,o;return(i.changedTouches&&(i=i.changedTouches[0]),u=t.ownerSVGElement||t,u.createSVGPoint)?(r=u.createSVGPoint(),0>re&&(f=bt(t),(f.scrollX||f.scrollY)&&(u=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=u[0][0].getScreenCTM(),re=!(e.f||e.e),u.remove())),re?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]):(o=t.getBoundingClientRect(),[i.clientX-o.left-t.clientLeft,i.clientY-o.top-t.clientTop])}function ak(){return n.event.changedTouches[0].identifier}function aa(n){return n>0?1:0>n?-1:0}function vo(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(t[1]-n[1])*(i[0]-n[0])}function va(n){return n>1?0:-1>n?f:Math.acos(n)}function gt(n){return n>1?h:-1>n?-h:Math.asin(n)}function vk(n){return((n=Math.exp(n))-1/n)/2}function ya(n){return((n=Math.exp(n))+1/n)/2}function yk(n){return((n=Math.exp(2*n))-1)/(n+1)}function pa(n){return(n=Math.sin(n/2))*n}function hi(){}function ft(n,t,i){return this instanceof ft?(this.h=+n,this.s=+t,void(this.l=+i)):arguments.length<2?n instanceof ft?new ft(n.h,n.s,n.l):da(""+n,ga,ft):new ft(n,t,i)}function yo(n,t,i){function e(n){return n>360?n-=360:0>n&&(n+=360),60>n?r+(u-r)*n/60:180>n?u:240>n?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(255*e(n))}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,u=.5>=i?i*(1+t):i+t-i*t,r=2*i-u,new b(f(n+120),f(n),f(n-120))}function tt(t,i,r){return this instanceof tt?(this.h=+t,this.c=+i,void(this.l=+r)):arguments.length<2?t instanceof tt?new tt(t.h,t.c,t.l):t instanceof it?ba(t.l,t.a,t.b):ba((t=nv((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new tt(t,i,r)}function po(n,t,i){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new it(i,Math.cos(n*=u)*t,Math.sin(n)*t)}function it(n,t,i){return this instanceof it?(this.l=+n,this.a=+t,void(this.b=+i)):arguments.length<2?n instanceof it?new it(n.l,n.a,n.b):n instanceof tt?po(n.h,n.c,n.l):nv((n=b(n)).r,n.g,n.b):new it(n,t,i)}function wa(n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=wo(u)*rb,r=wo(r)*ub,f=wo(f)*fb,new b(ko(3.2404542*u-1.5371385*r-.4985314*f),ko(-.969266*u+1.8760108*r+.041556*f),ko(.0556434*u-.2040259*r+1.0572252*f))}function ba(n,t,i){return n>0?new tt(Math.atan2(i,t)*s,Math.sqrt(t*t+i*i),n):new tt(NaN,NaN,n)}function wo(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function bo(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function ko(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function b(n,t,i){return this instanceof b?(this.r=~~n,this.g=~~t,void(this.b=~~i)):arguments.length<2?n instanceof b?new b(n.r,n.g,n.b):da(""+n,b,yo):new b(n,t,i)}function ka(n){return new b(n>>16,n>>8&255,255&n)}function pu(n){return ka(n)+""}function tr(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function da(n,t,i){var s,u,r,f=0,e=0,o=0;if(s=/([a-z]+)\((.*)\)/i.exec(n))switch(u=s[2].split(","),s[1]){case"hsl":return i(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(ns(u[0]),ns(u[1]),ns(u[2]))}return(r=fu.get(n.toLowerCase()))?t(r.r,r.g,r.b):(null==n||"#"!==n.charAt(0)||isNaN(r=parseInt(n.slice(1),16))||(4===n.length?(f=(3840&r)>>4,f=f>>4|f,e=240&r,e=e>>4|e,o=15&r,o=o<<4|o):7===n.length&&(f=(16711680&r)>>16,e=(65280&r)>>8,o=255&r)),t(f,e,o))}function ga(n,t,i){var f,s,e=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-e,o=(r+e)/2;return u?(s=.5>o?u/(r+e):u/(2-r-e),f=n==r?(t-i)/u+(i>t?6:0):t==r?(i-n)/u+2:(n-t)/u+4,f*=60):(f=NaN,s=o>0&&1>o?0:f),new ft(f,s,o)}function nv(n,t,i){n=go(n),t=go(t),i=go(i);var u=bo((.4124564*n+.3575761*t+.1804375*i)/rb),r=bo((.2126729*n+.7151522*t+.072175*i)/ub),f=bo((.0193339*n+.119192*t+.9503041*i)/fb);return it(116*r-16,500*(u-r),200*(r-f))}function go(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ns(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function o(n){return"function"==typeof n?n:function(){return n}}function ts(n){return function(t,i,r){return 2===arguments.length&&"function"==typeof i&&(r=i,i=null),wu(t,i,n,r)}}function wu(t,i,r,u){function c(){var t,n=e.status;if(!n&&wk(e)||n>=200&&300>n||304===n){try{t=r.call(f,e)}catch(i){return void s.error.call(f,i)}s.load.call(f,t)}else s.error.call(f,e)}var f={},s=n.dispatch("beforesend","progress","load","error"),o={},e=new XMLHttpRequest,h=null;return!this.XDomainRequest||"withCredentials"in e||!/^(http(s)?:)?\/\//.test(t)||(e=new XDomainRequest),"onload"in e?e.onload=e.onerror=c:e.onreadystatechange=function(){e.readyState>3&&c()},e.onprogress=function(t){var i=n.event;n.event=t;try{s.progress.call(f,e)}finally{n.event=i}},f.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",f)},f.mimeType=function(n){return arguments.length?(i=null==n?null:n+"",f):i},f.responseType=function(n){return arguments.length?(h=n,f):h},f.response=function(n){return r=n,f},["get","post"].forEach(function(n){f[n]=function(){return f.send.apply(f,[n].concat(ti(arguments)))}}),f.send=function(n,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),e.open(n,t,!0),null==i||"accept"in o||(o.accept=i+",*/*"),e.setRequestHeader)for(var c in o)e.setRequestHeader(c,o[c]);return null!=i&&e.overrideMimeType&&e.overrideMimeType(i),null!=h&&(e.responseType=h),null!=u&&f.on("error",u).on("load",function(n){u(null,n)}),s.beforesend.call(f,e),e.send(null==r?null:r),f},f.abort=function(){return e.abort(),f},n.rebind(f,s,"on"),null==u?f:f.get(pk(u))}function pk(n){return 1===n.length?function(t,i){n(null==t?i:null)}:n}function wk(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function is(){var t=tv(),n=iv()-t;n>24?(isFinite(n)&&(clearTimeout(ae),ae=setTimeout(is,n)),le=0):(le=1,sc(is))}function tv(){var n=Date.now();for(pt=he;pt;)n>=pt.t&&(pt.f=pt.c(n-pt.t)),pt=pt.n;return n}function iv(){for(var t,n=he,i=1/0;n;)n.f?n=t?t.n=n.n:he=n.n:(n.t<i&&(i=n.t),n=(t=n).n);return ce=t,i}function rs(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function bk(n,t){var i=Math.pow(10,3*r(8-t));return{scale:t>8?function(n){return n/i}:function(n){return n*i},symbol:n}}function kk(t){var e=t.decimal,r=t.thousands,i=t.grouping,u=t.currency,f=i&&r?function(n,t){for(var f=n.length,o=[],s=0,u=i[0],e=0;f>0&&u>0&&(e+u+1>t&&(u=Math.max(1,t-e)),o.push(n.substring(f-=u,f+u)),!((e+=u+1)>t));)u=i[s=(s+1)%i.length];return o.reverse().join(r)}:v;return function(t){var o=ob.exec(t),y=o[1]||" ",s=o[2]||">",b=o[3]||"-",k=o[4]||"",l=o[5],p=+o[6],w=o[7],r=o[8],i=o[9],h=1,a="",c="",d=!1,g=!0,v;switch(r&&(r=+r.substring(1)),(l||"0"===y&&"="===s)&&(l=y="0",s="="),i){case"n":w=!0,i="g";break;case"%":h=100,c="%",i="f";break;case"p":h=100,c="%",i="r";break;case"b":case"o":case"x":case"X":"#"===k&&(a="0"+i.toLowerCase());case"c":g=!1;case"d":d=!0,r=0;break;case"s":h=-1,i="r"}return"$"===k&&(a=u[0],c=u[1]),"r"!=i||r||(i="g"),null!=r&&("g"==i?r=Math.max(1,Math.min(21,r)):("e"==i||"f"==i)&&(r=Math.max(0,Math.min(20,r)))),i=drt.get(i)||dk,v=l&&w,function(t){var ft=c,k,ut,u,nt,it,rt,tt,o;return d&&t%1?"":(k=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===b?"":b,0>h?(ut=n.formatPrefix(t,r),t=ut.scale(t),ft=ut.symbol+c):t*=h,t=i(t,r),it=t.lastIndexOf("."),0>it?(rt=g?t.lastIndexOf("e"):-1,0>rt?(u=t,nt=""):(u=t.substring(0,rt),nt=t.substring(rt))):(u=t.substring(0,it),nt=e+t.substring(it+1)),!l&&w&&(u=f(u,1/0)),tt=a.length+u.length+nt.length+(v?0:k.length),o=p>tt?new Array(tt=p-tt+1).join(y):"",v&&(u=f(o+u,o.length?p-nt.length:1/0)),k+=a,t=u+nt,("<"===s?k+t+o:">"===s?o+k+t:"^"===s?o.substring(0,tt>>=1)+k+t+o.substring(tt):k+(v?t:o+t))+ft)}}}function dk(n){return n+""}function vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ci(n,t,i){function e(t){var i=n(t),r=f(i,1);return r-t>t-i?i:r}function u(i){return t(i=n(new y(i-1)),1),i}function f(n,i){return t(n=new y(+n),i),n}function o(n,r,f){var e=u(n),o=[];if(f>1)for(;r>e;)i(e)%f||o.push(new Date(+e)),t(e,1);else for(;r>e;)o.push(new Date(+e)),t(e,1);return o}function s(n,t,i){try{y=vt;var r=new vt;return r._=n,o(r,t,i)}finally{y=Date}}n.floor=n,n.round=e,n.ceil=u,n.offset=f,n.range=o;var r=n.utc=bu(n);return r.floor=r,r.round=bu(e),r.ceil=bu(u),r.offset=bu(f),r.range=s,n}function bu(n){return function(t,i){try{y=vt;var r=new vt;return r._=t,n(r,i)._}finally{y=Date}}}function gk(t){function r(n){function t(t){for(var f,o,h,e=[],r=-1,s=0;++r<i;)37===n.charCodeAt(r)&&(e.push(n.slice(s,r)),null!=(o=sb[f=n.charAt(++r)])&&(f=n.charAt(++r)),(h=u[f])&&(f=h(t,null==o?"e"===f?" ":"0":o)),e.push(f),s=r+1);return e.push(n.slice(s,r)),e.join("")}var i=n.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=f(i,n,t,0),u,r;return e!=t.length?null:("p"in i&&(i.H=i.H%12+12*i.p),u=null!=i.Z&&y!==vt,r=new(u?vt:y),"j"in i?r.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(r.setFullYear(i.y,0,1),r.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(r.getDay()+5)%7:i.w+7*i.U-(r.getDay()+6)%7)):r.setFullYear(i.y,i.m,i.d),r.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),u?r._:r)},t.toString=function(){return n},t}function f(n,t,i,r){for(var f,e,o,u=0,s=t.length,h=i.length;s>u;){if(r>=h)return-1;if(f=t.charCodeAt(u++),37===f){if(o=t.charAt(u++),e=k[o in sb?t.charAt(u++):o],!e||(r=e(n,i,r))<0)return-1}else if(f!=i.charCodeAt(r++))return-1}return r}function d(n,t,i){v.lastIndex=0;var r=v.exec(t.slice(i));return r?(n.w=ct.get(r[0].toLowerCase()),i+r[0].length):-1}function g(n,t,i){a.lastIndex=0;var r=a.exec(t.slice(i));return r?(n.w=ht.get(r[0].toLowerCase()),i+r[0].length):-1}function nt(n,t,i){b.lastIndex=0;var r=b.exec(t.slice(i));return r?(n.m=at.get(r[0].toLowerCase()),i+r[0].length):-1}function tt(n,t,i){p.lastIndex=0;var r=p.exec(t.slice(i));return r?(n.m=lt.get(r[0].toLowerCase()),i+r[0].length):-1}function it(n,t,i){return f(n,u.c.toString(),t,i)}function rt(n,t,i){return f(n,u.x.toString(),t,i)}function ut(n,t,i){return f(n,u.X.toString(),t,i)}function ft(n,t,i){var r=l.get(t.slice(i,i+=2).toLowerCase());return null==r?-1:(n.p=r,i)}var et=t.dateTime,ot=t.date,st=t.time,c=t.periods,e=t.days,o=t.shortDays,s=t.months,h=t.shortMonths,u,k;r.utc=function(n){function t(n){try{y=vt;var t=new y;return t._=n,i(t)}finally{y=Date}}var i=r(n);return t.parse=function(n){try{y=vt;var t=i.parse(n);return t&&t._}finally{y=Date}},t.toString=i.toString,t},r.multi=r.utc.multi=yd;var l=n.map(),a=ku(e),ht=du(e),v=ku(o),ct=du(o),p=ku(s),lt=du(s),b=ku(h),at=du(h);return c.forEach(function(n,t){l.set(n.toLowerCase(),t)}),u={a:function(n){return o[n.getDay()]},A:function(n){return e[n.getDay()]},b:function(n){return h[n.getMonth()]},B:function(n){return s[n.getMonth()]},c:r(et),d:function(n,t){return w(n.getDate(),t,2)},e:function(n,t){return w(n.getDate(),t,2)},H:function(n,t){return w(n.getHours(),t,2)},I:function(n,t){return w(n.getHours()%12||12,t,2)},j:function(n,t){return w(1+i.dayOfYear(n),t,3)},L:function(n,t){return w(n.getMilliseconds(),t,3)},m:function(n,t){return w(n.getMonth()+1,t,2)},M:function(n,t){return w(n.getMinutes(),t,2)},p:function(n){return c[+(n.getHours()>=12)]},S:function(n,t){return w(n.getSeconds(),t,2)},U:function(n,t){return w(i.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return w(i.mondayOfYear(n),t,2)},x:r(ot),X:r(st),y:function(n,t){return w(n.getFullYear()%100,t,2)},Y:function(n,t){return w(n.getFullYear()%1e4,t,4)},Z:ad,"%":function(){return"%"}},k={a:d,A:g,b:nt,B:tt,c:it,d:rv,e:rv,H:uv,I:uv,j:sd,L:ld,m:od,M:hd,p:ft,S:cd,U:td,w:nd,W:id,x:rt,X:ut,y:ud,Y:rd,Z:fd,"%":vd},r}function w(n,t,i){var u=0>n?"-":"",r=(u?-n:n)+"",f=r.length;return u+(i>f?new Array(i-f+1).join(t)+r:r)}function ku(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function du(n){for(var i=new lt,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}function nd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+1));return r?(n.w=+r[0],i+r[0].length):-1}function td(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.U=+r[0],i+r[0].length):-1}function id(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.W=+r[0],i+r[0].length):-1}function rd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+4));return r?(n.y=+r[0],i+r[0].length):-1}function ud(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.y=ed(+r[0]),i+r[0].length):-1}function fd(n,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(n.Z=-t,i+5):-1}function ed(n){return n+(n>68?1900:2e3)}function od(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.m=r[0]-1,i+r[0].length):-1}function rv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.d=+r[0],i+r[0].length):-1}function sd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.j=+r[0],i+r[0].length):-1}function uv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function hd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.M=+r[0],i+r[0].length):-1}function cd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.S=+r[0],i+r[0].length):-1}function ld(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function ad(n){var t=n.getTimezoneOffset(),i=t>0?"-":"+",u=r(t)/60|0,f=r(t)%60;return i+w(u,"0",2)+w(f,"0",2)}function vd(n,t,i){hb.lastIndex=0;var r=hb.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function yd(n){for(var i=n.length,t=-1;++t<i;)n[t][0]=this(n[t][0]);return function(t){for(var r=0,i=n[r];!i[1](t);)i=n[++r];return i[0](t)}}function us(){}function fv(n,t,i){var r=i.s=n+t,u=r-n,f=r-u;i.t=n-f+(t-u)}function gu(n,t){n&&lc.hasOwnProperty(n.type)&&lc[n.type](n,t)}function fs(n,t,i){var r,u=-1,f=n.length-i;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ev(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)fs(n[i],t,1);t.polygonEnd()}function pd(){function r(r,e){r*=u,e=e*u/2+f/4;var o=r-n,s=o>=0?1:-1,h=s*o,c=Math.cos(e),l=Math.sin(e),a=i*l,v=t*c+a*Math.cos(h),y=a*s*Math.sin(h);ii.add(Math.atan2(y,v)),n=r,t=c,i=l}var e,o,n,t,i;k.point=function(s,h){k.point=r,n=(e=s)*u,t=Math.cos(h=(o=h)*u/2+f/4),i=Math.sin(h)},k.lineEnd=function(){r(e,o)}}function li(n){var t=n[0],i=n[1],r=Math.cos(i);return[r*Math.cos(t),r*Math.sin(t),Math.sin(i)]}function nf(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function ir(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function es(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function tf(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function rf(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function uf(n){return[Math.atan2(n[1],n[0]),gt(n[2])]}function ff(n,i){return r(n[0]-i[0])<t&&r(n[1]-i[1])<t}function os(n,t){n*=u;var i=Math.cos(t*=u);vr(i*Math.cos(n),i*Math.sin(n),Math.sin(t))}function vr(n,t,i){++ou,wi+=(n-wi)/ou,bi+=(t-bi)/ou,wt+=(i-wt)/ou}function ov(){function r(r,f){r*=u;var c=Math.cos(f*=u),o=c*Math.cos(r),s=c*Math.sin(r),h=Math.sin(f),e=Math.atan2(Math.sqrt((e=t*h-i*s)*e+(e=i*o-n*h)*e+(e=n*s-t*o)*e),n*o+t*s+i*h);ye+=e,ri+=e*(n+(n=o)),ui+=e*(t+(t=s)),ht+=e*(i+(i=h)),vr(n,t,i)}var n,t,i;rt.point=function(f,e){f*=u;var o=Math.cos(e*=u);n=o*Math.cos(f),t=o*Math.sin(f),i=Math.sin(e),rt.point=r,vr(n,t,i)}}function sv(){rt.point=os}function wd(){function r(r,f){r*=u;var p=Math.cos(f*=u),e=p*Math.cos(r),o=p*Math.sin(r),s=Math.sin(f),c=t*s-i*o,l=i*e-n*s,a=n*o-t*e,v=Math.sqrt(c*c+l*l+a*a),w=n*e+t*o+i*s,y=v&&-va(w)/v,h=Math.atan2(v,w);sr+=y*c,hr+=y*l,fi+=y*a,ye+=h,ri+=h*(n+(n=e)),ui+=h*(t+(t=o)),ht+=h*(i+(i=s)),vr(n,t,i)}var f,e,n,t,i;rt.point=function(o,s){f=o,e=s,rt.point=r,o*=u;var h=Math.cos(s*=u);n=h*Math.cos(o),t=h*Math.sin(o),i=Math.sin(s),vr(n,t,i)},rt.lineEnd=function(){r(f,e),rt.lineEnd=sv,rt.point=os}}function hv(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function rr(){return!0}function cv(n,t,i,r,u){var h=[],s=[],o,a,v,f,c,l,e;if(n.forEach(function(n){var o,i,f,e,t,r;if(!((o=n.length-1)<=0)){if(i=n[0],f=n[o],ff(i,f)){for(u.lineStart(),e=0;o>e;++e)u.point((i=n[e])[0],i[1]);return void u.lineEnd()}t=new ef(i,n,null,!0),r=new ef(i,null,t,!1),t.o=r,h.push(t),s.push(r),t=new ef(f,n,null,!1),r=new ef(f,null,t,!0),t.o=r,h.push(t),s.push(r)}}),s.sort(t),lv(h),lv(s),h.length){for(var e=0,y=i,l=s.length;l>e;++e)s[e].e=y=!y;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z,u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,l=o.length;l>e;++e)u.point((a=o[e])[0],a[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((a=o[e])[0],a[1]);else r(f.x,f.p.x,-1,u);f=f.p}f=f.o,o=f.z,c=!c}while(!f.v);u.lineEnd()}}}function lv(n){if(r=n.length){for(var r,t,u=0,i=n[0];++u<r;)i.n=t=n[u],t.p=i,i=t;i.n=t=n[0],t.p=i}}function ef(n,t,i,r){this.x=n,this.z=t,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function av(t,i,r,u){return function(f,e){function v(n,i){var r=f(n,i);t(n=r[0],i=r[1])&&e.point(n,i)}function d(n,t){var i=f(n,t);y.point(i[0],i[1])}function p(){o.point=d,y.lineStart()}function w(){o.point=v,y.lineEnd()}function b(n,t){c.push([n,t]);var i=f(n,t);a.point(i[0],i[1])}function g(){a.lineStart(),c=[]}function nt(){var f,t,r;b(c[0][0],c[0][1]),a.lineEnd();var i,u=a.clean(),n=k.buffer(),t=n.length;if(c.pop(),l.push(c),c=null,t)if(1&u){if(i=n[0],t=i.length-1,r=-1,t>0){for(s||(e.polygonStart(),s=!0),e.lineStart();++r<t;)e.point((f=i[r])[0],f[1]);e.lineEnd()}}else t>1&&2&u&&n.push(n.pop().concat(n.shift())),h.push(n.filter(bd))}var h,l,c,y=i(e),tt=f.invert(u[0],u[1]),o={point:v,lineStart:p,lineEnd:w,polygonStart:function(){o.point=b,o.lineStart=g,o.lineEnd=nt,h=[],l=[]},polygonEnd:function(){o.point=v,o.lineStart=p,o.lineEnd=w,h=n.merge(h);var t=tg(tt,l);h.length?(s||(e.polygonStart(),s=!0),cv(h,kd,t,r,e)):t&&(s||(e.polygonStart(),s=!0),e.lineStart(),r(null,null,1,e),e.lineEnd()),s&&(e.polygonEnd(),s=!1),h=l=null},sphere:function(){e.polygonStart(),e.lineStart(),r(null,null,1,e),e.lineEnd(),e.polygonEnd()}},k=vv(),a=i(k),s=!1;return o}}function bd(n){return n.length>1}function vv(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,i){t.push([n,i])},lineEnd:l,buffer:function(){var i=n;return n=[],t=null,i},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function kd(n,i){return((n=n.x)[0]<0?n[1]-h-t:h-n[1])-((i=i.x)[0]<0?i[1]-h-t:h-i[1])}function dd(n){var o,u=NaN,i=NaN,e=NaN;return{lineStart:function(){n.lineStart(),o=1},point:function(s,c){var l=s>0?f:-f,a=r(s-u);r(a-f)<t?(n.point(u,i=(i+c)/2>0?h:-h),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),n.point(s,i),o=0):e!==l&&a>=f&&(r(u-e)<t&&(u-=e*t),r(s-l)<t&&(s-=l*t),i=gd(u,i,s,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),o=0),n.point(u=s,i=c),e=l},lineEnd:function(){n.lineEnd(),u=i=NaN},clean:function(){return 2-o}}}function gd(n,i,u,f){var e,o,s=Math.sin(n-u);return r(s)>t?Math.atan((Math.sin(i)*(o=Math.cos(f))*Math.sin(u)-Math.sin(f)*(e=Math.cos(i))*Math.sin(n))/(e*o*s)):(i+f)/2}function ng(n,i,u,e){var o,s;null==n?(o=u*h,e.point(-f,o),e.point(0,o),e.point(f,o),e.point(f,0),e.point(f,-o),e.point(0,-o),e.point(-f,-o),e.point(-f,0),e.point(-f,o)):r(n[0]-i[0])>t?(s=n[0]<i[0]?f:-f,o=u*s/2,e.point(-s,o),e.point(0,o),e.point(s,o)):e.point(i[0],i[1])}function tg(n,i){var e=n[0],nt=n[1],ct=[Math.sin(e),-Math.cos(e),0],a=0,tt=0,o,it,s,v,u,k,d;for(ii.reset(),o=0,it=i.length;it>o;++o)if(s=i[o],v=s.length,v)for(var h=s[0],y=h[0],rt=h[1]/2+f/4,ut=Math.sin(rt),ft=Math.cos(rt),c=1;;){c===v&&(c=0),n=s[c];var p=n[0],et=n[1]/2+f/4,ot=Math.sin(et),st=Math.cos(et),r=p-y,w=r>=0?1:-1,b=w*r,l=b>f,ht=ut*ot;if((ii.add(Math.atan2(ht*w*Math.sin(b),ft*st+ht*Math.cos(b))),a+=l?r+w*g:r,l^y>=e^p>=e)&&(u=ir(li(h),li(n)),rf(u),k=ir(ct,u),rf(k),d=(l^r>=0?-1:1)*gt(k[2]),(nt>d||nt===d&&(u[0]||u[1]))&&(tt+=l^r>=0?1:-1)),!c++)break;y=p,ut=ot,ft=st,h=n}return(-t>a||t>a&&0>ii)^1&tt}function ig(n){function s(n,t){return Math.cos(n)*Math.cos(t)>i}function c(n){var i,a,r,c,u;return{lineStart:function(){c=r=!1,u=1},point:function(v,y){var w,p=[v,y],b=s(v,y),d=e?b?0:h(v,y):b?h(v+(0>v?f:-f),y):0,k;(!i&&(c=r=b)&&n.lineStart(),b!==r&&(w=o(i,p),(ff(i,w)||ff(p,w))&&(p[0]+=t,p[1]+=t,b=s(p[0],p[1]))),b!==r)?(u=0,b?(n.lineStart(),w=o(p,i),n.point(w[0],w[1])):(w=o(i,p),n.point(w[0],w[1]),n.lineEnd()),i=w):l&&i&&e^b&&(d&a||!(k=o(p,i,!0))||(u=0,e?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd()):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1])))),!b||i&&ff(i,p)||n.point(p[0],p[1]),i=p,r=b,a=d},lineEnd:function(){r&&n.lineEnd(),i=null},clean:function(){return u|(c&&r)<<1}}}function o(n,u,e){var et=li(n),ot=li(u),rt=[1,0,0],a=ir(et,ot),ut=nf(a,a),b=a[0],k=ut-b*b,g,o,it;if(!k)return!e&&n;var st=i*ut/k,ht=-i*b/k,ct=ir(rt,a),s=tf(rt,st),lt=tf(a,ht);es(s,lt);var v=ct,p=nf(s,v),d=nf(v,v),ft=p*p-d*(nf(s,s)-1);if(!(0>ft)){if(g=Math.sqrt(ft),o=tf(v,(-p-g)/d),es(o,s),o=uf(o),!e)return o;var w,h=n[0],y=u[0],c=n[1],l=u[1];h>y&&(w=h,h=y,y=w);var nt=y-h,tt=r(nt-f)<t,at=tt||t>nt;if(!tt&&c>l&&(w=c,c=l,l=w),at?tt?c+l>0^o[1]<(r(o[0]-h)<t?c:l):c<=o[1]&&o[1]<=l:nt>f^(h<=o[0]&&o[0]<=y))return it=tf(v,(-p+g)/d),es(it,s),[o,uf(it)]}}function h(t,i){var u=e?n:f-n,r=0;return-u>t?r|=1:t>u&&(r|=2),-u>i?r|=4:i>u&&(r|=8),r}var i=Math.cos(n),e=i>0,l=r(i)>t,a=ls(n,6*u);return av(s,c,a,e?[0,-n]:[-f,n-f])}function yv(n,t,i,r){return function(u){var f,a=u.a,v=u.b,c=a.x,l=a.y,y=v.x,p=v.y,e=0,o=1,s=y-c,h=p-l;if(f=n-c,s||!(f>0)){if(f/=s,0>s){if(e>f)return;o>f&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=i-c,s||!(0>f)){if(f/=s,0>s){if(f>o)return;f>e&&(e=f)}else if(s>0){if(e>f)return;o>f&&(o=f)}if(f=t-l,h||!(f>0)){if(f/=h,0>h){if(e>f)return;o>f&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=r-l,h||!(0>f)){if(f/=h,0>h){if(f>o)return;f>e&&(e=f)}else if(h>0){if(e>f)return;o>f&&(o=f)}return e>0&&(u.a={x:c+e*s,y:l+e*h}),1>o&&(u.b={x:c+o*s,y:l+o*h}),u}}}}}}function pv(i,u,f,e){function o(n,e){return r(n[0]-i)<t?e>0?0:3:r(n[0]-f)<t?e>0?2:1:r(n[1]-u)<t?e>0?1:0:e>0?3:2}function h(n,t){return s(n.x,t.x)}function s(n,t){var i=o(n,1),r=o(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-t[0]:2===i?n[1]-t[1]:t[0]-n[0]}return function(t){function ft(n){for(var r=0,s=c.length,u=n[1],f=0;s>f;++f)for(var t,e=1,o=c[f],h=o.length,i=o[0];h>e;++e)t=o[e],i[1]<=u?t[1]>u&&vo(i,t,n)>0&&++r:t[1]<=u&&vo(i,t,n)<0&&--r,i=t;return 0!==r}function d(n,t,r,h){var c=0,l=0;if(null==n||(c=o(n,r))!==(l=o(t,r))||s(n,t)<0^r>0){do h.point(0===c||3===c?i:f,c>1?e:u);while((c=(c+r+4)%4)!==l)}else h.point(t[0],t[1])}function g(n,t){return n>=i&&f>=n&&t>=u&&e>=t}function nt(n,i){g(n,i)&&t.point(n,i)}function et(){k.point=tt,c&&c.push(v=[]),w=!0,l=!1,y=p=NaN}function ot(){r&&(tt(it,rt),ut&&l&&b.rejoin(),r.push(b.buffer())),k.point=nt,l&&t.lineEnd()}function tt(n,i){var r,u;n=Math.max(-pe,Math.min(pe,n)),i=Math.max(-pe,Math.min(pe,i)),r=g(n,i),(c&&v.push([n,i]),w)?(it=n,rt=i,ut=r,w=!1,r&&(t.lineStart(),t.point(n,i))):r&&l?t.point(n,i):(u={a:{x:y,y:p},b:{x:n,y:i}},ht(u)?(l||(t.lineStart(),t.point(u.a.x,u.a.y)),t.point(u.b.x,u.b.y),r||t.lineEnd(),a=!1):r&&(t.lineStart(),t.point(n,i),a=!1)),y=n,p=i,l=r}var r,c,v,it,rt,ut,y,p,l,w,a,st=t,b=vv(),ht=yv(i,u,f,e),k={point:nt,lineStart:et,lineEnd:ot,polygonStart:function(){t=b,r=[],c=[],a=!0},polygonEnd:function(){t=st,r=n.merge(r);var u=ft([i,e]),f=a&&u,o=r.length;(f||o)&&(t.polygonStart(),f&&(t.lineStart(),d(null,null,1,t),t.lineEnd()),o&&cv(r,h,u,d,t),t.polygonEnd()),r=c=v=null}};return k}}function ss(n){var t=0,i=f/3,r=hs(n),u=r(t,i);return u.parallels=function(n){return arguments.length?r(t=n[0]*f/180,i=n[1]*f/180):[t/f*180,i/f*180]},u}function wv(n,t){function f(n,t){var r=Math.sqrt(u-2*i*Math.sin(t))/i;return[r*Math.sin(n*=i),e-r*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),e=Math.sqrt(u)/i;return f.invert=function(n,t){var r=e-t;return[Math.atan2(n,r)/i,gt((u-(n*n+r*r)*i*i)/(2*i))]},f}function rg(){function i(i,r){vc+=t*i-n*r,n=i,t=r}var r,u,n,t;ei.point=function(f,e){ei.point=i,r=n=f,u=t=e},ei.lineEnd=function(){i(r,u)}}function ug(n,t){we>n&&(we=n),n>ke&&(ke=n),be>t&&(be=t),t>de&&(de=t)}function fg(){function i(n,i){t.push("M",n,",",i,u)}function f(i,r){t.push("M",i,",",r),n.point=e}function e(n,i){t.push("L",n,",",i)}function r(){n.point=i}function o(){t.push("Z")}var u=bv(4.5),t=[],n={point:i,lineStart:function(){n.point=f},lineEnd:r,polygonStart:function(){n.lineEnd=o},polygonEnd:function(){n.lineEnd=r,n.point=i},pointRadius:function(t){return u=bv(t),n},result:function(){if(t.length){var n=t.join("");return t=[],n}}};return n}function bv(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function ai(n,t){wi+=n,bi+=t,++wt}function kv(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2,ui+=u*(t+r)/2,ht+=u,ai(n=i,t=r)}var n,t;ut.point=function(r,u){ut.point=i,ai(n=r,t=u)}}function dv(){ut.point=ai}function eg(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2,ui+=u*(t+r)/2,ht+=u,u=t*i-n*r,sr+=u*(n+i),hr+=u*(t+r),fi+=3*u,ai(n=i,t=r)}var r,u,n,t;ut.point=function(f,e){ut.point=i,ai(r=n=f,u=t=e)},ut.lineEnd=function(){i(r,u)}}function og(n){function i(t,i){n.moveTo(t+r,i),n.arc(t,i,r,0,g)}function f(i,r){n.moveTo(i,r),t.point=e}function e(t,i){n.lineTo(t,i)}function u(){t.point=i}function o(){n.closePath()}var r=4.5,t={point:i,lineStart:function(){t.point=f},lineEnd:u,polygonStart:function(){t.lineEnd=o},polygonEnd:function(){t.lineEnd=u,t.point=i},pointRadius:function(n){return r=n,t},result:l};return t}function gv(n){function o(n){return(e?h:s)(n)}function s(t){return ty(t,function(i,r){i=n(i,r),t.point(i[0],i[1])})}function h(t){function y(i,r){i=n(i,r),t.point(i[0],i[1])}function c(){u=NaN,r.point=l,t.lineStart()}function l(r,c){var l=li([r,c]),a=n(r,c);i(u,f,v,o,s,h,u=a[0],f=a[1],v=r,o=l[0],s=l[1],h=l[2],e,t),t.point(u,f)}function a(){r.point=y,t.lineEnd()}function nt(){c(),r.point=tt,r.lineEnd=it}function tt(n,t){l(p=n,rt=t),w=u,b=f,k=o,d=s,g=h,r.point=l}function it(){i(u,f,v,o,s,h,w,b,p,k,d,g,e,t),r.lineEnd=a,a()}var p,rt,w,b,k,d,g,v,u,f,o,s,h,r={point:y,lineStart:c,lineEnd:a,polygonStart:function(){t.polygonStart(),r.lineStart=nt},polygonEnd:function(){t.polygonEnd(),r.lineStart=c}};return r}function i(u,e,o,s,h,l,a,v,y,p,w,b,k,d){var it=a-u,rt=v-e,et=it*it+rt*rt;if(et>4*f&&k--){var nt=s+p,tt=h+w,g=l+b,ot=Math.sqrt(nt*nt+tt*tt+g*g),vt=Math.asin(g/=ot),st=r(r(g)-1)<t||r(o-y)<t?(o+y)/2:Math.atan2(tt,nt),ht=n(st,vt),ut=ht[0],ft=ht[1],ct=ut-u,lt=ft-e,at=rt*ct-it*lt;(at*at/et>f||r((it*ct+rt*lt)/et-.5)>.3||c>s*p+h*w+l*b)&&(i(u,e,o,s,h,l,ut,ft,st,nt/=ot,tt/=ot,g,k,d),d.point(ut,ft),i(ut,ft,st,nt,tt,g,a,v,y,p,w,b,k,d))}}var f=.5,c=Math.cos(30*u),e=16;return o.precision=function(n){return arguments.length?(e=(f=n*n)>0&&16,o):Math.sqrt(f)},o}function sg(n){var t=gv(function(t,i){return n([t*s,i*s])});return function(n){return iy(t(n))}}function ny(n){this.stream=n}function ty(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ni(n){return hs(function(){return n})()}function hs(t){function i(n){return n=a(n[0]*u,n[1]*u),[n[0]*r+h,c-n[1]*r]}function et(n){return n=a.invert((n[0]-h)/r,(c-n[1])/r),n&&[n[0]*s,n[1]*s]}function e(){a=hv(tt=cs(k,d,g),o);var n=o(w,b);return h=y-n[0]*r,c=p+n[1]*r,l()}function l(){return f&&(f.valid=!1,f=null),i}var o,tt,a,h,c,f,it=gv(function(n,t){return n=o(n,t),[n[0]*r+h,c-n[1]*r]}),r=150,y=480,p=250,w=0,b=0,k=0,d=0,g=0,rt=cb,ut=v,nt=null,ft=null;return i.stream=function(n){return f&&(f.valid=!1),f=iy(rt(tt,it(ut(n)))),f.valid=!0,f},i.clipAngle=function(n){return arguments.length?(rt=null==n?(nt=n,cb):ig((nt=+n)*u),l()):nt},i.clipExtent=function(n){return arguments.length?(ft=n,ut=n?pv(n[0][0],n[0][1],n[1][0],n[1][1]):v,l()):ft},i.scale=function(n){return arguments.length?(r=+n,e()):r},i.translate=function(n){return arguments.length?(y=+n[0],p=+n[1],e()):[y,p]},i.center=function(n){return arguments.length?(w=n[0]%360*u,b=n[1]%360*u,e()):[w*s,b*s]},i.rotate=function(n){return arguments.length?(k=n[0]%360*u,d=n[1]%360*u,g=n.length>2?n[2]%360*u:0,e()):[k*s,d*s,g*s]},n.rebind(i,it,"precision"),function(){return o=t.apply(this,arguments),i.invert=o.invert&&et,e()}}function iy(n){return ty(n,function(t,i){n.point(t*u,i*u)})}function yr(n,t){return[n,t]}function ry(n,t){return[n>f?n-g:-f>n?n+g:n,t]}function cs(n,t,i){return n?t||i?hv(fy(n),ey(t,i)):fy(n):t||i?ey(t,i):ry}function uy(n){return function(t,i){return t+n,[t>f?t-g:-f>t?t+g:t,i]}}function fy(n){var t=uy(n);return t.invert=uy(-n),t}function ey(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*i+o*r;return[Math.atan2(s*u-c*f,o*i-h*r),gt(c*u+s*f)]}var i=Math.cos(n),r=Math.sin(n),u=Math.cos(t),f=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*u-s*f;return[Math.atan2(s*u+h*f,o*i+c*r),gt(c*i-o*r)]},e}function ls(n,t){var i=Math.cos(n),r=Math.sin(n);return function(u,f,e,o){var h=e*t,c,s;for(null!=u?(u=oy(i,u),f=oy(i,f),(e>0?f>u:u>f)&&(u+=e*g)):(u=n+e*g,f=n-.5*h),s=u;e>0?s>f:f>s;s-=h)o.point((c=uf([i,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function oy(n,i){var r=li(i),u;return r[0]-=n,rf(r),u=va(-r[1]),((-r[2]<0?-u:u)+2*Math.PI-t)%(2*Math.PI)}function sy(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[n,t]})}}function hy(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[t,n]})}}function as(n){return n.source}function vs(n){return n.target}function hg(n,t,i,r){var f=Math.cos(t),c=Math.sin(t),e=Math.cos(r),l=Math.sin(r),a=f*Math.cos(n),v=f*Math.sin(n),y=e*Math.cos(i),p=e*Math.sin(i),u=2*Math.asin(Math.sqrt(pa(r-t)+f*e*pa(i-n))),o=1/Math.sin(u),h=u?function(n){var t=Math.sin(n*=u)*o,i=Math.sin(u-n)*o,r=i*a+t*y,f=i*v+t*p,e=i*c+t*l;return[Math.atan2(f,r)*s,Math.atan2(e,Math.sqrt(r*r+f*f))*s]}:function(){return[n*s,t*s]};return h.distance=u,h}function cg(){function f(f,e){var h=Math.sin(e*=u),s=Math.cos(e),o=r((f*=u)-i),c=Math.cos(o);yc+=Math.atan2(Math.sqrt((o=s*Math.sin(o))*o+(o=t*h-n*s*c)*o),n*h+t*s*c),i=f,n=h,t=s}var i,n,t;ki.point=function(r,e){i=r*u,n=Math.sin(e*=u),t=Math.cos(e),ki.point=f},ki.lineEnd=function(){ki.point=ki.lineEnd=l}}function pr(n,t){function i(t,i){var f=Math.cos(t),r=Math.cos(i),u=n(f*r);return[u*r*Math.sin(t),u*Math.sin(i)]}return i.invert=function(n,i){var r=Math.sqrt(n*n+i*i),u=t(r),f=Math.sin(u),e=Math.cos(u);return[Math.atan2(n*f,r*e),Math.asin(r&&i*f/r)]},i}function cy(n,i){function o(n,i){u>0?-h+t>i&&(i=-h+t):i>h-t&&(i=h-t);var f=u/Math.pow(e(i),r);return[f*Math.sin(r*n),u-f*Math.cos(r*n)]}var s=Math.cos(n),e=function(n){return Math.tan(f/4+n/2)},r=n===i?Math.sin(n):Math.log(s/Math.cos(i))/Math.log(e(i)/e(n)),u=s*Math.pow(e(n),r)/r;return r?(o.invert=function(n,t){var i=u-t,f=aa(r)*Math.sqrt(n*n+i*i);return[Math.atan2(n,i)/r,2*Math.atan(Math.pow(u/f,1/r))-h]},o):of}function ly(n,i){function e(n,t){var i=f-t;return[i*Math.sin(u*n),f-i*Math.cos(u*n)]}var o=Math.cos(n),u=n===i?Math.sin(n):(o-Math.cos(i))/(i-n),f=o/u+n;return r(u)<t?yr:(e.invert=function(n,t){var i=f-t;return[Math.atan2(n,i)/u,f-aa(u)*Math.sqrt(n*n+i*i)]},e)}function of(n,t){return[n,Math.log(Math.tan(f/4+t/2))]}function ay(n){var i,t=ni(n),r=t.scale,u=t.translate,e=t.clipExtent;return t.scale=function(){var n=r.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.translate=function(){var n=u.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.clipExtent=function(n){var h=e.apply(t,arguments),o,s;return h===t?(i=null==n)&&(o=f*r(),s=u(),e([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])):i&&(h=null),h},t.clipExtent(null)}function ys(n,t){return[Math.log(Math.tan(f/4+t/2)),-n]}function ur(n){return n[0]}function wr(n){return n[1]}function vy(n){for(var u=n.length,i=[0,1],t=2,r=2;u>r;r++){for(;t>1&&vo(n[i[t-2]],n[i[t-1]],n[r])<=0;)--t;i[t++]=r}return i.slice(0,t)}function lg(n,t){return n[0]-t[0]||n[1]-t[1]}function ps(n,t,i){return(i[0]-t[0])*(n[1]-t[1])<(i[1]-t[1])*(n[0]-t[0])}function ws(n,t,i,r){var u=n[0],e=i[0],o=t[0]-u,s=r[0]-e,f=n[1],h=i[1],c=t[1]-f,l=r[1]-h,a=(s*(f-h)-l*(u-e))/(l*o-s*c);return[u+a*o,f+a*c]}function yy(n){var t=n[0],i=n[n.length-1];return!(t[0]-i[0]||t[1]-i[1])}function ag(){cf(this),this.edge=this.site=this.circle=null}function py(n){var t=nl.pop()||new ag;return t.site=n,t}function bs(n){er(n),lr.remove(n),nl.push(n),cf(n)}function vg(n){var a=n.circle,o=a.x,s=a.cy,v={x:o,y:s},h=n.P,c=n.N,f=[n],u,i,e,l;for(bs(n),u=h;u.circle&&r(o-u.circle.x)<t&&r(s-u.circle.cy)<t;)h=u.P,f.unshift(u),bs(u),u=h;for(f.unshift(u),er(u),i=c;i.circle&&r(o-i.circle.x)<t&&r(s-i.circle.cy)<t;)c=i.N,f.push(i),bs(i),i=c;for(f.push(i),er(i),l=f.length,e=1;l>e;++e)i=f[e],u=f[e-1],sf(i.edge,u.site,i.site,v);u=f[0],i=f[l-1],i.edge=br(u.site,i.site,null,v),fr(u),fr(i)}function yg(n){for(var f,i,r,a,v,b=n.x,k=n.y,u=lr._;u;)if(a=wy(u,k)-b,a>t)u=u.L;else{if(v=b-pg(u,k),!(v>t)){a>-t?(i=u.P,r=u):v>-t?(i=u,r=u.N):i=r=u;break}if(!u.R){i=u;break}u=u.R}if(f=py(n),lr.insert(i,f),i||r){if(i===r)return er(i),r=py(i.site),lr.insert(f,r),f.edge=r.edge=br(i.site,f.site),fr(i),void fr(r);if(!r)return void(f.edge=br(i.site,f.site));er(i),er(r);var e=i.site,y=e.x,p=e.y,o=n.x-y,s=n.y-p,h=r.site,c=h.x-y,l=h.y-p,d=2*(o*l-s*c),g=o*o+s*s,nt=c*c+l*l,w={x:(l*g-s*nt)/d+y,y:(o*nt-c*g)/d+p};sf(r.edge,e,h,w),f.edge=br(e,n,null,w),r.edge=br(n,h,null,w),fr(i),fr(r)}}function wy(n,t){var i=n.site,u=i.x,l=i.y,f=l-t,e;if(!f)return u;if(e=n.P,!e)return-1/0;i=e.site;var o=i.x,a=i.y,r=a-t;if(!r)return o;var s=o-u,h=1/f-1/r,c=s/r;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*r)-a+r/2+l-f/2)))/h+u:(u+o)/2}function pg(n,t){var r=n.N,i;return r?wy(r,t):(i=n.site,i.y===t?i.x:1/0)}function by(n){this.site=n,this.edges=[]}function wg(n){for(var i,u,f,e,o,s,h,y,w,p,c=n[0][0],l=n[1][0],a=n[0][1],v=n[1][1],b=di,k=b.length;k--;)if(o=b[k],o&&o.prepare())for(h=o.edges,y=h.length,s=0;y>s;)p=h[s].end(),f=p.x,e=p.y,w=h[++s%y].start(),i=w.x,u=w.y,(r(f-i)>t||r(e-u)>t)&&(h.splice(s,0,new hf(gg(o.site,p,r(f-c)<t&&v-e>t?{x:c,y:r(i-c)<t?u:v}:r(e-v)<t&&l-f>t?{x:r(u-v)<t?i:l,y:v}:r(f-l)<t&&e-a>t?{x:l,y:r(i-l)<t?u:a}:r(e-a)<t&&f-c>t?{x:r(u-a)<t?i:c,y:a}:null),o.site,null)),++y)}function ky(n,t){return t.angle-n.angle}function bg(){cf(this),this.x=this.y=this.arc=this.site=this.cy=null}function fr(n){var w=n.P,b=n.N,u,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h.x,a=h.y,f=s.x-l,e=s.y-a,o=c.x-l,r=c.y-a,v=2*(f*r-e*o);if(!(v>=-rc)){var k=f*f+e*e,d=o*o+r*r,y=(r*k-e*d)/v,p=(f*d-o*k)/v,r=p+a,i=tl.pop()||new bg;for(i.arc=n,i.site=h,i.x=y+l,i.y=r+Math.sqrt(y*y+p*p),i.cy=r,n.circle=i,u=null,t=hu._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x){if(!t.L){u=t.P;break}t=t.L}else{if(!t.R){u=t;break}t=t.R}hu.insert(u,i),u||(gc=i)}}}}function er(n){var t=n.circle;t&&(t.P||(gc=t.N),hu.remove(t),tl.push(t),cf(t),n.circle=null)}function kg(n){for(var i,u=cr,e=yv(n[0][0],n[0][1],n[1][0],n[1][1]),f=u.length;f--;)i=u[f],(!dg(i,n)||!e(i)||r(i.a.x-i.b.x)<t&&r(i.a.y-i.b.y)<t)&&(i.a=i.b=null,u.splice(f,1))}function dg(n,t){var f=n.b;if(f)return!0;var r,u,i=n.a,h=t[0][0],c=t[1][0],e=t[0][1],o=t[1][1],p=n.l,w=n.r,l=p.x,a=p.y,v=w.x,y=w.y,s=(l+v)/2,b=(a+y)/2;if(y===a){if(h>s||s>=c)return;if(l>v){if(i){if(i.y>=o)return}else i={x:s,y:e};f={x:s,y:o}}else{if(i){if(i.y<e)return}else i={x:s,y:o};f={x:s,y:e}}}else if(r=(l-v)/(y-a),u=b-r*s,-1>r||r>1)if(l>v){if(i){if(i.y>=o)return}else i={x:(e-u)/r,y:e};f={x:(o-u)/r,y:o}}else{if(i){if(i.y<e)return}else i={x:(o-u)/r,y:o};f={x:(e-u)/r,y:e}}else if(y>a){if(i){if(i.x>=c)return}else i={x:h,y:r*h+u};f={x:c,y:r*c+u}}else{if(i){if(i.x<h)return}else i={x:c,y:r*c+u};f={x:h,y:r*h+u}}return n.a=i,n.b=f,!0}function dy(n,t){this.l=n,this.r=t,this.a=this.b=null}function br(n,t,i,r){var u=new dy(n,t);return cr.push(u),i&&sf(u,n,t,i),r&&sf(u,t,n,r),di[n.i].edges.push(new hf(u,n,t)),di[t.i].edges.push(new hf(u,t,n)),u}function gg(n,t,i){var r=new dy(n,null);return r.a=t,r.b=i,cr.push(r),r}function sf(n,t,i,r){n.a||n.b?n.l===i?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=i)}function hf(n,t,i){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function ks(){this._=null}function cf(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function kr(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r,r.U=u,i.U=r,i.R=r.L,i.R&&(i.R.U=i),r.L=i}function dr(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r,r.U=u,i.U=r,i.L=r.R,i.L&&(i.L.U=i),r.R=i}function gy(n){for(;n.L;)n=n.L;return n}function ds(n,t){var u,f,r,i=n.sort(nn).pop(),e;for(cr=[],di=new Array(n.length),lr=new ks,hu=new ks;;)if(r=gc,i&&(!r||i.y<r.y||i.y===r.y&&i.x<r.x))(i.x!==u||i.y!==f)&&(di[i.i]=new by(i),yg(i),u=i.x,f=i.y),i=n.pop();else{if(!r)break;vg(r.arc)}return t&&(kg(t),wg(t)),e={cells:di,edges:cr},lr=hu=cr=di=null,e}function nn(n,t){return t.y-n.y||t.x-n.x}function tn(n,t,i){return(n.x-i.x)*(t.y-n.y)-(n.x-t.x)*(i.y-n.y)}function rn(n){return n.x}function un(n){return n.y}function np(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(n,t,i,r,u,f){if(!n(t,i,r,u,f)){var o=.5*(i+u),s=.5*(r+f),e=t.nodes;e[0]&&gr(n,e[0],i,r,o,s),e[1]&&gr(n,e[1],o,r,u,s),e[2]&&gr(n,e[2],i,s,o,f),e[3]&&gr(n,e[3],o,s,u,f)}}function fn(n,t,i,r,u,f,e){var s,h=1/0;return function o(n,c,l,a,v){var y;if(!(c>f||l>e||r>a||u>v)){if(k=n.point){var k,d=t-n.x,g=i-n.y,nt=d*d+g*g;h>nt&&(y=Math.sqrt(h=nt),r=t-y,u=i-y,f=t+y,e=i+y,s=k)}for(var tt=n.nodes,p=.5*(c+a),w=.5*(l+v),it=t>=p,rt=i>=w,b=rt<<1|it,ut=b+4;ut>b;++b)if(n=tt[3&b])switch(3&b){case 0:o(n,c,l,p,w);break;case 1:o(n,p,l,a,w);break;case 2:o(n,c,w,p,v);break;case 3:o(n,p,w,a,v)}}}(n,r,u,f,e),s}function gs(t,i){t=n.rgb(t),i=n.rgb(i);var r=t.r,u=t.g,f=t.b,e=i.r-r,o=i.g-u,s=i.b-f;return function(n){return"#"+tr(Math.round(r+e*n))+tr(Math.round(u+o*n))+tr(Math.round(f+s*n))}}function tp(n,t){var i,u={},r={};for(i in n)i in t?u[i]=vi(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}}function yt(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function ip(n,t){var s,f,u,e=ge.lastIndex=no.lastIndex=0,r=-1,i=[],o=[];for(n+="",t+="";(s=ge.exec(n))&&(f=no.exec(t));)(u=f.index)>e&&(u=t.slice(e,u),i[r]?i[r]+=u:i[++r]=u),(s=s[0])===(f=f[0])?i[r]?i[r]+=f:i[++r]=f:(i[++r]=null,o.push({i:r,x:yt(s,f)})),e=no.lastIndex;return e<t.length&&(u=t.slice(e),i[r]?i[r]+=u:i[++r]=u),i.length<2?o[0]?(t=o[0].x,function(n){return t(n)+""}):function(){return t}:(t=o.length,function(n){for(var u,r=0;t>r;++r)i[(u=o[r]).i]=u.x(n);return i.join("")})}function vi(t,i){for(var r,u=n.interpolators.length;--u>=0&&!(r=n.interpolators[u](t,i)););return r}function lf(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;f>i;++i)u.push(vi(n[i],t[i]));for(;e>i;++i)r[i]=n[i];for(;o>i;++i)r[i]=t[i];return function(n){for(i=0;f>i;++i)r[i]=u[i](n);return r}}function en(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function rp(n){return function(t){return 1-n(1-t)}}function up(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function on(n){return n*n}function sn(n){return n*n*n}function hn(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(.5>n?i:3*(n-t)+i-.75)}function cn(n){return function(t){return Math.pow(t,n)}}function ln(n){return 1-Math.cos(n*h)}function an(n){return Math.pow(2,10*(n-1))}function vn(n){return 1-Math.sqrt(1-n*n)}function yn(n,t){var i;return arguments.length<2&&(t=.45),arguments.length?i=t/g*Math.asin(1/n):(n=1,i=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-i)*g/t)}}function pn(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function wn(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function bn(t,i){t=n.hcl(t),i=n.hcl(i);var u=t.h,f=t.c,o=t.l,r=i.h-u,e=i.c-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.c:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return po(u+r*n,f+e*n,o+s*n)+""}}function kn(t,i){t=n.hsl(t),i=n.hsl(i);var u=t.h,f=t.s,o=t.l,r=i.h-u,e=i.s-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.s:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return yo(u+r*n,f+e*n,o+s*n)+""}}function dn(t,i){t=n.lab(t),i=n.lab(i);var r=t.l,u=t.a,f=t.b,e=i.l-r,o=i.a-u,s=i.b-f;return function(n){return wa(r+e*n,u+o*n,f+s*n)+""}}function fp(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function ep(n){var t=[n.a,n.b],i=[n.c,n.d],r=sp(t),u=op(t,i),f=sp(gn(i,t,-u))||0;t[0]*i[1]<i[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*s,this.translate=[n.e,n.f],this.scale=[r,f],this.skew=f?Math.atan2(u,f)*s:0}function op(n,t){return n[0]*t[0]+n[1]*t[1]}function sp(n){var t=Math.sqrt(op(n,n));return t&&(n[0]/=t,n[1]/=t),t}function gn(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function hp(t,i){var s,r=[],o=[],c=n.transform(t),l=n.transform(i),a=c.translate,u=l.translate,h=c.rotate,f=l.rotate,p=c.skew,v=l.skew,y=c.scale,e=l.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:yt(a[0],u[0])},{i:3,x:yt(a[1],u[1])})):r.push(u[0]||u[1]?"translate("+u+")":""),h!=f?(h-f>180?f+=360:f-h>180&&(h+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:yt(h,f)})):f&&r.push(r.pop()+"rotate("+f+")"),p!=v?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:yt(p,v)}):v&&r.push(r.pop()+"skewX("+v+")"),y[0]!=e[0]||y[1]!=e[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:s-4,x:yt(y[0],e[0])},{i:s-2,x:yt(y[1],e[1])})):(1!=e[0]||1!=e[1])&&r.push(r.pop()+"scale("+e+")"),s=o.length,function(n){for(var t,i=-1;++i<s;)r[(t=o[i]).i]=t.x(n);return r.join("")}}function ntt(n,t){return t=(t-=n=+n)||1/t,function(i){return(i-n)/t}}function ttt(n,t){return t=(t-=n=+n)||1/t,function(i){return Math.max(0,Math.min(1,(i-n)/t))}}function itt(n){for(var f,t=n.source,i=n.target,u=rtt(t,i),r=[t];t!==u;)t=t.parent,r.push(t);for(f=r.length;i!==u;)r.splice(f,0,i),i=i.parent;return r}function cp(n){for(var i=[],t=n.parent;null!=t;)i.push(n),n=t,t=t.parent;return i.push(n),i}function rtt(n,t){if(n===t)return n;for(var r=cp(n),u=cp(t),i=r.pop(),f=u.pop(),e=null;i===f;)e=i,i=r.pop(),f=u.pop();return e}function utt(n){n.fixed|=2}function ftt(n){n.fixed&=-7}function ett(n){n.fixed|=4,n.px=n.x,n.py=n.y}function ott(n){n.fixed&=-5}function lp(n,t,i){var f=0,e=0,u;if(n.charge=0,!n.leaf)for(var r,o=n.nodes,h=o.length,s=-1;++s<h;)r=o[s],null!=r&&(lp(r,t,i),n.charge+=r.charge,f+=r.charge*r.cx,e+=r.charge*r.cy);n.point&&(n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5),u=t*i[n.point.index],n.charge+=n.pointCharge=u,f+=u*n.point.x,e+=u*n.point.y),n.cx=f/n.charge,n.cy=e/n.charge}function nu(t,i){return n.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=ltt,t}function tu(n,t){for(var r,u,i=[n];null!=(n=i.pop());)if(t(n),(u=n.children)&&(r=u.length))for(;--r>=0;)i.push(u[r])}function et(n,t){for(var e,u,f,i=[n],r=[];null!=(n=i.pop());)if(r.push(n),(u=n.children)&&(e=u.length))for(f=-1;++f<e;)i.push(u[f]);for(;null!=(n=r.pop());)t(n)}function stt(n){return n.children}function htt(n){return n.value}function ctt(n,t){return t.value-n.value}function ltt(t){return n.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function att(n){return n.x}function vtt(n){return n.y}function ytt(n,t,i){n.y0=t,n.y=i}function nh(t){return n.range(t.length)}function th(n){for(var t=-1,r=n[0].length,i=[];++t<r;)i[t]=0;return i}function ptt(n){for(var i,t=1,r=0,u=n[0][1],f=n.length;f>t;++t)(i=n[t][1])>u&&(r=t,u=i);return r}function wtt(n){return n.reduce(btt,0)}function btt(n,t){return n+t[1]}function ktt(n,t){return ap(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ap(n,t){for(var i=-1,r=+n[0],f=(n[1]-r)/t,u=[];++i<=t;)u[i]=f*i+r;return u}function dtt(t){return[n.min(t),n.max(t)]}function gtt(n,t){return n.value-t.value}function ih(n,t){var i=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=i,i._pack_prev=t}function vp(n,t){n._pack_next=t,t._pack_prev=n}function yp(n,t){var i=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>i*i+r*r}function pp(n){function h(n){c=Math.min(n.x-n.r,c),l=Math.max(n.x+n.r,l),a=Math.min(n.y-n.r,a),v=Math.max(n.y+n.r,v)}if((u=n.children)&&(s=u.length)){var u,i,r,t,f,e,o,s,c=1/0,l=-1/0,a=1/0,v=-1/0;if(u.forEach(nit),i=u[0],i.x=-i.r,i.y=0,h(i),s>1&&(r=u[1],r.x=r.r,r.y=0,h(r),s>2))for(t=u[2],bp(i,r,t),h(t),ih(i,t),i._pack_prev=t,ih(t,r),r=i._pack_next,f=3;s>f;f++){bp(i,r,t=u[f]);var y=0,p=1,w=1;for(e=r._pack_next;e!==r;e=e._pack_next,p++)if(yp(e,t)){y=1;break}if(1==y)for(o=i._pack_prev;o!==e._pack_prev&&!yp(o,t);o=o._pack_prev,w++);y?(w>p||p==w&&r.r<i.r?vp(i,r=e):vp(i=o,r),f--):(ih(i,t),r=t,h(t))}var k=(c+l)/2,d=(a+v)/2,b=0;for(f=0;s>f;f++)t=u[f],t.x-=k,t.y-=d,b=Math.max(b,t.r+Math.sqrt(t.x*t.x+t.y*t.y));n.r=b,u.forEach(tit)}}function nit(n){n._pack_next=n._pack_prev=n}function tit(n){delete n._pack_next,delete n._pack_prev}function wp(n,t,i,r){var u=n.children,f,e;if(n.x=t+=r*n.x,n.y=i+=r*n.y,n.r*=r,u)for(f=-1,e=u.length;++f<e;)wp(u[f],t,i,r)}function bp(n,t,i){var r=n.r+i.r,f=t.x-n.x,e=t.y-n.y,u,o,s,h;r&&(f||e)?(u=t.r+i.r,o=f*f+e*e,u*=u,r*=r,s=.5+(r-u)/(2*o),h=Math.sqrt(Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o),i.x=n.x+s*f+h*e,i.y=n.y+s*e-h*f):(i.x=n.x+r,i.y=n.y)}function kp(n,t){return n.parent==t.parent?1:2}function rh(n){var t=n.children;return t.length?t[0]:n.t}function uh(n){var t,i=n.children;return(t=i.length)?i[t-1]:n.t}function iit(n,t,i){var r=i/(t.i-n.i);t.c-=r,t.s+=i,n.c+=r,t.z+=i,t.m+=i}function rit(n){for(var t,i=0,f=0,r=n.children,u=r.length;--u>=0;)t=r[u],t.z+=i,t.m+=i,i+=t.s+(f+=t.c)}function uit(n,t,i){return n.a.parent===t.parent?n.a:i}function fit(t){return 1+n.max(t,function(n){return n.y})}function eit(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function dp(n){var t=n.children;return t&&t.length?dp(t[0]):n}function gp(n){var i,t=n.children;return t&&(i=t.length)?gp(t[i-1]):n}function fh(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function nw(n,t){var u=n.x+t[3],f=n.y+t[0],i=n.dx-t[1]-t[3],r=n.dy-t[0]-t[2];return 0>i&&(u+=i/2,i=0),0>r&&(f+=r/2,r=0),{x:u,y:f,dx:i,dy:r}}function or(n){var t=n[0],i=n[n.length-1];return i>t?[t,i]:[i,t]}function af(n){return n.rangeExtent?n.rangeExtent():or(n.range())}function oit(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function eh(n,t){var i,r=0,u=n.length-1,f=n[r],e=n[u];return f>e&&(i=r,r=u,u=i,i=f,f=e,e=i),n[r]=t.floor(f),n[u]=t.ceil(e),n}function sit(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:pb}function hit(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;return s[r](o[r](i))}}function tw(n,t,i,r){function f(){var f=Math.min(n.length,t.length)>2?hit:oit,s=r?ttt:ntt;return e=f(n,t,s,i),o=f(t,n,s,vi),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(fp)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return sh(n,t)},u.tickFormat=function(t,i){return hh(n,t,i)},u.nice=function(t){return iw(n,t),f()},u.copy=function(){return tw(n,t,i,r)},f()}function oh(t,i){return n.rebind(t,i,"range","rangeRound","interpolate","clamp")}function iw(n,t){return eh(n,sit(iu(n,t)[2]))}function iu(n,t){null==t&&(t=10);var r=or(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function sh(t,i){return n.range.apply(n,iu(t,i))}function hh(t,i,u){var e=iu(t,i),f,o;if(u){if(f=ob.exec(u),f.shift(),"s"===f[8])return o=n.formatPrefix(Math.max(r(e[0]),r(e[1]))),f[7]||(f[7]="."+vf(o.scale(e[2]))),f[8]="f",u=n.format(f.join("")),function(n){return u(o.scale(n))+o.symbol};f[7]||(f[7]="."+cit(f[8],e)),u=f.join("")}else u=",."+vf(e[2])+"f";return n.format(u)}function vf(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function cit(n,t){var i=vf(t[2]);return n in wb?Math.abs(i-vf(Math.max(r(t[0]),r(t[1]))))+ +("e"!==n):i-2*("%"===n)}function rw(t,i,r,u){function e(n){return(r?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(i)}function o(n){return r?Math.pow(i,n):-Math.pow(i,-n)}function f(n){return t(e(n))}return f.invert=function(n){return o(t.invert(n))},f.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((u=n.map(Number)).map(e)),f):u},f.base=function(n){return arguments.length?(i=+n,t.domain(u.map(e)),f):i},f.nice=function(){var n=eh(u.map(e),r?Math:bb);return t.domain(n),u=n.map(o),f},f.ticks=function(){var h=or(u),t=[],c=h[0],l=h[1],n=Math.floor(e(c)),s=Math.ceil(e(l)),a=i%1?2:i,f;if(isFinite(s-n)){if(r){for(;s>n;n++)for(f=1;a>f;f++)t.push(o(n)*f);t.push(o(n))}else for(t.push(o(n));n++<s;)for(f=a-1;f>0;f--)t.push(o(n)*f);for(n=0;t[n]<c;n++);for(s=t.length;t[s-1]>l;s--);t=t.slice(n,s)}return t},f.tickFormat=function(t,i){if(!arguments.length)return rl;arguments.length<2?i=rl:"function"!=typeof i&&(i=n.format(i));var u,s=Math.max(.1,t/f.ticks().length),h=r?(u=1e-12,Math.ceil):(u=-1e-12,Math.floor);return function(n){return n/o(h(e(n)+u))<=s?i(n):""}},f.copy=function(){return rw(t.copy(),i,r,u)},oh(f,t)}function uw(n,t,i){function r(t){return n(u(t))}var u=yf(t),f=yf(1/t);return r.invert=function(t){return f(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((i=t.map(Number)).map(u)),r):i},r.ticks=function(n){return sh(i,n)},r.tickFormat=function(n,t){return hh(i,n,t)},r.nice=function(n){return r.domain(iw(i,n))},r.exponent=function(e){return arguments.length?(u=yf(t=e),f=yf(1/t),n.domain(i.map(u)),r):t},r.copy=function(){return uw(n.copy(),t,i)},oh(r,n)}function yf(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function fw(t,i){function r(n){return u[((e.get(n)||("range"===i.t?e.set(n,t.push(n)):NaN))-1)%u.length]}function o(i,r){return n.range(t.length).map(function(n){return i+r*n})}var e,u,f;return r.domain=function(n){if(!arguments.length)return t;t=[],e=new lt;for(var u,f=-1,o=n.length;++f<o;)e.has(u=n[f])||e.set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.length?(u=n,f=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=(s+h)/2,0):(h-s)/(t.length-1+e);return u=o(s+c*e/2,c),f=0,i={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=h=Math.round((s+h)/2),0):(h-s)/(t.length-1+e)|0;return u=o(s+Math.round(c*e/2+(h-s-(t.length-1+e)*c)/2),c),f=0,i={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(n,e,s){arguments.length<2&&(e=0),arguments.length<3&&(s=e);var h=n[1]<n[0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-e+2*s);return u=o(l+c*s,c),h&&u.reverse(),f=c*(1-e),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,e,s){arguments.length<2&&(e=0),arguments.length<3&&(s=e);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.floor((a-c)/(t.length-e+2*s));return u=o(c+Math.round((a-c-(t.length-e)*l)/2),l),h&&u.reverse(),f=Math.round(l*(1-e)),i={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return f},r.rangeExtent=function(){return or(i.a[0])},r.copy=function(){return fw(t,i)},r.domain(t)}function ew(t,i){function f(){var f=0,e=i.length;for(r=[];++f<e;)r[f-1]=n.quantile(t,f/e);return u}function u(t){if(!isNaN(t=+t))return i[n.bisect(r,t)]}var r;return u.domain=function(n){return arguments.length?(t=n.map(si).filter(ct).sort(nr),f()):t},u.range=function(n){return arguments.length?(i=n,f()):i},u.quantiles=function(){return r},u.invertExtent=function(n){return n=i.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},u.copy=function(){return ew(t,i)},f()}function ow(n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(u*(t-n))))]}function f(){return u=i.length/(t-n),e=i.length-1,r}var u,e;return r.domain=function(i){return arguments.length?(n=+i[0],t=+i[i.length-1],f()):[n,t]},r.range=function(n){return arguments.length?(i=n,f()):i},r.invertExtent=function(t){return t=i.indexOf(t),t=0>t?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return ow(n,t,i)},f()}function sw(t,i){function r(r){if(r>=r)return i[n.bisect(t,r)]}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(n){return arguments.length?(i=n,r):i},r.invertExtent=function(n){return n=i.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return sw(t,i)},r}function hw(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=i.map(t),t):n},t.ticks=function(t){return sh(n,t)},t.tickFormat=function(t,i){return hh(n,t,i)},t.copy=function(){return hw(n)},t}function lit(){return 0}function ait(n){return n.innerRadius}function vit(n){return n.outerRadius}function cw(n){return n.startAngle}function lw(n){return n.endAngle}function yit(n){return n&&n.padAngle}function pf(n,t,i,r){return(n-i)*t-(t-r)*n>0?0:1}function wf(n,t,i,r,u){var v=n[0]-t[0],y=n[1]-t[1],nt=(u?r:-r)/Math.sqrt(v*v+y*y),p=nt*y,w=-nt*v,b=n[0]+p,k=n[1]+w,d=t[0]+p,g=t[1]+w,tt=(b+d)/2,it=(k+g)/2,e=d-b,f=g-k,s=e*e+f*f,h=i-r,o=b*g-d*k,c=(0>f?-1:1)*Math.sqrt(h*h*s-o*o),l=(o*f-e*c)/s,a=(-o*e-f*c)/s,rt=(o*f+e*c)/s,ut=(-o*e+f*c)/s,ft=l-tt,et=a-it,ot=rt-tt,st=ut-it;return ft*ft+et*et>ot*ot+st*st&&(l=rt,a=ut),[[l-p,a-w],[l*i/h,a*i/h]]}function aw(n){function t(t){function a(){l.push("M",i(n(s),e))}for(var c,l=[],s=[],h=-1,v=t.length,y=o(r),p=o(u);++h<v;)f.call(this,c=t[h],h)?s.push([+y.call(this,c,h),+p.call(this,c,h)]):s.length&&(a(),s=[]);return s.length&&a(),l.length?l.join(""):null}var r=ur,u=wr,f=rr,i=d,s=i.key,e=.7;return t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(f=n,t):f},t.interpolate=function(n){return arguments.length?(s="function"==typeof n?i=n:(i=to.get(n)||d).key,t):s},t.tension=function(n){return arguments.length?(e=n,t):e},t}function d(n){return n.join("L")}function pit(n){return d(n)+"Z"}function wit(n){for(var r=0,u=n.length,t=n[0],i=[t[0],",",t[1]];++r<u;)i.push("H",(t[0]+(t=n[r])[0])/2,"V",t[1]);return u>1&&i.push("H",t[0]),i.join("")}function ch(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}function lh(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",(t=n[i])[0],"V",t[1]);return r.join("")}function bit(n,t){return n.length<4?d(n):n[1]+bf(n.slice(1,-1),ah(n,t))}function kit(n,t){return n.length<3?d(n):n[0]+bf((n.push(n[0]),n),ah([n[n.length-2]].concat(n,[n[1]]),t))}function dit(n,t){return n.length<3?d(n):n[0]+bf(n,ah(n,t))}function bf(n,t){var o,h;if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return d(n);var c=n.length!=t.length,f="",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-2*e[0]/3)+","+(i[1]-2*e[1]/3)+","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&(h=n[u],f+="Q"+(i[0]+2*r[0]/3)+","+(i[1]+2*r[1]/3)+","+h[0]+","+h[1]),f}function ah(n,t){for(var r,u=[],f=(1-t)/2,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function vw(n){if(n.length<3)return d(n);var o=1,s=n.length,t=n[0],i=t[0],r=t[1],u=[i,i,i,(t=n[1])[0]],f=[r,r,r,t[1]],e=[i,",",r,"L",nt(oi,u),",",nt(oi,f)];for(n.push(n[s-1]);++o<=s;)t=n[o],u.shift(),u.push(t[0]),f.shift(),f.push(t[1]),vh(e,u,f);return n.pop(),e.push("L",t),e.join("")}function git(n){if(n.length<4)return d(n);for(var t,f=[],i=-1,e=n.length,r=[0],u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(f.push(nt(oi,r)+","+nt(oi,u)),--i;++i<e;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),vh(f,r,u);return f.join("")}function nrt(n){for(var f,t,i=-1,e=n.length,o=e+4,r=[],u=[];++i<4;)t=n[i%e],r.push(t[0]),u.push(t[1]);for(f=[nt(oi,r),",",nt(oi,u)],--i;++i<o;)t=n[i%e],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),vh(f,r,u);return f.join("")}function trt(n,t){var i=n.length-1;if(i)for(var r,u,e=n[0][0],o=n[0][1],s=n[i][0]-e,h=n[i][1]-o,f=-1;++f<=i;)r=n[f],u=f/i,r[0]=t*r[0]+(1-t)*(e+u*s),r[1]=t*r[1]+(1-t)*(o+u*h);return vw(n)}function nt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function vh(n,t,i){n.push("C",nt(kb,t),",",nt(kb,i),",",nt(db,t),",",nt(db,i),",",nt(oi,t),",",nt(oi,i))}function yh(n,t){return(t[1]-n[1])/(t[0]-n[0])}function irt(n){for(var t=0,e=n.length-1,i=[],f=n[0],r=n[1],u=i[0]=yh(f,r);++t<e;)i[t]=(u+(u=yh(f=r,r=n[t+1])))/2;return i[t]=u,i}function rrt(n){for(var e,o,s,u,c=[],f=irt(n),i=-1,h=n.length-1;++i<h;)e=yh(n[i],n[i+1]),r(e)<t?f[i]=f[i+1]=0:(o=f[i]/e,s=f[i+1]/e,u=o*o+s*s,u>9&&(u=3*e/Math.sqrt(u),f[i]=u*o,f[i+1]=u*s));for(i=-1;++i<=h;)u=(n[Math.min(h,i+1)][0]-n[Math.max(0,i-1)][0])/(6*(1+f[i]*f[i])),c.push([u||0,f[i]*u||0]);return c}function urt(n){return n.length<3?d(n):n[0]+bf(n,rrt(n))}function yw(n){for(var t,i,r,u=-1,f=n.length;++u<f;)t=n[u],i=t[0],r=t[1]-h,t[0]=i*Math.cos(r),t[1]=i*Math.sin(r);return n}function pw(n){function t(t){function b(){p.push("M",i(n(w),s),a,l(n(y.reverse()),s),"Z")}for(var v,k,d,p=[],y=[],w=[],c=-1,g=t.length,nt=o(f),tt=o(e),it=f===r?function(){return k}:o(r),rt=e===u?function(){return d}:o(u);++c<g;)h.call(this,v=t[c],c)?(y.push([k=+nt.call(this,v,c),d=+tt.call(this,v,c)]),w.push([+it.call(this,v,c),+rt.call(this,v,c)])):y.length&&(b(),y=[],w=[]);return y.length&&b(),p.length?p.join(""):null}var f=ur,r=ur,e=0,u=wr,h=rr,i=d,c=i.key,l=i,a="L",s=.7;return t.x=function(n){return arguments.length?(f=r=n,t):r},t.x0=function(n){return arguments.length?(f=n,t):f},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(e=u=n,t):u},t.y0=function(n){return arguments.length?(e=n,t):e},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(h=n,t):h},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?i=n:(i=to.get(n)||d).key,l=i.reverse||i,a=i.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function frt(n){return n.radius}function ww(n){return[n.x,n.y]}function ert(n){return function(){var t=n.apply(this,arguments),i=t[0],r=t[1]-h;return[i*Math.cos(r),i*Math.sin(r)]}}function ort(){return 64}function srt(){return"circle"}function bw(n){var t=Math.sqrt(n/f);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function kw(n){return function(){var t,i;(t=this[n])&&(i=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function ru(n,t,i){return ne(n,a),n.namespace=t,n.id=i,n}function ph(n,t,i,r){var u=n.id,f=n.namespace;return at(n,"function"==typeof i?function(n,e,o){n[f][u].tween.set(t,r(i.call(n,n.__data__,e,o)))}:(i=r(i),function(n){n[f][u].tween.set(t,i)}))}function hrt(n){return null==n&&(n=""),function(){this.textContent=n}}function wh(n){return null==n?"__transition__":"__transition_"+n+"__"}function kf(t,i,r,u,f){var e=t[r]||(t[r]={active:0,count:0}),o=e[u],s;o||(s=f.time,o=e[u]={tween:new lt,time:s,delay:f.delay,duration:f.duration,ease:f.ease,index:i},f=null,++e.count,n.timer(function(f){function a(r){if(e.active>u)return y();var f=e[e.active];f&&(--e.count,delete e[e.active],f.event&&f.event.interrupt.call(t,t.__data__,f.index)),e.active=u,o.event&&o.event.start.call(t,t.__data__,i),o.tween.forEach(function(n,r){(r=r.call(t,t.__data__,i))&&l.push(r)}),w=o.ease,p=o.duration,n.timer(function(){return c.c=v(r||1)?rr:v,1},0,s)}function v(n){if(e.active!==u)return 1;for(var r=n/p,s=w(r),f=l.length;f>0;)l[--f].call(t,s);if(r>=1)return(o.event&&o.event.end.call(t,t.__data__,i),y())}function y(){return--e.count?delete e[u]:delete t[r],1}var p,w,h=o.delay,c=pt,l=[];return c.t=h+s,f>=h?a(f-h):void(c.c=a)},0,s))}function crt(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:i(n))+",0)"})}function lrt(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:i(n))+")"})}function bh(n){return n.toISOString()}function kh(t,i,r){function u(n){return t(n)}function f(t,r){var e=t[1]-t[0],f=e/r,u=n.bisect(uo,f);return u==uo.length?[i.year,iu(t.map(function(n){return n/31536e6}),r)[2]]:u?i[f/uo[u-1]<uo[u]/f?u-1:u]:[lut,iu(t,r)[2]]}return u.invert=function(n){return yi(t.invert(n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain().map(yi)},u.nice=function(n,t){function r(i){return!isNaN(i)&&!n.range(i,yi(+i+1),t).length}var e=u.domain(),o=or(e),i=null==n?f(o,10):"number"==typeof n&&f(o,n);return i&&(n=i[0],t=i[1]),u.domain(eh(e,t>1?{floor:function(t){for(;r(t=n.floor(t));)t=yi(t-1);return t},ceil:function(t){for(;r(t=n.ceil(t));)t=yi(+t+1);return t}}:n))},u.ticks=function(n,t){var i=or(u.domain()),r=null==n?f(i,10):"number"==typeof n?f(i,n):!n.range&&[{range:n},t];return r&&(n=r[0],t=r[1]),n.range(i[0],yi(+i[1]+1),1>t?1:t)},u.tickFormat=function(){return r},u.copy=function(){return kh(t.copy(),i,r)},oh(u,t)}function yi(n){return new Date(n)}function art(n){return JSON.parse(n.responseText)}function vrt(n){var t=p.createRange();return t.selectNode(p.body),t.createContextualFragment(n.responseText)}var n={version:"3.5.5"},dw=[].slice,ti=function(n){return dw.call(n)},p=this.document,dh,r,nb,gf,gh,e,te,ot,ie,pi,tb,re,fe,fc,ec,ee,oe,uu,fu,he,ce,le,ae,pt,sc,eb,st,hc,eu,cc,lc,ve,ii,k,yc,ki,pc,wc,bc,kc,dc,su,cr,di,lr,gc,hu,nl,tl,cu,ge,no,ab,il,vb,yb,pb,wb,rl,bb,lu,to,ul,au,fl,el,nk,cl,rk;if(p)try{ti(p.documentElement.childNodes)[0].nodeType}catch(aut){ti=function(n){for(var t=n.length,i=new Array(t);t--;)i[t]=n[t];return i}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch(vut){var df=this.Element.prototype,yrt=df.setAttribute,prt=df.setAttributeNS,gw=this.CSSStyleDeclaration.prototype,wrt=gw.setProperty;df.setAttribute=function(n,t){yrt.call(this,n,t+"")},df.setAttributeNS=function(n,t,i){prt.call(this,n,t,i+"")},gw.setProperty=function(n,t,i){wrt.call(this,n,t+"",i)}}n.ascending=nr,n.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},n.min=function(n,t){var u,i,r=-1,f=n.length;if(1===arguments.length){for(;++r<f;)if(null!=(i=n[r])&&i>=i){u=i;break}for(;++r<f;)null!=(i=n[r])&&u>i&&(u=i)}else{for(;++r<f;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=i;break}for(;++r<f;)null!=(i=t.call(n,n[r],r))&&u>i&&(u=i)}return u},n.max=function(n,t){var u,i,r=-1,f=n.length;if(1===arguments.length){for(;++r<f;)if(null!=(i=n[r])&&i>=i){u=i;break}for(;++r<f;)null!=(i=n[r])&&i>u&&(u=i)}else{for(;++r<f;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=i;break}for(;++r<f;)null!=(i=t.call(n,n[r],r))&&i>u&&(u=i)}return u},n.extent=function(n,t){var u,i,f,r=-1,e=n.length;if(1===arguments.length){for(;++r<e;)if(null!=(i=n[r])&&i>=i){u=f=i;break}for(;++r<e;)null!=(i=n[r])&&(u>i&&(u=i),i>f&&(f=i))}else{for(;++r<e;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=f=i;break}for(;++r<e;)null!=(i=t.call(n,n[r],r))&&(u>i&&(u=i),i>f&&(f=i))}return[u,f]},n.sum=function(n,t){var r,u=0,f=n.length,i=-1;if(1===arguments.length)for(;++i<f;)ct(r=+n[i])&&(u+=r);else for(;++i<f;)ct(r=+t.call(n,n[i],i))&&(u+=r);return u},n.mean=function(n,t){var r,f=0,e=n.length,i=-1,u=e;if(1===arguments.length)for(;++i<e;)ct(r=si(n[i]))?f+=r:--u;else for(;++i<e;)ct(r=si(t.call(n,n[i],i)))?f+=r:--u;if(u)return f/u},n.quantile=function(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r},n.median=function(t,i){var u,f=[],e=t.length,r=-1;if(1===arguments.length)for(;++r<e;)ct(u=si(t[r]))&&f.push(u);else for(;++r<e;)ct(u=si(i.call(t,t[r],r)))&&f.push(u);if(f.length)return n.quantile(f.sort(nr),.5)},n.variance=function(n,t){var i,r,s=n.length,u=0,o=0,f=-1,e=0;if(1===arguments.length)for(;++f<s;)ct(i=si(n[f]))&&(r=i-u,u+=r/++e,o+=r*(i-u));else for(;++f<s;)ct(i=si(t.call(n,n[f],f)))&&(r=i-u,u+=r/++e,o+=r*(i-u));if(e>1)return o/(e-1)},n.deviation=function(){var t=n.variance.apply(this,arguments);return t?Math.sqrt(t):t},dh=al(nr),n.bisectLeft=dh.left,n.bisect=n.bisectRight=dh.right,n.bisector=function(n){return al(1===n.length?function(t,i){return nr(n(t),i)}:n)},n.shuffle=function(n,t,i){(r=arguments.length)<3&&(i=n.length,2>r&&(t=0));for(var f,u,r=i-t;r;)u=Math.random()*r--|0,f=n[r+t],n[r+t]=n[u+t],n[u+t]=f;return n},n.permute=function(n,t){for(var i=t.length,r=new Array(i);i--;)r[i]=n[t[i]];return r},n.pairs=function(n){for(var f,t=0,i=n.length-1,r=n[0],u=new Array(0>i?0:i);i>t;)u[t]=[f=r,r=n[++t]];return u},n.zip=function(){var r,t,e;if(!(r=arguments.length))return[];for(var i=-1,u=n.min(arguments,uk),f=new Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=arguments[t][i];return f},n.transpose=function(t){return n.zip.apply(n,t)},n.keys=function(n){var t=[],i;for(i in n)t.push(i);return t},n.values=function(n){var t=[],i;for(i in n)t.push(n[i]);return t},n.entries=function(n){var i=[],t;for(t in n)i.push({key:t,value:n[t]});return i},n.merge=function(n){for(var t,i,r,u=n.length,e=-1,f=0;++e<u;)f+=n[e].length;for(i=new Array(f);--u>=0;)for(r=n[u],t=r.length;--t>=0;)i[--f]=r[t];return i},r=Math.abs,n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),(t-n)/i==1/0)throw new Error("infinite range");var f,e=[],u=fk(r(i)),o=-1;if(n*=u,t*=u,i*=u,0>i)for(;(f=n+i*++o)>t;)e.push(f/u);else for(;(f=n+i*++o)<t;)e.push(f/u);return e},n.map=function(n,t){var r=new lt,e,i,u,f;if(n instanceof lt)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n))if(i=-1,u=n.length,1===arguments.length)for(;++i<u;)r.set(i,n[i]);else for(;++i<u;)r.set(t.call(n,e=n[i],i),e);else for(f in n)r.set(f,n[f]);return r},nb="__proto__",gf="\x00",vl(lt,{has:yl,get:function(n){return this._[ar(n)]},set:function(n,t){return this._[ar(n)]=t},remove:pl,keys:wl,values:function(){var n=[],t;for(t in this._)n.push(this._[t]);return n},entries:function(){var t=[],n;for(n in this._)t.push({key:vu(n),value:this._[n]});return t},size:bl,empty:kl,forEach:function(n){for(var t in this._)n.call(this,vu(t),this._[t])}}),n.nest=function(){function r(n,e,o){if(o>=i.length)return f?f.call(t,e):u?e.sort(u):e;for(var l,s,h,a,v=-1,y=e.length,p=i[o++],c=new lt;++v<y;)(a=c.get(l=p(s=e[v])))?a.push(s):c.set(l,[s]);return n?(s=n(),h=function(t,i){s.set(t,r(n,i,o))}):(s={},h=function(t,i){s[t]=r(n,i,o)}),c.forEach(h),s}function e(n,t){if(t>=i.length)return n;var r=[],u=o[t++];return n.forEach(function(n,i){r.push({key:n,values:e(i,t)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var u,f,t={},i=[],o=[];return t.map=function(n,t){return r(t,n,0)},t.entries=function(t){return e(r(n.map,t,0),0)},t.key=function(n){return i.push(n),t},t.sortKeys=function(n){return o[i.length-1]=n,t},t.sortValues=function(n){return u=n,t},t.rollup=function(n){return f=n,t},t},n.set=function(n){var i=new fo,t,r;if(n)for(t=0,r=n.length;r>t;++t)i.add(n[t]);return i},vl(fo,{has:yl,add:function(n){return this._[ar(n+="")]=!0,n},remove:pl,values:wl,size:bl,empty:kl,forEach:function(n){for(var t in this._)n.call(this,vu(t))}}),n.behavior={},n.rebind=function(n,t){for(var i,r=1,u=arguments.length;++r<u;)n[i=arguments[r]]=ek(n,t,t[i]);return n},gh=["webkit","ms","moz","Moz","o","O"],n.dispatch=function(){for(var n=new oo,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=dl(n);return n},oo.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n)return arguments.length<2?this[n].on(i):this[n].on(i,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(i,null);return this}},n.event=null,n.requote=function(n){return n.replace(brt,"\\$&")};var brt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ne={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]},nc=function(n,t){return t.querySelector(n)},tc=function(n,t){return t.querySelectorAll(n)},ic=function(n,t){var i=n.matches||n[eo(n,"matchesSelector")];return(ic=function(n,t){return i.call(n,t)})(n,t)};"function"==typeof Sizzle&&(nc=function(n,t){return Sizzle(n,t)[0]||null},tc=Sizzle,ic=Sizzle.matchesSelector),n.selection=function(){return n.select(p.documentElement)},e=n.selection.prototype=[],e.select=function(n){var i,f,e,t,o=[],r,s,u,h;for(n=co(n),r=-1,s=this.length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=t.__data__)):i.push(null);return dt(o)},e.selectAll=function(n){var u,t,f=[],i,e;for(n=gl(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=o[r])&&(f.push(u=ti(n.call(t,t.__data__,r,i))),u.parentNode=t);return dt(f)},te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},n.ns={prefix:te,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&(i=n.slice(0,t),n=n.slice(t+1)),te.hasOwnProperty(i)?{space:te[i],local:n}:n}},e.attr=function(t,i){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=n.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(na(i,t[i]));return this}return this.each(na(t,i))},e.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var r=this.node(),u=(n=ra(n)).length,i=-1;if(t=r.classList){for(;++i<u;)if(!t.contains(n[i]))return!1}else for(t=r.getAttribute("class");++i<u;)if(!ia(n[i]).test(t))return!1;return!0}for(t in n)this.each(ua(t,n[t]));return this}return this.each(ua(n,t))},e.style=function(n,t,i){var r=arguments.length,u;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.each(fa(i,n[i],t));return this}if(2>r)return u=this.node(),bt(u).getComputedStyle(u,null).getPropertyValue(n);i=""}return this.each(fa(n,t,i))},e.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(ea(t,n[t]));return this}return this.each(ea(n,t))},e.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},e.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},e.append=function(n){return n=oa(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},e.insert=function(n,t){return n=oa(n),t=co(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},e.remove=function(){return this.each(sk)},e.data=function(n,t){function e(n,i){var r,u,e,o=n.length,a=i.length,b=Math.min(o,a),v=new Array(a),c=new Array(a),y=new Array(o),p,l,w;if(t){for(l=new lt,w=new Array(o),r=-1;++r<o;)l.has(p=t.call(u=n[r],u.__data__,r))?y[r]=u:l.set(p,u),w[r]=p;for(r=-1;++r<a;)(u=l.get(p=t.call(i,e=i[r],r)))?u!==!0&&(v[r]=u,u.__data__=e):c[r]=lo(e),l.set(p,!0);for(r=-1;++r<o;)l.get(w[r])!==!0&&(y[r]=n[r])}else{for(r=-1;++r<b;)u=n[r],e=i[r],u?(u.__data__=e,v[r]=u):c[r]=lo(e);for(;a>r;++r)c[r]=lo(i[r]);for(;o>r;++r)y[r]=n[r]}c.update=v,c.parentNode=v.parentNode=y.parentNode=n.parentNode,s.push(c),f.push(v),h.push(y)}var r,o,i=-1,u=this.length;if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(o=r[i])&&(n[i]=o.__data__);return n}var s=ha([]),f=dt([]),h=dt([]);if("function"==typeof n)for(;++i<u;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<u;)e(r=this[i],n);return f.enter=function(){return s},f.exit=function(){return h},f},e.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},e.filter=function(n){var u,f,r,e=[],t,o,i,s;for("function"!=typeof n&&(n=sa(n)),t=0,o=this.length;o>t;t++)for(e.push(u=[]),u.parentNode=(f=this[t]).parentNode,i=0,s=f.length;s>i;i++)(r=f[i])&&n.call(r,r.__data__,i,t)&&u.push(r);return dt(e)},e.order=function(){for(var i=-1,f=this.length;++i<f;)for(var t,r=this[i],u=r.length-1,n=r[u];--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this},e.sort=function(n){n=hk.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(n);return this.order()},e.each=function(n){return at(this,function(t,i,r){n.call(t,t.__data__,i,r)})},e.call=function(n){var t=ti(arguments);return n.apply(t[0]=this,t),this},e.empty=function(){return!this.node()},e.node=function(){for(var i,n=0,r=this.length;r>n;n++)for(var u=this[n],t=0,f=u.length;f>t;t++)if(i=u[t],i)return i;return null},e.size=function(){var n=0;return at(this,function(){++n}),n},ot=[],n.selection.enter=ha,n.selection.enter.prototype=ot,ot.append=e.append,ot.empty=e.empty,ot.node=e.node,ot.call=e.call,ot.size=e.size,ot.select=function(n){for(var i,h,r,e,o,t,u,s=[],f=-1,c=this.length;++f<c;)for(o=(t=this[f]).update,s.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;)(u=t[i])?(r.push(o[i]=e=n.call(t.parentNode,u.__data__,i,f)),e.__data__=u.__data__):r.push(null);return dt(s)},ot.insert=function(n,t){return arguments.length<2&&(t=ck(this)),e.insert.call(this,n,t)},n.select=function(n){var t;return"string"==typeof n?(t=[nc(n,p)],t.parentNode=p.documentElement):(t=[n],t.parentNode=ll(n)),dt([t])},n.selectAll=function(n){var t;return"string"==typeof n?(t=ti(tc(n,p)),t.parentNode=p.documentElement):(t=n,t.parentNode=null),dt([t])},e.on=function(n,t,i){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(i in n)this.each(ca(i,n[i],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;i=!1}return this.each(ca(n,t,i))},ie=n.map({mouseenter:"mouseover",mouseleave:"mouseout"}),p&&ie.forEach(function(n){"on"+n in p&&ie.remove(n)}),tb=0,n.mouse=function(n){return ao(n,so())},re=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0,n.touch=function(n,t,i){if(arguments.length<3&&(i=t,t=so().changedTouches),t)for(var u,r=0,f=t.length;f>r;++r)if((u=t[r]).identifier===i)return ao(n,u)},n.behavior.drag=function(){function t(){this.on("mousedown.drag",f).on("touchstart.drag",e)}function r(t,r,f,e,o){return function(){function b(){var t,i,n=r(y,h);n&&(t=n[0]-c[0],i=n[1]-c[1],w|=t|i,c=n,p({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:t,dy:i}))}function k(){r(y,h)&&(d.on(e+l,null).on(o+l,null),g(w&&n.event.target===v),p({type:"dragend"}))}var s,a=this,v=n.event.target,y=a.parentNode,p=u.of(a,arguments),w=0,h=t(),l=".drag"+(null==h?"":"-"+h),d=n.select(f(v)).on(e+l,b).on(o+l,k),g=yu(v),c=r(y,h);i?(s=i.apply(a,arguments),s=[s.x-c[0],s.y-c[1]]):s=[0,0],p({type:"dragstart"})}}var u=ho(t,"drag","dragstart","dragend"),i=null,f=r(l,n.mouse,bt,"mousemove","mouseup"),e=r(ak,n.touch,v,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},n.rebind(t,u,"on")},n.touches=function(n,t){return arguments.length<2&&(t=so().touches),t?ti(t).map(function(t){var i=ao(n,t);return i.identifier=t.identifier,i}):[]};var t=1e-6,rc=t*t,f=Math.PI,g=2*f,krt=g-t,h=f/2,u=f/180,s=180/f,ue=Math.SQRT2,uc=2,ib=4;n.interpolateZoom=function(n,t){function v(n){var t=n*p,r,h;return y?(r=ya(u),h=i/(uc*c)*(r*yk(ue*t+u)-vk(u)),[o+h*f,s+h*e,i*r/ya(ue*t+u)]):[o+n*f,s+n*e,i*Math.exp(ue*t)]}var o=n[0],s=n[1],i=n[2],w=t[0],b=t[1],r=t[2],f=w-o,e=b-s,h=f*f+e*e,c=Math.sqrt(h),l=(r*r-i*i+ib*h)/(2*i*uc*c),a=(r*r-i*i-ib*h)/(2*r*uc*c),u=Math.log(Math.sqrt(l*l+1)-l),k=Math.log(Math.sqrt(a*a+1)-a),y=k-u,p=(y||Math.log(r/i))/ue;return v.duration=1e3*p,v},n.behavior.zoom=function(){function i(n){n.on(it,ft).on(fc+".zoom",at).on("dblclick.zoom",vt).on(rt,et)}function s(n){return[(n[0]-t.x)/t.k,(n[1]-t.y)/t.k]}function lt(n){return[n[0]*t.k+t.x,n[1]*t.k+t.y]}function b(n){t.k=Math.max(y[0],Math.min(y[1],n))}function h(n,i){i=lt(i),t.x+=n[0]-i[0],t.y+=n[1]-i[1]}function ut(u,f,e,o){u.__chart__={x:t.x,y:t.y,k:t.k},b(Math.pow(2,o)),h(r=f,e),u=n.select(u),w>0&&(u=u.transition().duration(w)),u.call(i.event)}function k(){l&&l.domain(nt.range().map(function(n){return(n-t.x)/t.k}).map(nt.invert)),a&&a.domain(tt.range().map(function(n){return(n-t.y)/t.k}).map(tt.invert))}function f(n){st++||n({type:"zoomstart"})}function e(n){k(),n({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function u(n){--st||n({type:"zoomend"}),r=null}function ft(){function c(){r=1,h(n.mouse(t),y),e(i)}function l(){v.on(ht,null).on(ct,null),p(r&&n.event.target===a),u(i)}var t=this,a=n.event.target,i=o.of(t,arguments),r=0,v=n.select(bt(t)).on(ht,c).on(ct,l),y=s(n.mouse(t)),p=yu(t);ro.call(t),f(i)}function et(){function v(){var u=n.touches(i);return p=t.k,u.forEach(function(n){n.identifier in r&&(r[n.identifier]=s(n))}),u}function y(){var s=n.event.target,u,o,f;n.select(s).on(tt,d).on(ot,nt),w.push(s);for(var h=n.event.changedTouches,e=0,p=h.length;p>e;++e)r[h[e].identifier]=null;if(u=v(),o=Date.now(),1===u.length)500>o-g&&(f=u[0],ut(i,f,r[f.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),kt()),g=o;else if(u.length>1){var f=u[0],c=u[1],a=f[0]-c[0],y=f[1]-c[1];l=a*a+y*y}}function d(){var t,f,u,o,v=n.touches(i),a,y,s,w;for(ro.call(i),a=0,y=v.length;y>a;++a,o=null)if(u=v[a],o=r[u.identifier]){if(f)break;t=u,f=o}o&&(s=(s=u[0]-t[0])*s+(s=u[1]-t[1])*s,w=l&&Math.sqrt(s/l),t=[(t[0]+u[0])/2,(t[1]+u[1])/2],f=[(f[0]+o[0])/2,(f[1]+o[1])/2],b(w*p)),g=null,h(t,f),e(c)}function nt(){var e;if(n.event.touches.length){for(var i=n.event.changedTouches,t=0,f=i.length;f>t;++t)delete r[i[t].identifier];for(e in r)return void v()}n.selectAll(w).on(a,null),k.on(it,ft).on(rt,et),st(),u(c)}var p,i=this,c=o.of(i,arguments),r={},l=0,a=".zoom-"+n.event.changedTouches[0].identifier,tt="touchmove"+a,ot="touchend"+a,w=[],k=n.select(i),st=yu(i);y(),f(c),k.on(it,null).on(rt,y)}function at(){var i=o.of(this,arguments);c?clearTimeout(c):(ot=s(r=d||n.mouse(this)),ro.call(this),f(i)),c=setTimeout(function(){c=null,u(i)},50),kt(),b(Math.pow(2,.002*fe())*t.k),h(r,ot),e(i)}function vt(){var i=n.mouse(this),r=Math.log(t.k)/Math.LN2;ut(this,i,s(i),n.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var ot,r,d,c,g,nt,l,tt,a,t={x:0,y:0,k:1},v=[960,500],y=ec,w=250,st=0,it="mousedown.zoom",ht="mousemove.zoom",ct="mouseup.zoom",rt="touchstart.zoom",o=ho(i,"zoomstart","zoom","zoomend");return fc||(fc="onwheel"in p?(fe=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(fe=function(){return n.event.wheelDelta},"mousewheel"):(fe=function(){return-n.event.detail},"MozMousePixelScroll")),i.event=function(i){i.each(function(){var i=o.of(this,arguments),s=t;gi?n.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},f(i)}).tween("zoom:zoom",function(){var u=v[0],h=v[1],f=r?r[0]:u/2,o=r?r[1]:h/2,c=n.interpolateZoom([(f-t.x)/t.k,(o-t.y)/t.k,u/t.k],[(f-s.x)/s.k,(o-s.y)/s.k,u/s.k]);return function(n){var r=c(n),s=u/r[2];this.__chart__=t={x:f-r[0]*s,y:o-r[1]*s,k:s},e(i)}}).each("interrupt.zoom",function(){u(i)}).each("end.zoom",function(){u(i)}):(this.__chart__=t,f(i),e(i),u(i))})},i.translate=function(n){return arguments.length?(t={x:+n[0],y:+n[1],k:t.k},k(),i):[t.x,t.y]},i.scale=function(n){return arguments.length?(t={x:t.x,y:t.y,k:+n},k(),i):t.k},i.scaleExtent=function(n){return arguments.length?(y=null==n?ec:[+n[0],+n[1]],i):y},i.center=function(n){return arguments.length?(d=n&&[+n[0],+n[1]],i):d},i.size=function(n){return arguments.length?(v=n&&[+n[0],+n[1]],i):v},i.duration=function(n){return arguments.length?(w=+n,i):w},i.x=function(n){return arguments.length?(l=n,nt=n.copy(),t={x:0,y:0,k:1},i):l},i.y=function(n){return arguments.length?(a=n,tt=n.copy(),t={x:0,y:0,k:1},i):a},n.rebind(i,o,"on")},ec=[0,1/0],n.color=hi,hi.prototype.toString=function(){return this.rgb()+""},n.hsl=ft,ee=ft.prototype=new hi,ee.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ft(this.h,this.s,this.l/n)},ee.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ft(this.h,this.s,n*this.l)},ee.rgb=function(){return yo(this.h,this.s,this.l)},n.hcl=tt,oe=tt.prototype=new hi,oe.brighter=function(n){return new tt(this.h,this.c,Math.min(100,this.l+se*(arguments.length?n:1)))},oe.darker=function(n){return new tt(this.h,this.c,Math.max(0,this.l-se*(arguments.length?n:1)))},oe.rgb=function(){return po(this.h,this.c,this.l).rgb()},n.lab=it;var se=18,rb=.95047,ub=1,fb=1.08883,oc=it.prototype=new hi;oc.brighter=function(n){return new it(Math.min(100,this.l+se*(arguments.length?n:1)),this.a,this.b)},oc.darker=function(n){return new it(Math.max(0,this.l-se*(arguments.length?n:1)),this.a,this.b)},oc.rgb=function(){return wa(this.l,this.a,this.b)},n.rgb=b,uu=b.prototype=new hi,uu.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return i||r||u?(i&&t>i&&(i=t),r&&t>r&&(r=t),u&&t>u&&(u=t),new b(Math.min(255,i/n),Math.min(255,r/n),Math.min(255,u/n))):new b(t,t,t)},uu.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new b(n*this.r,n*this.g,n*this.b)},uu.hsl=function(){return ga(this.r,this.g,this.b)},uu.toString=function(){return"#"+tr(this.r)+tr(this.g)+tr(this.b)},fu=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}),fu.forEach(function(n,t){fu.set(n,ka(t))}),n.functor=o,n.xhr=ts(v),n.dsv=function(n,t){function i(n,i,r){arguments.length<3&&(r=i,i=null);var e=wu(n,t,null==i?u:f(i),r);return e.row=function(n){return arguments.length?e.response(null==(i=n)?u:f(n)):i},e}function u(n){return i.parse(n.responseText)}function f(n){return function(t){return i.parse(t.responseText,n)}}function e(t){return t.map(r).join(n)}function r(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),s=n.charCodeAt(0);return i.parse=function(n,t){var r;return i.parseRows(n,function(n,i){if(r)return r(n,i-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,i){return t(u(n),i)}:u})},i.parseRows=function(n,t){function h(){var f,t,u,h;if(i>=o)return e;if(r)return r=!1,c;if(f=i,34===n.charCodeAt(f)){for(t=f;t++<o;)if(34===n.charCodeAt(t)){if(34!==n.charCodeAt(t+1))break;++t}return i=t+2,u=n.charCodeAt(t+1),13===u?(r=!0,10===n.charCodeAt(t+2)&&++i):10===u&&(r=!0),n.slice(f+1,t).replace(/""/g,'"')}for(;o>i;){if(u=n.charCodeAt(i++),h=1,10===u)r=!0;else if(13===u)r=!0,10===n.charCodeAt(i)&&(++i,++h);else if(u!==s)continue;return n.slice(f,i-h)}return n.slice(f)}for(var f,u,r,c={},e={},l=[],o=n.length,i=0,a=0;(u=h())!==e;){for(f=[];u!==c&&u!==e;)f.push(u),u=h();t&&null==(f=t(f,a++))||l.push(f)}return l},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var f=new fo,u=[];return t.forEach(function(n){for(var t in n)f.has(t)||u.push(f.add(t))}),[u.map(r).join(n)].concat(t.map(function(t){return u.map(function(n){return r(t[n])}).join(n)})).join("\n")},i.formatRows=function(n){return n.map(e).join("\n")},i},n.csv=n.dsv(",","text/csv"),n.tsv=n.dsv("\t","text/tab-separated-values"),sc=this[eo(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)},n.timer=function(n,t,i){var u=arguments.length,f,r;2>u&&(t=0),3>u&&(i=Date.now()),f=i+t,r={c:n,t:f,f:!1,n:null},ce?ce.n=r:he=r,ce=r,le||(ae=clearTimeout(ae),le=1,sc(is))},n.timer.flush=function(){tv(),iv()},n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)},eb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(bk),n.formatPrefix=function(t,i){var r=0;return t&&(0>t&&(t*=-1),i&&(t=n.round(t,rs(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),eb[8+r/3]};var ob=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,drt=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(t,i){return(t=n.round(t,rs(t,i))).toFixed(Math.max(0,Math.min(20,rs(t*(1+1e-15),i))))}}),i=n.time={},y=Date;vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){st.setUTCDate.apply(this._,arguments)},setDay:function(){st.setUTCDay.apply(this._,arguments)},setFullYear:function(){st.setUTCFullYear.apply(this._,arguments)},setHours:function(){st.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){st.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){st.setUTCMinutes.apply(this._,arguments)},setMonth:function(){st.setUTCMonth.apply(this._,arguments)},setSeconds:function(){st.setUTCSeconds.apply(this._,arguments)},setTime:function(){st.setTime.apply(this._,arguments)}},st=Date.prototype,i.year=ci(function(n){return n=i.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),i.years=i.year.range,i.years.utc=i.year.utc.range,i.day=ci(function(n){var t=new y(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),i.days=i.day.range,i.days.utc=i.day.utc.range,i.dayOfYear=function(n){var t=i.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var r=i[n]=ci(function(n){return(n=i.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)-(r!==t)});i[n+"s"]=r.range,i[n+"s"].utc=r.utc.range,i[n+"OfYear"]=function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)}}),i.week=i.sunday,i.weeks=i.sunday.range,i.weeks.utc=i.sunday.utc.range,i.weekOfYear=i.sundayOfYear;var sb={"-":"",_:" ",0:"0"},c=/^\s*\d+/,hb=/^%/;n.locale=function(n){return{numberFormat:kk(n),timeFormat:gk(n)}},hc=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),n.format=hc.numberFormat,n.geo={},us.prototype={s:0,t:0,add:function(n){fv(n,this.t,eu),fv(eu.s,this.s,this),this.s?this.t+=eu.t:this.s=eu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}},eu=new us,n.geo.stream=function(n,t){n&&cc.hasOwnProperty(n.type)?cc[n.type](n,t):gu(n,t)},cc={Feature:function(n,t){gu(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)gu(i[r].geometry,t)}},lc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fs(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)fs(i[r],t,0)},Polygon:function(n,t){ev(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ev(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)gu(i[r],t)}},n.geo.area=function(t){return ve=0,n.geo.stream(t,k),ve},ii=new us,k={sphere:function(){ve+=4*f},point:l,lineStart:l,lineEnd:l,polygonStart:function(){ii.reset(),k.lineStart=pd},polygonEnd:function(){var n=2*ii;ve+=0>n?4*f+n:n,k.lineStart=k.lineEnd=k.point=l}},n.geo.bounds=function(){function w(n,t){v.push(l=[i=n,f=n]),o>t&&(o=t),t>h&&(h=t)}function b(n,t){var d=li([n*u,t*u]),c;if(y){var b=ir(y,d),nt=[b[1],-b[0],0],l=ir(nt,b);rf(l),l=uf(l);var g=n-a,p=g>0?1:-1,v=l[0]*s*p,k=r(g)>180;k^(v>p*a&&p*n>v)?(c=l[1]*s,c>h&&(h=c)):(v=(v+360)%360-180,k^(v>p*a&&p*n>v))?(c=-l[1]*s,o>c&&(o=c)):(o>t&&(o=t),t>h&&(h=t)),k?a>n?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n):f>=i?(i>n&&(i=n),n>f&&(f=n)):n>a?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n)}else w(n,t);y=d,a=n}function d(){c.point=b}function g(){l[0]=i,l[1]=f,c.point=w,y=null}function nt(n,t){if(y){var i=n-a;p+=r(i)>180?i+(i>0?360:-360):i}else it=n,rt=t;k.point(n,t),b(n,t)}function ut(){k.lineStart()}function ft(){nt(it,rt),k.lineEnd(),r(p)>t&&(i=-(f=180)),l[0]=i,l[1]=f,y=null}function e(n,t){return(t-=n)<0?t+360:t}function et(n,t){return n[0]-t[0]}function tt(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var i,o,f,h,a,it,rt,y,p,v,l,c={point:w,lineStart:d,lineEnd:g,polygonStart:function(){c.point=nt,c.lineStart=ut,c.lineEnd=ft,p=0,k.polygonStart()},polygonEnd:function(){k.polygonEnd(),c.point=w,c.lineStart=d,c.lineEnd=g,0>ii?(i=-(f=180),o=-(h=90)):p>t?h=90:-t>p&&(o=-90),l[0]=i,l[1]=f}};return function(t){var a;if(h=f=-(i=o=1/0),v=[],n.geo.stream(t,c),a=v.length,a){v.sort(et);for(var u,s=1,r=v[0],y=[r];a>s;++s)u=v[s],tt(u[0],r)||tt(u[1],r)?(e(r[0],u[1])>e(r[0],r[1])&&(r[1]=u[1]),e(u[0],r[1])>e(r[0],r[1])&&(r[0]=u[0])):y.push(r=u);for(var p,u,w=-1/0,a=y.length-1,s=0,r=y[a];a>=s;r=u,++s)u=y[s],(p=e(r[1],u[0]))>w&&(w=p,i=u[0],f=r[1])}return v=l=null,1/0===i||1/0===o?[[NaN,NaN],[NaN,NaN]]:[[i,o],[f,h]]}}(),n.geo.centroid=function(i){ou=ye=wi=bi=wt=ri=ui=ht=sr=hr=fi=0,n.geo.stream(i,rt);var r=sr,u=hr,f=fi,e=r*r+u*u+f*f;return rc>e&&(r=ri,u=ui,f=ht,t>ye&&(r=wi,u=bi,f=wt),e=r*r+u*u+f*f,rc>e)?[NaN,NaN]:[Math.atan2(u,r)*s,gt(f/Math.sqrt(e))*s]};var ou,ye,wi,bi,wt,ri,ui,ht,sr,hr,fi,rt={sphere:l,point:os,lineStart:ov,lineEnd:sv,polygonStart:function(){rt.lineStart=wd},polygonEnd:function(){rt.lineStart=ov}},cb=av(rr,dd,ng,[-f,-f/2]),pe=1e9;n.geo.clipExtent=function(){var t,i,r,u,n,f,e={stream:function(t){return n&&(n.valid=!1),n=f(t),n.valid=!0,n},extent:function(o){return arguments.length?(f=pv(t=+o[0][0],i=+o[0][1],r=+o[1][0],u=+o[1][1]),n&&(n.valid=!1,n=null),e):[[t,i],[r,u]]}};return e.extent([[0,0],[960,500]])},(n.geo.conicEqualArea=function(){return ss(wv)}).raw=wv,n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},n.geo.albersUsa=function(){function r(n){var t=n[0],i=n[1];return u=null,s(t,i),u||(h(t,i),u)||c(t,i),u}var u,s,h,c,i=n.geo.albers(),f=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),e=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(n,t){u=[n,t]}};return r.invert=function(n){var u=i.scale(),o=i.translate(),t=(n[0]-o[0])/u,r=(n[1]-o[1])/u;return(r>=.12&&.234>r&&t>=-.425&&-.214>t?f:r>=.166&&.234>r&&t>=-.214&&-.115>t?e:i).invert(n)},r.stream=function(n){var t=i.stream(n),r=f.stream(n),u=e.stream(n);return{point:function(n,i){t.point(n,i),r.point(n,i),u.point(n,i)},sphere:function(){t.sphere(),r.sphere(),u.sphere()},lineStart:function(){t.lineStart(),r.lineStart(),u.lineStart()},lineEnd:function(){t.lineEnd(),r.lineEnd(),u.lineEnd()},polygonStart:function(){t.polygonStart(),r.polygonStart(),u.polygonStart()},polygonEnd:function(){t.polygonEnd(),r.polygonEnd(),u.polygonEnd()}}},r.precision=function(n){return arguments.length?(i.precision(n),f.precision(n),e.precision(n),r):i.precision()},r.scale=function(n){return arguments.length?(i.scale(n),f.scale(.35*n),e.scale(n),r.translate(i.translate())):i.scale()},r.translate=function(n){if(!arguments.length)return i.translate();var u=i.scale(),l=+n[0],a=+n[1];return s=i.translate(n).clipExtent([[l-.455*u,a-.238*u],[l+.455*u,a+.238*u]]).stream(o).point,h=f.translate([l-.307*u,a+.201*u]).clipExtent([[l-.425*u+t,a+.12*u+t],[l-.214*u-t,a+.234*u-t]]).stream(o).point,c=e.translate([l-.205*u,a+.212*u]).clipExtent([[l-.214*u+t,a+.166*u+t],[l-.115*u-t,a+.234*u-t]]).stream(o).point,r},r.scale(1070)};var ac,vc,we,be,ke,de,ei={point:l,lineStart:l,lineEnd:l,polygonStart:function(){vc=0,ei.lineStart=rg},polygonEnd:function(){ei.lineStart=ei.lineEnd=ei.point=l,ac+=r(vc/2)}},grt={point:ug,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},ut={point:ai,lineStart:kv,lineEnd:dv,polygonStart:function(){ut.lineStart=eg},polygonEnd:function(){ut.point=ai,ut.lineStart=kv,ut.lineEnd=dv}};n.geo.path=function(){function t(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),f&&f.valid||(f=u(i)),n.geo.stream(t,f)),i.result()}function e(){return f=null,t}var o,s,u,i,f,r=4.5;return t.area=function(t){return ac=0,n.geo.stream(t,u(ei)),ac},t.centroid=function(t){return wi=bi=wt=ri=ui=ht=sr=hr=fi=0,n.geo.stream(t,u(ut)),fi?[sr/fi,hr/fi]:ht?[ri/ht,ui/ht]:wt?[wi/wt,bi/wt]:[NaN,NaN]},t.bounds=function(t){return ke=de=-(we=be=1/0),n.geo.stream(t,u(grt)),[[we,be],[ke,de]]},t.projection=function(n){return arguments.length?(u=(o=n)?n.stream||sg(n):v,e()):o},t.context=function(n){return arguments.length?(i=null==(s=n)?new fg:new og(n),"function"!=typeof r&&i.pointRadius(r),e()):s},t.pointRadius=function(n){return arguments.length?(r="function"==typeof n?n:(i.pointRadius(+n),+n),t):r},t.projection(n.geo.albersUsa()).context(null)},n.geo.transform=function(n){return{stream:function(t){var r=new ny(t),i;for(i in n)r[i]=n[i];return r}}},ny.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},n.geo.projection=ni,n.geo.projectionMutator=hs,(n.geo.equirectangular=function(){return ni(yr)}).raw=yr.invert=yr,n.geo.rotation=function(n){function t(t){return t=n(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t}return n=cs(n[0]%360*u,n[1]*u,n.length>2?n[2]*u:0),t.invert=function(t){return t=n.invert(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t},t},ry.invert=yr,n.geo.circle=function(){function n(){var n="function"==typeof t?t.apply(this,arguments):t,f=cs(-n[0]*u,-n[1]*u,0).invert,i=[];return r(null,null,1,{point:function(n,t){i.push(n=f(n,t)),n[0]*=s,n[1]*=s}}),{type:"Polygon",coordinates:[i]}}var i,r,t=[0,0],f=6;return n.origin=function(i){return arguments.length?(t=i,n):t},n.angle=function(t){return arguments.length?(r=ls((i=+t)*u,f*u),n):i},n.precision=function(t){return arguments.length?(r=ls(i*u,(f=+t)*u),n):f},n.angle(90)},n.geo.distance=function(n,t){var i,f=(t[0]-n[0])*u,e=n[1]*u,o=t[1]*u,a=Math.sin(f),s=Math.cos(f),h=Math.sin(e),c=Math.cos(e),l=Math.sin(o),r=Math.cos(o);return Math.atan2(Math.sqrt((i=r*a)*i+(i=c*l-h*r*s)*i),h*l+c*r*s)},n.geo.graticule=function(){function i(){return{type:"MultiLineString",coordinates:d()}}function d(){return n.range(Math.ceil(f/v)*v,u,v).map(b).concat(n.range(Math.ceil(o/y)*y,e,y).map(k)).concat(n.range(Math.ceil(h/a)*a,s,a).filter(function(n){return r(n%v)>t}).map(g)).concat(n.range(Math.ceil(l/w)*w,c,w).filter(function(n){return r(n%y)>t}).map(nt))}var s,h,u,f,c,l,e,o,g,nt,b,k,a=10,w=a,v=90,y=360,p=2.5;return i.lines=function(){return d().map(function(n){return{type:"LineString",coordinates:n}})},i.outline=function(){return{type:"Polygon",coordinates:[b(f).concat(k(e).slice(1),b(u).reverse().slice(1),k(o).reverse().slice(1))]}},i.extent=function(n){return arguments.length?i.majorExtent(n).minorExtent(n):i.minorExtent()},i.majorExtent=function(n){return arguments.length?(f=+n[0][0],u=+n[1][0],o=+n[0][1],e=+n[1][1],f>u&&(n=f,f=u,u=n),o>e&&(n=o,o=e,e=n),i.precision(p)):[[f,o],[u,e]]},i.minorExtent=function(n){return arguments.length?(h=+n[0][0],s=+n[1][0],l=+n[0][1],c=+n[1][1],h>s&&(n=h,h=s,s=n),l>c&&(n=l,l=c,c=n),i.precision(p)):[[h,l],[s,c]]},i.step=function(n){return arguments.length?i.majorStep(n).minorStep(n):i.minorStep()},i.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],i):[v,y]},i.minorStep=function(n){return arguments.length?(a=+n[0],w=+n[1],i):[a,w]},i.precision=function(n){return arguments.length?(p=+n,g=sy(l,c,90),nt=hy(h,s,p),b=sy(o,e,90),k=hy(f,u,p),i):p},i.majorExtent([[-180,-90+t],[180,90-t]]).minorExtent([[-180,-80-t],[180,80+t]])},n.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[u||i.apply(this,arguments),f||r.apply(this,arguments)]}}var u,f,i=as,r=vs;return t.distance=function(){return n.geo.distance(u||i.apply(this,arguments),f||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,u="function"==typeof n?null:n,t):i},t.target=function(n){return arguments.length?(r=n,f="function"==typeof n?null:n,t):r},t.precision=function(){return arguments.length?t:0},t},n.geo.interpolate=function(n,t){return hg(n[0]*u,n[1]*u,t[0]*u,t[1]*u)},n.geo.length=function(t){return yc=0,n.geo.stream(t,ki),yc},ki={sphere:l,point:l,lineStart:cg,lineEnd:l,polygonStart:l,polygonEnd:l},pc=pr(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)}),(n.geo.azimuthalEqualArea=function(){return ni(pc)}).raw=pc,wc=pr(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},v),(n.geo.azimuthalEquidistant=function(){return ni(wc)}).raw=wc,(n.geo.conicConformal=function(){return ss(cy)}).raw=cy,(n.geo.conicEquidistant=function(){return ss(ly)}).raw=ly,bc=pr(function(n){return 1/n},Math.atan),(n.geo.gnomonic=function(){return ni(bc)}).raw=bc,of.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-h]},(n.geo.mercator=function(){return ay(of)}).raw=of,kc=pr(function(){return 1},Math.asin),(n.geo.orthographic=function(){return ni(kc)}).raw=kc,dc=pr(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)}),(n.geo.stereographic=function(){return ni(dc)}).raw=dc,ys.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-h]},(n.geo.transverseMercator=function(){var n=ay(ys),i=n.center,t=n.rotate;return n.center=function(n){return n?i([-n[1],n[0]]):(n=i(),[n[1],-n[0]])},n.rotate=function(n){return n?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90])}).raw=ys,n.geom={},n.geom.hull=function(n){function t(n){if(n.length<3)return[];for(var l=o(i),a=o(r),h=n.length,u=[],c=[],t=0;h>t;t++)u.push([+l.call(this,n[t],t),+a.call(this,n[t],t),t]);for(u.sort(lg),t=0;h>t;t++)c.push([u[t][0],-u[t][1]]);var f=vy(u),e=vy(c),v=e[0]===f[0],y=e[e.length-1]===f[f.length-1],s=[];for(t=f.length-1;t>=0;--t)s.push(n[u[f[t]][2]]);for(t=+v;t<e.length-y;++t)s.push(n[u[e[t]][2]]);return s}var i=ur,r=wr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(r=n,t):r},t)},n.geom.polygon=function(n){return ne(n,su),n},su=n.geom.polygon.prototype=[],su.area=function(){for(var t,i=-1,r=this.length,n=this[r-1],u=0;++i<r;)t=n,n=this[i],u+=t[1]*n[0]-t[0]*n[1];return.5*u},su.centroid=function(n){var i,r,u=-1,f=this.length,e=0,o=0,t=this[f-1];for(arguments.length||(n=-1/(6*this.area()));++u<f;)i=t,t=this[u],r=i[0]*t[1]-t[0]*i[1],e+=(i[0]+t[0])*r,o+=(i[1]+t[1])*r;return[e*n,o*n]},su.clip=function(n){for(var f,e,o,t,i,r,s=yy(n),h=-1,c=this.length-yy(this),u=this[c-1];++h<c;){for(f=n.slice(),n.length=0,t=this[h],i=f[(o=f.length-s)-1],e=-1;++e<o;)r=f[e],ps(r,u,t)?(ps(i,u,t)||n.push(ws(i,r,u,t)),n.push(r)):ps(i,u,t)&&n.push(ws(i,r,u,t)),i=r;s&&n.push(n[0]),u=t}return n},nl=[],tl=[],by.prototype.prepare=function(){for(var t,n=this.edges,i=n.length;i--;)t=n[i].edge,t.b&&t.a||n.splice(i,1);return n.sort(ky),n.length},hf.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ks.prototype={insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=gy(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)r=i.U,i===r.L?(u=r.R,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(kr(this,i),n=i,i=n.U),i.C=!1,r.C=!0,dr(this,r))):(u=r.L,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(dr(this,i),n=i,i=n.U),i.C=!1,r.C=!0,kr(this,r))),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,r,e,i=n.U,f=n.L,u=n.R;if(r=f?u?gy(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,kr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,dr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,kr(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,dr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,kr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,dr(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},n.geom.voronoi=function(n){function i(n){var o=new Array(n.length),t=r[0][0],i=r[0][1],f=r[1][0],e=r[1][1];return ds(u(n),r).cells.forEach(function(r,u){var h=r.edges,s=r.site,c=o[u]=h.length?h.map(function(n){var t=n.start();return[t.x,t.y]}):s.x>=t&&s.x<=f&&s.y>=i&&s.y<=e?[[t,e],[f,e],[f,i],[t,i]]:[];c.point=n[u]}),o}function u(n){return n.map(function(n,i){return{x:Math.round(s(n,i)/t)*t,y:Math.round(h(n,i)/t)*t,i:i}})}var f=ur,e=wr,s=f,h=e,r=cu;return n?i(n):(i.links=function(n){return ds(u(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},i.triangles=function(n){var t=[];return ds(u(n)).cells.forEach(function(i,r){for(var l,e,o=i.site,s=i.edges.sort(ky),h=-1,c=s.length,u=s[c-1].edge,f=u.l===o?u.r:u.l;++h<c;)l=u,e=f,u=s[h].edge,f=u.l===o?u.r:u.l,r<e.i&&r<f.i&&tn(o,e,f)<0&&t.push([n[r],n[e.i],n[f.i]])}),t},i.x=function(n){return arguments.length?(s=o(f=n),i):f},i.y=function(n){return arguments.length?(h=o(e=n),i):e},i.clipExtent=function(n){return arguments.length?(r=null==n?cu:n,i):r===cu?null:r},i.size=function(n){return arguments.length?i.clipExtent(n&&[[0,0],n]):r===cu?null:r&&r[1]},i)},cu=[[-1e6,-1e6],[1e6,1e6]],n.geom.delaunay=function(t){return n.geom.voronoi().triangles(t)},n.geom.quadtree=function(n,t,i,u,f){function e(n){function it(n,t,i,u,f,e,o,s){var h,c,l;isNaN(i)||isNaN(u)||(n.leaf?(h=n.x,c=n.y,null!=h?r(h-i)+r(c-u)<.01?nt(n,t,i,u,f,e,o,s):(l=n.point,n.x=n.y=n.point=null,nt(n,l,h,c,f,e,o,s),nt(n,t,i,u,f,e,o,s)):(n.x=i,n.y=u,n.point=t)):nt(n,t,i,u,f,e,o,s))}function nt(n,t,i,r,u,f,e,o){var s=.5*(u+e),h=.5*(f+o),c=i>=s,l=r>=h,a=l<<1|c;n.leaf=!1,n=n.nodes[a]||(n.nodes[a]=np()),c?u=s:e=s,l?f=h:o=h,it(n,t,i,r,u,f,e,o)}var l,d,g,e,tt,a,v,y,p,ft=o(s),et=o(h),b,k,rt,ut,w;if(null!=t)a=t,v=i,y=u,p=f;else if(y=p=-(a=v=1/0),d=[],g=[],tt=n.length,c)for(e=0;tt>e;++e)l=n[e],l.x<a&&(a=l.x),l.y<v&&(v=l.y),l.x>y&&(y=l.x),l.y>p&&(p=l.y),d.push(l.x),g.push(l.y);else for(e=0;tt>e;++e)b=+ft(l=n[e],e),k=+et(l,e),a>b&&(a=b),v>k&&(v=k),b>y&&(y=b),k>p&&(p=k),d.push(b),g.push(k);if(rt=y-a,ut=p-v,rt>ut?p=v+rt:y=a+ut,w=np(),w.add=function(n){it(w,n,+ft(n,++e),+et(n,e),a,v,y,p)},w.visit=function(n){gr(n,w,a,v,y,p)},w.find=function(n){return fn(w,n[0],n[1],a,v,y,p)},e=-1,null==t){for(;++e<tt;)it(w,n[e],d[e],g[e],a,v,y,p);--e}else n.forEach(w.add);return d=g=n=l=null,w}var c,s=ur,h=wr;return(c=arguments.length)?(s=rn,h=un,3===c&&(f=i,u=t,i=t=0),e(n)):(e.x=function(n){return arguments.length?(s=n,e):s},e.y=function(n){return arguments.length?(h=n,e):h},e.extent=function(n){return arguments.length?(null==n?t=i=u=f=null:(t=+n[0][0],i=+n[0][1],u=+n[1][0],f=+n[1][1]),e):null==t?null:[[t,i],[u,f]]},e.size=function(n){return arguments.length?(null==n?t=i=u=f=null:(t=i=0,u=+n[0],f=+n[1]),e):null==t?null:[u-t,f-i]},e)},n.interpolateRgb=gs,n.interpolateObject=tp,n.interpolateNumber=yt,n.interpolateString=ip,ge=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(ge.source,"g"),n.interpolate=vi,n.interpolators=[function(n,t){var i=typeof t;return("string"===i?fu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?gs:ip:t instanceof hi?gs:Array.isArray(t)?lf:"object"===i&&isNaN(t)?tp:yt)(n,t)}],n.interpolateArray=lf;var lb=function(){return v},nut=n.map({linear:lb,poly:cn,quad:function(){return on},cubic:function(){return sn},sin:function(){return ln},exp:function(){return an},circle:function(){return vn},elastic:yn,back:pn,bounce:function(){return wn}}),tut=n.map({"in":v,out:rp,"in-out":up,"out-in":function(n){return up(rp(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return i=nut.get(i)||lb,r=tut.get(r)||v,en(r(i.apply(null,dw.call(arguments,1))))},n.interpolateHcl=bn,n.interpolateHsl=kn,n.interpolateLab=dn,n.interpolateRound=fp,n.transform=function(t){var i=p.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(n){if(null!=n){i.setAttribute("transform",n);var t=i.transform.baseVal.consolidate()}return new ep(t?t.matrix:ab)})(t)},ep.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"},ab={a:1,b:0,c:0,d:1,e:0,f:0},n.interpolateTransform=hp,n.layout={},n.layout.bundle=function(){return function(n){for(var t=[],i=-1,r=n.length;++i<r;)t.push(itt(n[i]));return t}},n.layout.chord=function(){function c(){var v,t,b,c,a,k={},d=[],it=n.range(r),nt=[],p,w;for(i=[],u=[],v=0,c=-1;++c<r;){for(t=0,a=-1;++a<r;)t+=f[c][a];d.push(t),nt.push(n.range(r)),v+=t}for(e&&it.sort(function(n,t){return e(d[n],d[t])}),o&&nt.forEach(function(n,t){n.sort(function(n,i){return o(f[t][n],f[t][i])})}),v=(g-h*r)/v,t=0,c=-1;++c<r;){for(b=t,a=-1;++a<r;){var y=it[c],tt=nt[y][a],rt=f[y][tt],ut=t,ft=t+=rt*v;k[y+"-"+tt]={index:y,subindex:tt,startAngle:ut,endAngle:ft,value:rt}}u[y]={index:y,startAngle:b,endAngle:t,value:(t-b)/v},t+=h}for(c=-1;++c<r;)for(a=c-1;++a<r;)p=k[c+"-"+a],w=k[a+"-"+c],(p.value||w.value)&&i.push(p.value<w.value?{source:w,target:p}:{source:p,target:w});s&&l()}function l(){i.sort(function(n,t){return s((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var i,u,f,r,e,o,s,t={},h=0;return t.matrix=function(n){return arguments.length?(r=(f=n)&&f.length,i=u=null,t):f},t.padding=function(n){return arguments.length?(h=n,i=u=null,t):h},t.sortGroups=function(n){return arguments.length?(e=n,i=u=null,t):e},t.sortSubgroups=function(n){return arguments.length?(o=n,i=null,t):o},t.sortChords=function(n){return arguments.length?(s=n,i&&l(),t):s},t.chords=function(){return i||c(),i},t.groups=function(){return u||c(),u},t},n.layout.force=function(){function d(n){return function(t,i,r,u){var f;if(t.point!==n){var o=t.cx-n.x,s=t.cy-n.y,h=u-i,e=o*o+s*s;if(e>h*h/k)return w>e&&(f=t.charge/e,n.px-=o*f,n.py-=s*f),!0;t.point&&e&&w>e&&(f=t.pointCharge/e,n.px-=o*f,n.py-=s*f)}return!t.charge}}function g(i){i.px=n.event.x,i.py=n.event.y,t.resume()}var h,r,c,l,a,t={},y=n.dispatch("start","tick","end"),f=[1,1],p=.9,o=iut,s=rut,e=-30,w=uut,b=.1,k=.64,i=[],u=[];return t.tick=function(){if((r*=.99)<.005)return y.end({type:"end",alpha:r=0}),!0;for(var tt,t,w,g,k,s,h,v,nt=i.length,it=u.length,o=0;it>o;++o)t=u[o],w=t.source,g=t.target,h=g.x-w.x,v=g.y-w.y,(k=h*h+v*v)&&(k=r*l[o]*((k=Math.sqrt(k))-c[o])/k,h*=k,v*=k,g.x-=h*(s=w.weight/(g.weight+w.weight)),g.y-=v*s,w.x+=h*(s=1-s),w.y+=v*s);if((s=r*b)&&(h=f[0]/2,v=f[1]/2,o=-1,s))for(;++o<nt;)t=i[o],t.x+=(h-t.x)*s,t.y+=(v-t.y)*s;if(e)for(lp(tt=n.geom.quadtree(i),r,a),o=-1;++o<nt;)(t=i[o]).fixed||tt.visit(d(t));for(o=-1;++o<nt;)t=i[o],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*p,t.y-=(t.py-(t.py=t.y))*p);y.tick({type:"tick",alpha:r})},t.nodes=function(n){return arguments.length?(i=n,t):i},t.links=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(f=n,t):f},t.linkDistance=function(n){return arguments.length?(o="function"==typeof n?n:+n,t):o},t.distance=t.linkDistance,t.linkStrength=function(n){return arguments.length?(s="function"==typeof n?n:+n,t):s},t.friction=function(n){return arguments.length?(p=+n,t):p},t.charge=function(n){return arguments.length?(e="function"==typeof n?n:+n,t):e},t.chargeDistance=function(n){return arguments.length?(w=n*n,t):Math.sqrt(w)},t.gravity=function(n){return arguments.length?(b=+n,t):b},t.theta=function(n){return arguments.length?(k=n*n,t):Math.sqrt(k)},t.alpha=function(i){return arguments.length?(i=+i,r?r=i>0?i:0:i>0&&(y.start({type:"start",alpha:r=i}),n.timer(t.tick)),t):r},t.start=function(){function p(t,i){var f;if(!h){for(h=new Array(v),r=0;v>r;++r)h[r]=[];for(r=0;y>r;++r)f=u[r],h[f.source.index].push(f.target),h[f.target.index].push(f.source)}for(var e,o=h[n],r=-1,s=o.length;++r<s;)if(!isNaN(e=o[r][t]))return e;return Math.random()*i}for(var h,r,v=i.length,y=u.length,w=f[0],b=f[1],n=0;v>n;++n)(r=i[n]).index=n,r.weight=0;for(n=0;y>n;++n)r=u[n],"number"==typeof r.source&&(r.source=i[r.source]),"number"==typeof r.target&&(r.target=i[r.target]),++r.source.weight,++r.target.weight;for(n=0;v>n;++n)r=i[n],isNaN(r.x)&&(r.x=p("x",w)),isNaN(r.y)&&(r.y=p("y",b)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(c=[],"function"==typeof o)for(n=0;y>n;++n)c[n]=+o.call(this,u[n],n);else for(n=0;y>n;++n)c[n]=o;if(l=[],"function"==typeof s)for(n=0;y>n;++n)l[n]=+s.call(this,u[n],n);else for(n=0;y>n;++n)l[n]=s;if(a=[],"function"==typeof e)for(n=0;v>n;++n)a[n]=+e.call(this,i[n],n);else for(n=0;v>n;++n)a[n]=e;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){return h||(h=n.behavior.drag().origin(v).on("dragstart.force",utt).on("drag.force",g).on("dragend.force",ftt)),arguments.length?void this.on("mouseover.force",ett).on("mouseout.force",ott).call(h):h},n.rebind(t,y,"on")};var iut=20,rut=1,uut=1/0;n.layout.hierarchy=function(){function n(u){var f,h=[u],c=[],o,e,s;for(u.depth=0;null!=(f=h.pop());)if(c.push(f),(e=r.call(n,f,f.depth))&&(o=e.length)){for(;--o>=0;)h.push(s=e[o]),s.parent=f,s.depth=f.depth+1;t&&(f.value=0),f.children=e}else t&&(f.value=+t.call(n,f,f.depth)||0),delete f.children;return et(u,function(n){var r,u;i&&(r=n.children)&&r.sort(i),t&&(u=n.parent)&&(u.value+=n.value)}),c}var i=ctt,r=stt,t=htt;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(i){return arguments.length?(t=i,n):t},n.revalue=function(i){return t&&(tu(i,function(n){n.children&&(n.value=0)}),et(i,function(i){var r;i.children||(i.value=+t.call(n,i,i.depth)||0),(r=i.parent)&&(r.value+=i.value)})),i},n},n.layout.partition=function(){function r(n,t,i,u){var f=n.children,o,s,h,e;if(n.x=t,n.y=n.depth*u,n.dx=i,n.dy=u,f&&(o=f.length))for(e=-1,i=n.value?i/n.value:0;++e<o;)r(s=f[e],t,h=s.value*i,u),t+=h}function u(n){var t=n.children,i=0,f,r;if(t&&(f=t.length))for(r=-1;++r<f;)i=Math.max(i,u(t[r]));return 1+i}function i(n,i){var e=f.call(this,n,i);return r(e[0],0,t[0],t[1]/u(e[0])),e}var f=n.layout.hierarchy(),t=[1,1];return i.size=function(n){return arguments.length?(t=n,i):t},nu(i,f)},n.layout.pie=function(){function t(o){var a,h=o.length,s=o.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof r?r.apply(this,arguments):r),l=("function"==typeof u?u.apply(this,arguments):u)-c,v=Math.min(Math.abs(l)/h,+("function"==typeof f?f.apply(this,arguments):f)),y=v*(0>l?-1:1),b=(l-h*y)/n.sum(s),p=n.range(h),w=[];return null!=i&&p.sort(i===il?function(n,t){return s[t]-s[n]}:function(n,t){return i(o[n],o[t])}),p.forEach(function(n){w[n]={data:o[n],value:a=s[n],startAngle:c,endAngle:c+=a*b+y,padAngle:v}}),w}var e=Number,i=il,r=0,u=g,f=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(n){return arguments.length?(i=n,t):i},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(u=n,t):u},t.padAngle=function(n){return arguments.length?(f=n,t):f},t},il={},n.layout.stack=function(){function t(s,h){var p,v,c,w,b,k;if(!(p=s.length))return s;var a=s.map(function(n,i){return r.call(t,n,i)}),l=a.map(function(n){return n.map(function(n,i){return[e.call(t,n,i),o.call(t,n,i)]})}),y=u.call(t,l,h);for(a=n.permute(a,y),l=n.permute(l,y),b=f.call(t,l,h),k=a[0].length,c=0;k>c;++c)for(i.call(t,a[0][c],w=b[c],l[0][c][1]),v=1;p>v;++v)i.call(t,a[v][c],w+=l[v-1][c][1],l[v][c][1]);return s}var r=v,u=nh,f=th,i=ytt,e=att,o=vtt;return t.values=function(n){return arguments.length?(r=n,t):r},t.order=function(n){return arguments.length?(u="function"==typeof n?n:vb.get(n)||nh,t):u},t.offset=function(n){return arguments.length?(f="function"==typeof n?n:yb.get(n)||th,t):f},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(i=n,t):i},t},vb=n.map({"inside-out":function(t){for(var i,u=t.length,f=t.map(ptt),e=t.map(wtt),l=n.range(u).sort(function(n,t){return f[n]-f[t]}),o=0,s=0,h=[],c=[],r=0;u>r;++r)i=l[r],s>o?(o+=e[i],h.push(i)):(s+=e[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},"default":nh}),yb=n.map({silhouette:function(n){for(var r,i,s=n.length,f=n[0].length,e=[],u=0,o=[],t=0;f>t;++t){for(r=0,i=0;s>r;r++)i+=n[r][t][1];i>u&&(u=i),e.push(i)}for(t=0;f>t;++t)o[t]=(u-e[t])/2;return o},wiggle:function(n){var i,t,r,u,h,c,f,e,o,a=n.length,l=n[0],v=l.length,s=[];for(s[0]=e=o=0,t=1;v>t;++t){for(i=0,u=0;a>i;++i)u+=n[i][t][1];for(i=0,h=0,f=l[t][0]-l[t-1][0];a>i;++i){for(r=0,c=(n[i][t][1]-n[i][t-1][1])/(2*f);i>r;++r)c+=(n[r][t][1]-n[r][t-1][1])/f;h+=c*n[i][t][1]}s[t]=e-=u?h/u*f:0,o>e&&(o=e)}for(t=0;v>t;++t)s[t]-=o;return s},expand:function(n){for(var t,r,u=n.length,f=n[0].length,o=1/u,e=[],i=0;f>i;++i){for(t=0,r=0;u>t;t++)r+=n[t][i][1];if(r)for(t=0;u>t;t++)n[t][i][1]/=r;else for(t=0;u>t;t++)n[t][i][1]=o}for(i=0;f>i;++i)e[i]=0;return e},zero:th}),n.layout.histogram=function(){function t(t,e){for(var o,s,l=[],h=t.map(r,this),a=u.call(this,h,e),c=f.call(this,a,h,e),e=-1,y=h.length,v=c.length-1,p=i?1:1/y;++e<v;)o=l[e]=[],o.dx=c[e+1]-(o.x=c[e]),o.y=0;if(v>0)for(e=-1;++e<y;)s=h[e],s>=a[0]&&s<=a[1]&&(o=l[n.bisect(c,s,1,v)-1],o.y+=p,o.push(t[e]));return l}var i=!0,r=Number,u=dtt,f=ktt;return t.value=function(n){return arguments.length?(r=n,t):r},t.range=function(n){return arguments.length?(u=o(n),t):u},t.bins=function(n){return arguments.length?(f="number"==typeof n?function(t){return ap(t,n)}:o(n),t):f},t.frequency=function(n){return arguments.length?(i=!!n,t):i},t},n.layout.pack=function(){function i(n,i){var c=f.call(this,n,i),e=c[0],o=u[0],s=u[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t},h;return(e.x=e.y=0,et(e,function(n){n.r=+l(n.value)}),et(e,pp),r)&&(h=r*(t?1:Math.max(2*e.r/o,2*e.r/s))/2,et(e,function(n){n.r+=h}),et(e,pp),et(e,function(n){n.r-=h})),wp(e,o/2,s/2,t?1:1/Math.max(2*e.r/o,2*e.r/s)),c}var t,f=n.layout.hierarchy().sort(gtt),r=0,u=[1,1];return i.size=function(n){return arguments.length?(u=n,i):u},i.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,i):t},i.padding=function(n){return arguments.length?(r=+n,i):r},nu(i,f)},n.layout.tree=function(){function i(n,i){var p=e.call(this,n,i),c=p[0],v=o(c);if(et(v,s),v.parent.m=-v.z,tu(v,h),u)tu(c,f);else{var l=c,a=c,y=c;tu(c,function(n){n.x<l.x&&(l=n),n.x>a.x&&(a=n),n.depth>y.depth&&(y=n)});var w=r(l,a)/2-l.x,b=t[0]/(a.x+r(a,l)/2+w),k=t[1]/(y.depth||1);tu(c,function(n){n.x=(n.x+w)*b,n.y=n.depth*k})}return p}function o(n){for(var u,f={A:null,children:[n]},e=[f];null!=(u=e.pop());)for(var i,r=u.children,t=0,o=r.length;o>t;++t)e.push((r[t]=i={_:r[t],parent:u,children:(i=r[t].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:t}).a=i);return f.children[0]}function s(n){var i=n.children,f=n.parent.children,t=n.i?f[n.i-1]:null,u;i.length?(rit(n),u=(i[0].z+i[i.length-1].z)/2,t?(n.z=t.z+r(n._,t._),n.m=n.z-u):n.z=u):t&&(n.z=t.z+r(n._,t._)),n.parent.A=c(n,t,n.parent.A||f[0])}function h(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function c(n,t,i){if(t){for(var s,u=n,e=n,f=t,o=u.parent.children[0],h=u.m,c=e.m,l=f.m,a=o.m;f=uh(f),u=rh(u),f&&u;)o=rh(o),e=uh(e),e.a=n,s=f.z+l-u.z-h+r(f._,u._),s>0&&(iit(uit(f,n,i),n,s),h+=s,c+=s),l+=f.m,h+=u.m,a+=o.m,c+=e.m;f&&!uh(e)&&(e.t=f,e.m+=l-c),u&&!rh(o)&&(o.t=u,o.m+=h-a,i=n)}return i}function f(n){n.x*=t[0],n.y=n.depth*t[1]}var e=n.layout.hierarchy().sort(null).value(null),r=kp,t=[1,1],u=null;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n)?f:null,i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null==(t=n)?null:f,i):u?t:null},nu(i,e)},n.layout.cluster=function(){function i(n,i){var o,c=f.call(this,n,i),e=c[0],a=0;et(e,function(n){var t=n.children;t&&t.length?(n.x=eit(t),n.y=fit(t)):(n.x=o?a+=r(n,o):0,n.y=0,o=n)});var s=dp(e),h=gp(e),l=s.x-r(s,h)/2,v=h.x+r(h,s)/2;return et(e,u?function(n){n.x=(n.x-e.x)*t[0],n.y=(e.y-n.y)*t[1]}:function(n){n.x=(n.x-l)/(v-l)*t[0],n.y=(1-(e.y?n.y/e.y:1))*t[1]}),c}var f=n.layout.hierarchy().sort(null).value(null),r=kp,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n),i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null!=(t=n),i):u?t:null},nu(i,f)},n.layout.treemap=function(){function o(n,t){for(var r,i,u=-1,f=n.length;++u<f;)i=(r=n[u]).value*(0>t?0:t),r.area=isNaN(i)||0>=i?0:i}function a(n){var u=n.children;if(u&&u.length){var l,v,y,r=c(n),t=[],f=u.slice(),h=1/0,e="slice"===i?r.dx:"dice"===i?r.dy:"slice-dice"===i?1&n.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(o(f,r.dx*r.dy/n.value),t.area=0;(y=f.length)>0;)t.push(l=f[y-1]),t.area+=l.area,"squarify"!==i||(v=p(t,e))<=h?(f.pop(),h=v):(t.area-=t.pop().area,s(t,e,r,!1),e=Math.min(r.dx,r.dy),t.length=t.area=0,h=1/0);t.length&&(s(t,e,r,!0),t.length=t.area=0),u.forEach(a)}}function v(n){var u=n.children;if(u&&u.length){var i,r=c(n),f=u.slice(),t=[];for(o(f,r.dx*r.dy/n.value),t.area=0;i=f.pop();)t.push(i),t.area+=i.area,null!=i.z&&(s(t,i.z?r.dx:r.dy,r,!f.length),t.length=t.area=0);u.forEach(v)}}function p(n,t){for(var i,r=n.area,u=0,f=1/0,o=-1,s=n.length;++o<s;)(i=n[o].area)&&(f>i&&(f=i),i>u&&(u=i));return r*r,t*=t,r?Math.max(t*u*e/r,r/(t*f*e)):1/0}function s(n,t,i,r){var f,h=-1,c=n.length,o=i.x,s=i.y,e=t?u(n.area/t):0;if(t==i.dx){for((r||e>i.dy)&&(e=i.dy);++h<c;)f=n[h],f.x=o,f.y=s,f.dy=e,o+=f.dx=Math.min(i.x+i.dx-o,e?u(f.area/e):0);f.z=!0,f.dx+=i.x+i.dx-o,i.y+=e,i.dy-=e}else{for((r||e>i.dx)&&(e=i.dx);++h<c;)f=n[h],f.x=o,f.y=s,f.dx=e,s+=f.dy=Math.min(i.y+i.dy-s,e?u(f.area/e):0);f.z=!1,f.dy+=i.y+i.dy-s,i.x+=e,i.dx-=e}}function t(n){var i=r||h(n),t=i[0];return t.x=0,t.y=0,t.dx=f[0],t.dy=f[1],r&&h.revalue(t),o([t],t.dx*t.dy/t.value),(r?v:a)(t),l&&(r=i),i}var r,h=n.layout.hierarchy(),u=Math.round,f=[1,1],y=null,c=fh,l=!1,i="squarify",e=.5*(1+Math.sqrt(5));return t.size=function(n){return arguments.length?(f=n,t):f},t.padding=function(n){function u(i){var r=n.call(t,i,i.depth);return null==r?fh(i):nw(i,"number"==typeof r?[r,r,r,r]:r)}function i(t){return nw(t,n)}if(!arguments.length)return y;var r;return c=null==(y=n)?fh:"function"==(r=typeof n)?u:"number"===r?(n=[n,n,n,n],i):i,t},t.round=function(n){return arguments.length?(u=n?Math.round:Number,t):u!=Number},t.sticky=function(n){return arguments.length?(l=n,r=null,t):l},t.ratio=function(n){return arguments.length?(e=n,t):e},t.mode=function(n){return arguments.length?(i=n+"",t):i},nu(t,h)},n.random={normal:function(n,t){var i=arguments.length;return 2>i&&(t=1),1>i&&(n=0),function(){var r,u,i;do r=2*Math.random()-1,u=2*Math.random()-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=n.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(n){return function(){for(var t=0,i=0;n>i;i++)t+=Math.random();return t}}},n.scale={},pb={floor:v,ceil:v},n.scale.linear=function(){return tw([0,1],[0,1],vi,!1)},wb={s:1,g:1,p:1,r:1,e:1},n.scale.log=function(){return rw(n.scale.linear().domain([0,1]),10,!0,[1,10])},rl=n.format(".0e"),bb={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}},n.scale.pow=function(){return uw(n.scale.linear(),1,[0,1])},n.scale.sqrt=function(){return n.scale.pow().exponent(.5)},n.scale.ordinal=function(){return fw([],{t:"range",a:[[]]})},n.scale.category10=function(){return n.scale.ordinal().range(fut)},n.scale.category20=function(){return n.scale.ordinal().range(eut)},n.scale.category20b=function(){return n.scale.ordinal().range(out)},n.scale.category20c=function(){return n.scale.ordinal().range(sut)};var fut=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pu),eut=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pu),out=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pu),sut=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pu);n.scale.quantile=function(){return ew([],[])},n.scale.quantize=function(){return ow(0,1,[0,1])},n.scale.threshold=function(){return sw([.5],[0,1])},n.scale.identity=function(){return hw([0,1])},n.svg={},n.svg.arc=function(){function n(){var n=Math.max(0,+t.apply(this,arguments)),o=Math.max(0,+i.apply(this,arguments)),g=u.apply(this,arguments)-h,nt=e.apply(this,arguments)-h,ei=Math.abs(nt-g),a=g>nt?0:1,wt,bt,kt,dt;if(n>o&&(et=o,o=n,n=et),ei>=krt)return l(o,a)+(n?l(n,1-a):"")+"Z";var et,ot,yt,pt,v,y,p,rt,b,k,d,st,ht=0,ut=0,w=[];if(((pt=(+c.apply(this,arguments)||0)/2)&&(yt=r===lu?Math.sqrt(n*n+o*o):+r.apply(this,arguments),a||(ut*=-1),o&&(ut=gt(yt/o*Math.sin(pt))),n&&(ht=gt(yt/n*Math.sin(pt)))),o)?(v=o*Math.cos(g+ut),y=o*Math.sin(g+ut),p=o*Math.cos(nt-ut),rt=o*Math.sin(nt-ut),wt=Math.abs(nt-g-2*ut)<=f?0:1,ut&&pf(v,y,p,rt)===a^wt&&(bt=(g+nt)/2,v=o*Math.cos(bt),y=o*Math.sin(bt),p=rt=null)):v=y=0,n?(b=n*Math.cos(nt-ht),k=n*Math.sin(nt-ht),d=n*Math.cos(g+ht),st=n*Math.sin(g+ht),kt=Math.abs(g-nt+2*ht)<=f?0:1,ht&&pf(b,k,d,st)===1-a^kt&&(dt=(g+nt)/2,b=n*Math.cos(dt),k=n*Math.sin(dt),d=st=null)):b=k=0,(et=Math.min(Math.abs(o-n)/2,+s.apply(this,arguments)))>.001){ot=o>n^a?0:1;var ft=null==d?[b,k]:null==p?[v,y]:ws([v,y],[d,st],[p,rt],[b,k]),ni=v-ft[0],ti=y-ft[1],ii=p-ft[0],ri=rt-ft[1],ui=1/Math.sin(Math.acos((ni*ii+ti*ri)/(Math.sqrt(ni*ni+ti*ti)*Math.sqrt(ii*ii+ri*ri)))/2),fi=Math.sqrt(ft[0]*ft[0]+ft[1]*ft[1]);if(null!=p){var tt=Math.min(et,(o-fi)/(ui+1)),ct=wf(null==d?[b,k]:[d,st],[v,y],o,tt,a),lt=wf([p,rt],[b,k],o,tt,a);et===tt?w.push("M",ct[0],"A",tt,",",tt," 0 0,",ot," ",ct[1],"A",o,",",o," 0 ",1-a^pf(ct[1][0],ct[1][1],lt[1][0],lt[1][1]),",",a," ",lt[1],"A",tt,",",tt," 0 0,",ot," ",lt[0]):w.push("M",ct[0],"A",tt,",",tt," 0 1,",ot," ",lt[0])}else w.push("M",v,",",y);if(null!=d){var it=Math.min(et,(n-fi)/(ui-1)),at=wf([v,y],[d,st],n,-it,a),vt=wf([b,k],null==p?[v,y]:[p,rt],n,-it,a);et===it?w.push("L",vt[0],"A",it,",",it," 0 0,",ot," ",vt[1],"A",n,",",n," 0 ",a^pf(vt[1][0],vt[1][1],at[1][0],at[1][1]),",",1-a," ",at[1],"A",it,",",it," 0 0,",ot," ",at[0]):w.push("L",vt[0],"A",it,",",it," 0 0,",ot," ",at[0])}else w.push("L",b,",",k)}else w.push("M",v,",",y),null!=p&&w.push("A",o,",",o," 0 ",wt,",",a," ",p,",",rt),w.push("L",b,",",k),null!=d&&w.push("A",n,",",n," 0 ",kt,",",1-a," ",d,",",st);return w.push("Z"),w.join("")}function l(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var t=ait,i=vit,s=lit,r=lu,u=cw,e=lw,c=yit;return n.innerRadius=function(i){return arguments.length?(t=o(i),n):t},n.outerRadius=function(t){return arguments.length?(i=o(t),n):i},n.cornerRadius=function(t){return arguments.length?(s=o(t),n):s},n.padRadius=function(t){return arguments.length?(r=t==lu?lu:o(t),n):r},n.startAngle=function(t){return arguments.length?(u=o(t),n):u},n.endAngle=function(t){return arguments.length?(e=o(t),n):e},n.padAngle=function(t){return arguments.length?(c=o(t),n):c},n.centroid=function(){var n=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,r=(+u.apply(this,arguments)+ +e.apply(this,arguments))/2-h;return[Math.cos(r)*n,Math.sin(r)*n]},n},lu="auto",n.svg.line=function(){return aw(v)},to=n.map({linear:d,"linear-closed":pit,step:wit,"step-before":ch,"step-after":lh,basis:vw,"basis-open":git,"basis-closed":nrt,bundle:trt,cardinal:dit,"cardinal-open":bit,"cardinal-closed":kit,monotone:urt}),to.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var kb=[0,2/3,1/3,0],db=[0,1/3,2/3,0],oi=[0,1/6,2/3,1/6];n.svg.line.radial=function(){var n=aw(yw);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},ch.reverse=lh,lh.reverse=ch,n.svg.area=function(){return pw(v)},n.svg.area.radial=function(){var n=pw(yw);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},n.svg.chord=function(){function n(n,u){var f=c(this,i,n,u),e=c(this,r,n,u);return"M"+f.p0+l(f.r,f.p1,f.a1-f.a0)+(a(f,e)?t(f.r,f.p1,f.r,f.p0):t(f.r,f.p1,e.r,e.p0)+l(e.r,e.p1,e.a1-e.a0)+t(e.r,e.p1,f.r,f.p0))+"Z"}function c(n,t,i,r){var o=t.call(n,i,r),f=u.call(n,o,r),c=e.call(n,o,r)-h,l=s.call(n,o,r)-h;return{r:f,a0:c,a1:l,p0:[f*Math.cos(c),f*Math.sin(c)],p1:[f*Math.cos(l),f*Math.sin(l)]}}function a(n,t){return n.a0==t.a0&&n.a1==t.a1}function l(n,t,i){return"A"+n+","+n+" 0 "+ +(i>f)+",1 "+t}function t(n,t,i,r){return"Q 0,0 "+r}var i=as,r=vs,u=frt,e=cw,s=lw;return n.radius=function(t){return arguments.length?(u=o(t),n):u},n.source=function(t){return arguments.length?(i=o(t),n):i},n.target=function(t){return arguments.length?(r=o(t),n):r},n.startAngle=function(t){return arguments.length?(e=o(t),n):e},n.endAngle=function(t){return arguments.length?(s=o(t),n):s},n},n.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var t=as,i=vs,r=ww;return n.source=function(i){return arguments.length?(t=o(i),n):t},n.target=function(t){return arguments.length?(i=o(t),n):i},n.projection=function(t){return arguments.length?(r=t,n):r},n},n.svg.diagonal.radial=function(){var t=n.svg.diagonal(),i=ww,r=t.projection;return t.projection=function(n){return arguments.length?r(ert(i=n)):i},t},n.svg.symbol=function(){function n(n,r){return(ul.get(t.call(this,n,r))||bw)(i.call(this,n,r))}var t=srt,i=ort;return n.type=function(i){return arguments.length?(t=o(i),n):t},n.size=function(t){return arguments.length?(i=o(t),n):i},n},ul=n.map({circle:bw,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*fl)),i=t*fl;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/au),i=t*au/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/au),i=t*au/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}}),n.svg.symbolTypes=ul.keys(),au=Math.sqrt(3),fl=Math.tan(30*u),e.transition=function(n){for(var r,t,u=gi||++gb,f=wh(n),e=[],h=io||{time:Date.now(),ease:hn,delay:0,duration:250},o=-1,c=this.length;++o<c;){e.push(r=[]);for(var s=this[o],i=-1,l=s.length;++i<l;)(t=s[i])&&kf(t,i,f,u,h),r.push(t)}return ru(e,f,u)},e.interrupt=function(n){return this.each(null==n?ro:kw(wh(n)))};var gi,io,ro=kw(wh()),a=[],gb=0;a.call=e.call,a.empty=e.empty,a.node=e.node,a.size=e.size,n.transition=function(t,i){return t&&t.transition?gi?t.transition(i):t:n.selection().transition(t)},n.transition.prototype=a,a.select=function(n){var f,i,t,e=this.id,o=this.namespace,s=[],r,h;for(n=co(n),r=-1,h=this.length;++r<h;){s.push(f=[]);for(var c=this[r],u=-1,l=c.length;++u<l;)(t=c[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__),kf(i,u,o,e,t[o][e]),f.push(i)):f.push(null)}return ru(s,o,e)},a.selectAll=function(n){var h,u,t,f,c,e=this.id,o=this.namespace,l=[],i,a,r,y;for(n=gl(n),i=-1,a=this.length;++i<a;)for(var v=this[i],s=-1,p=v.length;++s<p;)if(t=v[s])for(c=t[o][e],u=n.call(t,t.__data__,s,i),l.push(h=[]),r=-1,y=u.length;++r<y;)(f=u[r])&&kf(f,r,o,e,c),h.push(f);return ru(l,o,e)},a.filter=function(n){var f,u,i,e=[],t,o;for("function"!=typeof n&&(n=sa(n)),t=0,o=this.length;o>t;t++){e.push(f=[]);for(var u=this[t],r=0,s=u.length;s>r;r++)(i=u[r])&&n.call(i,i.__data__,r,t)&&f.push(i)}return ru(e,this.namespace,this.id)},a.tween=function(n,t){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(n):at(this,null==t?function(t){t[r][i].tween.remove(n)}:function(u){u[r][i].tween.set(n,t)})},a.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.removeAttributeNS(r.space,r.local)}function o(n){return null==n?f:(n+="",function(){var t,i=this.getAttribute(r);return i!==n&&(t=u(i,n),function(n){this.setAttribute(r,t(n))})})}function s(n){return null==n?e:(n+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==n&&(t=u(i,n),function(n){this.setAttributeNS(r.space,r.local,t(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var u="transform"==t?hp:vi,r=n.ns.qualify(t);return ph(this,"attr."+t,i,r.local?s:o)},a.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?f:u)},a.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(t){return null==t?u:(t+="",function(){var r,u=bt(this).getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=vi(u,t),function(t){this.style.setProperty(n,r(t),i)})})}var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.style(i,n[i],t);return this}i=""}return ph(this,"style."+n,t,f)},a.styleTween=function(n,t,i){function r(r,u){var f=t.call(this,r,u,bt(this).getComputedStyle(this,null).getPropertyValue(n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+n,r)},a.text=function(n){return ph(this,"text",n,hrt)},a.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},a.ease=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].ease:("function"!=typeof t&&(t=n.ease.apply(n,arguments)),at(this,function(n){n[r][i].ease=t}))},a.delay=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].delay:at(this,"function"==typeof n?function(r,u,f){r[i][t].delay=+n.call(r,r.__data__,u,f)}:(n=+n,function(r){r[i][t].delay=n}))},a.duration=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].duration:at(this,"function"==typeof n?function(r,u,f){r[i][t].duration=Math.max(1,n.call(r,r.__data__,u,f))}:(n=Math.max(1,n),function(r){r[i][t].duration=n}))},a.each=function(t,i){var r=this.id,u=this.namespace,f,e;if(arguments.length<2){f=io,e=gi;try{gi=r,at(this,function(n,i,f){io=n[u][r],t.call(n,n.__data__,i,f)})}finally{io=f,gi=e}}else at(this,function(f){var e=f[u][r];(e.event||(e.event=n.dispatch("start","end","interrupt"))).on(t,i)});return this},a.transition=function(){for(var e,r,t,n,h=this.id,o=++gb,u=this.namespace,s=[],f=0,c=this.length;c>f;f++){s.push(e=[]);for(var r=this[f],i=0,l=r.length;l>i;i++)(t=r[i])&&(n=t[u][h],kf(t,i,u,o,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),e.push(t)}return ru(s,u,o)},n.svg.axis=function(){function i(i){i.each(function(){var a,rt=n.select(this),y=this.__chart__||o,i=this.__chart__=o.copy(),ht=null==h?i.ticks?i.ticks.apply(i,s):i.domain():h,ct=null==e?i.tickFormat?i.tickFormat.apply(i,s):v:e,w=rt.selectAll(".tick").data(ht,i),p=w.enter().insert("g",".domain").attr("class","tick").style("opacity",t),lt=n.transition(w.exit()).style("opacity",t).remove(),g=n.transition(w.order()).style("opacity",1),ut=Math.max(r,0)+c,b=af(i),ft=rt.selectAll(".domain").data([0]),et=(ft.enter().append("path").attr("class","domain"),n.transition(ft)),it,st;p.append("line"),p.append("text");var nt,tt,k,d,at=p.select("line"),vt=g.select("line"),ot=w.select("text").text(ct),yt=p.select("text"),pt=g.select("text"),l="top"===f||"left"===f?-1:1;("bottom"===f||"top"===f?(a=crt,nt="x",k="y",tt="x2",d="y2",ot.attr("dy",0>l?"0em":".71em").style("text-anchor","middle"),et.attr("d","M"+b[0]+","+l*u+"V0H"+b[1]+"V"+l*u)):(a=lrt,nt="y",k="x",tt="y2",d="x2",ot.attr("dy",".32em").style("text-anchor",0>l?"end":"start"),et.attr("d","M"+l*u+","+b[0]+"H0V"+b[1]+"H"+l*u)),at.attr(d,l*r),yt.attr(k,l*ut),vt.attr(tt,0).attr(d,l*r),pt.attr(nt,0).attr(k,l*ut),i.rangeBand)?(it=i,st=it.rangeBand()/2,y=i=function(n){return it(n)+st}):y.rangeBand?y=i:lt.call(a,i,y),p.call(a,y,i),g.call(a,i,i)})}var e,o=n.scale.linear(),f=el,r=6,u=6,c=3,s=[10],h=null;return i.scale=function(n){return arguments.length?(o=n,i):o},i.orient=function(n){return arguments.length?(f=n in nk?n+"":el,i):f},i.ticks=function(){return arguments.length?(s=arguments,i):s},i.tickValues=function(n){return arguments.length?(h=n,i):h},i.tickFormat=function(n){return arguments.length?(e=n,i):e},i.tickSize=function(n){var t=arguments.length;return t?(r=+n,u=+arguments[t-1],i):r},i.innerTickSize=function(n){return arguments.length?(r=+n,i):r},i.outerTickSize=function(n){return arguments.length?(u=+n,i):u},i.tickPadding=function(n){return arguments.length?(c=+n,i):c},i.tickSubdivide=function(){return arguments.length&&i},i},el="bottom",nk={top:1,right:1,bottom:1,left:1},n.svg.brush=function(){function f(t){t.each(function(){var i=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",w).on("touchstart.brush",w),h=i.selectAll(".background").data([0]),e,t,o,s;h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move"),e=i.selectAll(".resize").data(l,v),e.exit().remove(),e.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return hut[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",f.empty()?"none":null),o=n.transition(i),s=n.transition(h),r&&(t=af(r),s.attr("x",t[0]).attr("width",t[1]-t[0]),y(o)),u&&(t=af(u),s.attr("y",t[0]).attr("height",t[1]-t[0]),p(o)),a(o)})}function a(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.test(n)]+","+i[+/^s/.test(n)]+")"})}function y(n){n.select(".extent").attr("x",t[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function p(n){n.select(".extent").attr("y",i[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function w(){function st(){32==n.event.keyCode&&(w||(v=null,l[0]-=t[1],l[1]-=i[1],w=2),kt())}function ht(){32==n.event.keyCode&&2==w&&(l[0]+=t[1],l[1]+=i[1],w=0,kt())}function g(){var f=n.mouse(b),e=!1;nt&&(f[0]+=nt[0],f[1]+=nt[1]),w||(n.event.altKey?(v||(v=[(t[0]+t[1])/2,(i[0]+i[1])/2]),l[0]=t[+(f[0]<v[0])],l[1]=i[+(f[1]<v[1])]):v=null),ct&&et(f,r,0)&&(y(k),e=!0),lt&&et(f,u,1)&&(p(k),e=!0),e&&(a(k),it({type:"brush",mode:w?"move":"resize"}))}function et(n,r,u){var f,y,k=af(r),p=k[0],b=k[1],c=l[u],a=u?i:t,d=a[1]-a[0];return w&&(p-=c,b-=d+c),f=(u?h:s)?Math.max(p,Math.min(b,n[u])):n[u],w?y=(f+=c)+d:(v&&(c=Math.max(p,Math.min(b,2*v[u]-f))),f>c?(y=f,f=c):y=c),a[0]!=f||a[1]!=y?(u?o=null:e=null,a[0]=f,a[1]=y,!0):void 0}function ot(){g(),k.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),n.select("body").style("cursor",null),rt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),at(),it({type:"brushend"})}var v,nt,b=this,tt=n.select(n.event.target),it=c.of(b,arguments),k=n.select(b),d=tt.datum(),ct=!/^(n|s)$/.test(d)&&r,lt=!/^(e|w)$/.test(d)&&u,w=tt.classed("extent"),at=yu(b),l=n.mouse(b),rt=n.select(bt(b)).on("keydown.brush",st).on("keyup.brush",ht),ut,ft;(n.event.changedTouches?rt.on("touchmove.brush",g).on("touchend.brush",ot):rt.on("mousemove.brush",g).on("mouseup.brush",ot),k.interrupt().selectAll("*").interrupt(),w)?(l[0]=t[0]-l[0],l[1]=i[0]-l[1]):d?(ut=+/w$/.test(d),ft=+/^n/.test(d),nt=[t[1-ut]-l[0],i[1-ft]-l[1]],l[0]=t[ut],l[1]=i[ft]):n.event.altKey&&(v=l.slice()),k.style("pointer-events","none").selectAll(".resize").style("display",null),n.select("body").style("cursor",tt.style("cursor")),it({type:"brushstart"}),g()}var e,o,c=ho(f,"brushstart","brush","brushend"),r=null,u=null,t=[0,0],i=[0,0],s=!0,h=!0,l=ol[0];return f.event=function(r){r.each(function(){var u=c.of(this,arguments),r={x:t,y:i,i:e,j:o},f=this.__chart__||r;this.__chart__=r,gi?n.select(this).transition().each("start.brush",function(){e=f.i,o=f.j,t=f.x,i=f.y,u({type:"brushstart"})}).tween("brush:brush",function(){var n=lf(t,r.x),f=lf(i,r.y);return e=o=null,function(e){t=r.x=n(e),i=r.y=f(e),u({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=r.i,o=r.j,u({type:"brush",mode:"resize"}),u({type:"brushend"})}):(u({type:"brushstart"}),u({type:"brush",mode:"resize"}),u({type:"brushend"}))})},f.x=function(n){return arguments.length?(r=n,l=ol[!r<<1|!u],f):r},f.y=function(n){return arguments.length?(u=n,l=ol[!r<<1|!u],f):u},f.clamp=function(n){return arguments.length?(r&&u?(s=!!n[0],h=!!n[1]):r?s=!!n:u&&(h=!!n),f):r&&u?[s,h]:r?s:u?h:null},f.extent=function(n){var s,h,c,l,a;return arguments.length?(r&&(s=n[0],h=n[1],u&&(s=s[0],h=h[0]),e=[s,h],r.invert&&(s=r(s),h=r(h)),s>h&&(a=s,s=h,h=a),(s!=t[0]||h!=t[1])&&(t=[s,h])),u&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),o=[c,l],u.invert&&(c=u(c),l=u(l)),c>l&&(a=c,c=l,l=a),(c!=i[0]||l!=i[1])&&(i=[c,l])),f):(r&&(e?(s=e[0],h=e[1]):(s=t[0],h=t[1],r.invert&&(s=r.invert(s),h=r.invert(h)),s>h&&(a=s,s=h,h=a))),u&&(o?(c=o[0],l=o[1]):(c=i[0],l=i[1],u.invert&&(c=u.invert(c),l=u.invert(l)),c>l&&(a=c,c=l,l=a))),r&&u?[[s,c],[h,l]]:r?[s,h]:u&&[c,l])},f.clear=function(){return f.empty()||(t=[0,0],i=[0,0],e=o=null),f},f.empty=function(){return!!r&&t[0]==t[1]||!!u&&i[0]==i[1]},n.rebind(f,c,"on")};var hut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],sl=i.format=hc.timeFormat,tk=sl.utc,ik=tk("%Y-%m-%dT%H:%M:%S.%LZ");sl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?bh:ik,bh.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},bh.toString=ik.toString,i.second=ci(function(n){return new y(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),i.seconds=i.second.range,i.seconds.utc=i.second.utc.range,i.minute=ci(function(n){return new y(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),i.minutes=i.minute.range,i.minutes.utc=i.minute.utc.range,i.hour=ci(function(n){var t=n.getTimezoneOffset()/60;return new y(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),i.hours=i.hour.range,i.hours.utc=i.hour.utc.range,i.month=ci(function(n){return n=i.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),i.months=i.month.range,i.months.utc=i.month.utc.range;var uo=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],hl=[[i.second,1],[i.second,5],[i.second,15],[i.second,30],[i.minute,1],[i.minute,5],[i.minute,15],[i.minute,30],[i.hour,1],[i.hour,3],[i.hour,6],[i.hour,12],[i.day,1],[i.day,2],[i.week,1],[i.month,1],[i.month,3],[i.year,1]],cut=sl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",rr]]),lut={range:function(t,i,r){return n.range(Math.ceil(t/r)*r,+i,r).map(yi)},floor:v,ceil:v};hl.year=i.year,i.scale=function(){return kh(n.scale.linear(),hl,cut)},cl=hl.map(function(n){return[n[0].utc,n[1]]}),rk=tk.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",rr]]),cl.year=i.year.utc,i.scale.utc=function(){return kh(n.scale.linear(),cl,rk)},n.text=ts(function(n){return n.responseText}),n.json=function(n,t){return wu(n,"application/json",art,t)},n.html=function(n,t){return wu(n,"text/html",vrt,t)},n.xml=ts(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(n):"object"==typeof module&&module.exports&&(module.exports=n),this.d3=n}(),!function(n,t){"use strict";if("object"==typeof exports)module.exports=t(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(i){return n.dimple=t(i),n.dimple});else if(n.d3)n.dimple=t(n.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(n){"use strict";var t={version:"2.1.2",plot:{},aggregateMethod:{}};return t.axis=function(i,r,u,f,e){this.chart=i,this.position=r,this.categoryFields=null===e||void 0===e?u:[].concat(e),this.measure=f,this.timeField=e,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var i,n,t=[],r=!1;if(this.chart&&this.chart.series){for(i=0;i<this.chart.series.length;i+=1)n=this.chart.series[i],n[this.position]===this&&(n.data&&n.data.length>0?t=t.concat(n.data):r=!0);r&&this.chart.data&&(t=t.concat(this.chart.data))}return t},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var t,f,e,r,i,o,u;return null!==this.tickFormat&&void 0!==this.tickFormat?t=this._hasTimeField()?n.time.format(this.tickFormat):n.format(this.tickFormat):this.showPercent?t=n.format("%"):this.useLog&&null!==this.measure?t=function(t){var r=Math.floor(Math.abs(t),0).toString().length,i=Math.min(Math.floor((r-1)/3),4),u="kmBT".substring(i-1,i),f="0"===Math.round(10*(t/Math.pow(1e3,i))).toString().slice(-1)?0:1;return 0===t?0:n.format(",."+f+"f")(t/Math.pow(1e3,i))+u}:null!==this.measure?(f=Math.floor(Math.abs(this._max),0).toString(),e=Math.floor(Math.abs(this._min),0).toString(),r=Math.max(e.length,f.length),r>3?(i=Math.min(Math.floor((r-1)/3),4),o="kmBT".substring(i-1,i),u=1>=r-3*i?1:0,t=function(t){return 0===t?0:n.format(",."+u+"f")(t/Math.pow(1e3,i))+o}):(u=-Math.floor(Math.log(this._tick_step)/Math.LN10),t=n.format(",."+u+"f"))):t=function(n){return n},t},this._getTimePeriod=function(){var r=this.timePeriod,t=30,i=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(r=t>=i/1e3?n.time.seconds:t>=i/6e4?n.time.minutes:t>=i/36e5?n.time.hours:t>=i/864e5?n.time.days:t>=i/6048e5?n.time.weeks:t>=i/26298e5?n.time.months:n.time.years),r},this._getTooltipText=function(t,i){if(this._hasTimeField())i[this.position+"Field"][0]&&t.push(this.timeField+": "+this._getFormat()(i[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(n,r){null!==n&&void 0!==n&&i[this.position+"Field"][r]&&t.push(n+(i[this.position+"Field"][r]!==n?": "+i[this.position+"Field"][r]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":t.push(this.measure+": "+this._getFormat()(i.width));break;case"y":t.push(this.measure+": "+this._getFormat()(i.height));break;case"p":t.push(this.measure+": "+this._getFormat()(i.angle)+" ("+n.format("%")(i.piePct)+")");break;default:t.push(this.measure+": "+this._getFormat()(i[this.position+"Value"]))}},this._getTopMaster=function(){var n=this;return null!==this.master&&void 0!==this.master&&(n=this.master._getTopMaster()),n},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(t){return null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(t)?Date.parse(t):new Date(t):n.time.format(this.dateParseFormat).parse(t)},this._update=function(i){var s,u,h,e,r=[],f=this.ticks||10,o=function(n,i,r){for(var s,e=n.categoryFields[0],o=n._getAxisData(),h=e,c=!1,l=!0,f=null,u=0;u<o.length;u+=1)if(f=n._parseDate(o[u][e]),null!==f&&void 0!==f&&isNaN(f)){l=!1;break}return l||n.chart.series.forEach(function(t){t[i]===n&&t[r]._hasMeasure()&&(h=t[r].measure,c=!0)},this),s=n._orderRules.concat({ordering:h,desc:c}),t._getOrderedList(o,e,s)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"===this.position&&(null===this._scale||i)){if(this._hasTimeField()?this._scale=n.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=n.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(r=o(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(n){r=r.concat(o(n,"x","y"))},this),this._scale=n.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(r.concat([""]))):this._scale=n.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=n.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(f);break;case 1:this._draw=n.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(f)}}else if("y"===this.position&&(null===this._scale||i)){if(this._hasTimeField()?this._scale=n.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=n.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(r=o(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(n){r=r.concat(o(n,"y","x"))},this),this._scale=n.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(r.concat([""]))):this._scale=n.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=n.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(f);break;case 1:this._draw=n.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(f)}}else this.position.length>0&&"z"===this.position[0]&&null===this._scale?this._scale=this.useLog?n.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):n.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this._scale=this.useLog?n.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):n.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=n.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(n){n._scale=this._scale},this),null!==i&&void 0!==i&&i!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(f).length>0)||"x"!==this.position&&"y"!==this.position||(s=this._scale.ticks(f),u=s[1]-s[0],h=((this._max-this._min)%u).toFixed(0),this._tick_step=u,0!==h&&(this._max=Math.ceil(this._max/u)*u,this._min=Math.floor(this._min/u)*u,this._update(!0))),e=null!==r&&void 0!==r&&r.length>0?this._scale.copy()(r[0]):this._min>0?this._scale.copy()(this._min):this._max<0?this._scale.copy()(this._max):this._scale.copy()(0),this._origin!==e&&(this._previousOrigin=null===this._origin?e:this._origin,this._origin=e),this},this.addGroupOrderRule=function(n,t){this._groupOrderRules.push({ordering:n,desc:t})},this.addOrderRule=function(n,t){this._orderRules.push({ordering:n,desc:t})}},t.chart=function(i,r){this.svg=i,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=r,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=i.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(n,t){for(var i=0,r=0,u=-1,i=0;i<this.axes.length;i+=1){if(this.axes[i]===n){u=r;break}(null===t||void 0===t||t[0]===this.axes[i].position[0])&&(r+=1)}return u},this._getAllData=function(){var n=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(n=n.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(t){null!==t.data&&void 0!==t.data&&t.data.length>0&&(n=n.concat(t.data))}),n},this._getData=function(i,r,u,f,e,o,s,h,c,l){var b,y,k=[],st=function(n,t){var i=[];return null!==n&&(n._hasTimeField()?i.push(n._parseDate(t[n.timeField])):n._hasCategories()&&n.categoryFields.forEach(function(n){i.push(t[n])},this)),i},tt={x:!1,y:!1,z:!1,p:!1,c:!1},w={x:[],y:[]},a={x:[],y:[],z:[],p:[]},v={min:null,max:null},ht={x:[],y:[],z:[],p:[]},it=[],lt={},rt={x:0,y:0,z:0,p:0},ut="",at=[],g=[],vt=[],ft="",yt=[],et="",ct=[],ot="",pt=[],d=[],p=i,nt=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(ut=this.storyboard.categoryFields[0],at=t._getOrderedList(p,ut,this.storyboard._orderRules)),o&&o._hasCategories()&&o._hasMeasure()&&(ft=o.categoryFields[0],yt=t._getOrderedList(p,ft,o._orderRules.concat([{ordering:o.measure,desc:!0}]))),s&&s._hasCategories()&&s._hasMeasure()&&(et=s.categoryFields[0],ct=t._getOrderedList(p,et,s._orderRules.concat([{ordering:s.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(ot=c.categoryFields[0],pt=t._getOrderedList(p,ot,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),p.length>0&&r&&r.length>0&&(d=[].concat(f),g=[],r.forEach(function(n){void 0!==p[0][n]&&g.push(n)},this),c&&c._hasMeasure()?d.push({ordering:c.measure,desc:!0}):l&&l._hasMeasure()?d.push({ordering:l.measure,desc:!0}):h&&h._hasMeasure()?d.push({ordering:h.measure,desc:!0}):o&&o._hasMeasure()?d.push({ordering:o.measure,desc:!0}):s&&s._hasMeasure()&&d.push({ordering:s.measure,desc:!0}),vt=t._getOrderedList(p,g,d)),p.sort(function(n,t){var e,s,o,r,u,f,i=0;if(""!==ut&&(i=at.indexOf(n[ut])-at.indexOf(t[ut])),""!==ft&&0===i&&(i=yt.indexOf(n[ft])-yt.indexOf(t[ft])),""!==et&&0===i&&(i=ct.indexOf(n[et])-ct.indexOf(t[et])),""!==ot&&0===i&&(i=pt.indexOf(n[ot])-ct.indexOf(t[ot])),g&&g.length>0&&0===i)for(e=[].concat(g),i=0,o=0;o<vt.length;o+=1){for(s=[].concat(vt[o]),u=!0,f=!0,r=0;r<e.length;r+=1)u=u&&n[e[r]]===s[r],f=f&&t[e[r]]===s[r];if(u&&f){i=0;break}if(u){i=-1;break}if(f){i=1;break}}return i}),p.forEach(function(n){var v,f,t,y,i,a=-1,p=st(o,n),w=st(s,n),b=st(h,n),d=st(c,n),e=[];if(r&&0!==r.length)for(t=0;t<r.length;t+=1)void 0===n[r[t]]?e.push(r[t]):e.push(n[r[t]]);else e=["All"];for(v=e.join("/")+"_"+p.join("/")+"_"+w.join("/")+"_"+d.join("/")+"_"+b.join("/"),f=0;f<k.length;f+=1)if(k[f].key===v){a=f;break}-1===a&&(y={key:v,aggField:e,xField:p,xValue:null,xCount:0,yField:w,yValue:null,yCount:0,pField:d,pValue:null,pCount:0,zField:b,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},k.push(y),a=k.length-1),i=function(t,i){var o,r,s=!0,f={value:0,count:1},h={value:0,count:1},e="";null!==i&&(o=i.getFrameValue(),i.categoryFields.forEach(function(t,i){i>0&&(e+="/"),e+=n[t],s=e===o},this)),null!==t&&void 0!==t&&s&&(r=k[a],t._hasMeasure()&&null!==n[t.measure]&&void 0!==n[t.measure]&&(-1===r[t.position+"ValueList"].indexOf(n[t.measure])&&r[t.position+"ValueList"].push(n[t.measure]),isNaN(parseFloat(n[t.measure]))&&(tt[t.position]=!0),f.value=r[t.position+"Value"],f.count=r[t.position+"Count"],h.value=n[t.measure],r[t.position+"Value"]=u(f,h),r[t.position+"Count"]+=1))},i(o,this.storyboard),i(s,this.storyboard),i(h,this.storyboard),i(c,this.storyboard),i(l,this.storyboard)},this),o&&o._hasCategories()&&o.categoryFields.length>1&&void 0!==w.x&&(nt=[],s._hasMeasure()&&nt.push({ordering:s.measure,desc:!0}),w.x=t._getOrderedList(p,o.categoryFields[1],o._groupOrderRules.concat(nt))),s&&s._hasCategories()&&s.categoryFields.length>1&&void 0!==w.y&&(nt=[],o._hasMeasure()&&nt.push({ordering:o.measure,desc:!0}),w.y=t._getOrderedList(p,s.categoryFields[1],s._groupOrderRules.concat(nt)),w.y.reverse()),k.forEach(function(n){null!==o&&(tt.x===!0&&(n.xValue=n.xValueList.length),b=(a.x[n.xField.join("/")]||0)+(s._hasMeasure()?Math.abs(n.yValue):0),a.x[n.xField.join("/")]=b),null!==s&&(tt.y===!0&&(n.yValue=n.yValueList.length),b=(a.y[n.yField.join("/")]||0)+(o._hasMeasure()?Math.abs(n.xValue):0),a.y[n.yField.join("/")]=b),null!==c&&(tt.p===!0&&(n.pValue=n.pValueList.length),b=(a.p[n.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(n.pValue):0),a.p[n.pField.join("/")]=b),null!==h&&(tt.z===!0&&(n.zValue=n.zValueList.length),b=(a.z[n.zField.join("/")]||0)+(h._hasMeasure()?Math.abs(n.zValue):0),a.z[n.zField.join("/")]=b),null!==l&&((null===v.min||n.cValue<v.min)&&(v.min=n.cValue),(null===v.max||n.cValue>v.max)&&(v.max=n.cValue))},this);for(y in a.x)a.x.hasOwnProperty(y)&&(rt.x+=a.x[y]);for(y in a.y)a.y.hasOwnProperty(y)&&(rt.y+=a.y[y]);for(y in a.p)a.p.hasOwnProperty(y)&&(rt.p+=a.p[y]);for(y in a.z)a.z.hasOwnProperty(y)&&(rt.z+=a.z[y]);return k.forEach(function(t){var i,r,p,u,f,y=function(n,i,r){var o,f,s,u,h;null!==n&&void 0!==n&&(u=n.position,n._hasCategories()?n._hasMeasure()?(o=t[n.position+"Field"].join("/"),f=n.showPercent?a[n.position][o]/rt[n.position]:a[n.position][o],-1===it.indexOf(o)&&(lt[o]=f+(it.length>0?lt[it[it.length-1]]:0),it.push(o)),s=t[u+"Bound"]=t["c"+u]="x"!==u&&"y"!==u||!e?f:lt[o],t[r]=f,t[u]=s-("x"===u&&f>=0||"y"===u&&0>=f?f:0)):(t[u]=t["c"+u]=t[u+"Field"][0],t[r]=1,void 0!==w[u]&&null!==w[u]&&w[u].length>=2&&(t[u+"Offset"]=w[u].indexOf(t[u+"Field"][1]),t[r]=1/w[u].length)):(f=n.showPercent?t[u+"Value"]/a[i][t[i+"Field"].join("/")]:t[u+"Value"],o=t[i+"Field"].join("/")+(t[u+"Value"]>=0),h=ht[u][o]=(null===ht[u][o]||void 0===ht[u][o]||"z"===u||"p"===u?0:ht[u][o])+f,s=t[u+"Bound"]=t["c"+u]="x"!==u&&"y"!==u||!e?f:h,t[r]=f,t[u]=s-("x"===u&&f>=0||"y"===u&&0>=f?f:0)))};y(o,"y","width"),y(s,"x","height"),y(h,"z","r"),y(c,"p","angle"),null!==l&&null!==v.min&&null!==v.max&&(v.min===v.max&&(v.min-=.5,v.max+=.5),v.min=l.overrideMin||v.min,v.max=l.overrideMax||v.max,t.cValue=t.cValue>v.max?v.max:t.cValue<v.min?v.min:t.cValue,p=n.scale.linear().range([0,null===l.colors||1===l.colors.length?1:l.colors.length-1]).domain([v.min,v.max]),u=p(t.cValue),f=u-Math.floor(u),t.cValue===v.max&&(f=1),l.colors&&1===l.colors.length?(i=n.rgb(l.colors[0]),r=n.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)):l.colors&&l.colors.length>1?(i=n.rgb(l.colors[Math.floor(u)]),r=n.rgb(l.colors[Math.ceil(u)])):(i=n.rgb("white"),r=n.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)),i.r=Math.floor(i.r+(r.r-i.r)*f),i.g=Math.floor(i.g+(r.g-i.g)*f),i.b=Math.floor(i.b+(r.b-i.b)*f),t.fill=i.toString(),t.stroke=i.darker(.5).toString())},this),k},this._getDelay=function(n,i,r){return function(u){var f=0;return r&&i.staggerDraw&&(r.x._hasCategories()?f=t._helpers.cx(u,i,r)/i._widthPixels()*n:r.y._hasCategories()&&(f=(1-t._helpers.cy(u,i,r)/i._heightPixels())*n)),f}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(n){var t,r,e,c,o,l,a=n.data||this.data||[],h=[].concat(n.categoryFields||"All"),i=this._getData(a,h,n.aggregate,n._orderRules,n._isStacked(),n.x,n.y,n.z,n.p,n.c),u=[],f={},s=n.startAngle*(Math.PI/180)||0,v=(n.endAngle||360)*(Math.PI/180);if(s>v&&(s-=2*Math.PI),n.p&&h.length>0){if(n.x&&n.y){for(h.pop(),u=this._getData(a,["__dimple_placeholder__"].concat(h),n.aggregate,n._orderRules,n._isStacked(),n.x,n.y,n.z,n.p,n.c),t=0;t<i.length;t+=1)for(e=["__dimple_placeholder__"].concat(i[t].aggField),e.pop(),n.x&&n.x._hasCategories()&&(e=e.concat(i[t].xField)),n.y&&n.y._hasCategories()&&(e=e.concat(i[t].yField)),c=e.join("|"),r=0;r<u.length;r+=1)if(o=[].concat(u[r].aggField),n.x&&n.x._hasCategories()&&(o=o.concat(u[r].xField)),n.y&&n.y._hasCategories()&&(o=o.concat(u[r].yField)),l=o.join("|"),c===l){i[t].xField=u[r].xField,i[t].xValue=u[r].xValue,i[t].xCount=u[r].xCount,i[t].yField=u[r].yField,i[t].yValue=u[r].yValue,i[t].yCount=u[r].yCount,i[t].zField=u[r].zField,i[t].zValue=u[r].zValue,i[t].zCount=u[r].zCount,i[t].x=u[r].x,i[t].y=u[r].y,i[t].r=u[r].r,i[t].xOffset=u[r].xOffset,i[t].yOffset=u[r].yOffset,i[t].width=u[r].width,i[t].height=u[r].height,i[t].cx=u[r].cx,i[t].cy=u[r].cy,i[t].xBound=u[r].xBound,i[t].yBound=u[r].yBound,i[t].xValueList=u[r].xValueList,i[t].yValueList=u[r].yValueList,i[t].zValueList=u[r].zValueList,i[t].cValueList=u[r].cValueList,i[t].pieKey=u[r].key,i[t].value=i.pValue,f[u[r].key]||(f[u[r].key]={total:0,angle:s}),f[u[r].key].total+=i[t].pValue;break}}else for(t=0;t<i.length;t+=1)i[t].pieKey="All",i[t].value=i.pValue,f[i[t].pieKey]||(f[i[t].pieKey]={total:0,angle:s}),f[i[t].pieKey].total+=i[t].pValue;for(t=0;t<i.length;t+=1)i[t].piePct=i[t].pValue/f[i[t].pieKey].total,i[t].startAngle=f[i[t].pieKey].angle,i[t].endAngle=i[t].startAngle+i[t].piePct*(v-s),f[i[t].pieKey].angle=i[t].endAngle}n._positionData=i},this)},this._handleTransition=function(n,t,i,r){return 0===t?n:n.transition().duration(t).delay(i._getDelay(t,i,r)).ease(i.ease)},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(i){null!==i._eventHandlers&&i._eventHandlers.length>0&&i._eventHandlers.forEach(function(r){var u,f=function(u){var f=new t.eventArgs;null!==i.chart.storyboard&&(f.frameValue=i.chart.storyboard.getFrameValue()),f.seriesValue=u.aggField,f.xValue=u.x,f.yValue=u.y,f.zValue=u.z,f.pValue=u.p,f.colorValue=u.cValue,f.seriesShapes=i.shapes,f.selectedShape=n.select(this),r.handler(f)};if(null!==r.handler&&"function"==typeof r.handler)if(null!==i._markers&&void 0!==i._markers)for(u in i._markers)i._markers.hasOwnProperty(u)&&i._markers[u].on(r.event,f);else i.shapes.on(r.event,f)},this)},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this.addAxis=function(n,i,r,u){var f=null,e=null;if(null!==i&&void 0!==i&&(i=[].concat(i)),"string"==typeof n||n instanceof String)f=new t.axis(this,n,i,r,u),this.axes.push(f);else{if(e=n,f=new t.axis(this,e.position,i,r,u),f._hasMeasure()!==e._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(f._hasTimeField()!==e._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===f.categoryFields||void 0===f.categoryFields?0:f.categoryFields.length)!==(null===e.categoryFields||void 0===e.categoryFields?0:e.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";e._slaves.push(f)}return f},this.addCategoryAxis=function(n,t){return this.addAxis(n,t,null)},this.addColorAxis=function(n,t){var i=this.addAxis("c",null,n);return i.colors=null===t||void 0===t?null:[].concat(t),i},this.addLegend=function(n,i,r,u,f,e){e=null===e||void 0===e?this.series:[].concat(e),f=null===f||void 0===f?"left":f;var o=new t.legend(this,n,i,r,u,f,e);return this.legends.push(o),o},this.addLogAxis=function(n,t,i){var r=this.addAxis(n,null,t,null);return null!==i&&void 0!==i&&(r.logBase=i),r.useLog=!0,r},this.addMeasureAxis=function(n,t){return this.addAxis(n,null,t)},this.addPctAxis=function(n,t,i){var r=null;return r=null!==i&&void 0!==i?this.addAxis(n,i,t):this.addMeasureAxis(n,t),r.showPercent=!0,r},this.addSeries=function(n,i,r){(null===r||void 0===r)&&(r=this.axes),(null===i||void 0===i)&&(i=t.plot.bubble);var f,e=null,o=null,s=null,u=null,h=null;return r.forEach(function(n){null!==n&&i.supportedAxes.indexOf(n.position)>-1&&(null===e&&"x"===n.position[0]?e=n:null===o&&"y"===n.position[0]?o=n:null===s&&"z"===n.position[0]?s=n:null===u&&"c"===n.position[0]?u=n:null===u&&"p"===n.position[0]&&(h=n))},this),n&&(n=[].concat(n)),f=new t.series(this,n,e,o,s,u,h,i,t.aggregateMethod.sum,i.stacked),this.series.push(f),f},this.addTimeAxis=function(n,t,i,r){var u=this.addAxis(n,null,null,t);return u.tickFormat=r,u.dateParseFormat=i,u},this.assignClass=function(n,t){return this._assignedClasses[n]=t,this._assignedClasses[n]},this.assignColor=function(n,i,r,u){return this._assignedColors[n]=new t.color(i,r,u),this._assignedColors[n]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",lineMarker:"dimple-custom-line-marker",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new t.color("#80B1D3"),new t.color("#FB8072"),new t.color("#FDB462"),new t.color("#B3DE69"),new t.color("#FFED6F"),new t.color("#BC80BD"),new t.color("#8DD3C7"),new t.color("#CCEBC5"),new t.color("#FFFFB3"),new t.color("#BEBADA"),new t.color("#FCCDE5"),new t.color("#D9D9D9")],this.draw=function(t,i){t=t||0;var c,h,r=null,u=null,l=!1,a=!1,f=this._xPixels(),e=this._yPixels(),o=this._widthPixels(),s=this._heightPixels();return(void 0===i||null===i||i===!1)&&this._getSeriesData(),this.axes.forEach(function(n){n._scale=null},this),this.axes.forEach(function(n){if(n._min=0,n._max=0,h=[],n._hasMeasure()){var t=!1;this.series.forEach(function(i){if(i._deepMatch(n)){var r=i._axisBounds(n.position);n._min>r.min&&(n._min=r.min),n._max<r.max&&(n._max=r.max),t=!0}},this),t||this._getAllData().forEach(function(t){n._min>t[n.measure]&&(n._min=t[n.measure]),n._max<t[n.measure]&&(n._max=t[n.measure])},this)}else n._hasTimeField()?(n._min=null,n._max=null,this.series.forEach(function(t){t._deepMatch(n)&&null!==t[n.position].timeField&&void 0!==t[n.position].timeField&&-1===h.indexOf(t[n.position].timeField)&&h.push(t[n.position].timeField)},this),n._getAxisData().forEach(function(t){h.forEach(function(i){var r=n._parseDate(t[i]);(null===n._min||r<n._min)&&(n._min=r),(null===n._max||r>n._max)&&(n._max=r)},this)},this)):n._hasCategories()&&(n._min=0,c=[],this.series.forEach(function(t){t._deepMatch(n)&&null!==t[n.position].categoryFields[0]&&void 0!==t[n.position].categoryFields[0]&&-1===h.indexOf(t[n.position].categoryFields[0])&&h.push(t[n.position].categoryFields[0])},this),n._getAxisData().forEach(function(n){h.forEach(function(t){-1===c.indexOf(n[t])&&c.push(n[t])},this)},this),n._max=c.length);null!==n._slaves&&void 0!==n._slaves&&n._slaves.length>0&&n._slaves.forEach(function(t){t._min=n._min,t._max=n._max},this),n._update(),null===r&&"x"===n.position?r=n:null===u&&"y"===n.position&&(u=n)},this),this.axes.forEach(function(i){var it=!1,y=null,w=0,b=null,k=!1,v=0,h={l:null,t:null,r:null,b:null},d=0,g=0,rt="",c=this,p=function(n){return null===y||0===t||it?n:c._handleTransition(n,t,c)},nt=function(){var t=n.select(this).selectAll("text");return!i.measure&&i._max>0&&("x"===i.position?t.attr("x",o/i._max/2):"y"===i.position&&t.attr("y",s/i._max/-2)),i.categoryFields&&i.categoryFields.length>0&&(i!==r||null!==u.categoryFields&&0!==u.categoryFields.length||t.attr("y",e+s-u._scale(0)+9),i!==u||null!==r.categoryFields&&0!==r.categoryFields.length||t.attr("x",-1*(r._scale(0)-f)-9)),this},tt=function(t){return function(){var i=n.select(this).attr("class")||"";return-1===i.indexOf(t)&&(i+=" "+t),i.trim()}};null===i.gridlineShapes?(i.showGridlines||null===i.showGridlines&&!i._hasCategories()&&(!l&&"x"===i.position||!a&&"y"===i.position))&&(i.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),"x"===i.position?l=!0:a=!0):"x"===i.position?l=!0:a=!0,null===i.shapes&&(i.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+i.position).each(function(){c.noFormats||n.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),it=!0),i===r&&null!==u?(y="translate(0, "+(null===u.categoryFields||0===u.categoryFields.length?u._scale(0):e+s)+")",b="translate(0, "+(i===r?e+s:e)+")",w=-s):i===u&&null!==r?(y="translate("+(null===r.categoryFields||0===r.categoryFields.length?r._scale(0):f)+", 0)",b="translate("+(i===u?f:f+o)+", 0)",w=-o):"x"===i.position?(b=y="translate(0, "+(i===r?e+s:e)+")",w=-s):"y"===i.position&&(b=y="translate("+(i===u?f:f+o)+", 0)",w=-o),null!==y&&null!==i._draw&&(i._hasTimeField()?p(i.shapes).call(i._draw.ticks(i._getTimePeriod(),i.timeInterval).tickFormat(i._getFormat())).attr("transform",y).each(nt):i.useLog?p(i.shapes).call(i._draw.ticks(4,i._getFormat())).attr("transform",y).each(nt):p(i.shapes).call(i._draw.tickFormat(i._getFormat())).attr("transform",y).each(nt),null!==i.gridlineShapes&&p(i.gridlineShapes).call(i._draw.tickSize(w,0,0).tickFormat("")).attr("transform",b)),p(i.shapes.selectAll("text")).attr("class",tt(c.customClassList.axisLabel)).call(function(){c.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),p(i.shapes.selectAll("path, line")).attr("class",tt(c.customClassList.axisLine)).call(function(){c.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==i.gridlineShapes&&p(i.gridlineShapes.selectAll("line")).attr("class",tt(c.customClassList.gridline)).call(function(){c.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===i.measure||void 0===i.measure)&&(i===r?(v=0,i.shapes.selectAll("text").each(function(){var n=this.getComputedTextLength();v=n>v?n:v}),v>o/i.shapes.selectAll("text")[0].length?(k=!0,i.shapes.selectAll("text").style("text-anchor","start").each(function(){var t=this.getBBox();n.select(this).attr("transform","rotate(90,"+t.x+","+(t.y+t.height/2)+") translate(-5, 0)")})):(k=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===i.position&&(v=0,i.shapes.selectAll("text").each(function(){var n=this.getComputedTextLength();v=n>v?n:v}),v>o/i.shapes.selectAll("text")[0].length?(k=!0,i.shapes.selectAll("text").style("text-anchor","end").each(function(){var t=this.getBBox();n.select(this).attr("transform","rotate(90,"+(t.x+t.width)+","+(t.y+t.height/2)+") translate(5, 0)")})):(k=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform","")))),null!==i.titleShape&&void 0!==i.titleShape&&i.titleShape.remove(),i.shapes.selectAll("text").each(function(){var n=this.getBBox();(null===h.l||-9-n.width<h.l)&&(h.l=-9-n.width),(null===h.r||n.x+n.width>h.r)&&(h.r=n.x+n.width),k?((null===h.t||n.y+n.height-n.width<h.t)&&(h.t=n.y+n.height-n.width),(null===h.b||n.height+n.width>h.b)&&(h.b=n.height+n.width)):((null===h.t||n.y<h.t)&&(h.t=n.y),(null===h.b||9+n.height>h.b)&&(h.b=9+n.height))}),"x"===i.position?(g=i===r?e+s+h.b+5:e+h.t-10,d=f+o/2):"y"===i.position&&(d=i===u?f+h.l-10:f+o+h.r+20,g=e+s/2,rt="rotate(270, "+d+", "+g+")"),i.hidden||"x"!==i.position&&"y"!==i.position||null===i.title||(i.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+c.customClassList.axisTitle+"dimple-axis-"+i.position),i.titleShape.attr("x",d).attr("y",g).attr("text-anchor","middle").attr("transform",rt).text(void 0!==i.title?i.title:null===i.categoryFields||void 0===i.categoryFields||0===i.categoryFields.length?i.measure:i.categoryFields.join("/")).each(function(){c.noFormats||n.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),i===r?i.titleShape.each(function(){n.select(this).attr("y",g+this.getBBox().height/1.65)}):i===u&&i.titleShape.each(function(){n.select(this).attr("x",d+this.getBBox().height/1.65)}))},this),this.series.forEach(function(n){n.plot.draw(this,n,t),this._registerEventHandlers(n)},this),this.legends.forEach(function(n){n._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(n){return this._assignedClasses[n]||(this._assignedClasses[n]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[n]},this.getColor=function(n){return(null===this._assignedColors[n]||void 0===this._assignedColors[n])&&(this._assignedColors[n]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[n]},this.setBounds=function(n,i,r,u){return this.x=n,this.y=i,this.width=r,this.height=u,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(n,i,r,u){return this.x=n,this.y=i,this.width=0,this.height=0,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parentWidth(this.svg.node())-this._xPixels()-t._parseXPosition(r,this.svg.node())},this._heightPixels=function(){return t._parentHeight(this.svg.node())-this._yPixels()-t._parseYPosition(u,this.svg.node())},this.draw(0,!0),this},this.setStoryboard=function(n,i){return this.storyboard=new t.storyboard(this,n),null!==i&&void 0!==i&&(this.storyboard.onTick=i),this.storyboard}},t.color=function(t,i,r){this.fill=t,this.stroke=null===i||void 0===i?n.rgb(t).darker(.5).toString():i,this.opacity=null===r||void 0===r?.8:r},t.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},t.legend=function(i,r,u,f,e,o,s){this.chart=i,this.series=s,this.x=r,this.y=u,this.width=f,this.height=e,this.horizontalAlign=o,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var e,c=this._getEntries(),r=0,f=0,u=0,s=0,o=15,h=9,i=this;this.shapes&&this.shapes.remove(),e=this.chart._group.selectAll(".dimple-dont-select-any").data(c).enter().append("g").attr("class",function(n){return"dimple-legend "+t._createClass(n.aggField)}).attr("opacity",1),e.append("text").attr("class",function(n){return"dimple-legend dimple-legend-text "+t._createClass(n.aggField)+" "+i.chart.customClassList.legendLabel}).text(function(n){return n.key}).call(function(){i.chart.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var n=this.getBBox();n.width>r&&(r=n.width),n.height>f&&(f=n.height)}),e.append("rect").attr("class",function(n){return"dimple-legend dimple-legend-key "+t._createClass(n.aggField)}).attr("height",h).attr("width",o),f=(h>f?h:f)+2,r+=o+20,e.each(function(e){u+r>i._widthPixels()&&(u=0,s+=f),s>i._heightPixels()?n.select(this).remove():(n.select(this).select("text").attr("x","left"===i.horizontalAlign?i._xPixels()+o+5+u:i._xPixels()+(i._widthPixels()-u-r)+o+5).attr("y",function(){return i._yPixels()+s+this.getBBox().height/1.65}).attr("width",i._widthPixels()).attr("height",i._heightPixels()),n.select(this).select("rect").attr("class",function(n){return"dimple-legend dimple-legend-key "+t._createClass(n.aggField)+" "+i.chart.customClassList.legendKey+" "+n.css}).attr("x","left"===i.horizontalAlign?i._xPixels()+u:i._xPixels()+(i._widthPixels()-u-r)).attr("y",i._yPixels()+s).attr("height",h).attr("width",o).call(function(){i.chart.noFormats||this.style("fill",e.fill).style("stroke",e.stroke).style("opacity",e.opacity).style("shape-rendering","crispEdges")}),u+=r)}),this.shapes=e},this._getEntries=function(){var n=[];return this.series&&this.series.forEach(function(t){var i=t._positionData;i.forEach(function(i){for(var f=-1,r=t.plot.grouped&&!t.x._hasCategories()&&!t.y._hasCategories()&&i.aggField.length<2?"All":i.aggField.slice(-1)[0],u=0;u<n.length;u+=1)if(n[u].key===r){f=u;break}-1===f&&t.chart._assignedColors[r]&&(n.push({key:r,fill:t.chart._assignedColors[r].fill,stroke:t.chart._assignedColors[r].stroke,opacity:t.chart._assignedColors[r].opacity,css:t.chart._assignedClasses[r],series:t,aggField:i.aggField}),f=n.length-1)})},this),n},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._heightPixels=function(){return t._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.chart.svg.node())}},t.series=function(n,t,i,r,u,f,e,o,s,h){this.chart=n,this.x=i,this.y=r,this.z=u,this.c=f,this.p=e,this.plot=o,this.categoryFields=t,this.aggregate=s,this.stacked=h,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(n){var u,s,e,i={min:0,max:0},t=null,f=null,r=[],h=0,o=this._positionData;return"x"===n?(t=this.x,f=this.y):"y"===n?(t=this.y,f=this.x):"z"===n?t=this.z:"p"===n?t=this.p:"c"===n&&(t=this.c),t.showPercent?o.forEach(function(n){n[t.position+"Bound"]<i.min&&(i.min=n[t.position+"Bound"]),n[t.position+"Bound"]>i.max&&(i.max=n[t.position+"Bound"])},this):null===f||null===f.categoryFields||0===f.categoryFields.length?o.forEach(function(n){!this._isStacked()||"x"!==t.position&&"y"!==t.position?(n[t.position+"Value"]<i.min&&(i.min=n[t.position+"Value"]),n[t.position+"Value"]>i.max&&(i.max=n[t.position+"Value"])):n[t.position+"Value"]<0?i.min=i.min+n[t.position+"Value"]:i.max=i.max+n[t.position+"Value"]},this):(u=t.position+"Value",s=f.position+"Field",e=[],o.forEach(function(n){var i=n[s].join("/"),t=e.indexOf(i);-1===t&&(e.push(i),t=e.length-1),void 0===r[t]&&(r[t]={min:0,max:0},t>=h&&(h=t+1)),this.stacked?n[u]<0?r[t].min=r[t].min+n[u]:r[t].max=r[t].max+n[u]:(n[u]<r[t].min&&(r[t].min=n[u]),n[u]>r[t].max&&(r[t].max=n[u]))},this),r.forEach(function(n){void 0!==n&&(n.min<i.min&&(i.min=n.min),n.max>i.max&&(i.max=n.max))},this)),i},this._deepMatch=function(n){var t=!1;return this[n.position]===n?t=!0:void 0!==n._slaves&&null!==n._slaves&&n._slaves.length>0&&n._slaves.forEach(function(n){t=t||this._deepMatch(n)},this),t},this._dropLineOrigin=function(){var i=0,r=0,t={x:null,y:null},n={x:null,y:null};return this.chart.axes.forEach(function(t){"x"===t.position&&null===n.x?n.x=t._hasTimeField()?this.chart._xPixels():t._origin:"y"===t.position&&null===n.y&&(n.y=t._hasTimeField()?this.chart._yPixels()+this.chart._heightPixels():t._origin)},this),this.chart.axes.forEach(function(u){"x"!==u.position||this.x.hidden?"y"!==u.position||this.y.hidden||(this._deepMatch(u)&&(0===r?t.x=n.x:1===r&&(t.x=this.chart._xPixels()+this.chart._widthPixels())),r+=1):(this._deepMatch(u)&&(0===i?t.y=n.y:1===i&&(t.y=this.chart._yPixels())),i+=1)},this),t},this._getTooltipFontSize=function(){return this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(n,t){this._eventHandlers.push({event:n,handler:t})},this.addOrderRule=function(n,t){this._orderRules.push({ordering:n,desc:t})},this.getTooltipText=function(n){var t=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(i,r){null!==i&&void 0!==i&&null!==n.aggField[r]&&void 0!==n.aggField[r]&&t.push(i+(n.aggField[r]!==i?": "+n.aggField[r]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(t,n),this.y&&this.y._hasCategories()&&this.y._getTooltipText(t,n),this.z&&this.z._hasCategories()&&this.z._getTooltipText(t,n),this.p._getTooltipText(t,n)):(this.x&&this.x._getTooltipText(t,n),this.y&&this.y._getTooltipText(t,n),this.z&&this.z._getTooltipText(t,n)),this.c&&this.c._getTooltipText(t,n),t.filter(function(n,i){return t.indexOf(n)===i})}},t.storyboard=function(n,t){null!==t&&void 0!==t&&(t=[].concat(t)),this.chart=n,this.categoryFields=t,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var i=this.chart,n=this,t=0;this.chart.axes.forEach(function(n){"x"===n.position&&(t+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(t>1?1.25:-1)).call(function(){i.noFormats||this.style("font-family",n.fontFamily).style("font-size",n._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(n){var i=-1,t="";null!==this.categoryFields&&(this.categoryFields.forEach(function(i,r){r>0&&(t+="/"),t+=n[i]},this),i=this._categories.indexOf(t),-1===i&&(this._categories.push(t),i=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(n){this._frame=n%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(n,t){this._orderRules.push({ordering:n,desc:t})},this.getFrameValue=function(){var n=null;return this._frame>=0&&this._getCategories().length>this._frame&&(n=this._getCategories()[this._frame]),n},this.goToFrame=function(n){if(this._getCategories().length>0){var t=this._getCategories().indexOf(n);this._goToFrameIndex(t)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(n){return function(){n._goToFrameIndex(n._frame+1),null!==n.onTick&&n.onTick(n.getFrameValue()),n._drawText(n.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},t.aggregateMethod.avg=function(n,t){return n.value=null===n.value||void 0===n.value?0:parseFloat(n.value),n.count=null===n.count||void 0===n.count?1:parseFloat(n.count),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),(n.value*n.count+t.value*t.count)/(n.count+t.count)},t.aggregateMethod.count=function(n,t){return n.count=null===n.count||void 0===n.count?0:parseFloat(n.count),t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),n.count+t.count},t.aggregateMethod.max=function(n,t){return n.value=null===n.value||void 0===n.value?0:parseFloat(n.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),n.value>t.value?n.value:t.value},t.aggregateMethod.min=function(n,t){return null===n.value?parseFloat(t.value):parseFloat(n.value)<parseFloat(t.value)?parseFloat(n.value):parseFloat(t.value)},t.aggregateMethod.sum=function(n,t){return n.value=null===n.value||void 0===n.value?0:parseFloat(n.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),n.value+t.value},t.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,r,u){var v,f,l,a,ot,ht,ut,yt,pt,st,o,g,ft,nt,ct,w,it,y,h,lt,c,tt,d=r._positionData,e=[],et=null,at="dimple-series-"+i.series.indexOf(r),bt=r.x._hasCategories()||r.y._hasCategories()?0:1,rt=!1,b={},p=[],s=[],kt=function(){return function(i,r,u,f){n.select(r).style("opacity",1),t._showPointTooltip(i,r,u,f)}},dt=function(i){return function(r,u,f,e){n.select(u).style("opacity",e.lineMarkers||i.data.length<2?t._helpers.opacity(r,f,e):0),t._removeTooltip(r,u,f,e)}},vt=function(n){t._drawMarkers(n,i,r,u,at,rt,kt(n),dt(n))},wt=function(n,u){var f;return"step"===r.interpolation&&r[n]._hasCategories()?(f=t._helpers[n](u,i,r)+("y"===n?t._helpers.height(u,i,r):0),r[n].categoryFields.length<2&&(f+=("y"===n?1:-1)*t._helpers[n+"Gap"](i,r))):f=t._helpers["c"+n](u,i,r),parseFloat(f)},k=function(t,i){return n.svg.line().x(function(n){return r.x._hasCategories()||!i?n.x:r.x[i]}).y(function(n){return r.y._hasCategories()||!i?n.y:r.y[i]}).interpolate(t)},gt=function(n,t){return parseFloat(n)-parseFloat(t)},ni=function(n,t){return parseFloat(n.x)-parseFloat(t.x)},ti=function(n,t,i){for(var f,u=t[t.length-1],e=9999,o=u,r=0;r<n.length;r+=1)(n[r].x!==u.x||n[r].y!==u.y)&&(f=180-Math.atan2(n[r].x-u.x,n[r].y-u.y)*(180/Math.PI),f>i&&e>f&&(o=n[r],e=f));return t.push(o),e};for(v="step"===r.interpolation?"step-after":r.interpolation,st=t._getSeriesOrder(r.data||i.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(rt=!0),r.x._hasCategories()?(c="x",tt="y"):r.y._hasCategories()&&(c="y",tt="x"),f=0;f<d.length;f+=1){for(ot=[],ut=-1,a=bt;a<d[f].aggField.length;a+=1)ot.push(d[f].aggField[a]);for(ht=t._createClass(ot),a=0;a<e.length;a+=1)if(e[a].keyString===ht){ut=a;break}-1===ut&&(ut=e.length,e.push({key:ot,keyString:ht,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:c&&d[f][c+"Field"]&&d[f][c+"Field"].length>=2?d[f][c+"Field"][0]:"All"})),e[ut].data.push(d[f])}for(st&&e.sort(function(n,i){return t._arrayIndexCompare(st,n.key,i.key)}),f=0;f<e.length;f+=1){for(e[f].data.sort(t._getSeriesSortPredicate(i,r,st)),l=0;l<e[f].data.length;l+=1)e[f].points.push({x:wt("x",e[f].data[l]),y:wt("y",e[f].data[l])}),c&&(b[e[f].group]||(b[e[f].group]={}),b[e[f].group][e[f].points[e[f].points.length-1][c]]=r[tt]._origin);o=e[f].points,"step"===r.interpolation&&o.length>1&&c&&(r.x._hasCategories()?(o.push({x:2*o[o.length-1].x-o[o.length-2].x,y:o[o.length-1].y}),b[e[f].group][o[o.length-1][c]]=r[tt]._origin):r.y._hasCategories()&&(o=[{x:o[0].x,y:2*o[0].y-o[1].y}].concat(o),b[e[f].group][o[0][c]]=r[tt]._origin,e[f].points=o))}for(nt in b)if(b.hasOwnProperty(nt)){p[nt]=[];for(ct in b[nt])b[nt].hasOwnProperty(ct)&&p[nt].push(parseFloat(ct));p[nt].sort(gt)}for(f=0;f<e.length;f+=1){if(o=e[f].points,w=e[f].group,g=[],s=[],rt&&t._addGradient(e[f].key,"fill-area-gradient-"+e[f].keyString,r.x._hasCategories()?r.x:r.y,d,i,u,"fill"),p[w]&&p[w].length>0)for(l=0,a=0;l<p[w].length;l+=1)p[w][l]>=o[0][c]&&p[w][l]<=o[o.length-1][c]&&(ft={},ft[c]=p[w][l],ft[tt]=b[w][p[w][l]],g.push(ft),o[a][c]>p[w][l]?s.push(ft):(s.push(o[a]),b[e[f].group][p[w][l]]=o[a][tt],a+=1));else if(r._orderRules&&r._orderRules.length>0)s=o.concat(o[0]);else{o=o.sort(ni),s.push(o[0]),lt=0;do lt=ti(o,s,lt);while(s.length<=o.length&&(s[0].x!==s[s.length-1].x||s[0].y!==s[s.length-1].y))}g=g.reverse(),it=k(v,"_previousOrigin")(s),y=k("step-after"===v?"step-before":"step-before"===v?"step-after":v,"_previousOrigin")(g),h=k("linear","_previousOrigin")(s),e[f].entry=it+(y&&y.length>0?"L"+y.substring(1):"")+(h&&h.length>0?"L"+h.substring(1,h.indexOf("L")):0),it=k(v)(s),y=k("step-after"===v?"step-before":"step-before"===v?"step-after":v)(g),h=k("linear")(s),e[f].update=it+(y&&y.length>0?"L"+y.substring(1):"")+(h&&h.length>0?"L"+h.substring(1,h.indexOf("L")):0),it=k(v,"_origin")(s),y=k("step-after"===v?"step-before":"step-before"===v?"step-after":v,"_origin")(g),h=k("linear","_origin")(s),e[f].exit=it+(y&&y.length>0?"L"+y.substring(1):"")+(h&&h.length>0?"L"+h.substring(1,h.indexOf("L")):0),e[f].color=i.getColor(e[f].key.length>0?e[f].key[e[f].key.length-1]:"All"),e[f].css=i.getClass(e[f].key.length>0?e[f].key[e[f].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),et=null===r.shapes||void 0===r.shapes?i._group.selectAll("."+at).data(e):r.shapes.data(e,function(n){return n.key}),et.enter().append("path").attr("id",function(n){return n.key}).attr("class",function(n){return at+" dimple-line "+n.keyString+" "+i.customClassList.areaSeries+" "+n.css}).attr("d",function(n){return n.entry}).call(function(){i.noFormats||this.attr("opacity",function(n){return rt?1:n.color.opacity}).attr("fill",function(n){return rt?"url(#fill-area-gradient-"+n.keyString+")":n.color.fill}).attr("stroke",function(n){return rt?"url(#stroke-area-gradient-"+n.keyString+")":n.color.stroke}).attr("stroke-width",r.lineWeight)}).each(function(n){n.markerData=n.data,vt(n)}),yt=i._handleTransition(et,u,i).attr("d",function(n){return n.update}).each(function(n){n.markerData=n.data,vt(n)}),pt=i._handleTransition(et.exit(),u,i).attr("d",function(n){return n.exit}).each(function(n){n.markerData=[],vt(n)}),t._postDrawHandling(r,yt,pt,u),r.shapes=et}},t.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(n,i,r){var e,o,s=i._positionData,f=null,h=["dimple-series-"+n.series.indexOf(i),"dimple-bar"],c=!i._isStacked()&&i.x._hasMeasure(),l=!i._isStacked()&&i.y._hasMeasure(),u="none";i.x._hasCategories()&&i.y._hasCategories()?u="both":i.x._hasCategories()?u="x":i.y._hasCategories()&&(u="y"),null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),f=null===i.shapes||void 0===i.shapes?n._group.selectAll("."+h.join(".")).data(s):i.shapes.data(s,function(n){return n.key}),f.enter().append("rect").attr("id",function(n){return n.key}).attr("class",function(i){var r=[];return r=r.concat(i.aggField),r=r.concat(i.xField),r=r.concat(i.yField),h.join(" ")+" "+t._createClass(r)+" "+n.customClassList.barSeries+" "+t._helpers.css(i,n)}).attr("x",function(r){var f=i.x._previousOrigin;return"x"===u?f=t._helpers.x(r,n,i):"both"===u&&(f=t._helpers.cx(r,n,i)),f}).attr("y",function(r){var f=i.y._previousOrigin;return"y"===u?f=t._helpers.y(r,n,i):"both"===u&&(f=t._helpers.cy(r,n,i)),f}).attr("width",function(r){return"x"===u?t._helpers.width(r,n,i):0}).attr("height",function(r){return"y"===u?t._helpers.height(r,n,i):0}).attr("opacity",function(r){return t._helpers.opacity(r,n,i)}).on("mouseover",function(r){t._showBarTooltip(r,this,n,i)}).on("mouseleave",function(r){t._removeTooltip(r,this,n,i)}).call(function(){n.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,n,i)}).attr("stroke",function(r){return t._helpers.stroke(r,n,i)})}),e=n._handleTransition(f,r,n,i).attr("x",function(r){return c?t._helpers.cx(r,n,i)-i.x.floatingBarWidth/2:t._helpers.x(r,n,i)}).attr("y",function(r){return l?t._helpers.cy(r,n,i)-i.y.floatingBarWidth/2:t._helpers.y(r,n,i)}).attr("width",function(r){return c?i.x.floatingBarWidth:t._helpers.width(r,n,i)}).attr("height",function(r){return l?i.y.floatingBarWidth:t._helpers.height(r,n,i)}).call(function(){n.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,n,i)}).attr("stroke",function(r){return t._helpers.stroke(r,n,i)})}),o=n._handleTransition(f.exit(),r,n,i).attr("x",function(r){var f=i.x._origin;return"x"===u?f=t._helpers.x(r,n,i):"both"===u&&(f=t._helpers.cx(r,n,i)),f}).attr("y",function(r){var f=i.y._origin;return"y"===u?f=t._helpers.y(r,n,i):"both"===u&&(f=t._helpers.cy(r,n,i)),f}).attr("width",function(r){return"x"===u?t._helpers.width(r,n,i):0}).attr("height",function(r){return"y"===u?t._helpers.height(r,n,i):0}),t._postDrawHandling(i,e,o,r),i.shapes=f}},t.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(n,i,r){var f,e,o=i._positionData,u=null,s=["dimple-series-"+n.series.indexOf(i),"dimple-bubble"];null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),u=null===i.shapes||void 0===i.shapes?n._group.selectAll("."+s.join(".")).data(o):i.shapes.data(o,function(n){return n.key}),u.enter().append("circle").attr("id",function(n){return n.key}).attr("class",function(i){var r=[];return r=r.concat(i.aggField),r=r.concat(i.xField),r=r.concat(i.yField),r=r.concat(i.zField),s.join(" ")+" "+t._createClass(r)+" "+n.customClassList.bubbleSeries+" "+t._helpers.css(i,n)}).attr("cx",function(r){return i.x._hasCategories()?t._helpers.cx(r,n,i):i.x._previousOrigin}).attr("cy",function(r){return i.y._hasCategories()?t._helpers.cy(r,n,i):i.y._previousOrigin}).attr("r",0).attr("opacity",function(r){return t._helpers.opacity(r,n,i)}).on("mouseover",function(r){t._showPointTooltip(r,this,n,i)}).on("mouseleave",function(r){t._removeTooltip(r,this,n,i)}).call(function(){n.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,n,i)}).attr("stroke",function(r){return t._helpers.stroke(r,n,i)})}),f=n._handleTransition(u,r,n,i).attr("cx",function(r){return t._helpers.cx(r,n,i)}).attr("cy",function(r){return t._helpers.cy(r,n,i)}).attr("r",function(r){return t._helpers.r(r,n,i)}).call(function(){n.noFormats||this.attr("fill",function(r){return t._helpers.fill(r,n,i)}).attr("stroke",function(r){return t._helpers.stroke(r,n,i)})}),e=n._handleTransition(u.exit(),r,n,i).attr("r",0).attr("cx",function(r){return i.x._hasCategories()?t._helpers.cx(r,n,i):i.x._origin}).attr("cy",function(r){return i.y._hasCategories()?t._helpers.cy(r,n,i):i.y._origin}),t._postDrawHandling(i,f,e,r),i.shapes=u}},t.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,r,u){var v,f,s,o,y,w,h,g,nt,p,c=r._positionData,e=[],l=null,b="dimple-series-"+i.series.indexOf(r),it=r.x._hasCategories()||r.y._hasCategories()?0:1,a=!1,rt=function(){return function(i,r,u,f){n.select(r).style("opacity",1),t._showPointTooltip(i,r,u,f)}},ut=function(i){return function(r,u,f,e){n.select(u).style("opacity",e.lineMarkers||i.data.length<2?t._helpers.opacity(r,f,e):0),t._removeTooltip(r,u,f,e)}},k=function(n){t._drawMarkers(n,i,r,u,b,a,rt(n),ut(n))},tt=function(n,u){var f;return"step"===r.interpolation&&r[n]._hasCategories()?(r.barGap=0,r.clusterBarGap=0,f=t._helpers[n](u,i,r)+("y"===n?t._helpers.height(u,i,r):0)):f=t._helpers["c"+n](u,i,r),parseFloat(f.toFixed(1))},d=function(t,i){return n.svg.line().x(function(n){return r.x._hasCategories()||!i?n.x:r.x[i]}).y(function(n){return r.y._hasCategories()||!i?n.y:r.y[i]}).interpolate(t)};for(v="step"===r.interpolation?"step-after":r.interpolation,p=t._getSeriesOrder(r.data||i.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(a=!0),f=0;f<c.length;f+=1){for(y=[],h=-1,o=it;o<c[f].aggField.length;o+=1)y.push(c[f].aggField[o]);for(w=t._createClass(y),o=0;o<e.length;o+=1)if(e[o].keyString===w){h=o;break}-1===h&&(h=e.length,e.push({key:y,keyString:w,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),e[h].data.push(c[f])}for(p&&e.sort(function(n,i){return t._arrayIndexCompare(p,n.key,i.key)}),f=0;f<e.length;f+=1){for(e[f].data.sort(t._getSeriesSortPredicate(i,r,p)),a&&t._addGradient(e[f].key,"fill-line-gradient-"+e[f].keyString,r.x._hasCategories()?r.x:r.y,c,i,u,"fill"),s=0;s<e[f].data.length;s+=1)e[f].points.push({x:tt("x",e[f].data[s]),y:tt("y",e[f].data[s])});"step"===r.interpolation&&e[f].points.length>1&&(r.x._hasCategories()?e[f].points.push({x:2*e[f].points[e[f].points.length-1].x-e[f].points[e[f].points.length-2].x,y:e[f].points[e[f].points.length-1].y}):r.y._hasCategories()&&(e[f].points=[{x:e[f].points[0].x,y:2*e[f].points[0].y-e[f].points[1].y}].concat(e[f].points))),e[f].entry=d(v,"_previousOrigin")(e[f].points),e[f].update=d(v)(e[f].points),e[f].exit=d(v,"_origin")(e[f].points),e[f].color=i.getColor(e[f].key.length>0?e[f].key[e[f].key.length-1]:"All"),e[f].css=i.getClass(e[f].key.length>0?e[f].key[e[f].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),l=null===r.shapes||void 0===r.shapes?i._group.selectAll("."+b).data(e):r.shapes.data(e,function(n){return n.key}),l.enter().append("path").attr("id",function(n){return n.key}).attr("class",function(n){return b+" dimple-line "+n.keyString+" "+i.customClassList.lineSeries+" "+n.css}).attr("d",function(n){return n.entry}).call(function(){i.noFormats||this.attr("opacity",function(n){return a?1:n.color.opacity}).attr("fill","none").attr("stroke",function(n){return a?"url(#fill-line-gradient-"+n.keyString+")":n.color.stroke}).attr("stroke-width",r.lineWeight)}).each(function(n){n.markerData=n.data,k(n)}),g=i._handleTransition(l,u,i).attr("d",function(n){return n.update}).each(function(n){n.markerData=n.data,k(n)}),nt=i._handleTransition(l.exit(),u,i).attr("d",function(n){return n.exit}).each(function(n){n.markerData=[],k(n)}),t._postDrawHandling(r,g,nt,u),r.shapes=l}},t.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(i,r,u){var c,l,a=r._positionData,f=null,v=["dimple-series-"+i.series.indexOf(r),"dimple-pie"],y=function(n){return r.x&&r.y?t._helpers.r(n,i,r):i._widthPixels()<i._heightPixels()?i._widthPixels()/2:i._heightPixels()/2},e=function(n){var i=y(n);return r.outerRadius&&(i=t._parsePosition(r.outerRadius,i)),Math.max(i,0)},o=function(n){var i=0;return r.innerRadius&&(i=t._parsePosition(r.innerRadius,y(n))),Math.max(i,0)},s=function(t){var i;return i=n.svg.arc().innerRadius(o(t)).outerRadius(e(t)),i(t)},p=function(t){t.innerRadius=o(t),t.outerRadius=e(t);var i,r=n.interpolate(this._current,t);return i=n.svg.arc().innerRadius(function(n){return n.innerRadius}).outerRadius(function(n){return n.outerRadius}),this._current=r(0),function(n){return i(r(n))}},h=function(n){return function(u){var f,e;return r.x&&r.y?(f=!n||r.x._hasCategories()?t._helpers.cx(u,i,r):r.x._previousOrigin,e=!n||r.y._hasCategories()?t._helpers.cy(u,i,r):r.y._previousOrigin):(f=i._xPixels()+i._widthPixels()/2,e=i._yPixels()+i._heightPixels()/2),"translate("+f+","+e+")"}};null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),f=null===r.shapes||void 0===r.shapes?i._group.selectAll("."+v.join(".")).data(a):r.shapes.data(a,function(n){return n.key}),f.enter().append("path").attr("id",function(n){return n.key}).attr("class",function(n){var r=[];return r=r.concat(n.aggField),r=r.concat(n.pField),v.join(" ")+" "+t._createClass(r)+" "+i.customClassList.pieSeries+" "+t._helpers.css(n,i)}).attr("d",s).attr("opacity",function(n){return t._helpers.opacity(n,i,r)}).on("mouseover",function(n){t._showBarTooltip(n,this,i,r)}).on("mouseleave",function(n){t._removeTooltip(n,this,i,r)}).call(function(){i.noFormats||this.attr("fill",function(n){return t._helpers.fill(n,i,r)}).attr("stroke",function(n){return t._helpers.stroke(n,i,r)})}).attr("transform",h(!0)).each(function(n){this._current=n,n.innerRadius=o(n),n.outerRadius=e(n)}),c=i._handleTransition(f,u,i,r).call(function(){u&&u>0?this.attrTween("d",p):this.attr("d",s),i.noFormats||this.attr("fill",function(n){return t._helpers.fill(n,i,r)}).attr("stroke",function(n){return t._helpers.stroke(n,i,r)})}).attr("transform",h(!1)),l=i._handleTransition(f.exit(),u,i,r).attr("transform",h(!0)).attr("d",s),t._postDrawHandling(r,c,l,u),r.shapes=f}},t._addGradient=function(n,t,i,r,u,f,e){var l=[].concat(n),s=u._group.select("#"+t),o=[],h=i.position+"Field",a=!0,c=[];r.forEach(function(n){-1===o.indexOf(n[h])&&n.aggField.join("_")===l.join("_")&&o.push(n[h])},this),o=o.sort(function(n,t){return i._scale(n)-i._scale(t)}),null===s.node()&&(a=!1,s=u._group.append("linearGradient").attr("id",t).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===i.position?i._scale(o[0])+u._widthPixels()/o.length/2:0).attr("y1","y"===i.position?i._scale(o[0])-u._heightPixels()/o.length/2:0).attr("x2","x"===i.position?i._scale(o[o.length-1])+u._widthPixels()/o.length/2:0).attr("y2","y"===i.position?i._scale(o[o.length-1])-u._heightPixels()/o.length/2:0)),o.forEach(function(n,t){for(var u={},i=0,i=0;i<r.length;i+=1)if(r[i].aggField.join("_")===l.join("_")&&r[i][h].join("_")===n.join("_")){u=r[i];break}c.push({offset:Math.round(100*(t/(o.length-1)))+"%",color:u[e]})},this),a?u._handleTransition(s.selectAll("stop").data(c),f,u).attr("offset",function(n){return n.offset}).attr("stop-color",function(n){return n.color}):s.selectAll("stop").data(c).enter().append("stop").attr("offset",function(n){return n.offset}).attr("stop-color",function(n){return n.color})},t._arrayIndexCompare=function(n,t,i){for(var e,r,u,f,s,o=0;o<n.length;o+=1){for(u=!0,f=!0,s=[].concat(n[o]),r=0;r<t.length;r+=1)u=u&&t[r]===s[r];for(r=0;r<i.length;r+=1)f=f&&i[r]===s[r];if(u&&f){e=0;break}if(u){e=-1;break}if(f){e=1;break}}return e},t._createClass=function(n){var t,i=[],r=function(n){var t=n.charCodeAt(0),i="-";return t>=65&&90>=t&&(i=n.toLowerCase()),i};if(n.length>0)for(t=0;t<n.length;t+=1)i.push("dimple-"+n[t].toString().replace(/[^a-z0-9]/g,r));else i=["dimple-all"];return i.join(" ")},t._drawMarkerBacks=function(i,r,u,f,e){var o,s,h=["dimple-marker-back",e,i.keyString];u.lineMarkers&&(o=null===u._markerBacks||void 0===u._markerBacks||void 0===u._markerBacks[i.keyString]?r._group.selectAll("."+h.join(".")).data(i.markerData):u._markerBacks[i.keyString].data(i.markerData,function(n){return n.key}),o.enter().append("circle").attr("id",function(n){return n.key}).attr("class",function(n){var i=[];return u.x._hasCategories()&&(i=i.concat(n.xField)),u.y._hasCategories()&&(i=i.concat(n.yField)),t._createClass(i)+" "+h.join(" ")}).attr("cx",function(n){return u.x._hasCategories()?t._helpers.cx(n,r,u):u.x._previousOrigin}).attr("cy",function(n){return u.y._hasCategories()?t._helpers.cy(n,r,u):u.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),r._handleTransition(o,f,r).attr("cx",function(n){return t._helpers.cx(n,r,u)}).attr("cy",function(n){return t._helpers.cy(n,r,u)}).attr("r",2+u.lineWeight),s=r._handleTransition(o.exit(),f,r).attr("cx",function(n){return u.x._hasCategories()?t._helpers.cx(n,r,u):u.x._origin}).attr("cy",function(n){return u.y._hasCategories()?t._helpers.cy(n,r,u):u.y._origin}).attr("r",0),0===f?s.remove():s.each("end",function(){n.select(this).remove()}),(void 0===u._markerBacks||null===u._markerBacks)&&(u._markerBacks={}),u._markerBacks[i.keyString]=o)},t._drawMarkers=function(i,r,u,f,e,o,s,h){var c,l,a=["dimple-marker",e,i.keyString];t._drawMarkerBacks(i,r,u,f,e),c=null===u._markers||void 0===u._markers||void 0===u._markers[i.keyString]?r._group.selectAll("."+a.join(".")).data(i.markerData):u._markers[i.keyString].data(i.markerData,function(n){return n.key}),c.enter().append("circle").attr("id",function(n){return n.key}).attr("class",function(n){var i=[];return u.x._hasCategories()&&(i=i.concat(n.xField)),u.y._hasCategories()&&(i=i.concat(n.yField)),t._createClass(i)+" "+a.join(" ")+" "+r.customClassList.lineMarker}).on("mouseover",function(n){s(n,this,r,u)}).on("mouseleave",function(n){h(n,this,r,u)}).attr("cx",function(n){return u.x._hasCategories()?t._helpers.cx(n,r,u):u.x._previousOrigin}).attr("cy",function(n){return u.y._hasCategories()?t._helpers.cy(n,r,u):u.y._previousOrigin}).attr("r",0).attr("opacity",u.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){r.noFormats||this.attr("fill","white").style("stroke-width",u.lineWeight).attr("stroke",function(n){return o?t._helpers.fill(n,r,u):i.color.stroke})}),r._handleTransition(c,f,r).attr("cx",function(n){return t._helpers.cx(n,r,u)}).attr("cy",function(n){return t._helpers.cy(n,r,u)}).attr("r",2+u.lineWeight).attr("opacity",u.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){r.noFormats||this.attr("fill","white").style("stroke-width",u.lineWeight).attr("stroke",function(n){return o?t._helpers.fill(n,r,u):i.color.stroke})}),l=r._handleTransition(c.exit(),f,r).attr("cx",function(n){return u.x._hasCategories()?t._helpers.cx(n,r,u):u.x._origin}).attr("cy",function(n){return u.y._hasCategories()?t._helpers.cy(n,r,u):u.y._origin}).attr("r",0),0===f?l.remove():l.each("end",function(){n.select(this).remove()}),(void 0===u._markers||null===u._markers)&&(u._markers={}),u._markers[i.keyString]=c},t._getOrderedList=function(n,i,r){var s,e=[],h=[],u=[].concat(i),o=[].concat(i),f=[];return null!==r&&void 0!==r&&(f=f.concat(r)),f=f.concat({ordering:u,desc:!1}),f.forEach(function(t){var i,r=[],u=[];if("function"==typeof t.ordering){if(n&&n.length>0)for(i in n[0])n[0].hasOwnProperty(i)&&-1===o.indexOf(i)&&o.push(i)}else if(t.ordering instanceof Array){for(i=0;i<t.ordering.length;i+=1)n&&n.length>0&&n[0].hasOwnProperty(t.ordering[i])&&u.push(t.ordering[i]),r.push(t.ordering[i]);u.length>r.length/2?o.concat(u):t.values=r}else o.push(t.ordering)},this),s=t._rollUp(n,u,o),f.length>=1&&(f.forEach(function(n){var t=null===n.desc||void 0===n.desc?!1:n.desc,r=n.ordering,i=[],f=function(n){for(var i=0,t=0;t<n.length;t+=1){if(isNaN(n[t])){i=void 0;break}i+=parseFloat(n[t])}return i},o=function(n,t){var i=0,r=f(n),u=f(t);return isNaN(r)||isNaN(u)?isNaN(Date.parse(n[0]))||isNaN(Date.parse(t[0]))?n[0]<t[0]?i=-1:n[0]>t[0]&&(i=1):i=Date.parse(n[0])-Date.parse(t[0]):i=parseFloat(r)-parseFloat(u),i};"function"==typeof r?e.push(function(n,i){return(t?-1:1)*r(n,i)}):n.values&&n.values.length>0?(n.values.forEach(function(n){i.push([].concat(n).join("|"))},this),e.push(function(n,r){for(var e,o,s="",h="",f=0;f<u.length;f+=1)f>0&&(s+="|",h+="|"),s+=n[u[f]],h+=r[u[f]];return e=i.indexOf(s),o=i.indexOf(h),e=0>e?t?-1:i.length:e,o=0>o?t?-1:i.length:o,(t?-1:1)*(e-o)})):[].concat(n.ordering).forEach(function(n){e.push(function(i,r){var u=0;return void 0!==i[n]&&void 0!==r[n]&&(u=o([].concat(i[n]),[].concat(r[n]))),(t?-1:1)*u})})}),s.sort(function(n,t){for(var i=0,r=0;i<e.length&&0===r;)r=e[i](n,t),i+=1;return r}),s.forEach(function(n){var t,i=[];if(1===u.length)h.push(n[u[0]]);else{for(t=0;t<u.length;t+=1)i.push(n[u[t]]);h.push(i)}},this)),h},t._getSeriesOrder=function(n,i){var r=[].concat(i._orderRules),u=i.categoryFields,f=[];return null!==u&&void 0!==u&&u.length>0&&(null!==i.c&&void 0!==i.c&&i.c._hasMeasure()&&r.push({ordering:i.c.measure,desc:!0}),i.x._hasMeasure()&&r.push({ordering:i.x.measure,desc:!0}),i.y._hasMeasure()&&r.push({ordering:i.y.measure,desc:!0}),f=t._getOrderedList(n,u,r)),f},t._getSeriesSortPredicate=function(n,i,r){return function(u,f){var e=0;return i.x._hasCategories()&&(e=t._helpers.cx(u,n,i)-t._helpers.cx(f,n,i)),0===e&&i.y._hasCategories()&&(e=t._helpers.cy(u,n,i)-t._helpers.cy(f,n,i)),0===e&&r&&(e=t._arrayIndexCompare(r,u.aggField,f.aggField)),e}},t._helpers={cx:function(n,i,r){return null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(n.cx):r.x._hasCategories()&&r.x.categoryFields.length>=2?r.x._scale(n.cx)+t._helpers.xGap(i,r)+(n.xOffset+.5)*(i._widthPixels()/r.x._max-2*t._helpers.xGap(i,r))*n.width:r.x._scale(n.cx)+i._widthPixels()/r.x._max/2},cy:function(n,i,r){return null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(n.cy):null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2?r.y._scale(n.cy)-i._heightPixels()/r.y._max+t._helpers.yGap(i,r)+(n.yOffset+.5)*(i._heightPixels()/r.y._max-2*t._helpers.yGap(i,r))*n.height:r.y._scale(n.cy)-i._heightPixels()/r.y._max/2},r:function(n,t,i){var r=0,u=1;return null===i.z||void 0===i.z?r=i.radius&&"auto"!==i.radius?i.radius:5:(i.radius&&"auto"!==i.radius&&i.radius>1&&(u=i.radius/i.z._scale(i.z._max)),r=i.z._hasMeasure()?i.z._scale(n.r)*u:i.z._scale(t._heightPixels()/100)*u),r},xGap:function(n,t){var i=0;return(null===t.x.measure||void 0===t.x.measure)&&t.barGap>0&&(i=n._widthPixels()/t.x._max*(t.barGap>.99?.99:t.barGap)/2),i},xClusterGap:function(n,i,r){var u=0;return null!==r.x.categoryFields&&void 0!==r.x.categoryFields&&r.x.categoryFields.length>=2&&r.clusterBarGap>0&&!r.x._hasMeasure()&&(u=n.width*(i._widthPixels()/r.x._max-2*t._helpers.xGap(i,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),u},yGap:function(n,t){var i=0;return(null===t.y.measure||void 0===t.y.measure)&&t.barGap>0&&(i=n._heightPixels()/t.y._max*(t.barGap>.99?.99:t.barGap)/2),i},yClusterGap:function(n,i,r){var u=0;return null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2&&r.clusterBarGap>0&&!r.y._hasMeasure()&&(u=n.height*(i._heightPixels()/r.y._max-2*t._helpers.yGap(i,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),u},x:function(n,i,r){return r.x._hasTimeField()?r.x._scale(n.x)-t._helpers.width(n,i,r)/2:null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(n.x):r.x._scale(n.x)+t._helpers.xGap(i,r)+n.xOffset*(t._helpers.width(n,i,r)+2*t._helpers.xClusterGap(n,i,r))+t._helpers.xClusterGap(n,i,r)},y:function(n,i,r){return r.y._hasTimeField()?r.y._scale(n.y)-t._helpers.height(n,i,r)/2:null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(n.y):r.y._scale(n.y)-i._heightPixels()/r.y._max+t._helpers.yGap(i,r)+n.yOffset*(t._helpers.height(n,i,r)+2*t._helpers.yClusterGap(n,i,r))+t._helpers.yClusterGap(n,i,r)},width:function(n,i,r){return null!==r.x.measure&&void 0!==r.x.measure?Math.abs(r.x._scale(n.x<0?n.x-n.width:n.x+n.width)-r.x._scale(n.x)):r.x._hasTimeField()?r.x.floatingBarWidth:n.width*(i._widthPixels()/r.x._max-2*t._helpers.xGap(i,r))-2*t._helpers.xClusterGap(n,i,r)},height:function(n,i,r){return r.y._hasTimeField()?r.y.floatingBarWidth:null!==r.y.measure&&void 0!==r.y.measure?Math.abs(r.y._scale(n.y)-r.y._scale(n.y<=0?n.y+n.height:n.y-n.height)):n.height*(i._heightPixels()/r.y._max-2*t._helpers.yGap(i,r))-2*t._helpers.yClusterGap(n,i,r)},opacity:function(n,t,i){return null!==i.c&&void 0!==i.c?n.opacity:t.getColor(n.aggField.slice(-1)[0]).opacity},fill:function(n,t,i){return null!==i.c&&void 0!==i.c?n.fill:t.getColor(n.aggField.slice(-1)[0]).fill},stroke:function(n,t,i){return null!==i.c&&void 0!==i.c?n.stroke:t.getColor(n.aggField.slice(-1)[0]).stroke},css:function(n,t){return t.getClass(n.aggField.slice(-1)[0])}},t._parentHeight=function(n){var i=n.offsetHeight;return(0>=i||null===i||void 0===i)&&(i=n.clientHeight),(0>=i||null===i||void 0===i)&&(i=null===n.parentNode||void 0===n.parentNode?0:t._parentHeight(n.parentNode)),i},t._parentWidth=function(n){var i=n.offsetWidth;return(!i||0>i)&&(i=n.clientWidth),(!i||0>i)&&(i=n.parentNode?t._parentWidth(n.parentNode):0),i},t._parsePosition=function(n,t){var r,i=0;return n&&(r=n.toString().split(","),r.forEach(function(r){r&&(isNaN(r)?"%"===r.slice(-1)?i+=t*(parseFloat(r.slice(0,r.length-1))/100):"px"===r.slice(-2)?i+=parseFloat(r.slice(0,r.length-2)):i=n:i+=parseFloat(r))},this)),0>i&&(i=t+i),i},t._parseXPosition=function(n,i){return t._parsePosition(n,t._parentWidth(i))},t._parseYPosition=function(n,i){return t._parsePosition(n,t._parentHeight(i))},t._postDrawHandling=function(t,i,r,u){0===u?(i.each(function(n,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,n,i)}),r.remove()):(i.each("end",function(n,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,n,i)}),r.each("end",function(){n.select(this).remove()}))},t._removeTooltip=function(n,t,i){i._tooltipGroup&&i._tooltipGroup.remove()},t._rollUp=function(n,t,i){var r=[];return t=null!==t&&void 0!==t?[].concat(t):[],n.forEach(function(n){var f=-1,u={},e=!0;r.forEach(function(i,r){-1===f&&(e=!0,t.forEach(function(t){e=e&&n[t]===i[t]},this),e&&(f=r))},this),-1!==f?u=r[f]:(t.forEach(function(t){u[t]=n[t]},this),r.push(u),f=r.length-1),i.forEach(function(i){-1===t.indexOf(i)&&(void 0===u[i]&&(u[i]=[]),u[i]=u[i].concat(n[i]))},this),r[f]=u},this),r},t._showBarTooltip=function(t,i,r,u){var k,rt,o,g,it,a,s=5,v=10,nt=750,w=n.select(i),f=w.node().getBBox().x,e=w.node().getBBox().y,y=w.node().getBBox().width,p=w.node().getBBox().height,ut=w.attr("opacity"),h=w.attr("fill"),l=u._dropLineOrigin(),ft=n.rgb(n.rgb(h).r+.6*(255-n.rgb(h).r),n.rgb(h).g+.6*(255-n.rgb(h).g),n.rgb(h).b+.6*(255-n.rgb(h).b)),et=n.rgb(n.rgb(h).r+.8*(255-n.rgb(h).r),n.rgb(h).g+.8*(255-n.rgb(h).g),n.rgb(h).b+.8*(255-n.rgb(h).b)),ot=u.getTooltipText(t),b=0,c=0,d=0,tt=function(n,t){var u=w.node().getCTM(),i=r.svg.node().createSVGPoint();return i.x=n||0,i.y=t||0,i.matrixTransform(u)};null!==r._tooltipGroup&&void 0!==r._tooltipGroup&&r._tooltipGroup.remove(),r._tooltipGroup=r.svg.append("g"),u.p||(a=u._isStacked()?1:y/2,u.x._hasCategories()||null===l.y||r._tooltipGroup.append("line").attr("x1",f<u.x._origin?f+a:f+y-a).attr("y1",e<l.y?e+p:e).attr("x2",f<u.x._origin?f+a:f+y-a).attr("y2",e<l.y?e+p:e).style("fill","none").style("stroke",h).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",ut).transition().delay(nt/2).duration(nt/2).ease("linear").attr("y2",e<l.y?l.y-1:l.y+1),a=u._isStacked()?1:p/2,u.y._hasCategories()||null===l.x||r._tooltipGroup.append("line").attr("x1",f<l.x?f+y:f).attr("y1",e<u.y._origin?e+a:e+p-a).attr("x2",f<l.x?f+y:f).attr("y2",e<u.y._origin?e+a:e+p-a).style("fill","none").style("stroke",h).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",ut).transition().delay(nt/2).duration(nt/2).ease("linear").attr("x2",f<l.x?l.x-1:l.x+1)),k=r._tooltipGroup.append("g"),rt=k.append("rect").attr("class","dimple-tooltip "+r.customClassList.tooltipBox),k.selectAll(".dimple-dont-select-any").data(ot).enter().append("text").attr("class","dimple-tooltip "+r.customClassList.tooltipLabel).text(function(n){return n}).style("font-family",u.tooltipFontFamily).style("font-size",u._getTooltipFontSize()),k.each(function(){c=this.getBBox().width>c?this.getBBox().width:c,d=this.getBBox().width>d?this.getBBox().height:d}),k.selectAll("text").attr("x",0).attr("y",function(){return b+=this.getBBox().height,b-this.getBBox().height/2}),rt.attr("x",-s).attr("y",-s).attr("height",Math.floor(b+s)-.5).attr("width",c+2*s).attr("rx",5).attr("ry",5).style("fill",et).style("stroke",ft).style("stroke-width",2).style("opacity",.95),tt(f+y+s+v+c).x<parseFloat(r.svg.node().getBBox().width)?(o=f+y+s+v,g=e+p/2-(b-(d-s))/2):tt(f-(s+v+c)).x>0?(o=f-(s+v+c),g=e+p/2-(b-(d-s))/2):tt(0,e+p+b+v+s).y<parseFloat(r.svg.node().getBBox().height)?(o=f+y/2-(2*s+c)/2,o=o>0?o:v,o=o+c<parseFloat(r.svg.node().getBBox().width)?o:parseFloat(r.svg.node().getBBox().width)-c-v,g=e+p+2*s):(o=f+y/2-(2*s+c)/2,o=o>0?o:v,o=o+c<parseFloat(r.svg.node().getBBox().width)?o:parseFloat(r.svg.node().getBBox().width)-c-v,g=e-b-(d-s)),it=tt(o,g),k.attr("transform","translate("+it.x+" , "+it.y+")")},t._showPointTooltip=function(i,r,u,f){var w,nt,e,k,h=5,y=10,d=750,g=n.select(r),o=parseFloat(g.attr("cx")),c=parseFloat(g.attr("cy")),s=parseFloat(g.attr("r")),tt=t._helpers.opacity(i,u,f),l=g.attr("stroke"),v=f._dropLineOrigin(),it=n.rgb(n.rgb(l).r+.6*(255-n.rgb(l).r),n.rgb(l).g+.6*(255-n.rgb(l).g),n.rgb(l).b+.6*(255-n.rgb(l).b)),rt=n.rgb(n.rgb(l).r+.8*(255-n.rgb(l).r),n.rgb(l).g+.8*(255-n.rgb(l).g),n.rgb(l).b+.8*(255-n.rgb(l).b)),p=0,a=0,b=0,ut=f.getTooltipText(i);null!==u._tooltipGroup&&void 0!==u._tooltipGroup&&u._tooltipGroup.remove(),u._tooltipGroup=u.svg.append("g"),u._tooltipGroup.append("circle").attr("cx",o).attr("cy",c).attr("r",s).attr("opacity",0).style("fill","none").style("stroke",l).style("stroke-width",1).transition().duration(d/2).ease("linear").attr("opacity",1).attr("r",s+f.lineWeight+2).style("stroke-width",2),null!==v.y&&u._tooltipGroup.append("line").attr("x1",o).attr("y1",c<v.y?c+s+f.lineWeight+2:c-s-f.lineWeight-2).attr("x2",o).attr("y2",c<v.y?c+s+f.lineWeight+2:c-s-f.lineWeight-2).style("fill","none").style("stroke",l).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",tt).transition().delay(d/2).duration(d/2).ease("linear").attr("y2",c<v.y?v.y-1:v.y+1),null!==v.x&&u._tooltipGroup.append("line").attr("x1",o<v.x?o+s+f.lineWeight+2:o-s-f.lineWeight-2).attr("y1",c).attr("x2",o<v.x?o+s+f.lineWeight+2:o-s-f.lineWeight-2).attr("y2",c).style("fill","none").style("stroke",l).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",tt).transition().delay(d/2).duration(d/2).ease("linear").attr("x2",o<v.x?v.x-1:v.x+1),w=u._tooltipGroup.append("g"),nt=w.append("rect").attr("class","dimple-tooltip"),w.selectAll(".dont-select-any").data(ut).enter().append("text").attr("class","dimple-tooltip").text(function(n){return n}).style("font-family",f.tooltipFontFamily).style("font-size",f._getTooltipFontSize()),w.each(function(){a=this.getBBox().width>a?this.getBBox().width:a,b=this.getBBox().width>b?this.getBBox().height:b}),w.selectAll("text").attr("x",0).attr("y",function(){return p+=this.getBBox().height,p-this.getBBox().height/2}),nt.attr("x",-h).attr("y",-h).attr("height",Math.floor(p+h)-.5).attr("width",a+2*h).attr("rx",5).attr("ry",5).style("fill",rt).style("stroke",it).style("stroke-width",2).style("opacity",.95),o+s+h+y+a<parseFloat(u.svg.node().getBBox().width)?(e=o+s+h+y,k=c-(p-(b-h))/2):o-s-(h+y+a)>0?(e=o-s-(h+y+a),k=c-(p-(b-h))/2):c+s+p+y+h<parseFloat(u.svg.node().getBBox().height)?(e=o-(2*h+a)/2,e=e>0?e:y,e=e+a<parseFloat(u.svg.node().getBBox().width)?e:parseFloat(u.svg.node().getBBox().width)-a-y,k=c+s+2*h):(e=o-(2*h+a)/2,e=e>0?e:y,e=e+a<parseFloat(u.svg.node().getBBox().width)?e:parseFloat(u.svg.node().getBBox().width)-a-y,k=c-p-(b-h)),w.attr("transform","translate("+e+" , "+k+")")},t.filterData=function(n,t,i){var r=n;return null!==t&&null!==i&&(null!==i&&void 0!==i&&(i=[].concat(i)),r=[],n.forEach(function(n){null===n[t]?r.push(n):i.indexOf([].concat(n[t]).join("/"))>-1&&r.push(n)},this)),r},t.getUniqueValues=function(n,t){var i=[];return null!==t&&void 0!==t&&(t=[].concat(t),n.forEach(function(n){var r="";t.forEach(function(t,i){i>0&&(r+="/"),r+=n[t]},this),-1===i.indexOf(r)&&i.push(r)},this)),i},t.newSvg=function(t,i,r){var u=null;if((null===t||void 0===t)&&(t="body"),u=n.select(t),u.empty())throw"The '"+t+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return u.append("svg").attr("width",i).attr("height",r)},t});
/*!
Web Build: http://mootools.net/core/builder/b7c3eeae94f1c893ddb863093e8282ef
*/
!function(){function c(n,t,i){var f,u;if(r)for(f=r.length;f--;)u=r[f],l.call(n,u)&&t.call(i,u,n[u])}var w,i,u,n,a,o,s,h,p;this.MooTools={version:"1.6.0",build:"529422872adfff401b901b8b6c7ca5114ee95e2b"};var t=this.typeOf=function(n){if(null==n)return"null";if(null!=n.$family)return n.$family();if(n.nodeName){if(1==n.nodeType)return"element";if(3==n.nodeType)return/\S/.test(n.nodeValue)?"textnode":"whitespace"}else if("number"==typeof n.length){if("callee"in n)return"arguments";if("item"in n)return"collection"}return typeof n},l=(this.instanceOf=function(n,t){if(null==n)return!1;for(var i=n.$constructor||n.constructor;i;){if(i===t)return!0;i=i.parent}return n.hasOwnProperty?n instanceof t:!1},Object.prototype.hasOwnProperty),r=!0;for(w in{toString:1})r=null;r&&(r=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),i=this.Function,i.prototype.overloadSetter=function(n){var t=this;return function(i,r){if(null==i)return this;if(n||"string"!=typeof i){for(var u in i)t.call(this,u,i[u]);c(i,t,this)}else t.call(this,i,r);return this}},i.prototype.overloadGetter=function(n){var t=this;return function(i){var r,f,u;if("string"!=typeof i?r=i:arguments.length>1?r=arguments:n&&(r=[i]),r)for(f={},u=0;u<r.length;u++)f[r[u]]=t.call(this,r[u]);else f=t.call(this,i);return f}},i.prototype.extend=function(n,t){this[n]=t}.overloadSetter(),i.prototype.implement=function(n,t){this.prototype[n]=t}.overloadSetter(),u=Array.prototype.slice,Array.convert=function(i){return null==i?[]:n.isEnumerable(i)&&"string"!=typeof i?"array"==t(i)?i:u.call(i):[i]},i.convert=function(n){return"function"==t(n)?n:function(){return n}},Number.convert=function(n){var t=parseFloat(n);return isFinite(t)?t:null},String.convert=function(n){return n+""},i.from=i.convert,Number.from=Number.convert,String.from=String.convert,i.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}}),n=this.Type=function(i,r){if(i){var u=i.toLowerCase(),f=function(n){return t(n)==u};n["is"+i]=f,null!=r&&(r.prototype.$family=function(){return u}.hide())}return null==r?null:(r.extend(this),r.$constructor=n,r.prototype.$constructor=r,r)},a=Object.prototype.toString,n.isEnumerable=function(n){return null!=n&&"number"==typeof n.length&&"[object Function]"!=a.call(n)};var v={},y=function(n){var i=t(n.prototype);return v[i]||(v[i]=[])},f=function(n,i){var s,r,o,h;if(!i||!i.$hidden){for(s=y(this),r=0;r<s.length;r++)o=s[r],"type"==t(o)?f.call(o,n,i):o.call(this,n,i);h=this.prototype[n],null!=h&&h.$protected||(this.prototype[n]=i),null==this[n]&&"function"==t(i)&&e.call(this,n,function(n){return i.apply(n,u.call(arguments,1))})}},e=function(n,t){if(!t||!t.$hidden){var i=this[n];null!=i&&i.$protected||(this[n]=t)}};n.implement({implement:f.overloadSetter(),extend:e.overloadSetter(),alias:function(n,t){f.call(this,n,this.prototype[t])}.overloadSetter(),mirror:function(n){return y(this).push(n),this}}),new n("Type",n),o=function(t,i,r){var e=i!=Object,u=i.prototype,f,h,a;for(e&&(i=new n(t,i)),f=0,h=r.length;h>f;f++){var s=r[f],c=i[s],l=u[s];c&&c.protect(),e&&l&&i.implement(s,l.protect())}return e&&(a=u.propertyIsEnumerable(r[0]),i.forEachMethod=function(n){var t,f,i;if(!a)for(t=0,f=r.length;f>t;t++)n.call(u,u[r[t]],r[t]);for(i in u)n.call(u,u[i],i)}),o},o("String",String,["charAt","charCodeAt","concat","contains","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight","contains"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",i,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=e.overloadSetter(),Date.extend("now",function(){return+new Date}),new n("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",function(n,t){return Math.floor(Math.random()*(t-n+1)+n)}),Array.implement({forEach:function(n,t){for(var i=0,r=this.length;r>i;i++)i in this&&n.call(t,this[i],i,this)},each:function(n,t){return Array.forEach(this,n,t),this}}),Object.extend({keys:function(n){var t=[],i;for(i in n)l.call(n,i)&&t.push(i);return c(n,function(n){t.push(n)}),t},forEach:function(n,t,i){Object.keys(n).forEach(function(r){t.call(i,n[r],r,n)})}}),Object.each=Object.forEach,s=function(n){switch(t(n)){case"array":return n.clone();case"object":return Object.clone(n);default:return n}},Array.implement("clone",function(){for(var n=this.length,t=new Array(n);n--;)t[n]=s(this[n]);return t}),h=function(n,i,r){switch(t(r)){case"object":"object"==t(n[i])?Object.merge(n[i],r):n[i]=Object.clone(r);break;case"array":n[i]=r.clone();break;default:n[i]=r}return n},Object.extend({merge:function(n,i,r){var u,o,f,e;if("string"==t(i))return h(n,i,r);for(u=1,o=arguments.length;o>u;u++){f=arguments[u];for(e in f)h(n,e,f[e])}return n},clone:function(n){var i={},t;for(t in n)i[t]=s(n[t]);return i},append:function(n){for(var i,r,t=1,u=arguments.length;u>t;t++){i=arguments[t]||{};for(r in i)n[r]=i[r]}return n}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(t){new n(t)}),p=Date.now(),String.extend("uniqueID",function(){return(p++).toString(36)})}(),Array.implement({every:function(n,t){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&!n.call(t,this[i],i,this))return!1;return!0},filter:function(n,t){for(var r,u=[],i=0,f=this.length>>>0;f>i;i++)i in this&&(r=this[i],n.call(t,r,i,this)&&u.push(r));return u},indexOf:function(n,t){for(var r=this.length>>>0,i=0>t?Math.max(0,r+t):t||0;r>i;i++)if(this[i]===n)return i;return-1},map:function(n,t){for(var r=this.length>>>0,u=Array(r),i=0;r>i;i++)i in this&&(u[i]=n.call(t,this[i],i,this));return u},some:function(n,t){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&n.call(t,this[i],i,this))return!0;return!1},clean:function(){return this.filter(function(n){return null!=n})},invoke:function(n){var t=Array.slice(arguments,1);return this.map(function(i){return i[n].apply(i,t)})},associate:function(n){for(var i={},r=Math.min(this.length,n.length),t=0;r>t;t++)i[n[t]]=this[t];return i},link:function(n){for(var i,r={},t=0,u=this.length;u>t;t++)for(i in n)if(n[i](this[t])){r[i]=this[t],delete n[i];break}return r},contains:function(n,t){return-1!=this.indexOf(n,t)},append:function(n){return this.push.apply(this,n),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(n){return this.contains(n)||this.push(n),this},combine:function(n){for(var t=0,i=n.length;i>t;t++)this.include(n[t]);return this},erase:function(n){for(var t=this.length;t--;)this[t]===n&&this.splice(t,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var t,i=[],n=0,r=this.length;r>n;n++)t=typeOf(this[n]),"null"!=t&&(i=i.concat("array"==t||"collection"==t||"arguments"==t||instanceOf(this[n],Array)?Array.flatten(this[n]):this[n]));return i},pick:function(){for(var n=0,t=this.length;t>n;n++)if(null!=this[n])return this[n];return null},hexToRgb:function(n){if(3!=this.length)return null;var t=this.map(function(n){return 1==n.length&&(n+=n),parseInt(n,16)});return n?t:"rgb("+t+")"},rgbToHex:function(n){var t,i,r;if(this.length<3)return null;if(4==this.length&&0==this[3]&&!n)return"transparent";for(t=[],i=0;3>i;i++)r=(this[i]-0).toString(16),t.push(1==r.length?"0"+r:r);return n?t:"#"+t.join("")}}),Function.extend({attempt:function(){for(var n=0,t=arguments.length;t>n;n++)try{return arguments[n]()}catch(i){}return null}}),Function.implement({attempt:function(n,t){try{return this.apply(t,Array.convert(n))}catch(i){}return null},bind:function(n){var i=this,t=arguments.length>1?Array.slice(arguments,1):null,r=function(){},u=function(){var f=n,e=arguments.length,o;return this instanceof u&&(r.prototype=i.prototype,f=new r),o=t||e?i.apply(f,t&&e?t.concat(Array.slice(arguments)):t||arguments):i.call(f),f==n?o:f};return u},pass:function(n,t){var i=this;return null!=n&&(n=Array.convert(n)),function(){return i.apply(t,n||arguments)}},delay:function(n,t,i){return setTimeout(this.pass(null==i?[]:i,t),n)},periodical:function(n,t,i){return setInterval(this.pass(null==i?[]:i,t),n)}}),Number.implement({limit:function(n,t){return Math.min(t,Math.max(n,this))},round:function(n){return n=Math.pow(10,n||0).toFixed(0>n?-n:0),Math.round(this*n)/n},times:function(n,t){for(var i=0;this>i;i++)n.call(t,i,this)},toFloat:function(){return parseFloat(this)},toInt:function(n){return parseInt(this,n||10)}}),Number.alias("each","times"),function(n){var t={};n.each(function(n){Number[n]||(t[n]=function(){return Math[n].apply(null,[this].concat(Array.convert(arguments)))})}),Number.implement(t)}(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]),String.implement({contains:function(n,t){return(t?String(this).slice(t):String(this)).indexOf(n)>-1},test:function(n,t){return("regexp"==typeOf(n)?n:new RegExp(""+n,t)).test(this)},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(n){return n.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(n){return"-"+n.charAt(0).toLowerCase()})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(n){return n.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(n){return parseInt(this,n||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(n){var t=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return t?t.slice(1).hexToRgb(n):null},rgbToHex:function(n){var t=String(this).match(/\d{1,3}/g);return t?t.rgbToHex(n):null},substitute:function(n,t){return String(this).replace(t||/\\?\{([^{}]+)\}/g,function(t,i){return"\\"==t.charAt(0)?t.slice(1):null!=n[i]?n[i]:""})}}),function(){var n=this.document,i=n.window=this,e=function(n,t){n=n.toLowerCase(),t=t?t.toLowerCase():"";var i=n.match(/(edge)[\s\/:]([\w\d\.]+)/);return i||(i=n.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,"unknown",0]),"trident"==i[1]?(i[1]="ie",i[4]&&(i[2]=i[4])):"crios"==i[1]&&(i[1]="chrome"),t=n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||n.match(/mac|win|linux/)||["other"])[0],"win"==t&&(t="windows"),{extend:Function.prototype.extend,name:"version"==i[1]?i[3]:i[1],version:parseFloat("opera"==i[1]&&i[4]?i[4]:i[2]),platform:t}},t=this.Browser=e(navigator.userAgent,navigator.platform),r,u,f,o;if("ie"==t.name&&n.documentMode&&(t.version=n.documentMode),t.extend({Features:{xpath:!!n.evaluate,air:!!i.runtime,query:!!n.querySelector,json:!!i.JSON},parseUA:e}),t.Request=function(){var n=function(){return new XMLHttpRequest},t=function(){return new ActiveXObject("MSXML2.XMLHTTP")},i=function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Function.attempt(function(){return n(),n},function(){return t(),t},function(){return i(),i})}(),t.Features.xhr=!!t.Request,t.exec=function(t){if(!t)return t;if(i.execScript)i.execScript(t);else{var r=n.createElement("script");r.setAttribute("type","text/javascript"),r.text=t,n.head.appendChild(r),n.head.removeChild(r)}return t},String.implement("stripScripts",function(n){var i="",r=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(n,t){return i+=t+"\n",""});return n===!0?t.exec(i):"function"==typeOf(n)&&n(i,r),r}),t.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event}),this.Window=this.$constructor=new Type("Window",function(){}),this.$family=Function.convert("window").hide(),Window.mirror(function(n,t){i[n]=t}),this.Document=n.$constructor=new Type("Document",function(){}),n.$family=Function.convert("document").hide(),Document.mirror(function(t,i){n[t]=i}),n.html=n.documentElement,n.head||(n.head=n.getElementsByTagName("head")[0]),n.execCommand)try{n.execCommand("BackgroundImageCache",!1,!0)}catch(s){}this.attachEvent&&!this.addEventListener&&(r=function(){this.detachEvent("onunload",r),n.head=n.html=n.window=null,i=this.Window=n=null},this.attachEvent("onunload",r)),u=Array.convert;try{u(n.html.childNodes)}catch(s){Array.convert=function(n){if("string"!=typeof n&&Type.isEnumerable(n)&&"array"!=typeOf(n)){for(var t=n.length,i=new Array(t);t--;)i[t]=n[t];return i}return u(n)},f=Array.prototype,o=f.slice,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(n){var t=f[n];Array[n]=function(n){return t.apply(Array.convert(n),o.call(arguments,1))}})}}(),function(){var n=this.Class=new Type("Class",function(i){instanceOf(i,Function)&&(i={initialize:i});var u=function(){if(t(this),u.$prototyping)return this;this.$caller=null,this.$family=null;var n=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,n}.extend(this).implement(i);return u.$constructor=n,u.prototype.$constructor=u,u.prototype.parent=r,u}),r=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var n=this.$caller.$name,t=this.$caller.$owner.parent,i=t?t.prototype[n]:null;if(!i)throw new Error('The method "'+n+'" has no parent.');return i.apply(this,arguments)},t=function(n){var i,r,u;for(i in n){r=n[i];switch(typeOf(r)){case"object":u=function(){},u.prototype=r,n[i]=t(new u);break;case"array":n[i]=r.clone()}}return n},u=function(n,t,i){i.$origin&&(i=i.$origin);var r=function(){var u,n,f;if(i.$protected&&null==this.$caller)throw new Error('The method "'+t+'" cannot be called.');return u=this.caller,n=this.$caller,this.caller=n,this.$caller=r,f=i.apply(this,arguments),this.$caller=n,this.caller=u,f}.extend({$owner:n,$origin:i,$name:t});return r},i=function(t,i,r){if(n.Mutators.hasOwnProperty(t)&&(i=n.Mutators[t].call(this,i),null==i))return this;if("function"==typeOf(i)){if(i.$hidden)return this;this.prototype[t]=r?i:u(this,t,i)}else Object.merge(this.prototype,t,i);return this},f=function(n){n.$prototyping=!0;var t=new n;return delete n.$prototyping,t};n.implement("implement",i.overloadSetter()),n.Mutators={Extends:function(n){this.parent=n,this.prototype=f(n)},Implements:function(n){Array.convert(n).each(function(n){var r=new n,t;for(t in r)i.call(this,t,r[t],!0)},this)}}}(),function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return this.$chain.length?this.$chain.shift().apply(this,arguments):!1},clearChain:function(){return this.$chain.empty(),this}});var n=function(n){return n.replace(/^on([A-Z])/,function(n,t){return t.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(t,i,r){return t=n(t),this.$events[t]=(this.$events[t]||[]).include(i),r&&(i.internal=!0),this},addEvents:function(n){for(var t in n)this.addEvent(t,n[t]);return this},fireEvent:function(t,i,r){t=n(t);var u=this.$events[t];return u?(i=Array.convert(i),u.each(function(n){r?n.delay(r,this,i):n.apply(this,i)},this),this):this},removeEvent:function(t,i){var r,u;return t=n(t),r=this.$events[t],r&&!i.internal&&(u=r.indexOf(i),-1!=u&&delete r[u]),this},removeEvents:function(t){var i,r,u;if("object"==typeOf(t)){for(i in t)this.removeEvent(i,t[i]);return this}t&&(t=n(t));for(i in this.$events)if(!t||t==i)for(r=this.$events[i],u=r.length;u--;)u in r&&this.removeEvent(i,r[u]);return this}}),this.Options=new Class({setOptions:function(){var t=this.options=Object.merge.apply(null,[{},this.options].append(arguments)),n;if(this.addEvent)for(n in t)"function"==typeOf(t[n])&&/^on[A-Z]/.test(n)&&(this.addEvent(n,t[n]),delete t[n]);return this}})}(),function(){function i(r,u){var e,f;if(r.$thenableState===t)if(r===u)n(r,new TypeError("Tried to resolve a thenable with itself."));else if(u&&("object"==typeof u||"function"==typeof u)){try{e=u.then}catch(h){n(r,h)}"function"==typeof e?(f=!1,o(function(){try{e.call(u,function(n){f||(f=!0,i(r,n))},function(t){f||(f=!0,n(r,t))})}catch(t){f||(f=!0,n(r,t))}})):s(r,u)}else s(r,u)}function s(n,i){n.$thenableState===t&&(n.$thenableResult=i,n.$thenableState=f,u(n))}function n(n,i){n.$thenableState===t&&(n.$thenableResult=i,n.$thenableState=e,u(n))}function h(n){n.$thenableState!==t&&(n.$thenableResult=null,n.$thenableState=t)}function u(n){var t,i=n.$thenableState,r=n.$thenableResult,u=n.$thenableReactions;i===f?(n.$thenableReactions=[],t="fulfillHandler"):i==e&&(n.$thenableReactions=[],t="rejectHandler"),t&&o(c.pass([r,u,t]))}function c(t,r,u){for(var f,o,e=0,s=r.length;s>e;++e)if(f=r[e],o=f[u],"Identity"===o)i(f.thenable,t);else if("Thrower"===o)n(f.thenable,t);else try{i(f.thenable,o(t))}catch(h){n(f.thenable,h)}}var t=0,f=1,e=2,r=Class.Thenable=new Class({$thenableState:t,$thenableResult:null,$thenableReactions:[],resolve:function(n){return i(this,n),this},reject:function(t){return n(this,t),this},getThenableState:function(){switch(this.$thenableState){case t:return"pending";case f:return"fulfilled";case e:return"rejected"}},resetThenable:function(t){return n(this,t),h(this),this},then:function(n,i){"function"!=typeof n&&(n="Identity"),"function"!=typeof i&&(i="Thrower");var f=new r;return this.$thenableReactions.push({thenable:f,fulfillHandler:n,rejectHandler:i}),this.$thenableState!==t&&u(this),f},"catch":function(n){return this.then(null,n)}}),o;r.extend({resolve:function(n){var t;return n instanceof r?t=n:(t=new r,i(t,n)),t},reject:function(t){var i=new r;return n(i,t),i}}),o="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick:"undefined"!=typeof setImmediate?setImmediate:function(n){setTimeout(n,0)}}(),function(){Object.extend({subset:function(n,t){for(var i,u={},r=0,f=t.length;f>r;r++)i=t[r],i in n&&(u[i]=n[i]);return u},map:function(n,t,i){for(var r,f={},e=Object.keys(n),u=0;u<e.length;u++)r=e[u],f[r]=t.call(i,n[r],r,n);return f},filter:function(n,t,i){for(var r,f,e={},o=Object.keys(n),u=0;u<o.length;u++)r=o[u],f=n[r],t.call(i,f,r,n)&&(e[r]=f);return e},every:function(n,t,i){for(var f,u=Object.keys(n),r=0;r<u.length;r++)if(f=u[r],!t.call(i,n[f],f))return!1;return!0},some:function(n,t,i){for(var f,u=Object.keys(n),r=0;r<u.length;r++)if(f=u[r],t.call(i,n[f],f))return!0;return!1},values:function(n){for(var u,i=[],r=Object.keys(n),t=0;t<r.length;t++)u=r[t],i.push(n[u]);return i},getLength:function(n){return Object.keys(n).length},keyOf:function(n,t){for(var u,r=Object.keys(n),i=0;i<r.length;i++)if(u=r[i],n[u]===t)return u;return null},contains:function(n,t){return null!=Object.keyOf(n,t)},toQueryString:function(n,t){var i=[];return Object.each(n,function(n,r){var u,f;t&&(r=t+"["+r+"]");switch(typeOf(n)){case"object":u=Object.toQueryString(n,r);break;case"array":f={},n.each(function(n,t){f[t]=n}),u=Object.toQueryString(f,r);break;default:u=r+"="+encodeURIComponent(n)}null!=n&&i.push(u)}),i.join("&")}})}(),function(){function h(e,o,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){var ft,it,rt,ut;if((o||-1===u)&&(n.expressions[++u]=[],r=-1,o))return"";if((h||c||-1===r)&&(h=h||" ",ft=n.expressions[u],f&&ft[r]&&(ft[r].reverseCombinator=s(h)),ft[++r]={combinator:h,tag:"*"}),it=n.expressions[u][r],l)it.tag=l.replace(t,"");else if(a)it.id=a.replace(t,"");else if(v)v=v.replace(t,""),it.classList||(it.classList=[]),it.classes||(it.classes=[]),it.classList.push(v),it.classes.push({value:v,regexp:new RegExp("(^|\\s)"+i(v)+"(\\s|$)")});else if(d)tt=tt||nt,tt=tt?tt.replace(t,""):null,it.pseudos||(it.pseudos=[]),it.pseudos.push({key:d.replace(t,""),value:tt,type:1==k.length?"class":"element"});else if(y){y=y.replace(t,""),b=(b||"").replace(t,"");switch(p){case"^=":ut=new RegExp("^"+i(b));break;case"$=":ut=new RegExp(i(b)+"$");break;case"~=":ut=new RegExp("(^|\\s)"+i(b)+"(\\s|$)");break;case"|=":ut=new RegExp("^"+i(b)+"(-|$)");break;case"=":rt=function(n){return b==n};break;case"*=":rt=function(n){return n&&n.indexOf(b)>-1};break;case"!=":rt=function(n){return b!=n};break;default:rt=function(n){return!!n}}""==b&&/^[*$^]=$/.test(p)&&(rt=function(){return!1}),rt||(rt=function(n){return n&&ut.test(n)}),it.attributes||(it.attributes=[]),it.attributes.push({key:y,operator:p,value:b,test:rt})}return""}var n,u,r,f,c={},l={},t=/\\/g,o=function(t,i){if(null==t)return null;if(t.Slick===!0)return t;t=(""+t).replace(/^\s+|\s+$/g,""),f=!!i;var r=f?l:c;if(r[t])return r[t];for(n={Slick:!0,expressions:[],raw:t,reverse:function(){return o(this.raw,!0)}},u=-1;t!=(t=t.replace(v,h)););return n.length=n.expressions.length,r[n.raw]=f?a(n):n},s=function(n){return"!"===n?" ":" "===n?"!":/^!/.test(n)?n.replace(/^!/,""):"!"+n},a=function(n){for(var t,u=n.expressions,i=0;i<u.length;i++){for(var r=u[i],e={parts:[],tag:"*",combinator:s(r[0].combinator)},f=0;f<r.length;f++)t=r[f],t.reverseCombinator||(t.reverseCombinator=" "),t.combinator=t.reverseCombinator,delete t.reverseCombinator;r.reverse().push(e)}return n},i=function(n){return n.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(n){return"\\"+n})},v=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+i(">+~`!@$%^&={}\\;<\/")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),e=this.Slick||{};e.parse=function(n){return o(n)},e.escapeRegExp=i,this.Slick||(this.Slick=e)}.apply("undefined"!=typeof exports?exports:this),function(){var n={},o={},h=Object.prototype.toString,r,u,f,e,i,t;n.isNativeCode=function(n){return/\{\s*\[native code\]\s*\}/.test(""+n)},n.isXML=function(n){return!!n.xmlVersion||!!n.xml||"[object XMLDocument]"==h.call(n)||9==n.nodeType&&"HTML"!=n.documentElement.nodeName},n.setDocument=function(n){var l=n.nodeType,h,c;if(9!=l)if(l)n=n.ownerDocument;else{if(!n.navigator)return;n=n.document}if(this.document!==n){this.document=n;var f,r=n.documentElement,a=this.getUIDXML(r),t=o[a];if(t)for(f in t)this[f]=t[f];else{t=o[a]={},t.root=r,t.isXMLDocument=this.isXML(n),t.brokenStarGEBTN=t.starSelectsClosedQSA=t.idGetsName=t.brokenMixedCaseQSA=t.brokenGEBCN=t.brokenCheckedQSA=t.brokenEmptyAttributeQSA=t.isHTMLDocument=t.nativeMatchesSelector=!1;var v,y,p,w,b,u,e="slick_uniqueid",i=n.createElement("div"),s=n.body||n.getElementsByTagName("body")[0]||r;s.appendChild(i);try{i.innerHTML='<a id="'+e+'"><\/a>',t.isHTMLDocument=!!n.getElementById(e)}catch(k){}if(t.isHTMLDocument){i.style.display="none",i.appendChild(n.createComment("")),y=i.getElementsByTagName("*").length>1;try{i.innerHTML="foo<\/foo>",u=i.getElementsByTagName("*"),v=u&&!!u.length&&"/"==u[0].nodeName.charAt(0)}catch(k){}t.brokenStarGEBTN=y||v;try{i.innerHTML='<a name="'+e+'"><\/a><b id="'+e+'"><\/b>',t.idGetsName=n.getElementById(e)===i.firstChild}catch(k){}if(i.getElementsByClassName){try{i.innerHTML='<a class="f"><\/a><a class="b"><\/a>',i.getElementsByClassName("b").length,i.firstChild.className="b",w=2!=i.getElementsByClassName("b").length}catch(k){}try{i.innerHTML='<a class="a"><\/a><a class="f b a"><\/a>',p=2!=i.getElementsByClassName("a").length}catch(k){}t.brokenGEBCN=w||p}if(i.querySelectorAll){try{i.innerHTML="foo<\/foo>",u=i.querySelectorAll("*"),t.starSelectsClosedQSA=u&&!!u.length&&"/"==u[0].nodeName.charAt(0)}catch(k){}try{i.innerHTML='<a class="MiX"><\/a>',t.brokenMixedCaseQSA=!i.querySelectorAll(".MiX").length}catch(k){}try{i.innerHTML='<select><option selected="selected">a<\/option><\/select>',t.brokenCheckedQSA=0==i.querySelectorAll(":checked").length}catch(k){}try{i.innerHTML='<a class=""><\/a>',t.brokenEmptyAttributeQSA=0!=i.querySelectorAll('[class*=""]').length}catch(k){}}try{i.innerHTML='<form action="s"><input id="action"/><\/form>',b="s"!=i.firstChild.getAttribute("action")}catch(k){}if(t.nativeMatchesSelector=r.matches||r.mozMatchesSelector||r.webkitMatchesSelector,t.nativeMatchesSelector)try{t.nativeMatchesSelector.call(r,":slick"),t.nativeMatchesSelector=null}catch(k){}}try{r.slick_expando=1,delete r.slick_expando,t.getUID=this.getUIDHTML}catch(k){t.getUID=this.getUIDXML}s.removeChild(i),i=u=s=null,t.getAttribute=t.isHTMLDocument&&b?function(n,t){var r=this.attributeGetters[t],i;return r?r.call(n):(i=n.getAttributeNode(t),i?i.nodeValue:null)}:function(n,t){var i=this.attributeGetters[t];return i?i.call(n):n.getAttribute(t)},t.hasAttribute=r&&this.isNativeCode(r.hasAttribute)?function(n,t){return n.hasAttribute(t)}:function(n,t){return n=n.getAttributeNode(t),!(!n||!n.specified&&!n.nodeValue)},h=r&&this.isNativeCode(r.contains),c=n&&this.isNativeCode(n.contains),t.contains=h&&c?function(n,t){return n.contains(t)}:h&&!c?function(t,i){return t===i||(t===n?n.documentElement:t).contains(i)}:r&&r.compareDocumentPosition?function(n,t){return n===t||!!(16&n.compareDocumentPosition(t))}:function(n,t){if(t)do if(t===n)return!0;while(t=t.parentNode);return!1},t.documentSorter=r.compareDocumentPosition?function(n,t){return n.compareDocumentPosition&&t.compareDocumentPosition?4&n.compareDocumentPosition(t)?-1:n===t?0:1:0}:"sourceIndex"in r?function(n,t){return n.sourceIndex&&t.sourceIndex?n.sourceIndex-t.sourceIndex:0}:n.createRange?function(n,t){if(!n.ownerDocument||!t.ownerDocument)return 0;var i=n.ownerDocument.createRange(),r=t.ownerDocument.createRange();return i.setStart(n,0),i.setEnd(n,0),r.setStart(t,0),r.setEnd(t,0),i.compareBoundaryPoints(Range.START_TO_END,r)}:null,r=null;for(f in t)this[f]=t[f]}}};var c=/^([#.]?)((?:[\w-]+|\*))$/,l=/\[.+[*$^]=(?:""|'')?\]/,s={};n.search=function(n,i,r,u){var f=this.found=u?null:r||[],rt,ut,b,pt,vt,g,k,nt,p,ft,tt,et,ot,st,ht,ct,lt,it,yt,v,at,wt;if(!n)return f;if(n.navigator)n=n.document;else if(!n.nodeType)return f;var w,o,e,h,y=this.uniques={},a=!(!r||!r.length),d=9==n.nodeType;if(this.document!==(d?n:n.ownerDocument)&&this.setDocument(n),a)for(o=f.length;o--;)y[this.getUID(f[o])]=!0;if("string"==typeof i){rt=i.match(c);n:if(rt){if(ut=rt[1],b=rt[2],ut){if("#"==ut){if(!this.isHTMLDocument||!d)break n;if(e=n.getElementById(b),!e)return f;if(this.idGetsName&&e.getAttributeNode("id").nodeValue!=b)break n;if(u)return e||null;a&&y[this.getUID(e)]||f.push(e)}else if("."==ut){if(!this.isHTMLDocument||(!n.getElementsByClassName||this.brokenGEBCN)&&n.querySelectorAll)break n;if(n.getElementsByClassName&&!this.brokenGEBCN){if(h=n.getElementsByClassName(b),u)return h[0]||null;for(o=0;e=h[o++];)a&&y[this.getUID(e)]||f.push(e)}else for(pt=new RegExp("(^|\\s)"+t.escapeRegExp(b)+"(\\s|$)"),h=n.getElementsByTagName("*"),o=0;e=h[o++];)if(className=e.className,className&&pt.test(className)){if(u)return e;a&&y[this.getUID(e)]||f.push(e)}}}else{if("*"==b&&this.brokenStarGEBTN)break n;if(h=n.getElementsByTagName(b),u)return h[0]||null;for(o=0;e=h[o++];)a&&y[this.getUID(e)]||f.push(e)}return a&&this.sort(f),u?null:f}n:if(n.querySelectorAll){if(!this.isHTMLDocument||s[i]||this.brokenMixedCaseQSA||this.brokenCheckedQSA&&i.indexOf(":checked")>-1||this.brokenEmptyAttributeQSA&&l.test(i)||!d&&i.indexOf(",")>-1||t.disableQSA)break n;g=i,k=n,d||(vt=k.getAttribute("id"),slickid="slickid__",k.setAttribute("id",slickid),g="#"+slickid+" "+g,n=k.parentNode);try{if(u)return n.querySelector(g)||null;h=n.querySelectorAll(g)}catch(bt){s[i]=1;break n}finally{d||(vt?k.setAttribute("id",vt):k.removeAttribute("id"),n=k)}if(this.starSelectsClosedQSA)for(o=0;e=h[o++];)e.nodeName>"@"&&(!a||!y[this.getUID(e)])&&f.push(e);else for(o=0;e=h[o++];)a&&y[this.getUID(e)]||f.push(e);return a&&this.sort(f),f}if(w=this.Slick.parse(i),!w.length)return f}else{if(null==i)return f;if(!i.Slick)return this.contains(n.documentElement||n,i)?(f?f.push(i):f=i,f):f;w=i}this.posNTH={},this.posNTHLast={},this.posNTHType={},this.posNTHTypeLast={},this.push=!a&&(u||1==w.length&&1==w.expressions[0].length)?this.pushArray:this.pushUID,null==f&&(f=[]),wt=w.expressions;n:for(o=0;yt=wt[o];o++)for(nt=0;v=yt[nt];nt++){if(tt="combinator:"+v.combinator,!this[tt])continue n;if(et=this.isXMLDocument?v.tag:v.tag.toUpperCase(),ot=v.id,st=v.classList,ht=v.classes,ct=v.attributes,lt=v.pseudos,at=nt===yt.length-1,this.bitUniques={},at?(this.uniques=y,this.found=f):(this.uniques={},this.found=[]),0===nt){if(this[tt](n,et,ot,ht,ct,lt,st),u&&at&&f.length)break n}else if(u&&at){for(p=0,ft=it.length;ft>p;p++)if(this[tt](it[p],et,ot,ht,ct,lt,st),f.length)break n}else for(p=0,ft=it.length;ft>p;p++)this[tt](it[p],et,ot,ht,ct,lt,st);it=this.found}return(a||w.expressions.length>1)&&this.sort(f),u?f[0]||null:f},n.uidx=1,n.uidk="slick-uniqueid",n.getUIDXML=function(n){var t=n.getAttribute(this.uidk);return t||(t=this.uidx++,n.setAttribute(this.uidk,t)),t},n.getUIDHTML=function(n){return n.uniqueNumber||(n.uniqueNumber=this.uidx++)},n.sort=function(n){return this.documentSorter?(n.sort(this.documentSorter),n):n},n.cacheNTH={},n.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/,n.parseNTHArgument=function(n){var t=n.match(this.matchNTH),r,i,u;return t?(r=t[2]||!1,i=t[1]||1,"-"==i&&(i=-1),u=+t[3]||0,t="n"==r?{a:i,b:u}:"odd"==r?{a:2,b:1}:"even"==r?{a:2,b:0}:{a:0,b:i},this.cacheNTH[n]=t):!1},n.createNTHPseudo=function(n,t,i,r){return function(u,f){var v=this.getUID(u),c,e,l,y,o;if(!this[i][v]){if(c=u.parentNode,!c)return!1;if(e=c[n],l=1,r){y=u.nodeName;do e.nodeName==y&&(this[i][this.getUID(e)]=l++);while(e=e[t])}else do 1==e.nodeType&&(this[i][this.getUID(e)]=l++);while(e=e[t])}if(f=f||"n",o=this.cacheNTH[f]||this.parseNTHArgument(f),!o)return!1;var a=o.a,s=o.b,h=this[i][v];if(0==a)return s==h;if(a>0){if(s>h)return!1}else if(h>s)return!1;return(h-s)%a==0}},n.pushArray=function(n,t,i,r,u,f){this.matchSelector(n,t,i,r,u,f)&&this.found.push(n)},n.pushUID=function(n,t,i,r,u,f){var e=this.getUID(n);!this.uniques[e]&&this.matchSelector(n,t,i,r,u,f)&&(this.uniques[e]=!0,this.found.push(n))},n.matchNode=function(n,t){var r,u,f,o,e,i,s,h;if(this.isHTMLDocument&&this.nativeMatchesSelector)try{return this.nativeMatchesSelector.call(n,t.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(c){}if(r=this.Slick.parse(t),!r)return!0;for(o=r.expressions,e=0,u=0;f=o[u];u++)if(1==f.length){if(i=f[0],this.matchSelector(n,this.isXMLDocument?i.tag:i.tag.toUpperCase(),i.id,i.classes,i.attributes,i.pseudos))return!0;e++}if(e==r.length)return!1;for(h=this.search(this.document,r),u=0;s=h[u++];)if(s===n)return!0;return!1},n.matchPseudo=function(n,t,i){var u="pseudo:"+t,r;return this[u]?this[u](n,i):(r=this.getAttribute(n,t),i?i==r:!!r)},n.matchSelector=function(n,t,i,r,u,f){var s,e,o,h;if(t)if(s=this.isXMLDocument?n.nodeName:n.nodeName.toUpperCase(),"*"==t){if("@">s)return!1}else if(s!=t)return!1;if(i&&n.getAttribute("id")!=i)return!1;if(r)for(e=r.length;e--;)if(h=this.getAttribute(n,"class"),!h||!r[e].regexp.test(h))return!1;if(u)for(e=u.length;e--;)if(o=u[e],o.operator?!o.test(this.getAttribute(n,o.key)):!this.hasAttribute(n,o.key))return!1;if(f)for(e=f.length;e--;)if(o=f[e],!this.matchPseudo(n,o.key,o.value))return!1;return!0},r={" ":function(n,t,i,r,u,f,e){var h,o,s,c;if(this.isHTMLDocument){n:if(i){if(o=this.document.getElementById(i),!o&&n.all||this.idGetsName&&o&&o.getAttributeNode("id").nodeValue!=i){if(s=n.all[i],!s)return;for(s[0]||(s=[s]),h=0;o=s[h++];)if(c=o.getAttributeNode("id"),c&&c.nodeValue==i){this.push(o,t,null,r,u,f);break}return}if(!o){if(this.contains(this.root,n))return;break n}return this.document!==n&&!this.contains(n,o)?void 0:void this.push(o,t,null,r,u,f)}n:if(r&&n.getElementsByClassName&&!this.brokenGEBCN){if(s=n.getElementsByClassName(e.join(" ")),!s||!s.length)break n;for(h=0;o=s[h++];)this.push(o,t,i,null,u,f);return}}if(s=n.getElementsByTagName(t),s&&s.length)for(this.brokenStarGEBTN||(t=null),h=0;o=s[h++];)this.push(o,t,i,r,u,f)},">":function(n,t,i,r,u,f){if(n=n.firstChild)do 1==n.nodeType&&this.push(n,t,i,r,u,f);while(n=n.nextSibling)},"+":function(n,t,i,r,u,f){for(;n=n.nextSibling;)if(1==n.nodeType){this.push(n,t,i,r,u,f);break}},"^":function(n,t,i,r,u,f){n=n.firstChild,n&&(1==n.nodeType?this.push(n,t,i,r,u,f):this["combinator:+"](n,t,i,r,u,f))},"~":function(n,t,i,r,u,f){for(;n=n.nextSibling;)if(1==n.nodeType){var e=this.getUID(n);if(this.bitUniques[e])break;this.bitUniques[e]=!0,this.push(n,t,i,r,u,f)}},"++":function(n,t,i,r,u,f){this["combinator:+"](n,t,i,r,u,f),this["combinator:!+"](n,t,i,r,u,f)},"~~":function(n,t,i,r,u,f){this["combinator:~"](n,t,i,r,u,f),this["combinator:!~"](n,t,i,r,u,f)},"!":function(n,t,i,r,u,f){for(;n=n.parentNode;)n!==this.document&&this.push(n,t,i,r,u,f)},"!>":function(n,t,i,r,u,f){n=n.parentNode,n!==this.document&&this.push(n,t,i,r,u,f)},"!+":function(n,t,i,r,u,f){for(;n=n.previousSibling;)if(1==n.nodeType){this.push(n,t,i,r,u,f);break}},"!^":function(n,t,i,r,u,f){n=n.lastChild,n&&(1==n.nodeType?this.push(n,t,i,r,u,f):this["combinator:!+"](n,t,i,r,u,f))},"!~":function(n,t,i,r,u,f){for(;n=n.previousSibling;)if(1==n.nodeType){var e=this.getUID(n);if(this.bitUniques[e])break;this.bitUniques[e]=!0,this.push(n,t,i,r,u,f)}}};for(u in r)n["combinator:"+u]=r[u];f={empty:function(n){var t=n.firstChild;return!(t&&1==t.nodeType||(n.innerText||n.textContent||"").length)},not:function(n,t){return!this.matchNode(n,t)},contains:function(n,t){return(n.innerText||n.textContent||"").indexOf(t)>-1},"first-child":function(n){for(;n=n.previousSibling;)if(1==n.nodeType)return!1;return!0},"last-child":function(n){for(;n=n.nextSibling;)if(1==n.nodeType)return!1;return!0},"only-child":function(n){for(var i,t=n;t=t.previousSibling;)if(1==t.nodeType)return!1;for(i=n;i=i.nextSibling;)if(1==i.nodeType)return!1;return!0},"nth-child":n.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":n.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":n.createNTHPseudo("firstChild","nextSibling","posNTHType",!0),"nth-last-of-type":n.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",!0),index:function(n,t){return this["pseudo:nth-child"](n,""+(t+1))},even:function(n){return this["pseudo:nth-child"](n,"2n")},odd:function(n){return this["pseudo:nth-child"](n,"2n+1")},"first-of-type":function(n){for(var t=n.nodeName;n=n.previousSibling;)if(n.nodeName==t)return!1;return!0},"last-of-type":function(n){for(var t=n.nodeName;n=n.nextSibling;)if(n.nodeName==t)return!1;return!0},"only-of-type":function(n){for(var i,t=n,r=n.nodeName;t=t.previousSibling;)if(t.nodeName==r)return!1;for(i=n;i=i.nextSibling;)if(i.nodeName==r)return!1;return!0},enabled:function(n){return!n.disabled},disabled:function(n){return n.disabled},checked:function(n){return n.checked||n.selected},focus:function(n){return this.isHTMLDocument&&this.document.activeElement===n&&(n.href||n.type||this.hasAttribute(n,"tabindex"))},root:function(n){return n===this.root},selected:function(n){return n.selected}};for(e in f)n["pseudo:"+e]=f[e];i=n.attributeGetters={"for":function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")},tabindex:function(){var n=this.getAttributeNode("tabindex");return n&&n.specified?n.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var n=this.getAttributeNode("maxLength");return n&&n.specified?n.nodeValue:null}},i.MAXLENGTH=i.maxLength=i.maxlength,t=n.Slick=this.Slick||{},t.version="1.1.7",t.search=function(t,i,r){return n.search(t,i,r)},t.find=function(t,i){return n.search(t,i,null,!0)},t.contains=function(t,i){return n.setDocument(t),n.contains(t,i)},t.getAttribute=function(t,i){return n.setDocument(t),n.getAttribute(t,i)},t.hasAttribute=function(t,i){return n.setDocument(t),n.hasAttribute(t,i)},t.match=function(t,i){return t&&i?i&&i!==t?(n.setDocument(t),n.matchNode(t,i)):!0:!1},t.defineAttributeGetter=function(t,i){return n.attributeGetters[t]=i,this},t.lookupAttributeGetter=function(t){return n.attributeGetters[t]},t.definePseudo=function(t,i){return n["pseudo:"+t]=function(n,t){return i.call(n,t)},this},t.lookupPseudo=function(t){var i=n["pseudo:"+t];return i?function(n){return i.call(this,n)}:null},t.override=function(t,i){return n.override(t,i),this},t.isXML=n.isXML,t.uidOf=function(t){return n.getUIDHTML(t)},this.Slick||(this.Slick=t)}.apply("undefined"!=typeof exports?exports:this),Element=this.Element=function(n,t){var e=Element.Constructors[n],r,u,i,f,o;if(e)return e(t);if("string"!=typeof n)return document.id(n).set(t);if(t||(t={}),!/^[\w-]+$/.test(n)){if(r=Slick.parse(n).expressions[0][0],n="*"==r.tag?"div":r.tag,r.id&&null==t.id&&(t.id=r.id),u=r.attributes,u)for(f=0,o=u.length;o>f;f++)i=u[f],null==t[i.key]&&(null!=i.value&&"="==i.operator?t[i.key]=i.value:i.value||i.operator||(t[i.key]=!0));r.classList&&null==t["class"]&&(t["class"]=r.classList.join(" "))}return document.newElement(n,t)},Browser.Element&&(Element.prototype=Browser.Element.prototype,Element.prototype._fireEvent=function(n){return function(t,i){return n.call(this,t,i)}}(Element.prototype.fireEvent)),new Type("Element",Element).mirror(function(n){if(!Array.prototype[n]){var t={};t[n]=function(){for(var u,f,i=[],e=arguments,r=!0,t=0,o=this.length;o>t;t++)u=this[t],f=i[t]=u[n].apply(u,e),r=r&&"element"==typeOf(f);return r?new Elements(i):i},Elements.implement(t)}}),Browser.Element||(Element.parent=Object,Element.Prototype={$constructor:Element,$family:Function.convert("element").hide()},Element.mirror(function(n,t){Element.Prototype[n]=t})),Element.Constructors={},IFrame=new Type("IFrame",function(){var n,i=Array.link(arguments,{properties:Type.isObject,iframe:function(n){return null!=n}}),t=i.properties||{},u,r;return i.iframe&&(n=document.id(i.iframe)),u=t.onload||function(){},delete t.onload,t.id=t.name=[t.id,t.name,n?n.id||n.name:"IFrame_"+String.uniqueID()].pick(),n=new Element(n||"iframe",t),r=function(){u.call(n.contentWindow)},window.frames[t.id]?r():n.addListener("load",r),n}),Elements=this.Elements=function(n){var t,i,u,r;if(n&&n.length)for(i={},u=0;t=n[u++];)r=Slick.uidOf(t),i[r]||(i[r]=!0,this.push(t))},Elements.prototype={length:0},Elements.parent=Array,new Type("Elements",Elements).implement({filter:function(n,t){return n?new Elements(Array.filter(this,"string"==typeOf(n)?function(t){return t.match(n)}:n,t)):this}.protect(),push:function(){for(var t,i=this.length,n=0,r=arguments.length;r>n;n++)t=document.id(arguments[n]),t&&(this[i++]=t);return this.length=i}.protect(),unshift:function(){for(var t,i=[],n=0,r=arguments.length;r>n;n++)t=document.id(arguments[n]),t&&i.push(t);return Array.prototype.unshift.apply(this,i)}.protect(),concat:function(){for(var n,t=new Elements(this),i=0,r=arguments.length;r>i;i++)n=arguments[i],Type.isEnumerable(n)?t.append(n):t.push(n);return t}.protect(),append:function(n){for(var t=0,i=n.length;i>t;t++)this.push(n[t]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()}),function(){var t=Array.prototype.splice,i={0:0,1:1,length:2},r,n,u;t.call(i,1,1),1==i[1]&&Elements.implement("splice",function(){for(var n=this.length,i=t.apply(this,arguments);n>=this.length;)delete this[n--];return i}.protect()),Array.forEachMethod(function(n,t){Elements.implement(t,n)}),Array.mirror(Elements);try{r="x"==document.createElement("<input name=x>").name}catch(f){}n=function(n){return(""+n).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},u=function(){var n=document.createElement("style"),t=!1;try{n.innerHTML="#justTesing{margin: 0px;}",t=!!n.innerHTML}catch(i){}return t}(),Document.implement({newElement:function(t,i){if(i){if(null!=i.checked&&(i.defaultChecked=i.checked),"checkbox"!=i.type&&"radio"!=i.type||null!=i.value||(i.value="on"),!u&&"style"==t){var f=document.createElement("style");return f.setAttribute("type","text/css"),i.type&&delete i.type,this.id(f).set(i)}r&&(t="<"+t,i.name&&(t+=' name="'+n(i.name)+'"'),i.type&&(t+=' type="'+n(i.type)+'"'),t+=">",delete i.name,delete i.type)}return this.id(this.createElement(t)).set(i)}})}(),function(){var y,e,i,rt,ut,s,ft,et,ot,t,st,g,tt,a,it,v;Slick.uidOf(window),Slick.uidOf(document),Document.implement({newTextNode:function(n){return this.createTextNode(n)},getDocument:function(){return this},getWindow:function(){return this.window},id:function(){var n={string:function(t,i,r){return t=Slick.find(r,"#"+t.replace(/(\W)/g,"\\$1")),t?n.element(t,i):null},element:function(n,t){if(Slick.uidOf(n),!t&&!n.$family&&!/^(?:object|embed)$/i.test(n.tagName)){var i=n.fireEvent;n._fireEvent=function(n,t){return i(n,t)},Object.append(n,Element.Prototype)}return n},object:function(t,i,r){return t.toElement?n.element(t.toElement(r),i):null}};return n.textnode=n.whitespace=n.window=n.document=function(n){return n},function(t,i,r){if(t&&t.$family&&t.uniqueNumber)return t;var u=typeOf(t);return n[u]?n[u](t,i,r||document):null}}()}),null==window.$&&Window.implement("$",function(n,t){return document.id(n,t,this.document)}),Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}}),[Document,Element].invoke("implement",{getElements:function(n){return Slick.search(this,n,new Elements)},getElement:function(n){return document.id(Slick.find(this,n))}}),y={contains:function(n){return Slick.contains(this,n)}},document.contains||Document.implement(y),document.createElement("div").contains||Element.implement(y),e=function(n,t){if(!n)return t;n=Object.clone(Slick.parse(n));for(var i=n.expressions,r=i.length;r--;)i[r][0].combinator=t;return n},Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(n,t){Element.implement(t,function(t){return this.getElement(e(t,n))})}),Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(n,t){Element.implement(t,function(t){return this.getElements(e(t,n))})}),Element.implement({getFirst:function(n){return document.id(Slick.search(this,e(n,">"))[0])},getLast:function(n){return document.id(Slick.search(this,e(n,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(n){return document.id(Slick.find(this,"#"+(""+n).replace(/(\W)/g,"\\$1")))},match:function(n){return!n||Slick.match(this,n)}}),null==window.$$&&Window.implement("$$",function(n){if(1==arguments.length){if("string"==typeof n)return Slick.search(this.document,n,new Elements);if(Type.isEnumerable(n))return new Elements(n)}return new Elements(arguments)}),i={before:function(n,t){var i=t.parentNode;i&&i.insertBefore(n,t)},after:function(n,t){var i=t.parentNode;i&&i.insertBefore(n,t.nextSibling)},bottom:function(n,t){t.appendChild(n)},top:function(n,t){t.insertBefore(n,t.firstChild)}},i.inside=i.bottom;var r={},n={},o={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(n){o[n.toLowerCase()]=n}),o.html="innerHTML",o.text=null==document.createElement("div").textContent?"innerText":"textContent",Object.forEach(o,function(t,i){n[i]=function(n,i){n[t]=i},r[i]=function(n){return n[t]}}),n.text=function(){return function(n,t){"style"==n.get("tag")?n.set("html",t):n[o.text]=t}}(n.text),r.text=function(n){return function(t){return"style"==t.get("tag")?t.innerHTML:n(t)}}(r.text),rt=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"],ut={},Array.forEach(rt,function(t){var i=t.toLowerCase();ut[i]=t,n[i]=function(n,i){n[t]=!!i},r[i]=function(n){return!!n[t]}}),Object.append(n,{"class":function(n,t){"className"in n?n.className=t||"":n.setAttribute("class",t)},"for":function(n,t){"htmlFor"in n?n.htmlFor=t:n.setAttribute("for",t)},style:function(n,t){n.style?n.style.cssText=t:n.setAttribute("style",t)},value:function(n,t){n.value=null!=t?t:""}}),r["class"]=function(n){return"className"in n?n.className||null:n.getAttribute("class")},s=document.createElement("button");try{s.type="button"}catch(pt){}"button"!=s.type&&(n.type=function(n,t){n.setAttribute("type",t)}),s=null,ot=function(){var n=document.createElement("style"),t=!1;try{n.innerHTML="#justTesing{margin: 0px;}",t=!!n.innerHTML}catch(i){}return t}(),t=document.createElement("input"),t.value="t",t.type="submit",ft="t"!=t.value;try{t.value="",t.type="email",et="email"==t.type}catch(pt){}t=null,(ft||!et)&&(n.type=function(n,t){try{var i=n.value;n.type=t,n.value=i}catch(r){}});var h=function(n){return n.random="attribute","attribute"==n.getAttribute("random")}(document.createElement("div")),lt=function(n){return n.innerHTML='<object><param name="should_fix" value="the unknown" /><\/object>',1!=n.cloneNode(!0).firstChild.childNodes.length}(document.createElement("div")),p=!!document.createElement("div").classList,u=function(n){var i=(n||"").clean().split(" "),t={};return i.filter(function(n){if(""!==n&&!t[n])return t[n]=n})},at=function(n){this.classList.add(n)},vt=function(n){this.classList.remove(n)};Element.implement({setProperty:function(t,i){var u=n[t.toLowerCase()],r;return u?u(this,i):(h&&(r=this.retrieve("$attributeWhiteList",{})),null==i?(this.removeAttribute(t),h&&delete r[t]):(this.setAttribute(t,""+i),h&&(r[t]=!0))),this},setProperties:function(n){for(var t in n)this.setProperty(t,n[t]);return this},getProperty:function(n){var e=r[n.toLowerCase()],t,i,u,f;if(e)return e(this);if(h){if(t=this.getAttributeNode(n),i=this.retrieve("$attributeWhiteList",{}),!t)return null;if(t.expando&&!i[n]){if(u=this.outerHTML,u.substr(0,u.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(n)<0)return null;i[n]=!0}}return f=Slick.getAttribute(this,n),f||Slick.hasAttribute(this,n)?f:null},getProperties:function(){var n=Array.convert(arguments);return n.map(this.getProperty,this).associate(n)},removeProperty:function(n){return this.setProperty(n,null)},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},set:function(n,t){var i=Element.Properties[n];i&&i.set?i.set.call(this,t):this.setProperty(n,t)}.overloadSetter(),get:function(n){var t=Element.Properties[n];return t&&t.get?t.get.apply(this):this.getProperty(n)}.overloadGetter(),erase:function(n){var t=Element.Properties[n];return t&&t.erase?t.erase.apply(this):this.removeProperty(n),this},hasClass:p?function(n){return this.classList.contains(n)}:function(n){return u(this.className).contains(n)},addClass:p?function(n){return u(n).forEach(at,this),this}:function(n){return this.className=u(n+" "+this.className).join(" "),this},removeClass:p?function(n){return u(n).forEach(vt,this),this}:function(n){var t=u(this.className);return u(n).forEach(t.erase,t),this.className=t.join(" "),this},toggleClass:function(n,t){return null==t&&(t=!this.hasClass(n)),t?this.addClass(n):this.removeClass(n)},adopt:function(){var t,r=this,u=Array.flatten(arguments),f=u.length,n,i;for(f>1&&(r=t=document.createDocumentFragment()),n=0;f>n;n++)i=document.id(u[n],!0),i&&r.appendChild(i);return t&&this.appendChild(t),this},appendText:function(n,t){return this.grab(this.getDocument().newTextNode(n),t)},grab:function(n,t){return i[t||"bottom"](document.id(n,!0),this),this},inject:function(n,t){return i[t||"bottom"](this,document.id(n,!0)),this},replaces:function(n){return n=document.id(n,!0),n.parentNode.replaceChild(this,n),this},wraps:function(n,t){return n=document.id(n,!0),this.replaces(n).grab(n,t)},getSelected:function(){return this.selectedIndex,new Elements(Array.convert(this.options).filter(function(n){return n.selected}))},toQueryString:function(){var n=[];return this.getElements("input, select, textarea").each(function(t){var i=t.type,r;t.name&&!t.disabled&&"submit"!=i&&"reset"!=i&&"file"!=i&&"image"!=i&&(r="select"==t.get("tag")?t.getSelected().map(function(n){return document.id(n).get("value")}):"radio"!=i&&"checkbox"!=i||t.checked?t.get("value"):null,Array.convert(r).each(function(i){"undefined"!=typeof i&&n.push(encodeURIComponent(t.name)+"="+encodeURIComponent(i))}))}),n.join("&")}}),st={before:"beforeBegin",after:"afterEnd",bottom:"beforeEnd",top:"afterBegin",inside:"beforeEnd"},Element.implement("appendHTML","insertAdjacentHTML"in document.createElement("div")?function(n,t){return this.insertAdjacentHTML(st[t||"bottom"],n),this}:function(n,t){var e=new Element("div",{html:n}),f=e.childNodes,r=e.firstChild,u,o;if(!r)return this;if(f.length>1)for(r=document.createDocumentFragment(),u=0,o=f.length;o>u;u++)r.appendChild(f[u]);return i[t||"bottom"](r,this),this});var w={},b={},k=function(n){return b[n]||(b[n]={})},d=function(n){var t=n.uniqueNumber;return n.removeEvents&&n.removeEvents(),n.clearAttributes&&n.clearAttributes(),null!=t&&(delete w[t],delete b[t]),n},yt={input:"checked",option:"selected",textarea:"value"};(Element.implement({destroy:function(){var n=d(this).getElementsByTagName("*");return Array.each(n,d),Element.dispose(this),null},empty:function(){return Array.convert(this.childNodes).each(Element.dispose),this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},clone:function(n,t){var i,u,f,h,a;n=n!==!1;var r,e=this.cloneNode(n),o=[e],c=[this];for(n&&(o.append(Array.convert(e.getElementsByTagName("*"))),c.append(Array.convert(this.getElementsByTagName("*")))),r=o.length;r--;){if(i=o[r],u=c[r],t||i.removeAttribute("id"),i.clearAttributes&&(i.clearAttributes(),i.mergeAttributes(u),i.removeAttribute("uniqueNumber"),i.options))for(var l=i.options,v=u.options,s=l.length;s--;)l[s].selected=v[s].selected;f=yt[u.tagName.toLowerCase()],f&&u[f]&&(i[f]=u[f])}if(lt)for(h=e.getElementsByTagName("object"),a=this.getElementsByTagName("object"),r=h.length;r--;)h[r].outerHTML=a[r].outerHTML;return document.id(e)}}),[Element,Window,Document].invoke("implement",{addListener:function(n,t){return window.attachEvent&&!window.addEventListener&&(w[Slick.uidOf(this)]=this),this.addEventListener?this.addEventListener(n,t,!!arguments[2]):this.attachEvent("on"+n,t),this},removeListener:function(n,t){return this.removeEventListener?this.removeEventListener(n,t,!!arguments[2]):this.detachEvent("on"+n,t),this},retrieve:function(n,t){var r=k(Slick.uidOf(this)),i=r[n];return null!=t&&null==i&&(i=r[n]=t),null!=i?i:null},store:function(n,t){var i=k(Slick.uidOf(this));return i[n]=t,this},eliminate:function(n){var t=k(Slick.uidOf(this));return delete t[n],this}}),window.attachEvent&&!window.addEventListener)&&(g=function(){Object.each(w,d),window.CollectGarbage&&CollectGarbage(),window.removeListener("unload",g)},window.addListener("unload",g)),Element.Properties={},Element.Properties.style={set:function(n){this.style.cssText=n},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html={set:function(n){null==n?n="":"array"==typeOf(n)&&(n=n.join("")),this.styleSheet&&!ot?this.styleSheet.cssText=n:this.innerHTML=n},erase:function(){this.set("html","")}};var c,f=!0,ht=!0,ct=!0,nt=document.createElement("div");if(nt.innerHTML="<nav><\/nav>",f=1==nt.childNodes.length,!f)for(tt="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),c=document.createDocumentFragment(),l=tt.length;l--;)c.createElement(tt[l]);nt=null,ht=Function.attempt(function(){var n=document.createElement("table");return n.innerHTML="<tr><td><\/td><\/tr>",!0}),a=document.createElement("tr"),it="<td><\/td>",a.innerHTML=it,ct=a.innerHTML==it,a=null,ht&&ct&&f||(Element.Properties.html.set=function(n){var t={table:[1,"<table>","<\/table>"],select:[1,"<select>","<\/select>"],tbody:[2,"<table><tbody>","<\/tbody><\/table>"],tr:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"]};return t.thead=t.tfoot=t.tbody,function(i){var r;if(this.styleSheet||(r=t[this.get("tag")],r||f||(r=[0,"",""]),!r))return n.call(this,i);var o=r[0],u=document.createElement("div"),e=u;for(f||c.appendChild(u),u.innerHTML=[r[1],i,r[2]].flatten().join("");o--;)e=e.firstChild;this.empty().adopt(e.childNodes),f||c.removeChild(u),u=null}}(Element.Properties.html.set)),v=document.createElement("form"),v.innerHTML="<select><option>s<\/option><\/select>","s"!=v.firstChild.value&&(Element.Properties.value={set:function(n){var f=this.get("tag"),r,t;if("select"!=f)return this.setProperty("value",n);for(r=this.getElements("option"),n=String(n),t=0;t<r.length;t++){var i=r[t],u=i.getAttributeNode("value"),e=u&&u.specified?i.value:i.get("text");if(e===n)return i.selected=!0}},get:function(){var n=this,t=n.get("tag"),i;return"select"!=t&&"option"!=t?this.getProperty("value"):"select"==t&&!(n=n.getSelected()[0])?"":(i=n.getAttributeNode("value"),i&&i.specified?n.value:n.get("text"))}}),v=null,document.createElement("div").getAttributeNode("id")&&(Element.Properties.id={set:function(n){this.id=this.getAttributeNode("id").value=n},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}})}(),function(){var t={},i=function(n){var i,t;return n.wheelDelta?i=n.wheelDelta%120==0?n.wheelDelta/120:n.wheelDelta/12:(t=n.deltaY||n.detail||0,i=-(t%3==0?t/3:10*t)),i},n=this.DOMEvent=new Type("DOMEvent",function(n,r){var u,o,f,e,l,s,c,h;if(r||(r=window),n=n||r.event,n.$extended)return n;for(this.event=n,this.$extended=!0,this.shift=n.shiftKey,this.control=n.ctrlKey,this.alt=n.altKey,this.meta=n.metaKey,u=this.type=n.type,o=n.target||n.srcElement;o&&3==o.nodeType;)o=o.parentNode;if(this.target=document.id(o),0==u.indexOf("key"))f=this.code=n.which||n.keyCode,this.shift&&"keypress"==u||(this.key=t[f]),("keydown"==u||"keyup"==u)&&(f>111&&124>f?this.key="f"+(f-111):f>95&&106>f&&(this.key=f-96)),null==this.key&&(this.key=String.fromCharCode(f).toLowerCase());else if("click"==u||"dblclick"==u||"contextmenu"==u||"wheel"==u||"DOMMouseScroll"==u||0==u.indexOf("mouse")){if(e=r.document,e=e.compatMode&&"CSS1Compat"!=e.compatMode?e.body:e.html,this.page={x:null!=n.pageX?n.pageX:n.clientX+e.scrollLeft,y:null!=n.pageY?n.pageY:n.clientY+e.scrollTop},this.client={x:null!=n.pageX?n.pageX-r.pageXOffset:n.clientX,y:null!=n.pageY?n.pageY-r.pageYOffset:n.clientY},("DOMMouseScroll"==u||"wheel"==u||"mousewheel"==u)&&(this.wheel=i(n)),this.rightClick=3==n.which||2==n.button,"mouseover"==u||"mouseout"==u||"mouseenter"==u||"mouseleave"==u){for(l="mouseover"==u||"mouseenter"==u,s=n.relatedTarget||n[(l?"from":"to")+"Element"];s&&3==s.nodeType;)s=s.parentNode;this.relatedTarget=document.id(s)}}else(0==u.indexOf("touch")||0==u.indexOf("gesture"))&&(this.rotation=n.rotation,this.scale=n.scale,this.targetTouches=n.targetTouches,this.changedTouches=n.changedTouches,c=this.touches=n.touches,c&&c[0]&&(h=c[0],this.page={x:h.pageX,y:h.pageY},this.client={x:h.clientX,y:h.clientY}));this.client||(this.client={}),this.page||(this.page={})});n.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),n.defineKey=function(n,i){return t[n]=i,this},n.defineKeys=n.defineKey.overloadSetter(!0),n.defineKeys({38:"up",40:"down",37:"left",39:"right",27:"esc",32:"space",8:"backspace",9:"tab",46:"delete",13:"enter"})}(),function(){Element.Properties.events={set:function(n){this.addEvents(n)}},[Element,Window,Document].invoke("implement",{addEvent:function(n,t){var r=this.retrieve("events",{}),u,o;if(r[n]||(r[n]={keys:[],values:[]}),r[n].keys.contains(t))return this;r[n].keys.push(t);var f=n,i=Element.Events[n],s=t,e=this;return i&&(i.onAdd&&i.onAdd.call(this,t,n),i.condition&&(s=function(r){return i.condition.call(this,r,n)?t.call(this,r):!0}),i.base&&(f=Function.convert(i.base).call(this,n))),u=function(){return t.call(e)},o=Element.NativeEvents[f],o&&(2==o&&(u=function(n){n=new DOMEvent(n,e.getWindow()),s.call(e,n)===!1&&n.stop()}),this.addListener(f,u,arguments[2])),r[n].values.push(u),this},removeEvent:function(n,t){var f=this.retrieve("events"),r,u,e,i;return!f||!f[n]?this:(r=f[n],u=r.keys.indexOf(t),-1==u)?this:(e=r.values[u],delete r.keys[u],delete r.values[u],i=Element.Events[n],i&&(i.onRemove&&i.onRemove.call(this,t,n),i.base&&(n=Function.convert(i.base).call(this,n))),Element.NativeEvents[n]?this.removeListener(n,e,arguments[2]):this)},addEvents:function(n){for(var t in n)this.addEvent(t,n[t]);return this},removeEvents:function(n){var i,t;if("object"==typeOf(n)){for(i in n)this.removeEvent(i,n[i]);return this}if(t=this.retrieve("events"),!t)return this;if(n)t[n]&&(t[n].keys.each(function(t){this.removeEvent(n,t)},this),delete t[n]);else{for(i in t)this.removeEvents(i);this.eliminate("events")}return this},fireEvent:function(n,t,i){var r=this.retrieve("events");return r&&r[n]?(t=Array.convert(t),r[n].keys.each(function(n){i?n.delay(i,this,t):n.apply(this,t)},this),this):this},cloneEvents:function(n,t){var i,r;if(n=document.id(n),i=n.retrieve("events"),!i)return this;if(t)i[t]&&i[t].keys.each(function(n){this.addEvent(t,n)},this);else for(r in i)this.cloneEvents(n,r);return this}}),Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,wheel:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,hashchange:1,popstate:2,pageshow:2,pagehide:2,error:1,abort:1,scroll:1,message:2},Element.Events={mousewheel:{base:"onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"}};var n=function(n){var t=n.relatedTarget;return null==t?!0:t?t!=this&&"xul"!=t.prefix&&"document"!=typeOf(this)&&!this.contains(t):!1};"onmouseenter"in document.documentElement?(Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2,Element.MouseenterCheck=n):(Element.Events.mouseenter={base:"mouseover",condition:n},Element.Events.mouseleave={base:"mouseout",condition:n}),window.addEventListener||(Element.NativeEvents.propertychange=2,Element.Events.change={base:function(){var n=this.type;return"input"!=this.get("tag")||"radio"!=n&&"checkbox"!=n?"change":"propertychange"},condition:function(n){return"propertychange"!=n.type||"checked"==n.event.propertyName}})}(),function(){var t=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var i=function(n,t,i,r,u){for(;u&&u!=n;){if(t(u,r))return i.call(u,r,u);u=document.id(u.parentNode)}},r={mouseenter:{base:"mouseover",condition:Element.MouseenterCheck},mouseleave:{base:"mouseout",condition:Element.MouseenterCheck},focus:{base:"focus"+(t?"":"in"),capture:!0},blur:{base:t?"blur":"focusout",capture:!0}},u="$delegation:",f=function(n){return{base:"focusin",remove:function(t,i){var r=t.retrieve(u+n+"listeners",{})[i],f;if(r&&r.forms)for(f=r.forms.length;f--;)r.forms[f].removeEvent&&r.forms[f].removeEvent(n,r.fns[f])},listen:function(t,r,f,e,o,s){var h="form"==o.get("tag")?o:e.target.getParent("form"),a;if(h){var c=t.retrieve(u+n+"listeners",{}),l=c[s]||{forms:[],fns:[]},v=l.forms,y=l.fns;-1==v.indexOf(h)&&(v.push(h),a=function(n){i(t,r,f,n,o)},h.addEvent(n,a),y.push(a),c[s]=l,t.store(u+n+"listeners",c))}}}},e=function(n){return{base:"focusin",listen:function(t,r,u,f,e){var o={blur:function(){this.removeEvents(o)}};o[n]=function(n){i(t,r,u,n,e)},f.target.addEvents(o)}}};t||Object.append(r,{submit:f("submit"),reset:f("reset"),change:e("change"),select:e("select")});var o=Element.prototype,s=o.addEvent,h=o.removeEvent,c=function(n,t){return function(i,r,u){var f,e;return-1==i.indexOf(":relay")?n.call(this,i,r,u):(f=Slick.parse(i).expressions[0][0],"relay"!=f.pseudos[0].key)?n.call(this,i,r,u):(e=f.tag,f.pseudos.slice(1).each(function(n){e+=":"+n.key+(n.value?"("+n.value+")":"")}),n.call(this,i,r),t.call(this,e,f.pseudos[0].value,r))}},n={addEvent:function(n,t,u){var l=this.retrieve("$delegates",{}),f=l[n],h,o,v,y;if(f)for(h in f)if(f[h].fn==u&&f[h].match==t)return this;var c=n,a=t,k=u,e=r[n]||{};n=e.base||c,t=function(n){return Slick.match(n,a)},o=Element.Events[c],(e.condition||o&&o.condition)&&(v=t,y=e.condition||o.condition,t=function(t,i){return v(t,i)&&y.call(t,i,n)});var p=this,w=String.uniqueID(),b=e.listen?function(n,i){!i&&n&&n.target&&(i=n.target),i&&e.listen(p,t,u,n,i,w)}:function(n,r){!r&&n&&n.target&&(r=n.target),r&&i(p,t,u,n,r)};return f||(f={}),f[w]={match:a,fn:k,delegator:b},l[c]=f,s.call(this,n,b,e.capture)},removeEvent:function(t,i,u,f){var l=this.retrieve("$delegates",{}),e=l[t],o,s;if(!e)return this;if(f){var a=t,v=e[f].delegator,c=r[t]||{};return t=c.base||a,c.remove&&c.remove(this,f),delete e[f],l[a]=e,h.call(this,t,v,c.capture)}if(u){for(o in e)if(s=e[o],s.match==i&&s.fn==u)return n.removeEvent.call(this,t,i,u,o)}else for(o in e)s=e[o],s.match==i&&n.removeEvent.call(this,t,i,s.fn,o);return this}};[Element,Window,Document].invoke("implement",{addEvent:c(s,n.addEvent),removeEvent:c(h,n.removeEvent)})}(),function(){var n,t=document.html,s,r,h,u,c;n=document.createElement("div"),n.style.color="red",n.style.color=null,s="red"==n.style.color,r="1px solid #123abc",n.style.border=r,h=n.style.border!=r,n=null,u=!!window.getComputedStyle,c=null!=document.createElement("div").style.borderRadius,Element.Properties.styles={set:function(n){this.setStyles(n)}};var l=null!=t.style.opacity,a=null!=t.style.filter,i=/alpha\(opacity=([\d.]+)\)/i,p=function(n,t){n.store("$opacity",t),n.style.visibility=t>0||null==t?"visible":"hidden"},f=function(n,t,i){var r=n.style,u=r.filter||n.getComputedStyle("filter")||"";r.filter=(t.test(u)?u.replace(t,i):u+" "+i).trim(),r.filter||r.removeAttribute("filter")},w=l?function(n,t){n.style.opacity=t}:a?function(n,t){n.currentStyle&&n.currentStyle.hasLayout||(n.style.zoom=1),null==t||1==t?(f(n,i,""),1==t&&1!=v(n)&&f(n,i,"alpha(opacity=100)")):f(n,i,"alpha(opacity="+(100*t).limit(0,100).round()+")")}:p,v=l?function(n){var t=n.style.opacity||n.getComputedStyle("opacity");return""==t?1:t.toFloat()}:a?function(n){var t,r=n.style.filter||n.getComputedStyle("filter");return r&&(t=r.match(i)),null==t||null==r?1:t[1]/100}:function(n){var t=n.retrieve("$opacity");return null==t&&(t="hidden"==n.style.visibility?0:1),t},e=null==t.style.cssFloat?"styleFloat":"cssFloat",b={left:"0%",top:"0%",center:"50%",right:"100%",bottom:"100%"},y=null!=t.style.backgroundPositionX,k=/^-(ms)-/,o=function(n){return n.replace(k,"$1-").camelCase()},d=function(n,t){"backgroundPosition"==t&&(n.removeAttribute(t+"X"),t+="Y"),n.removeAttribute(t)};Element.implement({getComputedStyle:function(n){if(!u&&this.currentStyle)return this.currentStyle[o(n)];var t=Element.getDocument(this).defaultView,i=t?t.getComputedStyle(this,null):null;return i?i.getPropertyValue(n==e?"float":n.hyphenate()):""},setStyle:function(n,t){if("opacity"==n)return null!=t&&(t=parseFloat(t)),w(this,t),this;if(n=o("float"==n?e:n),"string"!=typeOf(t)){var i=(Element.Styles[n]||"@").split(" ");t=Array.convert(t).map(function(n,t){return i[t]?"number"==typeOf(n)?i[t].replace("@",Math.round(n)):n:""}).join(" ")}else t==String(Number(t))&&(t=Math.round(t));return this.style[n]=t,(""==t||null==t)&&s&&this.style.removeAttribute&&d(this.style,n),this},getStyle:function(n){var t,f,i,s,r;if("opacity"==n)return v(this);if(n=o("float"==n?e:n),c&&-1!=n.indexOf("borderRadius"))return["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].map(function(n){return this.style[n]||"0px"},this).join(" ");if(t=this.style[n],!t||"zIndex"==n){if(Element.ShortStyles.hasOwnProperty(n)){t=[];for(f in Element.ShortStyles[n])t.push(this.getStyle(f));return t.join(" ")}t=this.getComputedStyle(n)}if(y&&/^backgroundPosition[XY]?$/.test(n))return t.replace(/(top|right|bottom|left)/g,function(n){return b[n]})||"0px";if(!t&&"backgroundPosition"==n)return"0px 0px";if(t&&(t=String(t),i=t.match(/rgba?\([\d\s,]+\)/),i&&(t=t.replace(i[0],i[0].rgbToHex()))),!u&&!this.style[n]){if(/^(height|width)$/.test(n)&&!/px$/.test(t))return s="width"==n?["left","right"]:["top","bottom"],r=0,s.each(function(n){r+=this.getStyle("border-"+n+"-width").toInt()+this.getStyle("padding-"+n).toInt()},this),this["offset"+n.capitalize()]-r+"px";if(/^border(.+)Width|margin|padding/.test(n)&&isNaN(parseFloat(t)))return"0px"}return h&&/^border(Top|Right|Bottom|Left)?$/.test(n)&&/^#/.test(t)?t.replace(/^(.+)\s(.+)\s(.+)$/,"$2 $3 $1"):t},setStyles:function(n){for(var t in n)this.setStyle(t,n[t]);return this},getStyles:function(){var n={};return Array.flatten(arguments).each(function(t){n[t]=this.getStyle(t)},this),n}}),Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundSize:"@px",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@",borderRadius:"@px @px @px @px"},Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each(function(n){var i=Element.ShortStyles,r=Element.Styles,t;["margin","padding"].each(function(t){var u=t+n;i[t][u]=r[u]="@px"}),t="border"+n,i.border[t]=r[t]="@px @ rgb(@, @, @)";var u=t+"Width",f=t+"Style",e=t+"Color";i[t]={},i.borderWidth[u]=i[t][u]=r[u]="@px",i.borderStyle[f]=i[t][f]=r[f]="@",i.borderColor[e]=i[t][e]=r[e]="rgb(@, @, @)"}),y&&(Element.ShortStyles.backgroundPosition={backgroundPositionX:"@",backgroundPositionY:"@"})}(),function(){function i(n,i){return t(n,i).toInt()||0}function s(n){return i(n,"border-top-width")}function h(n){return i(n,"border-left-width")}function n(n){return/^(?:body|html)$/i.test(n.tagName)}function u(n){var t=n.getDocument();return t.compatMode&&"CSS1Compat"!=t.compatMode?t.body:t.html}var r=document.createElement("div"),f=document.createElement("div"),e,t;r.style.height="0",r.appendChild(f),e=f.offsetParent===r,r=f=null;var c=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],l=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],a=function(n){var i=window.getComputedStyle(n),t={x:0,y:0};return c.each(function(n){t.y+=parseFloat(i[n])}),l.each(function(n){t.x+=parseFloat(i[n])}),t},o=function(i){return"static"!=t(i,"position")||n(i)},v=function(n){return o(n)||/^(?:table|td|th)$/i.test(n.tagName)};Element.implement({scrollTo:function(t,i){return n(this)?this.getWindow().scrollTo(t,i):(this.scrollLeft=t,this.scrollTop=i),this},getSize:function(){if(n(this))return this.getWindow().getSize();if(!window.getComputedStyle)return{x:this.offsetWidth,y:this.offsetHeight};if("svg"==this.get("tag"))return a(this);try{var t=this.getBoundingClientRect();return{x:t.width,y:t.height}}catch(i){return{x:0,y:0}}},getScrollSize:function(){return n(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return n(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var t=this.parentNode,i={x:0,y:0};t&&!n(t);)i.x+=t.scrollLeft,i.y+=t.scrollTop,t=t.parentNode;return i},getOffsetParent:e?function(){var i=this,r;if(n(i)||"fixed"==t(i,"position"))return null;for(r="static"==t(i,"position")?v:o;i=i.parentNode;)if(r(i))return i;return null}:function(){var i=this;if(n(i)||"fixed"==t(i,"position"))return null;try{return i.offsetParent}catch(r){}return null},getOffsets:function(){var h=this.getBoundingClientRect,i,r;if(h){var f=this.getBoundingClientRect(),u=document.id(this.getDocument().documentElement),e=u.getScroll(),o=this.getScrolls(),s="fixed"==t(this,"position");return{x:f.left.toFloat()+o.x+(s?0:e.x)-u.clientLeft,y:f.top.toFloat()+o.y+(s?0:e.y)-u.clientTop}}if(i=this,r={x:0,y:0},n(this))return r;for(;i&&!n(i);)r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;return r},getPosition:function(n){var r=this.getOffsets(),u=this.getScrolls(),t={x:r.x-u.x,y:r.y-u.y},i;return n&&(n=document.id(n))?(i=n.getPosition(),{x:t.x-i.x-h(n),y:t.y-i.y-s(n)}):t},getCoordinates:function(t){if(n(this))return this.getWindow().getCoordinates();var r=this.getPosition(t),u=this.getSize(),i={left:r.x,top:r.y,width:u.x,height:u.y};return i.right=i.left+i.width,i.bottom=i.top+i.height,i},computePosition:function(n){return{left:n.x-i(this,"margin-left"),top:n.y-i(this,"margin-top")}},setPosition:function(n){return this.setStyles(this.computePosition(n))}}),[Document,Window].invoke("implement",{getSize:function(){var n=u(this);return{x:n.clientWidth,y:n.clientHeight}},getScroll:function(){var n=this.getWindow(),t=u(this);return{x:n.pageXOffset||t.scrollLeft,y:n.pageYOffset||t.scrollTop}},getScrollSize:function(){var n=u(this),t=this.getSize(),i=this.getDocument().body;return{x:Math.max(n.scrollWidth,i.scrollWidth,t.x),y:Math.max(n.scrollHeight,i.scrollHeight,t.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var n=this.getSize();return{top:0,left:0,bottom:n.y,right:n.x,height:n.y,width:n.x}}}),t=Element.getComputedStyle}(),Element.alias({position:"setPosition"}),[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}}),function(){var i=this.Fx=new Class({Implements:[Chain,Events,Options,Class.Thenable],options:{fps:60,unit:!1,duration:500,frames:null,frameSkip:!0,link:"ignore"},initialize:function(n){this.subject=this.subject||this,this.setOptions(n)},getTransition:function(){return function(n){return-(Math.cos(Math.PI*n)-1)/2}},step:function(n){var t,i,r;this.options.frameSkip?(t=null!=this.time?n-this.time:0,i=t/this.frameInterval,this.time=n,this.frame+=i):this.frame++,this.frame<this.frames?(r=this.transition(this.frame/this.frames),this.set(this.compute(this.from,this.to,r))):(this.frame=this.frames,this.set(this.compute(this.from,this.to,1)),this.stop())},set:function(n){return n},compute:function(n,t,r){return i.compute(n,t,r)},check:function(){if(!this.isRunning())return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},start:function(n,t){if(!this.check(n,t))return this;this.from=n,this.to=t,this.frame=this.options.frameSkip?0:-1,this.time=null,this.transition=this.getTransition();var e=this.options.frames,r=this.options.fps,f=this.options.duration;return this.duration=i.Durations[f]||f.toInt(),this.frameInterval=1e3/r,this.frames=e||Math.round(this.duration/this.frameInterval),"pending"!==this.getThenableState()&&this.resetThenable(this.subject),this.fireEvent("start",this.subject),u.call(this,r),this},stop:function(){return this.isRunning()&&(this.time=null,r.call(this,this.options.fps),this.frames==this.frame?(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)):this.fireEvent("stop",this.subject),this.resolve(this.subject===this?null:this.subject)),this},cancel:function(){return this.isRunning()&&(this.time=null,r.call(this,this.options.fps),this.frame=this.frames,this.fireEvent("cancel",this.subject).clearChain(),this.reject(this.subject)),this},pause:function(){return this.isRunning()&&(this.time=null,r.call(this,this.options.fps)),this},resume:function(){return this.isPaused()&&u.call(this,this.options.fps),this},isRunning:function(){var t=n[this.options.fps];return t&&t.contains(this)},isPaused:function(){return this.frame<this.frames&&!this.isRunning()}});i.compute=function(n,t,i){return(t-n)*i+n},i.Durations={short:250,normal:500,long:1e3};var n={},t={},f=function(){for(var t,i=Date.now(),n=this.length;n--;)t=this[n],t&&t.step(i)},u=function(i){var r=n[i]||(n[i]=[]);r.push(this),t[i]||(t[i]=f.periodical(Math.round(1e3/i),r))},r=function(i){var r=n[i];r&&(r.erase(this),!r.length&&t[i]&&(delete n[i],t[i]=clearInterval(t[i])))}}(),Fx.CSS=new Class({Extends:Fx,prepare:function(n,t,i){var r,u,f,e,o;return i=Array.convert(i),r=i[0],u=i[1],null==u&&(u=r,r=n.getStyle(t),f=this.options.unit,f&&r&&"string"==typeof r&&r.slice(-f.length)!=f&&0!=parseFloat(r)&&(n.setStyle(t,u+f),e=n.getComputedStyle(t),/px$/.test(e)||(e=n.style[("pixel-"+t).camelCase()],null!=e)||(o=n.style.left,n.style.left=u+f,e=n.style.pixelLeft,n.style.left=o),r=(u||1)/(parseFloat(e)||1)*(parseFloat(r)||0),n.setStyle(t,r+f))),{from:this.parse(r),to:this.parse(u)}},parse:function(n){return n=Function.convert(n)(),n="string"==typeof n?n.split(" "):Array.convert(n),n.map(function(n){n=String(n);var t=!1;return Object.each(Fx.CSS.Parsers,function(i){if(!t){var r=i.parse(n);(r||0===r)&&(t={value:r,parser:i})}}),t=t||{value:n,parser:Fx.CSS.Parsers.String}})},compute:function(n,t,i){var r=[];return Math.min(n.length,t.length).times(function(u){r.push({value:n[u].parser.compute(n[u].value,t[u].value,i),parser:n[u].parser})}),r.$family=Function.convert("fx:css:value"),r},serve:function(n,t){"fx:css:value"!=typeOf(n)&&(n=this.parse(n));var i=[];return n.each(function(n){i=i.concat(n.parser.serve(n.value,t))}),i},render:function(n,t,i,r){n.setStyle(t,this.serve(i,r))},search:function(n){if(Fx.CSS.Cache[n])return Fx.CSS.Cache[n];var t={},r=new RegExp("^"+n.escapeRegExp()+"$"),i=function(n){Array.each(n,function(n){if(n.media)return void i(n.rules||n.cssRules);if(n.style){var u=n.selectorText?n.selectorText.replace(/^\w+/,function(n){return n.toLowerCase()}):null;u&&r.test(u)&&Object.each(Element.Styles,function(i,r){n.style[r]&&!Element.ShortStyles[r]&&(i=String(n.style[r]),t[r]=/^rgb/.test(i)?i.rgbToHex():i)})}})};return Array.each(document.styleSheets,function(n){var t=n.href,r;t&&t.indexOf("://")>-1&&-1==t.indexOf(document.domain)||(r=n.rules||n.cssRules,i(r))}),Fx.CSS.Cache[n]=t}}),Fx.CSS.Cache={},Fx.CSS.Parsers={Color:{parse:function(n){return n.match(/^#[0-9a-f]{3,6}$/i)?n.hexToRgb(!0):(n=n.match(/(\d+),\s*(\d+),\s*(\d+)/))?[n[1],n[2],n[3]]:!1},compute:function(n,t,i){return n.map(function(r,u){return Math.round(Fx.compute(n[u],t[u],i))})},serve:function(n){return n.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(n,t){return t?n+t:n}},String:{parse:Function.convert(!1),compute:function(n,t){return t},serve:function(n){return n}}},Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(n,t){this.element=this.subject=document.id(n),this.parent(t)},set:function(n){"string"==typeof n&&(n=this.search(n));for(var t in n)this.render(this.element,t,n[t],this.options.unit);return this},compute:function(n,t,i){var u={},r;for(r in n)u[r]=this.parent(n[r],t[r],i);return u},start:function(n){var i,r,t,u;if(!this.check(n))return this;"string"==typeof n&&(n=this.search(n)),i={},r={};for(t in n)u=this.prepare(this.element,t,n[t]),i[t]=u.from,r[t]=u.to;return this.parent(i,r)}}),Element.Properties.morph={set:function(n){return this.get("morph").cancel().setOptions(n),this},get:function(){var n=this.retrieve("morph");return n||(n=new Fx.Morph(this,{link:"cancel"}),this.store("morph",n)),n}},Element.implement({morph:function(n){return this.get("morph").start(n),this}}),Fx.implement({getTransition:function(){var n=this.options.transition||Fx.Transitions.Sine.easeInOut,t;return"string"==typeof n&&(t=n.split(":"),n=Fx.Transitions,n=n[t[0]]||n[t[0].capitalize()],t[1]&&(n=n["ease"+t[1].capitalize()+(t[2]?t[2].capitalize():"")])),n}}),Fx.Transition=function(n,t){t=Array.convert(t);var i=function(i){return n(i,t)};return Object.append(i,{easeIn:i,easeOut:function(i){return 1-n(1-i,t)},easeInOut:function(i){return(.5>=i?n(2*i,t):2-n(2*(1-i),t))/2}})},Fx.Transitions={linear:function(n){return n}},Fx.Transitions.extend=function(n){for(var t in n)Fx.Transitions[t]=new Fx.Transition(n[t])},Fx.Transitions.extend({Pow:function(n,t){return Math.pow(n,t&&t[0]||6)},Expo:function(n){return Math.pow(2,8*(n-1))},Circ:function(n){return 1-Math.sin(Math.acos(n))},Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Back:function(n,t){return t=t&&t[0]||1.618,Math.pow(n,2)*((t+1)*n-t)},Bounce:function(n){for(var r,i=0,t=1;;i+=t,t/=2)if(n>=(7-4*i)/11){r=t*t-Math.pow((11-6*i-11*n)/4,2);break}return r},Elastic:function(n,t){return Math.pow(2,10*--n)*Math.cos(20*n*Math.PI*(t&&t[0]||1)/3)}}),["Quad","Cubic","Quart","Quint"].each(function(n,t){Fx.Transitions[n]=new Fx.Transition(function(n){return Math.pow(n,t+2)})}),Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(n,t){this.element=this.subject=document.id(n),this.parent(t)},set:function(n,t){return 1==arguments.length&&(t=n,n=this.property||this.options.property),this.render(this.element,n,t,this.options.unit),this},start:function(n,t,i){var r,u;return this.check(n,t,i)?(r=Array.flatten(arguments),this.property=this.options.property||r.shift(),u=this.prepare(this.element,this.property,r),this.parent(u.from,u.to)):this}}),Element.Properties.tween={set:function(n){return this.get("tween").cancel().setOptions(n),this},get:function(){var n=this.retrieve("tween");return n||(n=new Fx.Tween(this,{link:"cancel"}),this.store("tween",n)),n}},Element.implement({tween:function(n,t,i){return this.get("tween").start(n,t,i),this},fade:function(){var t,f,i=this.get("tween"),n=["opacity"].append(arguments),r,u;switch(null==n[1]&&(n[1]="toggle"),n[1]){case"in":t="start",n[1]=1;break;case"out":t="start",n[1]=0;break;case"show":t="set",n[1]=1;break;case"hide":t="set",n[1]=0;break;case"toggle":r=this.retrieve("fade:flag",1==this.getStyle("opacity")),t="start",n[1]=r?0:1,this.store("fade:flag",!r),f=!0;break;default:t="start"}return f||this.eliminate("fade:flag"),i[t].apply(i,n),u=n[n.length-1],"set"==t?this.setStyle("visibility",0==u?"hidden":"visible"):0!=u?i.$chain.length?i.chain(function(){this.element.setStyle("visibility","visible"),this.callChain()}):this.setStyle("visibility","visible"):i.chain(function(){this.element.getStyle("opacity")||(this.element.setStyle("visibility","hidden"),this.callChain())}),this},highlight:function(n,t){t||(t=this.retrieve("highlight:original",this.getStyle("background-color")),t="transparent"==t?"#fff":t);var i=this.get("tween");return i.start("background-color",n||"#ffff88",t).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),i.callChain()}.bind(this)),this}}),function(){var n=function(){},t="onprogress"in new Browser.Request,i=this.Request=new Class({Implements:[Chain,Events,Options,Class.Thenable],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,timeout:0,noCache:!1},initialize:function(n){this.xhr=new Browser.Request,this.setOptions(n),this.headers=this.options.headers},onStateChange:function(){var i=this.xhr;4==i.readyState&&this.running&&(this.running=!1,this.status=0,Function.attempt(function(){var n=i.status;this.status=1223==n?204:n}.bind(this)),i.onreadystatechange=n,t&&(i.onprogress=i.onloadstart=n),this.timer&&(clearTimeout(this.timer),delete this.timer),this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML},this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure())},isSuccess:function(){var n=this.status;return n>=200&&300>n},isRunning:function(){return!!this.running},processScripts:function(n){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?Browser.exec(n):n.stripScripts(this.options.evalScripts)},success:function(n,t){this.onSuccess(this.processScripts(n),t),this.resolve({text:n,xml:t})},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure(),this.reject({reason:"failure",xhr:this.xhr})},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(n){this.fireEvent("loadstart",[n,this.xhr])},progress:function(n){this.fireEvent("progress",[n,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr),this.reject({reason:"timeout",xhr:this.xhr})},setHeader:function(n,t){return this.headers[n]=t,this},getHeader:function(n){return Function.attempt(function(){return this.xhr.getResponseHeader(n)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},send:function(n){var s,e,h,c,l,o,u;if(!this.check(n))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0,s=typeOf(n),("string"==s||"element"==s)&&(n={data:n}),e=this.options,n=Object.append({data:e.data,url:e.url,method:e.method},n);var i=n.data,r=String(n.url),f=n.method.toLowerCase();switch(typeOf(i)){case"element":i=document.id(i).toQueryString();break;case"object":case"hash":i=Object.toQueryString(i)}return this.options.format&&(h="format="+this.options.format,i=i?h+"&"+i:h),this.options.emulation&&!["get","post"].contains(f)&&(c="_method="+f,i=i?c+"&"+i:c,f="post"),this.options.urlEncoded&&["post","put"].contains(f)&&(l=this.options.encoding?"; charset="+this.options.encoding:"",this.headers["Content-type"]="application/x-www-form-urlencoded"+l),r||(r=document.location.pathname),o=r.lastIndexOf("/"),o>-1&&(o=r.indexOf("#"))>-1&&(r=r.substr(0,o)),this.options.noCache&&(r+=(r.indexOf("?")>-1?"&":"?")+String.uniqueID()),!i||"get"!=f&&"delete"!=f||(r+=(r.indexOf("?")>-1?"&":"?")+i,i=null),u=this.xhr,t&&(u.onloadstart=this.loadstart.bind(this),u.onprogress=this.progress.bind(this)),u.open(f.toUpperCase(),r,this.options.async,this.options.user,this.options.password),this.options.withCredentials&&"withCredentials"in u&&(u.withCredentials=!0),u.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(n,t){try{u.setRequestHeader(t,n)}catch(i){this.fireEvent("exception",[t,n]),this.reject({reason:"exception",xhr:u,exception:i})}},this),"pending"!==this.getThenableState()&&this.resetThenable({reason:"send"}),this.fireEvent("request"),u.send(i),this.options.async?this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)):this.onStateChange(),this},cancel:function(){if(!this.running)return this;this.running=!1;var i=this.xhr;return i.abort(),this.timer&&(clearTimeout(this.timer),delete this.timer),i.onreadystatechange=n,t&&(i.onprogress=i.onloadstart=n),this.xhr=new Browser.Request,this.fireEvent("cancel"),this.reject({reason:"cancel",xhr:i}),this}}),r={};["get","post","put","delete","patch","head","GET","POST","PUT","DELETE","PATCH","HEAD"].each(function(n){r[n]=function(t){var i={method:n};return null!=t&&(i.data=t),this.send(i)}}),i.implement(r),Element.Properties.send={set:function(n){var t=this.get("send").cancel();return t.setOptions(n),this},get:function(){var n=this.retrieve("send");return n||(n=new i({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")}),this.store("send",n)),n}},Element.implement({send:function(n){var t=this.get("send");return t.send({data:this,url:n||t.options.url}),this}})}(),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(n){var i=this.options,t=this.response,u,r,f,e;t.html=n.stripScripts(function(n){t.javascript=n}),u=t.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i),u&&(t.html=u[1]),r=new Element("div").set("html",t.html),(t.tree=r.childNodes,t.elements=r.getElements(i.filter||"*"),i.filter&&(t.tree=t.elements),i.update)?(f=document.id(i.update).empty(),i.filter?f.adopt(t.elements):f.set("html",t.html)):i.append&&(e=document.id(i.append),i.filter?t.elements.reverse().inject(e):e.adopt(r.getChildren())),i.evalScripts&&Browser.exec(t.javascript),this.onSuccess(t.tree,t.elements,t.html,t.javascript),this.resolve({tree:t.tree,elements:t.elements,html:t.html,javascript:t.javascript})}}),Element.Properties.load={set:function(n){var t=this.get("load").cancel();return t.setOptions(n),this},get:function(){var n=this.retrieve("load");return n||(n=new Request.HTML({data:this,link:"cancel",update:this,method:"get"}),this.store("load",n)),n}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString})),this}}),"undefined"==typeof JSON&&(this.JSON={}),function(){var n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t=function(t){return n[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(n){return n=n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(n)},JSON.encode=JSON.stringify?function(n){return JSON.stringify(n)}:function(n){switch(n&&n.toJSON&&(n=n.toJSON()),typeOf(n)){case"string":return'"'+n.replace(/[\x00-\x1f\\"]/g,t)+'"';case"array":return"["+n.map(JSON.encode).clean()+"]";case"object":case"hash":var i=[];return Object.each(n,function(n,t){var r=JSON.encode(n);r&&i.push(JSON.encode(t)+":"+r)}),"{"+i+"}";case"number":case"boolean":return""+n;case"null":return"null"}return null},JSON.secure=!0,JSON.decode=function(n,t){if(!n||"string"!=typeOf(n))return null;if(null==t&&(t=JSON.secure),t){if(JSON.parse)return JSON.parse(n);if(!JSON.validate(n))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.");}return eval("("+n+")")}}(),Request.JSON=new Class({Extends:Request,options:{secure:!0},initialize:function(n){this.parent(n),Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(n){var t;try{t=this.response.json=JSON.decode(n,this.options.secure)}catch(i){return void this.fireEvent("error",[n,i])}null==t?this.failure():(this.onSuccess(t,n),this.resolve({json:t,text:n}))}}),Cookie=new Class({Implements:Options,options:{path:"/",domain:!1,duration:!1,secure:!1,document:document,encode:!0,httpOnly:!1},initialize:function(n,t){this.key=n,this.setOptions(t)},write:function(n){if(this.options.encode&&(n=encodeURIComponent(n)),this.options.domain&&(n+="; domain="+this.options.domain),this.options.path&&(n+="; path="+this.options.path),this.options.duration){var t=new Date;t.setTime(t.getTime()+864e5*this.options.duration),n+="; expires="+t.toGMTString()}return this.options.secure&&(n+="; secure"),this.options.httpOnly&&(n+="; HttpOnly"),this.options.document.cookie=this.key+"="+n,this},read:function(){var n=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return n?decodeURIComponent(n[1]):null},dispose:function(){return new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write(""),this}}),Cookie.write=function(n,t,i){return new Cookie(n,i).write(t)},Cookie.read=function(n){return new Cookie(n).read()},Cookie.dispose=function(n,t){return new Cookie(n,t).dispose()},function(n,t){var u,c,f,e,i=[],o=t.createElement("div"),r=function(){clearTimeout(e),u||(Browser.loaded=u=!0,t.removeListener("DOMContentLoaded",r).removeListener("readystatechange",s),t.fireEvent("domready"),n.fireEvent("domready")),t=n=o=null},s=function(){for(var n=i.length;n--;)if(i[n]())return r(),!0;return!1},l=function(){clearTimeout(e),s()||(e=setTimeout(l,10))},h;t.addListener("DOMContentLoaded",r),h=function(){try{return o.doScroll(),!0}catch(n){}return!1},o.doScroll&&!h()&&(i.push(h),f=!0),t.readyState&&i.push(function(){var n=t.readyState;return"loaded"==n||"complete"==n}),"onreadystatechange"in t?t.addListener("readystatechange",s):f=!0,f&&l(),Element.Events.domready={onAdd:function(n){u&&n.call(this)}},Element.Events.load={base:"load",onAdd:function(t){c&&this==n&&t.call(this)},condition:function(){return this==n&&(r(),delete Element.Events.load),!0}},n.addEvent("load",function(){c=!0})}(window,document);
/*!
Web Build: http://mootools.net/more/builder/9d9777cc390b05f2010e83620f14e44d
*/
MooTools.More={version:"1.6.0",build:"45b71db70f879781a7e0b0d3fb3bb1307c2521eb"},function(){var n={wait:function(n){return this.chain(function(){return this.callChain.delay(null==n?500:n,this),this}.bind(this))}};Chain.implement(n),this.Fx&&Fx.implement(n),this.Element&&Element.implement&&this.Fx&&Element.implement({chains:function(n){return Array.convert(n||["tween","morph","reveal"]).each(function(n){n=this.get(n),n&&n.setOptions({link:"chain"})},this),this},pauseFx:function(n,t){return this.chains(t).get(t||"tween").wait(n),this}})}(),Class.Mutators.Binds=function(n){return this.prototype.initialize||this.implement("initialize",function(){}),Array.convert(n).concat(this.prototype.Binds||[])},Class.Mutators.initialize=function(n){return function(){return Array.convert(this.Binds).each(function(n){var t=this[n];t&&(this[n]=t.bind(this))},this),n.apply(this,arguments)}},Class.Occlude=new Class({occlude:function(n,t){t=document.id(t||this.element);var i=t.retrieve(n||this.property);return i&&!this.occluded?this.occluded=i:(this.occluded=!1,t.store(n||this.property,this),this.occluded)}}),Class.refactor=function(n,t){return Object.each(t,function(t,i){var r=n.prototype[i];r=r&&r.$origin||r||function(){},n.implement(i,"function"==typeof t?function(){var i=this.previous,n;return this.previous=r,n=t.apply(this,arguments),this.previous=i,n}:t)}),n},Class.Singleton=new Class({initialize:function(n){var t,i=new Class(n);return function(){if(t)return t;t=Object.append({},i.prototype),t.constructor=i;var n=i.apply(t,arguments);return t="object"==typeof n?n:t}}}),function(){var n,t;Events.Pseudos=function(n,t,i){var r="_monitorEvents:",u=function(n){return{store:n.store?function(t,i){n.store(r+t,i)}:function(t,i){(n._monitorEvents||(n._monitorEvents={}))[t]=i},retrieve:n.retrieve?function(t,i){return n.retrieve(r+t,i)}:function(t,i){return n._monitorEvents?n._monitorEvents[t]||i:i}}},f=function(t){var f,e;if(-1==t.indexOf(":")||!n)return null;for(var o=Slick.parse(t).expressions[0][0],i=o.pseudos,r=i.length,u=[];r--;)f=i[r].key,e=n[f],null!=e&&u.push({event:o.tag,value:i[r].value,pseudo:f,original:t,listener:e});return u.length?u:null};return{addEvent:function(n,i,r){var s=f(n);if(!s)return t.call(this,n,i,r);var h=u(this),c=h.retrieve(n,[]),o=s[0].event,l=Array.slice(arguments,2),e=i,a=this;return s.each(function(n){var t=n.listener,i=e;0==t?o+=":"+n.pseudo+"("+n.value+")":e=function(){t.call(a,n,i,arguments,e)}}),c.include({type:o,event:i,monitor:e}),h.store(n,c),n!=o&&t.apply(this,[n,i].concat(l)),t.apply(this,[o,e].concat(l))},removeEvent:function(n,t){var s=f(n),e,r,o;return s?(e=u(this),r=e.retrieve(n),!r)?this:(o=Array.slice(arguments,2),i.apply(this,[n,t].concat(o)),r.each(function(n,u){t&&n.event!=t||i.apply(this,[n.type,n.monitor].concat(o)),delete r[u]},this),e.store(n,r),this):i.call(this,n,t)}}},n={once:function(n,t,i,r){t.apply(this,i),this.removeEvent(n.event,r).removeEvent(n.original,t)},throttle:function(n,t,i){t._throttled||(t.apply(this,i),t._throttled=setTimeout(function(){t._throttled=!1},n.value||250))},pause:function(n,t,i){clearTimeout(t._pause),t._pause=t.delay(n.value||250,this,i)}},Events.definePseudo=function(t,i){return n[t]=i,this},Events.lookupPseudo=function(t){return n[t]},t=Events.prototype,Events.implement(Events.Pseudos(n,t.addEvent,t.removeEvent)),["Request","Fx"].each(function(n){this[n]&&this[n].implement(Events.prototype)})}(),function(){var n=this.Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:!1,style:!0,limit:!1,handle:!1,invert:!1,unDraggableTags:["button","input","a","textarea","select","option"],preventDefault:!1,stopPropagation:!1,compensateScroll:!1,modifiers:{x:"left",y:"top"}},initialize:function(){var i=Array.link(arguments,{options:Type.isObject,element:function(n){return null!=n}}),t;this.element=document.id(i.element),this.document=this.element.getDocument(),this.setOptions(i.options||{}),t=typeOf(this.options.handle),this.handles=("array"==t||"collection"==t?$$(this.options.handle):document.id(this.options.handle))||this.element,this.mouse={now:{},pos:{}},this.value={start:{},now:{}},this.offsetParent=function(n){var t=n.getOffsetParent(),i=!t||/^(?:body|html)$/i.test(t.tagName);return i?window:document.id(t)}(this.element),this.selection="selectstart"in document?"selectstart":"mousedown",this.compensateScroll={start:{},diff:{},last:{}},!("ondragstart"in document)||"FileReader"in window||n.ondragstartFixed||(document.ondragstart=Function.convert(!1),n.ondragstartFixed=!0),this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.convert(!1),scrollListener:this.scrollListener.bind(this)},this.attach()},attach:function(){return this.handles.addEvent("mousedown",this.bound.start),this.handles.addEvent("touchstart",this.bound.start),this.options.compensateScroll&&this.offsetParent.addEvent("scroll",this.bound.scrollListener),this},detach:function(){return this.handles.removeEvent("mousedown",this.bound.start),this.handles.removeEvent("touchstart",this.bound.start),this.options.compensateScroll&&this.offsetParent.removeEvent("scroll",this.bound.scrollListener),this},scrollListener:function(){var n,t;this.mouse.start&&(n=this.offsetParent.getScroll(),"absolute"==this.element.getStyle("position")?(t=this.sumValues(n,this.compensateScroll.last,-1),this.mouse.now=this.sumValues(this.mouse.now,t,1)):this.compensateScroll.diff=this.sumValues(n,this.compensateScroll.start,-1),this.offsetParent!=window&&(this.compensateScroll.diff=this.sumValues(this.compensateScroll.start,n,-1)),this.compensateScroll.last=n,this.render(this.options))},sumValues:function(n,t,i){var u={},f=this.options,r;for(r in f.modifiers)f.modifiers[r]&&(u[r]=n[r]+t[r]*i);return u},start:function(n){var i,f,t,o,h,u,e,r,s;if(!this.options.unDraggableTags.contains(n.target.get("tag"))&&(i=this.options,!n.rightClick)){i.preventDefault&&n.preventDefault(),i.stopPropagation&&n.stopPropagation(),this.compensateScroll.start=this.compensateScroll.last=this.offsetParent.getScroll(),this.compensateScroll.diff={x:0,y:0},this.mouse.start=n.page,this.fireEvent("beforeStart",this.element),f=i.limit,this.limit={x:[],y:[]},h=this.offsetParent==window?null:this.offsetParent;for(t in i.modifiers)if(i.modifiers[t]&&(u=this.element.getStyle(i.modifiers[t]),u&&!u.match(/px$/)&&(o||(o=this.element.getCoordinates(h)),u=o[i.modifiers[t]]),this.value.now[t]=i.style?(u||0).toInt():this.element[i.modifiers[t]],i.invert&&(this.value.now[t]*=-1),this.mouse.pos[t]=n.page[t]-this.value.now[t],f&&f[t]))for(e=2;e--;)r=f[t][e],(r||0===r)&&(this.limit[t][e]="function"==typeof r?r():r);"number"==typeOf(this.options.grid)&&(this.options.grid={x:this.options.grid,y:this.options.grid}),s={mousemove:this.bound.check,mouseup:this.bound.cancel,touchmove:this.bound.check,touchend:this.bound.cancel},s[this.selection]=this.bound.eventStop,this.document.addEvents(s)}},check:function(n){this.options.preventDefault&&n.preventDefault();var t=Math.round(Math.sqrt(Math.pow(n.page.x-this.mouse.start.x,2)+Math.pow(n.page.y-this.mouse.start.y,2)));t>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop,touchmove:this.bound.drag,touchend:this.bound.stop}),this.fireEvent("start",[this.element,n]).fireEvent("snap",this.element))},drag:function(n){var t=this.options;t.preventDefault&&n.preventDefault(),this.mouse.now=this.sumValues(n.page,this.compensateScroll.diff,-1),this.render(t),this.fireEvent("drag",[this.element,n])},render:function(n){for(var t in n.modifiers)n.modifiers[t]&&(this.value.now[t]=this.mouse.now[t]-this.mouse.pos[t],n.invert&&(this.value.now[t]*=-1),n.limit&&this.limit[t]&&((this.limit[t][1]||0===this.limit[t][1])&&this.value.now[t]>this.limit[t][1]?this.value.now[t]=this.limit[t][1]:(this.limit[t][0]||0===this.limit[t][0])&&this.value.now[t]<this.limit[t][0]&&(this.value.now[t]=this.limit[t][0])),n.grid[t]&&(this.value.now[t]-=(this.value.now[t]-(this.limit[t][0]||0))%n.grid[t]),n.style?this.element.setStyle(n.modifiers[t],this.value.now[t]+n.unit):this.element[n.modifiers[t]]=this.value.now[t])},cancel:function(n){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel,touchmove:this.bound.check,touchend:this.bound.cancel}),n&&(this.document.removeEvent(this.selection,this.bound.eventStop),this.fireEvent("cancel",this.element))},stop:function(n){var t={mousemove:this.bound.drag,mouseup:this.bound.stop,touchmove:this.bound.drag,touchend:this.bound.stop};t[this.selection]=this.bound.eventStop,this.document.removeEvents(t),this.mouse.start=null,n&&this.fireEvent("complete",[this.element,n])}})}(),Element.implement({makeResizable:function(n){var t=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},n));return this.store("resizer",t),t.addEvent("drag",function(){this.fireEvent("resize",t)}.bind(this))}}),Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:!1,precalculate:!1,includeMargins:!0,checkDroppables:!0},initialize:function(n,t){if(this.parent(n,t),n=this.element,this.droppables=$$(this.options.droppables),this.setContainer(this.options.container),this.options.style){if("left"==this.options.modifiers.x&&"top"==this.options.modifiers.y){var i=n.getOffsetParent(),r=n.getStyles("left","top");i&&("auto"==r.left||"auto"==r.top)&&n.setPosition(n.getPosition(i))}"static"==n.getStyle("position")&&n.setStyle("position","absolute")}this.addEvent("start",this.checkDroppables,!0),this.overed=null},setContainer:function(n){this.container=document.id(n),this.container&&"element"!=typeOf(this.container)&&(this.container=document.id(this.container.getDocument().body))},start:function(n){this.container&&(this.options.limit=this.calculateLimit()),this.options.precalculate&&(this.positions=this.droppables.map(function(n){return n.getCoordinates()})),this.parent(n)},calculateLimit:function(){var t=this.element,o=this.container,u=document.id(t.getOffsetParent())||document.body,h=o.getCoordinates(u),n={},y={},l={},f={},s={},c=u.getScroll(),e;["top","right","bottom","left"].each(function(i){n[i]=t.getStyle("margin-"+i).toInt(),y[i]=t.getStyle("border-"+i).toInt(),l[i]=o.getStyle("margin-"+i).toInt(),f[i]=o.getStyle("border-"+i).toInt(),s[i]=u.getStyle("padding-"+i).toInt()},this);var p=t.offsetWidth+n.left+n.right,w=t.offsetHeight+n.top+n.bottom,i=0+c.x,r=0+c.y,a=h.right-f.right-p+c.x,v=h.bottom-f.bottom-w+c.y;return(this.options.includeMargins?(i+=n.left,r+=n.top):(a+=n.right,v+=n.bottom),"relative"==t.getStyle("position"))?(e=t.getCoordinates(u),e.left-=t.getStyle("left").toInt(),e.top-=t.getStyle("top").toInt(),i-=e.left,r-=e.top,"relative"!=o.getStyle("position")&&(i+=f.left,r+=f.top),a+=n.left-e.left,v+=n.top-e.top,o!=u&&(i+=l.left+s.left,!s.left&&0>i&&(i=0),r+=u==document.body?0:l.top+s.top,!s.top&&0>r&&(r=0))):(i-=n.left,r-=n.top,o!=u&&(i+=h.left+f.left,r+=h.top+f.top)),{x:[i,a],y:[r,v]}},getDroppableCoordinates:function(n){var t=n.getCoordinates(),i;return"fixed"==n.getStyle("position")&&(i=window.getScroll(),t.left+=i.x,t.right+=i.x,t.top+=i.y,t.bottom+=i.y),t},checkDroppables:function(){var n=this.droppables.filter(function(n,t){n=this.positions?this.positions[t]:this.getDroppableCoordinates(n);var i=this.mouse.now;return i.x>n.left&&i.x<n.right&&i.y<n.bottom&&i.y>n.top},this).getLast();this.overed!=n&&(this.overed&&this.fireEvent("leave",[this.element,this.overed]),n&&this.fireEvent("enter",[this.element,n]),this.overed=n)},drag:function(n){this.parent(n),this.options.checkDroppables&&this.droppables.length&&this.checkDroppables()},stop:function(n){return this.checkDroppables(),this.fireEvent("drop",[this.element,this.overed,n]),this.overed=null,this.parent(n)}}),Element.implement({makeDraggable:function(n){var t=new Drag.Move(this,n);return this.store("dragger",t),t}}),function(){var t=function(n,t){var i=[];return Object.each(t,function(t){Object.each(t,function(t){n.each(function(n){i.push(n+"-"+t+("border"==n?"-width":""))})})}),i},i=function(n,t){var i=0;return Object.each(t,function(t,r){r.test(n)&&(i+=t.toInt())}),i},n=function(n){return!(n&&!n.offsetHeight&&!n.offsetWidth)};Element.implement({measure:function(t){var i,r,u,f;if(n(this))return t.call(this);for(i=this.getParent(),r=[];!n(i)&&i!=document.body;)r.push(i.expose()),i=i.getParent();return u=this.expose(),f=t.call(this),u(),r.each(function(n){n()}),f},expose:function(){if("none"!=this.getStyle("display"))return function(){};var n=this.style.cssText;return this.setStyles({display:"block",position:"absolute",visibility:"hidden"}),function(){this.style.cssText=n}.bind(this)},getDimensions:function(n){n=Object.merge({computeSize:!1},n);var t={x:0,y:0},i=function(n,t){return t.computeSize?n.getComputedSize(t):n.getSize()},r=this.getParent("body");if(r&&"none"==this.getStyle("display"))t=this.measure(function(){return i(this,n)});else if(r)try{t=i(this,n)}catch(u){}return Object.append(t,t.x||0===t.x?{width:t.x,height:t.y}:{x:t.width,y:t.height})},getComputedSize:function(n){n=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},n);var f,u={},r={width:0,height:0};return"vertical"==n.mode?(delete r.width,delete n.planes.width):"horizontal"==n.mode&&(delete r.height,delete n.planes.height),t(n.styles,n.planes).each(function(n){u[n]=this.getStyle(n).toInt()},this),Object.each(n.planes,function(n,t){var o=t.capitalize(),e=this.getStyle(t);"auto"!=e||f||(f=this.getDimensions()),e=u[t]="auto"==e?f[t]:e.toInt(),r["total"+o]=e,n.each(function(n){var t=i(n,u);r["computed"+n.capitalize()]=t,r["total"+o]+=t})},this),Object.append(r,u)}})}(),function(){this.Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(n){this.setKnobPosition(n)},initialStep:0,snap:!1,offset:0,range:!1,wheel:!1,steps:100,mode:"horizontal"},initialize:function(n,t,i){var r,u,f;this.setOptions(i),i=this.options,this.element=document.id(n),t=this.knob=document.id(t),this.previousChange=this.previousEnd=this.step=i.initialStep?i.initialStep:i.range?i.range[0]:0,r={},u={x:!1,y:!1};switch(i.mode){case"vertical":this.axis="y",this.property="top",this.offset="offsetHeight";break;case"horizontal":this.axis="x",this.property="left",this.offset="offsetWidth"}this.setSliderDimensions(),this.setRange(i.range,null,!0),"static"==t.getStyle("position")&&t.setStyle("position","relative"),t.setStyle(this.property,-i.offset),u[this.axis]=this.property,r[this.axis]=[-i.offset,this.full-i.offset],f={snap:0,limit:r,modifiers:u,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:function(){this.isDragging=!0}.bind(this),onCancel:function(){this.isDragging=!1}.bind(this),onComplete:function(){this.isDragging=!1,this.draggedKnob(),this.end()}.bind(this)},i.snap&&this.setSnap(f),this.drag=new Drag(t,f),null!=i.initialStep&&this.set(i.initialStep,!0),this.attach()},attach:function(){return this.element.addEvent("mousedown",this.clickedElement),this.options.wheel&&this.element.addEvent("mousewheel",this.scrolledElement),this.drag.attach(),this},detach:function(){return this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement),this.drag.detach(),this},autosize:function(){return this.setSliderDimensions().setKnobPosition(this.toPosition(this.step)),this.drag.options.limit[this.axis]=[-this.options.offset,this.full-this.options.offset],this.options.snap&&this.setSnap(),this},setSnap:function(n){return n||(n=this.drag.options),n.grid=Math.ceil(this.stepWidth),n.limit[this.axis][1]=this.element[this.offset],this},setKnobPosition:function(n){return this.options.snap&&(n=this.toPosition(this.step)),this.knob.setStyle(this.property,n),this},setSliderDimensions:function(){return this.full=this.element.measure(function(){return this.half=this.knob[this.offset]/2,this.element[this.offset]-this.knob[this.offset]+2*this.options.offset}.bind(this)),this},set:function(n,t){return this.range>0^n<this.min||(n=this.min),this.range>0^n>this.max||(n=this.max),this.step=n.round(this.modulus.decimalLength),t?this.checkStep().setKnobPosition(this.toPosition(this.step)):this.checkStep().fireEvent("tick",this.toPosition(this.step)).fireEvent("move").end(),this},setRange:function(n,t,i){return this.min=Array.pick([n[0],0]),this.max=Array.pick([n[1],this.options.steps]),this.range=this.max-this.min,this.steps=this.options.steps||this.full,this.stepSize=Math.abs(this.range)/this.steps,this.stepWidth=this.stepSize*this.full/Math.abs(this.range),this.setModulus(),n&&this.set(Array.pick([t,this.step]).limit(this.min,this.max),i),this},setModulus:function(){for(var t=((this.stepSize+"").split(".")[1]||[]).length,n="1";t--;)n+="0";this.modulus={multiplier:n.toInt(10),decimalLength:n.length-1}},clickedElement:function(n){if(!this.isDragging&&n.target!=this.knob){var i=this.range<0?-1:1,t=n.page[this.axis]-this.element.getPosition()[this.axis]-this.half;t=t.limit(-this.options.offset,this.full-this.options.offset),this.step=(this.min+i*this.toStep(t)).round(this.modulus.decimalLength),this.checkStep().fireEvent("tick",t).fireEvent("move").end()}},scrolledElement:function(n){var t="horizontal"==this.options.mode?n.wheel<0:n.wheel>0;this.set(this.step+(t?-1:1)*this.stepSize),n.stop()},draggedKnob:function(){var t=this.range<0?-1:1,n=this.drag.value.now[this.axis];n=n.limit(-this.options.offset,this.full-this.options.offset),this.step=(this.min+t*this.toStep(n)).round(this.modulus.decimalLength),this.checkStep(),this.fireEvent("move")},checkStep:function(){var n=this.step;return this.previousChange!=n&&(this.previousChange=n,this.fireEvent("change",n)),this},end:function(){var n=this.step;return this.previousEnd!==n&&(this.previousEnd=n,this.fireEvent("complete",n+"")),this},toStep:function(n){var t=(n+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?(t-t*this.modulus.multiplier%(this.stepSize*this.modulus.multiplier)/this.modulus.multiplier).round(this.modulus.decimalLength):t},toPosition:function(n){return this.full*Math.abs(this.min-n)/(this.steps*this.stepSize)-this.options.offset||0}})}(),function(){this.Sortables=new Class({Implements:[Events,Options],options:{opacity:1,clone:!1,revert:!1,handle:!1,dragOptions:{},unDraggableTags:["button","input","a","textarea","select","option"]},initialize:function(n,t){this.setOptions(t),this.elements=[],this.lists=[],this.idle=!0,this.addLists($$(document.id(n)||n)),this.options.clone||(this.options.revert=!1),this.options.revert&&(this.effect=new Fx.Morph(null,Object.merge({duration:250,link:"cancel"},this.options.revert)))},attach:function(){return this.addLists(this.lists),this},detach:function(){return this.lists=this.removeLists(this.lists),this},addItems:function(){return Array.flatten(arguments).each(function(n){this.elements.push(n);var t=n.retrieve("sortables:start",function(t){this.start.call(this,t,n)}.bind(this));(this.options.handle?n.getElement(this.options.handle)||n:n).addEvent("mousedown",t)},this),this},addLists:function(){return Array.flatten(arguments).each(function(n){this.lists.include(n),this.addItems(n.getChildren())},this),this},removeItems:function(){return $$(Array.flatten(arguments).map(function(n){this.elements.erase(n);var t=n.retrieve("sortables:start");return(this.options.handle?n.getElement(this.options.handle)||n:n).removeEvent("mousedown",t),n},this))},removeLists:function(){return $$(Array.flatten(arguments).map(function(n){return this.lists.erase(n),this.removeItems(n.getChildren()),n},this))},getDroppableCoordinates:function(n){var r=n.getOffsetParent(),t=n.getPosition(r),i={w:window.getScroll(),offsetParent:r.getScroll()};return t.x+=i.offsetParent.x,t.y+=i.offsetParent.y,"fixed"==r.getStyle("position")&&(t.x-=i.w.x,t.y-=i.w.y),t},getClone:function(n,t){if(!this.options.clone)return new Element(t.tagName).inject(document.body);if("function"==typeOf(this.options.clone))return this.options.clone.call(this,n,t,this.list);var i=t.clone(!0).setStyles({margin:0,position:"absolute",visibility:"hidden",width:t.getStyle("width")}).addEvent("mousedown",function(n){t.fireEvent("mousedown",n)});return i.get("html").test("radio")&&i.getElements("input[type=radio]").each(function(n,i){n.set("name","clone_"+i),n.get("checked")&&t.getElements("input[type=radio]")[i].set("checked",!0)}),i.inject(this.list).setPosition(this.getDroppableCoordinates(this.element))},getDroppables:function(){var n=this.list.getChildren().erase(this.clone).erase(this.element);return this.options.constrain||n.append(this.lists).erase(this.list),n},insert:function(n,t){var i="inside";this.lists.contains(t)?(this.list=t,this.drag.droppables=this.getDroppables()):i=this.element.getAllPrevious().contains(t)?"before":"after",this.element.inject(t,i),this.fireEvent("sort",[this.element,this.clone])},start:function(n,t){!this.idle||n.rightClick||!this.options.handle&&this.options.unDraggableTags.contains(n.target.get("tag"))||(this.idle=!1,this.element=t,this.opacity=t.getStyle("opacity"),this.list=t.getParent(),this.clone=this.getClone(n,t),this.drag=new Drag.Move(this.clone,Object.merge({droppables:this.getDroppables()},this.options.dragOptions)).addEvents({onSnap:function(){n.stop(),this.clone.setStyle("visibility","visible"),this.element.setStyle("opacity",this.options.opacity||0),this.fireEvent("start",[this.element,this.clone])}.bind(this),onEnter:this.insert.bind(this),onCancel:this.end.bind(this),onComplete:this.end.bind(this)}),this.clone.inject(this.element,"before"),this.drag.start(n))},end:function(){var t;if(this.drag.detach(),this.element.setStyle("opacity",this.opacity),t=this,this.effect){var r=this.element.getStyles("width","height"),n=this.clone,u=n.computePosition(this.getDroppableCoordinates(n)),i=function(){this.removeEvent("cancel",i),n.destroy(),t.reset()};this.effect.element=n,this.effect.start({top:u.top,left:u.left,width:r.width,height:r.height,opacity:.25}).addEvent("cancel",i).chain(i)}else this.clone.destroy(),t.reset()},reset:function(){this.idle=!0,this.fireEvent("complete",this.element)},serialize:function(){var t=Array.link(arguments,{modifier:Type.isFunction,index:function(n){return null!=n}}),i=this.lists.map(function(n){return n.getChildren().map(t.modifier||function(n){return n.get("id")},this)},this),n=t.index;return 1==this.lists.length&&(n=0),(n||0===n)&&n>=0&&n<this.lists.length?i[n]:i}})}(),function(){for(var r,n={relay:!1},t=["once","throttle","pause"],i=t.length;i--;)n[t[i]]=Events.lookupPseudo(t[i]);DOMEvent.definePseudo=function(t,i){return n[t]=i,this},r=Element.prototype,[Element,Window,Document].invoke("implement",Events.Pseudos(n,r.addEvent,r.removeEvent))}(),function(){var n="$moo:keys-pressed",t="$moo:keys-keyup";DOMEvent.definePseudo("keys",function(i,r,u){var h=u[0],e=[],f=this.retrieve(n,[]),s=i.value,o;("+"!=s?e.append(s.replace("++",function(){return e.push("+"),""}).split("+")):e=["+"],f.include(h.key),e.every(function(n){return f.contains(n)})&&r.apply(this,u),this.store(n,f),this.retrieve(t))||(o=function(t){(function(){f=this.retrieve(n,[]).erase(t.key),this.store(n,f)}).delay(0,this)},this.store(t,o).addEvent("keyup",o))}),DOMEvent.defineKeys({16:"shift",17:"control",18:"alt",20:"capslock",33:"pageup",34:"pagedown",35:"end",36:"home",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",107:"+",109:"-",189:"-"})}(),function(){var i={a:/[àáâãäåăą]/g,A:/[ÀÁÂÃÄÅĂĄ]/g,c:/[ćčç]/g,C:/[ĆČÇ]/g,d:/[ďđ]/g,D:/[ĎÐ]/g,e:/[èéêëěę]/g,E:/[ÈÉÊËĚĘ]/g,g:/[ğ]/g,G:/[Ğ]/g,i:/[ìíîï]/g,I:/[ÌÍÎÏ]/g,l:/[ĺľł]/g,L:/[ĹĽŁ]/g,n:/[ñňń]/g,N:/[ÑŇŃ]/g,o:/[òóôõöøő]/g,O:/[ÒÓÔÕÖØ]/g,r:/[řŕ]/g,R:/[ŘŔ]/g,s:/[ššş]/g,S:/[ŠŞŚ]/g,t:/[ťţ]/g,T:/[ŤŢ]/g,u:/[ùúûůüµ]/g,U:/[ÙÚÛŮÜ]/g,y:/[ÿý]/g,Y:/[ŸÝ]/g,z:/[žźż]/g,Z:/[ŽŹŻ]/g,th:/[þ]/g,TH:/[Þ]/g,dh:/[ð]/g,DH:/[Ð]/g,ss:/[ß]/g,oe:/[œ]/g,OE:/[Œ]/g,ae:/[æ]/g,AE:/[Æ]/g},r={" ":/[\xa0\u2002\u2003\u2009]/g,"*":/[\xb7]/g,"'":/[\u2018\u2019]/g,'"':/[\u201c\u201d]/g,"...":/[\u2026]/g,"-":/[\u2013]/g,"&raquo;":/[\uFFFD]/g},u={ms:1,s:1e3,m:6e4,h:36e5},f=/(\d*.?\d+)([msh]+)/,n=function(n,t){var i,r=n;for(i in t)r=r.replace(t[i],i);return r},t=function(n,t){n=n||(t?"":"\\w+");var i=t?"<"+n+"(?!\\w)[^>]*>([\\s\\S]*?)<\/"+n+"(?!\\w)>":"<\/?"+n+"/?>|<"+n+"[\\s|/][^>]*>";return new RegExp(i,"gi")};String.implement({standardize:function(){return n(this,i)},repeat:function(n){return new Array(n+1).join(this)},pad:function(n,t,i){if(this.length>=n)return this;var r=(null==t?" ":""+t).repeat(n-this.length).substr(0,n-this.length);return i&&"right"!=i?"left"==i?r+this:r.substr(0,(r.length/2).floor())+this+r.substr(0,(r.length/2).ceil()):this+r},getTags:function(n,i){return this.match(t(n,i))||[]},stripTags:function(n,i){return this.replace(t(n,i),"")},tidy:function(){return n(this,r)},truncate:function(n,t,i){var r=this,u;return(null==t&&1==arguments.length&&(t="…"),r.length>n)&&((r=r.substring(0,n),i)&&(u=r.lastIndexOf(i),-1!=u&&(r=r.substr(0,u))),t&&(r+=t)),r},ms:function(){var n=f.exec(this);return null==n?Number(this):Number(n[1])*u[n[2]]}})}(),Element.implement({tidy:function(){this.set("value",this.get("value").tidy())},getTextInRange:function(n,t){return this.get("value").substring(n,t)},getSelectedText:function(){return this.setSelectionRange?this.getTextInRange(this.getSelectionStart(),this.getSelectionEnd()):document.selection.createRange().text},getSelectedRange:function(){var n,i,t,u,r;return null!=this.selectionStart?{start:this.selectionStart,end:this.selectionEnd}:(n={start:0,end:0},i=this.getDocument().selection.createRange(),!i||i.parentElement()!=this)?n:(t=i.duplicate(),"text"==this.type?(n.start=0-t.moveStart("character",-1e5),n.end=n.start+i.text.length):(u=this.get("value"),r=u.length,t.moveToElementText(this),t.setEndPoint("StartToEnd",i),t.text.length&&(r-=u.match(/[\n\r]*$/)[0].length),n.end=r-t.text.length,t.setEndPoint("StartToStart",i),n.start=r-t.text.length),n)},getSelectionStart:function(){return this.getSelectedRange().start},getSelectionEnd:function(){return this.getSelectedRange().end},setCaretPosition:function(n){return"end"==n&&(n=this.get("value").length),this.selectRange(n,n),this},getCaretPosition:function(){return this.getSelectedRange().start},selectRange:function(n,t){var r,u,i;return this.setSelectionRange?(this.focus(),this.setSelectionRange(n,t)):(r=this.get("value"),u=r.substr(n,t-n).replace(/\r/g,"").length,n=r.substr(0,n).replace(/\r/g,"").length,i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",n+u),i.moveStart("character",n),i.select()),this},insertAtCursor:function(n,t){var i=this.getSelectedRange(),r=this.get("value");return this.set("value",r.substring(0,i.start)+n+r.substring(i.end,r.length)),t!==!1?this.selectRange(i.start,i.start+n.length):this.setCaretPosition(i.start+n.length),this},insertAroundCursor:function(n,t){var f,u;n=Object.append({before:"",defaultMiddle:"",after:""},n);var e=this.getSelectedText()||n.defaultMiddle,i=this.getSelectedRange(),r=this.get("value");return i.start==i.end?(this.set("value",r.substring(0,i.start)+n.before+e+n.after+r.substring(i.end,r.length)),this.selectRange(i.start+n.before.length,i.end+n.before.length+e.length)):(f=r.substring(i.start,i.end),this.set("value",r.substring(0,i.start)+n.before+f+n.after+r.substring(i.end,r.length)),u=i.start+n.before.length,t!==!1?this.selectRange(u,u+f.length):this.setCaretPosition(u+r.length)),this}}),function(){var n=!1,t=!1,i=function(){var i=new Element("div").setStyles({position:"fixed",top:0,right:0}).inject(document.body);n=0===i.offsetTop,i.dispose(),t=!0};Element.implement({pin:function(r,u){var o,f,s,e,l,h,c;if(t||i(),"none"==this.getStyle("display"))return this;if(e=window.getScroll(),r!==!1)(o=this.getPosition(),this.retrieve("pin:_pinned"))||(l={top:o.y-e.y,left:o.x-e.x,margin:"0px",padding:"0px"},n&&!u?this.setStyle("position","fixed").setStyles(l):(f=this.getOffsetParent(),h=this.getPosition(f),c=this.getStyles("left","top"),(f&&"auto"==c.left||"auto"==c.top)&&this.setPosition(h),"static"==this.getStyle("position")&&this.setStyle("position","absolute"),h={x:c.left.toInt()-e.x,y:c.top.toInt()-e.y},s=function(){if(this.retrieve("pin:_pinned")){var n=window.getScroll();this.setStyles({left:h.x+n.x,top:h.y+n.y})}}.bind(this),this.store("pin:_scrollFixer",s),window.addEvent("scroll",s)),this.store("pin:_pinned",!0));else{if(!this.retrieve("pin:_pinned"))return this;f=this.getParent(),"static"!=f.getComputedStyle("position")?f:f.getOffsetParent(),o=this.getPosition(),this.store("pin:_pinned",!1),s=this.retrieve("pin:_scrollFixer"),s?(this.store("pin:_scrollFixer",null),window.removeEvent("scroll",s)):this.setStyles({position:"absolute",top:o.y+e.y,left:o.x+e.x}),this.removeClass("isPinned")}return this},unpin:function(){return this.pin(!1)},togglePin:function(){return this.pin(!this.retrieve("pin:_pinned"))}})}(),function(n){var t=Element.Position={options:{relativeTo:document.body,position:{x:"center",y:"center"},offset:{x:0,y:0}},getOptions:function(n,i){return i=Object.merge({},t.options,i),t.setPositionOption(i),t.setEdgeOption(i),t.setOffsetOption(n,i),t.setDimensionsOption(n,i),i},setPositionOption:function(n){n.position=t.getCoordinateFromValue(n.position)},setEdgeOption:function(n){var i=t.getCoordinateFromValue(n.edge);n.edge=i?i:"center"==n.position.x&&"center"==n.position.y?{x:"center",y:"center"}:{x:"left",y:"top"}},setOffsetOption:function(n,t){var r={x:0,y:0},u={x:0,y:0},i=n.measure(function(){return document.id(this.getOffsetParent())});i&&i!=n.getDocument().body&&(u=i.getScroll(),r=i.measure(function(){var n=this.getPosition(),t;return"fixed"==this.getStyle("position")&&(t=window.getScroll(),n.x+=t.x,n.y+=t.y),n}),t.offset={parentPositioned:i!=document.id(t.relativeTo),x:t.offset.x-r.x+u.x,y:t.offset.y-r.y+u.y})},setDimensionsOption:function(n,t){t.dimensions=n.getDimensions({computeSize:!0,styles:["padding","border","margin"]})},getPosition:function(n,i){var r={},u,f;return i=t.getOptions(n,i),u=document.id(i.relativeTo)||document.body,t.setPositionCoordinates(i,r,u),i.edge&&t.toEdge(r,i),f=i.offset,r.left=(r.x>=0||f.parentPositioned||i.allowNegative?r.x:0).toInt(),r.top=(r.y>=0||f.parentPositioned||i.allowNegative?r.y:0).toInt(),t.toMinMax(r,i),(i.relFixedPosition||"fixed"==u.getStyle("position"))&&t.toRelFixedPosition(u,r),i.ignoreScroll&&t.toIgnoreScroll(u,r),i.ignoreMargins&&t.toIgnoreMargins(r,i),r.left=Math.ceil(r.left),r.top=Math.ceil(r.top),delete r.x,delete r.y,r},setPositionCoordinates:function(n,t,i){var r=n.offset.y,u=n.offset.x,o=i==document.body?window.getScroll():i.getPosition(),f=o.y,e=o.x,s=window.getSize();switch(n.position.x){case"left":t.x=e+u;break;case"right":t.x=e+u+i.offsetWidth;break;default:t.x=e+(i==document.body?s.x:i.offsetWidth)/2+u}switch(n.position.y){case"top":t.y=f+r;break;case"bottom":t.y=f+r+i.offsetHeight;break;default:t.y=f+(i==document.body?s.y:i.offsetHeight)/2+r}},toMinMax:function(n,t){var i,r={left:"x",top:"y"};["minimum","maximum"].each(function(u){["left","top"].each(function(f){i=t[u]?t[u][r[f]]:null,null!=i&&("minimum"==u?n[f]<i:n[f]>i)&&(n[f]=i)})})},toRelFixedPosition:function(n,t){var i=window.getScroll();t.top+=i.y,t.left+=i.x},toIgnoreScroll:function(n,t){var i=n.getScroll();t.top-=i.y,t.left-=i.x},toIgnoreMargins:function(n,t){n.left+="right"==t.edge.x?t.dimensions["margin-right"]:"center"!=t.edge.x?-t.dimensions["margin-left"]:-t.dimensions["margin-left"]+(t.dimensions["margin-right"]+t.dimensions["margin-left"])/2,n.top+="bottom"==t.edge.y?t.dimensions["margin-bottom"]:"center"!=t.edge.y?-t.dimensions["margin-top"]:-t.dimensions["margin-top"]+(t.dimensions["margin-bottom"]+t.dimensions["margin-top"])/2},toEdge:function(n,t){var i={},r=t.dimensions,u=t.edge;switch(u.x){case"left":i.x=0;break;case"right":i.x=-r.x-r.computedRight-r.computedLeft;break;default:i.x=-Math.round(r.totalWidth/2)}switch(u.y){case"top":i.y=0;break;case"bottom":i.y=-r.y-r.computedTop-r.computedBottom;break;default:i.y=-Math.round(r.totalHeight/2)}n.x+=i.x,n.y+=i.y},getCoordinateFromValue:function(n){return"string"!=typeOf(n)?n:(n=n.toLowerCase(),{x:n.test("left")?"left":n.test("right")?"right":"center",y:n.test(/upper|top/)?"top":n.test("bottom")?"bottom":"center"})}};Element.implement({position:function(t){if(t&&(null!=t.x||null!=t.y))return n?n.apply(this,arguments):this;var i=this.setStyle("position","absolute").calculatePosition(t);return t&&t.returnPos?i:this.setStyles(i)},calculatePosition:function(n){return t.getPosition(this,n)}})}(Element.prototype.position),Elements.from=function(n,t){var i,r,u;return(t||null==t)&&(n=n.stripScripts()),r=n.match(/^\s*(?:<!--.*?-->\s*)*<(t[dhr]|tbody|tfoot|thead)/i),r&&(i=new Element("table"),u=r[1].toLowerCase(),["td","th","tr"].contains(u)&&(i=new Element("tbody").inject(i),"tr"!=u&&(i=new Element("tr").inject(i)))),(i||new Element("div")).set("html",n).getChildren()},function(){var n=this.IframeShim=new Class({Implements:[Options,Events,Class.Occlude],options:{className:"iframeShim",src:'javascript:false;document.write("");',display:!1,zIndex:null,margin:0,offset:{x:0,y:0},browsers:!1},property:"IframeShim",initialize:function(n,t){return this.element=document.id(n),this.occlude()?this.occluded:(this.setOptions(t),this.makeShim(),this)},makeShim:function(){var t,i,r;this.options.browsers?(t=this.element.getStyle("zIndex").toInt(),t||(t=1,i=this.element.getStyle("position"),"static"!=i&&i||this.element.setStyle("position","relative"),this.element.setStyle("zIndex",t)),t=(null!=this.options.zIndex||0===this.options.zIndex)&&t>this.options.zIndex?this.options.zIndex:t-1,0>t&&(t=1),this.shim=new Element("iframe",{src:this.options.src,scrolling:"no",frameborder:0,styles:{zIndex:t,position:"absolute",border:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"},"class":this.options.className}).store("IframeShim",this),r=function(){this.shim.inject(this.element,"after"),this[this.options.display?"show":"hide"](),this.fireEvent("inject")}.bind(this),n.ready?r():window.addEvent("load",r)):this.position=this.hide=this.show=this.dispose=Function.convert(this)},position:function(){if(!n.ready||!this.shim)return this;var t=this.element.measure(function(){return this.getSize()});return void 0!=this.options.margin&&(t.x=t.x-2*this.options.margin,t.y=t.y-2*this.options.margin,this.options.offset.x+=this.options.margin,this.options.offset.y+=this.options.margin),this.shim.set({width:t.x,height:t.y}).position({relativeTo:this.element,offset:this.options.offset}),this},hide:function(){return this.shim&&this.shim.setStyle("display","none"),this},show:function(){return this.shim&&this.shim.setStyle("display","block"),this.position()},dispose:function(){return this.shim&&this.shim.dispose(),this},destroy:function(){return this.shim&&this.shim.destroy(),this}})}(),window.addEvent("load",function(){IframeShim.ready=!0}),function(){this.Mask=new Class({Implements:[Options,Events],Binds:["position"],options:{style:{},"class":"mask",maskMargins:!1,useIframeShim:!0,iframeShimOptions:{}},initialize:function(n,t){this.target=document.id(n)||document.id(document.body),this.target.store("mask",this),this.setOptions(t),this.render(),this.inject()},render:function(){this.element=new Element("div",{"class":this.options["class"],id:this.options.id||"mask-"+String.uniqueID(),styles:Object.merge({},this.options.style,{display:"none"}),events:{click:function(n){this.fireEvent("click",n),this.options.hideOnClick&&this.hide()}.bind(this)}}),this.hidden=!0},toElement:function(){return this.element},inject:function(n,t){t=t||(this.options.inject?this.options.inject.where:"")||(this.target==document.body?"inside":"after"),n=n||this.options.inject&&this.options.inject.target||this.target,this.element.inject(n,t),this.options.useIframeShim&&(this.shim=new IframeShim(this.element,this.options.iframeShimOptions),this.addEvents({show:this.shim.show.bind(this.shim),hide:this.shim.hide.bind(this.shim),destroy:this.shim.destroy.bind(this.shim)}))},position:function(){return this.resize(this.options.width,this.options.height),this.element.position({relativeTo:this.target,position:"topLeft",ignoreMargins:!this.options.maskMargins,ignoreScroll:this.target==document.body}),this},resize:function(n,t){var u={styles:["padding","border"]},i,r;return this.options.maskMargins&&u.styles.push("margin"),i=this.target.getComputedSize(u),this.target==document.body&&(this.element.setStyles({width:0,height:0}),r=window.getScrollSize(),i.totalHeight<r.y&&(i.totalHeight=r.y),i.totalWidth<r.x&&(i.totalWidth=r.x)),this.element.setStyles({width:Array.pick([n,i.totalWidth,i.x]),height:Array.pick([t,i.totalHeight,i.y])}),this},show:function(){return this.hidden?(window.addEvent("resize",this.position),this.position(),this.showMask.apply(this,arguments),this):this},showMask:function(){this.element.setStyle("display","block"),this.hidden=!1,this.fireEvent("show")},hide:function(){return this.hidden?this:(window.removeEvent("resize",this.position),this.hideMask.apply(this,arguments),this.options.destroyOnHide?this.destroy():this)},hideMask:function(){this.element.setStyle("display","none"),this.hidden=!0,this.fireEvent("hide")},toggle:function(){this[this.hidden?"show":"hide"]()},destroy:function(){this.hide(),this.element.destroy(),this.fireEvent("destroy"),this.target.eliminate("mask")}})}(),Element.Properties.mask={set:function(n){var t=this.retrieve("mask");return t&&t.destroy(),this.eliminate("mask").store("mask:options",n)},get:function(){var n=this.retrieve("mask");return n||(n=new Mask(this,this.retrieve("mask:options")),this.store("mask",n)),n}},Element.implement({mask:function(n){return n&&this.set("mask",n),this.get("mask").show(),this},unmask:function(){return this.get("mask").hide(),this}}),function(){this.Spinner=new Class({Extends:this.Mask,Implements:Chain,options:{"class":"spinner",containerPosition:{},content:{"class":"spinner-content"},messageContainer:{"class":"spinner-msg"},img:{"class":"spinner-img"},fxOptions:{link:"chain"}},initialize:function(n,t){this.target=document.id(n)||document.id(document.body),this.target.store("spinner",this),this.setOptions(t),this.render(),this.inject();var i=function(){this.active=!1}.bind(this);this.addEvents({hide:i,show:i})},render:function(){this.parent(),this.element.set("id",this.options.id||"spinner-"+String.uniqueID()),this.content=document.id(this.options.content)||new Element("div",this.options.content),this.content.inject(this.element),this.options.message&&(this.msg=document.id(this.options.message)||new Element("p",this.options.messageContainer).appendText(this.options.message),this.msg.inject(this.content)),this.options.img&&(this.img=document.id(this.options.img)||new Element("div",this.options.img),this.img.inject(this.content)),this.element.set("tween",this.options.fxOptions)},show:function(n){return this.active?this.chain(this.show.bind(this)):this.hidden?(this.target.set("aria-busy","true"),this.active=!0,this.parent(n)):(this.callChain.delay(20,this),this)},showMask:function(n){var t=function(){this.content.position(Object.merge({relativeTo:this.element},this.options.containerPosition))}.bind(this);n?(this.parent(),t()):(this.options.style.opacity||(this.options.style.opacity=this.element.getStyle("opacity").toFloat()),this.element.setStyles({display:"block",opacity:0}).tween("opacity",this.options.style.opacity),t(),this.hidden=!1,this.fireEvent("show"),this.callChain())},hide:function(n){return this.active?this.chain(this.hide.bind(this)):this.hidden?(this.callChain.delay(20,this),this):(this.target.set("aria-busy","false"),this.active=!0,this.parent(n))},hideMask:function(n){return n?this.parent():void this.element.tween("opacity",0).get("tween").chain(function(){this.element.setStyle("display","none"),this.hidden=!0,this.fireEvent("hide"),this.callChain()}.bind(this))},destroy:function(){this.content.destroy(),this.parent(),this.target.eliminate("spinner")}})}(),Request=Class.refactor(Request,{options:{useSpinner:!1,spinnerOptions:{},spinnerTarget:!1},initialize:function(n){this._send=this.send,this.send=function(n){var t=this.getSpinner();return t?t.chain(this._send.pass(n,this)).show():this._send(n),this},this.previous(n)},getSpinner:function(){var n,t;return this.spinner||(n=document.id(this.options.spinnerTarget)||document.id(this.options.update),this.options.useSpinner&&n&&(n.set("spinner",this.options.spinnerOptions),t=this.spinner=n.get("spinner"),["complete","exception","cancel"].each(function(n){this.addEvent(n,t.hide.bind(t))},this))),this.spinner}}),Element.Properties.spinner={set:function(n){var t=this.retrieve("spinner");return t&&t.destroy(),this.eliminate("spinner").store("spinner:options",n)},get:function(){var n=this.retrieve("spinner");return n||(n=new Spinner(this,this.retrieve("spinner:options")),this.store("spinner",n)),n}},Element.implement({spin:function(n){return n&&this.set("spinner",n),this.get("spinner").show(),this},unspin:function(){return this.get("spinner").hide(),this}}),function(){var n=function(n){return decodeURIComponent(n.replace(/\+/g," "))};String.implement({parseQueryString:function(t,i){null==t&&(t=!0),null==i&&(i=!0);var u=this.split(/[&;]/),r={};return u.length?(u.each(function(u){var e=u.indexOf("=")+1,f=e?u.substr(e):"",s=e?u.substr(0,e-1).match(/([^\]\[]+|(\B)(?=\]))/g):[u],o=r;s&&(i&&(f=n(f)),s.each(function(i,r){t&&(i=n(i));var u=o[i];r<s.length-1?o=o[i]=u||{}:"array"==typeOf(u)?u.push(f):o[i]=null!=u?[u,f]:f}))}),r):r},cleanQueryString:function(n){return this.split("&").filter(function(t){var i=t.indexOf("="),u=0>i?"":t.substr(0,i),r=t.substr(i+1);return n?n.call(null,u,r):r||0===r}).join("&")}})}(),window.Form||(window.Form={}),function(){Form.Request=new Class({Binds:["onSubmit","onFormValidate"],Implements:[Options,Events,Class.Occlude],options:{requestOptions:{evalScripts:!0,useSpinner:!0,emulation:!1,link:"ignore"},sendButtonClicked:!0,extraData:{},resetForm:!0},property:"form.request",initialize:function(n,t,i){return this.element=document.id(n),this.occlude()?this.occluded:void this.setOptions(i).setTarget(t).attach()},setTarget:function(n){return this.target=document.id(n),this.request?this.request.setOptions({update:this.target}):this.makeRequest(),this},toElement:function(){return this.element},makeRequest:function(){var n=this;return this.request=new Request.HTML(Object.merge({update:this.target,emulation:!1,spinnerTarget:this.element,method:this.element.get("method")||"post"},this.options.requestOptions)).addEvents({success:function(t,i,r,u){["complete","success"].each(function(f){n.fireEvent(f,[n.target,t,i,r,u])})},failure:function(){n.fireEvent("complete",arguments).fireEvent("failure",arguments)},exception:function(){n.fireEvent("failure",arguments)}}),this.attachReset()},attachReset:function(){return this.options.resetForm?(this.request.addEvent("success",function(){Function.attempt(function(){this.element.reset()}.bind(this)),window.OverText&&OverText.update()}.bind(this)),this):this},attach:function(n){var t=0!=n?"addEvent":"removeEvent",i;return this.element[t]("click:relay(button, input[type=submit])",this.saveClickedButton.bind(this)),i=this.element.retrieve("validator"),i?i[t]("onFormValidate",this.onFormValidate):this.element[t]("submit",this.onSubmit),this},detach:function(){return this.attach(!1)},enable:function(){return this.attach()},disable:function(){return this.detach()},onFormValidate:function(n,t,i){if(i){var r=this.element.retrieve("validator");(n||r&&!r.options.stopOnFailure)&&(i.stop(),this.send())}},onSubmit:function(n){var t=this.element.retrieve("validator");return t?(this.element.removeEvent("submit",this.onSubmit),t.addEvent("onFormValidate",this.onFormValidate),void t.validate(n)):(n&&n.stop(),void this.send())},saveClickedButton:function(n,t){var i=t.get("name");i&&this.options.sendButtonClicked&&(this.options.extraData[i]=t.get("value")||!0,this.clickedCleaner=function(){delete this.options.extraData[i],this.clickedCleaner=function(){}}.bind(this))},clickedCleaner:function(){},send:function(){var n=this.element.toQueryString().trim(),t=Object.toQueryString(this.options.extraData);return n?n+="&"+t:n=t,this.fireEvent("send",[this.element,n.parseQueryString()]),this.request.send({data:n,url:this.options.requestOptions.url||this.element.get("action")}),this.clickedCleaner(),this}}),Element.implement("formUpdate",function(n,t){var i=this.retrieve("form.request");return i?(n&&i.setTarget(n),t&&i.setOptions(t).makeRequest()):i=new Form.Request(this,n,t),i.send(),this})}(),Element.implement({isDisplayed:function(){return"none"!=this.getStyle("display")},isVisible:function(){var n=this.offsetWidth,t=this.offsetHeight;return 0==n&&0==t?!1:n>0&&t>0?!0:"none"!=this.style.display},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var n;try{n=this.getStyle("display")}catch(t){}return"none"==n?this:this.store("element:_originalDisplay",n||"").setStyle("display","none")},show:function(n){return!n&&this.isDisplayed()?this:(n=n||this.retrieve("element:_originalDisplay")||"block",this.setStyle("display","none"==n?"block":n))},swapClass:function(n,t){return this.removeClass(n).addClass(t)}}),Document.implement({clearSelection:function(){if(window.getSelection){var n=window.getSelection();n&&n.removeAllRanges&&n.removeAllRanges()}else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}}}),function(){var n=function(n){var i=n.options.hideInputs,t;return window.OverText&&(t=[null],OverText.each(function(n){t.include("."+n.options.labelClass)}),t&&(i+=t.join(", "))),i?n.element.getElements(i):null};Fx.Reveal=new Class({Extends:Fx.Morph,options:{link:"cancel",styles:["padding","border","margin"],transitionOpacity:"opacity"in document.documentElement,mode:"vertical",display:function(){return"tr"!=this.element.get("tag")?"block":"table-row"},opacity:1,hideInputs:"opacity"in document.documentElement?null:"select, input, textarea, object, embed"},dissolve:function(){var i,r,t;return this.hiding||this.showing?"chain"==this.options.link?this.chain(this.dissolve.bind(this)):"cancel"!=this.options.link||this.hiding||(this.cancel(),this.dissolve()):"none"!=this.element.getStyle("display")?(this.hiding=!0,this.showing=!1,this.hidden=!0,this.cssText=this.element.style.cssText,i=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode}),this.options.transitionOpacity&&(i.opacity=this.options.opacity),r={},Object.each(i,function(n,t){r[t]=[n,0]}),this.element.setStyles({display:Function.convert(this.options.display).call(this),overflow:"hidden"}),t=n(this),t&&t.setStyle("visibility","hidden"),this.$chain.unshift(function(){this.hidden&&(this.hiding=!1,this.element.style.cssText=this.cssText,this.element.setStyle("display","none"),t&&t.setStyle("visibility","visible")),this.fireEvent("hide",this.element),this.callChain()}.bind(this)),this.start(r)):(this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("hide",this.element)),this},reveal:function(){var t,r,i;return this.showing||this.hiding?"chain"==this.options.link?this.chain(this.reveal.bind(this)):"cancel"!=this.options.link||this.showing||(this.cancel(),this.reveal()):"none"==this.element.getStyle("display")?(this.hiding=!1,this.showing=!0,this.hidden=!1,this.cssText=this.element.style.cssText,this.element.measure(function(){t=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode})}.bind(this)),null!=this.options.heightOverride&&(t.height=this.options.heightOverride.toInt()),null!=this.options.widthOverride&&(t.width=this.options.widthOverride.toInt()),this.options.transitionOpacity&&(this.element.setStyle("opacity",0),t.opacity=this.options.opacity),r={height:0,display:Function.convert(this.options.display).call(this)},Object.each(t,function(n,t){r[t]=0}),r.overflow="hidden",this.element.setStyles(r),i=n(this),i&&i.setStyle("visibility","hidden"),this.$chain.unshift(function(){this.element.style.cssText=this.cssText,this.element.setStyle("display",Function.convert(this.options.display).call(this)),this.hidden||(this.showing=!1),i&&i.setStyle("visibility","visible"),this.callChain(),this.fireEvent("show",this.element)}.bind(this)),this.start(t)):(this.callChain(),this.fireEvent("complete",this.element),this.fireEvent("show",this.element)),this},toggle:function(){return"none"==this.element.getStyle("display")?this.reveal():this.dissolve(),this},cancel:function(){return this.parent.apply(this,arguments),null!=this.cssText&&(this.element.style.cssText=this.cssText),this.hiding=!1,this.showing=!1,this}}),Element.Properties.reveal={set:function(n){return this.get("reveal").cancel().setOptions(n),this},get:function(){var n=this.retrieve("reveal");return n||(n=new Fx.Reveal(this),this.store("reveal",n)),n}},Element.Properties.dissolve=Element.Properties.reveal,Element.implement({reveal:function(n){return this.get("reveal").setOptions(n).reveal(),this},dissolve:function(n){return this.get("reveal").setOptions(n).dissolve(),this},nix:function(n){var t=Array.link(arguments,{destroy:Type.isBoolean,options:Type.isObject});return this.get("reveal").setOptions(n).dissolve().chain(function(){this[t.destroy?"destroy":"dispose"]()}.bind(this)),this},wink:function(){var n=Array.link(arguments,{duration:Type.isNumber,options:Type.isObject}),t=this.get("reveal").setOptions(n.options);t.reveal().chain(function(){(function(){t.dissolve()}).delay(n.duration||2e3)})}})}(),Form.Request.Append=new Class({Extends:Form.Request,options:{useReveal:!0,revealOptions:{},inject:"bottom"},makeRequest:function(){this.request=new Request.HTML(Object.merge({url:this.element.get("action"),method:this.element.get("method")||"post",spinnerTarget:this.element},this.options.requestOptions,{evalScripts:!1})).addEvents({success:function(n,t,i,r){var u,f=Elements.from(i),e;u=1==f.length?f[0]:new Element("div",{styles:{display:"none"}}).adopt(f),u.inject(this.target,this.options.inject),this.options.requestOptions.evalScripts&&Browser.exec(r),this.fireEvent("beforeEffect",u),e=function(){this.fireEvent("success",[u,this.target,n,t,i,r])}.bind(this),this.options.useReveal?(u.set("reveal",this.options.revealOptions).get("reveal").chain(e),u.reveal()):e()}.bind(this),failure:function(n){this.fireEvent("failure",n)}.bind(this)}),this.attachReset()}}),function(){var t=function(n){return null!=n},n=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(t,i){"string"==typeof i&&(i=i.split("."));for(var r=0,u=i.length;u>r;r++){if(!n.call(t,i[r]))return null;t=t[i[r]]}return t},cleanValues:function(n,i){i=i||t;for(var r in n)i(n[r])||delete n[r];return n},erase:function(t,i){return n.call(t,i)&&delete t[i],t},run:function(n){var i=Array.slice(arguments,1),t;for(t in n)n[t].apply&&n[t].apply(n,i);return n}})}(),function(){var t=null,n={},r=function(t){return instanceOf(t,i.Set)?t:n[t]},i=this.Locale={define:function(r,u,f,e){var o;return instanceOf(r,i.Set)?(o=r.name,o&&(n[o]=r)):(o=r,n[o]||(n[o]=new i.Set(o)),r=n[o]),u&&r.define(u,f,e),t||(t=r),r},use:function(n){return n=r(n),n&&(t=n,this.fireEvent("change",n)),this},getCurrent:function(){return t},get:function(n,i){return t?t.get(n,i):""},inherit:function(n,t,i){return n=r(n),n&&n.inherit(t,i),this},list:function(){return Object.keys(n)}};Object.append(i,new Events),i.Set=new Class({sets:{},inherits:{locales:[],sets:{}},initialize:function(n){this.name=n||""},define:function(n,t,i){var r=this.sets[n];return r||(r={}),t&&("object"==typeOf(t)?r=Object.merge(r,t):r[t]=i),this.sets[n]=r,this},get:function(t,i,r){var u=Object.getFromPath(this.sets,t),o,f,c,s;if(null!=u)return o=typeOf(u),"function"==o?u=u.apply(null,Array.convert(i)):"object"==o&&(u=Object.clone(u)),u;var h=t.indexOf("."),l=0>h?t:t.substr(0,h),e=(this.inherits.sets[l]||[]).combine(this.inherits.locales).include("en-US");for(r||(r=[]),f=0,c=e.length;c>f;f++)if(!r.contains(e[f])&&(r.include(e[f]),s=n[e[f]],s&&(u=s.get(t,i,r),null!=u)))return u;return""},inherit:function(n,t){n=Array.convert(n),t&&!this.inherits.sets[t]&&(this.inherits.sets[t]=[]);for(var i=n.length;i--;)(t?this.inherits.sets[t]:this.inherits.locales).unshift(n[i]);return this}})}(),Locale.define("en-US","Date",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:function(n){return n>3&&21>n?"th":["th","st","nd","rd","th"][Math.min(n%10,4)]},lessThanMinuteAgo:"less than a minute ago",minuteAgo:"about a minute ago",minutesAgo:"{delta} minutes ago",hourAgo:"about an hour ago",hoursAgo:"about {delta} hours ago",dayAgo:"1 day ago",daysAgo:"{delta} days ago",weekAgo:"1 week ago",weeksAgo:"{delta} weeks ago",monthAgo:"1 month ago",monthsAgo:"{delta} months ago",yearAgo:"1 year ago",yearsAgo:"{delta} years ago",lessThanMinuteUntil:"less than a minute from now",minuteUntil:"about a minute from now",minutesUntil:"{delta} minutes from now",hourUntil:"about an hour from now",hoursUntil:"about {delta} hours from now",dayUntil:"1 day from now",daysUntil:"{delta} days from now",weekUntil:"1 week from now",weeksUntil:"{delta} weeks from now",monthUntil:"1 month from now",monthsUntil:"{delta} months from now",yearUntil:"1 year from now",yearsUntil:"{delta} years from now"}),function(){var n=this.Date,r=n.Methods={ms:"Milliseconds",year:"FullYear",min:"Minutes",mo:"Month",sec:"Seconds",hr:"Hours"},t;["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds","Time","TimezoneOffset","Week","Timezone","GMTOffset","DayOfYear","LastMonth","LastDayOfMonth","UTCDate","UTCDay","UTCFullYear","AMPM","Ordinal","UTCHours","UTCMilliseconds","UTCMinutes","UTCMonth","UTCSeconds","UTCMilliseconds"].each(function(t){n.Methods[t.toLowerCase()]=t}),t=function(n,i,r){return 1==i?n:n<Math.pow(10,i-1)?(r||"0")+t(n,i-1,r):n},n.implement({set:function(n,t){n=n.toLowerCase();var i=r[n]&&"set"+r[n];return i&&this[i]&&this[i](t),this}.overloadSetter(),get:function(n){n=n.toLowerCase();var t=r[n]&&"get"+r[n];return t&&this[t]?this[t]():null}.overloadGetter(),clone:function(){return new n(this.get("time"))},increment:function(t,i){switch(t=t||"day",i=null!=i?i:1,t){case"year":return this.increment("month",12*i);case"month":var r=this.get("date");return this.set("date",1).set("mo",this.get("mo")+i),this.set("date",r.min(this.get("lastdayofmonth")));case"week":return this.increment("day",7*i);case"day":return this.set("date",this.get("date")+i)}if(!n.units[t])throw new Error(t+" is not a supported interval");return this.set("time",this.get("time")+i*n.units[t]())},decrement:function(n,t){return this.increment(n,-1*(null!=t?t:1))},isLeapYear:function(){return n.isLeapYear(this.get("year"))},clearTime:function(){return this.set({hr:0,min:0,sec:0,ms:0})},diff:function(t,i){return"string"==typeOf(t)&&(t=n.parse(t)),((t-this)/n.units[i||"day"](3,3)).round()},getLastDayOfMonth:function(){return n.daysInMonth(this.get("mo"),this.get("year"))},getDayOfYear:function(){return(n.UTC(this.get("year"),this.get("mo"),this.get("date")+1)-n.UTC(this.get("year"),0,1))/n.units.day()},setDay:function(t,i){null==i&&(i=n.getMsg("firstDayOfWeek"),""===i&&(i=1)),t=(7+n.parseDay(t,!0)-i)%7;var r=(7+this.get("day")-i)%7;return this.increment("day",t-r)},getWeek:function(t){var e,o;null==t&&(t=n.getMsg("firstDayOfWeek"),""===t&&(t=1));var u,i=this,f=(7+i.get("day")-t)%7,r=0;if(1==t){if(e=i.get("month"),o=i.get("date")-f,11==e&&o>28)return 1;0==e&&-2>o&&(i=new n(i).decrement("day",f),f=0),u=new n(i.get("year"),0,1).get("day")||7,u>4&&(r=-7)}else u=new n(i.get("year"),0,1).get("day");return r+i.get("dayofyear"),r+=6-f,r+=(7+u-t)%7,r/7},getOrdinal:function(t){return n.getMsg("ordinal",t||this.get("date"))},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}).[0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},getGMTOffset:function(){var n=this.get("timezoneOffset");return(n>0?"-":"+")+t((n.abs()/60).floor(),2)+t(n%60,2)},setAMPM:function(n){n=n.toUpperCase();var t=this.get("hr");return t>11&&"AM"==n?this.decrement("hour",12):12>t&&"PM"==n?this.increment("hour",12):this},getAMPM:function(){return this.get("hr")<12?"AM":"PM"},parse:function(t){return this.set("time",n.parse(t)),this},isValid:function(n){return n||(n=this),"date"==typeOf(n)&&!isNaN(n.valueOf())},format:function(i){if(!this.isValid())return"invalid date";if(i||(i="%x %X"),"string"==typeof i&&(i=h[i.toLowerCase()]||i),"function"==typeof i)return i(this);var r=this;return i.replace(/%([a-z%])/gi,function(i,u){switch(u){case"a":return n.getMsg("days_abbr")[r.get("day")];case"A":return n.getMsg("days")[r.get("day")];case"b":return n.getMsg("months_abbr")[r.get("month")];case"B":return n.getMsg("months")[r.get("month")];case"c":return r.format("%a %b %d %H:%M:%S %Y");case"d":return t(r.get("date"),2);case"e":return t(r.get("date"),2," ");case"H":return t(r.get("hr"),2);case"I":return t(r.get("hr")%12||12,2);case"j":return t(r.get("dayofyear"),3);case"k":return t(r.get("hr"),2," ");case"l":return t(r.get("hr")%12||12,2," ");case"L":return t(r.get("ms"),3);case"m":return t(r.get("mo")+1,2);case"M":return t(r.get("min"),2);case"o":return r.get("ordinal");case"p":return n.getMsg(r.get("ampm"));case"s":return Math.round(r/1e3);case"S":return t(r.get("seconds"),2);case"T":return r.format("%H:%M:%S");case"U":return t(r.get("week"),2);case"w":return r.get("day");case"x":return r.format(n.getMsg("shortDate"));case"X":return r.format(n.getMsg("shortTime"));case"y":return r.get("year").toString().substr(2);case"Y":return r.get("year");case"z":return r.get("GMTOffset");case"Z":return r.get("Timezone")}return u})},toISOString:function(){return this.format("iso8601")}}).alias({toJSON:"toISOString",compare:"diff",strftime:"format"});var o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h={db:"%Y-%m-%d %H:%M:%S",compact:"%Y%m%dT%H%M%S",short:"%d %b %H:%M",long:"%B %d, %Y %H:%M",rfc822:function(n){return o[n.get("day")]+n.format(", %d ")+s[n.get("month")]+n.format(" %Y %H:%M:%S %Z")},rfc2822:function(n){return o[n.get("day")]+n.format(", %d ")+s[n.get("month")]+n.format(" %Y %H:%M:%S %z")},iso8601:function(n){return n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1,2)+"-"+t(n.getUTCDate(),2)+"T"+t(n.getUTCHours(),2)+":"+t(n.getUTCMinutes(),2)+":"+t(n.getUTCSeconds(),2)+"."+t(n.getUTCMilliseconds(),3)+"Z"}},u=[],p=n.parse,c=function(t,i,r){var u=-1,f=n.getMsg(t+"s"),e;switch(typeOf(i)){case"object":u=f[i.get(t)];break;case"number":if(u=f[i],!u)throw new Error("Invalid "+t+" index: "+i);break;case"string":if(e=f.filter(function(n){return this.test(n)},new RegExp("^"+i,"i")),!e.length)throw new Error("Invalid "+t+" string");if(e.length>1)throw new Error("Ambiguous "+t);u=e[0]}return r?f.indexOf(u):u},l=1900,e=70;n.extend({getMsg:function(n,t){return Locale.get("Date."+n,t)},units:{ms:Function.convert(1),second:Function.convert(1e3),minute:Function.convert(6e4),hour:Function.convert(36e5),day:Function.convert(864e5),week:Function.convert(6084e5),month:function(t,i){var r=new n;return 864e5*n.daysInMonth(null!=t?t:r.get("mo"),null!=i?i:r.get("year"))},year:function(t){return t=t||(new n).get("year"),n.isLeapYear(t)?316224e5:31536e6}},daysInMonth:function(t,i){return[31,n.isLeapYear(i)?29:28,31,30,31,30,31,31,30,31,30,31][t]},isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},parse:function(t){var r=typeOf(t),i;return"number"==r?new n(t):"string"!=r?t:(t=t.clean(),!t.length)?null:(u.some(function(n){var r=n.re.exec(t);return r?i=n.handler(r):!1}),i&&i.isValid()||(i=new n(p(t)),i&&i.isValid()||(i=new n(t.toInt()))),i)},parseDay:function(n,t){return c("day",n,t)},parseMonth:function(n,t){return c("month",n,t)},parseUTC:function(t){var i=new n(t),r=n.UTC(i.get("year"),i.get("mo"),i.get("date"),i.get("hr"),i.get("min"),i.get("sec"),i.get("ms"));return new n(r)},orderIndex:function(t){return n.getMsg("dateOrder").indexOf(t)+1},defineFormat:function(n,t){return h[n]=t,this},defineParser:function(n){return u.push(n.re&&n.handler?n:y(n)),this},defineParsers:function(){return Array.flatten(arguments).each(n.defineParser),this},define2DigitYearStart:function(n){return e=n%100,l=n-e,this}}).extend({defineFormats:n.defineFormat.overloadSetter()});var a=function(t){return new RegExp("(?:"+n.getMsg(t).map(function(n){return n.substr(0,3)}).join("|")+")[a-z]*")},w=function(t){switch(t){case"T":return"%H:%M:%S";case"x":return(1==n.orderIndex("month")?"%m[-./]%d":"%d[-./]%m")+"([-./]%y)?";case"X":return"%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%z?"}return null},i={d:/[0-2]?[0-9]|3[01]/,H:/[01]?[0-9]|2[0-3]/,I:/0?[1-9]|1[0-2]/,M:/[0-5]?\d/,s:/\d+/,o:/[a-z]*/,p:/[ap]\.?m\.?/,y:/\d{2}|\d{4}/,Y:/\d{4}/,z:/Z|[+-]\d{2}(?::?\d{2})?/};i.m=i.I,i.S=i.M;var v,b=function(n){v=n,i.a=i.A=a("days"),i.b=i.B=a("months"),u.each(function(n,t){n.format&&(u[t]=y(n.format))})},y=function(t){if(!v)return{format:t};var r=[],u=(t.source||t).replace(/%([a-z])/gi,function(n,t){return w(t)||n}).replace(/\((?!\?)/g,"(?:").replace(/ (?!\?|\*)/g,",? ").replace(/%([a-z%])/gi,function(n,t){var u=i[t];return u?(r.push(t),"("+u.source+")"):t}).replace(/\[a-z\]/gi,"[a-z\\u00c0-\\uffff;&]");return{format:t,re:new RegExp("^"+u+"$","i"),handler:function(t){var i,u,e;t=t.slice(1).associate(r),i=(new n).clearTime(),u=t.y||t.Y,null!=u&&f.call(i,"y",u),"d"in t&&f.call(i,"d",1),("m"in t||t.b||t.B)&&f.call(i,"m",1);for(e in t)f.call(i,e,t[e]);return i}}},f=function(t,i){if(!i)return this;switch(t){case"a":case"A":return this.set("day",n.parseDay(i,!0));case"b":case"B":return this.set("mo",n.parseMonth(i,!0));case"d":return this.set("date",i);case"H":case"I":return this.set("hr",i);case"m":return this.set("mo",i-1);case"M":return this.set("min",i);case"p":return this.set("ampm",i.replace(/\./g,""));case"S":return this.set("sec",i);case"s":return this.set("ms",1e3*("0."+i));case"w":return this.set("day",i);case"Y":return this.set("year",i);case"y":return i=+i,100>i&&(i+=l+(e>i?100:0)),this.set("year",i);case"z":"Z"==i&&(i="+00");var r=i.match(/([+-])(\d{2}):?(\d{2})?/);return r=(r[1]+"1")*(60*r[2]+(+r[3]||0))+this.getTimezoneOffset(),this.set("time",this-6e4*r)}return this};n.defineParsers("%Y([-./]%m([-./]%d((T| )%X)?)?)?","%Y%m%d(T%H(%M%S?)?)?","%x( %X)?","%d%o( %b( %Y)?)?( %X)?","%b( %d%o)?( %Y)?( %X)?","%Y %b( %d%o( %X)?)?","%o %b %d %X %z %Y","%T","%H:%M( ?%p)?"),Locale.addEvent("change",function(n){Locale.get("Date")&&b(n)}).fireEvent("change",Locale.getCurrent())}(),Locale.define("en-US","FormValidator",{required:"This field is required.",length:"Please enter {length} characters (you entered {elLength} characters)",minLength:"Please enter at least {minLength} characters (you entered {length} characters).",maxLength:"Please enter no more than {maxLength} characters (you entered {length} characters).",integer:"Please enter an integer in this field. Numbers with decimals (e.g. 1.25) are not permitted.",numeric:'Please enter only numeric values in this field (i.e. "1" or "1.1" or "-1" or "-1.1").',digits:"Please use numbers and punctuation only in this field (for example, a phone number with dashes or dots is permitted).",alpha:"Please use only letters (a-z) within this field. No spaces or other characters are allowed.",alphanum:"Please use only letters (a-z) or numbers (0-9) in this field. No spaces or other characters are allowed.",dateSuchAs:"Please enter a valid date such as {date}",dateInFormatMDY:'Please enter a valid date such as MM/DD/YYYY (i.e. "12/31/1999")',email:'Please enter a valid email address. For example "fred@domain.com".',url:"Please enter a valid URL such as http://www.example.com.",currencyDollar:"Please enter a valid $ amount. For example $100.00 .",oneRequired:"Please enter something for at least one of these inputs.",errorPrefix:"Error: ",warningPrefix:"Warning: ",noSpace:"There can be no spaces in this input.",reqChkByNode:"No items are selected.",requiredChk:"This field is required.",reqChkByName:"Please select a {label}.",match:"This field needs to match the {matchName} field",startDate:"the start date",endDate:"the end date",currentDate:"the current date",afterDate:"The date should be the same or after {label}.",beforeDate:"The date should be the same or before {label}.",startMonth:"Please select a start month",sameMonth:"These two dates must be in the same month - you must change one or the other.",creditcard:"The credit card number entered is invalid. Please check the number and try again. {length} digits entered."}),window.Form||(window.Form={}),InputValidator=this.InputValidator=new Class({Implements:[Options],options:{errorMsg:"Validation failed.",test:Function.convert(!0)},initialize:function(n,t){this.setOptions(t),this.className=n},test:function(n,t){return n=document.id(n),n?this.options.test(n,t||this.getProps(n)):!1},getError:function(n,t){n=document.id(n);var i=this.options.errorMsg;return"function"==typeOf(i)&&(i=i(n,t||this.getProps(n))),i},getProps:function(n){return n=document.id(n),n?n.get("validatorProps"):{}}}),Element.Properties.validators={get:function(){return(this.get("data-validators")||this.className).clean().replace(/'(\\.|[^'])*'|"(\\.|[^"])*"/g,function(n){return n.replace(" ","\\x20")}).split(" ")}},Element.Properties.validatorProps={set:function(n){return this.eliminate("$moo:validatorProps").store("$moo:validatorProps",n)},get:function(n){if(n&&this.set(n),this.retrieve("$moo:validatorProps"))return this.retrieve("$moo:validatorProps");if(this.getProperty("data-validator-properties")||this.getProperty("validatorProps"))try{this.store("$moo:validatorProps",JSON.decode(this.getProperty("validatorProps")||this.getProperty("data-validator-properties"),!1))}catch(i){return{}}else{var t=this.get("validators").filter(function(n){return n.test(":")});t.length?(n={},t.each(function(t){var i=t.split(":");if(i[1])try{n[i[0]]=JSON.decode(i[1],!1)}catch(r){}}),this.store("$moo:validatorProps",n)):this.store("$moo:validatorProps",{})}return this.retrieve("$moo:validatorProps")}},Form.Validator=new Class({Implements:[Options,Events],options:{fieldSelectors:"input, select, textarea",ignoreHidden:!0,ignoreDisabled:!0,useTitles:!1,evaluateOnSubmit:!0,evaluateFieldsOnBlur:!0,evaluateFieldsOnChange:!0,serial:!0,stopOnFailure:!0,warningPrefix:function(){return Form.Validator.getMsg("warningPrefix")||"Warning: "},errorPrefix:function(){return Form.Validator.getMsg("errorPrefix")||"Error: "}},initialize:function(n,t){this.setOptions(t),this.element=document.id(n),this.warningPrefix=Function.convert(this.options.warningPrefix)(),this.errorPrefix=Function.convert(this.options.errorPrefix)(),this._bound={onSubmit:this.onSubmit.bind(this),blurOrChange:function(n,t){this.validationMonitor(t,!0)}.bind(this)},this.enable()},toElement:function(){return this.element},getFields:function(){return this.fields=this.element.getElements(this.options.fieldSelectors)},enable:function(){this.element.store("validator",this),this.options.evaluateOnSubmit&&this.element.addEvent("submit",this._bound.onSubmit),this.options.evaluateFieldsOnBlur&&this.element.addEvent("blur:relay(input,select,textarea)",this._bound.blurOrChange),this.options.evaluateFieldsOnChange&&this.element.addEvent("change:relay(input,select,textarea)",this._bound.blurOrChange)},disable:function(){this.element.eliminate("validator"),this.element.removeEvents({submit:this._bound.onSubmit,"blur:relay(input,select,textarea)":this._bound.blurOrChange,"change:relay(input,select,textarea)":this._bound.blurOrChange})},validationMonitor:function(){clearTimeout(this.timer),this.timer=this.validateField.delay(50,this,arguments)},onSubmit:function(n){this.validate(n)&&this.reset()},reset:function(){return this.getFields().each(this.resetField,this),this},validate:function(n){var t=this.getFields().map(function(n){return this.validateField(n,!0)},this).every(function(n){return n});return this.fireEvent("formValidate",[t,this.element,n]),this.options.stopOnFailure&&!t&&n&&n.preventDefault(),t},validateField:function(n,t){var u,e,i;if(this.paused)return!0;if(n=document.id(n),i=!n.hasClass("validation-failed"),this.options.serial&&!t&&(u=this.element.getElement(".validation-failed"),e=this.element.getElement(".warning")),n&&(!u||t||n.hasClass("validation-failed")||u&&!this.options.serial)){var r=n.get("validators"),o=r.some(function(n){return this.getValidator(n)},this),f=[];(r.each(function(t){t&&!this.test(t,n)&&f.include(t)},this),i=0===f.length,o&&!this.hasValidator(n,"warnOnly")&&(i?(n.addClass("validation-passed").removeClass("validation-failed"),this.fireEvent("elementPass",[n])):(n.addClass("validation-failed").removeClass("validation-passed"),this.fireEvent("elementFail",[n,f]))),e)||(r.some(function(n){return n.test("^warn")?this.getValidator(n.replace(/^warn-/,"")):null},this),n.removeClass("warning"),r.map(function(t){return t.test("^warn")?this.test(t.replace(/^warn-/,""),n,!0):null},this))}return i},test:function(n,t,i){var r,u;return(t=document.id(t),this.options.ignoreHidden&&!t.isVisible()||this.options.ignoreDisabled&&t.get("disabled"))?!0:(r=this.getValidator(n),null!=i&&(i=!1),this.hasValidator(t,"warnOnly")&&(i=!0),u=t.hasClass("ignoreValidation")||(r?r.test(t):!0),r&&this.fireEvent("elementValidate",[u,t,n,i]),i?!0:u)},hasValidator:function(n,t){return n.get("validators").contains(t)},resetField:function(n){return n=document.id(n),n&&n.get("validators").each(function(t){t.test("^warn-")&&(t=t.replace(/^warn-/,"")),n.removeClass("validation-failed"),n.removeClass("warning"),n.removeClass("validation-passed")},this),this},stop:function(){return this.paused=!0,this},start:function(){return this.paused=!1,this},ignoreField:function(n,t){return n=document.id(n),n&&(this.enforceField(n),t?n.addClass("warnOnly"):n.addClass("ignoreValidation")),this},enforceField:function(n){return n=document.id(n),n&&n.removeClass("warnOnly").removeClass("ignoreValidation"),this}}),Form.Validator.getMsg=function(n){return Locale.get("FormValidator."+n)},Form.Validator.adders={validators:{},add:function(n,t){this.validators[n]=new InputValidator(n,t),this.initialize||this.implement({validators:this.validators})},addAllThese:function(n){Array.convert(n).each(function(n){this.add(n[0],n[1])},this)},getValidator:function(n){return this.validators[n.split(":")[0]]}},Object.append(Form.Validator,Form.Validator.adders),Form.Validator.implement(Form.Validator.adders),Form.Validator.add("IsEmpty",{errorMsg:!1,test:function(n){return"select-one"==n.type||"select"==n.type?!(n.selectedIndex>=0&&""!=n.options[n.selectedIndex].value):null==n.get("value")||0==n.get("value").length}}),Form.Validator.addAllThese([["required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(n){return!Form.Validator.getValidator("IsEmpty").test(n)}}],["length",{errorMsg:function(n,t){return"null"!=typeOf(t.length)?Form.Validator.getMsg("length").substitute({length:t.length,elLength:n.get("value").length}):""},test:function(n,t){return"null"!=typeOf(t.length)?n.get("value").length==t.length||0==n.get("value").length:!0}}],["minLength",{errorMsg:function(n,t){return"null"!=typeOf(t.minLength)?Form.Validator.getMsg("minLength").substitute({minLength:t.minLength,length:n.get("value").length}):""},test:function(n,t){return"null"!=typeOf(t.minLength)?n.get("value").length>=(t.minLength||0):!0}}],["maxLength",{errorMsg:function(n,t){return"null"!=typeOf(t.maxLength)?Form.Validator.getMsg("maxLength").substitute({maxLength:t.maxLength,length:n.get("value").length}):""},test:function(n,t){return n.get("value").length<=(t.maxLength||1e4)}}],["validate-integer",{errorMsg:Form.Validator.getMsg.pass("integer"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^(-?[1-9]\d*|0)$/.test(n.get("value"))}}],["validate-numeric",{errorMsg:Form.Validator.getMsg.pass("numeric"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^-?(?:0$0(?=\d*\.)|[1-9]|0)\d*(\.\d+)?$/.test(n.get("value"))}}],["validate-digits",{errorMsg:Form.Validator.getMsg.pass("digits"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^[\d() .:\-\+#]+$/.test(n.get("value"))}}],["validate-alpha",{errorMsg:Form.Validator.getMsg.pass("alpha"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^[a-zA-Z]+$/.test(n.get("value"))}}],["validate-alphanum",{errorMsg:Form.Validator.getMsg.pass("alphanum"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||!/\W/.test(n.get("value"))}}],["validate-date",{errorMsg:function(n,t){if(Date.parse){var i=t.dateFormat||"%x";return Form.Validator.getMsg("dateSuchAs").substitute({date:(new Date).format(i)})}return Form.Validator.getMsg("dateInFormatMDY")},test:function(n,t){var r,s,u;if(Form.Validator.getValidator("IsEmpty").test(n))return!0;var i=Locale.get("Date"),f=new RegExp([i.days,i.days_abbr,i.months,i.months_abbr,i.AM,i.PM].flatten().join("|"),"i"),e=n.get("value"),o=e.match(/[a-z]+/gi);return o&&!o.every(f.exec,f)?!1:(r=Date.parse(e),!r)?!1:(s=t.dateFormat||"%x",u=r.format(s),"invalid date"!=u&&n.set("value",u),r.isValid())}}],["validate-email",{errorMsg:Form.Validator.getMsg.pass("email"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?^_`{|}~-]@(?:(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)*[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])$/i.test(n.get("value"))}}],["validate-url",{errorMsg:Form.Validator.getMsg.pass("url"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^(https?|ftp|rmtp|mms):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(n.get("value"))}}],["validate-currency-dollar",{errorMsg:Form.Validator.getMsg.pass("currencyDollar"),test:function(n){return Form.Validator.getValidator("IsEmpty").test(n)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(n.get("value"))}}],["validate-one-required",{errorMsg:Form.Validator.getMsg.pass("oneRequired"),test:function(n,t){var i=document.id(t["validate-one-required"])||n.getParent(t["validate-one-required"]);return i.getElements("input").some(function(n){return["checkbox","radio"].contains(n.get("type"))?n.get("checked"):n.get("value")})}}]]),Element.Properties.validator={set:function(n){this.get("validator").setOptions(n)},get:function(){var n=this.retrieve("validator");return n||(n=new Form.Validator(this),this.store("validator",n)),n}},Element.implement({validate:function(n){return n&&this.set("validator",n),this.get("validator").validate()}}),function(){function n(n,t,i,r){if(t&&n[t])return n[t];var u=document.id(n[i]);return u?u.getElements(r):[]}Form.Validator.addAllThese([["validate-enforce-oncheck",{test:function(t,i){var r=t.getParent("form").retrieve("validator");return r?(n(i,"toEnforce","enforceChildrenOf","input, select, textarea").each(function(n){t.checked?r.enforceField(n):(r.ignoreField(n),r.resetField(n))}),!0):!0}}],["validate-ignore-oncheck",{test:function(t,i){var r=t.getParent("form").retrieve("validator");return r?(n(i,"toIgnore","ignoreChildrenOf","input, select, textarea").each(function(n){t.checked?(r.ignoreField(n),r.resetField(n)):r.enforceField(n)}),!0):!0}}],["validate-enforce-onselect-value",{test:function(t,i){if(!i.value)return!0;var r=t.getParent("form").retrieve("validator");return r?(n(i,"toEnforce","enforceChildrenOf","input, select, textarea").each(function(n){i.value==t.value?r.enforceField(n):(r.ignoreField(n),r.resetField(n))}),!0):!0}}],["validate-nospace",{errorMsg:function(){return Form.Validator.getMsg("noSpace")},test:function(n){return!n.get("value").test(/\s/)}}],["validate-toggle-oncheck",{test:function(t,i){var r=t.getParent("form").retrieve("validator"),u;return r?(u=n(i,"toToggle","toToggleChildrenOf","input, select, textarea"),t.checked?u.each(function(n){r.enforceField(n)}):u.each(function(n){r.ignoreField(n),r.resetField(n)}),!0):!0}}],["validate-reqchk-bynode",{errorMsg:function(){return Form.Validator.getMsg("reqChkByNode")},test:function(t,i){return n(i,!1,"nodeId",i.selector||"input[type=checkbox], input[type=radio]").some(function(n){return n.checked})}}],["validate-required-check",{errorMsg:function(n,t){return t.useTitle?n.get("title"):Form.Validator.getMsg("requiredChk")},test:function(n){return!!n.checked}}],["validate-reqchk-byname",{errorMsg:function(n,t){return Form.Validator.getMsg("reqChkByName").substitute({label:t.label||n.get("type")})},test:function(n,t){var f=t.groupName||n.get("name"),i=$$("[name="+f+"]"),r=i.some(function(n){return n.checked}),u=n.getParent("form").retrieve("validator");return r&&u&&i.each(function(n){u.resetField(n)}),r}}],["validate-match",{errorMsg:function(n,t){return Form.Validator.getMsg("match").substitute({matchName:decodeURIComponent((t.matchName+"").replace(/\+/g,"%20"))||document.id(t.matchInput).get("name")})},test:function(n,t){var i=n.get("value"),r=document.id(t.matchInput)&&document.id(t.matchInput).get("value");return i&&r?i==r:!0}}],["validate-after-date",{errorMsg:function(n,t){return Form.Validator.getMsg("afterDate").substitute({label:t.afterLabel||(t.afterElement?Form.Validator.getMsg("startDate"):Form.Validator.getMsg("currentDate"))})},test:function(n,t){var i=document.id(t.afterElement)?Date.parse(document.id(t.afterElement).get("value")):new Date,r=Date.parse(n.get("value"));return r&&i?r>=i:!0}}],["validate-before-date",{errorMsg:function(n,t){return Form.Validator.getMsg("beforeDate").substitute({label:t.beforeLabel||(t.beforeElement?Form.Validator.getMsg("endDate"):Form.Validator.getMsg("currentDate"))})},test:function(n,t){var i=Date.parse(n.get("value")),r=document.id(t.beforeElement)?Date.parse(document.id(t.beforeElement).get("value")):new Date;return r&&i?r>=i:!0}}],["validate-custom-required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(n,t){return n.get("value")!=t.emptyValue}}],["validate-same-month",{errorMsg:function(n,t){var i=document.id(t.sameMonthAs)&&document.id(t.sameMonthAs).get("value"),r=n.get("value");if(""!=r)return Form.Validator.getMsg(i?"sameMonth":"startMonth")},test:function(n,t){var i=Date.parse(n.get("value")),r=Date.parse(document.id(t.sameMonthAs)&&document.id(t.sameMonthAs).get("value"));return i&&r?i.format("%B")==r.format("%B"):!0}}],["validate-cc-num",{errorMsg:function(n){var t=n.get("value").replace(/[^0-9]/g,"");return Form.Validator.getMsg("creditcard").substitute({length:t.length})},test:function(n){var t,r,f;if(Form.Validator.getValidator("IsEmpty").test(n))return!0;if(t=n.get("value"),t=t.replace(/[^0-9]/g,""),r=!1,t.test(/^4[0-9]{12}([0-9]{3})?$/)?r="Visa":t.test(/^5[1-5]([0-9]{14})$/)?r="Master Card":t.test(/^3[47][0-9]{13}$/)?r="American Express":t.test(/^6(?:011|5[0-9]{2})[0-9]{12}$/)?r="Discover":t.test(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/)&&(r="Diners Club"),r){for(var e=0,i=0,u=t.length-1;u>=0;--u)i=t.charAt(u).toInt(),0!=i&&((t.length-u)%2==0&&(i+=i),i>9&&(i=i.toString().charAt(0).toInt()+i.toString().charAt(1).toInt()),e+=i);if(e%10==0)return!0}for(f="";""!=t;)f+=" "+t.substr(0,4),t=t.substr(4);return n.getParent("form").retrieve("validator").ignoreField(n),n.set("value",f.clean()),n.getParent("form").retrieve("validator").enforceField(n),!1}}]])}(),Form.Validator.Inline=new Class({Extends:Form.Validator,options:{showError:function(n){n.reveal?n.reveal():n.setStyle("display","block")},hideError:function(n){n.dissolve?n.dissolve():n.setStyle("display","none")},scrollToErrorsOnSubmit:!0,scrollToErrorsOnBlur:!1,scrollToErrorsOnChange:!1,scrollFxOptions:{transition:"quad:out",offset:{y:-20}}},initialize:function(n,t){this.parent(n,t),this.addEvent("onElementValidate",function(n,t,i,r){var u=this.getValidator(i),f;!n&&u.getError(t)?(r&&t.addClass("warning"),f=this.makeAdvice(i,t,u.getError(t),r),this.insertAdvice(f,t),this.showAdvice(i,t)):this.hideAdvice(i,t)})},makeAdvice:function(n,t,i,r){var f=r?this.warningPrefix:this.errorPrefix,e,u;return f+=this.options.useTitles?t.title||i:i,e=r?"warning-advice":"validation-advice",u=this.getAdvice(n,t),u=u?u.set("html",f):new Element("div",{html:f,styles:{display:"none"},id:"advice-"+n.split(":")[0]+"-"+this.getFieldId(t)}).addClass(e),t.store("$moo:advice-"+n,u),u},getFieldId:function(n){return n.id?n.id:n.id="input_"+n.name},showAdvice:function(n,t){var i=this.getAdvice(n,t);!i||t.retrieve("$moo:"+this.getPropName(n))||"none"!=i.getStyle("display")&&"hidden"!=i.getStyle("visibility")&&0!=i.getStyle("opacity")||(t.store("$moo:"+this.getPropName(n),!0),this.options.showError(i),this.fireEvent("showAdvice",[t,i,n]))},hideAdvice:function(n,t){var i=this.getAdvice(n,t);i&&t.retrieve("$moo:"+this.getPropName(n))&&(t.store("$moo:"+this.getPropName(n),!1),this.options.hideError(i),this.fireEvent("hideAdvice",[t,i,n]))},getPropName:function(n){return"advice"+n},resetField:function(n){return(n=document.id(n))?(this.parent(n),n.get("validators").each(function(t){this.hideAdvice(t,n)},this),this):this},getAllAdviceMessages:function(n,t){var i=[];return n.hasClass("ignoreValidation")&&!t?i:(n.get("validators").some(function(t){var u=t.test("^warn-")||n.hasClass("warnOnly"),r;u&&(t=t.replace(/^warn-/,"")),r=this.getValidator(t),r&&i.push({message:r.getError(n),warnOnly:u,passed:r.test(),validator:r})},this),i)},getAdvice:function(n,t){return t.retrieve("$moo:advice-"+n)},insertAdvice:function(n,t){var i=t.get("validatorProps");i.msgPos&&document.id(i.msgPos)?document.id(i.msgPos).grab(n):t.type&&"radio"==t.type.toLowerCase()?t.getParent().adopt(n):n.inject(document.id(t),"after")},validateField:function(n,t,i){var e=this.parent(n,t),f,r,u;if((this.options.scrollToErrorsOnSubmit&&null==i||i)&&!e){for(f=document.id(this).getElement(".validation-failed"),r=document.id(this).getParent();r!=document.body&&r.getScrollSize().y==r.getSize().y;)r=r.getParent();u=r.retrieve("$moo:fvScroller"),!u&&window.Fx&&Fx.Scroll&&(u=new Fx.Scroll(r,this.options.scrollFxOptions),r.store("$moo:fvScroller",u)),f&&(u?u.toElement(f):r.scrollTo(r.getScroll().x,f.getPosition(r).y-20))}return e},watchFields:function(n){n.each(function(n){this.options.evaluateFieldsOnBlur&&n.addEvent("blur",this.validationMonitor.pass([n,!1,this.options.scrollToErrorsOnBlur],this)),this.options.evaluateFieldsOnChange&&n.addEvent("change",this.validationMonitor.pass([n,!0,this.options.scrollToErrorsOnChange],this))},this)}}),Fx.Elements=new Class({Extends:Fx.CSS,initialize:function(n,t){this.elements=this.subject=$$(n),this.parent(t)},compute:function(n,t,i){var f={},r,u;for(r in n){var e=n[r],o=t[r],s=f[r]={};for(u in e)s[u]=this.parent(e[u],o[u],i)}return f},set:function(n){var t,i,r;for(t in n)if(this.elements[t]){i=n[t];for(r in i)this.render(this.elements[t],r,i[r],this.options.unit)}return this},start:function(n){var r,u,t,i,f;if(!this.check(n))return this;r={},u={};for(t in n)if(this.elements[t]){var e=n[t],o=r[t]={},s=u[t]={};for(i in e)f=this.prepare(this.elements[t],i,e[i]),o[i]=f.from,s[i]=f.to}return this.parent(r,u)}}),Fx.Accordion=new Class({Extends:Fx.Elements,options:{fixedHeight:!1,fixedWidth:!1,display:0,show:!1,height:!0,width:!1,opacity:!0,alwaysHide:!1,trigger:"click",initialDisplayFx:!0,resetHeight:!0,keepOpen:!1},initialize:function(){var f=function(n){return null!=n},u=Array.link(arguments,{container:Type.isElement,options:Type.isObject,togglers:f,elements:f}),n,r,t,i,e;for(this.parent(u.elements,u.options),n=this.options,r=this.togglers=$$(u.togglers),this.previous=-1,this.internalChain=new Chain,n.alwaysHide&&(this.options.link="chain"),(n.show||0===this.options.show)&&(n.display=!1,this.previous=n.show),n.start&&(n.display=!1,n.show=!1),t=this.effects={},n.opacity&&(t.opacity="fullOpacity"),n.width&&(t.width=n.fixedWidth?"fullWidth":"offsetWidth"),n.height&&(t.height=n.fixedHeight?"fullHeight":"scrollHeight"),i=0,e=r.length;e>i;i++)this.addSection(r[i],this.elements[i]);this.elements.each(function(i,u){if(n.show===u)this.fireEvent("active",[r[u],i]);else for(var f in t)i.setStyle(f,0)},this),(n.display||0===n.display||n.initialDisplayFx===!1)&&this.display(n.display,n.initialDisplayFx),n.fixedHeight!==!1&&(n.resetHeight=!1),this.addEvent("complete",this.internalChain.callChain.bind(this.internalChain))},addSection:function(n,t){var f;n=document.id(n),t=document.id(t),this.togglers.include(n),this.elements.include(t);var r=this.togglers,i=this.options,e=r.contains(n),o=r.indexOf(n),u=this.display.pass(o,this);if(n.store("accordion:display",u).addEvent(i.trigger,u),i.height&&t.setStyles({"padding-top":0,"border-top":"none","padding-bottom":0,"border-bottom":"none"}),i.width&&t.setStyles({"padding-left":0,"border-left":"none","padding-right":0,"border-right":"none"}),t.fullOpacity=1,i.fixedWidth&&(t.fullWidth=i.fixedWidth),i.fixedHeight&&(t.fullHeight=i.fixedHeight),t.setStyle("overflow","hidden"),!e)for(f in this.effects)t.setStyle(f,0);return this},removeSection:function(n,t){var r=this.togglers,i=r.indexOf(n),f=this.elements[i],u=function(){r.erase(n),this.elements.erase(f),this.detach(n)}.bind(this);return this.now==i||null!=t?this.display(null!=t?t:i-1>=0?i-1:0).chain(u):u(),this},detach:function(n){var t=function(n){n.removeEvent(this.options.trigger,n.retrieve("accordion:display"))}.bind(this);return n?t(n):this.togglers.each(t),this},display:function(n,t){var e,s;if(!this.check(n,t))return this;var r={},u=this.elements,i=this.options,f=this.effects,o=i.keepOpen,h=i.alwaysHide;if(null==t&&(t=!0),"element"==typeOf(n)&&(n=u.indexOf(n)),n==this.current&&!h&&!o)return this;if(i.resetHeight&&(e=u[this.current],e&&!this.selfHidden))for(s in f)e.setStyle(s,e[f[s]]);return this.timer&&"chain"==i.link?this:(null!=this.current&&(this.previous=this.current),this.current=n,this.selfHidden=!1,u.each(function(u,e){var s,l,c;if(r[e]={},!o||e==n){e==n&&(l=u.offsetHeight>0&&i.height||u.offsetWidth>0&&i.width),e!=n?s=!0:(h||o)&&l&&(s=!0,this.selfHidden=!0),this.fireEvent(s?"background":"active",[this.togglers[e],u]);for(c in f)r[e][c]=s?0:u[f[c]];t||s||!i.resetHeight||(r[e].height="auto")}},this),this.internalChain.clearChain(),this.internalChain.chain(function(){if(i.resetHeight&&!this.selfHidden){var t=u[n];t&&t.setStyle("height","auto")}}.bind(this)),t?this.start(r):this.set(r).internalChain.callChain())}}),Fx.Move=new Class({Extends:Fx.Morph,options:{relativeTo:document.body,position:"center",edge:!1,offset:{x:0,y:0}},start:function(n){var t=this.element,i=t.getStyles("top","left");return("auto"==i.top||"auto"==i.left)&&t.setPosition(t.getPosition(t.getOffsetParent())),this.parent(t.position(Object.merge({},this.options,n,{returnPos:!0})))}}),Element.Properties.move={set:function(n){return this.get("move").cancel().setOptions(n),this},get:function(){var n=this.retrieve("move");return n||(n=new Fx.Move(this,{link:"cancel"}),this.store("move",n)),n}},Element.implement({move:function(n){return this.get("move").start(n),this}}),function(){function n(n){return/^(?:body|html)$/i.test(n.tagName)}Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:!0},initialize:function(n,t){if(this.element=this.subject=document.id(n),this.parent(t),"element"!=typeOf(this.element)&&(this.element=document.id(this.element.getDocument().body)),this.options.wheelStops){var i=this.element,r=this.cancel.pass(!1,this);this.addEvent("start",function(){i.addEvent("mousewheel",r)},!0),this.addEvent("complete",function(){i.removeEvent("mousewheel",r)},!0)}},set:function(){var n=Array.flatten(arguments);return this.element.scrollTo(n[0],n[1]),this},compute:function(n,t,i){return[0,1].map(function(r){return Fx.compute(n[r],t[r],i)})},start:function(n,t){if(!this.check(n,t))return this;var i=this.element.getScroll();return this.parent([i.x,i.y],[n,t])},calculateScroll:function(n,t){var u=this.element,f=u.getScrollSize(),e=u.getScroll(),o=u.getSize(),s=this.options.offset,r={x:n,y:t},i;for(i in r)r[i]||0===r[i]||(r[i]=e[i]),"number"!=typeOf(r[i])&&(r[i]=f[i]-o[i]),r[i]+=s[i];return[r.x,r.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(!1,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,!1))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",!1))},toBottom:function(){return this.start.apply(this,this.calculateScroll(!1,"bottom"))},toElement:function(t,i){i=i?Array.convert(i):["x","y"];var u=n(this.element)?{x:0,y:0}:this.element.getScroll(),r=Object.map(document.id(t).getPosition(this.element),function(n,t){return i.contains(t)?n+u[t]:!1});return this.start.apply(this,this.calculateScroll(r.x,r.y))},toElementEdge:function(n,t,i){t=t?Array.convert(t):["x","y"],n=document.id(n);var r={},f=n.getPosition(this.element),e=n.getSize(),u=this.element.getScroll(),o=this.element.getSize(),s={x:f.x+e.x,y:f.y+e.y};return["x","y"].each(function(n){t.contains(n)&&(s[n]>u[n]+o[n]&&(r[n]=s[n]-o[n]),f[n]<u[n]&&(r[n]=f[n])),null==r[n]&&(r[n]=u[n]),i&&i[n]&&(r[n]=r[n]+i[n])},this),(r.x!=u.x||r.y!=u.y)&&this.start(r.x,r.y),this},toElementCenter:function(n,t,i){t=t?Array.convert(t):["x","y"],n=document.id(n);var r={},f=n.getPosition(this.element),e=n.getSize(),u=this.element.getScroll(),o=this.element.getSize();return["x","y"].each(function(n){t.contains(n)&&(r[n]=f[n]-(o[n]-e[n])/2),null==r[n]&&(r[n]=u[n]),i&&i[n]&&(r[n]=r[n]+i[n])},this),(r.x!=u.x||r.y!=u.y)&&this.start(r.x,r.y),this}})}(),Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:!1,hideOverflow:!0,resetHeight:!1},initialize:function(n,t){n=this.element=this.subject=document.id(n),this.parent(t),t=this.options;var i=n.retrieve("wrapper"),r=n.getStyles("margin","position","overflow");t.hideOverflow&&(r=Object.append(r,{overflow:"hidden"})),t.wrapper&&(i=document.id(t.wrapper).setStyles(r)),i||(i=new Element("div",{styles:r}).wraps(n)),n.store("wrapper",i).setStyle("margin",0),"visible"==n.getStyle("overflow")&&n.setStyle("overflow","hidden"),this.now=[],this.open=!0,this.wrapper=i,this.addEvent("complete",function(){this.open=0!=i["offset"+this.layout.capitalize()],this.open&&this.options.resetHeight&&i.setStyle("height","")},!0)},vertical:function(){this.margin="margin-top",this.layout="height",this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left",this.layout="width",this.offset=this.element.offsetWidth},set:function(n){return this.element.setStyle(this.margin,n[0]),this.wrapper.setStyle(this.layout,n[1]),this},compute:function(n,t,i){return[0,1].map(function(r){return Fx.compute(n[r],t[r],i)})},start:function(n,t){if(!this.check(n,t))return this;this[t||this.options.mode]();var i,u=this.element.getStyle(this.margin).toInt(),r=this.wrapper.getStyle(this.layout).toInt(),f=[[u,r],[0,this.offset]],e=[[u,r],[-this.offset,0]];switch(n){case"in":i=f;break;case"out":i=e;break;case"toggle":i=0==r?f:e}return this.parent(i[0],i[1])},slideIn:function(n){return this.start("in",n)},slideOut:function(n){return this.start("out",n)},hide:function(n){return this[n||this.options.mode](),this.open=!1,this.set([-this.offset,0])},show:function(n){return this[n||this.options.mode](),this.open=!0,this.set([0,this.offset])},toggle:function(n){return this.start("toggle",n)}}),Element.Properties.slide={set:function(n){return this.get("slide").cancel().setOptions(n),this},get:function(){var n=this.retrieve("slide");return n||(n=new Fx.Slide(this,{link:"cancel"}),this.store("slide",n)),n}},Element.implement({slide:function(n,t){var u,i,r;n=n||"toggle",i=this.get("slide");switch(n){case"hide":i.hide(t);break;case"show":i.show(t);break;case"toggle":r=this.retrieve("slide:flag",i.open),i[r?"slideOut":"slideIn"](t),this.store("slide:flag",!r),u=!0;break;default:i.start(n,t)}return u||this.eliminate("slide:flag"),this}}),Fx.SmoothScroll=new Class({Extends:Fx.Scroll,options:{axes:["x","y"]},initialize:function(n,t){t=t||document,this.doc=t.getDocument(),this.parent(this.doc,n);var i=t.getWindow(),r=i.location.href.match(/^[^#]*/)[0]+"#",u=$$(this.options.links||this.doc.links);u.each(function(n){if(0==n.href.indexOf(r)){var t=n.href.substr(r.length);t&&this.useLink(n,t)}},this),this.addEvent("complete",function(){i.location.hash=this.anchor,this.element.scrollTo(this.to[0],this.to[1])},!0)},useLink:function(n,t){return n.addEvent("click",function(i){var r=document.id(t)||this.doc.getElement("a[name="+t+"]");r&&(i.preventDefault(),this.toElement(r,this.options.axes).chain(function(){this.fireEvent("scrolledTo",[n,r])}.bind(this)),this.anchor=t)}.bind(this)),this}}),Fx.Sort=new Class({Extends:Fx.Elements,options:{mode:"vertical"},initialize:function(n,t){this.parent(n,t),this.elements.each(function(n){"static"==n.getStyle("position")&&n.setStyle("position","relative")}),this.setDefaultOrder()},setDefaultOrder:function(){this.currentOrder=this.elements.map(function(n,t){return t})},sort:function(){var e,o;if(!this.check(arguments))return this;var n=Array.flatten(arguments),t=0,i=0,s={},u={},f="vertical"==this.options.mode,r=this.elements.map(function(n,r){var e,o=n.getComputedSize({styles:["border","padding","margin"]}),s,h;return f?(e={top:t,margin:o["margin-top"],height:o.totalHeight},t+=e.height-o["margin-top"]):(e={left:i,margin:o["margin-left"],width:o.totalWidth},i+=e.width),s=f?"top":"left",u[r]={},h=n.getStyle(s).toInt(),u[r][s]=h||0,e},this);return this.set(u),n=n.map(function(n){return n.toInt()}),n.length!=this.elements.length&&(this.currentOrder.each(function(t){n.contains(t)||n.push(t)}),n.length>this.elements.length&&n.splice(this.elements.length-1,n.length-this.elements.length)),e=0,t=i=0,n.each(function(n){var u={};f?(u.top=t-r[n].top-e,t+=r[n].height):(u.left=i-r[n].left,i+=r[n].width),e+=r[n].margin,s[n]=u},this),o={},Array.clone(n).sort().each(function(n){o[n]=s[n]}),this.start(o),this.currentOrder=n,this},rearrangeDOM:function(n){n=n||this.currentOrder;var i=this.elements[0].getParent(),t=[];return this.elements.setStyle("opacity",0),n.each(function(n){t.push(this.elements[n].inject(i).setStyles({top:0,left:0}))},this),this.elements.setStyle("opacity",1),this.elements=$$(t),this.setDefaultOrder(),this},getDefaultOrder:function(){return this.elements.map(function(n,t){return t})},getCurrentOrder:function(){return this.currentOrder},forward:function(){return this.sort(this.getDefaultOrder())},backward:function(){return this.sort(this.getDefaultOrder().reverse())},reverse:function(){return this.sort(this.currentOrder.reverse())},sortByElements:function(n){return this.sort(n.map(function(n){return this.elements.indexOf(n)},this))},swap:function(n,t){"element"==typeOf(n)&&(n=this.elements.indexOf(n)),"element"==typeOf(t)&&(t=this.elements.indexOf(t));var i=Array.clone(this.currentOrder);return i[this.currentOrder.indexOf(n)]=t,i[this.currentOrder.indexOf(t)]=n,this.sort(i)}}),function(){var n=this.Keyboard=new Class({Extends:Events,Implements:[Options],options:{defaultEventType:"keydown",active:!1,manager:null,events:{},nonParsedEvents:["activate","deactivate","onactivate","ondeactivate","changed","onchanged"]},initialize:function(n){n&&n.manager&&(this._manager=n.manager,delete n.manager),this.setOptions(n),this._setup()},addEvent:function(t,i,r){return this.parent(n.parse(t,this.options.defaultEventType,this.options.nonParsedEvents),i,r)},removeEvent:function(t,i){return this.parent(n.parse(t,this.options.defaultEventType,this.options.nonParsedEvents),i)},toggleActive:function(){return this[this.isActive()?"deactivate":"activate"]()},activate:function(t){if(t){if(t.isActive())return this;this._activeKB&&t!=this._activeKB&&(this.previous=this._activeKB,this.previous.fireEvent("deactivate")),this._activeKB=t.fireEvent("activate"),n.manager.fireEvent("changed")}else this._manager&&this._manager.activate(this);return this},isActive:function(){return this._manager?this._manager._activeKB==this:n.manager==this},deactivate:function(t){return t?t===this._activeKB&&(this._activeKB=null,t.fireEvent("deactivate"),n.manager.fireEvent("changed")):this._manager&&this._manager.deactivate(this),this},relinquish:function(){return this.isActive()&&this._manager&&this._manager.previous?this._manager.activate(this._manager.previous):this.deactivate(),this},manage:function(n){return n._manager&&n._manager.drop(n),this._instances.push(n),n._manager=this,this._activeKB||this.activate(n),this},drop:function(n){return n.relinquish(),this._instances.erase(n),this._activeKB==n&&(this.previous&&this._instances.contains(this.previous)?this.activate(this.previous):this._activeKB=this._instances[0]),this},trace:function(){n.trace(this)},each:function(t){n.each(this,t)},_instances:[],_disable:function(n){this._activeKB==n&&(this._activeKB=null)},_setup:function(){this.addEvents(this.options.events),n.manager&&!this._manager&&n.manager.manage(this),this.options.active?this.activate():this.relinquish()},_handle:function(n,t){if(!n.preventKeyboardPropagation){var i=!!this._manager;i&&this._activeKB&&(this._activeKB._handle(n,t),n.preventKeyboardPropagation)||(this.fireEvent(t,n),!i&&this._activeKB&&this._activeKB._handle(n,t))}}}),t={},r=["shift","control","alt","meta"],u=/^(?:shift|control|ctrl|alt|meta)$/,i;n.parse=function(n,i,f){var s,e,o;return f&&f.contains(n.toLowerCase())?n:((n=n.toLowerCase().replace(/^(keyup|keydown):/,function(n,t){return i=t,""}),t[n])||("+"!=n?(e={},n.split("+").each(function(n){u.test(n)?e[n]=!0:s=n}),e.control=e.control||e.ctrl,o=[],r.each(function(n){e[n]&&o.push(n)}),s&&o.push(s),t[n]=o.join("+")):t[n]=n),i+":keys("+t[n]+")")},n.each=function(t,i){for(var r=t||n.manager;r;)i(r),r=r._activeKB},n.stop=function(n){n.preventKeyboardPropagation=!0},n.manager=new n({active:!0}),n.trace=function(t){t=t||n.manager;var i=window.console&&console.log;i&&console.log("the following items have focus: "),n.each(t,function(n){i&&console.log(document.id(n.widget)||n.wiget||n)})},i=function(t){var i=[];r.each(function(n){t[n]&&i.push(n)}),u.test(t.key)||i.push(t.key),n.manager._handle(t,t.type+":keys("+i.join("+")+")")},document.addEvents({keyup:i,keydown:i})}(),Keyboard.prototype.options.nonParsedEvents.combine(["rebound","onrebound"]),Keyboard.implement({addShortcut:function(n,t){return this._shortcuts=this._shortcuts||[],this._shortcutIndex=this._shortcutIndex||{},t.getKeyboard=Function.convert(this),t.name=n,this._shortcutIndex[n]=t,this._shortcuts.push(t),t.keys&&this.addEvent(t.keys,t.handler),this},addShortcuts:function(n){for(var t in n)this.addShortcut(t,n[t]);return this},removeShortcut:function(n){var t=this.getShortcut(n);return t&&t.keys&&(this.removeEvent(t.keys,t.handler),delete this._shortcutIndex[n],this._shortcuts.erase(t)),this},removeShortcuts:function(n){return n.each(this.removeShortcut,this),this},getShortcuts:function(){return this._shortcuts||[]},getShortcut:function(n){return(this._shortcutIndex||{})[n]}}),Keyboard.rebind=function(n,t){Array.convert(t).each(function(t){t.getKeyboard().removeEvent(t.keys,t.handler),t.getKeyboard().addEvent(n,t.handler),t.keys=n,t.getKeyboard().fireEvent("rebound")})},Keyboard.getActiveShortcuts=function(n){var t=[],i=[];return Keyboard.each(n,[].push.bind(t)),t.each(function(n){i.extend(n.getShortcuts())}),i},Keyboard.getShortcut=function(n,t,i){i=i||{};var r=i.many?[]:null,u=i.many?function(t){var i=t.getShortcut(n);i&&r.push(i)}:function(t){r||(r=t.getShortcut(n))};return Keyboard.each(t,u),r},Keyboard.getShortcuts=function(n,t){return Keyboard.getShortcut(n,t,{many:!0})},function(){this.HtmlTable=new Class({Implements:[Options,Events,Class.Occlude],options:{properties:{cellpadding:0,cellspacing:0,border:0},rows:[],headers:[],footers:[]},property:"HtmlTable",initialize:function(){var n=Array.link(arguments,{options:Type.isObject,table:Type.isElement,id:Type.isString});return this.setOptions(n.options),!n.table&&n.id&&(n.table=document.id(n.id)),this.element=n.table||new Element("table",this.options.properties),this.occlude()?this.occluded:void this.build()},build:function(){this.element.store("HtmlTable",this),this.body=document.id(this.element.tBodies[0])||new Element("tbody").inject(this.element),$$(this.body.rows),this.options.headers.length?this.setHeaders(this.options.headers):this.thead=document.id(this.element.tHead),this.thead&&(this.head=this.getHead()),this.options.footers.length&&this.setFooters(this.options.footers),this.tfoot=document.id(this.element.tFoot),this.tfoot&&(this.foot=document.id(this.tfoot.rows[0])),this.options.rows.each(function(n){this.push(n)},this)},toElement:function(){return this.element},empty:function(){return this.body.empty(),this},set:function(n,t){var r="headers"==n?"tHead":"tFoot",i=r.toLowerCase(),u;return this[i]=(document.id(this.element[r])||new Element(i).inject(this.element,"top")).empty(),u=this.push(t,{},this[i],"headers"==n?"th":"td"),"headers"==n?this.head=this.getHead():this.foot=this.getHead(),u},getHead:function(){var n=this.thead.rows;return n.length>1?$$(n):n.length?document.id(n[0]):!1},setHeaders:function(n){return this.set("headers",n),this},setFooters:function(n){return this.set("footers",n),this},update:function(n,t,i){var r=n.getChildren(i||"td"),u=r.length-1;return t.each(function(t,f){var e=r[f]||new Element(i||"td").inject(n),o=(t&&Object.prototype.hasOwnProperty.call(t,"content")?t.content:"")||t,s=typeOf(o);t&&Object.prototype.hasOwnProperty.call(t,"properties")&&e.set(t.properties),/(element(s?)|array|collection)/.test(s)?e.empty().adopt(o):e.set("html",o),f>u?r.push(e):r[f]=e}),{tr:n,tds:r}},push:function(n,t,i,r,u){return"element"==typeOf(n)&&"tr"==n.get("tag")?(n.inject(i||this.body,u),{tr:n,tds:n.getChildren("td")}):this.update(new Element("tr",t).inject(i||this.body,u),n,r)},pushMany:function(n,t,i,r,u){return n.map(function(n){return this.push(n,t,i,r,u)},this)}})}(),["adopt","inject","wraps","grab","replaces","dispose"].each(function(n){HtmlTable.implement(n,function(){return this.element[n].apply(this.element,arguments),this})}),HtmlTable=Class.refactor(HtmlTable,{options:{useKeyboard:!0,classRowSelected:"table-tr-selected",classRowHovered:"table-tr-hovered",classSelectable:"table-selectable",shiftForMultiSelect:!0,allowMultiSelect:!0,selectable:!1,selectHiddenRows:!1},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:(this.selectedRows=new Elements,this.bound||(this.bound={}),this.bound.mouseleave=this.mouseleave.bind(this),this.bound.clickRow=this.clickRow.bind(this),this.bound.activateKeyboard=function(){this.keyboard&&this.selectEnabled&&this.keyboard.activate()}.bind(this),void(this.options.selectable&&this.enableSelect()))},empty:function(){return this.body.rows.length&&this.selectNone(),this.previous()},enableSelect:function(){return this.selectEnabled=!0,this.attachSelects(),this.element.addClass(this.options.classSelectable),this},disableSelect:function(){return this.selectEnabled=!1,this.attachSelects(!1),this.element.removeClass(this.options.classSelectable),this},push:function(){var n=this.previous.apply(this,arguments);return this.updateSelects(),n},toggleRow:function(n){return this[(this.isSelected(n)?"de":"")+"selectRow"](n)},selectRow:function(n,t){if(!this.isSelected(n)&&(t||this.body.getChildren().contains(n)))return(this.options.allowMultiSelect||this.selectNone(),this.isSelected(n)||(this.selectedRows.push(n),n.addClass(this.options.classRowSelected),this.fireEvent("rowFocus",[n,this.selectedRows]),this.fireEvent("stateChanged")),this.focused=n,document.clearSelection(),this)},isSelected:function(n){return this.selectedRows.contains(n)},getSelected:function(){return this.selectedRows},serialize:function(){var n=this.previous.apply(this,arguments)||{};return this.options.selectable&&(n.selectedRows=this.selectedRows.map(function(n){return Array.indexOf(this.body.rows,n)}.bind(this))),n},restore:function(n){this.options.selectable&&n.selectedRows&&n.selectedRows.each(function(n){this.selectRow(this.body.rows[n])}.bind(this)),this.previous.apply(this,arguments)},deselectRow:function(n,t){if(this.isSelected(n)&&(t||this.body.getChildren().contains(n)))return(this.selectedRows=new Elements(Array.convert(this.selectedRows).erase(n)),n.removeClass(this.options.classRowSelected),this.fireEvent("rowUnfocus",[n,this.selectedRows]),this.fireEvent("stateChanged"),this)},selectAll:function(n){if(n||this.options.allowMultiSelect)return(this.selectRange(0,this.body.rows.length,n),this)},selectNone:function(){return this.selectAll(!0)},selectRange:function(n,t,i){var f,r,e,u;if(this.options.allowMultiSelect||i){for(f=i?"deselectRow":"selectRow",r=Array.clone(this.body.rows),("element"==typeOf(n)&&(n=r.indexOf(n)),"element"==typeOf(t)&&(t=r.indexOf(t)),t=t<r.length-1?t:r.length-1,n>t)&&(e=n,n=t,t=e),u=n;t>=u;u++)(this.options.selectHiddenRows||r[u].isDisplayed())&&this[f](r[u],!0);return this}},deselectRange:function(n,t){this.selectRange(n,t,!0)},enterRow:function(n){this.hovered&&(this.hovered=this.leaveRow(this.hovered)),this.hovered=n.addClass(this.options.classRowHovered)},leaveRow:function(n){n.removeClass(this.options.classRowHovered)},updateSelects:function(){Array.each(this.body.rows,function(n){var t=n.retrieve("binders");(t||this.selectEnabled)&&(t||(t={mouseenter:this.enterRow.pass([n],this),mouseleave:this.leaveRow.pass([n],this)},n.store("binders",t)),this.selectEnabled?n.addEvents(t):n.removeEvents(t))},this)},shiftFocus:function(n,t){if(!this.focused)return this.selectRow(this.body.rows[0],t);var i=this.getRowByOffset(n,this.options.selectHiddenRows);return null===i||this.focused==this.body.rows[i]?this:void this.toggleRow(this.body.rows[i],t)},clickRow:function(n,t){var i=(n.shift||n.meta||n.control)&&this.options.shiftForMultiSelect;i||n.rightClick&&this.isSelected(t)&&this.options.allowMultiSelect||this.selectNone(),n.rightClick?this.selectRow(t):this.toggleRow(t),n.shift&&(this.selectRange(this.rangeStart||this.body.rows[0],t,this.rangeStart?!this.isSelected(t):!0),this.focused=t),this.rangeStart=t},getRowByOffset:function(n,t){var i,r;if(!this.focused)return 0;if(i=Array.indexOf(this.body.rows,this.focused),0==i&&0>n||i==this.body.rows.length-1&&n>0)return null;if(t)i+=n;else if(r=0,n>0)for(;n>r&&i<this.body.rows.length-1;)this.body.rows[++i].isDisplayed()&&r++;else for(;r>n&&i>0;)this.body.rows[--i].isDisplayed()&&r--;return i},attachSelects:function(n){var u,f,e,t,i,r;n=null!=n?n:!0,u=n?"addEvents":"removeEvents",(this.element[u]({mouseleave:this.bound.mouseleave,click:this.bound.activateKeyboard}),this.body[u]({"click:relay(tr)":this.bound.clickRow,"contextmenu:relay(tr)":this.bound.clickRow}),this.options.useKeyboard||this.keyboard)&&((this.keyboard||(this.keyboard=new Keyboard),this.selectKeysDefined)||(this.selectKeysDefined=!0,t=function(n){var t=function(i){clearTimeout(f),i.preventDefault();var r=this.body.rows[this.getRowByOffset(n,this.options.selectHiddenRows)];i.shift&&r&&this.isSelected(r)?(this.deselectRow(this.focused),this.focused=r):(!r||this.options.allowMultiSelect&&i.shift||this.selectNone(),this.shiftFocus(n,i)),f=e?t.delay(100,this,i):function(){e=!0,t(i)}.delay(400)}.bind(this);return t}.bind(this),i=function(){clearTimeout(f),e=!1},this.keyboard.addEvents({"keydown:shift+up":t(-1),"keydown:shift+down":t(1),"keyup:shift+up":i,"keyup:shift+down":i,"keyup:up":i,"keyup:down":i}),r="",this.options.allowMultiSelect&&this.options.shiftForMultiSelect&&this.options.useKeyboard&&(r=" (Shift multi-selects)."),this.keyboard.addShortcuts({"Select Previous Row":{keys:"up",shortcut:"up arrow",handler:t(-1),description:"Select the previous row in the table."+r},"Select Next Row":{keys:"down",shortcut:"down arrow",handler:t(1),description:"Select the next row in the table."+r}})),this.keyboard[n?"activate":"deactivate"]()),this.updateSelects()},mouseleave:function(){this.hovered&&this.leaveRow(this.hovered)}}),function(){var n=document.createElement("table");try{n.innerHTML="<tr><td><\/td><\/tr>",n=0===n.childNodes.length}catch(t){n=!0}HtmlTable=Class.refactor(HtmlTable,{options:{sortIndex:0,sortReverse:!1,parsers:[],defaultParser:"string",classSortable:"table-sortable",classHeadSort:"table-th-sort",classHeadSortRev:"table-th-sort-rev",classNoSort:"table-th-nosort",classGroupHead:"table-tr-group-head",classGroup:"table-tr-group",classCellSort:"table-td-sort",classSortSpan:"table-th-sort-span",sortable:!1,thSelector:"th"},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:(this.sorted={index:null,dir:1},this.bound||(this.bound={}),this.bound.headClick=this.headClick.bind(this),this.sortSpans=new Elements,void(this.options.sortable&&(this.enableSort(),null!=this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortReverse))))},attachSorts:function(n){this.detachSorts(),n!==!1&&this.element.addEvent("click:relay("+this.options.thSelector+")",this.bound.headClick)},detachSorts:function(){this.element.removeEvents("click:relay("+this.options.thSelector+")")},setHeaders:function(){this.previous.apply(this,arguments),this.sortable&&this.setParsers()},setParsers:function(){this.parsers=this.detectParsers()},detectParsers:function(){return this.head&&this.head.getElements(this.options.thSelector).flatten().map(this.detectParser,this)},detectParser:function(n,t){var r,e,u,i,f;if(n.hasClass(this.options.classNoSort)||n.retrieve("htmltable-parser"))return n.retrieve("htmltable-parser");r=new Element("div"),r.adopt(n.childNodes).inject(n),e=new Element("span",{"class":this.options.classSortSpan}).inject(r,"top"),this.sortSpans.push(e),i=this.options.parsers[t],f=this.body.rows;switch(typeOf(i)){case"function":i={convert:i},u=!0;break;case"string":i=i,u=!0}return u||HtmlTable.ParserPriority.some(function(n){var o=HtmlTable.Parsers[n],s=o.match,r,h,u,e;if(!s)return!1;for(r=0,h=f.length;h>r;r++)if(u=document.id(f[r].cells[t]),e=u?u.get("html").clean():"",e&&s.test(e))return i=o,!0}),i||(i=this.options.defaultParser),n.store("htmltable-parser",i),i},headClick:function(n,t){if(this.head&&!t.hasClass(this.options.classNoSort))return this.sort(Array.indexOf(this.head.getElements(this.options.thSelector).flatten(),t)%this.body.rows[0].cells.length)},serialize:function(){var n=this.previous.apply(this,arguments)||{};return this.options.sortable&&(n.sortIndex=this.sorted.index,n.sortReverse=this.sorted.reverse),n},restore:function(n){this.options.sortable&&n.sortIndex&&this.sort(n.sortIndex,n.sortReverse),this.previous.apply(this,arguments)},setSortedState:function(n,t){this.sorted.reverse=null!=t?t:this.sorted.index==n?!this.sorted.reverse:null==this.sorted.index,null!=n&&(this.sorted.index=n)},setHeadSort:function(n){var t=$$(this.head.length?this.head.map(function(n){return n.getElements(this.options.thSelector)[this.sorted.index]},this).clean():this.head.cells[this.sorted.index]);t.length&&(n?(t.addClass(this.options.classHeadSort),this.sorted.reverse?t.addClass(this.options.classHeadSortRev):t.removeClass(this.options.classHeadSortRev)):t.removeClass(this.options.classHeadSort).removeClass(this.options.classHeadSortRev))},setRowSort:function(n,t){for(var e,i,r=n.length,f=this.body;r;){var o=n[--r],s=o.position,u=f.rows[s];if(!u.disabled)for(t||(e=this.setGroupSort(e,u,o),this.setRowStyle(u,r)),f.appendChild(u),i=0;r>i;i++)n[i].position>s&&n[i].position--}},setRowStyle:function(n,t){this.previous(n,t),n.cells[this.sorted.index].addClass(this.options.classCellSort)},setGroupSort:function(n,t,i){return n==i.value?t.removeClass(this.options.classGroupHead).addClass(this.options.classGroup):t.removeClass(this.options.classGroup).addClass(this.options.classGroupHead),i.value},getParser:function(){var n=this.parsers[this.sorted.index];return"string"==typeOf(n)?HtmlTable.Parsers[n]:n},sort:function(t,i,r,u){var f,e,o,s;if(this.head&&(r||(this.clearSort(),this.setSortedState(t,i),this.setHeadSort(!0)),f=this.getParser(),f))return n||(e=this.body.getParent(),this.body.dispose()),o=this.parseData(f).sort(u?u:function(n,t){return n.value===t.value?0:n.value>t.value?1:-1}),s=this.sorted.reverse==(f==HtmlTable.Parsers["input-checked"]),s&&o.reverse(!0),this.setRowSort(o,r),e&&e.grab(this.body),this.fireEvent("stateChanged"),this.fireEvent("sort",[this.body,this.sorted.index,s?"asc":"desc"])},parseData:function(n){return Array.map(this.body.rows,function(t,i){var r=n.convert.call(document.id(t.cells[this.sorted.index]));return{position:i,value:r}},this)},clearSort:function(){this.setHeadSort(!1),this.body.getElements("td").removeClass(this.options.classCellSort)},reSort:function(){return this.sortable&&this.sort.call(this,this.sorted.index,this.sorted.reverse),this},enableSort:function(){return this.element.addClass(this.options.classSortable),this.attachSorts(!0),this.setParsers(),this.sortable=!0,this},disableSort:function(){return this.element.removeClass(this.options.classSortable),this.attachSorts(!1),this.sortSpans.each(function(n){n.destroy()}),this.sortSpans.empty(),this.sortable=!1,this}}),HtmlTable.ParserPriority=["date","input-checked","input-value","float","number"],HtmlTable.Parsers={date:{match:/^\d{2}[-\/ ]\d{2}[-\/ ]\d{2,4}$/,convert:function(){var n=Date.parse(this.get("text").stripTags());return"date"==typeOf(n)?n.format("db"):""},type:"date"},"input-checked":{match:/ type="(radio|checkbox)"/,convert:function(){return this.getElement("input").checked}},"input-value":{match:/<input/,convert:function(){return this.getElement("input").value}},number:{match:/^\d+[^\d.,]*$/,convert:function(){return this.get("text").stripTags().toInt()},number:!0},numberLax:{match:/^[^\d]+\d+$/,convert:function(){return this.get("text").replace(/[^-?^0-9]/,"").stripTags().toInt()},number:!0},float:{match:/^[\d]+\.[\d]+/,convert:function(){return this.get("text").replace(/[^-?^\d.e]/,"").stripTags().toFloat()},number:!0},floatLax:{match:/^[^\d]+[\d]+\.[\d]+$/,convert:function(){return this.get("text").replace(/[^-?^\d.]/,"").stripTags().toFloat()},number:!0},string:{match:null,convert:function(){return this.get("text").stripTags().toLowerCase()}},title:{match:null,convert:function(){return this.title}}},HtmlTable.defineParsers=function(n){HtmlTable.Parsers=Object.append(HtmlTable.Parsers,n);for(var t in n)HtmlTable.ParserPriority.unshift(t)}}(),HtmlTable=Class.refactor(HtmlTable,{options:{classZebra:"table-tr-odd",zebra:!0,zebraOnlyVisibleRows:!0},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:void(this.options.zebra&&this.updateZebras())},updateZebras:function(){var n=0;Array.each(this.body.rows,function(t){(!this.options.zebraOnlyVisibleRows||t.isDisplayed())&&this.zebra(t,n++)},this)},setRowStyle:function(n,t){this.previous&&this.previous(n,t),this.zebra(n,t)},zebra:function(n,t){return n[(t%2?"remove":"add")+"Class"](this.options.classZebra)},push:function(){var n=this.previous.apply(this,arguments);return this.options.zebra&&this.updateZebras(),n}}),function(){this.Scroller=new Class({Implements:[Events,Options],options:{area:20,velocity:1,onChange:function(n,t){this.element.scrollTo(n,t)},fps:50},initialize:function(n,t){this.setOptions(t),this.element=document.id(n),this.docBody=document.id(this.element.getDocument().body),this.listener="element"!=typeOf(this.element)?this.docBody:this.element,this.timer=null,this.bound={attach:this.attach.bind(this),detach:this.detach.bind(this),getCoords:this.getCoords.bind(this)}},start:function(){return this.listener.addEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach}),this},stop:function(){return this.listener.removeEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach}),this.detach(),this.timer=clearInterval(this.timer),this},attach:function(){this.listener.addEvent("mousemove",this.bound.getCoords)},detach:function(){this.listener.removeEvent("mousemove",this.bound.getCoords),this.timer=clearInterval(this.timer)},getCoords:function(n){this.page="body"==this.listener.get("tag")?n.client:n.page,this.timer||(this.timer=this.scroll.periodical(Math.round(1e3/this.options.fps),this))},scroll:function(){var u=this.element.getSize(),i=this.element.getScroll(),r=this.element!=this.docBody&&this.element!=window?this.element.getOffsets():{x:0,y:0},o=this.element.getScrollSize(),t={x:0,y:0},f=this.options.area.top||this.options.area,e=this.options.area.bottom||this.options.area,n;for(n in this.page)this.page[n]<f+r[n]&&0!=i[n]?t[n]=(this.page[n]-f-r[n])*this.options.velocity:this.page[n]+e>u[n]+r[n]&&i[n]+u[n]!=o[n]&&(t[n]=(this.page[n]-u[n]+e-r[n])*this.options.velocity),t[n]=t[n].round();(t.y||t.x)&&this.fireEvent("change",[i.x+t.x,i.y+t.y])}})}(),Locale.define("en-GB","Date",{dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M"}).inherit("en-US","Date"),Locale.define("en-US","Number",{decimal:".",group:",",currency:{prefix:"$ "}}),Request.JSONP=new Class({Implements:[Chain,Events,Options],options:{onRequest:function(n){this.options.log&&window.console&&console.log&&console.log("JSONP retrieving script with url:"+n)},onError:function(n){this.options.log&&window.console&&console.warn&&console.warn("JSONP "+n+" will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs")},url:"",callbackKey:"callback",injectScript:document.head,data:"",link:"ignore",timeout:0,log:!1},initialize:function(n){this.setOptions(n)},send:function(n){var r,t,e;if(!Request.prototype.check.call(this,n))return this;this.running=!0,r=typeOf(n),("string"==r||"element"==r)&&(n={data:n}),n=Object.merge(this.options,n||{}),t=n.data;switch(typeOf(t)){case"element":t=document.id(t).toQueryString();break;case"object":case"hash":t=Object.toQueryString(t)}var u=this.index=Request.JSONP.counter++,f="request_"+u,i=n.url+(n.url.test("\\?")?"&":"?")+n.callbackKey+"=Request.JSONP.request_map.request_"+u+(t?"&"+t:"");return i.length>2083&&this.fireEvent("error",i),Request.JSONP.request_map[f]=function(){delete Request.JSONP.request_map[f],this.success(arguments,u)}.bind(this),e=this.getScript(i).inject(n.injectScript),this.fireEvent("request",[i,e]),n.timeout&&this.timeout.delay(n.timeout,this),this},getScript:function(n){return this.script||(this.script=new Element("script",{type:"text/javascript",async:!0,src:n})),this.script},success:function(n){this.running&&this.clear().fireEvent("complete",n).fireEvent("success",n).callChain()},cancel:function(){return this.running&&this.clear().fireEvent("cancel"),this},isRunning:function(){return!!this.running},clear:function(){return this.running=!1,this.script&&(this.script.destroy(),this.script=null),this},timeout:function(){return this.running&&(this.running=!1,this.fireEvent("timeout",[this.script.get("src"),this.script]).fireEvent("failure").cancel()),this}}),Request.JSONP.counter=0,Request.JSONP.request_map={},Request.implement({options:{initialDelay:5e3,delay:5e3,limit:6e4},startTimer:function(n){var t=function(){this.running||this.send({data:n})};return this.lastDelay=this.options.initialDelay,this.timer=t.delay(this.lastDelay,this),this.completeCheck=function(n){clearTimeout(this.timer),this.lastDelay=n?this.options.delay:(this.lastDelay+this.options.delay).min(this.options.limit),this.timer=t.delay(this.lastDelay,this)},this.addEvent("complete",this.completeCheck)},stopTimer:function(){return clearTimeout(this.timer),this.removeEvent("complete",this.completeCheck)}}),Request.Queue=new Class({Implements:[Options,Events],Binds:["attach","request","complete","cancel","success","failure","exception"],options:{stopOnFailure:!0,autoAdvance:!0,concurrent:1,requests:{}},initialize:function(n){var t;n&&(t=n.requests,delete n.requests),this.setOptions(n),this.requests={},this.queue=[],this.reqBinders={},t&&this.addRequests(t)},addRequest:function(n,t){return this.requests[n]=t,this.attach(n,t),this},addRequests:function(n){return Object.each(n,function(n,t){this.addRequest(t,n)},this),this},getName:function(n){return Object.keyOf(this.requests,n)},attach:function(n,t){return t._groupSend?this:(["request","complete","cancel","success","failure","exception"].each(function(i){this.reqBinders[n]||(this.reqBinders[n]={}),this.reqBinders[n][i]=function(){this["on"+i.capitalize()].apply(this,[n,t].append(arguments))}.bind(this),t.addEvent(i,this.reqBinders[n][i])},this),t._groupSend=t.send,t.send=function(i){return this.send(n,i),t}.bind(this),this)},removeRequest:function(n){var t="object"==typeOf(n)?this.getName(n):n;return(t||"string"==typeOf(t))&&(n=this.requests[t])?(["request","complete","cancel","success","failure","exception"].each(function(i){n.removeEvent(i,this.reqBinders[t][i])},this),n.send=n._groupSend,delete n._groupSend,this):this},getRunning:function(){return Object.filter(this.requests,function(n){return n.running})},isRunning:function(){return!!Object.keys(this.getRunning()).length},send:function(n,t){var i=function(){this.requests[n]._groupSend(t),this.queue.erase(i)}.bind(this);return i.name=n,Object.keys(this.getRunning()).length>=this.options.concurrent||this.error&&this.options.stopOnFailure?this.queue.push(i):i(),this},hasNext:function(n){return n?!!this.queue.filter(function(t){return t.name==n}).length:!!this.queue.length},resume:function(){return this.error=!1,(this.options.concurrent-Object.keys(this.getRunning()).length).times(this.runNext,this),this},runNext:function(n){if(!this.queue.length)return this;if(n){var t;this.queue.each(function(i){t||i.name!=n||(t=!0,i())})}else this.queue[0]();return this},runAll:function(){return this.queue.each(function(n){n()}),this},clear:function(n){return n?this.queue=this.queue.map(function(t){return t.name!=n?t:!1}).filter(function(n){return n}):this.queue.empty(),this},cancel:function(n){return this.requests[n].cancel(),this},onRequest:function(){this.fireEvent("request",arguments)},onComplete:function(){this.fireEvent("complete",arguments),this.queue.length||this.fireEvent("end")},onCancel:function(){this.options.autoAdvance&&!this.error&&this.runNext(),this.fireEvent("cancel",arguments)},onSuccess:function(){this.options.autoAdvance&&!this.error&&this.runNext(),this.fireEvent("success",arguments)},onFailure:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.runNext(),this.fireEvent("failure",arguments)},onException:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.runNext(),this.fireEvent("exception",arguments)}}),function(n){Array.implement({min:function(){return Math.min.apply(null,this)},max:function(){return Math.max.apply(null,this)},average:function(){return this.length?this.sum()/this.length:0},sum:function(){var t=0,n=this.length;if(n)for(;n--;)null!=this[n]&&(t+=parseFloat(this[n]));return t},unique:function(){return[].combine(this)},shuffle:function(){for(var i,t,n=this.length;n&&--n;)i=this[n],t=Math.floor(Math.random()*(n+1)),this[n]=this[t],this[t]=i;return this},reduce:function(t,i){for(var r=0,u=this.length;u>r;r++)r in this&&(i=i===n?this[r]:t.call(null,i,this[r],r,this));return i},reduceRight:function(t,i){for(var r=this.length;r--;)r in this&&(i=i===n?this[r]:t.call(null,i,this[r],r,this));return i},pluck:function(n){return this.map(function(t){return t[n]})}})}(),Date.implement({timeDiffInWords:function(n){return Date.distanceOfTimeInWords(this,n||new Date)},timeDiff:function(n,t){null==n&&(n=new Date);for(var u,f,i=((n-this)/1e3).floor().abs(),e=[],o=[60,60,24,365,0],r=0;r<o.length&&(!r||i);r++)u=i,(f=o[r])&&(u=i%f,i=(i/f).floor()),e.unshift(u+(["s","m","h","d","y"][r]||""));return e.join(t||":")}}).extend({distanceOfTimeInWords:function(n,t){return Date.getTimePhrase(((t-n)/1e3).toInt())},getTimePhrase:function(n){var f=0>n?"Until":"Ago",u,t,i,r;0>n&&(n*=-1),u={minute:60,hour:60,day:24,week:7,month:52/12,year:12,eon:1/0},t="lessThanMinute";for(i in u){if(r=u[i],1.5*r>n){n>.75*r&&(t=i);break}n/=r,t=i+"s"}return n=n.round(),Date.getMsg(t+f,n).substitute({delta:n})}}).defineParsers({re:/^(?:tod|tom|yes)/i,handler:function(n){var t=(new Date).clearTime();switch(n[0]){case"tom":return t.increment();case"yes":return t.decrement();default:return t}}},{re:/^(next|last) ([a-z]+)$/i,handler:function(n){var t=(new Date).clearTime(),r=t.getDay(),u=Date.parseDay(n[2],!0),i=u-r;return r>=u&&(i+=7),"last"==n[1]&&(i-=7),t.set("date",t.getDate()+i)}}).alias("timeAgoInWords","timeDiffInWords"),function(){if(!this.Hash){var n=this.Hash=new Type("Hash",function(n){"hash"==typeOf(n)&&(n=Object.clone(n.getClean()));for(var t in n)this[t]=n[t];return this});this.$H=function(t){return new n(t)},n.implement({forEach:function(n,t){Object.forEach(this,n,t)},getClean:function(){var t={},n;for(n in this)this.hasOwnProperty(n)&&(t[n]=this[n]);return t},getLength:function(){var n=0,t;for(t in this)this.hasOwnProperty(t)&&n++;return n}}),n.alias("each","forEach"),n.implement({has:Object.prototype.hasOwnProperty,keyOf:function(n){return Object.keyOf(this,n)},hasValue:function(n){return Object.contains(this,n)},extend:function(t){return n.each(t||{},function(t,i){n.set(this,i,t)},this),this},combine:function(t){return n.each(t||{},function(t,i){n.include(this,i,t)},this),this},erase:function(n){return this.hasOwnProperty(n)&&delete this[n],this},get:function(n){return this.hasOwnProperty(n)?this[n]:null},set:function(n,t){return(!this[n]||this.hasOwnProperty(n))&&(this[n]=t),this},empty:function(){return n.each(this,function(n,t){delete this[t]},this),this},include:function(n,t){return void 0==this[n]&&(this[n]=t),this},map:function(t,i){return new n(Object.map(this,t,i))},filter:function(t,i){return new n(Object.filter(this,t,i))},every:function(n,t){return Object.every(this,n,t)},some:function(n,t){return Object.some(this,n,t)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(n){return Object.toQueryString(this,n)}}),n.alias({indexOf:"keyOf",contains:"hasValue"})}}(),Hash.implement({getFromPath:function(n){return Object.getFromPath(this,n)},cleanValues:function(n){return new Hash(Object.cleanValues(this,n))},run:function(){Object.run(arguments)}}),Number.implement({format:function(n){var t=this,f,a,v,i,e,u,o,s;n=n?Object.clone(n):{};var r=function(t){return null!=n[t]?n[t]:Locale.get("Number."+t)},p=0>t,c=r("decimal"),l=r("precision"),y=r("group"),h=r("decimals");if(p&&(f=r("negative")||{},null==f.prefix&&null==f.suffix&&(f.prefix="-"),["prefix","suffix"].each(function(t){f[t]&&(n[t]=r(t)+f[t])}),t=-t),a=r("prefix"),v=r("suffix"),""!==h&&h>=0&&20>=h&&(t=t.toFixed(h)),l>=1&&21>=l&&(t=(+t).toPrecision(l)),t+="",r("scientific")===!1&&t.indexOf("e")>-1)if(e=t.split("e"),u=+e[1],t=e[0].replace(".",""),0>u){for(u=-u-1,i=e[0].indexOf("."),i>-1&&(u-=i-1);u--;)t="0"+t;t="0."+t}else for(i=e[0].lastIndexOf("."),i>-1&&(u-=e[0].length-i-1);u--;)t+="0";if("."!=c&&(t=t.replace(".",c)),y){for(i=t.lastIndexOf(c),i=i>-1?i:t.length,o=t.substring(i),s=i;s--;)(i-s-1)%3==0&&s!=i-1&&(o=y+o),o=t.charAt(s)+o;t=o}return a&&(t=a+t),v&&(t+=v),t},formatCurrency:function(n){var t=Locale.get("Number.currency")||{};return null==t.scientific&&(t.scientific=!1),t.decimals=null!=n?n:null==t.decimals?2:t.decimals,this.format(t)},formatPercentage:function(n){var t=Locale.get("Number.percentage")||{};return null==t.suffix&&(t.suffix="%"),t.decimals=null!=n?n:null==t.decimals?2:t.decimals,this.format(t)}}),function(){var t=function(){return this.get("value")},n=this.URI=new Class({Implements:Options,options:{},regex:/^(?:(\w+):)?(?:\/\/(?:(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[A-Fa-f0-9:]+\]|[^:\/?#]*)(?::(\d*))?)?(\.\.?$|(?:[^?#\/]*\/)*)([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,parts:["scheme","user","password","host","port","directory","file","query","fragment"],schemes:{http:80,https:443,ftp:21,rtsp:554,mms:1755,file:0},initialize:function(t,i){this.setOptions(i);var r=this.options.base||n.base;t||(t=r),t&&t.parsed?this.parsed=Object.clone(t.parsed):this.set("value",t.href||t.toString(),r?new n(r):!1)},parse:function(n,t){var i=n.match(this.regex);return i?(i.shift(),this.merge(i.associate(this.parts),t)):!1},merge:function(n,t){return n&&n.scheme||t&&t.scheme?(t&&this.parts.every(function(i){return n[i]?!1:(n[i]=t[i]||"",!0)}),n.port=n.port||this.schemes[n.scheme.toLowerCase()],n.directory=n.directory?this.parseDirectory(n.directory,t?t.directory:""):"/",n):!1},parseDirectory:function(t,i){if(t=("/"==t.substr(0,1)?"":i||"/")+t,!t.test(n.regs.directoryDot))return t;var r=[];return t.replace(n.regs.endSlash,"").split("/").each(function(n){".."==n&&r.length>0?r.pop():"."!=n&&r.push(n)}),r.join("/")+"/"},combine:function(n){return n.value||n.scheme+"://"+(n.user?n.user+(n.password?":"+n.password:"")+"@":"")+(n.host||"")+(n.port&&n.port!=this.schemes[n.scheme]?":"+n.port:"")+(n.directory||"/")+(n.file||"")+(n.query?"?"+n.query:"")+(n.fragment?"#"+n.fragment:"")},set:function(t,i,r){if("value"==t){var u=i.match(n.regs.scheme);u&&(u=u[1]),this.parsed=u&&null==this.schemes[u.toLowerCase()]?{scheme:u,value:i}:this.parse(i,(r||this).parsed)||(u?{scheme:u,value:i}:{value:i})}else"data"==t?this.setData(i):this.parsed[t]=i;return this},get:function(n,t){switch(n){case"value":return this.combine(this.parsed,t?t.parsed:!1);case"data":return this.getData()}return this.parsed[n]||""},go:function(){document.location.href=this.toString()},toURI:function(){return this},getData:function(n,t){var i=this.get(t||"query"),r;return!i&&0!==i?n?null:{}:(r=i.parseQueryString(),n?r[n]:r)},setData:function(n,t,i){if("string"==typeof n){var r=this.getData();r[arguments[0]]=arguments[1],n=r}else t&&(n=Object.merge(this.getData(null,i),n));return this.set(i||"query",Object.toQueryString(n))},clearData:function(n){return this.set(n||"query","")},toString:t,valueOf:t});n.regs={endSlash:/\/$/,scheme:/^(\w+):/,directoryDot:/\.\/|\.$/},n.base=new n(Array.convert(document.getElements("base[href]",!0)).getLast(),{base:document.location}),String.implement({toURI:function(t){return new n(this,t)}})}(),URI=Class.refactor(URI,{combine:function(n,t){var f;if(!t||n.scheme!=t.scheme||n.host!=t.host||n.port!=t.port)return this.previous.apply(this,arguments);if(f=n.file+(n.query?"?"+n.query:"")+(n.fragment?"#"+n.fragment:""),!t.directory)return(n.directory||(n.file?"":"./"))+f;for(var e=t.directory.split("/"),u=n.directory.split("/"),o="",r=0,i=0;i<e.length&&i<u.length&&e[i]==u[i];i++);for(r=0;r<e.length-i-1;r++)o+="../";for(r=i;r<u.length-1;r++)o+=u[r]+"/";return(o||(n.file?"":"./"))+f},toAbsolute:function(n){return n=new URI(n),n&&n.set("directory","").set("file",""),this.toRelative(n)},toRelative:function(n){return this.get("value",new URI(n))}}),function(){var n=this.Asset={javascript:function(n,t){t||(t={});var i=new Element("script",{src:n,type:"text/javascript"}),u=t.document||document,r=t.onload||t.onLoad;return delete t.onload,delete t.onLoad,delete t.document,r&&(i.addEventListener?i.addEvent("load",r):i.addEvent("readystatechange",function(){["loaded","complete"].contains(this.readyState)&&r.call(this)})),i.set(t).inject(u.head)},css:function(n,t){var i;t||(t={});var r=t.onload||t.onLoad,o=t.document||document,s=t.timeout||3e3;if(["onload","onLoad","document"].each(function(n){delete t[n]}),i=new Element("link",{type:"text/css",rel:"stylesheet",media:"screen",href:n}).setProperties(t).inject(o.head),r){var u=!1,f=0,e=function(){for(var t,h,o=document.styleSheets,n=0;n<o.length;n++)if(t=o[n],h=t.ownerNode?t.ownerNode:t.owningElement,h&&h==i)return u=!0,r.call(i);return f++,!u&&s/50>f?setTimeout(e,50):void 0};setTimeout(e,0)}return i},image:function(n,t){t||(t={});var i=new Image,r=document.id(i)||new Element("img");return["load","abort","error"].each(function(n){var u="on"+n,f="on"+n.capitalize(),e=t[u]||t[f]||function(){};delete t[f],delete t[u],i[u]=function(){i&&(r.parentNode||(r.width=i.width,r.height=i.height),i=i.onload=i.onabort=i.onerror=null,e.delay(1,r,r),r.fireEvent(n,r,1))}}),i.src=r.src=n,i&&i.complete&&i.onload.delay(1),r.set(t)},images:function(t,i){t=Array.convert(t);var u=function(){},r=0;return i=Object.merge({onComplete:u,onProgress:u,onError:u,properties:{}},i),new Elements(t.map(function(u,f){return n.image(u,Object.append(i.properties,{onload:function(){r++,i.onProgress.call(this,r,f,u),r==t.length&&i.onComplete()},onerror:function(){r++,i.onError.call(this,r,f,u),r==t.length&&i.onComplete()}}))}))}}}(),function(){var n=this.Color=new Type("Color",function(n,t){switch(arguments.length>=3?(t="rgb",n=Array.slice(arguments,0,3)):"string"==typeof n&&(n=n.match(/rgb/)?n.rgbToHex().hexToRgb(!0):n.match(/hsb/)?n.hsbToRgb():n.hexToRgb(!0)),t=t||"rgb"){case"hsb":var i=n;n=n.hsbToRgb(),n.hsb=i;break;case"hex":n=n.hexToRgb(!0)}return n.rgb=n.slice(0,3),n.hsb=n.hsb||n.rgbToHsb(),n.hex=n.rgbToHex(),Object.append(n,this)});n.implement({mix:function(){var t=Array.slice(arguments),r="number"==typeOf(t.getLast())?t.pop():50,i=this.slice();return t.each(function(t){t=new n(t);for(var u=0;3>u;u++)i[u]=Math.round(i[u]/100*(100-r)+t[u]/100*r)}),new n(i,"rgb")},invert:function(){return new n(this.map(function(n){return 255-n}))},setHue:function(t){return new n([t,this.hsb[1],this.hsb[2]],"hsb")},setSaturation:function(t){return new n([this.hsb[0],t,this.hsb[2]],"hsb")},setBrightness:function(t){return new n([this.hsb[0],this.hsb[1],t],"hsb")}}),this.$RGB=function(t,i,r){return new n([t,i,r],"rgb")},this.$HSB=function(t,i,r){return new n([t,i,r],"hsb")},this.$HEX=function(t){return new n(t,"hex")},Array.implement({rgbToHsb:function(){var i=this[0],r=this[1],f=this[2],t=0,n=Math.max(i,r,f),c=Math.min(i,r,f),u=n-c,l=n/255,e=0!=n?u/n:0;if(0!=e){var o=(n-i)/u,s=(n-r)/u,h=(n-f)/u;t=i==n?h-s:r==n?2+o-h:4+s-o,t/=6,0>t&&t++}return[Math.round(360*t),Math.round(100*e),Math.round(100*l)]},hsbToRgb:function(){var n=Math.round(this[2]/100*255);if(0==this[1])return[n,n,n];var u=this[0]%360,f=u%60,t=Math.round(this[2]*(100-this[1])/1e4*255),i=Math.round(this[2]*(6e3-this[1]*f)/6e5*255),r=Math.round(this[2]*(6e3-this[1]*(60-f))/6e5*255);switch(Math.floor(u/60)){case 0:return[n,r,t];case 1:return[i,n,t];case 2:return[t,n,r];case 3:return[t,i,n];case 4:return[r,t,n];case 5:return[n,t,i]}return!1}}),String.implement({rgbToHsb:function(){var n=this.match(/\d{1,3}/g);return n?n.rgbToHsb():null},hsbToRgb:function(){var n=this.match(/\d{1,3}/g);return n?n.hsbToRgb():null}})}(),function(){this.Group=new Class({initialize:function(){this.instances=Array.flatten(arguments)},addEvent:function(n,t){var u=this.instances,i=u.length,f=i,r=new Array(i),e=this;u.each(function(o,s){o.addEvent(n,function(){r[s]||f--,r[s]=arguments,f||(t.call(e,u,o,r),f=i,r=new Array(i))})})}})}(),Hash.Cookie=new Class({Extends:Cookie,options:{autoSave:!0},initialize:function(n,t){this.parent(n,t),this.load()},save:function(){var n=JSON.encode(this.hash);return!n||n.length>4096?!1:("{}"==n?this.dispose():this.write(n),!0)},load:function(){return this.hash=new Hash(JSON.decode(this.read(),!0)),this}}),Hash.each(Hash.prototype,function(n,t){"function"==typeof n&&Hash.Cookie.implement(t,function(){var t=n.apply(this.hash,arguments);return this.options.autoSave&&this.save(),t})}),function(){var n=this.Table=function(){this.length=0;var n=[],t=[];this.set=function(i,r){var f=n.indexOf(i),u;return-1==f?(u=n.length,n[u]=i,t[u]=r,this.length++):t[f]=r,this},this.get=function(i){var r=n.indexOf(i);return-1==r?null:t[r]},this.erase=function(i){var r=n.indexOf(i);return-1!=r?(this.length--,n.splice(r,1),t.splice(r,1)[0]):null},this.each=this.forEach=function(i,r){for(var u=0,f=this.length;f>u;u++)i.call(r,n[u],t[u],this)}};this.Type&&new Type("Table",n)}(),!function t(n,t,i){function r(u,e){var s,h,o;if(!t[u]){if(!n[u]){if(s="function"==typeof require&&require,!e&&s)return s(u,!0);if(f)return f(u,!0);h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h;}o=t[u]={exports:{}},n[u][0].call(o.exports,function(t){var i=n[u][1][t];return r(i?i:t)},o,o.exports,t,n,t,i)}return t[u].exports}for(var f="function"==typeof require&&require,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(n){"use strict";var t=n("../main");"function"==typeof define&&define.amd?define(t):(window.PerfectScrollbar=t,"undefined"==typeof window.Ps&&(window.Ps=t))},{"../main":7}],2:[function(n,t,i){"use strict";function r(n,t){var i=n.className.split(" ");i.indexOf(t)<0&&i.push(t),n.className=i.join(" ")}function u(n,t){var i=n.className.split(" "),r=i.indexOf(t);r>=0&&i.splice(r,1),n.className=i.join(" ")}i.add=function(n,t){n.classList?n.classList.add(t):r(n,t)},i.remove=function(n,t){n.classList?n.classList.remove(t):u(n,t)},i.list=function(n){return n.classList?Array.prototype.slice.apply(n.classList):n.className.split(" ")}},{}],3:[function(n,t){"use strict";function r(n,t){return window.getComputedStyle(n)[t]}function u(n,t,i){return"number"==typeof i&&(i=i.toString()+"px"),n.style[t]=i,n}function f(n,t){var r,i;for(r in t)i=t[r],"number"==typeof i&&(i=i.toString()+"px"),n.style[r]=i;return n}var i={};i.e=function(n,t){var i=document.createElement(n);return i.className=t,i},i.appendTo=function(n,t){return t.appendChild(n),n},i.css=function(n,t,i){return"object"==typeof t?f(n,t):"undefined"==typeof i?r(n,t):u(n,t,i)},i.matches=function(n,t){return"undefined"!=typeof n.matches?n.matches(t):"undefined"!=typeof n.matchesSelector?n.matchesSelector(t):"undefined"!=typeof n.webkitMatchesSelector?n.webkitMatchesSelector(t):"undefined"!=typeof n.mozMatchesSelector?n.mozMatchesSelector(t):"undefined"!=typeof n.msMatchesSelector?n.msMatchesSelector(t):void 0},i.remove=function(n){"undefined"!=typeof n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)},i.queryChildren=function(n,t){return Array.prototype.filter.call(n.childNodes,function(n){return i.matches(n,t)})},t.exports=i},{}],4:[function(n,t){"use strict";var r=function(n){this.element=n,this.events={}},i;r.prototype.bind=function(n,t){"undefined"==typeof this.events[n]&&(this.events[n]=[]),this.events[n].push(t),this.element.addEventListener(n,t,!1)},r.prototype.unbind=function(n,t){var i="undefined"!=typeof t;this.events[n]=this.events[n].filter(function(r){return!(!i||r===t)||(this.element.removeEventListener(n,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var n in this.events)this.unbind(n)},i=function(){this.eventElements=[]},i.prototype.eventElement=function(n){var t=this.eventElements.filter(function(t){return t.element===n})[0];return"undefined"==typeof t&&(t=new r(n),this.eventElements.push(t)),t},i.prototype.bind=function(n,t,i){this.eventElement(n).bind(t,i)},i.prototype.unbind=function(n,t,i){this.eventElement(n).unbind(t,i)},i.prototype.unbindAll=function(){for(var n=0;n<this.eventElements.length;n++)this.eventElements[n].unbindAll()},i.prototype.once=function(n,t,i){var r=this.eventElement(n),u=function(n){r.unbind(t,u),i(n)};r.bind(t,u)},t.exports=i},{}],5:[function(n,t){"use strict";t.exports=function(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}}()},{}],6:[function(n,t,i){"use strict";function o(n){return function(t,i){n(t,"ps--in-scrolling"),"undefined"!=typeof i?n(t,"ps--"+i):(n(t,"ps--x"),n(t,"ps--y"))}}var f=n("./class"),r=n("./dom"),u=i.toInt=function(n){return parseInt(n,10)||0},e=i.clone=function(n){var t,i;if(n){if(Array.isArray(n))return n.map(e);if("object"==typeof n){t={};for(i in n)t[i]=e(n[i]);return t}return n}return null};i.extend=function(n,t){var r=e(n),i;for(i in t)r[i]=e(t[i]);return r},i.isEditable=function(n){return r.matches(n,"input,[contenteditable]")||r.matches(n,"select,[contenteditable]")||r.matches(n,"textarea,[contenteditable]")||r.matches(n,"button,[contenteditable]")},i.removePsClasses=function(n){for(var r,i=f.list(n),t=0;t<i.length;t++)r=i[t],0===r.indexOf("ps-")&&f.remove(n,r)},i.outerWidth=function(n){return u(r.css(n,"width"))+u(r.css(n,"paddingLeft"))+u(r.css(n,"paddingRight"))+u(r.css(n,"borderLeftWidth"))+u(r.css(n,"borderRightWidth"))},i.startScrolling=o(f.add),i.stopScrolling=o(f.remove),i.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(n,t){"use strict";var i=n("./plugin/destroy"),r=n("./plugin/initialize"),u=n("./plugin/update");t.exports={initialize:r,update:u,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(n,t){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(n,t){"use strict";var u=n("../lib/helper"),i=n("../lib/dom"),r=n("./instances");t.exports=function(n){var t=r.get(n);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),u.removePsClasses(n),r.remove(n))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(n,t){"use strict";function u(n,t){function u(n){return n.getBoundingClientRect()}var f=function(n){n.stopPropagation()};t.event.bind(t.scrollbarY,"click",f),t.event.bind(t.scrollbarYRail,"click",function(f){var e=f.pageY-window.pageYOffset-u(t.scrollbarYRail).top,o=e>t.scrollbarYTop?1:-1;r(n,"top",n.scrollTop+o*t.containerHeight),i(n),f.stopPropagation()}),t.event.bind(t.scrollbarX,"click",f),t.event.bind(t.scrollbarXRail,"click",function(f){var e=f.pageX-window.pageXOffset-u(t.scrollbarXRail).left,o=e>t.scrollbarXLeft?1:-1;r(n,"left",n.scrollLeft+o*t.containerWidth),i(n),f.stopPropagation()})}var f=n("../instances"),i=n("../update-geometry"),r=n("../update-scroll");t.exports=function(n){var t=f.get(n);u(n,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(n,t){"use strict";function e(n,t){function h(r){var u=e+r*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth),s;t.scrollbarXLeft=u<0?0:u>o?o:u,s=i.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment,f(n,"left",s)}var e=null,o=null,s=function(t){h(t.pageX-o),u(n),t.stopPropagation(),t.preventDefault()},c=function(){i.stopScrolling(n,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(u){o=u.pageX,e=i.toInt(r.css(t.scrollbarX,"left"))*t.railXRatio,i.startScrolling(n,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",c),u.stopPropagation(),u.preventDefault()})}function o(n,t){function h(r){var u=e+r*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight),s;t.scrollbarYTop=u<0?0:u>o?o:u,s=i.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight)),f(n,"top",s)}var e=null,o=null,s=function(t){h(t.pageY-o),u(n),t.stopPropagation(),t.preventDefault()},c=function(){i.stopScrolling(n,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(u){o=u.pageY,e=i.toInt(r.css(t.scrollbarY,"top"))*t.railYRatio,i.startScrolling(n,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",c),u.stopPropagation(),u.preventDefault()})}var i=n("../../lib/helper"),r=n("../../lib/dom"),s=n("../instances"),u=n("../update-geometry"),f=n("../update-scroll");t.exports=function(n){var t=s.get(n);e(n,t),o(n,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(n,t){"use strict";function u(n,t){function s(i,r){var f=n.scrollTop,u;if(0===i){if(!t.scrollbarYActive)return!1;if(0===f&&r>0||f>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}if(u=n.scrollLeft,0===r){if(!t.scrollbarXActive)return!1;if(0===u&&i<0||u>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}var u=!1,e;t.event.bind(n,"mouseenter",function(){u=!0}),t.event.bind(n,"mouseleave",function(){u=!1}),e=!1,t.event.bind(t.ownerDocument,"keydown",function(h){var v,l,a,c;if(!(h.isDefaultPrevented&&h.isDefaultPrevented()||h.defaultPrevented)&&(v=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus"),u||v)){if(l=document.activeElement?document.activeElement:t.ownerDocument.activeElement,l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(f.isEditable(l))return}a=0,c=0;switch(h.which){case 37:a=h.metaKey?-t.contentWidth:h.altKey?-t.containerWidth:-30;break;case 38:c=h.metaKey?t.contentHeight:h.altKey?t.containerHeight:30;break;case 39:a=h.metaKey?t.contentWidth:h.altKey?t.containerWidth:30;break;case 40:c=h.metaKey?-t.contentHeight:h.altKey?-t.containerHeight:-30;break;case 33:c=90;break;case 32:c=h.shiftKey?90:-90;break;case 34:c=-90;break;case 35:c=h.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:c=h.ctrlKey?n.scrollTop:t.containerHeight;break;default:return}r(n,"top",n.scrollTop-c),r(n,"left",n.scrollLeft+a),o(n),e=s(a,c),e&&h.preventDefault()}})}var f=n("../../lib/helper"),i=n("../../lib/dom"),e=n("../instances"),o=n("../update-geometry"),r=n("../update-scroll");t.exports=function(n){var t=e.get(n);u(n,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(n,t){"use strict";function r(n,t){function e(i,r){var f=n.scrollTop,u;if(0===i){if(!t.scrollbarYActive)return!1;if(0===f&&r>0||f>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}if(u=n.scrollLeft,0===r){if(!t.scrollbarXActive)return!1;if(0===u&&i<0||u>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}function o(n){var t=n.deltaX,i=-1*n.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof i||(t=n.wheelDeltaX/-6,i=n.wheelDeltaY/6),n.deltaMode&&1===n.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=n.wheelDelta),n.shiftKey?[-i,-t]:[t,i]}function s(t,i){var r=n.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover"),u,o,f,e;if(r){if(u=window.getComputedStyle(r),o=[u.overflow,u.overflowX,u.overflowY].join(""),!o.match(/(scroll|auto)/))return!1;if((f=r.scrollHeight-r.clientHeight,f>0&&!(0===r.scrollTop&&i>0||r.scrollTop===f&&i<0))||(e=r.scrollLeft-r.clientWidth,e>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===e&&t>0)))return!0}return!1}function u(u){var l=o(u),h=l[0],c=l[1];s(h,c)||(r=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?i(n,"top",n.scrollTop-c*t.settings.wheelSpeed):i(n,"top",n.scrollTop+h*t.settings.wheelSpeed),r=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(h?i(n,"left",n.scrollLeft+h*t.settings.wheelSpeed):i(n,"left",n.scrollLeft-c*t.settings.wheelSpeed),r=!0):(i(n,"top",n.scrollTop-c*t.settings.wheelSpeed),i(n,"left",n.scrollLeft+h*t.settings.wheelSpeed)),f(n),r=r||e(h,c),r&&(u.stopPropagation(),u.preventDefault()))}var r=!1;"undefined"!=typeof window.onwheel?t.event.bind(n,"wheel",u):"undefined"!=typeof window.onmousewheel&&t.event.bind(n,"mousewheel",u)}var u=n("../instances"),f=n("../update-geometry"),i=n("../update-scroll");t.exports=function(n){var t=u.get(n);r(n,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(n,t){"use strict";function i(n,t){t.event.bind(n,"scroll",function(){u(n)})}var r=n("../instances"),u=n("../update-geometry");t.exports=function(n){var t=r.get(n);i(n,t)}},{"../instances":18,"../update-geometry":19}],15:[function(n,t){"use strict";function f(n,t){function c(){var n=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===n.toString().length?null:n.getRangeAt(0).commonAncestorContainer}function l(){s||(s=setInterval(function(){return r.get(n)?(u(n,"top",n.scrollTop+f.top),u(n,"left",n.scrollLeft+f.left),void e(n)):void clearInterval(s)},50))}function h(){s&&(clearInterval(s),s=null),i.stopScrolling(n)}var s=null,f={top:0,left:0},o=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){n.contains(c())?o=!0:(o=!1,h())}),t.event.bind(window,"mouseup",function(){o&&(o=!1,h())}),t.event.bind(window,"keyup",function(){o&&(o=!1,h())}),t.event.bind(window,"mousemove",function(t){if(o){var r={x:t.pageX,y:t.pageY},u={left:n.offsetLeft,right:n.offsetLeft+n.offsetWidth,top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight};r.x<u.left+3?(f.left=-5,i.startScrolling(n,"x")):r.x>u.right-3?(f.left=5,i.startScrolling(n,"x")):f.left=0,r.y<u.top+3?(f.top=u.top+3-r.y<5?-5:-20,i.startScrolling(n,"y")):r.y>u.bottom-3?(f.top=r.y-u.bottom+3<5?5:20,i.startScrolling(n,"y")):f.top=0,0===f.top&&0===f.left?h():l()}})}var i=n("../../lib/helper"),r=n("../instances"),e=n("../update-geometry"),u=n("../update-scroll");t.exports=function(n){var t=r.get(n);f(n,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(n,t){"use strict";function f(n,t,i,f){function nt(i,r){var u=n.scrollTop,f=n.scrollLeft,e=Math.abs(i),o=Math.abs(r);if(o>e){if(r<0&&u===t.contentHeight-t.containerHeight||r>0&&0===u)return!t.settings.swipePropagation}else if(e>o&&(i<0&&f===t.contentWidth-t.containerWidth||i>0&&0===f))return!t.settings.swipePropagation;return!0}function k(t,i){u(n,"top",n.scrollTop-i),u(n,"left",n.scrollLeft-t),e(n)}function v(){a=!0}function y(){a=!1}function d(n){return n.targetTouches?n.targetTouches[0]:n}function g(n){return!(!n.targetTouches||1!==n.targetTouches.length)||!(!n.pointerType||"mouse"===n.pointerType||n.pointerType===n.MSPOINTER_TYPE_MOUSE)}function l(n){if(g(n)){c=!0;var t=d(n);h.pageX=t.pageX,h.pageY=t.pageY,b=(new Date).getTime(),null!==s&&clearInterval(s),n.stopPropagation()}}function p(n){var e,i;if(!c&&t.settings.swipePropagation&&l(n),!a&&c&&g(n)){var s=d(n),r={pageX:s.pageX,pageY:s.pageY},u=r.pageX-h.pageX,f=r.pageY-h.pageY;k(u,f),h=r,e=(new Date).getTime(),i=e-b,i>0&&(o.x=u/i,o.y=f/i,b=e),nt(u,f)&&(n.stopPropagation(),n.preventDefault())}}function w(){!a&&c&&(c=!1,t.settings.swipeEasing&&(clearInterval(s),s=setInterval(function(){return r.get(n)&&(o.x||o.y)?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?void clearInterval(s):(k(30*o.x,30*o.y),o.x*=.8,void(o.y*=.8)):void clearInterval(s)},10)))}var h={},b=0,o={},s=null,a=!1,c=!1;i?(t.event.bind(window,"touchstart",v),t.event.bind(window,"touchend",y),t.event.bind(n,"touchstart",l),t.event.bind(n,"touchmove",p),t.event.bind(n,"touchend",w)):f&&(window.PointerEvent?(t.event.bind(window,"pointerdown",v),t.event.bind(window,"pointerup",y),t.event.bind(n,"pointerdown",l),t.event.bind(n,"pointermove",p),t.event.bind(n,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",v),t.event.bind(window,"MSPointerUp",y),t.event.bind(n,"MSPointerDown",l),t.event.bind(n,"MSPointerMove",p),t.event.bind(n,"MSPointerUp",w)))}var i=n("../../lib/helper"),r=n("../instances"),e=n("../update-geometry"),u=n("../update-scroll");t.exports=function(n){if(i.env.supportsTouch||i.env.supportsIePointer){var t=r.get(n);f(n,t,i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(n,t){"use strict";var r=n("../lib/helper"),i=n("../lib/class"),u=n("./instances"),f=n("./update-geometry"),e={"click-rail":n("./handler/click-rail"),"drag-scrollbar":n("./handler/drag-scrollbar"),keyboard:n("./handler/keyboard"),wheel:n("./handler/mouse-wheel"),touch:n("./handler/touch"),selection:n("./handler/selection")},o=n("./handler/native-scroll");t.exports=function(n,t){t="object"==typeof t?t:{},i.add(n,"ps");var s=u.add(n);s.settings=r.extend(s.settings,t),i.add(n,"ps--theme_"+s.settings.theme),s.settings.handlers.forEach(function(t){e[t](n)}),o(n),f(n)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(n,t,i){"use strict";function s(n){function i(){o.add(n,"ps--focus")}function f(){o.remove(n,"ps--focus")}var t=this;t.settings=u.clone(l),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===r.css(n,"direction"),t.isNegativeScroll=function(){var i=n.scrollLeft,t=null;return n.scrollLeft=-1,t=n.scrollLeft<0,n.scrollLeft=i,t}(),t.negativeScrollAdjustment=t.isNegativeScroll?n.scrollWidth-n.clientWidth:0,t.event=new a,t.ownerDocument=n.ownerDocument||document,t.scrollbarXRail=r.appendTo(r.e("div","ps__scrollbar-x-rail"),n),t.scrollbarX=r.appendTo(r.e("div","ps__scrollbar-x"),t.scrollbarXRail),t.scrollbarX.setAttribute("tabindex",0),t.event.bind(t.scrollbarX,"focus",i),t.event.bind(t.scrollbarX,"blur",f),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=u.toInt(r.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:u.toInt(r.css(t.scrollbarXRail,"top")),t.railBorderXWidth=u.toInt(r.css(t.scrollbarXRail,"borderLeftWidth"))+u.toInt(r.css(t.scrollbarXRail,"borderRightWidth")),r.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=u.toInt(r.css(t.scrollbarXRail,"marginLeft"))+u.toInt(r.css(t.scrollbarXRail,"marginRight")),r.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=r.appendTo(r.e("div","ps__scrollbar-y-rail"),n),t.scrollbarY=r.appendTo(r.e("div","ps__scrollbar-y"),t.scrollbarYRail),t.scrollbarY.setAttribute("tabindex",0),t.event.bind(t.scrollbarY,"focus",i),t.event.bind(t.scrollbarY,"blur",f),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=u.toInt(r.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:u.toInt(r.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?u.outerWidth(t.scrollbarY):null,t.railBorderYWidth=u.toInt(r.css(t.scrollbarYRail,"borderTopWidth"))+u.toInt(r.css(t.scrollbarYRail,"borderBottomWidth")),r.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=u.toInt(r.css(t.scrollbarYRail,"marginTop"))+u.toInt(r.css(t.scrollbarYRail,"marginBottom")),r.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}function e(n){return n.getAttribute("data-ps-id")}function h(n,t){n.setAttribute("data-ps-id",t)}function c(n){n.removeAttribute("data-ps-id")}var u=n("../lib/helper"),o=n("../lib/class"),l=n("./default-setting"),r=n("../lib/dom"),a=n("../lib/event-manager"),v=n("../lib/guid"),f={};i.add=function(n){var t=v();return h(n,t),f[t]=new s(n),f[t]},i.remove=function(n){delete f[e(n)],c(n)},i.get=function(n){return f[e(n)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(n,t){"use strict";function f(n,t){return n.settings.minScrollbarLength&&(t=Math.max(t,n.settings.minScrollbarLength)),n.settings.maxScrollbarLength&&(t=Math.min(t,n.settings.maxScrollbarLength)),t}function o(n,t){var r={width:t.railXWidth},u;r.left=t.isRtl?t.negativeScrollAdjustment+n.scrollLeft+t.containerWidth-t.contentWidth:n.scrollLeft,t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-n.scrollTop:r.top=t.scrollbarXTop+n.scrollTop,i.css(t.scrollbarXRail,r),u={top:n.scrollTop,height:t.railYHeight},t.isScrollbarYUsingRight?u.right=t.isRtl?t.contentWidth-(t.negativeScrollAdjustment+n.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:t.scrollbarYRight-n.scrollLeft:u.left=t.isRtl?t.negativeScrollAdjustment+n.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:t.scrollbarYLeft+n.scrollLeft,i.css(t.scrollbarYRail,u),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var r=n("../lib/helper"),u=n("../lib/class"),i=n("../lib/dom"),s=n("./instances"),e=n("./update-scroll");t.exports=function(n){var t=s.get(n),h;t.containerWidth=n.clientWidth,t.containerHeight=n.clientHeight,t.contentWidth=n.scrollWidth,t.contentHeight=n.scrollHeight,n.contains(t.scrollbarXRail)||(h=i.queryChildren(n,".ps__scrollbar-x-rail"),h.length>0&&h.forEach(function(n){i.remove(n)}),i.appendTo(t.scrollbarXRail,n)),n.contains(t.scrollbarYRail)||(h=i.queryChildren(n,".ps__scrollbar-y-rail"),h.length>0&&h.forEach(function(n){i.remove(n)}),i.appendTo(t.scrollbarYRail,n)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=f(t,r.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=r.toInt((t.negativeScrollAdjustment+n.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=f(t,r.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=r.toInt(n.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(n,t),t.scrollbarXActive?u.add(n,"ps--active-x"):(u.remove(n,"ps--active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e(n,"left",0)),t.scrollbarYActive?u.add(n,"ps--active-y"):(u.remove(n,"ps--active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,e(n,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(n,t){"use strict";var r=n("./instances"),i=function(n){var t=document.createEvent("Event");return t.initEvent(n,!0,!0),t};t.exports=function(n,t,u){if("undefined"==typeof n)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof u)throw"You must provide a value to the update-scroll function";"top"===t&&u<=0&&(n.scrollTop=u=0,n.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&u<=0&&(n.scrollLeft=u=0,n.dispatchEvent(i("ps-x-reach-start")));var f=r.get(n);"top"===t&&u>=f.contentHeight-f.containerHeight&&(u=f.contentHeight-f.containerHeight,u-n.scrollTop<=1?u=n.scrollTop:n.scrollTop=u,n.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&u>=f.contentWidth-f.containerWidth&&(u=f.contentWidth-f.containerWidth,u-n.scrollLeft<=1?u=n.scrollLeft:n.scrollLeft=u,n.dispatchEvent(i("ps-x-reach-end"))),void 0===f.lastTop&&(f.lastTop=n.scrollTop),void 0===f.lastLeft&&(f.lastLeft=n.scrollLeft),"top"===t&&u<f.lastTop&&n.dispatchEvent(i("ps-scroll-up")),"top"===t&&u>f.lastTop&&n.dispatchEvent(i("ps-scroll-down")),"left"===t&&u<f.lastLeft&&n.dispatchEvent(i("ps-scroll-left")),"left"===t&&u>f.lastLeft&&n.dispatchEvent(i("ps-scroll-right")),"top"===t&&u!==f.lastTop&&(n.scrollTop=f.lastTop=u,n.dispatchEvent(i("ps-scroll-y"))),"left"===t&&u!==f.lastLeft&&(n.scrollLeft=f.lastLeft=u,n.dispatchEvent(i("ps-scroll-x")))}},{"./instances":18}],21:[function(n,t){"use strict";var r=n("../lib/helper"),i=n("../lib/dom"),f=n("./instances"),e=n("./update-geometry"),u=n("./update-scroll");t.exports=function(n){var t=f.get(n);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?n.scrollWidth-n.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),e(n),u(n,"top",n.scrollTop),u(n,"left",n.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1])