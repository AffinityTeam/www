(function(){var e={678:function(e,t,a){"use strict";var n=a(7537),i=a.n(n),l=a(3645),s=a.n(l),o=s()(i());o.push([e.id,"@media print{.flex-sche-table{width:100%;background:#fff;border-collapse:collapse;-webkit-print-color-adjust:exact}.flex-sche-table td,.flex-sche-table th{border:1px solid #ddd;padding:8px}.flex-sche-table tr:nth-child(even){background:#f2f2f2}.flex-sche-table tr:hover{background:#ddd}.flex-sche-table thead th{padding:3px 5px 3px 5px;font-weight:normal;text-align:left;background:linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%)}.flex-sche-table .leave-unit{width:100%;padding:2px 5px;background-color:#e0e0e0}}@media screen{.flex-sche-table{display:none}}","",{version:3,sources:["webpack://./src/components/FlexSchedule/Print/PrintableView.scss"],names:[],mappings:"AAAA,aACI,iBACI,UAAA,CACA,eAAA,CACA,wBAAA,CACA,gCAAA,CAEA,wCACI,qBAAA,CACA,WAAA,CAGJ,oCACI,kBAAA,CAGJ,0BACI,eAAA,CAIA,0BACI,uBAAA,CACA,kBAAA,CACA,eAAA,CACA,yFAAA,CAIR,6BACI,UAAA,CACA,eAAA,CACA,wBAAA,CAAA,CAMZ,cACI,iBACI,YAAA,CAAA",sourcesContent:["@media print {\r\n    .flex-sche-table {\r\n        width: 100%;\r\n        background: white;\r\n        border-collapse: collapse;\r\n        -webkit-print-color-adjust: exact;\r\n\r\n        td, th {\r\n            border: 1px solid #ddd;\r\n            padding: 8px;\r\n        }\r\n\r\n        tr:nth-child(even) {\r\n            background: #f2f2f2;\r\n        }\r\n\r\n        tr:hover {\r\n            background: #ddd;\r\n        }\r\n\r\n        thead {\r\n            th {\r\n                padding: 3px 5px 3px 5px;\r\n                font-weight: normal;\r\n                text-align: left;\r\n                background: linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%);\r\n            }\r\n        }\r\n\r\n        .leave-unit {\r\n            width: 100%;\r\n            padding: 2px 5px;\r\n            background-color: #E0E0E0\r\n        }\r\n\r\n    }\r\n}\r\n\r\n@media screen {\r\n    .flex-sche-table {\r\n        display: none;\r\n    }\r\n}"],sourceRoot:""}])},6700:function(e,t,a){var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6737,"./ar-kw.js":6737,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":7930,"./se.js":7930,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":9822,"./vi.js":9822,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id=6700},1619:function(e,t,a){"use strict";a.d(t,{u:function(){return YD}});var n=a(6347),i=(a(6992),a(8674),a(9601),a(7727),a(9963)),l=a(6252),s={class:"pagecontent"},o={class:"v-application contentwrapper"};function r(e,t,a,n,i,r){var c=(0,l.up)("schedules-navigation"),u=(0,l.up)("alert"),d=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",o,[(0,l.Wm)(c),(0,l.Wm)(u),(0,l.Wm)(d)])])}a(8862),a(7941);var c=a(3577),u=function(e){return(0,l.dD)("data-v-dd5d72d8"),e=e(),(0,l.Cn)(),e},d={class:"schedules"},h={class:"sch-nav justify-space-between align-center primary body-2"},m={class:"white--text sch-heading-text"},f={key:0,class:"d-flex sch-toolbar align-center"},p={class:"sch-nav-options mr-1 pa-0"},y=["onClick"],g={href:"/help/index",class:"sch-nav-help align-center mr-2",target:"_blank"},D=u((function(){return(0,l._)("span",{class:"icon-help-round"},null,-1)})),v=[D];function w(e,t){var a=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",h,[(0,l._)("div",m,"Schedules - "+(0,c.zw)(e.userFullName),1),e.user?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("ul",p,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.authorizedMenus,(function(t){return(0,l.wg)(),(0,l.iD)("li",{class:(0,c.C_)(["nav-box mr-1 py-1 px-2 my-1 caption",{selected:t.selected}]),onClick:function(a){return e.selectMenu(t)}},[(0,l._)("div",null,(0,c.zw)(t.display),1)],10,y)})),256))]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("a",g,v)),[[a,{content:"Help"},void 0,{top:!0}]])])):(0,l.kq)("",!0)])])}a(2222),a(1539),a(4747),a(6699),a(2023),a(9826);var b=a(8534),S=(a(5666),a(1703),a(9669)),k=a.n(S),C=!1;({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST&&(C=!0,k().defaults.baseURL={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_AXIOSHOST),k().defaults.headers.common["X-Requested-With"]="XMLHttpRequest",k().interceptors.response.use((function(e){return e.request.responseURL.indexOf("aspxerrorpath")>-1?Promise.reject("asp error"):e}),(function(e){return e&&e.response&&401==e.response.status&&location.reload(),Promise.reject(e)}));var A=function(e){return k().post("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))},x=function(){return k().post("Auth/GetInfo").then((function(e){return e.data}))};function T(e){return k().get("StandardSchedules",{params:{allSchedules:e}}).then((function(e){return e.data}))}function _(){return E.apply(this,arguments)}function E(){return E=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k().get("ShiftTypes").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function M(e){return k().get("ScheduleDetail/".concat(e)).then((function(e){return e.data}))}function F(e){return k().post("PostSchedule",e).then((function(e){return e.data}))}function N(e){return k().get("DeleteSchedule/".concat(e)).then((function(e){return e.data}))}function P(e){return k().post("AllocateSchedule",e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function O(e,t){return k().get("RemoveEmployeeWorkSchedule/".concat(t,"/").concat(e)).then((function(e){return e.data}))}function H(e,t){return k().post("UpdateEmployeeWorkSchedule/".concat(t),e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function Y(){return k().get("EmployeeOptions").then((function(e){return e.data}))}function I(e){return k().get("EmployeeWorkSchedules/".concat(e)).then((function(e){return e.data}))}function L(e){return k().get("EmployeeWorkScheduleDetail/".concat(e)).then((function(e){return e.data}))}function R(e){return k().get("FlexScheduleDetail/".concat(e)).then((function(e){return e.data}))}function j(e){return k().get("FlexSchedules",{params:e}).then((function(e){return e.data}))}function W(e){return k().post("CreateFlexSchedule/",e).then((function(e){return e.data}))}function B(e,t){return k().put("UpdateFlexSchedule/".concat(e),t).then((function(e){return e.data}))}function V(e){return k().patch("PatchFlexSchedule",e).then((function(e){return e.data}))}function Z(e){return k().get("GetManagedEmployees/".concat(e,"?fields=EmployeeNo,CommonName,StdHoursPerWeek,PositionCode,PositionTitle,Cost1,Cost2")).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))}function $(e){return k().get("GetPositions/".concat(e)).then((function(e){return e.data}))}function z(){return k().get("GetCostElements").then((function(e){return e.data}))}function U(e){return k().get("GetManagedLeaves",{params:e}).then((function(e){return"string"===typeof e.data?""===e.data?(e.data=[],e.data):JSON.parse(e.data):e.data}))}function K(e){return k().post("CopyFlexSchedule",e).then((function(e){return e.data}))}function G(e){return k()["delete"]("DeleteFlexSchedule",{data:e}).then((function(e){return e.data}))}function q(e){return k().post("CreateAvailability",e).then((function(e){return e.data}))}function Q(e){return k().get("GetAvailability",{params:{employeeNo:e}}).then((function(e){return e.data}))}function J(e){return k().patch("PatchAvailability",e).then((function(e){return e.data}))}function X(e){return k()["delete"]("DeleteAvailability/".concat(e)).then((function(e){return e.data}))}function ee(e){return k().get("GetAdditionalDetails",{params:{employeeNo:e}}).then((function(e){return e.data}))}function te(e){return k().post("PublishFlexSchedule",e).then((function(e){return e.data}))}function ae(){return k().get("WorkTypes").then((function(e){return e.data}))}function ne(){return k().get("ExcludedWorkTypes").then((function(e){return e.data}))}function ie(e){return k().post("GetCostAnalysis",e).then((function(e){return e.data}))}function le(e){return k().post("GetEmployeesCostCentres",e).then((function(e){return e.data}))}function se(e){return k().post("CostingAnalytic",e).then((function(e){return e.data}))}function oe(e){return k().post("CostingAnalyticSummary",e).then((function(e){return e.data}))}C&&(A=function(e){return k().get("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}),(function(e){return Promise.reject(e)}))},x=function(){return k().get("Auth/GetInfo").then((function(e){return e.data}))});var re={EmployeeWorkSchedule:A,AuthGetInfo:x,StandardSchedules:T,ShiftTypes:_,ScheduleDetail:M,PostSchedule:F,DeleteSchedule:N,AllocateSchedule:P,RemoveEmployeeWorkSchedule:O,UpdateEmpSchedRequest:H,EmployeesList:Y,EmpWorkScheds:I,EmpSchedDetailRequest:L,GetFlexScheduleDetail:R,GetFlexSchedules:j,CreateFlexSchedule:W,UpdateFlexSchedule:B,PatchFlexSchedule:V,GetManagedEmployees:Z,GetPosition:$,GetCostelements:z,GetManagedLeaves:U,CopyFlexSchedule:K,DeleteFlexSchedule:G,CreateAvailability:q,GetAvailabilities:Q,PatchAvailabilities:J,DeleteAvailabilities:X,GetEmployeeExtraDetail:ee,PublishFlexSchedule:te,GetWorkTypes:ae,GetDefaultWorkTypes:ne,GetCostAnalysis:ie,GetEmployeesCostCentres:le,GetCostAnalysisV2:se,GetCostAnalysisDetailV2:oe},ce=(0,l.aZ)({name:"scheduleNavigation",data:function(){return{user:null,menus:[{text:"Work Schedule",display:"My Schedules",route:"/my-schedules",selected:!1,default:!0},{text:"Availability",display:"My Availability",route:"/Availability",selected:!1,default:!1},{text:"Flex Schedule",display:"Flexi Schedules",route:"/flex-schedule",selected:!1,default:!1},{text:"Schedule Management",display:"Team Schedules",route:"/team-schedules",selected:!1,default:!1},{text:"Employee Allocation",display:"Employee Allocations",route:"/employee-allocations",selected:!1,default:!1},{text:"Cost Report",display:"Cost Reports",route:"/cost-reports",selected:!1,default:!1}],selectedMenu:null}},computed:{userFullName:function(){var e=this.user;return e?"".concat(e.FirstName," ").concat(e.LastName):""},authorizedMenus:function(){for(var e=[],t=this.user.AccessibleMenus,a=this.menus,n=0;n<this.menus.length;n++){var i=a[n];-1!=t.indexOf(i.text)&&e.push(i)}return e}},methods:{selectMenu:function(e){this.$router.push(e.route),this.menus.forEach((function(e){e.selected=!1})),e.selected=!0},isSelected:function(e){return this.selectedMenu&&this.selectedMenu.text==e}},mounted:function(){var e=this,t=(0,l.f3)("MANAGE_COMPANY_CONFIG");if(!window.Affinity||window.Affinity&&!window.Affinity.user)console.log("no affinity requesting authInfo"),re.AuthGetInfo().then((function(a){e.user=a;try{window.dispatchEvent(new CustomEvent("GAReady",{bubbles:!0,detail:{companyNumber:e.user.CompanyNo,employeeNumber:e.user.EmployeeNo,appVersion:"V2"}}))}catch(n){console.warn("GA tracking failed. Contact BenK.")}t.setAllowPersonal(a.AccessibleFeatures.includes("Personal Schedule")),t.setAllowSundayFirst(a.AccessibleFeatures.includes("Sunday First"))}));else{console.log("loading user from Affinity lib"),this.user=window.Affinity.user;try{window.dispatchEvent(new CustomEvent("GAReady",{bubbles:!0,detail:{companyNumber:this.user.CompanyNo,employeeNumber:this.user.EmployeeNo,appVersion:"V2"}}))}catch(i){console.warn("GA tracking failed. Contact BenK.")}t.setAllowPersonal(this.user.AccessibleFeatures.includes("Personal Schedule")),t.setAllowSundayFirst(this.user.AccessibleFeatures.includes("Sunday First"));var a=this.menus.find((function(t){return"/flex-schedule"===t.route?e.$route.path.indexOf(t.route)>-1:t.route===e.$route.path}));if(!a){var n=this.menus.find((function(e){return!0===e.default}));this.selectMenu(n)}}}}),ue=a(3744);const de=(0,ue.Z)(ce,[["render",w],["__scopeId","data-v-dd5d72d8"]]);var he=de,me=function(e){return(0,l.dD)("data-v-ab426914"),e=e(),(0,l.Cn)(),e},fe={class:"promt-box"},pe={key:0,class:"mr-2 d-inline"},ye=me((function(){return(0,l._)("img",{class:"loader-icon",src:"data:image/gif;base64,R0lGODlhEAAQAPQAADMzM8zMzDs7O3h4eERERKGhoYKCgszMzJaWlra2tmNjY1lZWb+/v21tbcjIyKqqqoyMjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="},null,-1)})),ge=[ye],De=["innerHTML"],ve={key:0,class:"promptButtons mt-4"},we={class:"label text-capitalize"},be=me((function(){return(0,l._)("span",{class:""}," ",-1)})),Se={class:"label text-capitalize"};function ke(e,t,a,n,i,s){var o=(0,l.up)("modal");return(0,l.wg)(),(0,l.j4)(o,{ref:"alertModalRef",noBox:!0},{body:(0,l.w5)((function(){return[(0,l._)("div",fe,[(0,l._)("div",null,[e.showLoader?((0,l.wg)(),(0,l.iD)("div",pe,ge)):(0,l.kq)("",!0),(0,l._)("div",{class:"content",innerHTML:e.message},null,8,De)]),e.showButtons?((0,l.wg)(),(0,l.iD)("div",ve,[(0,l._)("button",{type:"button",class:(0,c.C_)(["orange white--text small",{"mr-4":e.showCancel}]),tabindex:"9999998",onClick:t[0]||(t[0]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},[(0,l._)("span",we,(0,c.zw)(e.confirmButtonText),1)],2),be,e.showCancel?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"grey white--text small",small:"",tabindex:"9999999",onClick:t[1]||(t[1]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},[(0,l._)("span",Se,(0,c.zw)(e.cancelButtonText),1)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])]})),_:1},512)}var Ce={class:"modal-wrapper"},Ae={class:"modal-header"},xe={class:"modal-footer"};function Te(e,t,a,n,s,o){return(0,l.wg)(),(0,l.j4)(i.uT,{name:"modal"},{default:(0,l.w5)((function(){return[(0,l._)("div",null,[e.show?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"modal-mask",style:(0,c.j5)([e.modalIndex?{"z-index":e.modalIndex}:""])},[(0,l._)("div",Ce,[(0,l._)("div",{class:"modal-backdrop",onClick:t[0]||(t[0]=function(){return e.clickWrapper&&e.clickWrapper.apply(e,arguments)})}),(0,l._)("div",{class:(0,c.C_)(["modal-box",{"no-modal-box":e.noBox}]),style:(0,c.j5)(e.getCustomPosition())},[(0,l._)("div",Ae,[(0,l.WI)(e.$slots,"header",{},void 0,!0)]),(0,l._)("div",{class:(0,c.C_)(["modal-body",{"no-overflow-auto-body":e.noOverflowAutoBody}])},[(0,l.WI)(e.$slots,"body",{},void 0,!0)],2),(0,l._)("div",xe,[(0,l.WI)(e.$slots,"footer",{},void 0,!0)])],6)])],4)):(0,l.kq)("",!0)])]})),_:3})}a(9653);var _e=(0,l.aZ)({name:"modal",props:{customPosition:{type:Boolean,default:!1},top:{type:Number},left:{type:Number},noBox:{type:Boolean},modalIndex:{type:Number},noOverflowAutoBody:{type:Boolean,default:!1}},data:function(){return{show:!1}},methods:{toggleShow:function(e){this.show=!0===e||!1===e?e:!this.show},clickWrapper:function(){this.show=!1,this.$emit("cancel")},getCustomPosition:function(){if(this.customPosition){var e={position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px")};return window.innerWidth<=800&&(e.left="auto"),e}return""}}});const Ee=(0,ue.Z)(_e,[["render",Te],["__scopeId","data-v-b9fd33ec"]]);var Me=Ee,Fe=(0,l.aZ)({name:"alert",components:{Modal:Me},data:function(){return{dialog:!1,message:"some message ",showLoader:!1,showButtons:!1,showCancel:!1,confirmButtonText:"Ok",cancelButtonText:"Cancel"}},mounted:function(){var e=this;YD.on("alert",(function(t){console.log("emitter alert"),e.dialog=!0,e.message=t,e.showLoader=!1,e.showButtons=!0})),YD.on("dialog--loading--request",(function(t){console.log("emitter loading request"),e.dialog=!0,e.message=t,e.showCancel=!1,e.showButtons=!1,e.showLoader=!0})),YD.on("clearDialog",(function(){console.log("emitter clear dialog"),e.clearDialog(),e.dialog=!1})),YD.on("dialog",(function(t){console.log("emitter on dialog"),e.show(),e.dialog=!!t,e.message=t.message,e.showCancel=t.showCancel,e.showButtons=t.showButtons,e.showLoader=t.showLoader,e.confirmButtonText=t.confirmButtonText?t.confirmButtonText:"Ok",e.cancelButtonText=t.cancelButtonText?t.cancelButtonText:"Cancel",t.onOk&&(e.onOk=function(){t.onOk(),e.dialog=!1,e.toggleShow()}),t.onCancel&&(e.onCancel=function(){t.onCancel(),e.dialog=!1,e.toggleShow()})}))},methods:{clearDialog:function(){this.$refs.alertModalRef.toggleShow(!1)},toggleShow:function(){this.$refs.alertModalRef.toggleShow()},show:function(){this.$refs.alertModalRef.toggleShow(!0)},onOk:function(){this.$refs.alertModalRef.toggleShow()},onCancel:function(){this.$refs.alertModalRef.toggleShow()}}});const Ne=(0,ue.Z)(Fe,[["render",ke],["__scopeId","data-v-ab426914"]]);var Pe,Oe,He,Ye,Ie=Ne,Le=a(3907),Re=a(2482),je=a(6084),We=a(5082),Be=(a(8559),a(1249),a(9720),a(7042),a(6486)),Ve=a.n(Be),Ze=a(381),$e=a.n(Ze),ze={date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:"",scheduleType:""};(function(e){e["loadTargetSchedule"]="LOAD_TARGET_SCHEDULE",e["loadFlexiSchedules"]="LOAD_FLEXI_SCHEDULES"})(He||(He={})),function(e){e["clearForm"]="CLEAR_FORM",e["setScheduleDay"]="SET_SCHEDULE_DAY",e["saveScheduleDayToWeek"]="SAVE_SCHEDULE_DAY_TO_WEEK",e["saveRemoteData"]="SAVE_REMOTE_DATA",e["updateEditConfig"]="UPDATE_EDIT_CONFIG",e["createNewScheduleDay"]="CREATE_NEW_SCHEDULE_DAY",e["setAnalysisData"]="SET_ANALYSIS_DATA",e["setConfigAllTrue"]="SET_CONFIG_ALL_TRUE"}(Ye||(Ye={}));var Ue=(Pe={},(0,Re.Z)(Pe,Ye.clearForm,(function(e){e.flexScheduleDay=(0,We.Z)({},ze)})),(0,Re.Z)(Pe,Ye.createNewScheduleDay,(function(e,t){e.flexScheduleDay=ze,e.flexScheduleDay.scheduleType="",e.selectedFlexDay=t})),(0,Re.Z)(Pe,Ye.setScheduleDay,(function(e,t){e.selectedFlexDay=t,e.flexScheduleDay.startTime=t.startTime,e.flexScheduleDay.endTime=t.endTime,e.flexScheduleDay.hours=t.hours,e.flexScheduleDay.scheduleType=t.scheduleType;var a=Object.fromEntries(Object.entries(t.scheduleDetail).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})));e.flexScheduleDay=Ve().merge({},e.flexScheduleDay,a)})),(0,Re.Z)(Pe,Ye.saveScheduleDayToWeek,(function(e){e.selectedFlexDay?(e.selectedFlexDay.startTime=e.flexScheduleDay.startTime,e.selectedFlexDay.endTime=e.flexScheduleDay.endTime,e.selectedFlexDay.scheduleDetail=Ve().merge({},e.selectedFlexDay.scheduleDetail,e.flexScheduleDay)):console.error("missing selected flex day")})),(0,Re.Z)(Pe,Ye.updateEditConfig,(function(e,t){e.editFlexScheduleDayConfig=Ve().clone(t)})),(0,Re.Z)(Pe,Ye.setAnalysisData,(function(e,t){e.analysisHoursChartData=t})),(0,Re.Z)(Pe,Ye.saveRemoteData,(function(e,t){e.flexScheduleRemoteData=t})),(0,Re.Z)(Pe,Ye.setConfigAllTrue,(function(e,t){e.flexScheduleCellSetting.showHours.value=!0,e.flexScheduleCellSetting.showBreakLength.value=!0,e.flexScheduleCellSetting.showShiftId.value=!0,e.flexScheduleCellSetting.showPosition.value=!0})),Pe),Ke=(Oe={},(0,Re.Z)(Oe,He.loadTargetSchedule,(function(e,t){e.commit;re.GetFlexScheduleDetail(t).then((function(e){console.log("GetFlexScheduleDetail",e)}))})),(0,Re.Z)(Oe,He.loadFlexiSchedules,(function(e,t){var a=e.commit,n={employeeNo:Affinity.user.EmployeeNo,startDate:t.startDate.format("YYYY-MM-DD"),endDate:t.endDate.format("YYYY-MM-DD"),forManagedEmployees:!0};return re.GetFlexSchedules(n).then((function(e){var t=e.FlexSchedules;t.forEach((function(e){e.id=e.Id,e.date=e.Date,e.employeeName=e.EmployeeName,e.employeeNo=e.EmployeeNo,e.startTime=e.StartTime?$e()(e.StartTime).format("HH:mm"):"",e.endTime=e.EndTime?$e()(e.EndTime).format("HH:mm"):"",e.hours=e.Hours,e.scheduleDetail=e.ScheduleData,e.scheduleDetail.breakLength=e.scheduleDetail.BreakLength,e.scheduleDetail.position=e.scheduleDetail.Position,e.scheduleDetail.positionTitle=e.scheduleDetail.PositionTitle,e.scheduleDetail.shiftId=e.scheduleDetail.ShiftId,e.scheduleDetail.costElement1=e.scheduleDetail.CostElement1,e.scheduleDetail.costElement2=e.scheduleDetail.CostElement2,e.scheduleType=e.ScheduleType,e.publishStatus=e.PublishStatus,e.isPaid=e.IsPaid,e.dayInWeek=$e()(e.Date).day()})),a(Ye.saveRemoteData,t);var n=e.Unavailabilities.map((function(e){return{id:e.EmpAvailability.Id,unavailabilityDate:e.UnavailabilityDate,employeeNo:e.EmpAvailability.EmployeeNo,startTime:e.EmpAvailability.StartTime,endTime:e.EmpAvailability.EndTime,reason:e.EmpAvailability.Reason}}));return{flexSchedules:t,unAvailabilities:n}}))})),Oe),Ge={state:{selectedDate:$e()(),calendarFocusDate:$e()(),selectedFlexDay:null,defaultWorkTypes:null,analysisHoursChartData:null,flexScheduleRemoteData:null,flexScheduleDay:{date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:"",scheduleType:""},editFlexScheduleDayConfig:{startTime:!1,endTime:!1,hours:!1,breakLength:!1,shiftId:!1,position:!1,costElement1:!1,costElement2:!1},scheduleWeek:[],flexScheduleCellSetting:{showHours:{value:!1,name:"Net Hours"},showBreakLength:{value:!1,name:"Break Length"},showShiftId:{value:!1,name:"Shift ID"},showPosition:{value:!1,name:"Position"}},leaveList:[]},mutations:Ue,actions:Ke},qe=Ge;function Qe(e){if(!e)return"";var t="Hmm";e.includes(":")&&(t="H:mm");var a=$e()(e,t);return a.isValid()?a.format("HH:mm"):"Invalid Time"}function Je(){return window.innerWidth<1e3}var Xe={parseTimeColumn:Qe},et={name:"App",components:{schedulesNavigation:he,Alert:Ie},setup:function(){var e=(0,Le.oR)();function t(){var t=localStorage.getItem("clientStorageVersion");if("0.11"!==t)localStorage.clear(),localStorage.setItem("clientStorageVersion","0.11"),localStorage.setItem("flexScheduleCellSetting",JSON.stringify(e.state.FlexSchedule.flexScheduleCellSetting));else for(var a=e.state.FlexSchedule.flexScheduleCellSetting,n=JSON.parse(localStorage.getItem("flexScheduleCellSetting")),i=0,l=Object.keys(n);i<l.length;i++){var s=l[i];a[s]&&(a[s]=n[s])}}Je()?e.commit(Ye.setConfigAllTrue):t()},mounted:function(){console.log("app vue created")}};const tt=(0,ue.Z)(et,[["render",r]]);var at=tt,nt=a(2119),it={class:"mt-4 mt-md-10"},lt={class:"my-schedules-search-filter d-flex flex-wrap align-center mb-sm-4"},st={class:"mr-2 mr-sm-6 date-searcher d-flex align-center"},ot=(0,l._)("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date From",-1),rt=["value"],ct=(0,l._)("span",{class:"icon-popup white xs-icon"},null,-1),ut=[ct],dt=(0,l._)("span",{class:"icon-calendar white xs-icon"},null,-1),ht=[dt],mt=(0,l._)("span",{class:"icon-cross white"},null,-1),ft=[mt],pt={class:"date-searcher d-flex align-center ml-lg-4"},yt=(0,l._)("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date To",-1),gt=["value"],Dt=(0,l._)("span",{class:"icon-popup white","x-small":""},null,-1),vt=[Dt],wt=(0,l._)("span",{class:"icon-calendar white","x-small":""},null,-1),bt=[wt],St=(0,l._)("span",{class:"icon-cross white","x-small":""},null,-1),kt=[St],Ct=(0,l._)("span",{class:"mr-1 icon-printer","x-small":""},null,-1),At=(0,l._)("span",{class:"text-capitalize"},"Print",-1),xt=[Ct,At],Tt={style:{"margin-top":"10px"}},_t={class:"schedules-data-small",style:{overflow:"auto"}},Et={class:"",style:{width:"100%"}},Mt={class:"weekInfoDisplay py-2"},Ft={class:"schedules-data-small-head"},Nt={class:"dayScheduleDisplay"},Pt={key:0},Ot={key:0},Ht={key:1},Yt={key:2},It={id:"workSchedules",class:"dbw-box schedules-data-medium section",style:{overflow:"auto"}},Lt={class:"my-schedules aff-table"},Rt={key:0},jt=(0,l._)("th",null,"Week",-1),Wt=(0,l._)("th",null,"Sun",-1),Bt=(0,l._)("th",null,"Mon",-1),Vt=(0,l._)("th",null,"Tue",-1),Zt=(0,l._)("th",null,"Wed",-1),$t=(0,l._)("th",null,"Thu",-1),zt=(0,l._)("th",null,"Fri",-1),Ut=(0,l._)("th",null,"Sat",-1),Kt=[jt,Wt,Bt,Vt,Zt,$t,zt,Ut],Gt={key:1},qt=(0,l._)("th",null,"Week",-1),Qt=(0,l._)("th",null,"Mon",-1),Jt=(0,l._)("th",null,"Tue",-1),Xt=(0,l._)("th",null,"Wed",-1),ea=(0,l._)("th",null,"Thu",-1),ta=(0,l._)("th",null,"Fri",-1),aa=(0,l._)("th",null,"Sat",-1),na=(0,l._)("th",null,"Sun",-1),ia=[qt,Qt,Jt,Xt,ea,ta,aa,na],la={class:"myschedules-tr"},sa={class:"weekInfoRows"},oa={class:"myschedules-td"},ra={key:0},ca={class:"bold-text"},ua={key:0},da={key:1};function ha(e,t){var a=(0,l.up)("date-picker"),n=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",it,[(0,l._)("div",lt,[(0,l._)("div",st,[ot,(0,l._)("input",{value:e.$filters.reformatDate(e.fromDate),class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.fromDate,"fromDate")}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")}),"onClick:clear":t[2]||(t[2]=function(t){return e.fromDate=null})},null,40,rt),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"light-blue icon small ml-2 lh-0",onClick:t[3]||(t[3]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")})},ut)),[[n,{content:"Open calendar"},void 0,{top:!0}]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"green small icon ml-1 lh-0",onClick:t[4]||(t[4]=function(t){return e.selectDateTodayForFromDate()})},ht)),[[n,{content:"Set to today"},void 0,{top:!0}]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"orange small ml-1 icon lh-0",onClick:t[5]||(t[5]=function(t){return e.fromDate=null})},ft)),[[n,{content:"Clear"},void 0,{top:!0}]])]),(0,l._)("div",pt,[yt,(0,l._)("input",{type:"text",value:e.$filters.reformatDate(e.toDate),outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[6]||(t[6]=function(t){return e.updateDateText(t,e.toDate,"toDate")}),onClick:t[7]||(t[7]=function(t){return e.updateDateTime(t,e.toDate,"toDate")}),"onClick:clear":t[8]||(t[8]=function(t){return e.toDate=null})},null,40,gt),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"light-blue small icon ml-2 lh-0",tile:"",onClick:t[9]||(t[9]=function(t){return e.updateDateTime(t,e.toDate,"toDate")})},vt)),[[n,{content:"Open calendar"},void 0,{top:!0}]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"green small ml-1 icon lh-0",tile:"",onClick:t[10]||(t[10]=function(t){return e.selectDateTodayForToDate()})},bt)),[[n,{content:"Set to today"},void 0,{top:!0}]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{class:"orange small ml-1 icon lh-0",tile:"",onClick:t[11]||(t[11]=function(t){return e.toDate=null})},kt)),[[n,{content:"Clear"},void 0,{top:!0}]])]),(0,l._)("button",{class:"light-blue white--text ml-lg-4 ml-sm-4 mt-sm-0 small",onClick:t[12]||(t[12]=function(t){return e.printWorkSchedule()})},xt)]),(0,l._)("div",Tt,[(0,l._)("div",_t,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.schedules,(function(t){return(0,l.wg)(),(0,l.iD)("div",Et,[(0,l._)("div",Mt,[(0,l._)("div",Ft,[(0,l._)("div",null,[(0,l._)("h3",null,(0,c.zw)(t.weekName),1)]),(0,l._)("div",null,(0,c.zw)(t.weekDateRange),1)])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.detailArr,(function(a,n){return(0,l.wg)(),(0,l.iD)("div",Nt,[(0,l._)("div",null,(0,c.zw)(t.weekName)+" - "+(0,c.zw)(e.getWeekDayByIndex(n)),1),e.displayScheduleDetail(a)?((0,l.wg)(),(0,l.iD)("div",Pt,[(0,l._)("div",null,(0,c.zw)(a.shiftDescription),1),a.startTime?((0,l.wg)(),(0,l.iD)("div",Ot,"Start Time:"+(0,c.zw)(a.startTime),1)):(0,l.kq)("",!0),a.finishTime?((0,l.wg)(),(0,l.iD)("div",Ht,"Finish Time:"+(0,c.zw)(a.finishTime),1)):(0,l.kq)("",!0),a.hours?((0,l.wg)(),(0,l.iD)("div",Yt,"Hours:"+(0,c.zw)(a.hours),1)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])})),256))])})),256))]),(0,l._)("div",It,[(0,l._)("div",Lt,[(0,l._)("table",null,[(0,l._)("thead",null,[e.sundayFirst?((0,l.wg)(),(0,l.iD)("tr",Rt,Kt)):((0,l.wg)(),(0,l.iD)("tr",Gt,ia))]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.schedules,(function(t){return(0,l.wg)(),(0,l.iD)("tr",la,[(0,l._)("td",sa,[(0,l._)("div",null,(0,c.zw)(t.weekName),1),(0,l._)("div",null,(0,c.zw)(t.weekDateRange),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.detailArr,(function(t){return(0,l.wg)(),(0,l.iD)("td",oa,[e.displayScheduleDetail(t)?((0,l.wg)(),(0,l.iD)("div",ra,[(0,l._)("div",null,(0,c.zw)(t.date),1),(0,l._)("div",ca,(0,c.zw)(t.shiftDescription),1),t.hours?((0,l.wg)(),(0,l.iD)("div",ua,"Hours:"+(0,c.zw)(t.hours),1)):(0,l.kq)("",!0),t.startTime?((0,l.wg)(),(0,l.iD)("div",da,(0,c.zw)(t.startTime)+" - "+(0,c.zw)(t.finishTime),1)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])})),256))])})),256))])])])])]),(0,l.Wm)(a,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,"max-date":e.datePickerMax,"min-date":e.datePickerMin,date:e.datePickerTargetDay},null,8,["top","leftInput","max-date","min-date","date"])])}a(3948);function ma(){YD.emit("dialog",{message:"here is a test dialog",showButtons:!0,showCancel:!0,okColor:"orange"})}function fa(e){YD.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){e.onOk()},onCancel:function(){e.onCancel&&e.onCancel()}})}function pa(e){return new Promise((function(t,a){YD.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){t("ok")},onCancel:function(){a("cancel")}})}))}function ya(e){YD.emit("dialog",{dialog:!0,message:e,showLoader:!1,showButtons:!0,onOk:function(){},onCancel:function(){}})}function ga(e){YD.emit("dialog",{dialog:!0,message:e||"Loading",showCancel:!1,showButtons:!1,showLoader:!0})}function Da(){YD.emit("clearDialog")}var va={testDialog:ma,loading:ga,clear:Da,checkChange:fa,alert:ya,confirmOrCancel:pa},wa={class:"v3-calendar"},ba={class:"dp-heading"},Sa={class:"db-content"},ka={class:"dp-week-of-day"},Ca={class:"dp-week-days"},Aa={class:"date-wrapper"},xa=["onClick"];function Ta(e,t){var a=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(a,{ref:"ModalRef",top:e.top,left:e.calculateLeft(e.left),customPosition:!(!e.top&&!e.left),onCancel:e.cancelPickDate},{body:(0,l.w5)((function(){return[(0,l._)("div",wa,[(0,l._)("section",ba,[(0,l._)("span",{class:"cursor-pointer icon-arrow-left px-4",onClick:t[0]||(t[0]=function(){return e.previousMonth&&e.previousMonth.apply(e,arguments)})}),(0,l._)("div",null,(0,c.zw)(e.selectedDate.format("YYYY MMM")),1),(0,l._)("span",{class:"cursor-pointer icon-arrow-right px-4",onClick:t[1]||(t[1]=function(){return e.nextMonth&&e.nextMonth.apply(e,arguments)})})]),(0,l._)("section",Sa,[(0,l._)("div",ka,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weekOfDays,(function(e){return(0,l.wg)(),(0,l.iD)("span",null,(0,c.zw)(e.shortName),1)})),256))]),(0,l._)("div",Ca,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calendarArr,(function(t){return(0,l.wg)(),(0,l.iD)("span",Aa,[(0,l._)("span",{class:(0,c.C_)(["date-number-cell",{"today-target":e.colorToday(t),"not-valid":!t.isValid,"last-month-day":t.lastMonth,"next-month-day":t.nextMonth,selected:t.selected}]),onClick:function(a){return e.selectDate(t)}},(0,c.zw)(t.dateNumber),11,xa)])})),256))])])])]})),_:1},8,["top","left","customPosition","onCancel"])}var _a=a(2262),Ea=(0,l.aZ)({name:"DatePicker",components:{Modal:Me},props:{top:{type:Number},leftInput:{type:Number},date:{type:Object},maxDate:{type:Object},minDate:{type:Object}},data:function(){return{left:0,currentYear:2021,datePickerPromise:null,resolve:null,reject:null,selectedDate:$e()(),weekOfDays:[{fullName:"Sunday",shortName:"Sun",dayNumber:0},{fullName:"Monday",shortName:"Mon",dayNumber:1},{fullName:"Tuesday",shortName:"Tue",dayNumber:2},{fullName:"Wednesday",shortName:"Wed",dayNumber:3},{fullName:"Thursday",shortName:"Thu",dayNumber:4},{fullName:"Friday",shortName:"Fri",dayNumber:5},{fullName:"Saturday",shortName:"Sat",dayNumber:6}]}},setup:function(){var e=(0,_a.iH)([]),t=(0,_a.iH)();return t.value=$e()().month(),{currentMonth:t,calendarArr:e}},mounted:function(){var e=this;this.calculateMonth(),this.datePickerPromise=new Promise((function(t,a){e.resolve=t,e.reject=a}))},watch:{maxDate:function(){this.selectedDate?this.calculateBaseOnInput(this.selectedDate):this.calculateBaseOnInput()},minDate:function(){this.selectedDate?this.calculateBaseOnInput(this.selectedDate):this.calculateBaseOnInput()}},methods:{cancelPickDate:function(){this.reject()},calculateLeft:function(){return this.leftInput?(window.innerWidth<this.leftInput+370?this.left=window.innerWidth-400:this.left=this.leftInput,this.left):0},nextMonth:function(){this.currentMonth=this.currentMonth+1,this.calculateMonth()},previousMonth:function(){this.currentMonth=this.currentMonth-1,this.calculateMonth()},colorToday:function(e){var t=$e()();return t.year()===e.year&&t.month()+1===e.month&&t.date()===e.dateNumber},selectDateOnly:function(e){var t,a=(0,n.Z)(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.year===e.year()&&i.month===e.month()+1&&i.dateNumber===e.date()?i.selected=!0:i.selected=!1}}catch(l){a.e(l)}finally{a.f()}},selectDate:function(e){this.selectedDate=this.selectedDate.date(e.dateNumber);var t,a=(0,n.Z)(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.selected=!1}}catch(l){a.e(l)}finally{a.f()}e.selected=!0,this.$refs.ModalRef.toggleShow(),this.resolve(this.selectedDate.clone())},calculateMonth:function(e){e||(e=$e()(),this.currentYear&&e.year(this.currentYear));var t=e.clone().month(this.currentMonth),a=t.startOf("month").day(),n=t.clone().endOf("month").day();t.startOf("day");var i=[],l=t.clone().date(0).date(),s=l-(a-1);for(s;s<=l;s++)i.push({year:t.clone().date(0).year(),month:t.clone().date(0).month()+1,dateNumber:s,selected:!1,lastMonth:!0});var o=1,r=t.clone().endOf("month").date();for(o;o<=r;o++)i.push({year:t.year(),month:t.month()+1,isValid:this.validDateRange(this.maxDate,this.minDate,t.clone().startOf("month").date(o)),dateNumber:o,selected:!1});var c=1,u=7-n-1;for(c;c<=u;c++)i.push({year:t.clone().add(1,"month").year(),month:t.clone().add(1,"month").month()+1,dateNumber:c,selected:!1,nextMonth:!0});this.calendarArr=i,t.clone().endOf("month").date()<=this.selectedDate.date()?this.selectedDate=t.clone().endOf("month").startOf("day"):this.selectedDate=t.date(this.selectedDate.date())},validDateRange:function(e,t,a){return e&&t?a.diff(e,"day")<0&&a.diff(t,"day")>0:e?a.diff(e,"day")<0:!t||a.diff(t,"day")>0},calculateBaseOnInput:function(e){e?(this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year(),this.selectDateOnly(e)):(e=$e()(),this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year())},toggleShow:function(e){var t=this;return e?this.calculateBaseOnInput(e):this.calculateBaseOnInput(),this.$refs.ModalRef.toggleShow(),this.datePickerPromise=new Promise((function(e,a){t.resolve=e,t.reject=a})),this.waitPickDate()},waitPickDate:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.datePickerPromise);case 1:case"end":return t.stop()}}),t)})))()}}});const Ma=(0,ue.Z)(Ea,[["render",Ta],["__scopeId","data-v-a7a83844"]]);var Fa,Na=Ma;(function(e){e["fromDate"]="fromDate",e["toDate"]="toDate"})(Fa||(Fa={}));var Pa=(0,l.aZ)({name:"mySchedules",components:{DatePicker:Na},inject:{manageCompanyConfig:"MANAGE_COMPANY_CONFIG"},data:function(){return{title:"Work Schedule",schedules:[],user:null,datePickerFormat:"dd/MM/yyyy",sundayFirst:!1,menu1:!1,menu2:!1,fromDate:null,toDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:$e()(),selectedDateType:Fa.fromDate,datePickerMax:null,datePickerMin:null}},mounted:function(){this.sundayFirst=!!this.manageCompanyConfig.getAllowSundayFirst();var e=this.convertDateRange($e()(),$e()()),t=(0,je.Z)(e,2);this.fromDate=t[0],this.toDate=t[1],this.loadSchedules(this.fromDate,this.toDate)},methods:{updateDateText:function(e,t,a){"toDate"===a?this.toDate=$e()(e.target.value,"DD/MM/YYYY"):this.fromDate=$e()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.selectedDateType=a,"toDate"===a?(this.fromDate&&(this.datePickerMin=this.fromDate,this.datePickerMax=null),this.datePickerTargetDay=this.toDate?this.toDate:$e()()):(this.toDate&&(this.datePickerMin=null,this.datePickerMax=this.toDate),this.datePickerTargetDay=this.fromDate?this.fromDate:$e()()),this.dateModal=!0,this.openDatePicker()},printWorkSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("workSchedules").innerHTML,a=window.open("","Print",e);a.document.write("<html>"),a.document.write("<head>"),a.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),a.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),a.document.write("</head>"),a.document.write("<body>"),a.document.write(t),a.document.write("</body></html>"),a.document.close(),a.focus(),a.print(),a.close()},loadSchedules:function(e,t){var a=this;if(null!==e&&e.startOf("day"),null!==t&&""!==t&&t.startOf("day"),this.schedules=[],null!==t||null!==e){null!==t&&null===e&&(e=t),null===t&&null!==e&&(t=e);var i=this.convertDateRange(this.fromDate,this.toDate),l=(0,je.Z)(i,2),s=l[0],o=l[1],r={employeeNo:null,fromDate:null,toDate:null};if(null!==s&&null!==o){var c=s.format("DD/MM/YYYY"),u=o.format("DD/MM/YYYY");r={employeeNo:window.Affinity.user.EmployeeNo,fromDate:c,toDate:u}}va.loading(),re.EmployeeWorkSchedule(r).then((function(e){var t,i=e,l=(0,n.Z)(i.entries());try{for(l.s();!(t=l.n()).done;){var s=(0,je.Z)(t.value,2),o=s[0],r=s[1];a.sundayFirst?r.weekDateRange="".concat(r.sundayScheduleDetail.date," - ").concat(r.saturdayScheduleDetail.date):r.weekDateRange="".concat(r.mondayScheduleDetail.date," - ").concat(r.sundayScheduleDetail.date),r.weekName="Week ".concat(o+1),a.manageCompanyConfig.getAllowSundayFirst()?(r.detailArr=[],r.detailArr.push(r.sundayScheduleDetail),r.detailArr.push(r.mondayScheduleDetail),r.detailArr.push(r.tuesdayScheduleDetail),r.detailArr.push(r.wednesdayScheduleDetail),r.detailArr.push(r.thursdayScheduleDetail),r.detailArr.push(r.fridayScheduleDetail),r.detailArr.push(r.saturdayScheduleDetail)):(r.detailArr=[],r.detailArr.push(r.mondayScheduleDetail),r.detailArr.push(r.tuesdayScheduleDetail),r.detailArr.push(r.wednesdayScheduleDetail),r.detailArr.push(r.thursdayScheduleDetail),r.detailArr.push(r.fridayScheduleDetail),r.detailArr.push(r.saturdayScheduleDetail),r.detailArr.push(r.sundayScheduleDetail));var c,u=(0,n.Z)(r.detailArr);try{for(u.s();!(c=u.n()).done;){var d=c.value;a.clearZeroHour(d)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){l.e(h)}finally{l.f()}a.schedules=i,va.clear()}),(function(e){console.log("err",e),va.clear()})).finally((function(){va.clear()}))}},clearZeroHour:function(e){e&&(("12:00 am"===e.finishTime&&"12:00 am"===e.startTime||"12:00 AM"===e.finishTime&&"12:00 AM"===e.startTime)&&(e.finishTime="",e.startTime=""),"0"===e.hours&&(e.hours="",e.shiftDescription=""))},convertDateRange:function(e,t){var a=e.clone(),n=t.clone();return this.manageCompanyConfig.getAllowSundayFirst()?(e.day()>a.startOf("week").day()&&(a=a.startOf("week")),t.day()<n.endOf("week").day()&&(n=n.endOf("week"))):(e.day()>1?a=a.subtract(e.day()-1,"day"):0===e.day()&&(a=a.subtract(6,"day")),t.day()>0&&(n=n.add(7-t.day(),"day"))),[a,n]},displayScheduleDetail:function(e){return 0!==e.hours&&null!==e.hours&&""!==e.hours},selectDateTodayForFromDate:function(){this.fromDate=$e()().startOf("day"),this.toDate=null,this.loadSchedules(this.fromDate,this.toDate)},selectDateTodayForToDate:function(){this.toDate=$e()(),this.toDate.hour(11),this.toDate.minute(59),this.toDate<this.fromDate&&(this.fromDate=null),this.loadSchedules(this.fromDate,this.toDate)},getWeekDayByIndex:function(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[e]},openDatePicker:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return a=t.sent,e.selectedDateType===Fa.toDate?e.toDate=a:e.selectedDateType===Fa.fromDate&&(e.fromDate=a),e.loadSchedules(e.fromDate,e.toDate),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()}}});const Oa=(0,ue.Z)(Pa,[["render",ha]]);var Ha=Oa,Ya=function(e){return(0,l.dD)("data-v-36fda793"),e=e(),(0,l.Cn)(),e},Ia={class:"vue-sched-management"},La={class:"dbw-box sched-card-default mr-xs-0"},Ra=Ya((function(){return(0,l._)("div",null,[(0,l._)("h3",{class:"mt-2"},"Schedules")],-1)})),ja={key:0,class:"dbw-box sched-card-default sched-detail-card sche-detail-mt"},Wa={key:0},Ba=Ya((function(){return(0,l._)("h3",null,"Create New Schedule",-1)})),Va=[Ba],Za={key:1,class:"d-flex justify-space-between"},$a=Ya((function(){return(0,l._)("h3",null,"Schedule Details",-1)})),za={key:3,class:"sched-man-allocations mt-4"},Ua=Ya((function(){return(0,l._)("div",{class:"caption font-weight-bold text-start"},"Employee Allocations",-1)})),Ka={class:"aff-table allowcated-employee-table mt-4"},Ga=Ya((function(){return(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Employee Name"),(0,l._)("th",{class:"text-center"},"Date From"),(0,l._)("th",{class:"text-center"},"Date To")])],-1)})),qa={class:"text-center"},Qa={class:"text-center"},Ja={class:"d-flex justify-end mt-2"};function Xa(e,t){var a=(0,l.up)("search-schedule"),n=(0,l.up)("schedule-detail");return(0,l.wg)(),(0,l.iD)("div",Ia,[(0,l.wy)((0,l._)("div",La,[Ra,(0,l.Wm)(a,{ref:"searchScheduleRef",onCreateNewSchedule:e.createNewSchedule,onSelectSchedFromSearch:e.selectSchedulesDetail},null,8,["onCreateNewSchedule","onSelectSchedFromSearch"])],512),[[i.F8,!e.createNew]]),e.schedDetail?((0,l.wg)(),(0,l.iD)("div",ja,[e.createNew?((0,l.wg)(),(0,l.iD)("div",Wa,Va)):((0,l.wg)(),(0,l.iD)("div",Za,[$a,(0,l._)("span",{class:"icon-cross vp-icon",onClick:t[0]||(t[0]=function(t){return e.closeScheduleDetail(!0)})})])),e.schedDetail?((0,l.wg)(),(0,l.j4)(n,{key:2,ref:"detail",shiftTypeList:e.shiftTypeList,detail:e.schedDetail,"read-only":0,onCancel:e.cancelScheduleDetail,onReload:e.reloadSchedulesDetail,onScheduleSaved:e.scheduleSaved,onScheduleDeleted:e.scheduleDeleted},null,8,["shiftTypeList","detail","onCancel","onReload","onScheduleSaved","onScheduleDeleted"])):(0,l.kq)("",!0),e.schedDetail&&e.schedDetail.EmpAllocations&&e.schedDetail.EmpAllocations.length>0?((0,l.wg)(),(0,l.iD)("div",za,[Ua,(0,l._)("div",Ka,[(0,l._)("table",null,[Ga,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.schedDetail.EmpAllocations,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{class:(0,c.C_)({"hide-none-active-detail":!t.isActive&&e.showActiveSchedule})},[(0,l._)("td",null,(0,c.zw)(t.EmployeeName),1),(0,l._)("td",qa,(0,c.zw)(e.$filters.reformatDateString(t.DateFrom,null)),1),(0,l._)("td",Qa,(0,c.zw)(e.$filters.reformatDateString(t.DateTo,null)),1)],2)})),256))])])]),(0,l._)("div",Ja,[(0,l._)("button",{class:"grey white--text text-capitalize small",onClick:t[1]||(t[1]=function(){return e.toggleShowActiveSchedule&&e.toggleShowActiveSchedule.apply(e,arguments)})},[(0,l.wy)((0,l._)("span",null,"Show Active",512),[[i.F8,!e.showActiveSchedule]]),(0,l.wy)((0,l._)("span",null,"Show All",512),[[i.F8,e.showActiveSchedule]])])])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])}a(8783);var en=function(e){return(0,l.dD)("data-v-6a3aec42"),e=e(),(0,l.Cn)(),e},tn={class:"default-form sched-detail-form mt-4"},an={key:0,class:"caption d-flex"},nn={class:"d-flex align-center"},ln=en((function(){return(0,l._)("label",{for:"personal",class:"ml-2 cursor-pointer"},"Create Personal Schedule",-1)})),sn={class:"d-flex align-center ml-6"},on=en((function(){return(0,l._)("label",{for:"team",class:"ml-2 cursor-pointer"},"Create Team Schedule",-1)})),rn={class:"caption d-flex justify-space-between mt-4"},cn={class:"full-width d-flex align-center"},un=en((function(){return(0,l._)("div",{class:"form-label"},"Name",-1)})),dn={key:1},hn={key:2,class:"label-detail"},mn={key:0,class:"red--text"},fn={key:1,class:"caption mt-4"},pn=en((function(){return(0,l._)("div",{class:"form-label"},[(0,l._)("span",null,"Employee No")],-1)})),yn={key:0,class:"employeeNo-autoComplete"},gn={key:1,class:"label-detail"},Dn={class:"caption d-flex mt-4"},vn=en((function(){return(0,l._)("div",{class:"form-label"},"Description",-1)})),wn={class:"caption mt-4"},bn=en((function(){return(0,l._)("div",{class:"form-label"},"Effective Date",-1)})),Sn={class:"inline-block"},kn=["value"],Cn=en((function(){return(0,l._)("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),An={class:"caption mt-4 ml-4 d-inline number-of-weeks"},xn=en((function(){return(0,l._)("div",{class:"d-inline mr-4 bold-text"},"Number of Weeks",-1)})),Tn=en((function(){return(0,l._)("label",{for:"now"},null,-1)})),_n={class:"mobile-arrow"},En=en((function(){return(0,l._)("span",{class:"icon-arrowhead-up arrow-icon"},null,-1)})),Mn=[En],Fn=en((function(){return(0,l._)("span",{class:"mt-1 icon-arrowhead-down arrow-icon"},null,-1)})),Nn=[Fn],Pn={class:"section-table ui-gridbox-scrollable-titles mt-4"},On={class:"aff-table sched-detail-table"},Hn=(0,l.uE)('<div class="head-cell" data-v-6a3aec42>Week</div><div class="head-cell" data-v-6a3aec42>Day</div><div class="head-cell" data-v-6a3aec42>Hours</div><div class="head-cell" data-v-6a3aec42>Start</div><div class="head-cell" data-v-6a3aec42>Finish</div><div class="head-cell break-column-width" data-v-6a3aec42> Unpaid Break </div>',6),Yn={class:"head-cell"},In={class:"aff-table-body"},Ln={class:"aff-table-body-cell"},Rn={class:"table-date-counter aff-table-body-cell"},jn={class:"mr-2"},Wn={class:"aff-table-body-cell"},Bn=["onUpdate:modelValue","error","onChange","data-test"],Vn={class:"aff-table-body-cell"},Zn=["value","onChange"],$n={class:"aff-table-body-cell"},zn=["value","onChange"],Un={class:"unpaid-break hide-arrow aff-table-body-cell"},Kn=["onUpdate:modelValue","onChange"],Gn=en((function(){return(0,l._)("span",null,":",-1)})),qn=["onUpdate:modelValue","onChange"],Qn={key:0,class:"shift-select-td aff-table-body-cell"},Jn={class:"schedules-buttons form-row d-flex flex-wrap justify-end mt-2"},Xn={key:0},ei={key:1},ti=["disabled"],ai=en((function(){return(0,l._)("span",{class:"icon-trash mr-1"},null,-1)})),ni=en((function(){return(0,l._)("span",null,"Delete",-1)})),ii=[ai,ni],li=["disabled"],si=en((function(){return(0,l._)("span",{class:"icon-briefcase mr-1"},null,-1)})),oi=en((function(){return(0,l._)("span",null,"Archive",-1)})),ri=[si,oi],ci=["disabled"],ui=en((function(){return(0,l._)("span",{class:"icon-cancel mr-1"},null,-1)})),di=en((function(){return(0,l._)("span",null,"Cancel",-1)})),hi=[ui,di],mi=["disabled"],fi=en((function(){return(0,l._)("span",{class:"icon-save mr-1"},null,-1)})),pi=en((function(){return(0,l._)("span",null,"Save",-1)})),yi=[fi,pi];function gi(e,t){var a=(0,l.up)("auto-complete"),n=(0,l.up)("custom-select"),s=(0,l.up)("date-picker"),o=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",tn,[(0,l._)("form",{onChange:t[22]||(t[22]=function(){return e.formUpdated&&e.formUpdated.apply(e,arguments)}),onSubmit:t[23]||(t[23]=(0,i.iM)((function(t){return e.formSubmited(t)}),["prevent"]))},[e.isNewSchedule&&e.$CompanyConfig.isAllowPersonal?((0,l.wg)(),(0,l.iD)("div",an,[(0,l._)("div",nn,[(0,l.wy)((0,l._)("input",{type:"radio",id:"personal",value:"personal",class:"cursor-pointer","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.createType=t})},null,512),[[i.G2,e.createType]]),ln]),(0,l._)("div",sn,[(0,l.wy)((0,l._)("input",{type:"radio",id:"team",value:"team",class:"cursor-pointer","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.createType=t})},null,512),[[i.G2,e.createType]]),on])])):(0,l.kq)("",!0),(0,l._)("div",rn,[(0,l._)("div",cn,[un,e.isNewSchedule&&"team"===e.createType?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,class:"caption underline-input full-width",name:"name",onKeyup:t[2]||(t[2]=function(t){return e.hasChanges=!0}),counter:"49","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.detail.Name=t})},null,544)),[[i.nr,e.detail.Name]]):e.isNewSchedule&&"personal"===e.createType&&e.detail.EmployeeNo?((0,l.wg)(),(0,l.iD)("div",dn,(0,c.zw)("Personal_"+e.detail.EmployeeNo),1)):(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",hn,[(0,l.Uk)((0,c.zw)(e.detail.Name),1)])),[[o,{content:e.detail.Name,delay:{show:3e3,hide:100}},void 0,{top:!0}]])]),e.detail.Archive?((0,l.wg)(),(0,l.iD)("div",mn,"Archived")):(0,l.kq)("",!0)]),"personal"===e.createType&&e.$CompanyConfig.isAllowPersonal?((0,l.wg)(),(0,l.iD)("div",fn,[pn,e.isNewSchedule&&e.employees&&e.employees.length>0?((0,l.wg)(),(0,l.iD)("span",yn,[(0,l.Wm)(a,{inputList:e.employees,optionName:"joinedName",onSelected:e.selectedEmployee},null,8,["inputList","onSelected"])])):(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",gn,[(0,l.Uk)((0,c.zw)(e.detail.EmployeeNo),1)])),[[o,{content:e.detail.EmployeeNo,delay:{show:3e3,hide:100}},void 0,{top:!0}]])])):(0,l.kq)("",!0),(0,l._)("div",Dn,[vn,(0,l.wy)((0,l._)("textarea",{class:"caption description-area",rows:"2",onKeyup:t[4]||(t[4]=function(t){return e.hasChanges=!0}),"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.detail.Description=t})},"\r\n                ",544),[[i.nr,e.detail.Description]])]),(0,l._)("div",wn,[bn,(0,l._)("div",Sn,[(0,l._)("input",{class:"date-input",value:e.$filters.reformatDate(e.detail.StartDate),onClick:t[6]||(t[6]=function(){return e.openDatePicker&&e.openDatePicker.apply(e,arguments)})},null,8,kn),Cn]),(0,l._)("div",An,[xn,Tn,(0,l.wy)((0,l._)("input",{class:"number-input",max:"12",min:"1",step:"1",id:"now",name:"now",type:"number","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.detail.NoOfWeeks=t}),onChange:t[8]||(t[8]=function(){return e.updateNoOfWeeks&&e.updateNoOfWeeks.apply(e,arguments)}),onKeydown:t[9]||(t[9]=function(){return e.numLimitKeyDown&&e.numLimitKeyDown.apply(e,arguments)}),style:{width:"60px"}},null,544),[[i.nr,e.detail.NoOfWeeks]]),(0,l._)("div",_n,[e.detail.NoOfWeeks<12?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"icon",onClick:t[10]||(t[10]=function(){return e.increaseNumber&&e.increaseNumber.apply(e,arguments)})},Mn)):(0,l.kq)("",!0),e.detail.NoOfWeeks>1?((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"ml-2 icon",onClick:t[11]||(t[11]=function(){return e.reduceNumber&&e.reduceNumber.apply(e,arguments)})},Nn)):(0,l.kq)("",!0)])])]),(0,l._)("div",Pn,[(0,l._)("div",On,[(0,l._)("div",{class:(0,c.C_)(["sched-detail-days",{"shift-min-width":e.showMore}])},[(0,l._)("div",{class:(0,c.C_)(["aff-table-head",{"show-shift-column":e.showMore}])},[Hn,(0,l.wy)((0,l._)("div",Yn,"Shift",512),[[i.F8,e.showMore]])],2),(0,l._)("div",In,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.detail.Days,(function(a){return(0,l.wg)(),(0,l.iD)("div",{key:a.DayNumber,class:(0,c.C_)(["aff-table-body-row",{"show-shift-column":e.showMore}])},[(0,l._)("div",Ln,[(0,l.wy)((0,l._)("span",null,(0,c.zw)(a.Week),513),[[i.F8,e.isFirstDayOfWeek(a.DayOfWeek)]])]),(0,l._)("div",Rn,[(0,l._)("span",jn,(0,c.zw)(a.DayNumber+1),1),(0,l._)("span",null,(0,c.zw)(e.getDayOfWeek(a.DayOfWeek)),1)]),(0,l._)("div",Wn,[(0,l.wy)((0,l._)("input",{type:"number",step:"any",min:"0",max:"24","onUpdate:modelValue":function(e){return a.Hours=e},class:"caption sched-detail-table-input",name:"Sche Hour",autocomplete:"off","data-lpignore":"true",error:a.error,onKeydown:t[12]||(t[12]=function(t){return e.numLimitKeyDown(t,!0,!1)}),onChange:function(t){return e.checkHour(a)},"data-test":a.Hours},null,40,Bn),[[i.nr,a.Hours,void 0,{number:!0}]])]),(0,l._)("div",Vn,[(0,l._)("input",{value:e.$filters.reformatTime(a.StartTime),autocomplete:"off","data-lpignore":"true",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"StartTime")},onKeydown:t[13]||(t[13]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[14]||(t[14]=function(t){return e.fromDate=null})},null,40,Zn)]),(0,l._)("div",$n,[(0,l._)("input",{value:e.$filters.reformatTime(a.FinishTime),autocomplete:"off","data-lpignore":"true",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"FinishTime")},onKeydown:t[15]||(t[15]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[16]||(t[16]=function(t){return e.fromDate=null})},null,40,zn)]),(0,l._)("div",Un,[(0,l.wy)((0,l._)("input",{class:"sched-detail-table-input",type:"number",max:"100","onUpdate:modelValue":function(e){return a.breakH=e},onChange:function(t){return e.calcBreakHour(a)}},null,40,Kn),[[i.nr,a.breakH,void 0,{lazy:!0}]]),Gn,(0,l.wy)((0,l._)("input",{class:"sched-detail-table-input","onUpdate:modelValue":function(e){return a.breakM=e},onChange:function(t){return e.calcBreakHour(a)}},null,40,qn),[[i.nr,a.breakM,void 0,{lazy:!0}]])]),e.showMore?((0,l.wg)(),(0,l.iD)("div",Qn,[(0,l.Wm)(n,{class:"caption",options:e.shifts,selected:a.ShiftId,onSelectOption:function(t){return e.selectedShift(t,a)}},null,8,["options","selected","onSelectOption"])])):(0,l.kq)("",!0)],2)})),128))])],2)])]),(0,l._)("div",Jn,[(0,l._)("button",{type:"button",class:"white--text grey caption text-capitalize mr-2 mt-2 small",onClick:t[17]||(t[17]=function(){return e.toggleShift&&e.toggleShift.apply(e,arguments)})},[e.showMore?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",Xn,"Show Shift")),e.showMore?((0,l.wg)(),(0,l.iD)("span",ei,"Hide Shift")):(0,l.kq)("",!0)]),!e.isNewSchedule&&e.detail.EmpAllocations&&0===e.detail.EmpAllocations.length?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[18]||(t[18]=function(t){return e.deleteSchedule()})},ii,8,ti)):(0,l.kq)("",!0),e.detail.Archive||e.isNewSchedule||"team"!==e.createType?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[19]||(t[19]=function(t){return e.archiveSchedule()})},ri,8,li)),(0,l._)("button",{type:"button",class:"white--text grey text-capitalize mr-2 mt-2 small",disabled:!e.hasChanges&&!e.isNewSchedule,onClick:t[20]||(t[20]=function(t){return e.cancelChanges()})},hi,8,ci),(0,l._)("button",{type:"button",class:"white--text text-capitalize mr-1 mt-2 green small",disabled:!e.hasChanges,onClick:t[21]||(t[21]=function(t){return e.updateDetail()})},yi,8,mi)])],32),(0,l.Wm)(s,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.detail.StartDate},null,8,["top","leftInput","date"])])}var Di,vi,wi,bi;a(7327),a(561);(function(e){e["getEmployees"]="GET_EMPLOYEES",e["getFilteredEmployees"]="GET_FILTERED_EMPLOYEES"})(vi||(vi={})),function(e){e["setEmployees"]="SET_EMPLOYEES"}(wi||(wi={})),function(e){e["getEmployees"]="GET_EMPLOYEES"}(bi||(bi={}));var Si=(Di={},(0,Re.Z)(Di,vi.getEmployees,(function(e){return e.employees})),(0,Re.Z)(Di,vi.getFilteredEmployees,(function(e){return e.filteredEmployees})),Di),ki=(0,Re.Z)({},wi.setEmployees,(function(e,t){e.employees=t,e.filteredEmployees=t.slice()})),Ci=(0,Re.Z)({},bi.getEmployees,(function(e,t){var a=e.commit,n=e.state;return n.employees.length>0?n.employees:re.GetManagedEmployees(t).then((function(e){var t=e.map((function(e){return e.employeeName=e.CommonName,Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));return a(wi.setEmployees,t),t}))})),Ai={state:{employees:[],employeesWithPeronsalSche:[],filteredEmployees:[]},getters:Si,mutations:ki,actions:Ci},xi=Ai,Ti=(a(8309),{class:"custom-select",tabindex:"1",ref:"selectRef"}),_i={class:"custom-select-selected"},Ei={class:"custom-select-items"},Mi=["tabindex","onClick"],Fi={class:"cell-config"};function Ni(e,t){return(0,l.wg)(),(0,l.iD)("div",Ti,[(0,l._)("div",_i,[(0,l.wy)((0,l._)("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectSearchInput=t}),onKeyup:t[1]||(t[1]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[i.nr,e.selectSearchInput]])]),(0,l._)("div",Ei,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dropDownList,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:(0,c.C_)(["custom-select-item",{targeting:t.targeting}]),ref_for:!0,ref:"selectDropdownRef",key:a,tabindex:a+99,onClick:function(a){return e.chooseOption(a,t)}},[(0,l._)("div",Fi,(0,c.zw)(t.name),1)],10,Mi)})),128))])],512)}var Pi=(0,l.aZ)({name:"AutoComplete",props:{inputList:{type:Array},optionName:{type:String}},data:function(){return{editing:!1,targetingIndex:null}},setup:function(e){e.optionName||console.error("need object, optionName is missing");var t=(0,_a.iH)(e.inputList.map((function(t,a){return{targeting:!1,name:t[e.optionName],index:a}}))),a=(0,_a.iH)(t.value.slice()),n=(0,_a.iH)("");return{originList:t,dropDownList:a,selectSearchInput:n}},methods:{updateSearchList:function(e){var t=this;"ArrowDown"!==e.key?"ArrowUp"!==e.key?"Enter"===e.key&&this.targetingIndex?this.selectFromTarget():this.dropDownList=this.originList.filter((function(e){return e.targeting=!1,e.name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1})):this.moveTargetUp():this.moveTargetDown()},moveTargetDown:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex+1<this.dropDownList.length?(this.targetingIndex++,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex,this.dropDownList.length,this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},moveTargetUp:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex-1>=0?(this.targetingIndex--,this.dropDownList[this.targetingIndex].targeting=!0):this.targetingIndex-1<0?(this.targetingIndex=this.dropDownList.length-1,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},selectFromTarget:function(){this.selectSearchInput=this.dropDownList[this.targetingIndex].name,this.$emit("selected",this.inputList[this.targetingIndex])},chooseOption:function(e,t){this.selectSearchInput=t.name,this.$emit("selected",this.inputList[t.index]),e.target.blur()}}});const Oi=(0,ue.Z)(Pi,[["render",Ni],["__scopeId","data-v-50746a31"]]);var Hi=Oi,Yi=a(3336),Ii=function(e){return(0,l.dD)("data-v-240db88e"),e=e(),(0,l.Cn)(),e},Li={class:"custom-select",tabindex:"1",ref:"selectRef"},Ri={key:0,class:"custom-select-selected"},ji={key:0},Wi={key:1},Bi={key:2,class:"custom-select-empty-selected"},Vi={key:1,class:"custom-select-selected"},Zi={key:0},$i={key:1},zi={key:2,class:"custom-select-empty-selected"},Ui=["onClick"],Ki={class:"cell-config"},Gi={key:0},qi={key:1},Qi=Ii((function(){return(0,l._)("label",null,null,-1)}));function Ji(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("span",null,[(0,l._)("div",Li,[e.modelValue?((0,l.wg)(),(0,l.iD)("div",Ri,[e.modelValue&&"object"===(0,Yi.Z)(e.modelValue)&&e.displayKey?((0,l.wg)(),(0,l.iD)("span",ji,(0,c.zw)(e.modelValue[e.displayKey]),1)):e.modelValue?((0,l.wg)(),(0,l.iD)("span",Wi,(0,c.zw)(e.modelValue),1)):((0,l.wg)(),(0,l.iD)("span",Bi))])):((0,l.wg)(),(0,l.iD)("div",Vi,[e.selected&&"object"===(0,Yi.Z)(e.selected)?((0,l.wg)(),(0,l.iD)("span",Zi,(0,c.zw)(e.selected[e.displayKey]),1)):e.selected?((0,l.wg)(),(0,l.iD)("span",$i,(0,c.zw)(e.selected),1)):((0,l.wg)(),(0,l.iD)("span",zi))])),(0,l._)("div",{class:"custom-select-items",style:(0,c.j5)({left:e.left+"px",top:e.getTop()+"px"})},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",key:a,onClick:function(a){e.selectOption(a,t)}},[(0,l._)("div",Ki,[e.displayKey?((0,l.wg)(),(0,l.iD)("label",Gi,(0,c.zw)(t[e.displayKey]),1)):((0,l.wg)(),(0,l.iD)("label",qi,(0,c.zw)(t),1)),Qi])],8,Ui)})),128))],4)],512)])])}var Xi=(0,l.aZ)({name:"CustomSelect",props:{options:{type:Array,default:[]},displayKey:{type:String,default:""},modelValue:{type:[String,Number]},selected:{}},data:function(){return{left:0,top:0}},mounted:function(){var e=this.$refs.selectRef.getClientRects()[0];this.left=e.left,this.top=e.top+e.height},methods:{getTop:function(){if(!this.$refs.selectRef)return 0;var e=this.$refs.selectRef.getClientRects()[0];return e.top+e.height},selectOption:function(e,t){e.target.blur();var a=this.$refs.selectRef;a.blur(),this.modelValue?this.$emit("update:modelValue",t):this.$emit("selectOption",t)}}});const el=(0,ue.Z)(Xi,[["render",Ji],["__scopeId","data-v-240db88e"]]);var tl=el,al=(0,l.aZ)({name:"schedule-detail",components:{AutoComplete:Hi,DatePicker:Na,CustomSelect:tl},props:["detail","shiftTypeList","readOnly"],data:function(){return{createType:"team",employees:[],week:1,tablePadding:"0 0;",hasChanges:!1,isDateToCleared:!1,shifts:[],showMore:!0,initialEmpSched:null,startDateMenu:!1,dateModalTop:0,dateModalLeft:0,timePickerTargetDay:null,selectedTimeType:"Start"}},computed:{isNewSchedule:function(){var e=this.detail;return e.Id<=0}},mounted:function(){var e=this;this.shifts=this.shiftTypeList,this.hasChanges=-1==this.detail.Id,this.$emit("dataChanged",this.hasChanges);var t=this.$store.getters[vi.getEmployees];t=t.filter((function(t){return!e.$store.state.EmployeeModule.employeesWithPeronsalSche.includes(t.employeeNo)})),this.employees=t.map((function(e){return e.joinedName=e.commonName+" "+e.employeeNo,e})),this.remapDays(),console.log("schedule type",this.detail.ScheduleType),this.createType=0===this.detail.ScheduleType||void 0===this.detail.ScheduleType?"team":"personal"},watch:(0,Re.Z)({},"detail",(function(e,t){this.remapDays(),this.createType=0===this.detail.ScheduleType||void 0===this.detail.ScheduleType?"team":"personal",e!=t&&-1==e.Id&&(this.detail.Days=[],this.createNewDays(1,1))})),methods:{selectedShift:function(e,t){t.ShiftId=e,this.hasChanges=!0},formSubmited:function(e){return e.preventDefault(),e.stopPropagation(),!1},increaseNumber:function(){this.detail.NoOfWeeks++,this.updateNoOfWeeks()},reduceNumber:function(){this.detail.NoOfWeeks--,this.updateNoOfWeeks()},toggleShift:function(){this.showMore=!this.showMore},remapDays:function(){for(var e=0,t=$e()(this.detail.StartDate),a=7*this.detail.NoOfWeeks,n=new Array(a),i=0;i<a;i++)i%7==0&&e++,n[i]={DayNumber:i,DayOfWeek:t.day(),Week:e,Date:$e()(t),Hours:0,StartTime:null,FinishTime:null,ShiftId:null,BreakHours:null},t.add(1,"day");this.showMore=!1,this.detail.Days.map((function(e){e.StartTime&&(n[e.DayNumber].StartTime=$e()(e.StartTime)),e.FinishTime&&(n[e.DayNumber].FinishTime=$e()(e.FinishTime)),n[e.DayNumber].Hours=e.Hours,n[e.DayNumber].ShiftId=e.ShiftId,n[e.DayNumber].BreakHours=e.BreakHours;var t=e.BreakHours,a=Math.floor(t),i=t-a;0!==a&&(n[e.DayNumber].breakH=a),i>0&&(n[e.DayNumber].breakM=Math.round(60*i))})),this.detail.Days=n,this.detail.StartDate=$e()(this.detail.StartDate),this.hasChanges=!1},timeTextChanged:function(e,t,a){var n;if(n=e.target.value.includes(":")?$e()(e.target.value,"HH:mm"):$e()(e.target.value,"Hmm"),"FinishTime"===a){if(!n.isValid())return e.target.value="InValid Time",void(t.FinishTime=null);if(t.FinishTime&&n.hour()===t.FinishTime.hour()&&n.minute()===t.FinishTime.minute())return;if(""===e)return void(t.FinishTime=null);t.FinishTime=n}else{if(t.StartTime&&n.hour()===t.StartTime.hour()&&n.minute()===t.StartTime.minute())return;if(!n.isValid())return e.target.value="InValid Time",void(t.StartTime=null);if(""===e)return void(t.StartTime=null);t.StartTime=n}this.timePickerTargetDay=t,this.autoCalcTime(a),this.hasChanges=!0},autoCalcTime:function(e){var t=this.timePickerTargetDay;if(console.log("calc time"),!t.FinishTime||"00:00"===t.FinishTime.format("HH:mm")||!t.StartTime||"00:00"===t.StartTime.format("HH:mm")||t.Hours&&0!==t.Hours)if(!t.FinishTime||!t.Hours||t.StartTime&&"00:00"!==t.StartTime.format("HH:mm"))if(!t.StartTime||!t.Hours||t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")){if(t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")&&t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")&&(t.Hours||0!==t.Hours)){var a=t.BreakHours?t.Hours+t.BreakHours:t.Hours;"StartTime"===e?t.FinishTime=t.StartTime.clone().add(a,"hours"):"FinishTime"===e&&(t.StartTime=t.FinishTime.clone().subtract(a,"hours"))}}else{var n=t.BreakHours?t.Hours+t.BreakHours:t.Hours;t.FinishTime=t.StartTime.clone().add(n,"hours")}else{var i=t.BreakHours?t.Hours+t.BreakHours:t.Hours;t.StartTime=t.FinishTime.clone().subtract(i,"hours")}else{t.FinishTime.year(t.StartTime.year()),t.FinishTime.month(t.StartTime.month()),t.FinishTime.day(t.StartTime.day());var l=t.FinishTime.startOf("minute").diff(t.StartTime.startOf("minute"),"hours",!0);t.BreakHours&&(l-=t.BreakHours),t.Hours=Math.round(100*l)/100}},updateDateText:function(e,t){this.startDateMenu=!1,t.set($e()(e,"DD/MM/YYYY").toObject()),this.remapDays()},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=$e()(e)),this.detail.StartDate=e,this.remapDays()},isFirstDayOfWeek:function(e){var t=$e()(this.detail.StartDate);return e==t.day()},calcBreakHour:function(e){e.breakH&&e.breakM?e.BreakHours=Number(e.breakH)+Math.round(Number(e.breakM)/60*1e3)/1e3:e.breakH?e.BreakHours=Number(e.breakH):e.breakM?e.BreakHours=Math.round(Number(e.breakM)/60*1e3)/1e3:(0===e.breakHours&&e.breakM,e.BreakHours=0),e.StartTime&&"00:00"!==e.StartTime.format("HH:mm")&&e.FinishTime&&"00:00"!==e.FinishTime.format("HH:mm")&&(e.Hours=e.FinishTime.startOf("minute").diff(e.StartTime.startOf("minute"),"hours",!0)-e.BreakHours)},getDayOfWeek:function(e){if(e<0||e>6)return console.error("day No not correct"),"unknown";var t=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];return t[e]},checkHour:function(e){if(this.hasChanges=!0,e.Hours>24)return va.alert("You can only enter up to 24 hours."),void(e.Hours=24);var t=e.BreakHours?e.Hours+e.BreakHours:e.Hours;e.StartTime&&e.Hours&&e.FinishTime||e.StartTime&&e.Hours?e.FinishTime=e.StartTime.clone().add(t,"hours"):e.Hours&&e.FinishTime&&(e.StartTime=e.FinishTime.clone().add(t,"hours"))},updateNoOfWeeks:function(e){var t=this.detail.Days.length,a=Math.floor(t/7);if(this.detail.NoOfWeeks>a)this.createNewDays(a+1,this.detail.NoOfWeeks);else{var n=7*this.detail.NoOfWeeks;this.detail.Days.splice(n)}},numLimitKeyDown:function(e,t,a){var n=[8,9,13,46,16,17];n.push(65,67,86,88),t&&n.push(190,110),a&&n.push(186),e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||n.indexOf(e.keyCode)>-1||(e.preventDefault(),e.stopPropagation())},cancelChanges:function(){var e=this;if(this.hasChanges){var t="You haven't saved your changes.  <br /> Are you sure you want to cancel?";va.checkChange({message:t,confirmButtonText:"Yes",cancelButtonText:"No",onOk:function(){e.hasChanges=!1,e.$emit("cancel")}})}else this.$emit("cancel")},reloadDetail:function(){this.hasChanges&&this.$emit("reload")},createNewDays:function(e,t){if(!(e>t)){var a=e,n=this.detail.Days.length;while(a<=t){var i=$e()(this.detail.StartDate);i.add(n,"day"),this.detail.Days.push({DayNumber:n,DayOfWeek:i.day(),Week:a,Date:i,Hours:0,StartTime:null,FinishTime:null,ShiftId:null,startDateModal:!1,endDateModal:!1}),n++,a=Math.floor(n/7)+1}}},archiveSchedule:function(){var e=this;this.hasChanges||(this.detail.Archive?va.alert("Unable to archive schedule, it's already archived."):va.confirmOrCancel({message:"Are you sure you want to archive this work schedule?"}).then((function(){e.detail.Archive=!0,e.doUpdateDetail()})))},deleteSchedule:function(){var e=this;this.hasChanges||(this.detail.EmpAllocations.length>0?va.alert("Unable to delete schedule, it's currently allocated to employees"):YD.emit("dialog",{message:"Are you sure you want to permanently delete this work schedule?",showButtons:!0,showCancel:!0,okColor:"red",onOk:function(){e.doDeleteSchedule()},onCancel:function(){}}))},doDeleteSchedule:function(){var e=this;va.loading(),re.DeleteSchedule(this.detail.Id).then((function(t){e.$emit("schedule-deleted"),va.clear()}))},updateDetail:function(){this.hasChanges&&this.doUpdateValidation()&&this.doUpdateDetail()},doUpdateValidation:function(){if("team"===this.createType){if(!this.detail.Name&&!this.detail.Description||""===this.detail.Name&&""===this.detail.Description)return va.alert("Schedule name cannot be blank. <br /> Schedule description cannot be blank."),!1;if(!this.detail.Name||""===this.detail.Name)return va.alert("Schedule name cannot be blank."),!1}return this.detail.Description&&""!==this.detail.Description?void 0!==this.detail.Name&&null!==this.detail.Name&&this.detail.Name.length>50?(va.alert("Schedule names must be 50 characters or fewer (including spaces)."),!1):!(void 0!==this.detail.Description&&null!==this.detail.Description&&this.detail.Description.length>50)||(va.alert("Schedule descriptions must be 50 characters or fewer (including spaces)."),!1):(va.alert("Schedule description cannot be blank."),!1)},doUpdateDetail:function(){var e=this,t={Id:this.detail.Id,NoOfWeeks:this.detail.NoOfWeeks,StartDate:$e()(this.detail.StartDate).format("DD/MMM/YYYY"),Name:"team"===this.createType?this.detail.Name:"Personal_ "+this.detail.EmployeeNo,EmployeeNo:this.detail.EmployeeNo?this.detail.EmployeeNo:null,ScheduleType:this.detail.EmployeeNo?1:0,IsPersonal:!!this.detail.EmployeeNo,Description:this.detail.Description,Archive:this.detail.Archive,Days:[]};this.detail.Days.map((function(e){(e.Hours>0||null!==e.ShiftId&&""!==e.ShiftId)&&(""===e.ShiftId&&(e.ShiftId=null),t.Days.push({DayNumber:e.DayNumber,StartTime:e.StartTime?e.StartTime.format("HH:mm"):null,FinishTime:e.FinishTime?e.FinishTime.format("HH:mm"):null,Hours:e.Hours>24?24:e.Hours,ShiftId:e.ShiftId,BreakHours:e.BreakHours?Number(e.BreakHours):null}))})),va.loading(),re.PostSchedule(t).then((function(t){e.$emit("schedule-saved",t.Data),void 0!==e&&void 0!==e.hasChanges&&(e.hasChanges=!1)})).finally((function(){va.clear()}))},formUpdated:function(){this.hasChanges=!0},openDatePicker:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.dateModalTop=n.bottom,t.dateModalLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.detail.StartDate);case 6:t.detail.StartDate=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.t0&&console.error(a.t0),a.abrupt("return");case 13:t.remapDays(),t.hasChanges=!0;case 15:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectedEmployee:function(e){this.detail.EmployeeNo=e.employeeNo,this.detail.Description="".concat(e.commonName," ").concat(e.employeeNo," Personal Schedule")}}});const nl=(0,ue.Z)(al,[["render",gi],["__scopeId","data-v-6a3aec42"]]);var il=nl,ll=function(e){return(0,l.dD)("data-v-6ec45e88"),e=e(),(0,l.Cn)(),e},sl={id:"sched-man-list ",class:"sched-man-list mt-4"},ol={class:"d-flex align-center flex-wrap"},rl={class:"filter-dropdown"},cl={class:"custom-select",tabindex:"1",ref:"selectRef"},ul={class:"custom-select-selected"},dl={class:"custom-select-items"},hl=["tabindex","onClick"],ml={class:"cell-config"},fl=ll((function(){return(0,l._)("span",{class:"icon-plus btn-icon white"},null,-1)})),pl=ll((function(){return(0,l._)("span",{class:"font-weight-regular text-capitalize white"}," Create",-1)})),yl=[fl,pl],gl={class:"d-flex justify-start mt-2"},Dl={class:"d-flex align-center"},vl=ll((function(){return(0,l._)("label",{class:"ml-1"},"My Employees Only",-1)})),wl={class:"d-flex align-center ml-2"},bl=ll((function(){return(0,l._)("label",{class:"ml-1"},"All Employees",-1)})),Sl={class:"aff-table sche-search-table mt-4"},kl={class:"ui-grid"},Cl={class:"table-head"},Al=(0,l.Uk)(" Name "),xl=(0,l.Uk)(" Description "),Tl=(0,l.Uk)(" Weeks "),_l=(0,l.Uk)(" H/W "),El=(0,l.Uk)(" Allocated "),Ml={class:"table-body-box"},Fl=["onClick"],Nl={class:"table-body-cell table-body-cell-first"},Pl={class:"table-body-cell"},Ol={class:"sched-search-desc"},Hl={class:"table-body-cell text-center"},Yl={class:"table-body-cell text-center"},Il={class:"table-body-cell text-center"};function Ll(e,t){var a=(0,l.Q2)("tooltip");return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",sl,[(0,l._)("div",null,[(0,l._)("div",ol,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filters.searchTerm=t}),type:"text",placeholder:"Search for schedules","hide-details":"",class:"sched-search-box body-2 underline-input"},null,512),[[i.nr,e.filters.searchTerm]]),(0,l._)("div",rl,[(0,l._)("div",cl,[(0,l._)("div",ul,(0,c.zw)(e.filters.selected),1),(0,l._)("div",dl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filters.options,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",key:a,tabindex:a+99,onClick:function(a){return e.choseFilter(a,t)}},[(0,l._)("div",ml,(0,c.zw)(t),1)],8,hl)})),128))])],512)]),(0,l._)("button",{class:"blue ml-2 small",onClick:t[1]||(t[1]=function(t){return e.createNewSchedule()})},yl)]),(0,l._)("div",gl,[(0,l._)("div",Dl,[(0,l.wy)((0,l._)("input",{class:"ma-0",type:"radio",id:"myEmployee",value:"MyEmployee","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.myEmployeeToggle=t}),onChange:t[3]||(t[3]=function(){return e.getSchedulesList&&e.getSchedulesList.apply(e,arguments)})},null,544),[[i.G2,e.myEmployeeToggle]]),vl]),(0,l._)("div",wl,[(0,l.wy)((0,l._)("input",{class:"my-0",type:"radio",id:"allEmployee",value:"AllEmployee","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.myEmployeeToggle=t}),onChange:t[5]||(t[5]=function(){return e.getSchedulesList&&e.getSchedulesList.apply(e,arguments)})},null,544),[[i.G2,e.myEmployeeToggle]]),bl])])]),(0,l._)("div",Sl,[(0,l._)("div",kl,[(0,l._)("div",Cl,[(0,l._)("div",{class:"table-head-cell table-head-cell-first",onClick:t[6]||(t[6]=function(t){return e.updateSort(0)})},[Al,(0,l._)("span",{class:(0,c.C_)({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[0],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[0]})},null,2)]),(0,l._)("div",{class:"table-head-cell",onClick:t[7]||(t[7]=function(t){return e.updateSort(1)})},[xl,(0,l._)("span",{class:(0,c.C_)({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[1],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[1]})},null,2)]),(0,l._)("div",{class:"table-head-cell text-center",onClick:t[8]||(t[8]=function(t){return e.updateSort(2)})},[Tl,(0,l._)("span",{class:(0,c.C_)({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[2],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[2]})},null,2)]),(0,l._)("div",{class:"table-head-cell text-center",onClick:t[9]||(t[9]=function(t){return e.updateSort(3)})},[_l,(0,l._)("span",{class:(0,c.C_)({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[3],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[3]})},null,2)]),(0,l._)("div",{class:"table-head-cell text-center",onClick:t[10]||(t[10]=function(t){return e.updateSort(4)})},[El,(0,l._)("span",{class:(0,c.C_)({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[4],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[4]})},null,2)])]),(0,l._)("div",Ml,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.schedList,(function(t){return(0,l.wg)(),(0,l.iD)("div",{onClick:function(a){return e.selectSchedulesDetail(t)},class:(0,c.C_)([t.classObject,"table-body"])},[(0,l._)("div",Nl,[(0,l._)("div",null,(0,c.zw)(t.Name),1)]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",Pl,[(0,l._)("div",Ol,(0,c.zw)(t.Description),1)])),[[a,{content:t.Description,delay:{show:3e3,hide:100}},void 0,{right:!0}]]),(0,l._)("div",Hl,[(0,l._)("div",null,(0,c.zw)(t.NoOfWeeks),1)]),(0,l._)("div",Yl,[(0,l._)("div",null,(0,c.zw)(t.HoursPerWeek),1)]),(0,l._)("div",Il,[(0,l._)("div",null,(0,c.zw)(t.Count),1)])],10,Fl)})),256))])])])],512)),[[i.F8,!e.createNew]])}var Rl;a(2707),a(3210),a(4916),a(5306);(function(e){e["myEmployee"]="MyEmployee",e["allEmployee"]="AllEmployee"})(Rl||(Rl={}));var jl=(0,l.aZ)({name:"SearchSchedule",inject:{manageCompanyConfig:"MANAGE_COMPANY_CONFIG"},data:function(){return{selectedSched:null,schedList:[],shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showFilters:!0,myEmployeeToggle:Rl.myEmployee,filters:{searchTerm:"",sort:"Name",sortOptions:["Name","Description","NoOfWeeks","HoursPerWeek","Count"],orderBy:"Asc",orderByArrow:["Asc","Asc","Asc","Asc","Asc"],partTimeSche:!1,fullTimeSche:!0,activeSche:!0,inActiveSche:!1,archivedSche:!1,options:[],selected:"Show Active",all:!1},searchTermFocus:!1}},mounted:function(){this.showFilters=!0,this.getSchedulesList(),this.manageCompanyConfig.getAllowPersonal()?this.filters.options=["Show All","Show Active","Show Inactive","Show Archived","Show Personal"]:this.filters.options=["Show All","Show Active","Show Inactive","Show Archived"],this.$watch("filters",this.refreshFilters,{deep:!0})},methods:{choseFilter:function(e,t){e.target.blur(),this.filters.selected=t;e.target.blur();var a=this.$refs.selectRef;a.blur()},createNewSchedule:function(){this.$emit("createNewSchedule")},selectSchedulesDetail:function(e){this.schedList.map((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedSched=e,this.$emit("selectSchedFromSearch",this.selectedSched)},deselectScheDetail:function(){this.schedList.forEach((function(e){e.classObject.selected=!1})),this.selectedSched=null},toggleFilters:function(){this.showFilters=!this.showFilters},refreshFilters:function(){var e=this,t=this;this.schedList.sort((function(e,a){var n,i,l=1;return"Desc"===t.filters.orderBy&&(l=-1),"string"===typeof e[t.filters.sort]?(n=e[t.filters.sort].toLowerCase(),i=a[t.filters.sort].toLowerCase()):(n=e[t.filters.sort],i=a[t.filters.sort]),n<i?-1*l:n>i?1*l:0}));var a=this.filters.searchTerm.toLowerCase().trim();this.schedList.forEach((function(n){n.classObject.selected=!!t.selectedSched&&t.selectedSched.Id==n.Id,n.classObject.visible=!0,e.filters.all?n.classObject.visible=!0:(n.classObject.visible=e.getDropDownFilterResult(n),n.classObject.visible&&0!=a.length&&(n.classObject.visible=(-1!==n.Name.toLowerCase().indexOf(a)||-1!==n.Description.toLowerCase().indexOf(a))&&n.classObject.visible)),n.classObject.hidden=!n.classObject.visible}))},getDropDownFilterResult:function(e){switch(this.filters.selected){case"Show All":return!0;case"Show Active":return!0===e.isActive&&!1===e.Archive&&0===e.ScheduleType;case"Show Inactive":return!1===e.isActive&&!1===e.Archive&&0===e.ScheduleType;case"Show Archived":return!0===e.Archive&&0===e.ScheduleType;case"Show Personal":return 1===e.ScheduleType}},getSchedulesList:function(){var e=this;va.loading(),re.StandardSchedules(this.myEmployeeToggle===Rl.allEmployee).then((function(t){var a=[],n=[],i=t.Data;e.manageCompanyConfig.getAllowPersonal()||(i=t.Data.filter((function(e){return 0===e.ScheduleType}))),i.map((function(t){if(t.Name.includes("Personal")){var i=t.Name.replace(/^\D+/g,"");n.push(Number(i))}t.classObject={selected:!1,visible:!0,hidden:!1},e.selectedSched&&e.selectedSched.Id===t.Id&&(e.selectedSched=t,t.classObject.selected=!0),a.push(t.NoOfWeeks)})),a.unshift("All"),e.schedList=i,e.$store.state.EmployeeModule.employeesWithPeronsalSche=n,e.refreshFilters(),va.clear()}))},updateSort:function(e){this.filters.orderBy=this.filters.orderByArrow[e]="Asc"===this.filters.orderByArrow[e]?"Desc":"Asc",this.filters.sort=this.filters.sortOptions[e],this.filters.orderByArrow.forEach((function(t,a){a!==e&&"Asc"}))}}});const Wl=(0,ue.Z)(jl,[["render",Ll],["__scopeId","data-v-6ec45e88"]]);var Bl=Wl,Vl=(0,l.aZ)({name:"schedulesManagement",components:{SearchSchedule:Bl,"schedule-detail":il},data:function(){return{selectedSched:null,shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showActiveSchedule:!0,employees:[]}},mounted:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return va.loading(),t.next=3,Promise.all([e.getShiftTypeList(),e.getEmployees()]);case 3:va.clear();case 4:case"end":return t.stop()}}),t)})))()},methods:{getShiftTypeList:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.ShiftTypes();case 3:a=t.sent,e.shiftTypeList=a.map((function(e){return e.ShiftType})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEmployees:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(bi.getEmployees,Affinity.user.EmployeeNo);case 3:e.employees=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toggleShowActiveSchedule:function(){this.showActiveSchedule=!this.showActiveSchedule},selectSchedulesDetail:function(e){var t=this;this.$refs.detail&&this.$refs.detail.hasChanges?va.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.loadScheduleDetail(e)}}):this.loadScheduleDetail(e)},loadScheduleDetail:function(e){var t=this;va.loading(),re.ScheduleDetail(e.Id).then((function(a){t.schedDetail=a.Data,t.checkEmpAllocationActive(),va.clear(),t.selectedSched=e}),(function(e){va.clear(),"Network Error"===e.message?va.alert("Lost Internet connection. Please try again after reconnect."):va.alert("Something went wrong")}))},checkEmpAllocationActive:function(){this.schedDetail.EmpAllocations.forEach((function(e){if(e.DateTo){var t=$e()(e.DateFrom),a=$e()(e.DateTo);e.isActive=a.diff($e()(),"day")>=0&&t.diff($e()(),"day")<=0}else e.isActive=!0}))},createNewSchedule:function(){this.createNew=!0;var e=$e()();e.hour(0),e.minute(0),e.second(0),this.schedDetail={Id:-1,Name:"",Description:"",NoOfWeeks:1,StartDate:e,Days:[]},this.$refs.detail&&(this.$refs.detail.hasChanges=!0)},cancelScheduleDetail:function(){this.createNew&&(this.createNew=!1),this.schedDetail=null},reloadSchedulesDetail:function(){this.selectedSched?this.selectSchedulesDetail(this.selectedSched):this.schedDetail=null,this.createNew=!1},closeScheduleDetail:function(e){var t=this;if(!e||!this.$refs.detail.hasChanges)return this.schedDetail=null,this.createNew=!1,this.selectedSched=null,void this.$refs.searchScheduleRef.deselectScheDetail();va.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.closeScheduleDetail(!1)}})},scheduleSaved:function(e){this.selectedSched?(this.schedDetail=e,this.selectedSched={Id:e.Id}):this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList(),this.createNew=!1},scheduleDeleted:function(){this.selectedSched=null,this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList()}}});const Zl=(0,ue.Z)(Vl,[["render",Xa],["__scopeId","data-v-36fda793"]]);var $l=Zl,zl=function(e){return(0,l.dD)("data-v-1311266a"),e=e(),(0,l.Cn)(),e},Ul={class:"outter-h-scroll"},Kl={class:"fix-content-width"},Gl={key:0,class:"dbw-box emp-detail pa-4"},ql={class:"section"},Ql=zl((function(){return(0,l._)("div",{class:"d-flex justify-space-between"},[(0,l._)("h3",null,"Selected Employees")],-1)})),Jl={class:"emp-selection-list mt-4 caption"},Xl={class:"list-text"},es=["onClick"],ts=zl((function(){return(0,l._)("span",{class:"icon-calendar white lh-0"},null,-1)})),as=[ts],ns=["onClick"],is=zl((function(){return(0,l._)("span",{class:"icon-minus white lh-0"},null,-1)})),ls=[is],ss=["onClick"],os=zl((function(){return(0,l._)("span",{class:"icon-minus white lh-0"},null,-1)})),rs=[os],cs=["onClick"],us=zl((function(){return(0,l._)("span",{class:"icon-calendar white lh-0"},null,-1)})),ds=[us],hs={class:"schedules-buttons mt-2 d-flex justify-end"},ms=zl((function(){return(0,l._)("span",{class:"icon-cancel mr-2 vert-mid white lh-0"},null,-1)})),fs=zl((function(){return(0,l._)("span",{class:"text-capitalize white"},"Clear",-1)})),ps=[ms,fs],ys=zl((function(){return(0,l._)("span",{class:"icon-cancel vert-mid white lh-0"},null,-1)})),gs=zl((function(){return(0,l._)("span",{class:"text-capitalize white"},"Clear",-1)})),Ds=[ys,gs],vs={class:"section mt-4",style:{height:"100%"}},ws=zl((function(){return(0,l._)("h3",{class:"bold-text"},"Allocate Schedule",-1)})),bs={class:"mt-4 allocate-sche-form"},Ss={class:"custom-select",tabindex:"1",ref:"selectRef"},ks={class:"custom-select-selected"},Cs={class:"custom-select-items"},As=["tabindex","onClick"],xs={class:"cell-config"},Ts={key:0,class:"mt-4"},_s=zl((function(){return(0,l._)("div",{class:"bold-text"},"Description",-1)})),Es={class:"caption"},Ms={class:"bold-text mt-4"},Fs=(0,l.Uk)("No. of Weeks: "),Ns={class:"ml-4"},Ps={class:"d-flex justify-space-between"},Os={class:"mt-4 date-input-warpper"},Hs=zl((function(){return(0,l._)("div",{class:"bold-text"},"Date From",-1)})),Ys=["value"],Is=zl((function(){return(0,l._)("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),Ls={class:"mt-4 date-input-warpper"},Rs=zl((function(){return(0,l._)("div",{class:"bold-text"},"Date To",-1)})),js=["value"],Ws=zl((function(){return(0,l._)("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),Bs={class:"mt-4"},Vs=zl((function(){return(0,l._)("div",{class:"bold-text"},"Notes",-1)})),Zs={key:1,class:"form-row mt-4"},$s={class:"label-width"},zs={class:"schedules-buttons mt-4 d-flex justify-end"},Us=zl((function(){return(0,l._)("span",{class:"icon-cancel vert-mid lh-0 white--text mr-1"},null,-1)})),Ks=zl((function(){return(0,l._)("span",{class:"text-capitalize white--text"},"Cancel",-1)})),Gs=[Us,Ks],qs=zl((function(){return(0,l._)("span",{class:"icon-paperplane vert-mid lh-0 white--text mr-1"},null,-1)})),Qs=zl((function(){return(0,l._)("span",{class:"text-capitalize white--text"},"Allocate",-1)})),Js=[qs,Qs];function Xs(e,t){var a=(0,l.up)("search-employee"),n=(0,l.up)("employee-schedule"),s=(0,l.up)("date-picker"),o=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",Ul,[(0,l._)("div",Kl,[(0,l.Wm)(a,{class:"mr-4 mr-xs-0",ref:"SearchEmployeeRef",onUpdateSelectedEmpList:e.updateEmpList},null,8,["onUpdateSelectedEmpList"]),e.bulkEmpList.length>0?((0,l.wg)(),(0,l.iD)("div",Gl,[(0,l._)("div",ql,[Ql,(0,l._)("div",Jl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.bulkEmpList,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:(0,c.C_)(["d-flex justify-space-between align-center py-1 px-2",{"emp-select-item-odd":a%2}])},[(0,l._)("div",null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",Xl,[(0,l.Uk)((0,c.zw)(t.EmployeeName)+" ("+(0,c.zw)(t.EmployeeNo)+")",1)])),[[o,{content:"Remove from Employee Selection List"},void 0,{right:!0}]])]),(0,l._)("div",null,[e.isMobileView?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{key:0,class:"blue small icon",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},as,8,es)),[[o,{content:"View Schedule Allocations"},void 0,{right:!0}]]),e.isMobileView?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{key:1,class:"orange small icon",onClick:function(a){return e.removeEmployee(t)}},ls,8,ns)),[[o,{content:"Remove from Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"orange small icon",onClick:function(a){return e.removeEmployee(t)}},rs,8,ss)):(0,l.kq)("",!0),e.isMobileView?((0,l.wg)(),(0,l.iD)("button",{key:3,class:"blue ml-1 small icon",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},ds,8,cs)):(0,l.kq)("",!0)])],2)})),256))]),(0,l._)("div",hs,[e.isMobileView?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button grey small",onClick:t[0]||(t[0]=function(t){return e.clearSelectedEmployee()})},ps)),[[o,{content:"Clear Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"button grey small",onClick:t[1]||(t[1]=function(t){return e.clearSelectedEmployee()})},Ds)):(0,l.kq)("",!0)])]),(0,l._)("div",{onSubmit:t[16]||(t[16]=(0,i.iM)((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[(0,l._)("div",vs,[ws,(0,l._)("div",bs,[(0,l._)("form",null,[(0,l._)("div",Ss,[(0,l._)("div",ks,[(0,l.wy)((0,l._)("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectSearchInput=t}),onKeyup:t[3]||(t[3]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[i.nr,e.selectSearchInput]])]),(0,l._)("div",Cs,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cloneSchedList,(function(a,n){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",ref_for:!0,ref:"selectDropdownRef",key:n,tabindex:n+99,onKeyup:t[4]||(t[4]=(0,i.D2)((function(){return e.navDownList&&e.navDownList.apply(e,arguments)}),["down"])),onClick:function(t){return e.chooseSchedule(t,a)}},[(0,l._)("div",xs,(0,c.zw)(a.Name),1)],40,As)})),128))])],512),e.selectedSchedule&&e.selectedSchedule.Name?((0,l.wg)(),(0,l.iD)("div",Ts,[_s,(0,l._)("div",Es,(0,c.zw)(e.selectedSchedule.Description),1),(0,l._)("div",Ms,[Fs,(0,l._)("span",Ns,(0,c.zw)(e.selectedSchedule.NoOfWeeks),1)])])):(0,l.kq)("",!0),(0,l._)("div",Ps,[(0,l._)("div",Os,[Hs,(0,l._)("input",{value:e.$filters.reformatDate(e.schedAllocation.DateFrom),class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input",onChange:t[5]||(t[5]=function(t){return e.updateDateText(t,e.schedAllocation.DateFrom,"DateFrom")}),onClick:t[6]||(t[6]=function(t){return e.updateDateTime(t,e.schedAllocation.DateFrom,"DateFrom")}),"onClick:clear":t[7]||(t[7]=function(t){return e.fromDate=!1})},null,40,Ys),Is]),(0,l._)("div",Ls,[Rs,(0,l._)("input",{value:e.$filters.reformatDate(e.schedAllocation.DateTo),class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input",onChange:t[8]||(t[8]=function(t){return e.updateDateText(t,e.schedAllocation.DateTo,"DateTo")}),onClick:t[9]||(t[9]=function(t){return e.updateDateTime(t,e.schedAllocation.DateTo,"DateTo")}),"onClick:clear":t[10]||(t[10]=function(t){return e.toDateMenu=!1})},null,40,js),Ws])]),(0,l._)("div",Bs,[Vs,(0,l.wy)((0,l._)("textarea",{rows:"3",class:"caption",onKeyup:t[11]||(t[11]=function(t){return e.hasChanges=!0}),"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.schedAllocation.Comment=t})}," ",544),[[i.nr,e.schedAllocation.Comment]])]),e.schedAllocation.DateFrom?((0,l.wg)(),(0,l.iD)("div",Zs,[(0,l._)("label",$s,"End existing schedules on "+(0,c.zw)(e.capDate),1),(0,l.wy)((0,l._)("input",{type:"checkbox",value:"1","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.schedAllocation.EndExistingScheds=t})},null,512),[[i.e8,e.schedAllocation.EndExistingScheds]])])):(0,l.kq)("",!0),(0,l._)("div",zs,[(0,l._)("button",{class:"grey vert-mid small",onClick:t[14]||(t[14]=function(t){return e.closeSchedAllocation()})},Gs),(0,l._)("button",{class:"green ml-4 small",onClick:t[15]||(t[15]=function(t){return e.allocateEmployees()})},Js)])])])])],32)])):(0,l.kq)("",!0),e.selectedEmpForDetail?((0,l.wg)(),(0,l.j4)(n,{key:1,ref:"EmployeeScheduleRef",employee:e.selectedEmpForDetail,onClose:e.resetSelectedEmpForDetail},null,8,["employee","onClose"])):(0,l.kq)("",!0),(0,l.Wm)(s,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])])}a(4723);var eo=function(e){return(0,l.dD)("data-v-2ee341e0"),e=e(),(0,l.Cn)(),e},to={class:"dbw-box emp-workSched-card pa-4"},ao={class:"d-flex justify-space-between"},no={class:"d-flex justify-end align-center mt-4 caption"},io=eo((function(){return(0,l._)("label",{class:"default-line-height"},"Active Only",-1)})),lo={key:0,class:"section-table aff-table mt-2"},so=eo((function(){return(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Schedule Name"),(0,l._)("th",{class:"text-center"},"Date From"),(0,l._)("th",{class:"text-center"},"Date To")])],-1)})),oo=["onClick"],ro={class:"text-center"},co={class:"text-center"},uo={key:1};function ho(e,t){var a=(0,l.up)("emp-schedule-detail");return(0,l.wg)(),(0,l.iD)("div",to,[(0,l._)("div",ao,[(0,l._)("h3",null,(0,c.zw)(e.selectedEmp.EmployeeName)+" ("+(0,c.zw)(e.selectedEmp.EmployeeNo)+")",1),(0,l._)("span",{class:"icon-cross vp-icon",onClick:t[0]||(t[0]=function(t){return e.closeEmployeeSchedule(!0)})})]),(0,l._)("div",no,[(0,l.wy)((0,l._)("input",{class:"override-width mr-2",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeOnly=t}),onChange:t[2]||(t[2]=function(){return e.updateActiveOnly&&e.updateActiveOnly.apply(e,arguments)}),"true-value":1,"false-value":0},null,544),[[i.e8,e.activeOnly]]),io]),e.empSchedList.length>0?((0,l.wg)(),(0,l.iD)("div",lo,[(0,l._)("table",null,[so,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.empSchedList,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{class:(0,c.C_)(t.classObject),onClick:function(a){return e.selectEmpSchedCheck(t)}},[(0,l._)("td",null,(0,c.zw)(t.WorkSchedName),1),(0,l._)("td",ro,(0,c.zw)(e.$filters.reformatDate(t.DateFrom)),1),(0,l._)("td",co,(0,c.zw)(e.$filters.reformatDate(t.DateTo)),1)],10,oo)})),256))])])])):((0,l.wg)(),(0,l.iD)("div",uo," Work schedule empty.")),e.selectedEmpSched?((0,l.wg)(),(0,l.j4)(a,{key:2,ref:"empScheDetailRef",empSched:e.selectedEmpSched,onDeleted:e.deleteSelection,onUpdated:e.updatedEmpSchedule},null,8,["empSched","onDeleted","onUpdated"])):(0,l.kq)("",!0)])}var mo=function(e){return(0,l.dD)("data-v-1da02613"),e=e(),(0,l.Cn)(),e},fo={key:0,class:"section default-form sched-empSched-form mt-4"},po=mo((function(){return(0,l._)("h3",null,"Schedule Details",-1)})),yo={class:"caption mt-2"},go=mo((function(){return(0,l._)("div",{class:"form-label"},"Name",-1)})),Do={class:"label-empSched"},vo={class:"caption d-flex mt-4"},wo=mo((function(){return(0,l._)("div",{class:"form-label"},"Number of Weeks",-1)})),bo={class:"label-empSched"},So={class:"d-flex justify-space-between"},ko={class:"caption mt-4"},Co=mo((function(){return(0,l._)("div",{class:"date-label"},"Date From",-1)})),Ao=["value"],xo={class:"caption mt-4"},To=mo((function(){return(0,l._)("div",{class:"date-label"},"Date To",-1)})),_o=["value"],Eo={class:"caption mt-4"},Mo=mo((function(){return(0,l._)("div",{class:"date-label"},"Notes",-1)})),Fo={class:"section-table ui-gridbox-scrollable-titles mt-4"},No={class:"aff-table sched-empSched-table"},Po=(0,l.uE)('<div class="head-cell" data-v-1da02613>Week</div><div class="head-cell" data-v-1da02613>Day</div><div class="head-cell" data-v-1da02613>Hours</div><div class="head-cell" data-v-1da02613>Start</div><div class="head-cell" data-v-1da02613>Finish</div><div class="head-cell break-column-width" data-v-1da02613>Unpaid Break</div><div class="head-cell" data-v-1da02613>Shift</div>',7),Oo=[Po],Ho={class:"aff-table-body"},Yo={class:"aff-table-body-row"},Io={class:"aff-table-body-cell"},Lo={class:"aff-table-body-cell"},Ro={class:"mr-2 days-width"},jo={class:"aff-table-body-cell"},Wo={class:"aff-table-body-cell"},Bo={class:"aff-table-body-cell"},Vo={class:"aff-table-body-cell"},Zo={class:"aff-table-body-cell"},$o={class:"schedules-buttons form-row d-flex justify-end mt-4"},zo=mo((function(){return(0,l._)("span",{class:"icon-briefcase mr-1"},null,-1)})),Uo=mo((function(){return(0,l._)("span",null,"Remove",-1)})),Ko=[zo,Uo],Go=["disabled"],qo=mo((function(){return(0,l._)("span",{class:"icon-cancel mr-1"},null,-1)})),Qo=mo((function(){return(0,l._)("span",null,"Cancel",-1)})),Jo=[qo,Qo],Xo=["disabled"],er=mo((function(){return(0,l._)("span",{class:"icon-save mr-1"},null,-1)})),tr=mo((function(){return(0,l._)("span",null,"Update",-1)})),ar=[er,tr];function nr(e,t){var a=(0,l.up)("date-picker");return e.empSchedDetail&&e.empSchedDetail.Detail?((0,l.wg)(),(0,l.iD)("div",fo,[po,(0,l._)("form",{onSubmit:t[11]||(t[11]=(0,i.iM)((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[(0,l._)("div",yo,[go,(0,l._)("div",Do,(0,c.zw)(e.empSchedDetail.Detail.Name),1)]),(0,l._)("div",vo,[wo,(0,l._)("div",bo,(0,c.zw)(e.empSchedDetail.Detail.NoOfWeeks),1)]),(0,l._)("div",So,[(0,l._)("div",ko,[Co,(0,l._)("input",(0,l.dG)({value:e.$filters.reformatDate(e.empSchedDetail.DateFrom)},e.attrs,(0,l.mx)(e.on),{outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.empSchedDetail.DateFrom)}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateFrom,"DateFrom")}),"onClick:clear":t[2]||(t[2]=function(t){return e.fromDate=!1})}),null,16,Ao)]),(0,l._)("div",xo,[To,(0,l._)("input",(0,l.dG)({value:e.$filters.reformatDate(e.empSchedDetail.DateTo)},e.attrs,(0,l.mx)(e.on),{autocomplete:"off",outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[3]||(t[3]=function(t){return e.updateDateText(t,e.empSchedDetail.DateTo)}),onClick:t[4]||(t[4]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateTo,"DateTo")}),"onClick:clear":t[5]||(t[5]=function(t){return e.toDateMenu=!1})}),null,16,_o)])]),(0,l._)("div",Eo,[Mo,(0,l.wy)((0,l._)("textarea",{class:"caption schedule-textarea",onKeyup:t[6]||(t[6]=function(t){return e.hasChanges=!0}),"hide-details":"",rows:"2",outlined:"",dense:"","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.empSchedDetail.Comment=t})},"\r\n                ",544),[[i.nr,e.empSchedDetail.Comment]])]),(0,l._)("div",Fo,[(0,l._)("div",No,[(0,l._)("div",{class:(0,c.C_)(["sched-detail-days",{"shift-min-width":e.showMore}])},[(0,l._)("div",{class:(0,c.C_)(["aff-table-head",{"show-shift-column":e.showMore}])},Oo,2),(0,l._)("div",Ho,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.empSchedDetail.Detail.Days,(function(t){return(0,l.wg)(),(0,l.iD)("div",Yo,[(0,l._)("div",Io,[(0,l.wy)((0,l._)("span",null,(0,c.zw)(t.Week),513),[[i.F8,e.isFirstDayOfWeek(t.DayOfWeek)]])]),(0,l._)("div",Lo,[(0,l._)("span",Ro,(0,c.zw)(t.DayNumber+1),1),(0,l._)("span",null,(0,c.zw)(e.getDayOfWeek(t.DayOfWeek)),1)]),(0,l._)("div",jo,(0,c.zw)(t.Hours),1),(0,l._)("div",Wo,[(0,l._)("span",null,(0,c.zw)(e.$filters.reformatTime(t.StartTime)),1)]),(0,l._)("div",Bo,[(0,l._)("span",null,(0,c.zw)(e.$filters.reformatTime(t.FinishTime)),1)]),(0,l._)("div",Vo,[(0,l._)("span",null,(0,c.zw)(e.$filters.reformatBreakHours(t.BreakHours)),1)]),(0,l._)("div",Zo,[(0,l._)("span",null,(0,c.zw)(t.ShiftId),1)])])})),256))])],2)])]),(0,l._)("div",$o,[(0,l._)("button",{type:"button",class:"white--text small red text-capitalize mr-2",onClick:t[8]||(t[8]=function(t){return e.RemoveSchedule()})},Ko),(0,l._)("button",{type:"button",class:"white--text small grey text-capitalize mr-2",disabled:!e.hasChanges,onClick:t[9]||(t[9]=function(t){return e.cancelChanges()})},Jo,8,Go),(0,l._)("button",{type:"button",class:"white--text small green text-capitalize mr-1",disabled:!e.hasChanges,onClick:t[10]||(t[10]=function(t){return e.updateEmpSched()})},ar,8,Xo)])],32),(0,l.Wm)(a,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])):(0,l.kq)("",!0)}var ir=(0,l.aZ)({name:"emp-schedule-detail",props:["empSched"],components:{DatePicker:Na},data:function(){return{dateModalTop:null,dateModalLeft:null,datePickerTargetDay:null,dateType:"",empSchedDetail:null,hasChanges:!1,fromDateMenu:!1,toDateMenu:!1,fromDatePickerValue:"",toDatePickerValue:""}},computed:{},mounted:function(){this.$emit("dataChanged",this.hasChanges),this.getEmpSchedDetail()},watch:(0,Re.Z)({},"empSched",(function(e,t){e!=t&&(this.empSchedDetail=null,this.hasChanges=null,this.fromDateMenu=!1,this.toDateMenu=!1,this.getEmpSchedDetail())})),methods:{getEmpSchedDetail:function(){var e=this;va.loading(),re.EmpSchedDetailRequest(this.empSched.EmployeeNo+"/"+this.empSched.Id).then((function(t){if(e.empSchedDetail=t.Data,e.empSchedDetail.Detail){for(var a=0,n=$e()(e.empSchedDetail.Detail.StartDate),i=7*e.empSchedDetail.Detail.NoOfWeeks,l=new Array(i),s=0;s<i;s++)s%7==0&&a++,l[s]={DayNumber:s,DayOfWeek:n.day(),Week:a,Date:$e()(n),Hours:0,BreakHours:null,StartTime:null,FinishTime:null,ShiftId:null},n.add(1,"day");e.empSchedDetail.Detail.Days.map((function(e){e.StartTime&&(l[e.DayNumber].StartTime=$e()(e.StartTime)),e.FinishTime&&(l[e.DayNumber].FinishTime=$e()(e.FinishTime)),l[e.DayNumber].Hours=e.Hours,l[e.DayNumber].ShiftId=e.ShiftId,l[e.DayNumber].BreakHours=e.BreakHours})),e.empSchedDetail.Detail.Days=l,e.empSchedDetail.Detail.StartDate=$e()(e.empSchedDetail.Detail.StartDate),t.Data.DateFrom&&(e.empSchedDetail.DateFrom=$e()(t.Data.DateFrom,"YYYY-MM-DD")),t.Data.DateTo&&(e.empSchedDetail.DateTo=$e()(t.Data.DateTo,"YYYY-MM-DD")),e.datePickerFormattedFromDate(),e.datePickerFormattedToDate()}})).finally((function(){return va.clear()}))},submitForm:function(){return!1},updateDateText:function(e,t){this.toDateMenu=!1,t.set($e()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.fromDatePickerValue=this.empSchedDetail.DateFrom?$e()(this.empSchedDetail.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.empSchedDetail.DateTo?$e()(this.empSchedDetail.DateTo).format("YYYY-MM-DD"):void 0},fromDateDatePickerHandler:function(e){"string"===typeof e&&(e=$e()(e)),this.empSchedDetail.DateFrom=e,this.hasChanges=!0,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=$e()(e)),this.empSchedDetail.DateTo=e,this.hasChanges=!0,this.datePickerFormattedToDate()},isFirstDayOfWeek:function(e){var t=$e()(this.empSchedDetail.Detail.StartDate);return e==t.day()},getDayOfWeek:function(e){if(e<0||e>6)return"unknown";var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[e]},RemoveSchedule:function(){var e=this;va.checkChange({message:"Are you sure?",onOk:function(){va.loading(),re.RemoveEmployeeWorkSchedule(e.empSchedDetail.Id,e.empSched.EmployeeNo).then((function(t){e.$emit("deleted")})).finally((function(){return va.clear()}))}})},cancelChanges:function(){var e=this;if(this.hasChanges){var t="There is currently unsaved schedule changes <br /> Do you want to discard your changes?";YD.emit("dialog",{message:t,showButtons:!0,showCancel:!0,okColor:"orange",onOk:function(){e.getEmpSchedDetail(),e.hasChanges=!1},onCancel:function(){}})}else this.getEmpSchedDetail()},updateEmpSched:function(){var e=this,t=$e()(this.empSchedDetail.DateFrom),a=$e()(this.empSchedDetail.DateTo);if(t&&a&&t>a)va.alert("<br />Date From cannot be before Date To.");else{YD.emit("dialog",{message:"Updating Employee Schedule",showButtons:!1,showLoader:!0,noClose:!1}),va.loading();var n={Id:this.empSchedDetail.Id,DateFrom:t?t.format("DD/MMM/YYYY"):null,DateTo:a?a.format("DD/MMM/YYYY"):null,Comment:this.empSchedDetail.Comment};re.UpdateEmpSchedRequest(n,this.empSched.EmployeeNo).then((function(t){va.clear(),e.$emit("updated")})).catch((function(e){va.alert(e.message),console.error("err",e)}))}},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.empSchedDetail.DateTo=a:"DateFrom"===e.dateType&&(e.empSchedDetail.DateFrom=a),e.hasChanges=!0;case 5:case"end":return t.stop()}}),t)})))()}}});const lr=(0,ue.Z)(ir,[["render",nr],["__scopeId","data-v-1da02613"]]);var sr=lr,or=(0,l.aZ)({name:"employeeSchedule",components:{EmpScheduleDetail:sr},props:["employee"],data:function(){return{selectedEmp:null,empSchedList:[],activeOnly:!1,selectedEmpSched:null}},setup:function(e){var t=(0,_a.iH)(e.employee);return{selectedEmp:t}},mounted:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")},watch:{employee:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")}},methods:{selectEmpSchedCheck:function(e){var t=this;this.$refs.empScheDetailRef&&this.$refs.empScheDetailRef.hasChanges?va.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.selectEmpSched(e)}}):this.selectEmpSched(e)},selectEmpSched:function(e){this.empSchedList.forEach((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedEmpSched=e},getEmpWorkScheds:function(){var e=this;va.loading(),re.EmpWorkScheds(this.selectedEmp.EmployeeNo+(this.activeOnly?"?activeOnly=true":"?activeOnly=false")).then((function(t){t.Data.map((function(e,t){e.classObject={selected:!1,odd:t%2},e.DateFrom=new Date(Date.parse(e.DateFrom)),e.DateTo&&(e.DateTo=new Date(Date.parse(e.DateTo)))})),e.empSchedList=t.Data,va.clear()}))},updateActiveOnly:function(){this.getEmpWorkScheds()},closeEmployeeSchedule:function(e){var t=this;e&&this.$refs.empScheDetailRef&&(!this.$refs.empScheDetailRef||this.$refs.empScheDetailRef.hasChanges)?va.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.closeEmployeeSchedule(!1)}}):this.$emit("close")},deleteSelection:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()},updatedEmpSchedule:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()}}});const rr=(0,ue.Z)(or,[["render",ho],["__scopeId","data-v-2ee341e0"]]);var cr=rr,ur=function(e){return(0,l.dD)("data-v-1416d9be"),e=e(),(0,l.Cn)(),e},dr={class:"section shadow dbw-box sched-card-default pa-4"},hr=ur((function(){return(0,l._)("h3",{class:"mb-2"},"Select Employees",-1)})),mr={class:"aff-table mt-4"},fr={class:"ui-grid"},pr=["onClick"],yr={class:"name-text-width"},gr={class:"current-schedules-width"},Dr={class:"schedule-name"},vr={class:"schedule-name"},wr=["onClick"],br=ur((function(){return(0,l._)("span",{class:"icon-add-to-list"},null,-1)})),Sr=[br],kr=["onClick"],Cr=ur((function(){return(0,l._)("span",{class:"icon-add-to-list"},null,-1)})),Ar=[Cr],xr=["onClick"],Tr=ur((function(){return(0,l._)("span",{class:"icon-minus white--text small"},null,-1)})),_r=[Tr];function Er(e,t){var a=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",dr,[hr,(0,l.wy)((0,l._)("input",{class:"mt-2 caption text-field-input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchTerm=t}),"hide-details":"",dense:"",outlined:"",type:"text",placeholder:"Search for employees "},null,512),[[i.nr,e.searchTerm]]),(0,l._)("div",mr,[(0,l._)("table",fr,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.empList,(function(t){return(0,l.wg)(),(0,l.iD)("tr",{class:(0,c.C_)(t.classObject),onClick:function(a){return e.toggleEmployeeSelect(t)}},[(0,l._)("td",null,[(0,l._)("span",yr,(0,c.zw)(t.EmployeeName)+" ("+(0,c.zw)(t.EmployeeNo)+")",1),(0,l._)("span",gr,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.WorkschedNames,(function(e){return(0,l.wg)(),(0,l.iD)("div",Dr,(0,c.zw)(e),1)})),256)),(0,l._)("div",vr,(0,c.zw)(t.PersonalSchedule),1)])]),(0,l._)("td",null,[e.isMobileView||t.classObject.selected?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{key:0,class:"green white--text fsmall",onClick:(0,i.iM)((function(a){return e.addEmployee(t)}),["stop"])},Sr,8,wr)),[[a,{content:"Add to Employee Selection List"},void 0,{right:!0}]]),e.isMobileView&&!t.classObject.selected?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"green white--text fsmall",onClick:(0,i.iM)((function(a){return e.addEmployee(t)}),["stop"])},Ar,8,kr)):(0,l.kq)("",!0),t.classObject.selected?(0,l.wy)(((0,l.wg)(),(0,l.iD)("button",{key:2,class:"grey fsmall",onClick:(0,i.iM)((function(a){return e.removeEmployee(t)}),["stop"])},_r,8,xr)),[[a,{content:"Remove Employee From Selection List"},void 0,{right:!0}]]):(0,l.kq)("",!0)])],10,pr)})),256))])])])])}a(9714);var Mr=(0,l.aZ)({name:"SearchEmployee",data:function(){return{searchTerm:"",empList:[],selectedEmpList:[],selectedEmp:null,isMobileView:!1}},mounted:function(){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(console.log("is mobile view true"),this.isMobileView=!0):this.isMobileView=!1,this.getEmployeesList()},watch:{searchTerm:function(e,t){if(t!=e)if(0==e.trim().length)this.empList.forEach((function(e){e.classObject.visible=!0,e.classObject.hidden=!1}));else{var a=e.toLowerCase().trim();this.empList.forEach((function(e){e.classObject.visible=e.EmployeeName&&e.EmployeeName.toLowerCase().indexOf(a)>-1||e.EmployeeNo&&e.EmployeeNo.toString().indexOf(a)>-1,e.classObject.hidden=!e.classObject.visible}))}}},methods:{getEmployeesList:function(){var e=this;va.loading(),re.EmployeesList().then((function(t){t.Data.map((function(e,t){e.classObject={visible:!0,hidden:!1,selected:!1,odd:t%2}})),e.empList=t.Data})).finally((function(){va.clear()}))},toggleEmployeeSelect:function(e){e.classObject.selected?this.removeEmployee(e):this.addEmployee(e)},removeEmployee:function(e){e.classObject.selected=!1,this.selectedEmpList.splice(this.selectedEmpList.indexOf(e),1),this.$emit("updateSelectedEmpList",this.selectedEmpList)},addEmployee:function(e){e.classObject.selected=!0,this.selectedEmpList.push(e),this.$emit("updateSelectedEmpList",this.selectedEmpList)},clearSelectedEmployeeList:function(){this.selectedEmpList.forEach((function(e){e.classObject.selected=!1})),this.selectedEmpList=[],this.$emit("updateSelectedEmpList",this.selectedEmpList)}}});const Fr=(0,ue.Z)(Mr,[["render",Er],["__scopeId","data-v-1416d9be"]]);var Nr=Fr,Pr=(0,l.aZ)({name:"employeeAllocation",components:{SearchEmployee:Nr,EmployeeSchedule:cr,DatePicker:Na},data:function(){return{bulkEmpList:[],schedList:[],hasChanges:!1,cloneSchedList:[],selectSearchInput:"",schedAllocation:{WorkschedId:-1,DateFrom:$e()(),DateTo:null,Comment:"",EndExistingScheds:!0},selectedSchedule:{},selectedEmpForDetail:null,startDateMenu:!1,toDateMenu:!1,startDatePickerValue:"",toDatePickerValue:"",datePickerTargetDay:null,dateType:"",isMobileView:!1,dateModalTop:null,dateModalLeft:null}},mounted:function(){var e=this;this.isMobileView=this.checkIsMobileView(),re.StandardSchedules().then((function(t){e.schedList=t.Data.filter((function(e){return!1===e.Archive&&0===e.ScheduleType})),e.cloneSchedList=e.schedList.slice()})),this.$watch("schedAllocation",(function(t,a){t===a&&(e.hasChanges=!0)}),{deep:!0})},computed:{selectedSched:function(){var e=this;if(-1===this.schedAllocation.WorkschedId)return!1;var t=this.schedList;return t.find((function(t){return t.Id===e.schedAllocation.WorkschedId}))},capDate:function(){if(this.schedAllocation.DateFrom){var e=this.schedAllocation,t=$e()(e.DateFrom),a=t.subtract(1,"day");return a.format("DD/MM/YYYY")}}},methods:{navDownList:function(){},updateSearchList:function(e){var t=this;"ArrowDown"===e.key&&this.$refs.selectDropdownRef.focus(),this.cloneSchedList=this.schedList.filter((function(e){return e.Name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1}))},updateDateText:function(e,t,a){var n,i;if(this.startDateMenu=!1,this.toDateMenu=!1,t)t.set($e()(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value,"DD/MM/YYYY").toObject());else if("DateTo"===a)this.schedAllocation.DateTo=$e()(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value,"DD/MM/YYYY");else if("DateFrom"===a){var l;this.schedAllocation.DateFrom=$e()(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value,"DD/MM/YYYY")}this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.startDatePickerValue=this.schedAllocation.DateFrom?$e()(this.schedAllocation.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.schedAllocation.DateTo?$e()(this.schedAllocation.DateTo).format("YYYY-MM-DD"):void 0},updateEmpList:function(e){this.bulkEmpList=e},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=$e()(e)),this.schedAllocation.DateFrom=e,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=$e()(e)),this.schedAllocation.DateTo=e,this.datePickerFormattedToDate()},removeEmployee:function(e){this.$refs.SearchEmployeeRef.removeEmployee(e)},clearSelectedEmployee:function(){var e=this;this.hasChanges?va.checkChange({message:"There are currently Schedule Allocation changes <br /> Do you want to discard your changes?",onOk:function(){e.$refs.SearchEmployeeRef.clearSelectedEmployeeList(),e.resetSchedAllocation()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},allocateEmployees:function(){var e=this,t="";if((this.selectedSchedule.Id<1||!this.selectedSchedule.Id)&&(t+="<br />Select a schedule that you want to allocate."),this.schedAllocation.DateFrom&&this.schedAllocation.DateTo&&this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo)>0&&(t+="<br />Date To cannot be before Date From."),""==t){var a={WorkschedId:this.selectedSchedule.Id,EmployeeList:[],DateFrom:$e()(this.schedAllocation.DateFrom)?$e()(this.schedAllocation.DateFrom).format("DD/MMM/YYYY"):null,DateTo:$e()(this.schedAllocation.DateTo)?$e()(this.schedAllocation.DateTo).format("DD/MMM/YYYY"):null,Comment:this.schedAllocation.Comment,EndExistingScheds:this.schedAllocation.EndExistingScheds};this.bulkEmpList.length>0&&this.bulkEmpList.forEach((function(e){a.EmployeeList.push(e.EmployeeNo)})),va.loading(),re.AllocateSchedule(a).then((function(t){e.hasChanges=!1,e.resetSchedAllocation(),va.clear(),e.$refs.EmployeeScheduleRef&&e.$refs.EmployeeScheduleRef.getEmpWorkScheds()})).catch((function(e){va.alert(e.message),console.error("err",e)}))}else va.alert(t)},closeSchedAllocation:function(){var e=this;this.hasChanges?va.checkChange({message:"You have unsaved changes. Are you sure to discard the changes?",onOk:function(){e.resetSchedAllocation(),e.hasChanges=!1,e.$refs.SearchEmployeeRef.clearSelectedEmployeeList()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},showScheduleDetail:function(e){this.selectedEmpForDetail=e},resetSelectedEmpForDetail:function(){this.selectedEmpForDetail=null},resetSchedAllocation:function(){this.hasChanges=!1,this.schedAllocation={WorkschedId:-1,DateFrom:$e()(),DateTo:null,Comment:"",EndExistingScheds:!0}},checkIsMobileView:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},chooseSchedule:function(e,t){e.target.blur(),this.selectedSchedule=t,this.selectSearchInput=this.selectedSchedule.Name;e.target.blur();var a=this.$refs.selectRef;a.blur();var n=this.$refs.selectInputRef;n.blur()},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.schedAllocation.DateTo=a:"DateFrom"===e.dateType&&(e.schedAllocation.DateFrom=a);case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(){}}});const Or=(0,ue.Z)(Pr,[["render",Xs],["__scopeId","data-v-1311266a"]]);var Hr=Or,Yr=(a(6977),function(e){return(0,l.dD)("data-v-46f8d0e2"),e=e(),(0,l.Cn)(),e}),Ir={class:"d-flex mt-4 justify-space-between"},Lr=(0,l.uE)('<div class="left-box ml-2" data-v-46f8d0e2><div class="background-legend" data-v-46f8d0e2><div data-v-46f8d0e2><div class="flexi-legend mr-2" data-v-46f8d0e2></div><div class="legend-label" data-v-46f8d0e2>Flexi Schedule</div></div><div class="ml-8" data-v-46f8d0e2><div class="team-legend mr-2" data-v-46f8d0e2></div><div class="legend-label" data-v-46f8d0e2>Team Schedule</div></div><div class="ml-8" data-v-46f8d0e2><div class="personal-legend mr-2" data-v-46f8d0e2></div><div class="legend-label" data-v-46f8d0e2>Personal Schedule</div></div></div></div>',1),Rr={class:"weekDetail d-flex align-center"},jr={class:"status-section right-box"},Wr={class:"copy2 ml-2 text-capitalize"},Br={class:"d-flex mt-4 justify-space-between align-center"},Vr={class:"d-flex align-center"},Zr={class:"costCenter-wrapper"},$r={key:0},zr={class:"custom-select",tabindex:"1",ref:"selectRef"},Ur=Yr((function(){return(0,l._)("span",{class:"inline-block-middle white"},"Actions",-1)})),Kr={class:"inline-block-middle ml-1",style:{height:"15px"}},Gr={class:"custom-select-items"},qr={class:"action-buttons"},Qr={key:1},Jr={key:0},Xr={class:"custom-select",tabindex:"1",ref:"selectRef"},ec=Yr((function(){return(0,l._)("span",{class:"inline-block-middle"},"Actions",-1)})),tc={class:"inline-block-middle ml-1",style:{height:"15px"}},ac={class:"custom-select-items"},nc={class:"action-buttons"},ic={class:"dbw-box schedules-data-medium mt-4",style:{overflow:"auto"}},lc={class:"flex-sche-table"},sc={class:"table-head"},oc={class:"schedule-head-grid"},rc=Yr((function(){return(0,l._)("div",{class:"table-cell"},null,-1)})),cc=Yr((function(){return(0,l._)("div",{class:"table-cell"},"Std Hours",-1)})),uc=Yr((function(){return(0,l._)("div",{class:"table-cell"},"Net Hours",-1)})),dc={class:"table-cell"},hc={class:"table-body"},mc={key:0,class:"schedules-arr"},fc=["onClick"],pc={key:0,class:"published-icon"},yc=Yr((function(){return(0,l._)("span",null,"P",-1)})),gc=[yc],Dc={class:"content-cell"},vc={class:"content-cell"},wc={key:0,class:"schedules-data-medium mt-4"};function bc(e,t){var a=(0,l.up)("Icon"),n=(0,l.up)("flex-schedule-cell-control"),i=(0,l.up)("flex-schedule-cost-center"),s=(0,l.up)("day-cell"),o=(0,l.up)("perfect-scrollbar"),r=(0,l.up)("printable-view"),u=(0,l.up)("edit-flex-schedule"),d=(0,l.up)("date-picker"),h=(0,l.up)("draft-creation-dialog"),m=(0,l.up)("extra-emp-detail"),f=(0,l.up)("analysis-chart"),p=(0,l.up)("publish-dialog"),y=(0,l.up)("cost-analysis-dialog"),g=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Ir,[Lr,(0,l._)("div",Rr,[(0,l._)("span",{class:"arrow-height button icon small mr-4",onClick:t[0]||(t[0]=function(){return e.getLastWeek&&e.getLastWeek.apply(e,arguments)})},[(0,l.Wm)(a,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#FFFFFF"}},null,8,["icon"])]),(0,l._)("span",{onClick:t[1]||(t[1]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},(0,c.zw)(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+(0,c.zw)(e.dayFocus.format("DD/MM/YYYY")),1),(0,l._)("span",{class:"arrow-height button icon small ml-4",onClick:t[2]||(t[2]=function(){return e.getNextWeek&&e.getNextWeek.apply(e,arguments)})},[(0,l.Wm)(a,{icon:e.$icons.chevronRight,height:"30",style:{color:"#FFFFFF"}},null,8,["icon"])])]),(0,l._)("div",jr,[(0,l._)("span",Wr," Status: "+(0,c.zw)(e.getCurrentWeekStatus()),1)])]),(0,l._)("div",Br,[(0,l._)("div",Vr,[(0,l.Wm)(n,{class:"inline-block"}),(0,l._)("div",Zr,[(0,l.Wm)(i,{class:"ml-2",costCenterOptions:e.costCenterOptions,onSelectOption:e.selectCostCenter},null,8,["costCenterOptions","onSelectOption"])])]),"published"===e.weekStatus?((0,l.wg)(),(0,l.iD)("div",$r,[(0,l._)("div",zr,[(0,l._)("div",null,[(0,l._)("button",{class:"grey small copy2 white--text action-button-width",onClick:t[3]||(t[3]=function(){return e.changeDisplayControl&&e.changeDisplayControl.apply(e,arguments)})},[Ur,(0,l._)("span",Kr,[(0,l.Wm)(a,{icon:e.$icons.chevronDown,height:"15",style:{color:"#FFFF"}},null,8,["icon"])])])]),(0,l._)("div",Gr,[(0,l._)("div",qr,[(0,l._)("button",{class:"ghost small copy2 mt-2",onClick:t[4]||(t[4]=function(){return e.openAnalysisChart&&e.openAnalysisChart.apply(e,arguments)})},"Coverage"),(0,l._)("button",{class:"ghost small copy2 mt-2",onClick:t[5]||(t[5]=function(){return e.openCostAnalysis&&e.openCostAnalysis.apply(e,arguments)})},"Cost"),(0,l._)("button",{class:"ghost small copy2 mt-2",onClick:t[6]||(t[6]=function(){return e.printFlexSchedule&&e.printFlexSchedule.apply(e,arguments)})},"Print")])])],512)])):((0,l.wg)(),(0,l.iD)("div",Qr,[e.isAdmin?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Jr,[(0,l._)("span",null,[(0,l._)("div",Xr,[(0,l._)("div",null,[(0,l._)("button",{class:"grey small copy2 white--text action-button-width",onClick:t[7]||(t[7]=function(){return e.changeDisplayControl&&e.changeDisplayControl.apply(e,arguments)})},[ec,(0,l._)("span",tc,[(0,l.Wm)(a,{icon:e.$icons.chevronDown,height:"15",style:{color:"#FFFF"}},null,8,["icon"])])])]),(0,l._)("div",ac,[(0,l._)("div",nc,[e.showCopy()?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"ghost small copy2",onClick:t[8]||(t[8]=function(){return e.openDraftDialog&&e.openDraftDialog.apply(e,arguments)})},"Copy")):(0,l.kq)("",!0),"draft"===e.weekStatus||"partial"===e.weekStatus?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"ghost small copy2",onClick:t[9]||(t[9]=function(){return e.selectEmployeeAndPublish&&e.selectEmployeeAndPublish.apply(e,arguments)})},"Publish")):(0,l.kq)("",!0),(0,l._)("button",{class:"ghost small copy2",onClick:t[10]||(t[10]=function(){return e.openAnalysisChart&&e.openAnalysisChart.apply(e,arguments)})},"Coverage"),(0,l._)("button",{class:"ghost small copy2",onClick:t[11]||(t[11]=function(){return e.openCostAnalysis&&e.openCostAnalysis.apply(e,arguments)})},"Cost"),(0,l._)("button",{class:"ghost small copy2",onClick:t[12]||(t[12]=function(){return e.printFlexSchedule&&e.printFlexSchedule.apply(e,arguments)})},"Print")])])],512)])]))]))]),(0,l._)("div",ic,[(0,l._)("div",lc,[(0,l._)("div",sc,[(0,l._)("div",oc,[rc,cc,uc,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weekDays,(function(e){return(0,l.wg)(),(0,l.iD)("div",dc,(0,c.zw)(e.day),1)})),256))])]),(0,l.Wm)(o,null,{default:(0,l.w5)((function(){return[(0,l._)("div",hc,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scheduleWeekMap.keys(),(function(t){var a;return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.scheduleWeekMap.get(t)&&e.scheduleWeekMap.get(t).show?((0,l.wg)(),(0,l.iD)("div",mc,[(0,l._)("div",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},[(0,l._)("span",null,(0,c.zw)(e.scheduleWeekMap.get(t).employeeName),1),"published"===e.scheduleWeekMap.get(t).empSchePublishState?(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",pc,gc)),[[g,{content:"Schedule for the week is published. "},void 0,{top:!0}]]):(0,l.kq)("",!0)],8,fc),(0,l._)("div",Dc,(0,c.zw)(null===(a=e.scheduleWeekMap.get(t).stdHoursPerWeek)||void 0===a?void 0:a.toFixed(2)),1),(0,l._)("div",vc,(0,c.zw)(e.getTotalHour(e.scheduleWeekMap.get(t).sche)),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scheduleWeekMap.get(t).sche,(function(a){return(0,l.wg)(),(0,l.iD)("div",{class:"content-cell",style:(0,c.j5)(a.column)},[(0,l.Wm)(s,{scheDay:a,employeeNo:t,employeeName:e.scheduleWeekMap.get(t).employeeName,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","employeeNo","employeeName","onOpenEditDialog"])],4)})),256))])):(0,l.kq)("",!0)],64)})),256))])]})),_:1})])]),e.weekDays&&e.weekDays.length>0?((0,l.wg)(),(0,l.iD)("div",wc,[(0,l.Wm)(r,{scheduleWeek:e.scheduleWeekMap,weekDays:e.weekDays,ref:"PrintableViewRef"},null,8,["scheduleWeek","weekDays"])])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l.Wm)(u,{ref:"EditModalRef",isEdit:e.isEditingDialog,weekStatus:e.weekStatus,modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["isEdit","weekStatus","onReload"]),(0,l.Wm)(d,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"]),(0,l.Wm)(h,{ref:"DraftCreationDialogRef",modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["onReload"]),(0,l.Wm)(m,{ref:"ExtraEmpDetailRef",externalDetail:e.externalDetail},null,8,["externalDetail"]),(0,l.Wm)(f,{ref:"AnalysisChartRef",modalIndex:1999},null,512),(0,l.Wm)(p,{ref:"PublishDialogRef",onPublish:e.publishCurrentWeek},null,8,["onPublish"]),(0,l.Wm)(y,{ref:"CostAnalysisDialogRef",dayFocus:e.dayFocus},null,8,["dayFocus"])])],64)}var Sc=a(9584),kc=(a(1532),a(189),function(e){return(0,l.dD)("data-v-59116cfe"),e=e(),(0,l.Cn)(),e}),Cc={class:"bold"},Ac={key:0},xc={key:1},Tc={key:0},_c={key:1},Ec={key:0,class:"mt-2"},Mc={key:1,class:"error-area red"},Fc={key:2,class:"error-area red"},Nc={class:"edit-form mt-4 copy2"},Pc=kc((function(){return(0,l._)("label",null,"Date",-1)})),Oc=(0,l.Uk)(),Hc=kc((function(){return(0,l._)("label",null,"Employee Name",-1)})),Yc=(0,l.Uk)(),Ic=kc((function(){return(0,l._)("label",null,"Employee No",-1)})),Lc=(0,l.Uk)(),Rc=kc((function(){return(0,l._)("label",null,"Position",-1)})),jc={key:0},Wc=kc((function(){return(0,l._)("div",{class:"mt-4"},null,-1)})),Bc=(0,l.Uk)(),Vc=kc((function(){return(0,l._)("div",null,null,-1)})),Zc=kc((function(){return(0,l._)("label",null,"Start Time",-1)})),$c=kc((function(){return(0,l._)("label",null,"Finish Time",-1)})),zc={key:0,class:"two-column orange"},Uc=kc((function(){return(0,l._)("div",{class:"mt-4"},null,-1)})),Kc=kc((function(){return(0,l._)("div",null,null,-1)})),Gc=kc((function(){return(0,l._)("label",null,"Unpaid Break",-1)})),qc={class:"break-parts"},Qc=kc((function(){return(0,l._)("span",{class:"font-small"},"Hours",-1)})),Jc=kc((function(){return(0,l._)("div",{class:"break-parts mobile-column ml-2 mr-2"},[(0,l._)("span",null,":")],-1)})),Xc={class:"break-parts"},eu=kc((function(){return(0,l._)("span",{class:"font-small"},"Minutes",-1)})),tu=kc((function(){return(0,l._)("label",null,"Net Hours",-1)})),au=kc((function(){return(0,l._)("label",null,"Shift ID",-1)})),nu={class:"mt-4 full-width d-flex justify-space-between"},iu=kc((function(){return(0,l._)("div",null,null,-1)})),lu=kc((function(){return(0,l._)("span",{class:"white"},"Save",-1)})),su=[lu],ou=kc((function(){return(0,l._)("span",{class:"white"},"Delete",-1)})),ru=[ou],cu=kc((function(){return(0,l._)("span",{class:"white"},"Create",-1)})),uu=[cu],du=kc((function(){return(0,l._)("span",{class:"white"},"Cancel",-1)})),hu=[du];function mu(e,t){var a=(0,l.up)("custom-select"),n=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(n,{ref:"ModalRef"},{header:(0,l.w5)((function(){return[(0,l._)("div",null,[(0,l._)("h2",Cc,[e.isEdit?((0,l.wg)(),(0,l.iD)("span",Ac,"Edit Schedule")):((0,l.wg)(),(0,l.iD)("span",xc,["published"===e.weekStatus?((0,l.wg)(),(0,l.iD)("span",Tc,"Create Schedule")):((0,l.wg)(),(0,l.iD)("span",_c,"Create Schedule"))]))])])]})),body:(0,l.w5)((function(){return[(0,l._)("div",null,["Team"===e.day.scheduleType?((0,l.wg)(),(0,l.iD)("div",Ec," This schedule is generated from team schedule. ")):(0,l.kq)("",!0),e.showTimeHourError?((0,l.wg)(),(0,l.iD)("div",Mc,"The value for Hours Unpaid Break field must be a whole number. Use Minutes field for breaks that last partial hours.")):(0,l.kq)("",!0),e.showTimeMinuteError?((0,l.wg)(),(0,l.iD)("div",Fc,"The value for Minutes Unpaid Break field must be a whole number.")):(0,l.kq)("",!0),(0,l._)("div",Nc,[Pc,Oc,(0,l._)("span",null,(0,c.zw)(e.dialogDate),1),Hc,Yc,(0,l._)("span",null,(0,c.zw)(e.employeeDetail.employeeName),1),Ic,Lc,(0,l._)("span",null,(0,c.zw)(e.employeeDetail.employeeNo),1),Rc,(0,l._)("div",null,[e.positionOptions&&1===e.positionOptions.length?((0,l.wg)(),(0,l.iD)("span",jc,(0,c.zw)(e.positionOptions[0].positionTitle),1)):e.positionOptions&&e.positionOptions.length>1?((0,l.wg)(),(0,l.j4)(a,{key:1,options:e.positionOptions,displayKey:"positionTitle",selected:e.selectedPosition,onSelectOption:e.selectPositionCustom},null,8,["options","selected","onSelectOption"])):(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:2,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.day.position=t})},null,512)),[[i.nr,e.day.position]])]),Wc,Bc,Vc,Zc,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.day.startTime=t}),onChange:t[2]||(t[2]=function(t){return e.updateStartTime(e.day)})},null,544),[[i.nr,e.day.startTime]]),$c,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.day.endTime=t}),onChange:t[4]||(t[4]=function(t){return e.updateEndTime(e.day)})},null,544),[[i.nr,e.day.endTime]]),e.showUnAvaError?((0,l.wg)(),(0,l.iD)("span",zc,"Note: This schedule's time overlaps with this person's unavailability time.")):(0,l.kq)("",!0),Uc,Kc,Gc,(0,l._)("div",null,[(0,l._)("div",qc,[(0,l.wy)((0,l._)("input",{type:"number",step:"any","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.breakHours=t}),onChange:t[6]||(t[6]=function(){return e.calcBreakHour&&e.calcBreakHour.apply(e,arguments)}),onKeydown:t[7]||(t[7]=function(t){return e.breakValidation(t)})},null,544),[[i.nr,e.breakHours,void 0,{lazy:!0}]]),Qc]),Jc,(0,l._)("div",Xc,[(0,l.wy)((0,l._)("input",{type:"number",step:"any","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.breakMinutes=t}),onChange:t[9]||(t[9]=function(){return e.calcBreakHour&&e.calcBreakHour.apply(e,arguments)}),onKeydown:t[10]||(t[10]=function(t){return e.breakValidation(t)})},null,544),[[i.nr,e.breakMinutes,void 0,{lazy:!0}]]),eu])]),tu,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.fixedHours=t})},null,512),[[i.nr,e.fixedHours,void 0,{lazy:!0}]]),au,(0,l._)("div",null,[e.shiftOptions&&e.shiftOptions.length>0?((0,l.wg)(),(0,l.j4)(a,{key:0,options:e.shiftOptions,displayKey:"description",selected:e.selectedShift,onSelectOption:e.selectShift},null,8,["options","selected","onSelectOption"])):(0,l.kq)("",!0)])])])]})),footer:(0,l.w5)((function(){return[(0,l._)("div",nu,[iu,(0,l._)("div",null,[e.isEdit?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"blue normal copy2",onClick:t[12]||(t[12]=function(t){return e.updateSche()})},su)):(0,l.kq)("",!0),e.isEdit&&e.allowDelete()?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[13]||(t[13]=function(t){return e.confirmIfDeleteSche()})},ru)):(0,l.kq)("",!0),e.isEdit?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:2,class:"blue normal copy2",onClick:t[14]||(t[14]=function(t){return e.createSche()})},uu)),(0,l._)("button",{class:"ml-2 normal orange copy2",onClick:t[15]||(t[15]=function(t){return e.cancel()})},hu)])])]})),_:1},512)}function fu(e,t){return window.innerWidth<1010?e.format("DD/MM/YYYY"):e.day(t).format("DD/MM/YYYY")}function pu(e,t){return window.innerWidth<1010?e.format("MM/DD/YYYY"):e.day(t).format("MM/DD/YYYY")}var yu=(0,l.aZ)({name:"EditFlexSchedule",components:{Modal:Me,CustomSelect:tl},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{day:{},unAvailability:null,selectedPosition:{},selectedShift:{},selectedCostElement1:{},selectedCostElement2:{},employeeDetail:{},dialogDate:"",showUnAvaError:!1,showTimeHourError:!1,showTimeMinuteError:!1,breakHours:null,breakMinutes:null}},setup:function(){var e=(0,Le.oR)();return{shiftOptions:(0,l.Fl)((function(){var t={shiftType:"",description:"",isDefault:null,archive:"F"},a=e.state.LookUp.shifts.slice();return a.unshift(t),a})),costElementOptions:(0,l.Fl)((function(){return e.state.LookUp.costElements}))}},computed:{positionOptions:function(){var e=this.$store.state.LookUp.positions;return 1===e.length&&(this.selectedPosition=e[0]),e},fixedHours:{get:function(){return this.day.hours?this.day.hours.toFixed(2):""},set:function(e){this.day.hours=Number(e)}},fixedBreakLength:{get:function(){return this.day.breakLength?this.day.breakLength.toFixed(2):""},set:function(e){this.day.breakLength=Number(e)}}},mounted:function(){this.$store;this.day=this.$store.state.FlexSchedule.flexScheduleDay},methods:{selectCostElement1:function(e){this.selectedCostElement1=e},selectCostElement2:function(e){this.selectedCostElement2=e},selectShift:function(e){this.selectedShift=e},selectPositionCustom:function(e){this.selectedPosition=e},selectPosition:function(e,t){this.selectedPosition=t,e.target.blur();var a=this.$refs.selectRef;a.blur()},updateStartTime:function(e){var t;e.startTime&&(t=e.startTime.includes(":")?$e()(e.startTime,"HH:mm"):$e()(e.startTime,"Hmm"),t.isValid()?(e.startTime=t.format("HH:mm"),this.calcNetHour()):e.startTime="Invalid Time")},updateEndTime:function(e){var t;e.endTime&&(t=e.endTime.includes(":")?$e()(e.endTime,"HH:mm"):$e()(e.endTime,"Hmm"),t.isValid()?(e.endTime=t.format("HH:mm"),this.calcNetHour()):e.endTime="Invalid Time")},breakValidation:function(e){e.key.match(/[-]/)&&e.preventDefault()},checkBreakHours:function(){if(this.day.breakLength){var e=this.day.breakLength,t=Math.floor(e),a=e-t;0!==t&&(this.breakHours=t),a>0&&(this.breakMinutes=Math.round(60*a))}},calcBreakHour:function(){this.breakHours&&this.breakMinutes?this.day.breakLength=Number(this.breakHours)+Math.round(Number(this.breakMinutes)/60*1e3)/1e3:this.breakHours?this.day.breakLength=Number(this.breakHours):this.breakMinutes?this.day.breakLength=Math.round(Number(this.breakMinutes)/60*1e3)/1e3:(0===this.breakHours&&this.breakMinutes,this.day.breakLength=0),this.calcNetHour()},calcNetHour:function(){if("Invalid Time"!==this.day.startTime&&"Invalid Time"!==this.day.endTime&&this.day.startTime&&this.day.endTime){var e=$e()(this.day.startTime,"H:mm"),t=$e()(this.day.endTime,"H:mm"),a=t.diff(e,"hours",!0);a<=0&&(a=t.add(1,"day").diff(e,"hours",!0));var n=Math.round(100*a)/100;this.day.breakLength?this.day.hours=n-this.day.breakLength:this.day.hours=n,this.checkUnavailability()}},checkUnavailability:function(){if(this.showUnAvaError=!1,this.day.startTime&&this.day.endTime&&this.unAvailability&&this.unAvailability.endTime&&this.unAvailability.startTime){var e=$e()(this.day.startTime,"HH:mm"),t=$e()(this.day.endTime,"HH:mm"),a=$e()(this.unAvailability.startTime,"HH:mm"),n=$e()(this.unAvailability.endTime,"HH:mm");e<=n&&t>=a&&(console.log("show error"),this.showUnAvaError=!0)}},clearForm:function(){this.$store.commit(Ye.clearForm),this.showUnAvaError=!1,this.showTimeHourError=!1,this.showTimeMinuteError=!1},cancel:function(){this.$store.commit(Ye.clearForm),this.showUnAvaError=!1,this.showTimeHourError=!1,this.showTimeMinuteError=!1,this.toggleShow()},getPublishStateBaseOnEmp:function(){if(Je())return"draft";var e=this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,t=this.$store.state.FlexSchedule.scheduleWeek.get(e).empSchePublishState;return"published"===t?"published":"draft"},validateForm:function(){return this.showTimeHourError=!1,this.showTimeMinuteError=!1,this.breakHours&&this.breakHours.toString().indexOf(".")>-1?(this.showTimeHourError=!0,!1):!(this.breakMinutes&&this.breakMinutes.toString().indexOf(".")>-1)||(this.showTimeMinuteError=!0,!1)},updateSche:function(){var e=this;if(this.validateForm()){var t=this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),a=this.getStartAndEndTimeWithDate(t,this.day.startTime,this.day.endTime),n=(0,je.Z)(a,2),i=n[0],l=n[1];va.loading();var s={Id:this.$store.state.FlexSchedule.selectedFlexDay.id,EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:t,StartTime:i,EndTime:l,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:this.getPublishStateBaseOnEmp(),ScheduleType:"Flex",ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};re.PatchFlexSchedule([s]).then((function(t){e.$emit("reload"),va.clear()}),(function(){va.clear(),va.alert("Something went wrong. Update Schedule failed")})),this.$store.commit(Ye.saveScheduleDayToWeek),this.toggleShow()}},createSche:function(){var e=this;if(this.validateForm()){var t=pu(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),a=this.getStartAndEndTimeWithDate(t,this.day.startTime,this.day.endTime),n=(0,je.Z)(a,2),i=n[0],l=n[1];va.loading();var s=[{EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:t,StartTime:i,EndTime:l,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:this.getPublishStateBaseOnEmp(),ScheduleType:"Flex",ScheduleData:{ShiftId:this.selectedShift.shiftType?this.selectedShift.shiftType:"",BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:"",CostElement2:this.selectedCostElement2?this.selectedCostElement2.id:""}}];re.CreateFlexSchedule(s).then((function(t){if(t.Error)throw t;e.$store.commit(Ye.saveScheduleDayToWeek),va.clear(),e.toggleShow(),e.$emit("reload")})).catch((function(e){va.clear(),e.Error?va.alert(e.Error):va.alert("Something went wrong. Create Schedule failed")}))}},allowDelete:function(){return 0!==this.$store.state.FlexSchedule.selectedFlexDay.id},confirmIfDeleteSche:function(){var e=this;this.$store.state.FlexSchedule.selectedFlexDay.id?va.confirmOrCancel({message:"Are you sure you want to delete this schedule?"}).then((function(){e.deleteSche(e.$store.state.FlexSchedule.selectedFlexDay.id)})):va.alert("This record cannot be deleted yet, as it is too far away from today's date.")},deleteSche:function(e){var t=this;va.loading();var a=pu(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),n=this.getStartAndEndTimeWithDate(a,this.day.startTime,this.day.endTime),i=(0,je.Z)(n,2),l=i[0],s=i[1],o={Id:this.$store.state.FlexSchedule.selectedFlexDay.id,EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:a,StartTime:l,EndTime:s,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:"draft",ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};re.DeleteFlexSchedule(o).then((function(e){t.$emit("reload"),t.toggleShow()}),(function(e){va.alert("Something went wrong. Delete Schedule failed")})).finally((function(){}))},getStartAndEndTimeWithDate:function(e,t,a){if(!t&&a){var n=$e()(e),i=$e()(a,"HH:mm"),l=n.clone().hours(i.hour()).minutes(i.minutes());return[null,l]}if(t&&!a){var s=$e()(e),o=$e()(t,"HH:mm"),r=s.clone().hours(o.hour()).minutes(o.minutes());return[r,null]}if(t||a){var c=$e()(e),u=$e()(t,"HH:mm"),d=$e()(a,"HH:mm"),h=c.clone().hours(u.hour()).minutes(u.minutes()),m=c.clone().hours(d.hour()).minutes(d.minutes()),f=m.diff(h,"hours",!0);return f<=0&&m.add(1,"day"),[h.format("YYYY-MM-DDTHH:mm:ss"),m.format("YYYY-MM-DDTHH:mm:ss")]}return[null,null]},openEdit:function(){var e,t,a=this;this.breakMinutes=null,this.breakHours=null,this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(t=this.shiftOptions.find((function(e){return e.shiftType===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId}))),t&&(this.selectedShift=t),this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(this.selectedCostElement1=this.costElementOptions.find((function(e){return e.id===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1})),this.selectedCostElement2=this.costElementOptions.find((function(e){return e.id===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2}))),this.employeeDetail={employeeName:this.$store.state.FlexSchedule.selectedFlexDay.employeeName,employeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo},this.dialogDate=fu(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),this.day=this.$store.state.FlexSchedule.flexScheduleDay,this.unAvailability=null===(e=this.$store.state.FlexSchedule.selectedFlexDay)||void 0===e?void 0:e.unAvailability,this.checkUnavailability(),this.checkBreakHours(),this.$refs.ModalRef.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});const gu=(0,ue.Z)(yu,[["render",mu],["__scopeId","data-v-59116cfe"]]);var Du,vu,wu,bu,Su=gu,ku=function(e){return(0,l.dD)("data-v-38c36867"),e=e(),(0,l.Cn)(),e},Cu={class:"day-info"},Au=ku((function(){return(0,l._)("span",{class:"white"},"Create",-1)})),xu=[Au],Tu={key:1},_u={class:"full-width"},Eu={key:0},Mu={key:1},Fu={key:2},Nu={key:3},Pu={key:4},Ou=ku((function(){return(0,l._)("div",null,"Position:",-1)})),Hu=ku((function(){return(0,l._)("span",{class:"white caption"},"Edit",-1)})),Yu=[Hu],Iu={key:2,class:"leave-unit mt-2"},Lu={key:0},Ru={key:1},ju={key:3,class:"leave-unit mt-2"},Wu=ku((function(){return(0,l._)("div",null,"Unavailable",-1)}));function Bu(e,t,a,n,s,o){return(0,l.wg)(),(0,l.iD)("div",Cu,[(0,l._)("div",{class:(0,c.C_)(["display-day",{"team-color-bg":"Team"===e.scheDay.scheduleType,"flexi-color-bg":"Flex"===e.scheDay.scheduleType,"personal-color-bg":"Personal"===e.scheDay.scheduleType}]),onClick:t[2]||(t[2]=(0,i.iM)((function(){return e.clickDayCell&&e.clickDayCell.apply(e,arguments)}),["prevent"]))},[e.scheDay.startTime||e.scheDay.endTime||e.scheDay.hours||!e.scheDay.allowCreateOrEdit||!e.checkMobileShowCreate()?e.scheDay.startTime||e.scheDay.endTime||e.scheDay.hours?((0,l.wg)(),(0,l.iD)("div",Tu,[(0,l._)("div",_u,[e.scheDay.startTime||e.scheDay.endTime?((0,l.wg)(),(0,l.iD)("div",Eu,[(0,l._)("div",null,(0,c.zw)(e.scheDay.startTime)+" - "+(0,c.zw)(e.scheDay.endTime),1)])):(0,l.kq)("",!0),e.shouldDisplayHours(e.scheDay)?((0,l.wg)(),(0,l.iD)("div",Mu,[(0,l._)("div",null,"Net Hours: "+(0,c.zw)(Math.round(100*e.scheDay.hours)/100),1)])):(0,l.kq)("",!0),e.cellSettings.showBreakLength.value&&e.scheDay.breakLength?((0,l.wg)(),(0,l.iD)("div",Fu,[(0,l._)("div",null,"Break Length: "+(0,c.zw)(Math.round(100*e.scheDay.breakLength)/100),1)])):(0,l.kq)("",!0),e.cellSettings.showShiftId.value&&e.scheDay.shiftId?((0,l.wg)(),(0,l.iD)("div",Nu,[(0,l._)("div",null,"Shift ID: "+(0,c.zw)(e.scheDay.shiftId),1)])):(0,l.kq)("",!0),e.cellSettings.showPosition.value&&e.scheDay.positionTitle?((0,l.wg)(),(0,l.iD)("div",Pu,[Ou,(0,l._)("div",null,(0,c.zw)(e.scheDay.positionTitle),1)])):(0,l.kq)("",!0)]),e.scheDay.allowCreateOrEdit&&!e.scheDay.isPaid&&e.checkMobileShowEdit()?((0,l.wg)(),(0,l.iD)("button",{key:0,class:(0,c.C_)(["detail-button blue small mt-2",{"detail-button-auto-hide":!e.isMobileG()}]),onClick:t[1]||(t[1]=function(t){return e.moreDetail(e.scheDay)})},Yu,2)):(0,l.kq)("",!0)])):(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,c.C_)(["create-day",{"create-day-show":!e.isMobileG()}])},[(0,l._)("button",{class:"blue small",onClick:t[0]||(t[0]=function(t){return e.createSche(e.scheDay)})},xu)],2)),e.scheDay.leaveUnit?((0,l.wg)(),(0,l.iD)("div",Iu,["D"===e.scheDay.leaveUnit.calcUnit?((0,l.wg)(),(0,l.iD)("span",Lu,"Leave: "+(0,c.zw)(e.scheDay.leaveUnit.daysAppliedFor)+" day",1)):((0,l.wg)(),(0,l.iD)("span",Ru,"Leave: "+(0,c.zw)(e.scheDay.leaveUnit.hoursAppliedFor)+" hours",1))])):(0,l.kq)("",!0),e.scheDay.unAvailability?((0,l.wg)(),(0,l.iD)("div",ju,[Wu,(0,l._)("span",null,(0,c.zw)(e.scheDay.unAvailability.startTime)+" - "+(0,c.zw)(e.scheDay.unAvailability.endTime),1),(0,l._)("div",null,(0,c.zw)(e.scheDay.unAvailability.reason),1)])):(0,l.kq)("",!0)],2)])}(function(e){e["setShifts"]="SET_SHIFTS",e["setPosition"]="SET_POSITION",e["setCostElements"]="SET_COST_ELEMENTS",e["setWorkTypes"]="SET_WORK_TYPES",e["setCostCenters"]="SET_COST_CENTER"})(wu||(wu={})),function(e){e["getPositions"]="GET_POSITIONS",e["getShifts"]="GET_SHIFTS",e["getCostElement"]="GET_COST_ELEMENT",e["getWorkTypes"]="GET_WORK_TYPES",e["getCostCenters"]="GET_COST_CENTER"}(bu||(bu={}));var Vu=(Du={},(0,Re.Z)(Du,wu.setShifts,(function(e,t){e.shifts=t})),(0,Re.Z)(Du,wu.setPosition,(function(e,t){e.positions=t})),(0,Re.Z)(Du,wu.setCostElements,(function(e,t){e.costElements=t})),(0,Re.Z)(Du,wu.setWorkTypes,(function(e,t){e.workTypes=t})),(0,Re.Z)(Du,wu.setCostCenters,(function(e,t){e.costCenters=t})),Du),Zu=(vu={},(0,Re.Z)(vu,bu.getPositions,(function(e,t){var a=e.commit;re.GetPosition(t).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a(wu.setPosition,t)}))})),(0,Re.Z)(vu,bu.getShifts,(function(e){var t=e.commit;re.ShiftTypes().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));t(wu.setShifts,a)}))})),(0,Re.Z)(vu,bu.getCostElement,(function(e){var t=e.commit;re.GetCostelements().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));t(wu.setCostElements,a)}))})),(0,Re.Z)(vu,bu.getWorkTypes,(function(e){var t=e.commit;re.GetWorkTypes().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a.map((function(e){e.isSelected=!1})),t(wu.setWorkTypes,a)}))})),(0,Re.Z)(vu,bu.getCostCenters,(function(e,t){var a=e.commit;return re.GetEmployeesCostCentres(t).then((function(e){var t=e.data.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));return a(wu.setCostCenters,t),t}))})),vu),$u={state:{shifts:[],positions:[],costElements:[],workTypes:[],costCenters:[]},mutations:Vu,actions:Zu},zu=$u,Uu=(0,l.aZ)({name:"DayCell",props:{scheDay:{type:Object},employeeNo:{type:Number},employeeName:{type:String}},data:function(){return{mobileShowCreate:!1,mobileShowEdit:!1}},setup:function(){var e=(0,Le.oR)(),t=e.state.FlexSchedule.flexScheduleCellSetting,a=(0,l.Fl)((function(){return e.state.LookUp.shifts})),n=(0,l.Fl)((function(){return e.state.LookUp.positions}));return{cellSettings:t,shiftOptions:a,positionOptions:n,selectedShift:(0,l.Fl)((function(e){return a.value.find((function(t){return t.shiftType===e}))}))}},methods:{moreDetail:function(e){var t=this;this.$store.dispatch(bu.getPositions,this.employeeNo);var a=this.$store.state.FlexSchedule.flexScheduleRemoteData.find((function(a){return a.date===e.date&&a.employeeNo===t.employeeNo}));a?(this.$store.commit(Ye.setScheduleDay,a),this.$emit("openEditDialog",!0)):console.error("can not find selected schedule")},createSche:function(e){this.$store.dispatch(bu.getPositions,this.employeeNo);var t=Ve().clone(e);t.employeeNo=this.employeeNo,t.employeeName=this.employeeName,this.$store.commit(Ye.createNewScheduleDay,t),this.$emit("openEditDialog",!1)},shouldDisplayHours:function(e){return!!this.cellSettings.showHours.value&&(!(!e.startTime&&!e.endTime||0!==e.hours)||!!e.hours)},isMobileG:function(){return Je()},clickDayCell:function(){this.mobileShowCreate=!this.mobileShowCreate,this.mobileShowEdit=!this.mobileShowEdit},checkMobileShowEdit:function(){return!Je()||this.mobileShowEdit},checkMobileShowCreate:function(){return!Je()||this.mobileShowCreate}}});const Ku=(0,ue.Z)(Uu,[["render",Bu],["__scopeId","data-v-38c36867"]]);var Gu=Ku,qu=function(e){return(0,l.dD)("data-v-7ca643ae"),e=e(),(0,l.Cn)(),e},Qu={class:"cell-config-list"},Ju={class:"custom-select",tabindex:"1"},Xu=qu((function(){return(0,l._)("div",{class:"custom-select-selected"}," Show/Hide Details ",-1)})),ed={class:"custom-select-items"},td=["onClick"],ad={class:"cell-config"},nd=["onUpdate:modelValue"];function id(e,t,a,n,s,o){return(0,l.wg)(),(0,l.iD)("div",Qu,[(0,l._)("div",null,[(0,l._)("div",Ju,[Xu,(0,l._)("div",ed,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cellSettings,(function(a,n){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",key:n,onClick:function(t){e.checkOptions(a)}},[(0,l._)("div",ad,[(0,l._)("label",null,(0,c.zw)(a.name),1),(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":function(e){return a.value=e},onChange:t[0]||(t[0]=function(){return e.optionChanged&&e.optionChanged.apply(e,arguments)})},null,40,nd),[[i.e8,a.value]])])],8,td)})),128))])])])])}var ld=(0,l.aZ)({name:"FlexScheduleCellControl",setup:function(){var e=(0,Le.oR)(),t=(0,_a.iH)(!1),a=(0,_a.iH)([]),n=e.state.FlexSchedule.flexScheduleCellSetting;return{open:t,cellSettings:n,optionSelected:a}},methods:{optionChanged:function(){localStorage.setItem("flexScheduleCellSetting",JSON.stringify(this.cellSettings))},checkOptions:function(e){}}});const sd=(0,ue.Z)(ld,[["render",id],["__scopeId","data-v-7ca643ae"]]);var od=sd,rd=(0,l._)("div",{class:"heading"},null,-1),cd={class:"content"},ud={class:"clock-frame"},dd={ref:"clockRef",width:"200",height:"200",style:{"background-color":"white"}},hd=(0,l._)("div",{class:"controls"},null,-1);function md(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",null,[rd,(0,l._)("div",cd,[(0,l._)("div",ud,[(0,l._)("canvas",dd,null,512)]),hd])])}a(3290);var fd=(0,l.aZ)({name:"TimePicker",setup:function(){for(var e=(0,_a.iH)([]),t=(0,_a.iH)([]),a=(0,_a.iH)(null),n=0;n<12;n++)e.value.push(n);for(var i=0;i<=55;i+=5)t.value.push(i);return(0,l.bv)((function(){var e=a.value,t=e.getContext("2d"),n=e.height/2;function i(){t.arc(0,0,n,0,2*Math.PI),t.fillStyle="lightGrey",t.fill(),l(t,n),s(t,n),o(t,n)}function l(e,t){e.beginPath(),e.arc(0,0,5,0,2*Math.PI),e.fillStyle="#333",e.fill()}function s(e,t){var a;e.font="18px arial",e.textBaseline="middle",e.textAlign="center";for(var n=1;n<13;n++)a=n*Math.PI/6,e.rotate(a),e.translate(0,.85*-t),e.rotate(-a),e.fillText(n.toString(),0,0),e.rotate(a),e.translate(0,.85*t),e.rotate(-a)}function o(e,t){new Date;var a=5,n=15;a%=12,a=a*Math.PI/6,r(e,a,.5*t,5),n=n*Math.PI/30,r(e,n,.7*t,3)}function r(e,t,a,n){e.beginPath(),e.lineWidth=n,e.lineCap="round",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-a),e.stroke(),e.rotate(-t)}t.translate(n,n),n*=.9,i()})),{clockHours:e,clockMinutes:t,clockRef:a}}});const pd=(0,ue.Z)(fd,[["render",md]]);var yd=pd,gd=a(6860),Dd=function(e){return(0,l.dD)("data-v-0bd36e56"),e=e(),(0,l.Cn)(),e},vd=Dd((function(){return(0,l._)("div",null,[(0,l._)("h2",null,[(0,l._)("b",null,"Create Draft Schedule")])],-1)})),wd=Dd((function(){return(0,l._)("div",{class:"line-break my-4"},null,-1)})),bd={class:"d-flex align-center"},Sd=(0,l.Uk)("Copy from Flexi Schedules"),kd=[Sd],Cd={class:"mt-2 draft-option pa-2"},Ad={key:0,class:"grey-wrapper"},xd={class:"input-label"},Td=(0,l.Uk)("From Date"),_d=[Td],Ed={class:"mt-2"},Md={class:"input-label"},Fd=(0,l.Uk)("Number of Days"),Nd=[Fd],Pd={key:0,class:"mt-1"},Od=Dd((function(){return(0,l._)("span",{class:"red"},"Number of days cannot be greater than 14",-1)})),Hd=[Od],Yd={class:"mt-2"},Id={class:"input-label"},Ld=(0,l.Uk)("Start On"),Rd=[Ld],jd=Dd((function(){return(0,l._)("div",{class:"line-break my-4"},null,-1)})),Wd={class:"d-flex"},Bd={class:"container-half"},Vd=Dd((function(){return(0,l._)("div",null," Paste Options ",-1)})),Zd={class:"px-2 mt-4"},$d={class:"d-flex align-center"},zd=(0,l.Uk)("Replace All"),Ud=[zd],Kd={class:"d-flex align-center mt-2"},Gd=(0,l.Uk)("Merge"),qd=[Gd],Qd={class:"container-half"},Jd=Dd((function(){return(0,l._)("label",null,"Exclude Worker Type",-1)})),Xd=Dd((function(){return(0,l._)("div",{class:"line-break my-4"},null,-1)})),eh={class:"d-flex"},th=(0,l.Uk)("Override Team and Personal Schedules"),ah=[th],nh={class:"d-flex justify-end full-width mt-4"};function ih(e,t){var a=(0,l.up)("multi-select"),n=(0,l.up)("date-picker"),s=(0,l.up)("Modal"),o=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.j4)(s,{ref:"ModalRef"},{header:(0,l.w5)((function(){return[vd]})),body:(0,l.w5)((function(){return[(0,l._)("div",null,[(0,l._)("form",null,[wd,(0,l._)("div",null,[(0,l._)("div",bd,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",null,kd)),[[o,{content:"Copies information from a previous flexi schedule and pastes it into a current or future flexi schedule.",classes:"tool-tip-width"},void 0,{top:!0}]])]),(0,l._)("div",Cd,["copy"!==e.sourceMode?((0,l.wg)(),(0,l.iD)("div",Ad)):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",xd,_d)),[[o,{content:"The date to copy from."},void 0,{top:!0}]]),(0,l.wy)((0,l._)("input",{class:"input-box",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.copyFromDateText=t}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,"copyFromDate")})},null,512),[[i.nr,e.copyFromDateText]])]),(0,l._)("div",Ed,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",Md,Nd)),[[o,{content:"The number of days to copy."},void 0,{top:!0}]]),(0,l.wy)((0,l._)("input",{class:"input-box",type:"number",max:"14","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.copyToDateDuration=t}),onChange:t[3]||(t[3]=function(){return e.validNoDays&&e.validNoDays.apply(e,arguments)})},null,544),[[i.nr,e.copyToDateDuration,void 0,{number:!0}]]),e.showNoDaysError?((0,l.wg)(),(0,l.iD)("div",Pd,Hd)):(0,l.kq)("",!0)]),(0,l._)("div",Yd,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",Id,Rd)),[[o,{content:"The date in the flexi schedule when copied information will start. For example, if you copy a 5-day block from 1 April and start it on 11 July, it will run from 11- 15 July."},void 0,{top:!0}]]),(0,l.wy)((0,l._)("input",{class:"input-box",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.targetDateText=t}),onClick:t[5]||(t[5]=function(t){return e.updateDateTime(t,"targetDate")})},null,512),[[i.nr,e.targetDateText]])])])])]),jd,(0,l._)("div",Wd,[(0,l._)("div",Bd,[Vd,(0,l._)("div",Zd,[(0,l._)("div",$d,[(0,l.wy)((0,l._)("input",{type:"radio",name:"copyOption",value:"replace",class:"mt-0 ml-0","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.copyOption=t})},null,512),[[i.G2,e.copyOption]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",null,Ud)),[[o,{content:"When copied information is pasted in, it will replace all information on the days specified.",classes:"tool-tip-width"},void 0,{top:!0}]])]),(0,l._)("div",Kd,[(0,l.wy)((0,l._)("input",{type:"radio",name:"copyOption",value:"merge",class:"mt-0 ml-0","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.copyOption=t})},null,512),[[i.G2,e.copyOption]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",null,qd)),[[o,{content:"When copied information is pasted in, it will replace information on the days specified only if there is a conflict."},void 0,{top:!0}]])])])]),(0,l._)("div",Qd,[Jd,(0,l.Wm)(a,{class:"mt-4",selectOptionInput:e.workTypeOptions,targetString:"description","fixed-left":!0},null,8,["selectOptionInput"])])]),Xd,(0,l._)("div",eh,[(0,l._)("div",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.overrideTeam=t})},null,512),[[i.e8,e.overrideTeam]]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",null,ah)),[[o,{content:"Selecting this option will copy Flexi Schedules for all non-published employees as well as those employees who are already on a Team or a Personal Schedule."},void 0,{top:!0}]])])]),(0,l.Wm)(n,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft,"min-date":e.datePickerMin,"max-date":e.datePickerMax},null,8,["top","left","min-date","max-date"])])]})),footer:(0,l.w5)((function(){return[(0,l._)("div",nh,[(0,l._)("button",{class:"blue xsmall white--text mr-2",onClick:t[9]||(t[9]=function(){return e.actionByMode&&e.actionByMode.apply(e,arguments)})},"Create"),(0,l._)("button",{class:"orange xsmall white--text",onClick:t[10]||(t[10]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},"Cancel")])]})),_:1},512)}var lh={class:"custom-select",tabindex:"1",ref:"selectRef"},sh={class:"custom-select-selected"},oh=["onClick"],rh={class:"cell-config"},ch=["onUpdate:modelValue"],uh={class:"ml-2 vert-mid"};function dh(e,t){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("span",null,[(0,l._)("div",lh,[(0,l._)("div",sh,[(0,l._)("span",null,(0,c.zw)(e.getSelectedOptions()),1)]),(0,l._)("div",{class:"custom-select-items",style:(0,c.j5)(e.getLeft())},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",key:a,onClick:function(a){return e.selectOptionAction(t)}},[(0,l._)("div",rh,[(0,l.wy)((0,l._)("input",{type:"checkbox",class:"ma-0 vert-mid","onUpdate:modelValue":function(e){return t.isSelected=e}},null,8,ch),[[i.e8,t.isSelected]]),(0,l._)("label",uh,(0,c.zw)(t[e.targetString]),1)])],8,oh)})),128))],4)],512)])])}var hh=(0,l.aZ)({name:"CustomSelect",props:{selectOptionInput:{type:Array},targetString:{type:String},allowAll:{type:Boolean},fixedLeft:{type:Boolean}},data:function(){return{options:[],left:0,selected:[]}},mounted:function(){this.left=this.$refs.selectRef.getClientRects()[0].left,this.options=this.selectOptionInput;var e=!1;if(this.options.find((function(e){return e.isSelected}))&&(e=!0),this.allowAll){var t={commonName:"All",isAll:!0,isSelected:!e};this.options.unshift(t)}},methods:{getSelectedOptions:function(){var e=this,t=this.options.filter((function(e){return e.isSelected})),a="";return t.map((function(t,n){a=n>0?a+", "+t[e.targetString]:t[e.targetString]})),a},getLeft:function(){return this.fixedLeft?{left:this.left+"px"}:{position:"absolute"}},selectOptionAction:function(e){e.isAll&&0==e.isSelected?this.options.forEach((function(e,t){t>0&&(e.isSelected=!1)})):!e.isAll&&this.options[0].isAll&&(this.options[0].isSelected=!1),e.isSelected=!e.isSelected}}});const mh=(0,ue.Z)(hh,[["render",dh],["__scopeId","data-v-45e6dd59"]]);var fh,ph=mh;(function(e){e["copy"]="replace",e["merge"]="merge"})(fh||(fh={}));var yh=(0,l.aZ)({name:"DraftCreationDialog",components:{Modal:Me,DatePicker:Na,MultiSelect:ph},data:function(){return{datePickerTop:0,datePickerLeft:0,sourceMode:"copy",copyOption:"replace",overrideTeam:!1,scheduleStartDateText:"",copyFromDateText:"",targetDateText:"",scheduleStartDate:$e()(),copyFromDate:$e()(),copyToDateDuration:0,targetDate:$e()(),datePickerMax:null,datePickerMin:null,dateTarget:"",copyPersonalDuration:0,workTypeOptions:[],selected:{},options:[],left:0,showNoDaysError:!1}},mounted:function(){},methods:{selectOption:function(){},resetData:function(){this.datePickerTop=0,this.datePickerLeft=0,this.sourceMode="copy",this.copyOption="replace",this.scheduleStartDateText="",this.copyFromDateText="",this.targetDateText="",this.scheduleStartDate=$e()(),this.copyFromDate=$e()(),this.copyToDateDuration=0,this.targetDate=$e()(),this.dateTarget="",this.copyPersonalDuration=0,this.datePickerMax=null,this.datePickerMin=null,this.showNoDaysError=!1,this.workTypeOptions=this.$store.state.LookUp.workTypes},toggleShow:function(){this.resetData(),this.$refs.ModalRef.toggleShow()},actionByMode:function(){"copy"===this.sourceMode?this.createDraft():this.importFromPersonal()},importFromPersonal:function(){var e=this;va.loading();var t,a=[],i=(0,n.Z)(this.$store.state.FlexSchedule.scheduleWeek.values());try{var l=function(){var n=t.value;e.$store.state.EmployeeModule.filteredEmployees.find((function(e){return e.employeeNo===n.employeeNo}))&&a.push(n.employeeNo)};for(i.s();!(t=i.n()).done;)l()}catch(o){i.e(o)}finally{i.f()}var s={CopyFromPersonalSchedule:!0,EmployeeNumbers:a,PersonalSchedCopyDurationInDays:this.copyPersonalDuration,TargetDate:this.scheduleStartDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption,ExcludedworkTypes:this.getExcludedWorkTypes()};re.CopyFlexSchedule(s).then((function(t){e.$refs.ModalRef.toggleShow(),e.$emit("reload")})).finally((function(){}))},validForm:function(){return this.validNoDays()},validNoDays:function(){return this.copyToDateDuration>14?(this.showNoDaysError=!0,!1):(this.showNoDaysError=!1,!0)},createDraft:function(){var e=this;if(this.validForm()){va.loading();var t=[];if(this.overrideTeam){var a,i=(0,n.Z)(this.$store.state.FlexSchedule.scheduleWeek.values());try{for(i.s();!(a=i.n()).done;){var l=a.value;(l.includeTeamOrPersonal||"published"!==l.empSchePublishState)&&t.push(l.employeeNo)}}catch(u){i.e(u)}finally{i.f()}}else{var s,o=(0,n.Z)(this.$store.state.FlexSchedule.scheduleWeek.values());try{for(o.s();!(s=o.n()).done;){var r=s.value;"published"!==r.empSchePublishState&&t.push(r.employeeNo)}}catch(u){o.e(u)}finally{o.f()}}t=t.filter((function(t){return!!e.$store.state.EmployeeModule.filteredEmployees.find((function(e){return e.employeeNo===t}))}));var c={CopyFromPersonalSchedule:!1,EmployeeNumbers:t,CopyFromDate:this.copyFromDate.format("DD/MMM/YYYY"),CopyToDate:this.copyFromDate.add(this.copyToDateDuration-1,"days").format("DD/MMM/YYYY"),TargetDate:this.targetDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption,ExcludedworkTypes:this.getExcludedWorkTypes(),OverrideTeam:this.overrideTeam};re.CopyFlexSchedule(c).then((function(t){va.clear(),e.$refs.ModalRef.toggleShow(),va.alert("Your schedules are being copied. This process can take a few minutes. You will need to refresh your screen to see the updated schedules.")})).finally((function(){}))}},getExcludedWorkTypes:function(){var e=this.workTypeOptions.filter((function(e){return e.isSelected}));return e.length<1&&(e=this.$store.state.FlexSchedule.defaultWorkTypes),e.map((function(e){return e.code}))},updateDateTime:function(e,t){var a=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.target.getClientRects()[0],a.datePickerTop=i.bottom,a.datePickerLeft=i.left,n.prev=3,n.t0=t,n.next="ScheduleStartDate"===n.t0?7:"copyFromDate"===n.t0?12:"targetDate"===n.t0?19:26;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.scheduleStartDate);case 9:return a.scheduleStartDate=n.sent,a.scheduleStartDateText=a.scheduleStartDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return a.datePickerMax=null,a.datePickerMin=null,n.next=16,a.$refs.DatePickerRef.toggleShow(a.copyFromDate);case 16:return a.copyFromDate=n.sent,a.copyFromDateText=a.copyFromDate.format("DD/MM/YYYY"),n.abrupt("return");case 19:return a.datePickerMax=null,a.datePickerMin=$e()().add(-2,"day"),n.next=23,a.$refs.DatePickerRef.toggleShow(a.targetDate);case 23:return a.targetDate=n.sent,a.targetDateText=a.targetDate.format("DD/MM/YYYY"),n.abrupt("return");case 26:n.next=31;break;case 28:return n.prev=28,n.t1=n["catch"](3),n.abrupt("return");case 31:case"end":return n.stop()}}),n,null,[[3,28]])})))()},cancel:function(){this.toggleShow()}}});const gh=(0,ue.Z)(yh,[["render",ih],["__scopeId","data-v-0bd36e56"]]);var Dh=gh,vh=function(e){return(0,l.dD)("data-v-3e8387ea"),e=e(),(0,l.Cn)(),e},wh=vh((function(){return(0,l._)("h2",{class:"bold"},"Employee Details",-1)})),bh={class:"mt-4"},Sh={class:"mt-4"};function kh(e,t,a,n,i,s){var o=(0,l.up)("cf-widget"),r=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(r,{ref:"ModalRef"},{header:(0,l.w5)((function(){return[wh]})),body:(0,l.w5)((function(){return[(0,l._)("div",bh,[(0,l.Wm)(o,{title:e.title,icon:"",class:"my-pay-widget",data:e.externalDetail,loading:e.loading,error:e.error},null,8,["title","data","loading","error"])])]})),footer:(0,l.w5)((function(){return[(0,l._)("div",Sh,[(0,l._)("button",{class:"grey small white--text",onClick:t[0]||(t[0]=function(){return e.toggleShow&&e.toggleShow.apply(e,arguments)})},"Close")])]})),_:1},512)}var Ch={class:"cf-widget"};function Ah(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",Ch,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.items,(function(e,t){return(0,l.wg)(),(0,l.j4)((0,l.LL)(e.Type),{data:e,class:"item",key:t},null,8,["data"])})),128))])}var xh={class:"field-display"},Th={class:"label"},_h=["href"],Eh=["href"],Mh={key:2,class:"value"};function Fh(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",xh,[(0,l._)("div",Th,(0,c.zw)(a.data.Label),1),s.email?((0,l.wg)(),(0,l.iD)("a",{key:0,href:s.email,class:"value"},(0,c.zw)(a.data.Value),9,_h)):(0,l.kq)("",!0),!s.email&&s.tel?((0,l.wg)(),(0,l.iD)("a",{key:1,href:s.tel,class:"value"},(0,c.zw)(a.data.Value),9,Eh)):(0,l.kq)("",!0),s.email||s.tel?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Mh,(0,c.zw)(a.data.Value),1))])}var Nh={props:["data"],computed:{tel:function(){return"string"==typeof this.data.Key&&(this.data.Key.includes("Phone")||this.data.Key.includes("Mobile"))?"tel:".concat(this.data.Value):null},email:function(){return"string"==typeof this.data.Value&&this.data.Value.includes("@")?"mailto:".concat(this.data.Value):null}}};const Ph=(0,ue.Z)(Nh,[["render",Fh]]);var Oh=Ph,Hh={class:"separator"};function Yh(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",Hh)}var Ih={};const Lh=(0,ue.Z)(Ih,[["render",Yh]]);var Rh=Lh,jh={class:"youtube-input"},Wh=["src"];function Bh(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",jh,[(0,l._)("iframe",{class:"video-frame",src:"//www.youtube.com/embed/"+a.data.Value+"?autoplay=0&controls=1&rel=0&showinfo=0&theme=light&modestbranding=1"},null,8,Wh)])}var Vh={props:["data"]};const Zh=(0,ue.Z)(Vh,[["render",Bh]]);var $h=Zh;function zh(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("p",null,(0,c.zw)(a.data.Label),1)}var Uh={props:["data"]};const Kh=(0,ue.Z)(Uh,[["render",zh]]);var Gh=Kh,qh={class:"explanation"};function Qh(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("p",qh,(0,c.zw)(a.data.Label),1)}var Jh={props:["data"]};const Xh=(0,ue.Z)(Jh,[["render",Qh]]);var em=Xh,tm={class:"attachment"},am={class:"label"},nm={class:"value"},im={href:"#"};function lm(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",tm,[(0,l._)("div",am,(0,c.zw)(a.data.Label),1),(0,l._)("div",nm,[(0,l._)("a",im,(0,c.zw)(a.data.Value.Display),1)])])}var sm={props:["data"]};const om=(0,ue.Z)(sm,[["render",lm]]);var rm=om,cm={class:"subheading"},um={class:"label"};function dm(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",cm,[(0,l._)("div",um,(0,c.zw)(a.data.Label),1)])}var hm={props:["data"]};const mm=(0,ue.Z)(hm,[["render",dm]]);var fm=mm,pm=["href"];function ym(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("a",{href:a.data.Value},(0,c.zw)(a.data.Label),9,pm)}var gm={props:["data"]};const Dm=(0,ue.Z)(gm,[["render",ym]]);var vm=Dm,wm={props:["title","icon","data","loading","error"],components:{FieldDisplay:Oh,Separator:Rh,YoutubeInput:$h,Paragraph:Gh,Explanation:em,AttachFile:rm,Subheading:fm,Link:vm},computed:{items:function(){if(this.data)return this.data.filter((function(e){return"Separator"===e.Type||"Subheading"===e.Type||"Explanation"===e.Type||"Paragraph"===e.Type||"YoutubeInput"===e.Type||"Link"===e.Type||e.Value}))}}};const bm=(0,ue.Z)(wm,[["render",Ah]]);var Sm=bm,km=(0,l.aZ)({name:"TestEmployeeList",components:{Modal:Me,CfWidget:Sm},props:{externalDetail:{type:Array}},data:function(){return{title:"data title",loading:!1,error:null}},mounted:function(){},methods:{toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});const Cm=(0,ue.Z)(km,[["render",kh],["__scopeId","data-v-3e8387ea"]]);var Am=Cm,xm=function(e){return(0,l.dD)("data-v-19c59d50"),e=e(),(0,l.Cn)(),e},Tm={class:"flex-sche-table print-only",id:"FlexSchedules"},_m={class:"table-head"},Em=xm((function(){return(0,l._)("th",{class:"table-cell"},null,-1)})),Mm=xm((function(){return(0,l._)("th",{class:"table-cell"},"Std Hours",-1)})),Fm=xm((function(){return(0,l._)("th",{class:"table-cell"},"Net Hours",-1)})),Nm={class:"table-cell"},Pm={class:"table-body"},Om={key:0,class:"schedules-arr"},Hm=["onClick"],Ym={class:"content-cell"},Im={class:"content-cell"},Lm={key:0,class:"leave-unit mt-2"},Rm={key:0},jm={key:1};function Wm(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("table",Tm,[(0,l._)("thead",null,[(0,l._)("tr",_m,[Em,Mm,Fm,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weekDays,(function(e){return(0,l.wg)(),(0,l.iD)("th",Nm,(0,c.zw)(e.day),1)})),256))])]),(0,l._)("tbody",Pm,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scheduleWeek.keys(),(function(t){return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.scheduleWeek.get(t)&&e.scheduleWeek.get(t).show?((0,l.wg)(),(0,l.iD)("tr",Om,[(0,l._)("td",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},(0,c.zw)(e.scheduleWeek.get(t).employeeName),9,Hm),(0,l._)("td",Ym,(0,c.zw)(e.scheduleWeek.get(t).stdHoursPerWeek.toFixed(2)),1),(0,l._)("td",Im,(0,c.zw)(e.getTotalHour(e.scheduleWeek.get(t).sche)),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scheduleWeek.get(t).sche,(function(e){return(0,l.wg)(),(0,l.iD)("td",{class:"content-cell",style:(0,c.j5)(e.column)},[(0,l._)("div",null,(0,c.zw)(e.startTime)+" - "+(0,c.zw)(e.endTime),1),e.leaveUnit?((0,l.wg)(),(0,l.iD)("div",Lm,["D"===e.leaveUnit.calcUnit?((0,l.wg)(),(0,l.iD)("span",Rm,"Leave: "+(0,c.zw)(e.leaveUnit.daysAppliedFor)+" day",1)):((0,l.wg)(),(0,l.iD)("span",jm,"Leave: "+(0,c.zw)(e.leaveUnit.hoursAppliedFor)+" hours",1))])):(0,l.kq)("",!0)],4)})),256))])):(0,l.kq)("",!0)],64)})),256))])])}var Bm=(0,l.aZ)({name:"PrintableView",props:{scheduleWeek:{type:Object},weekDays:{type:Array}},methods:{getTotalHour:function(e){var t,a=0,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(s){i.e(s)}finally{i.f()}return a.toFixed(2)},printFlexSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("FlexSchedules").outerHTML,n=window.open("","Print",e),i=a(678).toString();n.document.write("<html>"),n.document.write("<head>"),n.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),n.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),n.document.write('<style type="text/css">'.concat(i,"</style>")),n.document.write("</head>"),n.document.write("<body>"),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),n.print(),n.close()}}});const Vm=(0,ue.Z)(Bm,[["render",Wm],["__scopeId","data-v-19c59d50"]]);var Zm=Vm,$m=function(e){return(0,l.dD)("data-v-05223cb4"),e=e(),(0,l.Cn)(),e},zm=$m((function(){return(0,l._)("div",{class:"d-flex justify-center"},[(0,l._)("h3",null,"Shift Coverage")],-1)})),Um={class:"mt-4 full-width"},Km=$m((function(){return(0,l._)("label",null,"Choose Date:",-1)})),Gm=["value"],qm={key:0,class:"d-flex justify-center mt-4"},Qm={key:0,class:"choose-date-info"},Jm={key:1,class:"choose-date-info"},Xm={class:"analysisChart"},ef={class:"axis-canvas",id:"myChartHeader",height:"39",ref:"myChartHeaderRef"},tf={class:"main-canvas-wrapper"},af={class:"main-canvas",ref:"myChartRef",id:"myChart",colours:"[ { fillColor: '#ffff00' }, { fillColor: '#0066ff' } ]"};function nf(e,t){var a=(0,l.up)("Modal"),n=(0,l.up)("date-picker");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(a,{ref:"ModalRef",onCancel:e.cancelModal,modalIndex:e.modalIndex},{header:(0,l.w5)((function(){return[zm]})),body:(0,l.w5)((function(){return[(0,l._)("div",Um,[(0,l._)("div",null,[Km,(0,l._)("input",{value:e.$filters.reformatDate(e.selectedDate),class:"d-inline-flex ma-0 pa-0 mr-2 ml-2 caption analysis-date-input",style:{"max-width":"120px"},onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.selectedDate)}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.selectedDate)}),"onClick:clear":t[2]||(t[2]=function(t){return e.toDate=null})},null,40,Gm)]),0===e.chartDatasets.length?((0,l.wg)(),(0,l.iD)("div",qm,[null===e.selectedDate?((0,l.wg)(),(0,l.iD)("h3",Qm,"Choose a day above to view the shift coverage")):0===e.chartDatasets.length?((0,l.wg)(),(0,l.iD)("h3",Jm,"There's no one scheduled on this day. Please choose another day.")):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l.wy)((0,l._)("div",Xm,[(0,l._)("canvas",ef,null,512),(0,l._)("div",tf,[(0,l._)("div",{class:"myChart-wrapper",style:(0,c.j5)({height:e.canvasHeight+"px"})},[(0,l._)("canvas",af,null,512)],4)])],512),[[i.F8,e.chartDatasets.length>0]])])]})),_:1},8,["onCancel","modalIndex"]),(0,l.Wm)(n,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.datePickerTargetDay},null,8,["top","leftInput","date"])],64)}var lf=a(1877),sf=(a(6961),null),of=(0,l.aZ)({name:"AnalysisChart",components:{Modal:Me,DatePicker:Na},props:{modalIndex:{type:Number}},data:function(){return{selectedDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:$e()(),chartLabels:[],chartDatasets:[],min:0,max:100,canvasHeight:1,myChartHeader:null}},setup:function(){var e=(0,_a.iH)(),t=(0,_a.iH)();return{myChartRef:e,myChartHeaderRef:t}},methods:{toggleShow:function(){this.$refs.ModalRef.toggleShow()},updateDateText:function(e,t){this.selectedDate=$e()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t){var a=this,n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=this.selectedDate,this.dateModal=!0,this.openDatePicker().then((function(e){a.prepareChartData()})).catch((function(e){console.log("err",e)}))},openDatePicker:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return a=t.sent,e.selectedDate=a,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getData:function(e){return this.getDateData(e,e)},getDateData:function(e,t){var a=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={},e&&t&&(i={employeeNo:Affinity.user.EmployeeNo,startDate:e.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD"),forManagedEmployees:!0}),n.abrupt("return",re.GetFlexSchedules(i).then((function(e){return e.FlexSchedules.filter((function(e){return!!a.$store.state.EmployeeModule.filteredEmployees.find((function(t){return t.employeeNo===e.EmployeeNo}))}))})));case 3:case"end":return n.stop()}}),n)})))()},staticWorkersPerHour:function(e){var t,a=e.map((function(e){return[$e()(e[0]),$e()(e[1])]})),i=Array(24).fill(0),l=(0,n.Z)(a);try{for(l.s();!(t=l.n()).done;)for(var s=t.value,o=s[0],r=s[1],c=o.hour(),u=r.diff(o,"hour"),d=0;d<c+u;d++)d>=c&&(i[d]=i[d]+1)}catch(h){l.e(h)}finally{l.f()}return i},prepareChartData:function(){var e=this,t=$e()(this.selectedDate);va.loading(),this.getData(t).then((function(a){va.clear();var i,l=a,s=new Map,o=(0,n.Z)(l);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r&&r.StartTime&&r.EndTime){var c=r.EmployeeName,u=$e()(r.StartTime),d=$e()(r.EndTime),h=t.clone();h.hour(u.hour()),h.minutes(u.minutes());var m=t.clone();m.hour(d.hours()),m.minutes(d.minutes());var f=[h.toISOString(),m.toISOString()];s.set(c,f)}}}catch(C){o.e(C)}finally{o.f()}var p=(0,Sc.Z)(s.keys()),y=(0,Sc.Z)(s.values());e.chartDatasets=y;var g=e.staticWorkersPerHour(y),D=$e()(t).startOf("day").valueOf(),v=$e()(t).endOf("day").valueOf();if(e.canvasHeight=30*p.length+100,sf)if(p.length<=0){var w=e.myChartHeaderRef.getContext("2d");w.clearRect(0,0,e.myChartHeaderRef.width,e.myChartHeaderRef.height),console.info("destroy chart"),sf.destroy(),sf=null}else console.info("update chart"),sf.options.scales.x.min=D,sf.options.scales.x.max=v,sf.options.scales.x1.ticks={callback:function(e,t,a){return g[t]}},sf.data.labels=p,sf.data.datasets[0].data=y,p.length<=0&&(sf.data.labels=[],sf.data.datasets=[],sf.options.scales.x.min=0,sf.options.scales.x.max=1),sf.update();else if(p.length<=0);else{console.info("create new chart");var b=document.getElementById("myChart").getContext("2d"),S=e,k={type:"bar",data:{labels:p,datasets:[{label:"Work Hours",data:y,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:2,borderSkipped:!1}]},grouped:!1,options:{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:window.devicePixelRatio,indexAxis:"y",scales:{y:{stacked:!1},x:{id:"xAxis2",backgroundColor:"#ffffff",position:"top",type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},title:{display:!0,text:"Time"},min:D,max:v,ticks:{stepSize:5e5}},x1:{id:"xAxis1",type:"time",position:"bottom",gridLines:{drawOnChartArea:!1},time:{unit:"hour",displayFormats:{hour:"HH:mm:ss"}},min:D,max:v,title:{display:!0,text:"Working Employees / Hour"},ticks:{callback:function(e,t,a){return g[t]}}}},plugins:{title:{display:!1},legend:{display:!1},tooltip:{usePointStyle:!0,callbacks:{label:function(e){var t=e.raw;return" ".concat($e()(t[0]).format("HH:mm")," - ").concat($e()(t[1]).format("HH:mm"))},labelPointStyle:function(e){return{pointStyle:"triangle",rotation:0}}}}},animation:{onComplete:function(e){var t=this.ctx.canvas,a=window.devicePixelRatio,n=this.canvas.width,i=this.scales.x.height*a,l=S.myChartHeaderRef.getContext("2d"),s=document.getElementById("myChartHeader");s.style.width=this.canvas.width/a+"px",s.style.height=i/a+"px",s.width=Math.floor(this.canvas.width),s.height=Math.floor(i),l.scale(a,a),l.drawImage(t,0,0,n,i,0,0,n/a,i/a)}}}};sf=new lf.Z(b,k)}})).catch((function(){va.clear(),va.alert("Something Wrong. Please try again later")}))},cancelModal:function(){sf&&(sf.destroy(),sf=null,this.selectedDate=null,this.canvasHeight=1,this.chartDatasets=[])}},beforeUnmount:function(){sf&&(sf.destroy(),sf=null,this.selectedDate=null,this.canvasHeight=1,this.chartDatasets=[])}});const rf=(0,ue.Z)(of,[["render",nf],["__scopeId","data-v-05223cb4"]]);var cf=rf;function uf(e){return{id:e.id,startTime:e.startTime,endTime:e.endTime,hours:e.hours,date:e.date,isPaid:e.isPaid,scheduleType:e.scheduleType,dayInWeek:e.dayInWeek,publishStatus:e.publishStatus,breakLength:e.scheduleDetail.breakLength,position:e.scheduleDetail.position,positionTitle:e.scheduleDetail.positionTitle,shiftId:e.scheduleDetail.shiftId}}function df(e,t,a,i){var l,s=a.flexSchedules,o=new Map,r=(0,n.Z)(t);try{for(r.s();!(l=r.n()).done;){var c=l.value,u=(0,We.Z)({},c);u.show=!0,o.set(c.employeeNo,u)}}catch(y){r.e(y)}finally{r.f()}var d,h=(0,n.Z)(s);try{for(h.s();!(d=h.n()).done;){var m=d.value,f=o.get(m.EmployeeNo);if(f&&!f.sche)f.sche=[uf(m)];else if(f){var p=uf(m);f.sche.push(p)}}}catch(y){h.e(y)}finally{h.f()}return o}function hf(e,t,a,i){var l,s=a.flexSchedules,o=new Map,r=(0,n.Z)(t);try{for(r.s();!(l=r.n()).done;){var c=l.value,u=(0,We.Z)({},c);u.show=!0,o.set(c.employeeNo,u)}}catch(D){r.e(D)}finally{r.f()}var d,h=(0,n.Z)(s);try{for(h.s();!(d=h.n()).done;){var m=d.value,f=o.get(m.EmployeeNo);f&&(f.sche=uf(m))}}catch(D){h.e(D)}finally{h.f()}var p,y=(0,n.Z)(o.values());try{for(y.s();!(p=y.n()).done;){var g=p.value;g.sche||(g.sche={},g.sche.dayInWeek=0,g.sche.employeeName=g.employeeName,g.sche.employeeNo=g.employeeNo),g.sche.allowCreateOrEdit=!0,g.sche.editing=!1}}catch(D){y.e(D)}finally{y.f()}return o}function mf(e,t,a){var i,l=(0,n.Z)(t);try{for(l.s();!(i=l.n()).done;){var s=i.value;if(s.leaveUnits){var o,r=(0,n.Z)(s.leaveUnits);try{for(r.s();!(o=r.n()).done;){var c,u=o.value,d=$e()(u.leaveDate).diff(e,"days");d<0||(u.calcUnit=s.calcUnit,u.leaveCode=s.leaveCode,u.leaveName=s.leaveName,null!==(c=a.get(s.employeeNo))&&void 0!==c&&c.sche[d]&&(a.get(s.employeeNo).sche[d].leaveUnit=u))}}catch(h){r.e(h)}finally{r.f()}}}}catch(h){l.e(h)}finally{l.f()}}function ff(e,t){var a,i=(0,n.Z)(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l.leaveUnits){var s,o=(0,n.Z)(l.leaveUnits);try{for(o.s();!(s=o.n()).done;){var r,c=s.value;c.calcUnit=l.calcUnit,c.leaveCode=l.leaveCode,c.leaveName=l.leaveName,null!==(r=t.get(l.employeeNo))&&void 0!==r&&r.sche&&(t.get(l.employeeNo).sche.leaveUnit=c)}}catch(u){o.e(u)}finally{o.f()}}}}catch(u){i.e(u)}finally{i.f()}}function pf(e,t){var a,i=(0,n.Z)(e.unAvailabilities);try{for(i.s();!(a=i.n()).done;){var l=a.value,s=$e()(l.unavailabilityDate).day();t.get(l.employeeNo)&&t.get(l.employeeNo).sche&&t.get(l.employeeNo).sche[s]&&(t.get(l.employeeNo).sche[s].unAvailability=l)}}catch(o){i.e(o)}finally{i.f()}}function yf(e,t){var a,i=(0,n.Z)(e.unAvailabilities);try{for(i.s();!(a=i.n()).done;){var l=a.value;t.get(l.employeeNo)&&t.get(l.employeeNo).sche&&(t.get(l.employeeNo).sche.unAvailability=l)}}catch(s){i.e(s)}finally{i.f()}}function gf(e,t){$e()();var a,i=(0,n.Z)(t.values());try{for(i.s();!(a=i.n()).done;){for(var l=a.value,s=l.EmployeeName,o=l.EmployeeNo,r=function(e){var t=void 0;l.sche?t=l.sche.find((function(t){return t.dayInWeek===e})):l.sche=[],t||(0!==e||l.sche[0]&&null!==l.sche[0].dayInWeek&&void 0!==l.sche[0].dayInWeek?l.sche.push({dayInWeek:e,employeeName:s,employeeNo:o}):(l.sche[0]={},l.sche[0].dayInWeek=0,l.sche[0].employeeName=s,l.sche[0].employeeNo=o))},c=0;c<=6;c++)r(c);l.sche.sort((function(e,t){return e.dayInWeek-t.dayInWeek}));var u,d=(0,n.Z)(l.sche.entries());try{for(d.s();!(u=d.n()).done;){var h=(0,je.Z)(u.value,2),m=(h[0],h[1]);m.column="grid-column-start: ".concat(m.dayInWeek+4),m.allowCreateOrEdit=!0,m.editing=!1}}catch(f){d.e(f)}finally{d.f()}}}catch(f){i.e(f)}finally{i.f()}}var Df={prepareGridData:df,prepareGridDataMobile:hf,scheDaysToColumn:gf,addLeaveToGrid:mf,addUnAvaToGrid:pf,addUnAvaToGridMobile:yf,addLeaveToGridMobile:ff},vf=function(e){return(0,l.dD)("data-v-bdeb7434"),e=e(),(0,l.Cn)(),e},wf=vf((function(){return(0,l._)("div",null,[(0,l._)("h2",null,[(0,l._)("b",null,"Publish Flexi Schedule")])],-1)})),bf={class:"full-width mt-4"},Sf={key:0},kf=vf((function(){return(0,l._)("br",null,null,-1)})),Cf=(0,l.Uk)(" This will publish the schedule for all employees."),Af={key:1},xf={key:0},Tf=vf((function(){return(0,l._)("span",null,"Publish by individual employee(s)",-1)})),_f=[Tf],Ef={key:1},Mf={class:"container-half mt-4"},Ff=vf((function(){return(0,l._)("label",null,"Select Employees",-1)})),Nf=vf((function(){return(0,l._)("div",{class:"line-break mt-4"},null,-1)})),Pf={class:"d-flex justify-end full-width mt-4"};function Of(e,t){var a=(0,l.up)("multi-select"),n=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(n,{ref:"ModalRef","no-overflow-auto-body":!0},{header:(0,l.w5)((function(){return[wf]})),body:(0,l.w5)((function(){return[(0,l._)("div",bf,[(0,l._)("div",null,[!1===e.showPublishByEmployee?((0,l.wg)(),(0,l.iD)("span",Sf,[(0,l.Uk)("Are you sure you want to publish the schedule for week "+(0,c.zw)(e.selectedDate)+"? ",1),kf,Cf])):(0,l.kq)("",!0),!0===e.showPublishByEmployee?((0,l.wg)(),(0,l.iD)("span",Af,"Are you sure you want to publish the schedule for week "+(0,c.zw)(e.selectedDate)+"?",1)):(0,l.kq)("",!0)]),!1===e.showPublishByEmployee?((0,l.wg)(),(0,l.iD)("div",xf,[(0,l._)("button",{class:"text-button mt-4",onClick:t[0]||(t[0]=function(t){return e.showPublishByEmployee=!0})},_f)])):(0,l.kq)("",!0),!0===e.showPublishByEmployee?((0,l.wg)(),(0,l.iD)("div",Ef,[(0,l._)("div",Mf,[Ff,(0,l.Wm)(a,{class:"mt-2",targetString:"commonName",allowAll:!0,selectOptionInput:e.selectOptions},null,8,["selectOptionInput"])])])):(0,l.kq)("",!0),Nf])]})),footer:(0,l.w5)((function(){return[(0,l._)("div",Pf,[(0,l._)("button",{class:"blue xsmall white--text mr-2",onClick:t[1]||(t[1]=function(){return e.publish&&e.publish.apply(e,arguments)})},"Publish"),(0,l._)("button",{class:"orange xsmall white--text",onClick:t[2]||(t[2]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},"Cancel")])]})),_:1},512)}var Hf=(0,l.aZ)({name:"PublishDialog",components:{Modal:Me,MultiSelect:ph},data:function(){return{selectOptions:[],selectedDate:"",showPublishByEmployee:!1}},mounted:function(){this.showPublishByEmployee=!1,this.selectOptions=this.$store.getters[vi.getFilteredEmployees].slice()},methods:{selectOption:function(){},resetData:function(){this.showPublishByEmployee=!1},publish:function(){if(!this.showPublishByEmployee){var e=this.selectOptions.map((function(e){return e.employeeNo}));return this.$emit("publish",e),void this.$refs.ModalRef.toggleShow()}if(this.selectOptions[0].isAll&&this.selectOptions[0].isSelected)this.publishAllEmployee();else{var t=this.selectOptions.filter((function(e){return e.isSelected})).map((function(e){return e.employeeNo}));this.$emit("publish",t),this.$refs.ModalRef.toggleShow()}},publishAllEmployee:function(){var e=this.selectOptions.slice();e.shift();var t=e.map((function(e){return e.employeeNo}));this.$emit("publish",t),this.$refs.ModalRef.toggleShow()},cancel:function(){this.toggleShow()},setSelectedDate:function(e){this.selectedDate=e},toggleShow:function(){this.resetData(),this.selectOptions=this.$store.getters[vi.getFilteredEmployees].slice(),this.$refs.ModalRef.toggleShow()}}});const Yf=(0,ue.Z)(Hf,[["render",Of],["__scopeId","data-v-bdeb7434"]]);var If=Yf,Lf=function(e){return(0,l.dD)("data-v-2a5ab5cf"),e=e(),(0,l.Cn)(),e},Rf=Lf((function(){return(0,l._)("div",{class:"d-flex justify-center"},[(0,l._)("h2",null,[(0,l._)("b",null,"Cost Analysis")])],-1)})),jf={class:"d-flex justify-center mt-2"},Wf={key:0,class:"mt-4"},Bf=Lf((function(){return(0,l._)("h3",null,"No Cost Analysis Data",-1)})),Vf=[Bf],Zf={key:1,class:"mt-4 full-width costAnalaysisBody"},$f={class:"display-option"},zf={class:"cost-grid mt-4"},Uf=Lf((function(){return(0,l._)("div",{class:"table-cell"},null,-1)})),Kf={class:"table-cell"},Gf={key:0,class:"table-cell"},qf={key:0},Qf={key:1},Jf=Lf((function(){return(0,l._)("div",{class:"table-cell bold"}," Total ",-1)})),Xf={key:0},ep={key:1},tp={class:"mt-4"};function ap(e,t){var a=(0,l.up)("multi-select"),n=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(n,{ref:"ModalRef",onCancel:e.cancelModal,modalIndex:e.modalIndex},{header:(0,l.w5)((function(){return[Rf,(0,l._)("div",jf,[(0,l._)("h3",null,(0,c.zw)(e.weekStart)+" - "+(0,c.zw)(e.weekEnd),1)])]})),body:(0,l.w5)((function(){return[e.data[0]?((0,l.wg)(),(0,l.iD)("div",Zf,[(0,l._)("div",$f,[(0,l.Wm)(a,{class:"mt-4",selectOptionInput:e.displayOptions,targetString:"description","fixed-left":!1},null,8,["selectOptionInput"])]),(0,l._)("div",zf,[(0,l._)("div",{class:"day-arr cost-grid-heading",style:(0,c.j5)(e.getGridTemplateStyle())},[Uf,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.displayList,(function(e){return(0,l.wg)(),(0,l.iD)("div",Kf,(0,c.zw)(e.heading),1)})),256))],4),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.data,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:"day-arr",style:(0,c.j5)(e.getGridTemplateStyle())},[t.day?((0,l.wg)(),(0,l.iD)("div",Gf,(0,c.zw)(t.day),1)):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(e.displayList),(function(n){var i=(0,je.Z)(n,2),s=i[0],o=i[1];return(0,l.wg)(),(0,l.iD)("div",{class:(0,c.C_)(["table-cell",e.getDataStyle(e.calculatedData[a],s,o)])},[o.isCalculated?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",qf,"$")),(0,l._)("span",null,(0,c.zw)(t[s]),1),o.isCalculated?((0,l.wg)(),(0,l.iD)("span",Qf,"%")):(0,l.kq)("",!0)],2)})),256))],4)})),256)),(0,l._)("div",{class:"day-arr",style:(0,c.j5)(e.getGridTemplateStyle())},[Jf,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(e.displayList),(function(t){var a=(0,je.Z)(t,2),n=a[0],i=a[1];return(0,l.wg)(),(0,l.iD)("div",{class:(0,c.C_)(["table-cell bold",e.getDataStyle(e.totalInNumber,n,i)])},[i.isCalculated?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",Xf,"$")),(0,l._)("span",null,(0,c.zw)(e.total[n]),1),i.isCalculated?((0,l.wg)(),(0,l.iD)("span",ep,"%")):(0,l.kq)("",!0)],2)})),256))],4)])])):((0,l.wg)(),(0,l.iD)("div",Wf,Vf))]})),footer:(0,l.w5)((function(){return[(0,l._)("div",tp,[(0,l._)("button",{class:"orange small white--text",onClick:t[0]||(t[0]=function(){return e.toggleShow&&e.toggleShow.apply(e,arguments)})},"Close")])]})),_:1},8,["onCancel","modalIndex"])}a(4048);var np=a(6740),ip=a.n(np),lp=(0,l.aZ)({name:"CostAnalysisDialog",components:{Modal:Me,MultiSelect:ph},props:{dayFocus:{type:Object},modalIndex:{type:Number}},data:function(){return{selectedDate:null,data:[],calculatedData:[],total:{},totalInNumber:{},displayN:6,displayList:{},sourceDisplayList:{scheduled:{heading:"Scheduled",isDisplay:!0,isCalculated:!1},actual:{heading:"Actuals",isDisplay:!1,isCalculated:!1},budgeted:{heading:"Budgeted",isDisplay:!1,isCalculated:!1},sales:{heading:"Sales",isDisplay:!1,isCalculated:!1},scheduledVSBudgeted:{heading:"Scheduled vs Budgeted",isDisplay:!1,isCalculated:!0},actualsVSBudgeted:{heading:"Actuals vs Budgeted",isDisplay:!1,isCalculated:!0},actualsVSScheduled:{heading:"Actuals vs Scheduled",isDisplay:!1,isCalculated:!0},scheduledVSSales:{heading:"Scheduled vs Sales",isDisplay:!1,isCalculated:!0},actualsVSSales:{heading:"Actuals vs Sales",isDisplay:!1,isCalculated:!0}},weekStart:"",weekEnd:"",displayOptions:[{key:"scheduled",description:"Scheduled",isSelected:!0},{key:"actual",description:"Actuals",isSelected:!1},{key:"budgeted",description:"Budgeted",isSelected:!0},{key:"sales",description:"Sales",isSelected:!0},{key:"scheduledVSBudgeted",description:"Scheduled vs Budgeted",isSelected:!1},{key:"actualsVSBudgeted",description:"Actuals vs Budgeted",isSelected:!1},{key:"actualsVSScheduled",description:"Actuals vs Scheduled",isSelected:!1},{key:"scheduledVSSales",description:"Scheduled vs Sales",isSelected:!1},{key:"actualsVSSales",description:"Actuals vs Sales",isSelected:!1}]}},setup:function(){},computed:{comparedValue:function(){for(var e=[],t=0,a=Object.entries(this.displayList);t<a.length;t++){var n=(0,je.Z)(a[t],2),i=(n[0],n[1]);i.isDisplay&&e.push(i)}return e}},mounted:function(){var e=JSON.parse(localStorage.getItem("costAnalysisSetting_v1.2"));e&&(this.displayOptions=e)},watch:{displayOptions:{handler:function(e,t){var a=this;this.displayList={};for(var n=function(){var t=(0,je.Z)(l[i],2),n=t[0],s=t[1],o=e.find((function(e){return e.key===n}));o&&o.isSelected?(a.displayList[n]=s,a.displayList[n].isDisplay=o.isSelected):console.error("key not found",n)},i=0,l=Object.entries(this.sourceDisplayList);i<l.length;i++)n();localStorage.setItem("costAnalysisSetting_v1.2",JSON.stringify(e))},deep:!0}},methods:{getDataStyle:function(e,t,a){if(a.isCalculated)return"scheduledVSBudgeted"===t||"actualsVSBudgeted"===t?e[t]>0?"positive-cell":"negative-cell":void 0},getGridTemplateStyle:function(){return this.calculateDisplayRow(),this.displayN>1?"grid-template-columns: 100px repeat( ".concat(this.displayN," , 100px)"):"grid-template-columns: 100px repeat( ".concat(this.displayN," , auto)")},open:function(){var e=this;Object.keys(this.displayList).forEach((function(t){e.displayList[t].isDisplay=!1}));var t=this.dayFocus.clone().startOf("week").format("DD/MMM/YYYY");this.weekStart=t;var a=this.dayFocus.clone().endOf("week").format("DD/MMM/YYYY");this.weekEnd=a;var n=this.$store.getters[vi.getFilteredEmployees].map((function(e){return e.employeeNo})),i={employeeNumbers:n,dateFrom:t,dateTo:a};va.loading();for(var l=function(){var t=(0,je.Z)(o[s],2),a=t[0],n=t[1],i=e.displayOptions.find((function(e){return e.key===a}));i&&!0===i.isSelected?(e.displayList[a]=n,e.displayList[a].isDisplay=i.isSelected):console.error("key not found",a)},s=0,o=Object.entries(this.sourceDisplayList);s<o.length;s++)l();re.GetCostAnalysis(i).then((function(t){if(!t[0])return e.data=[],e.total=[],e.$refs.ModalRef.toggleShow(),void va.clear();var a=t.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));e.calculatedData=[],e.data=a.map((function(t){var a=(0,We.Z)({},t),n={};a.weekDay=$e()(t.date).format("dddd"),e.sourceDisplayList.scheduledVSBudgeted&&(a.scheduledVSBudgeted=e.calculateRatioPercentage(t.scheduled,t.budgeted)),e.sourceDisplayList.actualsVSBudgeted&&(a.actualsVSBudgeted=e.calculateRatioPercentage(t.actual,t.budgeted)),e.sourceDisplayList.actualsVSScheduled&&(a.actualsVSScheduled=e.calculateDiffPercentage(t.actual,t.scheduled)),e.sourceDisplayList.actualsVSSales&&(a.actualsVSSales=e.calculateRatioPercentage(t.actual,t.sales)),e.sourceDisplayList.scheduledVSSales&&(a.scheduledVSSales=e.calculateRatioPercentage(t.scheduled,t.sales));for(var i=0,l=Object.entries(a);i<l.length;i++){var s=(0,je.Z)(l[i],2),o=s[0],r=s[1];Number.isNaN(r)&&(a[o]=0),n[o]="day"===o||"dayNumber"===o?r:ip()(a[o]).format({symbol:""})}return e.calculatedData.push(a),n})),e.calculateTotal(),va.clear(),e.$refs.ModalRef.toggleShow()})).catch((function(t){e.data=[],e.total=[]}))},calculateTotal:function(){var e=[];this.totalInNumber={};for(var t=0,a=Object.entries(this.sourceDisplayList);t<a.length;t++){var i=(0,je.Z)(a[t],2),l=i[0];i[1];e.push(l)}if(1!==e.length){for(var s=0,o=e;s<o.length;s++){var r=o[s];this.totalInNumber[r]=0;var c,u=(0,n.Z)(this.calculatedData);try{for(u.s();!(c=u.n()).done;){var d=c.value;d[r]||(d[r]=0),this.totalInNumber[r]=this.totalInNumber[r]+d[r]}}catch(g){u.e(g)}finally{u.f()}}this.sourceDisplayList.scheduledVSBudgeted&&(this.totalInNumber.scheduledVSBudgeted=this.calculateRatioPercentage(this.totalInNumber.scheduled,this.totalInNumber.budgeted)),this.sourceDisplayList.actualsVSBudgeted&&(this.totalInNumber.actualsVSBudgeted=this.calculateRatioPercentage(this.totalInNumber.actual,this.totalInNumber.budgeted)),this.sourceDisplayList.actualsVSScheduled&&(this.totalInNumber.actualsVSScheduled=this.calculateDiffPercentage(this.totalInNumber.actual,this.totalInNumber.scheduled)),this.sourceDisplayList.actualsVSSales&&(this.totalInNumber.actualsVSSales=this.calculateRatioPercentage(this.totalInNumber.actual,this.totalInNumber.sales)),this.sourceDisplayList.scheduledVSSales&&(this.totalInNumber.scheduledVSSales=this.calculateRatioPercentage(this.totalInNumber.scheduled,this.totalInNumber.sales));for(var h=0,m=Object.entries(this.totalInNumber);h<m.length;h++){var f=(0,je.Z)(m[h],2),p=f[0],y=f[1];Number.isNaN(y)&&(this.totalInNumber[p]=0),this.total[p]=ip()(this.totalInNumber[p]).format({symbol:""})}}else this.totalInNumber[e[0]]=Math.round(100*this.calculatedData[0][e[0]])/100},calculateDiffPercentage:function(e,t){return t?(e-t)/t*100:0},calculateRatioPercentage:function(e,t){return t?e/t*100:0},calculateDisplayRow:function(){this.displayN=this.displayOptions.filter((function(e){return e.isSelected})).length},toggleShow:function(){this.data=[],this.total=[],this.calculatedData=[],this.$refs.ModalRef.toggleShow()},cancelModal:function(){this.data=[],this.total=[],this.calculatedData=[]}}});const sp=(0,ue.Z)(lp,[["render",ap],["__scopeId","data-v-2a5ab5cf"]]);var op=sp,rp=(a(2526),a(1817),function(e){return(0,l.dD)("data-v-84a3e7f6"),e=e(),(0,l.Cn)(),e}),cp={class:"cell-config-list"},up={class:"custom-select",tabindex:"1"},dp=rp((function(){return(0,l._)("div",{class:"custom-select-selected"}," Select Cost Center ",-1)})),hp={class:"custom-select-items"},mp=["onClick"],fp={class:"cell-config"},pp=["onUpdate:modelValue"];function yp(e,t,a,n,s,o){var r=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",cp,[(0,l._)("div",null,[(0,l._)("div",up,[dp,(0,l._)("div",hp,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.costCenterOptions,(function(t,a){return(0,l.wg)(),(0,l.iD)("div",{class:"custom-select-item",key:a,onClick:function(a){e.checkOptions(t)}},[(0,l._)("div",fp,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("label",null,[(0,l.Uk)((0,c.zw)(t.description),1)])),[[r,{content:t.description},void 0,{top:!0}]]),(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":function(e){return t.selected=e}},null,8,pp),[[i.e8,t.selected]])])],8,mp)})),128))])])])])}var gp=(0,l.aZ)({name:"FlexScheduleCostCenter",props:{costCenterOptions:{type:Array}},setup:function(){var e=(0,Le.oR)(),t=(0,_a.iH)(!1),a=(0,_a.iH)([]),n=e.state.LookUp.costCenters;return{open:t,costCenters:n,optionSelected:a}},methods:{checkOptions:function(e){if(e.selected=!e.selected,-1===e.costCentreId&&this.costCenterOptions){var t,a=(0,n.Z)(this.costCenterOptions);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.selected=!1}}catch(l){a.e(l)}finally{a.f()}this.costCenterOptions[0].selected=!0}else this.costCenterOptions[0].selected=!1;this.$emit("selectOption",this.costCenterOptions)}}});const Dp=(0,ue.Z)(gp,[["render",yp],["__scopeId","data-v-84a3e7f6"]]);var vp,wp=Dp;(function(e){e["empty"]="",e["draft"]="draft",e["published"]="published",e["partial"]="partial"})(vp||(vp={}));var bp=(0,l.aZ)({name:"FlexSchedule",components:{FlexScheduleCostCenter:wp,CostAnalysisDialog:op,AnalysisChart:cf,PrintableView:Zm,DraftCreationDialog:Dh,DatePicker:Na,TimePicker:yd,EditFlexSchedule:Su,DayCell:Gu,FlexScheduleCellControl:od,Icon:gd.JO,AutoComplete:Hi,ExtraEmpDetail:Am,PublishDialog:If,CustomSelect:tl},data:function(){return{dayFocus:$e()(),weekDays:[],datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map,weekStatus:vp.empty,showControl:!1,extraEmpDetail:[],isAdmin:!1,hasFuturePaidDate:!1,costCenterOptions:[]}},setup:function(){var e=(0,nt.tv)();window.innerWidth<1010&&e.push({name:"FlexScheduleMobile"});var t=(0,_a.iH)(),a=(0,_a.iH)(),n=(0,_a.iH)(),i=(0,_a.iH)(),l=(0,_a.iH)(),s=(0,_a.iH)(),o=(0,_a.iH)(),r=(0,_a.iH)(!1),c=(0,_a.iH)([]);function u(){o.value.open()}function d(){t.value.toggleShow()}function h(){l.value.toggleShow()}function m(){s.value.toggleShow()}function f(e){r.value=e,a.value.openEdit()}function p(e){va.loading(),re.GetEmployeeExtraDetail(e).then((function(e){c.value=e.map((function(e){return"DateTime"===e.InputType?(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=$e()(e.KeyValue).format("ddd DD MMM YYYY"),e.Value=$e()(e.Value).format("ddd DD MMM YYYY")):"Double"===e.InputType&&(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=Math.round(100*e.KeyValue)/100,e.Value=Math.round(100*e.Value)/100),e})),va.clear(),n.value.toggleShow()}),(function(e){va.clear(),va.alert("Something went wrong")}))}function y(){i.value.printFlexSchedule()}return{openDraftDialog:d,openEditDialog:f,openEmployeeDetail:p,openAnalysisChart:h,printFlexSchedule:y,openPublishDialog:m,openCostAnalysis:u,DraftCreationDialogRef:t,EditModalRef:a,ExtraEmpDetailRef:n,PrintableViewRef:i,AnalysisChartRef:l,PublishDialogRef:s,CostAnalysisDialogRef:o,isEditingDialog:r,externalDetail:c}},mounted:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(bu.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(bu.getShifts),e.$store.dispatch(bu.getCostElement),e.$store.dispatch(bu.getWorkTypes),a=e.dayFocus.clone().startOf("week"),n=e.dayFocus.clone().endOf("week"),e.loadDate(a,n),re.GetDefaultWorkTypes().then((function(t){e.$store.state.FlexSchedule.defaultWorkTypes=t})),Affinity.user.EmployeeNo>=5e6&&(e.isAdmin=!0);case 9:case"end":return t.stop()}}),t)})))()},methods:{showCopy:function(){return!this.hasFuturePaidDate&&$e()().diff(this.dayFocus.endOf("week"),"day")<=0},reloadAfterEdit:function(){var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.refreshScheduleData(e,t)},getCurrentWeekStatus:function(){return this.weekStatus===vp.empty||this.weekStatus===vp.draft?"Draft":this.weekStatus===vp.partial?"Partially Published":this.weekStatus===vp.published?"Published":this.weekStatus},loadDate:function(e,t){var a=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var i,l,s,o,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.weekStatus=vp.empty,a.showControl=!1,a.hasFuturePaidDate=!1,i={managerEmployeeNo:Affinity.user.EmployeeNo,dateFrom:e.format("YYYY-MM-DD"),dateTo:t.format("YYYY-MM-DD")},va.loading(),n.next=7,Promise.all([a.$store.dispatch(He.loadFlexiSchedules,{startDate:e,endDate:t}),re.GetManagedLeaves(i),a.$store.dispatch(bi.getEmployees,Affinity.user.EmployeeNo)]).finally((function(){va.clear()}));case 7:l=n.sent,s=(0,je.Z)(l,3),o=s[0],r=s[1],c=s[2],va.clear(),a.setupGridData(o,r,c,e),a.$store.state.FlexSchedule.leaveList=r,a.setupDate(e),a.checkStatus(a.scheduleWeekMap),a.setupCostCenterList(c);case 18:case"end":return n.stop()}}),n)})))()},refreshScheduleData:function(e,t){var a=this;return(0,b.Z)(regeneratorRuntime.mark((function i(){var l,s,o,r,c,u,d,h,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.weekStatus=vp.empty,a.showControl=!1,a.hasFuturePaidDate=!1,va.loading(),i.next=6,a.$store.dispatch(He.loadFlexiSchedules,{startDate:e,endDate:t});case 6:l=i.sent,va.clear(),a.setupGridData(l,a.$store.state.FlexSchedule.leaveList,a.$store.getters[vi.getEmployees],e),a.checkStatus(a.scheduleWeekMap),s=(0,n.Z)(a.scheduleWeekMap.entries());try{for(s.s();!(o=s.n()).done;)r=(0,je.Z)(o.value,2),r[0],c=r[1],c.show=!1}catch(f){s.e(f)}finally{s.f()}u=(0,n.Z)(a.$store.state.EmployeeModule.filteredEmployees);try{for(u.s();!(d=u.n()).done;)h=d.value,m=a.scheduleWeekMap.get(h.employeeNo),m.show=!0}catch(f){u.e(f)}finally{u.f()}case 14:case"end":return i.stop()}}),i)})))()},setupGridData:function(e,t,a,n){var i=Df.prepareGridData(n,a,e,t);Df.scheDaysToColumn(n,i),Df.addLeaveToGrid(n,t,i),Df.addUnAvaToGrid(e,i),this.scheduleWeekMap=this.$store.state.FlexSchedule.scheduleWeek=i},setupDate:function(e){this.$store.state.FlexSchedule.calendarFocusDate=this.dayFocus,this.weekDays=this.getSelectedWeek(e)},setupCostCenterList:function(e){var t=this,a=e.map((function(e){return e.cost1})),n=(0,Sc.Z)(new Set(a));this.$store.dispatch(bu.getCostCenters,n).then((function(){t.costCenterOptions=t.$store.state.LookUp.costCenters,t.costCenterOptions=t.costCenterOptions.map((function(e){return e.selected=!1,e})),t.costCenterOptions.unshift({costCentreId:-1,description:"All",selected:!0})}))},selectCostCenter:function(e){this.costCenterOptions.filter((function(e){return e.selected}));var t=e.map((function(e){return!!e.selected&&e.costCentreId}));if(t.find((function(e){return-1===e}))){var a,i=(0,n.Z)(this.scheduleWeekMap.entries());try{for(i.s();!(a=i.n()).done;){var l=(0,je.Z)(a.value,2),s=(l[0],l[1]);s.show=!0}}catch(y){i.e(y)}finally{i.f()}this.$store.state.EmployeeModule.filteredEmployees=this.$store.state.EmployeeModule.employees}else{var o=this.$store.state.EmployeeModule.employees.filter((function(e){return!!t.find((function(t){return t===e.cost1}))}));this.$store.state.EmployeeModule.filteredEmployees=o;var r,c=(0,n.Z)(this.scheduleWeekMap.entries());try{for(c.s();!(r=c.n()).done;){var u=(0,je.Z)(r.value,2),d=(u[0],u[1]);d.show=!1}}catch(y){c.e(y)}finally{c.f()}var h,m=(0,n.Z)(o);try{for(m.s();!(h=m.n()).done;){var f=h.value,p=this.scheduleWeekMap.get(f.employeeNo);p.show=!0}}catch(y){m.e(y)}finally{m.f()}}},checkStatus:function(e){var t,a=new Set,i=(0,n.Z)(e.values());try{for(i.s();!(t=i.n()).done;){var l=t.value;l.empSchePublishState="";var s,o=(0,n.Z)(l.sche);try{for(o.s();!(s=o.n()).done;){var r=s.value;r.publishStatus&&(r.publishStatus===vp.draft?l.empSchePublishState=vp.draft:r.publishStatus===vp.published&&(l.empSchePublishState=vp.published)),!this.hasFuturePaidDate&&r.isPaid&&$e()(0,"HH").diff($e()(r.date),"days")<=-1&&(this.hasFuturePaidDate=!0)}}catch(u){o.e(u)}finally{o.f()}""===l.empSchePublishState?a.add(vp.empty):a.add(l.empSchePublishState);var c=l.sche.find((function(e){return"Personal"===e.scheduleType||"Team"===e.scheduleType}));c&&(l.includeTeamOrPersonal=!0)}}catch(u){i.e(u)}finally{i.f()}a.has(vp.published)?a.has(vp.draft)&&a.has(vp.published)||a.has(vp.empty)&&a.has(vp.published)?this.weekStatus=vp.partial:this.weekStatus=vp.published:this.weekStatus=vp.draft},chooseCalendarDate:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.datePickerTop=n.bottom,t.datePickerLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:i=a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.abrupt("return");case 12:return a.next=14,t.selectDate(i);case 14:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectDate:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,n=e.clone().startOf("week"),i=e.clone().endOf("week"),a.next=6,t.loadDate(n,i);case 6:case"end":return a.stop()}}),a)})))()},getSelectedWeek:function(e){for(var t=e.clone().startOf("week"),a=(e.clone().endOf("week"),[]),n=0;n<=6;n++){var i=$e()(t).add(n,"days");a.push({momentDay:i,day:i.format("ddd, MMM Do")})}return a},getLastWeek:function(){this.dayFocus.subtract(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},getNextWeek:function(){this.dayFocus.add(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},moreDetail:function(e){this.$store.commit(Ye.setScheduleDay,e)},getTotalHour:function(e){var t,a=0,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(s){i.e(s)}finally{i.f()}return a.toFixed(2)},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},selectEmployeeAndPublish:function(){this.PublishDialogRef.setSelectedDate(this.dayFocus.week().toString()),this.openPublishDialog()},publishCurrentWeek:function(e){var t=this,a=this.dayFocus.clone().startOf("week"),n=this.dayFocus.clone().endOf("week"),i={EmployeeNumbers:e,DateFrom:a.format("YYYY-MM-DD"),DateTo:n.format("YYYY-MM-DD")};va.loading(),re.PublishFlexSchedule(i).then((function(){va.clear(),t.reloadAfterEdit()}),(function(e){408!=e.response.status?(console.error(e),va.alert("Something went wrong.")):va.alert("Your schedules are being published. This process can take a few minutes. You will need to refresh your screen to see the published schedules.")}))},changeDisplayControl:function(){this.showControl=!this.showControl}}});const Sp=(0,ue.Z)(bp,[["render",bc],["__scopeId","data-v-46f8d0e2"]]);var kp,Cp=Sp,Ap=function(e){return(0,l.dD)("data-v-22b7800c"),e=e(),(0,l.Cn)(),e},xp={class:"mt-4"},Tp=(0,l.uE)('<div class="left-box ml-2" data-v-22b7800c><div class="background-legend" data-v-22b7800c><div data-v-22b7800c><div class="flexi-legend" data-v-22b7800c></div><div class="legend-label" data-v-22b7800c>Flexi Schedule</div></div><div class="ml-4" data-v-22b7800c><div class="team-legend" data-v-22b7800c></div><div class="legend-label" data-v-22b7800c>Team Schedule</div></div><div class="ml-4" data-v-22b7800c><div class="personal-legend" data-v-22b7800c></div><div class="legend-label" data-v-22b7800c>Personal Schedule</div></div></div></div>',1),_p={class:"weekDetail d-flex align-center justify-center"},Ep={class:"mt-4",style:{overflow:"auto"}},Mp={class:"flex-sche-table"},Fp=Ap((function(){return(0,l._)("div",{class:"table-head"},[(0,l._)("div",{class:"schedule-head-grid"},[(0,l._)("div",{class:"table-cell"},"Employee"),(0,l._)("div",{class:"table-cell"},"Schedule")])],-1)})),Np={class:"table-body"},Pp={class:"schedules-arr"},Op=["onClick"],Hp={key:0,class:"published-icon"},Yp=Ap((function(){return(0,l._)("span",null,"P",-1)})),Ip=[Yp],Lp={class:"content-cell"};function Rp(e,t){var a=(0,l.up)("Icon"),n=(0,l.up)("day-cell"),i=(0,l.up)("perfect-scrollbar"),s=(0,l.up)("edit-flex-schedule"),o=(0,l.up)("date-picker"),r=(0,l.up)("extra-emp-detail");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",xp,[Tp,(0,l._)("div",_p,[(0,l._)("span",{class:"arrow-height mr-4",onClick:t[0]||(t[0]=function(t){return e.getLastDate()})},[(0,l.Wm)(a,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#0000008a"}},null,8,["icon"])]),(0,l._)("span",{onClick:t[1]||(t[1]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},(0,c.zw)(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+(0,c.zw)(e.dayFocus.format("DD/MM/YYYY")),1),(0,l._)("span",{class:"arrow-height ml-4",onClick:t[2]||(t[2]=function(t){return e.getNextDate()})},[(0,l.Wm)(a,{icon:e.$icons.chevronRight,height:"30",style:{color:"#0000008a"}},null,8,["icon"])])])]),(0,l._)("div",Ep,[(0,l._)("div",Mp,[Fp,(0,l.Wm)(i,null,{default:(0,l.w5)((function(){return[(0,l._)("div",Np,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scheduleWeekMap.keys(),(function(t){return(0,l.wg)(),(0,l.iD)("div",Pp,[(0,l._)("div",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},[(0,l._)("span",null,(0,c.zw)(e.scheduleWeekMap.get(t).employeeName),1),"published"===e.scheduleWeekMap.get(t).empSchePublishState?((0,l.wg)(),(0,l.iD)("span",Hp,Ip)):(0,l.kq)("",!0)],8,Op),(0,l._)("div",Lp,[(0,l.Wm)(n,{scheDay:e.scheduleWeekMap.get(t).sche,employeeNo:e.scheduleWeekMap.get(t).employeeNo,employeeName:e.scheduleWeekMap.get(t).employeeName,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","employeeNo","employeeName","onOpenEditDialog"])])])})),256))])]})),_:1})])]),(0,l._)("div",null,[(0,l.Wm)(s,{ref:"EditModalRef",isEdit:e.isEditingDialog,weekStatus:e.weekStatus,modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["isEdit","weekStatus","onReload"]),(0,l.Wm)(o,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"]),(0,l.Wm)(r,{ref:"ExtraEmpDetailRef",externalDetail:e.externalDetail},null,8,["externalDetail"])])],64)}(function(e){e["empty"]="",e["draft"]="draft",e["published"]="published",e["partial"]="partial"})(kp||(kp={}));var jp=(0,l.aZ)({name:"FlexScheduleM",components:{CostAnalysisDialog:op,AnalysisChart:cf,PrintableView:Zm,DraftCreationDialog:Dh,DatePicker:Na,TimePicker:yd,EditFlexSchedule:Su,DayCell:Gu,FlexScheduleCellControl:od,Icon:gd.JO,AutoComplete:Hi,ExtraEmpDetail:Am,PublishDialog:If},data:function(){return{dayFocus:$e()(),weekDays:[],datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map,weekStatus:kp.empty,showControl:!1,extraEmpDetail:[],isAdmin:!1,hasFuturePaidDate:!1}},setup:function(){var e=(0,_a.iH)(),t=(0,_a.iH)(),a=(0,_a.iH)(!1),n=(0,_a.iH)([]),i=(0,nt.tv)();function l(t){a.value=t,e.value.openEdit()}function s(e){va.loading(),re.GetEmployeeExtraDetail(e).then((function(e){n.value=e.map((function(e){return"DateTime"===e.InputType?(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=$e()(e.KeyValue).format("ddd DD MMM YYYY"),e.Value=$e()(e.Value).format("ddd DD MMM YYYY")):"Double"===e.InputType&&(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=Math.round(100*e.KeyValue)/100,e.Value=Math.round(100*e.Value)/100),e})),va.clear(),t.value.toggleShow()}),(function(e){va.clear(),va.alert("Something went wrong")}))}return window.innerWidth>=1010&&i.push({name:"Flex Schedule"}),{openEditDialog:l,openEmployeeDetail:s,EditModalRef:e,ExtraEmpDetailRef:t,isEditingDialog:a,externalDetail:n}},mounted:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(bu.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(bu.getShifts),e.$store.dispatch(bu.getCostElement),e.$store.dispatch(bu.getWorkTypes),e.loadDate(),re.GetDefaultWorkTypes().then((function(t){e.$store.state.FlexSchedule.defaultWorkTypes=t})),Affinity.user.EmployeeNo>=5e6&&(e.isAdmin=!0);case 7:case"end":return t.stop()}}),t)})))()},methods:{showCopy:function(){return!this.hasFuturePaidDate&&$e()().diff(this.dayFocus.endOf("week"),"day")<=0},reloadAfterEdit:function(){this.loadDate()},getCurrentWeekStatus:function(){return this.weekStatus===kp.empty||this.weekStatus===kp.draft?"Draft":this.weekStatus===kp.partial?"Partially Published":this.weekStatus===kp.published?"Published":this.weekStatus},loadDate:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var a,n,i,l,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.weekStatus=kp.empty,e.showControl=!1,e.hasFuturePaidDate=!1,a={managerEmployeeNo:Affinity.user.EmployeeNo,dateFrom:e.dayFocus.format("YYYY-MM-DD"),dateTo:e.dayFocus.format("YYYY-MM-DD")},va.loading(),t.next=7,Promise.all([e.$store.dispatch(He.loadFlexiSchedules,{startDate:e.dayFocus,endDate:e.dayFocus}),re.GetManagedLeaves(a),e.$store.dispatch(bi.getEmployees,Affinity.user.EmployeeNo).then((function(e){return e.map((function(e){return{employeeName:e.commonName,employeeNo:e.employeeNo,stdHoursPerWeek:e.stdHoursPerWeek,positionCode:e.positionCode}}))}))]).finally((function(){va.clear()}));case 7:n=t.sent,i=(0,je.Z)(n,3),l=i[0],s=i[1],o=i[2],va.clear(),r=Df.prepareGridDataMobile(e.dayFocus,o,l,s),e.scheduleWeekMap=r,Df.addUnAvaToGridMobile(l,r),Df.addLeaveToGridMobile(s,r);case 17:case"end":return t.stop()}}),t)})))()},checkStatus:function(e){var t,a=new Set,i=(0,n.Z)(e.values());try{for(i.s();!(t=i.n()).done;){var l=t.value;l.empSchePublishState="";var s,o=(0,n.Z)(l.sche);try{for(o.s();!(s=o.n()).done;){var r=s.value;r.publishStatus&&(r.publishStatus===kp.draft?l.empSchePublishState=kp.draft:r.publishStatus===kp.published&&(l.empSchePublishState=kp.published)),!this.hasFuturePaidDate&&r.isPaid&&$e()(0,"HH").diff($e()(r.date),"days")<=-1&&(this.hasFuturePaidDate=!0)}}catch(c){o.e(c)}finally{o.f()}""===l.empSchePublishState?a.add(kp.empty):a.add(l.empSchePublishState)}}catch(c){i.e(c)}finally{i.f()}a.has(kp.published)?a.has(kp.draft)&&a.has(kp.published)||a.has(kp.empty)&&a.has(kp.published)?this.weekStatus=kp.partial:this.weekStatus=kp.published:this.weekStatus=kp.draft},chooseCalendarDate:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.datePickerTop=n.bottom,t.datePickerLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:i=a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.abrupt("return");case 12:return a.next=14,t.selectDate(i);case 14:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectDate:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,a.next=4,t.loadDate();case 4:case"end":return a.stop()}}),a)})))()},getSelectedWeek:function(e){for(var t=e.clone().startOf("week"),a=(e.clone().endOf("week"),[]),n=0;n<=6;n++){var i=$e()(t).add(n,"days");a.push({momentDay:i,day:i.format("ddd, MMM Do")})}return a},getLastDate:function(){this.dayFocus=this.dayFocus.clone().subtract(1,"days"),this.$store.state.FlexSchedule.calendarFocusDate=this.dayFocus,this.loadDate()},getNextDate:function(){this.dayFocus=this.dayFocus.clone().add(1,"days"),this.$store.state.FlexSchedule.calendarFocusDate=this.dayFocus,this.loadDate()},moreDetail:function(e){this.$store.commit(Ye.setScheduleDay,e)},getTotalHour:function(e){var t,a=0,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(s){i.e(s)}finally{i.f()}return a.toFixed(2)},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},publishCurrentWeek:function(e){var t=this,a=this.dayFocus.clone().startOf("week"),n=this.dayFocus.clone().endOf("week"),i={EmployeeNumbers:e,DateFrom:a.format("YYYY-MM-DD"),DateTo:n.format("YYYY-MM-DD")};va.loading(),re.PublishFlexSchedule(i).then((function(){t.reloadAfterEdit(),va.clear()}),(function(e){console.error(e),va.alert("Something went wrong.")}))},changeDisplayControl:function(){this.showControl=!this.showControl}}});const Wp=(0,ue.Z)(jp,[["render",Rp],["__scopeId","data-v-22b7800c"]]);var Bp=Wp,Vp=function(e){return(0,l.dD)("data-v-af45cc2a"),e=e(),(0,l.Cn)(),e},Zp={class:"dbw-box"},$p=Vp((function(){return(0,l._)("p",{class:"mt-4"},[(0,l.Uk)("I am "),(0,l._)("b",null,"unavailable"),(0,l.Uk)(" during these times:")],-1)})),zp={class:"available-table"},Up={class:"service-grid"},Kp=(0,l.uE)('<div class="grid-heading" data-v-af45cc2a>Day of Week</div><div class="grid-heading" data-v-af45cc2a>Start Time</div><div class="grid-heading" data-v-af45cc2a>End Time</div><div class="grid-heading" data-v-af45cc2a>Repeat</div><div class="grid-heading" data-v-af45cc2a>Starts On</div><div class="grid-heading" data-v-af45cc2a>Ends On</div><div class="grid-heading" data-v-af45cc2a>Actions</div><div class="grid-heading" data-v-af45cc2a>Reason</div>',8),Gp={class:"grid-item"},qp={class:"grid-item"},Qp={class:"grid-item"},Jp={class:"grid-item"},Xp={class:"grid-item"},ey={class:"grid-item"},ty={class:"grid-item"},ay=["onClick"],ny=["onClick"],iy={class:"grid-item"},ly={class:"d-flex justify-end mt-4 mb-4"};function sy(e,t,a,n,i,s){var o=(0,l.up)("edit-availability");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Zp,[$p,(0,l._)("div",zp,[(0,l._)("div",Up,[Kp,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.girdData,(function(t){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Gp,(0,c.zw)(t.dayOfWeek),1),(0,l._)("div",qp,(0,c.zw)(t.startTime),1),(0,l._)("div",Qp,(0,c.zw)(t.endTime),1),(0,l._)("div",Jp,(0,c.zw)(t.frequencyType),1),(0,l._)("div",Xp,(0,c.zw)(t.startDate),1),(0,l._)("div",ey,(0,c.zw)(t.endDate),1),(0,l._)("div",ty,[(0,l._)("button",{class:"green white--text xsmall",onClick:function(a){return e.openEditDialog(!0,t)}},"Edit",8,ay),(0,l._)("button",{class:"grey white--text xsmall ml-2",onClick:function(a){return e.confirmDelete(t)}},"Delete",8,ny)]),(0,l._)("div",iy,(0,c.zw)(t.reason),1)],64)})),256))])]),(0,l._)("div",ly,[(0,l._)("button",{class:"green small white--text",onClick:t[0]||(t[0]=function(t){return e.openEditDialog(!1)})},"Create")])]),(0,l.Wm)(o,{ref:"EditAvailabilityRef",isEdit:e.isEditingDialog,onReload:e.loadAvailability,modalIndex:1999},null,8,["isEdit","onReload"])],64)}var oy=function(e){return(0,l.dD)("data-v-407b16c3"),e=e(),(0,l.Cn)(),e},ry={class:"bold"},cy={key:0},uy={key:1},dy={class:"edit-form mt-4 copy2"},hy=oy((function(){return(0,l._)("label",{class:"form-label"},"Start Time ",-1)})),my={class:"mt-2"},fy=oy((function(){return(0,l._)("label",{class:"form-label"},"End Time ",-1)})),py={class:"mt-4"},yy=oy((function(){return(0,l._)("label",{class:"form-label"},"Day of Week",-1)})),gy={class:"select-day-of-week"},Dy={class:"mt-2"},vy=oy((function(){return(0,l._)("label",{class:"form-label"},"Repeat",-1)})),wy={class:"select-repeat"},by={class:"mt-4"},Sy=oy((function(){return(0,l._)("label",{class:"form-label"},"Start On",-1)})),ky={class:"mt-2 endDateWidth"},Cy={key:0},Ay=oy((function(){return(0,l._)("label",{class:"form-label"},"End On",-1)})),xy={class:"ml-2"},Ty=oy((function(){return(0,l._)("label",{class:"checkbox-label"},"No End Date",-1)})),_y={class:"mt-2"},Ey=oy((function(){return(0,l._)("label",{class:"form-label mb-1"},"Reason",-1)})),My={class:"mt-4 full-width d-flex justify-end"},Fy=oy((function(){return(0,l._)("span",{class:"white"},"Save",-1)})),Ny=[Fy],Py=oy((function(){return(0,l._)("span",{class:"white"},"Delete",-1)})),Oy=[Py],Hy=oy((function(){return(0,l._)("span",{class:"white"},"Create",-1)})),Yy=[Hy],Iy=oy((function(){return(0,l._)("span",{class:"white"},"Cancel",-1)})),Ly=[Iy];function Ry(e,t){var a=(0,l.up)("custom-select"),n=(0,l.up)("date-picker"),s=(0,l.up)("Modal");return(0,l.wg)(),(0,l.j4)(s,{ref:"ModalRef"},{header:(0,l.w5)((function(){return[(0,l._)("div",null,[(0,l._)("h2",ry,[e.isEdit?((0,l.wg)(),(0,l.iD)("span",cy,"Edit Unavailability")):((0,l.wg)(),(0,l.iD)("span",uy,"Create Unavailability"))])])]})),body:(0,l.w5)((function(){return[(0,l._)("div",null,[(0,l._)("div",dy,[(0,l._)("div",null,[hy,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.startTime=t}),onChange:t[1]||(t[1]=function(){return e.updateStartTime&&e.updateStartTime.apply(e,arguments)})},null,544),[[i.nr,e.startTime]])]),(0,l._)("div",my,[fy,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.endTime=t}),onChange:t[3]||(t[3]=function(){return e.updateEndTime&&e.updateEndTime.apply(e,arguments)})},null,544),[[i.nr,e.endTime]])]),(0,l._)("div",py,[yy,(0,l._)("div",gy,[(0,l.Wm)(a,{options:e.dayOfWeekOption,modelValue:e.selectedDayOfWeek,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selectedDayOfWeek=t}),modelModifiers:{modelValue:!0}},null,8,["options","modelValue"])])]),(0,l._)("div",Dy,[vy,(0,l._)("div",wy,[(0,l.Wm)(a,{options:e.repeatOption,modelValue:e.selectedRepeat,"onUpdate:modelValue":[t[5]||(t[5]=function(t){return e.selectedRepeat=t}),e.updateRepeat],modelModifiers:{modelValue:!0}},null,8,["options","modelValue","onUpdate:modelValue"])])]),(0,l._)("div",by,[Sy,(0,l.wy)((0,l._)("input",{class:"input-box",type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.startDateText=t}),onChange:t[7]||(t[7]=function(t){return e.updateDateTimeText("startDate")}),onClick:t[8]||(t[8]=function(t){return e.updateDateTime(t,"startDate")})},null,544),[[i.nr,e.startDateText]])]),(0,l._)("div",ky,[e.endDateDisable?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Cy,[Ay,(0,l.wy)((0,l._)("input",{class:"input-box",type:"text","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.endDateText=t}),onChange:t[10]||(t[10]=function(t){return e.updateDateTimeText("endDate")}),onClick:t[11]||(t[11]=function(t){return e.updateDateTime(t,"endDate")})},null,544),[[i.nr,e.endDateText]]),(0,l._)("span",xy,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.noEndDate=t}),onChange:t[13]||(t[13]=function(){return e.clickedNoEndDate&&e.clickedNoEndDate.apply(e,arguments)})},null,544),[[i.e8,e.noEndDate]]),Ty])]))]),(0,l._)("div",_y,[Ey,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.reason=t})},null,512),[[i.nr,e.reason]])])]),(0,l.Wm)(n,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"])])]})),footer:(0,l.w5)((function(){return[(0,l._)("div",My,[e.isEdit?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"blue normal copy2",onClick:t[15]||(t[15]=function(t){return e.updateAvailability()})},Ny)):(0,l.kq)("",!0),e.isEdit?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[16]||(t[16]=function(t){return e.confirmDelete()})},Oy)):(0,l.kq)("",!0),e.isEdit?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:2,class:"blue normal copy2",onClick:t[17]||(t[17]=function(t){return e.createAvailability()})},Yy)),(0,l._)("button",{class:"ml-2 normal orange copy2",onClick:t[18]||(t[18]=function(t){return e.cancel()})},Ly)])]})),_:1},512)}var jy=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Wy=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],By=["Once","Weekly","Fortnightly"];function Vy(e){return Wy[jy.indexOf(e)]}function Zy(e){return jy[Wy.indexOf(e)]}var $y={shortWeekDays:jy,fullWeekDays:Wy,frequencyCycle:By,findFullDaysByShort:Vy,findShortDayByFull:Zy},zy=$y,Uy=(0,l.aZ)({name:"EditAvailability",components:{Modal:Me,CustomSelect:tl,DatePicker:Na},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{ava:null,employeeNo:0,startTime:"",endTime:"",dayOfWeekOption:zy.fullWeekDays,selectedDayOfWeek:"Monday",repeatOption:zy.frequencyCycle,selectedRepeat:"Weekly",datePickerTop:0,datePickerLeft:0,startDate:$e()(),startDateText:"",endDate:$e()(),endDateText:"",reason:"",noEndDate:!0,endDateDisable:!1}},setup:function(){return{}},watch:{selectedDayOfWeek:function(e,t){}},methods:{reset:function(){this.ava=null,this.employeeNo=0,this.startTime="",this.endTime="",this.startDate=$e()(),this.startDateText="",this.endDate=$e()(),this.endDateText="",this.reason="",this.selectedRepeat="Weekly",this.noEndDate=!0,this.endDateDisable=!1},updateStartTime:function(){this.startTime=Xe.parseTimeColumn(this.startTime)},updateEndTime:function(){this.endTime=Xe.parseTimeColumn(this.endTime)},updateRepeat:function(){"Once"===this.selectedRepeat?this.endDateDisable=!0:this.endDateDisable=!1},clickedNoEndDate:function(){this.noEndDate&&(this.endDateText="",this.endDate=null)},createAvailability:function(){var e=this;va.loading();var t=this.endDateText?this.endDate.format("DD/MMM/YYYY"):null;t=this.noEndDate||this.endDateDisable?null:t;var a=[{employeeNo:Affinity.user.EmployeeNo,startTime:this.startTime,endTime:this.endTime,dayOfWeek:zy.findShortDayByFull(this.selectedDayOfWeek),dayOfMonth:null,frequencyType:this.selectedRepeat,startDate:this.startDate.format("DD/MMM/YYYY"),endDate:t,reason:this.reason,hasNoEndDate:this.noEndDate}];re.CreateAvailability(a).then((function(t){va.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTimeText:function(e){if("endDate"===e)if(""===this.endDateText)this.endDate=null;else{this.noEndDate=!1;var t=$e()(this.endDateText,"DD/MM/YYYY");t.isValid()&&(this.endDate=t)}else if("startDate"===e)if(""===this.startDateText)this.startDate=null;else{this.noEndDate=!1;var a=$e()(this.startDateText,"DD/MM/YYYY");a.isValid()&&(this.startDate=a)}},confirmDelete:function(){var e=this;va.confirmOrCancel({message:"Are you sure you want to delete this period of unavailability?"}).then((function(){re.DeleteAvailabilities(e.ava.id).then((function(t){e.$emit("reload"),e.$refs.ModalRef.toggleShow()}),(function(e){va.alert("Something went wrong. Delete Availability failed")}))}))},updateAvailability:function(){var e=this,t=this.endDateText?this.endDate.format("DD/MMM/YYYY"):null;t=this.noEndDate||this.endDateDisable?null:t,va.loading();var a=[{Id:this.ava.id,StartTime:this.startTime,EndTime:this.endTime,DayOfWeek:zy.findShortDayByFull(this.selectedDayOfWeek),DayOfMonth:null,FrequencyType:this.selectedRepeat,StartDate:this.startDate.format("DD/MMM/YYYY"),EndDate:t,Reason:this.reason,HasNoEndDate:this.noEndDate}];re.PatchAvailabilities(a).then((function(t){va.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTime:function(e,t){var a=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.target.getClientRects()[0],a.datePickerTop=i.bottom,a.datePickerLeft=i.left,n.prev=3,n.t0=t,n.next="startDate"===n.t0?7:"endDate"===n.t0?12:19;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.startDate);case 9:return a.startDate=n.sent,a.startDateText=a.startDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return a.endDate&&a.endDate.isValid()||(a.endDate=$e()()),n.next=15,a.$refs.DatePickerRef.toggleShow(a.endDate);case 15:return a.endDate=n.sent,a.endDateText=a.endDate.format("DD/MM/YYYY"),a.noEndDate=!1,n.abrupt("return");case 19:n.next=24;break;case 21:return n.prev=21,n.t1=n["catch"](3),n.abrupt("return");case 24:case"end":return n.stop()}}),n,null,[[3,21]])})))()},openEditDialog:function(e){e?(this.ava=e,this.employeeNo=Affinity.user.EmployeeNo,this.startTime=e.startTime,this.endTime=e.endTime,this.selectedDayOfWeek=e.dayOfWeek,this.selectedRepeat=e.frequencyType,this.startDateText=e.startDate,this.startDate=$e()(this.startDateText,"DD/MM/YYYY"),this.endDateText=e.endDate?e.endDate:"",this.endDate=$e()(this.endDateText,"DD/MM/YYYY"),this.reason=e.reason,this.noEndDate=e.hasNoEndDate):this.reset(),this.$refs.ModalRef.toggleShow()},cancel:function(){this.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});const Ky=(0,ue.Z)(Uy,[["render",Ry],["__scopeId","data-v-407b16c3"]]);var Gy=Ky,qy=(0,l.aZ)({components:{EditAvailability:Gy},data:function(){return{}},setup:function(){var e=(0,_a.iH)(!1),t=(0,_a.iH)(),a=(0,_a.iH)([]),n=(0,_a.iH)();function i(a,n){e.value=a,t.value.openEditDialog(n)}function s(){re.GetAvailabilities(Affinity.user.EmployeeNo).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,je.Z)(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a.value=t.map((function(e){return e.startDate=$e()(e.startDate).format("DD/MM/YYYY"),e.endDate&&(e.endDate=$e()(e.endDate).format("DD/MM/YYYY")),e.dayOfWeek=zy.findFullDaysByShort(e.dayOfWeek),e}))}))}return(0,l.bv)((function(){s()})),{girdData:a,openEditDialog:i,selectedAva:n,loadAvailability:s,isEditingDialog:e,EditAvailabilityRef:t}},mounted:function(){},methods:{confirmDelete:function(e){var t=this;va.confirmOrCancel({message:"Are you sure you want to delete this period of unavailability?"}).then((function(){t.deleteAva(e.id)}))},deleteAva:function(e){var t=this;re.DeleteAvailabilities(e).then((function(e){t.loadAvailability()}),(function(e){va.alert("Something went wrong. Delete Availability failed")}))}}});const Qy=(0,ue.Z)(qy,[["render",sy],["__scopeId","data-v-af45cc2a"]]);var Jy=Qy,Xy=(0,l._)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1",crossorigin:"anonymous"},null,-1),eg={class:"col-sm-4"},tg=(0,l._)("p",null,"Login form style 3",-1),ag={class:"card"},ng={class:"card-body"},ig=(0,l._)("h4",{class:"card-title text-center mb-4 mt-1"},"Sign in",-1),lg=(0,l._)("hr",null,null,-1),sg=(0,l._)("p",{class:"text-success text-center"},"Some message goes here",-1),og={class:"form-group"},rg={class:"input-group"},cg={class:"form-group mt-2"},ug={class:"input-group"},dg=(0,l._)("div",{class:"form-group mt-4"},[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-block"}," Login ")],-1);function hg(e,t,a,n,s,o){return(0,l.wg)(),(0,l.iD)(l.HY,null,[Xy,(0,l._)("aside",eg,[tg,(0,l._)("div",ag,[(0,l._)("article",ng,[ig,lg,sg,(0,l._)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)((function(){return o.login&&o.login.apply(o,arguments)}),["prevent"]))},[(0,l._)("div",og,[(0,l._)("div",rg,[(0,l.wy)((0,l._)("input",{name:"",class:"form-control",placeholder:"Email or login","onUpdate:modelValue":t[0]||(t[0]=function(e){return s.username=e})},null,512),[[i.nr,s.username]])])]),(0,l._)("div",cg,[(0,l._)("div",ug,[(0,l.wy)((0,l._)("input",{class:"form-control",placeholder:"******",type:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.password=e})},null,512),[[i.nr,s.password]])])]),dg],32)])])])],64)}var mg={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){console.log("login"),console.log(this.username),console.log(this.password),k().post("http://localhost:11140/api/Authentication/post",{username:this.username,password:this.password}).then((function(e){console.log("res",e)}))}}};const fg=(0,ue.Z)(mg,[["render",hg]]);var pg=fg,yg=function(e){return(0,l.dD)("data-v-0a30d1aa"),e=e(),(0,l.Cn)(),e},gg={class:"d-flex justify-space-between align-center"},Dg={class:"mt-2 ml-2 analytic-date-picker pa-2"},vg=yg((function(){return(0,l._)("label",null,"Select View",-1)})),wg={class:"ml-4"},bg=yg((function(){return(0,l._)("span",{class:"input-label"},"From Date",-1)})),Sg={class:"ml-4"},kg=yg((function(){return(0,l._)("span",{class:"input-label"},"End Date",-1)})),Cg={class:"ml-4"};function Ag(e,t){var a=(0,l.up)("custom-select"),n=(0,l.up)("CostDetailAnalysisV2"),s=(0,l.up)("CostAnalysisV2"),o=(0,l.up)("date-picker");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",gg,[(0,l._)("div",Dg,[vg,(0,l.Wm)(a,{class:"ml-2",options:e.options,selected:e.selectedView,onSelectOption:e.selectGridData},null,8,["options","selected","onSelectOption"]),(0,l._)("div",wg,[bg,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fromDateText=t}),class:"input-box ml-2",type:"text",onClick:t[1]||(t[1]=function(t){return e.updateFromDateTime(t,e.fromDate)})},null,512),[[i.nr,e.fromDateText]])]),(0,l._)("div",Sg,[kg,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.toDateText=t}),class:"input-box ml-2",type:"text",onClick:t[3]||(t[3]=function(t){return e.updateToDateTime(t,e.toDate)})},null,512),[[i.nr,e.toDateText]])]),(0,l._)("div",Cg,[(0,l._)("button",{class:"light-blue small action-button white",onClick:t[4]||(t[4]=function(t){return e.loadGridDataBySelection()})},"Show")])]),(0,l._)("div",null,[(0,l._)("button",{class:"light-blue small action-button white",onClick:t[5]||(t[5]=function(){return e.exportCSVByView&&e.exportCSVByView.apply(e,arguments)})},"Export CSV")])]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(n,{ref:"CostDetailAnalysisRef",fromDate:e.fromDate,toDate:e.toDate,"employee-list":e.employeeList},null,8,["fromDate","toDate","employee-list"])],512),[[i.F8,"Detailed Cost Report"===e.selectedView&&e.employeeList.length>0]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(s,{ref:"CostAnalysisRef",fromDate:e.fromDate,toDate:e.toDate,"employee-list":e.employeeList},null,8,["fromDate","toDate","employee-list"])],512),[[i.F8,"Start/End Time"===e.selectedView&&e.employeeList.length>0]]),(0,l.Wm)(o,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,"max-date":e.datePickerMax,"min-date":e.datePickerMin,date:e.datePickerTargetDay},null,8,["top","leftInput","max-date","min-date","date"])])}var xg=function(e){return(0,l.dD)("data-v-766e4486"),e=e(),(0,l.Cn)(),e},Tg={key:0,class:"d-flex justify-center mt-4"},_g=xg((function(){return(0,l._)("h3",null,"No Data has been found",-1)})),Eg=[_g],Mg={key:1,class:"mt-4 full-width grid-section"},Fg={class:"heading-cell"},Ng={class:"grid-body"},Pg={class:"grid-body-cell"},Og={class:"d-flex justify-space-between align-center"},Hg={key:0,class:"ml-4"};function Yg(e,t){var a=(0,l.up)("perfect-scrollbar"),n=(0,l.up)("paginator");return(0,l.wg)(),(0,l.iD)("div",null,[e.noDataError?((0,l.wg)(),(0,l.iD)("div",Tg,Eg)):((0,l.wg)(),(0,l.iD)("div",Mg,[(0,l.Wm)(a,null,{default:(0,l.w5)((function(){return[e.dataHeadings.length>0?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"grid-extra-width",style:(0,c.j5)(e.girdWidthStyle)},[(0,l._)("div",{class:"grid-heading",style:(0,c.j5)(e.headingStyle)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dataHeadings,(function(e){return(0,l.wg)(),(0,l.iD)("div",Fg,(0,c.zw)(e),1)})),256))],4),(0,l._)("div",Ng,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dataAnalysis,(function(t){return(0,l.wg)(),(0,l.iD)("div",{class:"grid-body-row",style:(0,c.j5)(e.headingStyle)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(t),(function(e){var t=(0,je.Z)(e,2),a=(t[0],t[1]);return(0,l.wg)(),(0,l.iD)("div",Pg,(0,c.zw)(a),1)})),256))],4)})),256))])],4)):(0,l.kq)("",!0)]})),_:1}),(0,l._)("div",Og,[(0,l.Wm)(n,{ref:"PaginatorRef",totalPage:e.totalPage,currentPage:e.pageNumber,onSelectPage:e.selectPage},null,8,["totalPage","currentPage","onSelectPage"]),e.recordCount>0?((0,l.wg)(),(0,l.iD)("div",Hg,"No. of Records: "+(0,c.zw)(e.recordCount),1)):(0,l.kq)("",!0)])]))])}a(1038),a(2479),a(9600);var Ig={key:0,class:"d-flex justify-space-between align-center"},Lg={class:"pagination"},Rg={class:"total-page-small"},jg=["onClick"],Wg={key:2,class:"ml-2"},Bg={key:0,class:"ml-4"};function Vg(e,t){return e.pageList.length>0?((0,l.wg)(),(0,l.iD)("div",Ig,[(0,l._)("div",Lg,[(0,l._)("div",Rg,[e.totalPage>1&&e.currentPage>1?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"previous-button page-button",onClick:t[0]||(t[0]=function(t){return e.selectNextPage(-1)})}," <")):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.pageList,(function(t){return(0,l.wg)(),(0,l.iD)("div",{class:(0,c.C_)(["page-button",{selected:e.currentPage===t}]),onClick:function(a){return e.selectPage(t)}},(0,c.zw)(t),11,jg)})),256)),e.totalPage>1&&e.currentPage<e.totalPage?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"next-button page-button",onClick:t[1]||(t[1]=function(t){return e.selectNextPage(1)})}," >")):(0,l.kq)("",!0),e.totalPage>5?((0,l.wg)(),(0,l.iD)("div",Wg,"Total Pages: "+(0,c.zw)(e.totalPage),1)):(0,l.kq)("",!0)])]),e.recordCount>0?((0,l.wg)(),(0,l.iD)("div",Bg,"No. of Records: "+(0,c.zw)(e.recordCount),1)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)}var Zg=(0,l.aZ)({name:"Paginator",props:{totalPage:{type:Number,default:1},currentPage:{type:Number,default:1}},setup:function(e,t){var a=t.emit,n=(0,_a.iH)(20),i=(0,_a.iH)([]),l=(0,_a.iH)(0);function s(e,t){i.value=t<=5?Array.from(Array(t).keys()).map((function(e){return e+1})):e<=3?Array.from(Array(5).keys()).map((function(e){return e+1})):t>e+2?Array.from(Array(5).keys()).map((function(t){return t+e-2})):Array.from(Array(5).keys()).map((function(e){return e+t-4}))}function o(e){return r.apply(this,arguments)}function r(){return r=(0,b.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a("selectPage",t);case 1:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function c(){return u.apply(this,arguments)}function u(){return u=(0,b.Z)(regeneratorRuntime.mark((function t(){var n,i,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=l.length>0&&void 0!==l[0]?l[0]:1,i=e.currentPage+n,a("selectPage",i);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}return{pageSize:n,pageList:i,recordCount:l,selectPage:o,selectNextPage:c,calculatePageList:s}}});const $g=(0,ue.Z)(Zg,[["render",Vg],["__scopeId","data-v-0e6f8ae9"]]);var zg=$g,Ug=(0,l.aZ)({name:"CostDetailAnalysisV2",components:{Paginator:zg},props:{fromDate:{type:Object},toDate:{type:Object},employeeList:{type:Array}},setup:function(e){var t=(0,_a.iH)([]),a=(0,_a.iH)(0),n=(0,_a.iH)(1),i=(0,_a.iH)(20),s=(0,_a.iH)(5),o=(0,_a.iH)(0),r=(0,_a.iH)(),c=(0,_a.iH)([]),u=(0,_a.iH)(),d=(0,_a.iH)(2e3),h=(0,_a.iH)({width:"2000px"}),m=(0,_a.iH)([]),f=(0,_a.iH)(["Start/End Time","Detailed Cost Report"]),p=(0,_a.iH)(!1);function y(){return g.apply(this,arguments)}function g(){return g=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return M(),va.loading(),e.next=4,D();case 4:va.clear();case 5:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function D(){return v.apply(this,arguments)}function v(){return v=(0,b.Z)(regeneratorRuntime.mark((function t(){var l,u,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return p.value=!1,l=e.fromDate,u=e.toDate,d=e.employeeList,l&&u||(l=$e()().startOf("month"),u=$e()().endOf("month")),h={sortBy:"CommonName",sortingType:"asc",pagingEnabled:!0,pageNumber:n.value,pageSize:i.value,employeeNumbers:d,transDateFrom:l?l.format("YYYY-MM-DD"):null,transDateTo:u?u.format("YYYY-MM-DD"):null},t.next=8,re.GetCostAnalysisDetailV2(h).then((function(e){if(e.response&&0===e.response.length||!e.response)p.value=!0;else{var t=e.response.slice();t.forEach((function(e){e.TransDate=$e()(e.TransDate).format("YYYY-MM-DD"),e.TotalCost=Math.round(100*e.TotalCost)/100;for(var t=0,a=Object.entries(e);t<a.length;t++){var n=(0,je.Z)(a[t],2),i=n[0],l=n[1];"number"===typeof l&&(e[i]=Math.round(100*l)/100)}}));for(var i=t.map((function(e){var t=Object.values(e);return t[0]=e.CommonName,t[1]=e.EmployeeNo,t})),l=-1,u=e.response[0],d=0,h=Object.keys(u);d<h.length;d++){var f=h[d];f.indexOf("Cost")>-1&&l++}a.value=l,c.value=w(a.value),S(),k(),n.value=e.currentPageNumber,o.value=e.recordCount,s.value=e.totalPages,r.value.calculatePageList(e.currentPageNumber,e.totalPages),m.value=i}}));case 8:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function w(e){var t=["Employee Name","Employee Number","Functional Area","Date","Pay Rate","Total Hours","Total Cost"],a=["Description","Hours","Cost"],n=t.slice(),i=0;while(i<e){var l=a.map((function(e){return e+(i+1)}));n.push.apply(n,(0,Sc.Z)(l)),i++}return n}function S(){var e="";Array.from(Array(a.value)).map((function(t,a){e+=" 150px 100px 100px"})),u.value={"grid-template-columns":"150px 150px 150px 100px 100px 100px 100px".concat(e)}}function k(){return d.value=850+350*a.value+3*a.value+6,console.log("gridWidth.value",d.value),h.value={width:"".concat(d.value,"px")},d.value}function C(e){return A.apply(this,arguments)}function A(){return A=(0,b.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=t,va.loading(),e.next=4,D();case 4:va.clear();case 5:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function x(){return T.apply(this,arguments)}function T(){return T=(0,b.Z)(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!p.value){e.next=3;break}return va.alert("No data to export"),e.abrupt("return");case 3:return va.loading(),e.next=6,_();case 6:t=e.sent,va.clear(),a="data:text/csv;charset=utf-8,",a+=c.value.join(",")+"\r\n",t.map((function(e){a+=Object.values(e).join(",")+"\r\n"})),n=encodeURI(a),i=document.createElement("a"),i.setAttribute("href",n),i.setAttribute("download","Analytic.csv"),i.setAttribute("Content-Type","application/octet-stream"),document.body.appendChild(i),i.click();case 18:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function _(){return E.apply(this,arguments)}function E(){return E=(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageNumber:1,pageSize:1e4,pagingEnabled:!1,sortBy:"CommonName",sortingType:"asc",employeeNumbers:e.employeeList,transDateFrom:e.fromDate?e.fromDate.format("YYYY-MM-DD"):null,transDateTo:e.toDate?e.toDate.format("YYYY-MM-DD"):null},t.next=3,re.GetCostAnalysisDetailV2(n).then((function(e){for(var t=e.response.map((function(e){e.TransDate=$e()(e.TransDate).format("YYYY-MM-DD"),e.TotalCost=Math.round(100*e.TotalCost)/100;for(var t=0,a=Object.entries(e);t<a.length;t++){var n=(0,je.Z)(a[t],2),i=n[0],l=n[1];"number"===typeof l&&(e[i]=Math.round(100*l)/100)}var s=Object.values(e);return s[0]=e.CommonName,s[1]=e.EmployeeNo,s})),n=-1,i=e.response[0],l=0,s=Object.keys(i);l<s.length;l++){var o=s[l];o.indexOf("Cost")>-1&&n++}a.value=n,c.value=w(a.value);var r=Object.values(e.resultSummary).map((function(e){return"number"===typeof e?Math.round(100*e)/100:e})),u=Array(7).fill(null).concat(r);return t.push(u),t}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}function M(){p.value=!1,n.value=1,s.value=5}return(0,l.bv)((function(){m.value=[],n.value=1,s.value=5,p.value=!1})),{data:t,dataHeadings:c,dataAnalysis:m,options:f,headingStyle:u,girdWidthStyle:h,pageNumber:n,pageSize:i,totalPage:s,noDataError:p,recordCount:o,PaginatorRef:r,selectPage:C,exportCSV:x,loadGridData:D,loadGridDataFromParent:y}}});const Kg=(0,ue.Z)(Ug,[["render",Yg],["__scopeId","data-v-766e4486"]]);var Gg=Kg,qg=function(e){return(0,l.dD)("data-v-6f2df8de"),e=e(),(0,l.Cn)(),e},Qg={class:"mt-4 full-width grid-section"},Jg={key:0,class:"d-flex justify-center mt-4"},Xg=qg((function(){return(0,l._)("h3",null,"No Data has been found",-1)})),eD=[Xg],tD={key:1},aD={class:"grid-extra-width"},nD={class:"grid-heading"},iD={class:"heading-cell"},lD={class:"grid-body"},sD={class:"grid-body-row"},oD={class:"grid-body-cell"},rD={class:"d-flex justify-space-between align-center"},cD={key:0,class:"ml-4"};function uD(e,t){var a=(0,l.up)("perfect-scrollbar"),n=(0,l.up)("paginator");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Qg,[e.noDataError?((0,l.wg)(),(0,l.iD)("div",Jg,eD)):((0,l.wg)(),(0,l.iD)("div",tD,[(0,l.Wm)(a,null,{default:(0,l.w5)((function(){return[(0,l._)("div",aD,[(0,l._)("div",nD,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dataHeadings,(function(e){return(0,l.wg)(),(0,l.iD)("div",iD,(0,c.zw)(e),1)})),256))]),(0,l._)("div",lD,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dataAnalysis,(function(e){return(0,l.wg)(),(0,l.iD)("div",sD,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(e),(function(e){var t=(0,je.Z)(e,2),a=(t[0],t[1]);return(0,l.wg)(),(0,l.iD)("div",oD,(0,c.zw)(a),1)})),256))])})),256))])])]})),_:1}),(0,l._)("div",rD,[(0,l.Wm)(n,{ref:"PaginatorRef",totalPage:e.totalPages,currentPage:e.pageNumber,onSelectPage:e.selectPage},null,8,["totalPage","currentPage","onSelectPage"]),e.recordCount>0?((0,l.wg)(),(0,l.iD)("div",cD,"No. of Records: "+(0,c.zw)(e.recordCount),1)):(0,l.kq)("",!0)])]))])])}var dD=(0,l.aZ)({name:"CostAnalysisV2",components:{Paginator:zg},props:{fromDate:{type:Object},toDate:{type:Object},employeeList:{type:Array}},setup:function(e){var t=(0,_a.iH)([]),a=(0,_a.iH)(1),n=(0,_a.iH)(20),i=(0,_a.iH)(5),s=(0,_a.iH)(0),o=(0,_a.iH)(!1),r=(0,_a.iH)(),c=(0,_a.iH)(["Employee Name","Employee Number","Functional Area","Date","Award","Scheduled Hours","Actual Hours","Hours Variance","Scheduled Cost","Actual Cost","Cost Variance","Actual Start Time","Actual End Time","Adjusted Start Time","Adjusted End Time"]),u=(0,_a.iH)([]),d=(0,_a.iH)(["Start/End Time","Detailed Cost Report"]);function h(){return m.apply(this,arguments)}function m(){return m=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return k(),va.loading(),e.next=4,f();case 4:va.clear();case 5:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return p=(0,b.Z)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.value=!1,e.fromDate&&e.toDate||(e.fromDate||(e.fromDate=$e()().startOf("month")),e.toDate||(e.toDate=$e()().endOf("month"))),l={pageNumber:a.value,pageSize:n.value,pagingEnabled:!0,sortBy:"CommonName",sortingType:"asc",employeeNumbers:e.employeeList,transDateFrom:e.fromDate?e.fromDate.format("YYYY-MM-DD"):null,transDateTo:e.toDate?e.toDate.format("YYYY-MM-DD"):null},t.next=5,re.GetCostAnalysisV2(l).then((function(e){if((!e.response||0!==e.response.length)&&e.response)return u.value=e.response.map((function(e){var t={};return t.commonName=e.commonName,t.employeeNo=e.employeeNo,t.functionalArea=e.functionalArea,t.transDate=$e()(e.transDate).format("YYYY-MM-DD"),t.awardId=e.awardId,t.scheduledHours=e.scheduledUnits,t.actualHours=e.actualUnits,t.hoursVariance=Math.round(100*(t.actualHours-t.scheduledHours))/100,t.scheduledCost=e.scheduledCost?Math.round(100*e.scheduledCost)/100:null,t.actualCost=e.actualCost?Math.round(100*e.actualCost)/100:null,t.costVariance=Math.round(100*(t.actualCost-t.scheduledCost))/100,t.actStartTime=e.actStartTime?$e()(e.actStartTime).format("HH:mm"):null,t.actEndTime=e.actEndTime?$e()(e.actEndTime).format("HH:mm"):null,t.adjStartTime=e.adjStartTime?$e()(e.adjStartTime).format("HH:mm"):null,t.adjEndTime=e.adjEndTime?$e()(e.adjEndTime).format("HH:mm"):null,t})),i.value=e.totalPages,a.value=e.currentPageNumber,s.value=e.recordCount,r.value.calculatePageList(e.currentPageNumber,e.totalPages),e.response;o.value=!0}));case 5:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return g=(0,b.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.value=t,va.loading(),e.next=4,f();case 4:va.clear();case 5:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function D(){return v.apply(this,arguments)}function v(){return v=(0,b.Z)(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o.value){e.next=3;break}return va.alert("No data to export"),e.abrupt("return");case 3:return va.loading(),e.next=6,w();case 6:t=e.sent,va.clear(),a="data:text/csv;charset=utf-8,",a+=c.value.join(",")+"\r\n",t.map((function(e){a+=Object.values(e).join(",")+"\r\n"})),n=encodeURI(a),i=document.createElement("a"),i.setAttribute("href",n),i.setAttribute("download","Analytic.csv"),document.body.appendChild(i),i.click();case 17:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return S=(0,b.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pageNumber:1,pageSize:1e4,pagingEnabled:!1,sortBy:"CommonName",sortingType:"asc",employeeNumbers:e.employeeList,transDateFrom:e.fromDate?e.fromDate.format("YYYY-MM-DD"):null,transDateTo:e.toDate?e.toDate.format("YYYY-MM-DD"):null},t.next=3,re.GetCostAnalysisV2(a).then((function(e){return e.response.map((function(e){var t={};return t.commonName=e.commonName,t.employeeNo=e.employeeNo,t.functionalArea=e.functionalArea,t.transDate=$e()(e.transDate).format("YYYY-MM-DD"),t.awardId=e.awardId,t.scheduledHours=e.scheduledUnits,t.actualHours=e.actualUnits,t.hoursVariance=Math.round(100*(t.actualHours-t.scheduledHours))/100,t.scheduledCost=e.scheduledCost?Math.round(100*e.scheduledCost)/100:null,t.actualCost=e.actualCost?Math.round(100*e.actualCost)/100:null,t.costVariance=Math.round(100*(t.actualCost-t.scheduledCost))/100,t.actStartTime=e.actStartTime?$e()(e.actStartTime).format("HH:mm"):null,t.actEndTime=e.actEndTime?$e()(e.actEndTime).format("HH:mm"):null,t.adjStartTime=e.adjStartTime?$e()(e.adjStartTime).format("HH:mm"):null,t.adjEndTime=e.adjEndTime?$e()(e.adjEndTime).format("HH:mm"):null,t}))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function k(){a.value=1,i.value=5,o.value=!1}return(0,l.bv)((function(){u.value=[],a.value=1,i.value=5,o.value=!1})),{data:t,dataHeadings:c,dataAnalysis:u,options:d,PaginatorRef:r,pageNumber:a,pageSize:n,totalPages:i,noDataError:o,recordCount:s,loadGridData:f,exportCSV:D,selectPage:y,loadGridDataFromParent:h}}});const hD=(0,ue.Z)(dD,[["render",uD],["__scopeId","data-v-6f2df8de"]]);var mD,fD=hD;(function(e){e["simple"]="Start/End Time",e["detailed"]="Detailed Cost Report"})(mD||(mD={}));var pD=(0,l.aZ)({name:"AnalysisV2",components:{CostDetailAnalysisV2:Gg,CostAnalysisV2:fD,Modal:Me,CustomSelect:tl,DatePicker:Na},setup:function(){var e=(0,Le.oR)(),t=(0,_a.iH)([]),a=(0,_a.iH)(1),n=(0,_a.iH)(20),i=(0,_a.iH)(5),s=(0,_a.iH)([]),o=(0,_a.iH)(0),r=(0,_a.iH)(!1),c=(0,_a.iH)(),u=(0,_a.iH)(),d=(0,_a.iH)(),h=(0,_a.iH)(null),m=(0,_a.iH)(null),f=(0,_a.iH)([]),p=(0,_a.iH)(""),y=(0,_a.iH)(""),g=(0,_a.iH)(0),D=(0,_a.iH)(0),v=(0,_a.iH)(null),w=(0,_a.iH)(null),S=(0,_a.iH)($e()()),k=(0,_a.iH)(mD.simple),C=(0,_a.iH)([]),A=(0,_a.iH)(["Start/End Time","Detailed Cost Report"]);function x(){return T.apply(this,arguments)}function T(){return T=(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return va.loading(),t.next=3,e.dispatch(bi.getEmployees,Affinity.user.EmployeeNo).then((function(e){f.value=e.map((function(e){return e.employeeNo}))}));case 3:return t.next=5,_();case 5:va.clear();case 6:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function _(){return E.apply(this,arguments)}function E(){return E=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!h.value||!m.value){e.next=5;break}if(!(m.value.diff(h.value,"weeks")>=6)){e.next=5;break}throw va.alert("Selected Date range must not be greater than 6 weeks."),"weeks error";case 5:if("Start/End Time"!==k.value){e.next=11;break}return a.value=1,e.next=9,d.value.loadGridDataFromParent();case 9:e.next=13;break;case 11:return e.next=13,u.value.loadGridDataFromParent();case 13:e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])}))),E.apply(this,arguments)}function M(e,t){return F.apply(this,arguments)}function F(){return F=(0,b.Z)(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.getClientRects()[0],g.value=n.bottom,D.value=n.left,h&&(w.value=h.value.clone().subtract(1,"day"),v.value=null),S.value=m.value?m.value:$e()(),e.next=7,O();case 7:i=e.sent,m.value=i||void 0,y.value=m.value.format("DD/MM/YYYY");case 10:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function N(e,t){return P.apply(this,arguments)}function P(){return P=(0,b.Z)(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.getClientRects()[0],g.value=n.bottom,D.value=n.left,m&&(w.value=null,v.value=m.value.clone().add(1,"day")),S.value=h.value?h.value:$e()(),e.next=7,O();case 7:i=e.sent,h.value=i||void 0,p.value=h.value.format("DD/MM/YYYY");case 10:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function O(){return H.apply(this,arguments)}function H(){return H=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.value.toggleShow(S.value);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function Y(){return I.apply(this,arguments)}function I(){return I=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(k.value!==mD.simple){e.next=5;break}return e.next=3,d.value.exportCSV();case 3:e.next=7;break;case 5:return e.next=7,u.value.exportCSV();case 7:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function L(e){return R.apply(this,arguments)}function R(){return R=(0,b.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return k.value=t,e.next=3,_();case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}return(0,l.bv)((function(){h.value&&m.value||(h.value||(h.value=$e()().startOf("month"),p.value=h.value.format("DD/MM/YYYY")),m.value||(m.value=$e()().endOf("month").startOf("day"),y.value=m.value.format("DD/MM/YYYY"))),x()})),{DatePickerRef:c,CostDetailAnalysisRef:u,CostAnalysisRef:d,data:t,dataAnalysis:C,options:A,selectedView:k,pageNumber:a,pageSize:n,totalPages:i,pageList:s,noDataError:r,recordCount:o,dateModalTop:g,dateModalLeft:D,datePickerMax:v,datePickerMin:w,datePickerTargetDay:S,fromDate:h,toDate:m,fromDateText:p,toDateText:y,employeeList:f,updateToDateTime:M,updateFromDateTime:N,exportCSVByView:Y,selectGridData:L,loadGridDataBySelection:_}}});const yD=(0,ue.Z)(pD,[["render",Ag],["__scopeId","data-v-0a30d1aa"]]);var gD=yD,DD=[{path:"/login",name:"Login",component:pg},{path:"/my-schedules",name:"My Schedule",component:Ha},{path:"/availability",name:"Availability",component:Jy},{path:"/flex-schedule",name:"Flex Schedule",component:Cp,beforeEnter:function(e,t,a){Je()?a("/flex-schedule-mobile"):a()}},{path:"/flex-schedule-mobile",name:"FlexScheduleMobile",component:Bp},{path:"/team-schedules",name:"Schedule Management",component:$l},{path:"/employee-allocations",name:"Employee Allocation",component:Hr},{path:"/cost-reports",name:"Analysis",component:gD},{path:"/",name:"Home",component:Ha}],vD=(0,nt.p7)({history:(0,nt.PO)("/"),routes:DD}),wD=vD,bD={state:{magic:123},modules:{FlexSchedule:qe,LookUp:zu,EmployeeModule:xi}},SD=new Le.ZP.Store(bD),kD=a(9652),CD=a(5158),AD={reformatDate:function(e){var t;if(!e)return e;if("string"===typeof e)return e;if("object"===(0,Yi.Z)(e)&&"Date"===(null===(t=e.constructor)||void 0===t?void 0:t.name)){var a=$e()(e);return a.format("DD/MM/YYYY")}if(e.isValid()){var n=$e()(e);return null!=n&&n.isValid()?n.format("DD/MM/YYYY"):e}return e},reformatDateString:function(e,t){return e&&"string"===typeof e?$e()(e,t).format("DD/MM/YYYY"):e},reformatTime:function(e){if(!e)return e;var t=$e()(e);if(null==t||!t.isValid()){var a=$e()(e,"h:m");return null!=a&&a.isValid()?a.format("HH:mm"):e}return t.format("HH:mm")},reformatBreakHours:function(e){if(!e)return e;var t=e,a=Math.floor(t),n=t-a;return n>0&&(n=Math.round(60*n)),a&&n?"".concat(a,":").concat(n):a?"".concat(a," hour"):n?"".concat(n," min"):void 0},ordinalSuffix:function(e){var t=e%10,a=e%100;return 1==t&&11!=a?e+"st":2==t&&12!=a?e+"nd":3==t&&13!=a?e+"rd":e+"th"}},xD=AD,TD=a(4435),_D=a(4829),ED=a(9888),MD=a(1211),FD={chevronUp:TD.Z,chevronLeft:_D.Z,chevronRight:ED.Z,chevronDown:MD.Z},ND=FD,PD={},OD={install:function(e){function t(t){e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowPersonal=t:e.config.globalProperties.$CompanyConfig={isAllowPersonal:t}}function a(t){e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowSundayFirst=t:e.config.globalProperties.$CompanyConfig={isAllowSundayFirst:t}}function n(){return e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowPersonal:null}function i(){return e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowSundayFirst:null}PD.setAllowPersonal=t,PD.getAllowPersonal=n,PD.setAllowSundayFirst=a,PD.getAllowSundayFirst=i,e.provide("MANAGE_COMPANY_CONFIG",PD)}},HD=a(9081),YD=(0,kD.Z)();navigator.serviceWorker.getRegistrations().then((function(e){var t,a=(0,n.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.unregister()}}catch(l){a.e(l)}finally{a.f()}}));var ID=(0,i.ri)(at);ID.config.globalProperties.emitter=YD,ID.use(CD.ZP),ID.use(HD.Z),ID.use(OD),ID.use(SD).use(wD).mount("#app"),ID.config.globalProperties.$filters=xD,ID.config.globalProperties.$icons=ND}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,l){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],l=e[u][2];for(var o=!0,r=0;r<n.length;r++)(!1&l||s>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(o=!1,l<s&&(s=l));if(o){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,l,s=n[0],o=n[1],r=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(r)var u=r(a)}for(t&&t(n);c<s.length;c++)l=s[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},n=self["webpackChunkschedule"]=self["webpackChunkschedule"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1619)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.js.map