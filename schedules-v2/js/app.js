(function(e){function t(t){for(var n,i,s=t[0],o=t[1],r=t[2],d=0,h=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&h.push(c[i][0]),c[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(h.length)h.shift()();return l.push.apply(l,r||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==c[o]&&(n=!1)}n&&(l.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},c={app:0},l=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var r=0;r<s.length;r++)t(s[r]);var u=o;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"09ec":function(e,t,a){"use strict";a("f70e")},"109b":function(e,t,a){"use strict";a("f378")},"15bf":function(e,t,a){"use strict";a("8e64")},"199e":function(e,t,a){},"1c21":function(e,t,a){},"1c76":function(e,t,a){"use strict";a("2929")},"1fa8":function(e,t,a){"use strict";a("6a0c")},"20f9":function(e,t,a){},2699:function(e,t,a){},"28f0":function(e,t,a){"use strict";a("b4a5")},2929:function(e,t,a){},"2a1e":function(e,t,a){},"2b86":function(e,t,a){},"2b9b":function(e,t,a){"use strict";a("199e")},"2c74":function(e,t,a){"use strict";a("80b4")},"2eb4":function(e,t,a){"use strict";a("ea8e")},"2f3d":function(e,t,a){"use strict";a("7f21")},"336f":function(e,t,a){},"34ab":function(e,t,a){},"357f":function(e,t,a){},3709:function(e,t,a){},"3e91":function(e,t,a){"use strict";a("7f59")},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=l,e.exports=c,c.id="4678"},"4ae4":function(e,t,a){},"4de6":function(e,t,a){"use strict";a("9a1c")},"54ce":function(e,t,a){},"58be":function(e,t,a){"use strict";a("e552")},"5d16":function(e,t,a){"use strict";a("8f67")},"600c":function(e,t,a){"use strict";a("8867")},"60cc":function(e,t,a){},"60fd":function(e,t,a){},6740:function(e,t,a){"use strict";a("3709")},6961:function(e,t,a){},"69af":function(e,t,a){},"6a0c":function(e,t,a){},"6f09":function(e,t,a){"use strict";a("e3ba")},"70bf":function(e,t,a){"use strict";a("20f9")},"71f8":function(e,t,a){"use strict";a("4ae4")},"768e":function(e,t,a){"use strict";a("60fd")},"7bf7":function(e,t,a){"use strict";a("54ce")},"7d4f":function(e,t,a){"use strict";a("c986")},"7f21":function(e,t,a){},"7f59":function(e,t,a){},"80b4":function(e,t,a){},8241:function(e,t,a){},"86cf":function(e,t,a){"use strict";a("dde9")},8867:function(e,t,a){},"88ce":function(e,t,a){},"8e1f":function(e,t,a){},"8e64":function(e,t,a){},"8efc":function(e,t,a){"use strict";a("1c21")},"8f67":function(e,t,a){},"919e":function(e,t,a){},"91a1":function(e,t,a){"use strict";a("2b86")},"93be":function(e,t,a){"use strict";a("6961")},"9a1c":function(e,t,a){},"9ede":function(e,t,a){},a273:function(e,t,a){},a2e1:function(e,t,a){"use strict";a("2a1e")},a5ce:function(e,t,a){"use strict";a("c8bb")},a883:function(e,t,a){},b266:function(e,t,a){},b4a5:function(e,t,a){},ba8f:function(e,t,a){},c368:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"@media print{.flex-sche-table{width:100%;background:#fff;border-collapse:collapse;-webkit-print-color-adjust:exact}.flex-sche-table td,.flex-sche-table th{border:1px solid #ddd;padding:8px}.flex-sche-table tr:nth-child(even){background:#f2f2f2}.flex-sche-table tr:hover{background:#ddd}.flex-sche-table thead th{padding:3px 5px 3px 5px;font-weight:normal;text-align:left;background:linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%)}.flex-sche-table .leave-unit{width:100%;padding:2px 5px;background-color:#e0e0e0}}@media screen{.flex-sche-table{display:none}}",""]),e.exports=t},c8bb:function(e,t,a){},c921:function(e,t,a){"use strict";a("60cc")},c986:function(e,t,a){},ca4a:function(e,t,a){"use strict";a("b266")},cd49:function(e,t,a){"use strict";a.r(t),a.d(t,"emitter",(function(){return ly}));var n=a("b85c"),c=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("7a23")),l={class:"v-application"};function i(e,t,a,n,i,s){var o=Object(c["F"])("schedules-navigation"),r=Object(c["F"])("alert"),u=Object(c["F"])("router-view"),d=Object(c["F"])("dashboard");return Object(c["x"])(),Object(c["g"])("div",null,[Object(c["k"])(d,{"enable-by-config":!0,"config-url":"/Config/Dashboard","info-url":"/Auth/GetInfo","logout-url":"/Auth/Logout"},{default:Object(c["R"])((function(){return[Object(c["h"])("div",l,[Object(c["k"])(o),Object(c["k"])(r),Object(c["k"])(u)])]})),_:1})])}a("e9c4"),a("b64b"),a("357f");var s=function(e){return Object(c["A"])("data-v-09187f16"),e=e(),Object(c["y"])(),e},o={class:"schedules"},r={class:"sch-nav justify-space-between align-center primary body-2"},u={class:"white--text"},d={key:0,class:"d-flex align-center"},h={class:"sch-nav-options mr-1 pa-0"},f=["onClick"],b={href:"/help/index",class:"sch-nav-help align-center mr-2",target:"_blank"},m=s((function(){return Object(c["h"])("span",{class:"icon-help-round white"},null,-1)})),p=[m];function O(e,t){var a=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",o,[Object(c["h"])("div",r,[Object(c["h"])("div",u,"Schedules - "+Object(c["J"])(e.userFullName),1),e.user?(Object(c["x"])(),Object(c["g"])("div",d,[Object(c["h"])("ul",h,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.authorizedMenus,(function(t){return Object(c["x"])(),Object(c["g"])("li",{class:Object(c["r"])(["nav-box mr-1 py-1 px-2 my-1 caption",{selected:t.selected}]),onClick:function(a){return e.selectMenu(t)}},[Object(c["h"])("div",null,Object(c["J"])(t.display),1)],10,f)})),256))]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("a",b,p)),[[a,{content:"Help"},void 0,{top:!0}]])])):Object(c["f"])("",!0)])])}a("99af"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("7db0");var j=a("1da1"),y=(a("96cf"),a("d9e2"),a("bc3a")),g=a.n(y),v=!1;Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST&&(v=!0,g.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST),g.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",g.a.interceptors.response.use((function(e){return e.request.responseURL.indexOf("aspxerrorpath")>-1?Promise.reject("asp error"):e}),(function(e){return e&&e.response&&401==e.response.status&&location.reload(),Promise.reject(e)}));var D=function(e){return g.a.post("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))},S=function(){return g.a.post("Auth/GetInfo").then((function(e){return e.data}))};function k(e){return g.a.get("StandardSchedules",{params:{allSchedules:e}}).then((function(e){return e.data}))}function x(){return w.apply(this,arguments)}function w(){return w=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g.a.get("ShiftTypes").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function C(e){return g.a.get("ScheduleDetail/".concat(e)).then((function(e){return e.data}))}function A(e){return g.a.post("PostSchedule",e).then((function(e){return e.data}))}function T(e){return g.a.get("DeleteSchedule/".concat(e)).then((function(e){return e.data}))}function E(e){return g.a.post("AllocateSchedule",e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function M(e,t){return g.a.get("RemoveEmployeeWorkSchedule/".concat(t,"/").concat(e)).then((function(e){return e.data}))}function F(e,t){return g.a.post("UpdateEmployeeWorkSchedule/".concat(t),e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function N(){return g.a.get("EmployeeOptions").then((function(e){return e.data}))}function P(e){return g.a.get("EmployeeWorkSchedules/".concat(e)).then((function(e){return e.data}))}function I(e){return g.a.get("EmployeeWorkScheduleDetail/".concat(e)).then((function(e){return e.data}))}function Y(e){return g.a.get("FlexScheduleDetail/".concat(e)).then((function(e){return e.data}))}function L(e){return g.a.get("FlexSchedules",{params:e}).then((function(e){return e.data}))}function R(e){return g.a.post("CreateFlexSchedule/",e).then((function(e){return e.data}))}function H(e,t){return g.a.put("UpdateFlexSchedule/".concat(e),t).then((function(e){return e.data}))}function W(e){return g.a.patch("PatchFlexSchedule",e).then((function(e){return e.data}))}function B(e){return g.a.get("GetManagedEmployees/".concat(e,"?fields=EmployeeNo,CommonName,StdHoursPerWeek,PositionCode,PositionTitle,Cost1,Cost2")).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))}function V(e){return g.a.get("GetPositions/".concat(e)).then((function(e){return e.data}))}function $(){return g.a.get("GetCostElements").then((function(e){return e.data}))}function U(e){return g.a.get("GetManagedLeaves",{params:e}).then((function(e){return"string"===typeof e.data?""===e.data?(e.data=[],e.data):JSON.parse(e.data):e.data}))}function J(e){return g.a.post("CopyFlexSchedule",e).then((function(e){return e.data}))}function _(e){return g.a.delete("DeleteFlexSchedule",{data:e}).then((function(e){return e.data}))}function G(e){return g.a.post("CreateAvailability",e).then((function(e){return e.data}))}function K(e){return g.a.get("GetAvailability",{params:{employeeNo:e}}).then((function(e){return e.data}))}function z(e){return g.a.patch("PatchAvailability",e).then((function(e){return e.data}))}function Q(e){return g.a.delete("DeleteAvailability/".concat(e)).then((function(e){return e.data}))}function q(e){return g.a.get("GetAdditionalDetails",{params:{employeeNo:e}}).then((function(e){return e.data}))}function X(e){return g.a.post("PublishFlexSchedule",e).then((function(e){return e.data}))}function Z(){return g.a.get("WorkTypes").then((function(e){return e.data}))}function ee(){return g.a.get("ExcludedWorkTypes").then((function(e){return e.data}))}function te(e){return g.a.post("GetCostAnalysis",e).then((function(e){return e.data}))}function ae(e){return g.a.post("GetEmployeesCostCentres",e).then((function(e){return e.data}))}function ne(e){var t={pageNumber:e.pageNumber,pageSize:e.pageSize,employeeNumbers:e.employeeNumbers,transDateFrom:e.transDateFrom,transDateTo:e.transDateTo};return g.a.post("CostingAnalytic",t).then((function(e){return e.data}))}v&&(D=function(e){return g.a.get("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}),(function(e){return Promise.reject(e)}))},S=function(){return g.a.get("Auth/GetInfo").then((function(e){return e.data}))});var ce={EmployeeWorkSchedule:D,AuthGetInfo:S,StandardSchedules:k,ShiftTypes:x,ScheduleDetail:C,PostSchedule:A,DeleteSchedule:T,AllocateSchedule:E,RemoveEmployeeWorkSchedule:M,UpdateEmpSchedRequest:F,EmployeesList:N,EmpWorkScheds:P,EmpSchedDetailRequest:I,GetFlexScheduleDetail:Y,GetFlexSchedules:L,CreateFlexSchedule:R,UpdateFlexSchedule:H,PatchFlexSchedule:W,GetManagedEmployees:B,GetPosition:V,GetCostelements:$,GetManagedLeaves:U,CopyFlexSchedule:J,DeleteFlexSchedule:_,CreateAvailability:G,GetAvailabilities:K,PatchAvailabilities:z,DeleteAvailabilities:Q,GetEmployeeExtraDetail:q,PublishFlexSchedule:X,GetWorkTypes:Z,GetDefaultWorkTypes:ee,GetCostAnalysis:te,GetEmployeesCostCentres:ae,GetCostAnalysisV2:ne},le=Object(c["l"])({name:"scheduleNavigation",data:function(){return{user:null,menus:[{text:"Work Schedule",display:"My Schedules",route:"/my-schedules",selected:!1,default:!0},{text:"Availability",display:"My Availability",route:"/Availability",selected:!1,default:!1},{text:"Flex Schedule",display:"Flexi Schedules",route:"/flex-schedule",selected:!1,default:!1},{text:"Schedule Management",display:"Team Schedules",route:"/team-schedules",selected:!1,default:!1},{text:"Employee Allocation",display:"Employee Allocations",route:"/employee-allocations",selected:!1,default:!1},{text:"Cost Report",display:"Cost Reports",route:"/cost-reports",selected:!1,default:!1}],selectedMenu:null}},computed:{userFullName:function(){var e=this.user;return e?"".concat(e.FirstName," ").concat(e.LastName):""},authorizedMenus:function(){for(var e=[],t=this.user.AccessibleMenus,a=this.menus,n=0;n<this.menus.length;n++){var c=a[n];-1!=t.indexOf(c.text)&&e.push(c)}return e}},methods:{selectMenu:function(e){this.$router.push(e.route),this.menus.forEach((function(e){e.selected=!1})),e.selected=!0},isSelected:function(e){return this.selectedMenu&&this.selectedMenu.text==e}},mounted:function(){var e=this,t=Object(c["o"])("MANAGE_COMPANY_CONFIG");if(!window.Affinity||window.Affinity&&!window.Affinity.user)console.log("no affinity requesting authInfo"),ce.AuthGetInfo().then((function(a){e.user=a;try{window.dispatchEvent(new CustomEvent("GAReady",{bubbles:!0,detail:{companyNumber:e.user.CompanyNo,employeeNumber:e.user.EmployeeNo,appVersion:"V2"}}))}catch(n){console.warn("GA tracking failed. Contact BenK.")}t.setAllowPersonal(a.AccessibleFeatures.includes("Personal Schedule")),t.setAllowSundayFirst(a.AccessibleFeatures.includes("Sunday First"))}));else{console.log("loading user from Affinity lib"),this.user=window.Affinity.user;try{window.dispatchEvent(new CustomEvent("GAReady",{bubbles:!0,detail:{companyNumber:this.user.CompanyNo,employeeNumber:this.user.EmployeeNo,appVersion:"V2"}}))}catch(l){console.warn("GA tracking failed. Contact BenK.")}t.setAllowPersonal(this.user.AccessibleFeatures.includes("Personal Schedule")),t.setAllowSundayFirst(this.user.AccessibleFeatures.includes("Sunday First"));var a=this.menus.find((function(t){return"/flex-schedule"===t.route?e.$route.path.indexOf(t.route)>-1:t.route===e.$route.path}));if(!a){var n=this.menus.find((function(e){return!0===e.default}));this.selectMenu(n)}}}}),ie=(a("ff5d"),a("6b0d")),se=a.n(ie);const oe=se()(le,[["render",O],["__scopeId","data-v-09187f16"]]);var re=oe,ue=function(e){return Object(c["A"])("data-v-7552ec18"),e=e(),Object(c["y"])(),e},de={class:"promt-box"},he={key:0,class:"mr-2 d-inline"},fe=ue((function(){return Object(c["h"])("img",{class:"loader-icon",src:"data:image/gif;base64,R0lGODlhEAAQAPQAADMzM8zMzDs7O3h4eERERKGhoYKCgszMzJaWlra2tmNjY1lZWb+/v21tbcjIyKqqqoyMjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="},null,-1)})),be=[fe],me=["innerHTML"],pe={key:0,class:"promptButtons mt-4"},Oe={class:"label text-capitalize"},je=ue((function(){return Object(c["h"])("span",{class:""}," ",-1)})),ye={class:"label text-capitalize"};function ge(e,t,a,n,l,i){var s=Object(c["F"])("modal");return Object(c["x"])(),Object(c["e"])(s,{ref:"alertModalRef",noBox:!0},{body:Object(c["R"])((function(){return[Object(c["h"])("div",de,[Object(c["h"])("div",null,[e.showLoader?(Object(c["x"])(),Object(c["g"])("div",he,be)):Object(c["f"])("",!0),Object(c["h"])("div",{class:"content",innerHTML:e.message},null,8,me)]),e.showButtons?(Object(c["x"])(),Object(c["g"])("div",pe,[Object(c["h"])("button",{type:"button",class:Object(c["r"])(["orange white--text small",{"mr-4":e.showCancel}]),tabindex:"9999998",onClick:t[0]||(t[0]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},[Object(c["h"])("span",Oe,Object(c["J"])(e.confirmButtonText),1)],2),je,e.showCancel?(Object(c["x"])(),Object(c["g"])("button",{key:0,class:"grey white--text small",small:"",tabindex:"9999999",onClick:t[1]||(t[1]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},[Object(c["h"])("span",ye,Object(c["J"])(e.cancelButtonText),1)])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])]})),_:1},512)}var ve={class:"modal-wrapper"},De={class:"modal-header"},Se={class:"modal-footer"};function ke(e,t,a,n,l,i){return Object(c["x"])(),Object(c["e"])(c["b"],{name:"modal"},{default:Object(c["R"])((function(){return[Object(c["h"])("div",null,[e.show?(Object(c["x"])(),Object(c["g"])("div",{key:0,class:"modal-mask",style:Object(c["s"])([e.modalIndex?{"z-index":e.modalIndex}:""])},[Object(c["h"])("div",ve,[Object(c["h"])("div",{class:"modal-backdrop",onClick:t[0]||(t[0]=function(){return e.clickWrapper&&e.clickWrapper.apply(e,arguments)})}),Object(c["h"])("div",{class:Object(c["r"])(["modal-box",{"no-modal-box":e.noBox}]),style:Object(c["s"])(e.getCustomPosition())},[Object(c["h"])("div",De,[Object(c["E"])(e.$slots,"header",{},void 0,!0)]),Object(c["h"])("div",{class:Object(c["r"])(["modal-body",{"no-overflow-auto-body":e.noOverflowAutoBody}])},[Object(c["E"])(e.$slots,"body",{},void 0,!0)],2),Object(c["h"])("div",Se,[Object(c["E"])(e.$slots,"footer",{},void 0,!0)])],6)])],4)):Object(c["f"])("",!0)])]})),_:3})}a("a9e3");var xe=Object(c["l"])({name:"modal",props:{customPosition:{type:Boolean,default:!1},top:{type:Number},left:{type:Number},noBox:{type:Boolean},modalIndex:{type:Number},noOverflowAutoBody:{type:Boolean,default:!1}},data:function(){return{show:!1}},methods:{toggleShow:function(e){this.show=!0===e||!1===e?e:!this.show},clickWrapper:function(){this.show=!1,this.$emit("cancel")},getCustomPosition:function(){if(this.customPosition){var e={position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px")};return window.innerWidth<=800&&(e.left="auto"),e}return""}}});a("def1");const we=se()(xe,[["render",ke],["__scopeId","data-v-1da62776"]]);var Ce=we,Ae=Object(c["l"])({name:"alert",components:{Modal:Ce},data:function(){return{dialog:!1,message:"some message ",showLoader:!1,showButtons:!1,showCancel:!1,confirmButtonText:"Ok",cancelButtonText:"Cancel"}},mounted:function(){var e=this;ly.on("alert",(function(t){console.log("emitter alert"),e.dialog=!0,e.message=t,e.showLoader=!1,e.showButtons=!0})),ly.on("dialog--loading--request",(function(t){console.log("emitter loading request"),e.dialog=!0,e.message=t,e.showCancel=!1,e.showButtons=!1,e.showLoader=!0})),ly.on("clearDialog",(function(){console.log("emitter clear dialog"),e.clearDialog(),e.dialog=!1})),ly.on("dialog",(function(t){console.log("emitter on dialog"),e.toggleShow(),e.dialog=!!t,e.message=t.message,e.showCancel=t.showCancel,e.showButtons=t.showButtons,e.showLoader=t.showLoader,e.confirmButtonText=t.confirmButtonText?t.confirmButtonText:"Ok",e.cancelButtonText=t.cancelButtonText?t.cancelButtonText:"Cancel",t.onOk&&(e.onOk=function(){t.onOk(),e.dialog=!1,e.toggleShow()}),t.onCancel&&(e.onCancel=function(){t.onCancel(),e.dialog=!1,e.toggleShow()})}))},methods:{clearDialog:function(){this.$refs.alertModalRef.toggleShow(!1)},toggleShow:function(){this.$refs.alertModalRef.toggleShow()},onOk:function(){this.$refs.alertModalRef.toggleShow()},onCancel:function(){this.$refs.alertModalRef.toggleShow()}}});a("ca4a");const Te=se()(Ae,[["render",ge],["__scopeId","data-v-7552ec18"]]);var Ee=Te,Me={key:0,class:"UIPromtBoxBG"},Fe=Object(c["h"])("div",{class:"UIPromtBox loader"},[Object(c["h"])("span",{class:"img-loader"}),Object(c["h"])("span",{class:"content aligncenter"},"Please wait")],-1),Ne=[Fe],Pe={key:1,class:"UIPromtBoxBG"},Ie={class:"UIPromtBox error-text"},Ye=Object(c["h"])("br",null,null,-1),Le={key:2,class:"pagewrapper"},Re={class:"pagecontent"},He={class:"contentwrapper"};function We(e,t,a,n,l,i){var s=Object(c["F"])("dash-header"),o=Object(c["F"])("navbar"),r=Object(c["F"])("dash-footer");return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])({dashboard:l.enabled,"show-nav":l.showNav,"hide-nav":l.hideNav})},[l.loading?(Object(c["x"])(),Object(c["g"])("div",Me,Ne)):l.error?(Object(c["x"])(),Object(c["g"])("div",Pe,[Object(c["h"])("div",Ie,[Object(c["h"])("span",null,Object(c["J"])(l.error),1),Ye,Object(c["h"])("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=function(){return i.reloadPage&&i.reloadPage.apply(i,arguments)})},"Please retry")])])):(Object(c["x"])(),Object(c["g"])("div",Le,[Object(c["k"])(s,{title:i.userFullName,logoUrl:i.logoUrl,onNavtoggle:i.onNavToggle},null,8,["title","logoUrl","onNavtoggle"]),Object(c["k"])(o,{apps:l.apps,"logout-url":a.logoutUrl,onHide:i.onNavHide},null,8,["apps","logout-url","onHide"]),Object(c["h"])("div",Re,[Object(c["h"])("div",He,[Object(c["E"])(e.$slots,"default")])]),Object(c["k"])(r,{version:a.version},null,8,["version"])]))],2)}var Be={class:"dash-header"},Ve={id:"desktop-nav-toggle",class:"dash-menu-toggle"},$e={class:"dash-header-title displayname"},Ue={class:"dash-header-logo"},Je=["src"];function _e(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Be,[Object(c["h"])("div",{id:"mobile-nav-toggle",class:"dash-menu-toggle",onMousedown:t[1]||(t[1]=Object(c["U"])((function(){}),["stop"]))},[Object(c["h"])("span",{class:"icon-list",onClick:t[0]||(t[0]=function(t){return e.$emit("navtoggle",!0)})})],32),Object(c["h"])("div",Ve,[Object(c["h"])("span",{class:"icon-list",onClick:t[2]||(t[2]=function(t){return e.$emit("navtoggle",!1)})})]),Object(c["h"])("div",$e,Object(c["J"])(a.title),1),Object(c["h"])("div",Ue,[Object(c["h"])("img",{src:a.logoUrl},null,8,Je)])])}var Ge={props:{title:String,logoUrl:String}};const Ke=se()(Ge,[["render",_e]]);var ze=Ke,Qe={class:"top"},qe={class:"bottom"},Xe=Object(c["h"])("div",{class:"divider"},null,-1),Ze=["href"],et=Object(c["h"])("span",{class:"dash-nav-item-inner"},[Object(c["h"])("span",{class:"icon icon-logout"}),Object(c["h"])("span",{class:"label"},"Logout")],-1),tt=[et];function at(e,t,a,n,l,i){var s=Object(c["F"])("nav-item"),o=Object(c["F"])("scrollable");return Object(c["x"])(),Object(c["g"])("div",{id:"dash-nav",class:"dash-nav accordion",onMousedown:t[0]||(t[0]=function(){return i.onMouseDown&&i.onMouseDown.apply(i,arguments)})},[Object(c["h"])("div",Qe,[Object(c["k"])(o,{"scroll-x":!1},{default:Object(c["R"])((function(){return[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(i.enabledApps,(function(e,t){return Object(c["x"])(),Object(c["e"])(s,{data:e,key:t},null,8,["data"])})),128))]})),_:1})]),Object(c["h"])("div",qe,[Xe,Object(c["h"])("a",{class:"dash-nav-item",href:i.signoutUrl},tt,8,Ze)])],32)}var nt=["href","target"],ct=Object(c["h"])("span",{class:"sub-nav-icon icon-arrow-line-small-up"},null,-1),lt={class:"label"},it={key:0,ref:"menu",class:"sub-nav"};function st(e,t,a,n,l,i){var s=Object(c["F"])("nav-item",!0);return Object(c["x"])(),Object(c["g"])("a",{class:Object(c["r"])(["dash-nav-item",{selected:i.selected,"has-sub-nav":i.hasMenu,expanded:!l.expanding}]),href:i.url,target:i.target},[Object(c["h"])("div",{class:"dash-nav-item-inner",onClick:t[0]||(t[0]=function(){return i.toggleMenu&&i.toggleMenu.apply(i,arguments)})},[ct,Object(c["h"])("span",{class:Object(c["r"])("icon icon-"+a.data.Icon)},null,2),Object(c["h"])("span",lt,Object(c["J"])(a.data.Text||a.data.Name),1)]),i.hasMenu&&l.expanded?(Object(c["x"])(),Object(c["g"])("div",it,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(a.data.Menu,(function(e,t){return Object(c["x"])(),Object(c["e"])(s,{data:e,"is-owned":!0,key:t},null,8,["data"])})),128))],512)):Object(c["f"])("",!0)],10,nt)}var ot=a("c909"),rt=a.n(ot),ut=a("cffa"),dt=a("5c40"),ht={name:"nav-item",props:{data:{type:Object,default:function(){return{}}},host:String,isOwned:Boolean},data:function(){return{expanded:!1,expanding:!1}},computed:{target:function(){return this.data.External?this.data.Name||"_blank":"_self"},selected:function(){var e=new rt.a(this.url).path().toLowerCase();return!this.isOwned&&Affinity.app==this.data.Name||"/"!==e&&e===window.location.pathname.toLowerCase()||"/cleverforms/inbox"===e&&"/inbox"===window.location.pathname.toLowerCase()||"/cleverforms/template"===e&&"/template"===window.location.pathname.toLowerCase()||"/cleverforms/admin"===e&&"/admin"===window.location.pathname.toLowerCase()},hasMenu:function(){return this.data.Menu&&this.data.Menu.length>0},url:function(){return this.hasMenu?"javascript:void(0);":this.data.Url}},methods:{toggleMenu:function(){var e=this;this.hasMenu&&(this.expanding=!this.expanded,this.expanding?(this.expanded=!0,Object(dt["w"])((function(){ut["a"].from(e.$refs.menu,{duration:.25,height:0})}))):ut["a"].to(this.$refs.menu,{duration:.25,height:0,onComplete:function(){e.expanded=!1}}))}},mounted:function(){this.expanded=this.selected&&this.hasMenu,this.expanding=this.expanded}};const ft=se()(ht,[["render",st]]);var bt=ft,mt={ref:"container",class:"scrollable"};function pt(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",mt,[Object(c["E"])(e.$slots,"default")],512)}var Ot=a("b7f5"),jt=a("eec4"),yt=a.n(jt),gt=(a("7da8"),{props:{scrollX:{type:Boolean,default:!0},scrollY:{type:Boolean,default:!0}},data:function(){return{ps:null,resizeDetector:yt()({strategy:"scroll"})}},methods:{onResize:function(){this.ps&&this.ps.update(this.$refs.container)}},mounted:function(){this.ps=new Ot["a"](this.$refs.container,{suppressScrollX:!this.scrollX,suppressScrollY:!this.scrollY}),this.resizeDetector.listenTo(this.$refs.container,this.onResize);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.listenTo(t,this.onResize)}},beforeUnmount:function(){this.resizeDetector.uninstall(this.$refs.container);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.uninstall(t)}}});const vt=se()(gt,[["render",pt]]);var Dt=vt,St={props:{apps:Array,logoutUrl:String},data:function(){return{mousedown:!1}},computed:{enabledApps:function(){if(this.apps instanceof Array){var e=[];return this.apps.forEach((function(t){t&&t.Enabled&&e.push(t)})),e}return[]},signoutUrl:function(){if(this.logoutUrl)return this.logoutUrl;for(var e=this.apps[0].Url,t=1;t<this.apps.length;t++){var a=this.apps[t];if(a&&a.Name==Affinity.app)return e+"/Root/ExternalLogout?redirectUrl="+encodeURI(a.Url)}return"/Auth/SignOut"}},methods:{onMouseDown:function(){this.mousedown=!0},onBodyMouseDown:function(e){this.mousedown||this.$emit("hide"),this.mousedown=!1}},created:function(){document.body.addEventListener("mousedown",this.onBodyMouseDown)},beforeUnmount:function(){document.body.removeEventListener("mousedown",this.onBodyMouseDown)},components:{NavItem:bt,Scrollable:Dt}};const kt=se()(St,[["render",at]]);var xt=kt,wt={class:"dash-footer"},Ct={key:0,class:"version"},At=Object(c["h"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},"Affinity Employer Services",-1),Tt=Object(c["h"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},[Object(c["h"])("span",{class:"dash-footer-logo"})],-1);function Et(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",wt,[a.version?(Object(c["x"])(),Object(c["g"])("span",Ct,"Version "+Object(c["J"])(a.version),1)):Object(c["f"])("",!0),Object(c["j"])(" © Copyright "+Object(c["J"])(i.year)+" Affinity - ",1),At,Tt])}var Mt={props:{version:String},computed:{year:function(){return(new Date).getFullYear()}}};const Ft=se()(Mt,[["render",Et]]);var Nt=Ft,Pt=(a("e439"),a("a273"),a("8241"),a("9ede"),a("69af"),{props:{version:String,enableByConfig:Boolean,configUrl:String,infoUrl:String,logoutUrl:String,legacyAuth:Boolean},data:function(){return{user:null,error:null,apps:[{Enabled:!0,Name:"Dashboard",Url:"",Icon:"gauge"}],loading:!0,enabled:!0,showNav:!1,hideNav:!1}},computed:{userFullName:function(){return this.user?"".concat(this.user.FirstName," ").concat(this.user.LastName):""},logoUrl:function(){var e=this.apps[0].Url;return e&&this.user?"".concat(e,"/Root/Logo?company=").concat(this.user.CompanyNo,"&employee=").concat(this.user.EmployeeNo):""}},methods:{authorize:function(e){var t=this;if(console.log("dashboard authorize"),Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_LOCAL1){var a={FirstName:"Norah",LastName:"Barlow",CompanyNo:5004,EmployeeNo:100603,UseDashboard:!0,AccessibleMenus:["Work Schedule","Schedule Management","Employee Allocation"]},n=Affinity.user=this.legacyAuth?{FirstName:a.Firstname,LastName:a.Lastname,PayPoint:a.PayPoint,CompanyNo:a.CompanyNumber,EmployeeNo:a.EmployeeNumber}:a;this.enabled=!this.enableByConfig||n.UseDashboard,e&&e()}else{var c={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.legacyAuth?Affinity.authroot+"/GetUser":this.infoUrl};g()(c).then((function(a){var n=Affinity.user=t.legacyAuth?{FirstName:a.data.Firstname,LastName:a.data.Lastname,PayPoint:a.data.PayPoint,CompanyNo:a.data.CompanyNumber,EmployeeNo:a.data.EmployeeNumber}:a.data;t.enabled=!t.enableByConfig||n.UseDashboard,e&&e()})).catch((function(e){console.log("err",e),t.error="Unable to load the page.",t.loading=!1}))}},getConfig:function(){var e=this,t={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.configUrl};g()(t).then((function(t){var a=t.data;e.user=Affinity.user,e.apps[0].Url=a.Url,a.Apps&&a.Apps.forEach((function(t){e.apps.push(t.Link)})),a.Forms&&e.user.EmployeeNo<=5e6&&a.Forms.forEach((function(t){t.Enabled&&e.apps.push(t)})),e.loading=!1,Object(dt["w"])((function(){e.$emit("ready",a)}))})).catch((function(){e.error="Unable to load the page."})).then((function(){e.loading=!1}))},reloadPage:function(){window.location.reload()},onNavToggle:function(e){e?this.showNav=!this.showNav:this.hideNav=!this.hideNav},onNavHide:function(){this.showNav=!1}},created:function(){var e=this;console.log("dashboard created"),this.authorize((function(){e.enabled?e.getConfig():e.loading=!1}))},components:{"dash-header":ze,navbar:xt,"dash-footer":Nt}});a("86cf");const It=se()(Pt,[["render",We]]);var Yt,Lt,Rt,Ht,Wt=It,Bt=Wt,Vt=a("5502"),$t=a("ade3"),Ut=a("3835"),Jt=a("5530"),_t=(a("c1f9"),a("d81d"),a("4fad"),a("fb6a"),a("2ef0")),Gt=a.n(_t),Kt=a("c1df"),zt=a.n(Kt),Qt={date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:"",scheduleType:""};(function(e){e["loadTargetSchedule"]="LOAD_TARGET_SCHEDULE",e["loadFlexiSchedules"]="LOAD_FLEXI_SCHEDULES"})(Rt||(Rt={})),function(e){e["clearForm"]="CLEAR_FORM",e["setScheduleDay"]="SET_SCHEDULE_DAY",e["saveScheduleDayToWeek"]="SAVE_SCHEDULE_DAY_TO_WEEK",e["saveRemoteData"]="SAVE_REMOTE_DATA",e["updateEditConfig"]="UPDATE_EDIT_CONFIG",e["createNewScheduleDay"]="CREATE_NEW_SCHEDULE_DAY",e["setAnalysisData"]="SET_ANALYSIS_DATA",e["setConfigAllTrue"]="SET_CONFIG_ALL_TRUE"}(Ht||(Ht={}));var qt=(Yt={},Object($t["a"])(Yt,Ht.clearForm,(function(e){e.flexScheduleDay=Object(Jt["a"])({},Qt)})),Object($t["a"])(Yt,Ht.createNewScheduleDay,(function(e,t){e.flexScheduleDay=Qt,e.flexScheduleDay.scheduleType="",e.selectedFlexDay=t})),Object($t["a"])(Yt,Ht.setScheduleDay,(function(e,t){e.selectedFlexDay=t,e.flexScheduleDay.startTime=t.startTime,e.flexScheduleDay.endTime=t.endTime,e.flexScheduleDay.hours=t.hours,e.flexScheduleDay.scheduleType=t.scheduleType;var a=Object.fromEntries(Object.entries(t.scheduleDetail).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})));e.flexScheduleDay=Gt.a.merge({},e.flexScheduleDay,a)})),Object($t["a"])(Yt,Ht.saveScheduleDayToWeek,(function(e){e.selectedFlexDay?(e.selectedFlexDay.startTime=e.flexScheduleDay.startTime,e.selectedFlexDay.endTime=e.flexScheduleDay.endTime,e.selectedFlexDay.scheduleDetail=Gt.a.merge({},e.selectedFlexDay.scheduleDetail,e.flexScheduleDay)):console.error("missing selected flex day")})),Object($t["a"])(Yt,Ht.updateEditConfig,(function(e,t){e.editFlexScheduleDayConfig=Gt.a.clone(t)})),Object($t["a"])(Yt,Ht.setAnalysisData,(function(e,t){e.analysisHoursChartData=t})),Object($t["a"])(Yt,Ht.saveRemoteData,(function(e,t){e.flexScheduleRemoteData=t})),Object($t["a"])(Yt,Ht.setConfigAllTrue,(function(e,t){e.flexScheduleCellSetting.showHours.value=!0,e.flexScheduleCellSetting.showBreakLength.value=!0,e.flexScheduleCellSetting.showShiftId.value=!0,e.flexScheduleCellSetting.showPosition.value=!0})),Yt),Xt=(Lt={},Object($t["a"])(Lt,Rt.loadTargetSchedule,(function(e,t){e.commit;ce.GetFlexScheduleDetail(t).then((function(e){console.log("GetFlexScheduleDetail",e)}))})),Object($t["a"])(Lt,Rt.loadFlexiSchedules,(function(e,t){var a=e.commit,n={employeeNo:Affinity.user.EmployeeNo,startDate:t.startDate.format("YYYY-MM-DD"),endDate:t.endDate.format("YYYY-MM-DD"),forManagedEmployees:!0};return ce.GetFlexSchedules(n).then((function(e){var t=e.FlexSchedules;t.forEach((function(e){e.id=e.Id,e.date=e.Date,e.employeeName=e.EmployeeName,e.employeeNo=e.EmployeeNo,e.startTime=e.StartTime?zt()(e.StartTime).format("HH:mm"):"",e.endTime=e.EndTime?zt()(e.EndTime).format("HH:mm"):"",e.hours=e.Hours,e.scheduleDetail=e.ScheduleData,e.scheduleDetail.breakLength=e.scheduleDetail.BreakLength,e.scheduleDetail.position=e.scheduleDetail.Position,e.scheduleDetail.positionTitle=e.scheduleDetail.PositionTitle,e.scheduleDetail.shiftId=e.scheduleDetail.ShiftId,e.scheduleDetail.costElement1=e.scheduleDetail.CostElement1,e.scheduleDetail.costElement2=e.scheduleDetail.CostElement2,e.scheduleType=e.ScheduleType,e.publishStatus=e.PublishStatus,e.isPaid=e.IsPaid,e.dayInWeek=zt()(e.Date).day()})),a(Ht.saveRemoteData,t);var n=e.Unavailabilities.map((function(e){return{id:e.EmpAvailability.Id,unavailabilityDate:e.UnavailabilityDate,employeeNo:e.EmpAvailability.EmployeeNo,startTime:e.EmpAvailability.StartTime,endTime:e.EmpAvailability.EndTime,reason:e.EmpAvailability.Reason}}));return{flexSchedules:t,unAvailabilities:n}}))})),Lt),Zt={state:{selectedDate:zt()(),calendarFocusDate:zt()(),selectedFlexDay:null,defaultWorkTypes:null,analysisHoursChartData:null,flexScheduleRemoteData:null,flexScheduleDay:{date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:"",scheduleType:""},editFlexScheduleDayConfig:{startTime:!1,endTime:!1,hours:!1,breakLength:!1,shiftId:!1,position:!1,costElement1:!1,costElement2:!1},scheduleWeek:[],flexScheduleCellSetting:{showHours:{value:!1,name:"Net Hours"},showBreakLength:{value:!1,name:"Break Length"},showShiftId:{value:!1,name:"Shift ID"},showPosition:{value:!1,name:"Position"}}},mutations:qt,actions:Xt},ea=Zt;function ta(e){if(!e)return"";var t="Hmm";e.includes(":")&&(t="H:mm");var a=zt()(e,t);return a.isValid()?a.format("HH:mm"):"Invalid Time"}function aa(){return window.innerWidth<1200}var na={parseTimeColumn:ta},ca={name:"App",components:{Dashboard:Bt,schedulesNavigation:re,Alert:Ee},setup:function(){var e=Object(Vt["b"])();function t(){var t=localStorage.getItem("clientStorageVersion");if("0.11"!==t)localStorage.clear(),localStorage.setItem("clientStorageVersion","0.11"),localStorage.setItem("flexScheduleCellSetting",JSON.stringify(e.state.FlexSchedule.flexScheduleCellSetting));else for(var a=e.state.FlexSchedule.flexScheduleCellSetting,n=JSON.parse(localStorage.getItem("flexScheduleCellSetting")),c=0,l=Object.keys(n);c<l.length;c++){var i=l[c];a[i]&&(a[i]=n[i])}}aa()?e.commit(Ht.setConfigAllTrue):t()},mounted:function(){console.log("app vue created")}};a("15bf");const la=se()(ca,[["render",i]]);var ia=la,sa=a("6c02"),oa={class:"mt-4 mt-md-10"},ra={class:"my-schedules-search-filter d-flex flex-wrap align-center mb-sm-4"},ua={class:"mr-2 mr-sm-6 date-searcher d-flex align-center"},da=Object(c["h"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date From",-1),ha=["value"],fa=Object(c["h"])("span",{class:"icon-popup white xs-icon"},null,-1),ba=[fa],ma=Object(c["h"])("span",{class:"icon-calendar white xs-icon"},null,-1),pa=[ma],Oa=Object(c["h"])("span",{class:"icon-cross white"},null,-1),ja=[Oa],ya={class:"date-searcher d-flex align-center ml-4"},ga=Object(c["h"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date To",-1),va=["value"],Da=Object(c["h"])("span",{class:"icon-popup white","x-small":""},null,-1),Sa=[Da],ka=Object(c["h"])("span",{class:"icon-calendar white","x-small":""},null,-1),xa=[ka],wa=Object(c["h"])("span",{class:"icon-cross white","x-small":""},null,-1),Ca=[wa],Aa=Object(c["h"])("span",{class:"mr-1 icon-printer","x-small":""},null,-1),Ta=Object(c["h"])("span",{class:"text-capitalize"},"Print",-1),Ea=[Aa,Ta],Ma={style:{"margin-top":"10px"}},Fa={class:"schedules-data-small",style:{overflow:"auto"}},Na={class:"",style:{width:"100%"}},Pa={class:"weekInfoDisplay py-2"},Ia={class:"schedules-data-small-head"},Ya={class:"dayScheduleDisplay"},La={key:0},Ra={key:0},Ha={key:1},Wa={key:2},Ba={id:"workSchedules",class:"schedules-data-medium section",style:{overflow:"auto"}},Va={class:"my-schedules aff-table"},$a={key:0},Ua=Object(c["h"])("th",null,"Week",-1),Ja=Object(c["h"])("th",null,"Sun",-1),_a=Object(c["h"])("th",null,"Mon",-1),Ga=Object(c["h"])("th",null,"Tue",-1),Ka=Object(c["h"])("th",null,"Wed",-1),za=Object(c["h"])("th",null,"Thu",-1),Qa=Object(c["h"])("th",null,"Fri",-1),qa=Object(c["h"])("th",null,"Sat",-1),Xa=[Ua,Ja,_a,Ga,Ka,za,Qa,qa],Za={key:1},en=Object(c["h"])("th",null,"Week",-1),tn=Object(c["h"])("th",null,"Mon",-1),an=Object(c["h"])("th",null,"Tue",-1),nn=Object(c["h"])("th",null,"Wed",-1),cn=Object(c["h"])("th",null,"Thu",-1),ln=Object(c["h"])("th",null,"Fri",-1),sn=Object(c["h"])("th",null,"Sat",-1),on=Object(c["h"])("th",null,"Sun",-1),rn=[en,tn,an,nn,cn,ln,sn,on],un={class:"myschedules-tr"},dn={class:"weekInfoRows"},hn={class:"myschedules-td"},fn={key:0},bn={class:"bold-text"},mn={key:0},pn={key:1};function On(e,t){var a=Object(c["F"])("date-picker"),n=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",oa,[Object(c["h"])("div",ra,[Object(c["h"])("div",ua,[da,Object(c["h"])("input",{value:e.$filters.reformatDate(e.fromDate),class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.fromDate,"fromDate")}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")}),"onClick:clear":t[2]||(t[2]=function(t){return e.fromDate=null})},null,40,ha),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",onClick:t[3]||(t[3]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")})},ba)),[[n,{content:"Open calendar"},void 0,{top:!0}]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"green small px-aff-10 lh-0",onClick:t[4]||(t[4]=function(t){return e.selectDateTodayForFromDate()})},pa)),[[n,{content:"Set to today"},void 0,{top:!0}]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"orange small px-aff-10 lh-0",onClick:t[5]||(t[5]=function(t){return e.fromDate=null})},ja)),[[n,{content:"Clear"},void 0,{top:!0}]])]),Object(c["h"])("div",ya,[ga,Object(c["h"])("input",{value:e.$filters.reformatDate(e.toDate),outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[6]||(t[6]=function(t){return e.updateDateText(t,e.toDate,"toDate")}),onClick:t[7]||(t[7]=function(t){return e.updateDateTime(t,e.toDate,"toDate")}),"onClick:clear":t[8]||(t[8]=function(t){return e.toDate=null})},null,40,va),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",tile:"",onClick:t[9]||(t[9]=function(t){return e.updateDateTime(t,e.toDate,"toDate")})},Sa)),[[n,{content:"Open calendar"},void 0,{top:!0}]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"green small px-aff-10 lh-0",tile:"",onClick:t[10]||(t[10]=function(t){return e.selectDateTodayForToDate()})},xa)),[[n,{content:"Set to today"},void 0,{top:!0}]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{class:"orange small px-aff-10 lh-0",tile:"",onClick:t[11]||(t[11]=function(t){return e.toDate=null})},Ca)),[[n,{content:"Clear"},void 0,{top:!0}]])]),Object(c["h"])("button",{class:"light-blue white--text ml-4 ml-sm-4 mt-sm-0 px-aff-10 small",onClick:t[12]||(t[12]=function(t){return e.printWorkSchedule()})},Ea)]),Object(c["h"])("div",Ma,[Object(c["h"])("div",Fa,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.schedules,(function(t){return Object(c["x"])(),Object(c["g"])("div",Na,[Object(c["h"])("div",Pa,[Object(c["h"])("div",Ia,[Object(c["h"])("div",null,[Object(c["h"])("h3",null,Object(c["J"])(t.weekName),1)]),Object(c["h"])("div",null,Object(c["J"])(t.weekDateRange),1)])]),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(t.detailArr,(function(a,n){return Object(c["x"])(),Object(c["g"])("div",Ya,[Object(c["h"])("div",null,Object(c["J"])(t.weekName)+" - "+Object(c["J"])(e.getWeekDayByIndex(n)),1),e.displayScheduleDetail(a)?(Object(c["x"])(),Object(c["g"])("div",La,[Object(c["h"])("div",null,Object(c["J"])(a.shiftDescription),1),a.startTime?(Object(c["x"])(),Object(c["g"])("div",Ra,"Start Time:"+Object(c["J"])(a.startTime),1)):Object(c["f"])("",!0),a.finishTime?(Object(c["x"])(),Object(c["g"])("div",Ha,"Finish Time:"+Object(c["J"])(a.finishTime),1)):Object(c["f"])("",!0),a.hours?(Object(c["x"])(),Object(c["g"])("div",Wa,"Hours:"+Object(c["J"])(a.hours),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])})),256))])})),256))]),Object(c["h"])("div",Ba,[Object(c["h"])("div",Va,[Object(c["h"])("table",null,[Object(c["h"])("thead",null,[e.sundayFirst?(Object(c["x"])(),Object(c["g"])("tr",$a,Xa)):(Object(c["x"])(),Object(c["g"])("tr",Za,rn))]),Object(c["h"])("tbody",null,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.schedules,(function(t){return Object(c["x"])(),Object(c["g"])("tr",un,[Object(c["h"])("td",dn,[Object(c["h"])("div",null,Object(c["J"])(t.weekName),1),Object(c["h"])("div",null,Object(c["J"])(t.weekDateRange),1)]),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(t.detailArr,(function(t){return Object(c["x"])(),Object(c["g"])("td",hn,[e.displayScheduleDetail(t)?(Object(c["x"])(),Object(c["g"])("div",fn,[Object(c["h"])("div",null,Object(c["J"])(t.date),1),Object(c["h"])("div",bn,Object(c["J"])(t.shiftDescription),1),t.hours?(Object(c["x"])(),Object(c["g"])("div",mn,"Hours:"+Object(c["J"])(t.hours),1)):Object(c["f"])("",!0),t.startTime?(Object(c["x"])(),Object(c["g"])("div",pn,Object(c["J"])(t.startTime)+" - "+Object(c["J"])(t.finishTime),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])})),256))])})),256))])])])])]),Object(c["k"])(a,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,"max-date":e.datePickerMax,"min-date":e.datePickerMin,date:e.datePickerTargetDay},null,8,["top","leftInput","max-date","min-date","date"])])}a("ddb0");function jn(){ly.emit("dialog",{message:"here is a test dialog",showButtons:!0,showCancel:!0,okColor:"orange"})}function yn(e){ly.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){e.onOk()},onCancel:function(){e.onCancel&&e.onCancel()}})}function gn(e){return new Promise((function(t,a){ly.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){t("ok")},onCancel:function(){a("cancel")}})}))}function vn(e){ly.emit("dialog",{dialog:!0,message:e,showLoader:!1,showButtons:!0,onOk:function(){},onCancel:function(){}})}function Dn(e){ly.emit("dialog",{dialog:!0,message:e||"Loading",showCancel:!1,showButtons:!1,showLoader:!0})}function Sn(){ly.emit("clearDialog")}var kn={testDialog:jn,loading:Dn,clear:Sn,checkChange:yn,alert:vn,confirmOrCancel:gn},xn={class:"v3-calendar"},wn={class:"dp-heading"},Cn={class:"db-content"},An={class:"dp-week-of-day"},Tn={class:"dp-week-days"},En={class:"date-wrapper"},Mn=["onClick"];function Fn(e,t){var a=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(a,{ref:"ModalRef",top:e.top,left:e.calculateLeft(e.left),customPosition:!(!e.top&&!e.left),onCancel:e.cancelPickDate},{body:Object(c["R"])((function(){return[Object(c["h"])("div",xn,[Object(c["h"])("section",wn,[Object(c["h"])("span",{class:"icon-arrow-left",onClick:t[0]||(t[0]=function(){return e.previousMonth&&e.previousMonth.apply(e,arguments)})}),Object(c["h"])("div",null,Object(c["J"])(e.selectedDate.format("YYYY MMM")),1),Object(c["h"])("span",{class:"icon-arrow-right",onClick:t[1]||(t[1]=function(){return e.nextMonth&&e.nextMonth.apply(e,arguments)})})]),Object(c["h"])("section",Cn,[Object(c["h"])("div",An,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.weekOfDays,(function(e){return Object(c["x"])(),Object(c["g"])("span",null,Object(c["J"])(e.shortName),1)})),256))]),Object(c["h"])("div",Tn,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.calendarArr,(function(t){return Object(c["x"])(),Object(c["g"])("span",En,[Object(c["h"])("span",{class:Object(c["r"])(["date-number-cell",{"today-target":e.colorToday(t),"not-valid":!t.isValid,"last-month-day":t.lastMonth,"next-month-day":t.nextMonth,selected:t.selected}]),onClick:function(a){return e.selectDate(t)}},Object(c["J"])(t.dateNumber),11,Mn)])})),256))])])])]})),_:1},8,["top","left","customPosition","onCancel"])}var Nn=Object(c["l"])({name:"DatePicker",components:{Modal:Ce},props:{top:{type:Number},leftInput:{type:Number},date:{type:Object},maxDate:{type:Object},minDate:{type:Object}},data:function(){return{left:0,currentYear:2021,datePickerPromise:null,resolve:null,reject:null,selectedDate:zt()(),weekOfDays:[{fullName:"Sunday",shortName:"Sun",dayNumber:0},{fullName:"Monday",shortName:"Mon",dayNumber:1},{fullName:"Tuesday",shortName:"Tue",dayNumber:2},{fullName:"Wednesday",shortName:"Wed",dayNumber:3},{fullName:"Thursday",shortName:"Thu",dayNumber:4},{fullName:"Friday",shortName:"Fri",dayNumber:5},{fullName:"Saturday",shortName:"Sat",dayNumber:6}]}},setup:function(){var e=Object(c["C"])([]),t=Object(c["C"])();return t.value=zt()().month(),{currentMonth:t,calendarArr:e}},mounted:function(){var e=this;this.calculateMonth(),this.datePickerPromise=new Promise((function(t,a){e.resolve=t,e.reject=a}))},watch:{maxDate:function(){this.selectedDate?this.calculateBaseOnInput(this.selectedDate):this.calculateBaseOnInput()},minDate:function(){this.selectedDate?this.calculateBaseOnInput(this.selectedDate):this.calculateBaseOnInput()}},methods:{cancelPickDate:function(){this.reject()},calculateLeft:function(){return this.leftInput?(window.innerWidth<this.leftInput+370?this.left=window.innerWidth-400:this.left=this.leftInput,this.left):0},nextMonth:function(){this.currentMonth=this.currentMonth+1,this.calculateMonth()},previousMonth:function(){this.currentMonth=this.currentMonth-1,this.calculateMonth()},colorToday:function(e){var t=zt()();return t.year()===e.year&&t.month()+1===e.month&&t.date()===e.dateNumber},selectDateOnly:function(e){var t,a=Object(n["a"])(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var c=t.value;c.year===e.year()&&c.month===e.month()+1&&c.dateNumber===e.date()?c.selected=!0:c.selected=!1}}catch(l){a.e(l)}finally{a.f()}},selectDate:function(e){this.selectedDate=this.selectedDate.date(e.dateNumber);var t,a=Object(n["a"])(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var c=t.value;c.selected=!1}}catch(l){a.e(l)}finally{a.f()}e.selected=!0,this.$refs.ModalRef.toggleShow(),this.resolve(this.selectedDate.clone())},calculateMonth:function(e){e||(e=zt()(),this.currentYear&&e.year(this.currentYear));var t=e.clone().month(this.currentMonth),a=t.startOf("month").day(),n=t.endOf("month").day(),c=[],l=t.clone().date(0).date(),i=l-(a-1);for(i;i<=l;i++)c.push({year:t.clone().date(0).year(),month:t.clone().date(0).month()+1,dateNumber:i,selected:!1,lastMonth:!0});var s=1,o=t.clone().endOf("month").date();for(s;s<=o;s++)c.push({year:t.year(),month:t.month()+1,isValid:this.validDateRange(this.maxDate,this.minDate,t.clone().startOf("month").date(s)),dateNumber:s,selected:!1});var r=1,u=7-n-1;for(r;r<=u;r++)c.push({year:t.clone().add(1,"month").year(),month:t.clone().add(1,"month").month()+1,dateNumber:r,selected:!1,nextMonth:!0});this.calendarArr=c,t.endOf("month").date()<=this.selectedDate.date()?this.selectedDate=t.endOf("month").clone():this.selectedDate=t.date(this.selectedDate.date())},validDateRange:function(e,t,a){return e&&t?a.diff(e,"day")<0&&a.diff(t,"day")>0:e?a.diff(e,"day")<0:!t||a.diff(t,"day")>0},calculateBaseOnInput:function(e){e?(this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year(),this.selectDateOnly(e)):(e=zt()(),this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year())},toggleShow:function(e){var t=this;return e?this.calculateBaseOnInput(e):this.calculateBaseOnInput(),this.$refs.ModalRef.toggleShow(),this.datePickerPromise=new Promise((function(e,a){t.resolve=e,t.reject=a})),this.waitPickDate()},waitPickDate:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.datePickerPromise);case 1:case"end":return t.stop()}}),t)})))()}}});a("dfcd");const Pn=se()(Nn,[["render",Fn],["__scopeId","data-v-e9bf1cfe"]]);var In,Yn=Pn;(function(e){e["fromDate"]="fromDate",e["toDate"]="toDate"})(In||(In={}));var Ln=Object(c["l"])({name:"mySchedules",components:{DatePicker:Yn},inject:{manageCompanyConfig:"MANAGE_COMPANY_CONFIG"},data:function(){return{title:"Work Schedule",schedules:[],user:null,datePickerFormat:"dd/MM/yyyy",sundayFirst:!1,menu1:!1,menu2:!1,fromDate:null,toDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:zt()(),selectedDateType:In.fromDate,datePickerMax:null,datePickerMin:null}},mounted:function(){this.sundayFirst=!!this.manageCompanyConfig.getAllowSundayFirst();var e=this.convertDateRange(zt()(),zt()()),t=Object(Ut["a"])(e,2);this.fromDate=t[0],this.toDate=t[1],this.loadSchedules(this.fromDate,this.toDate)},methods:{updateDateText:function(e,t,a){"toDate"===a?this.toDate=zt()(e.target.value,"DD/MM/YYYY"):this.fromDate=zt()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.selectedDateType=a,"toDate"===a?(this.fromDate&&(this.datePickerMin=this.fromDate,this.datePickerMax=null),this.datePickerTargetDay=this.toDate?this.toDate:zt()()):(this.toDate&&(this.datePickerMin=null,this.datePickerMax=this.toDate),this.datePickerTargetDay=this.fromDate?this.fromDate:zt()()),this.dateModal=!0,this.openDatePicker()},printWorkSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("workSchedules").innerHTML,a=window.open("","Print",e);a.document.write("<html>"),a.document.write("<head>"),a.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),a.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),a.document.write("</head>"),a.document.write("<body>"),a.document.write(t),a.document.write("</body></html>"),a.document.close(),a.focus(),a.print(),a.close()},loadSchedules:function(e,t){var a=this;if(null!==e&&e.startOf("day"),null!==t&&""!==t&&t.startOf("day"),this.schedules=[],null!==t||null!==e){null!==t&&null===e&&(e=t),null===t&&null!==e&&(t=e);var c=this.convertDateRange(this.fromDate,this.toDate),l=Object(Ut["a"])(c,2),i=l[0],s=l[1],o={employeeNo:null,fromDate:null,toDate:null};if(null!==i&&null!==s){var r=i.format("DD/MM/YYYY"),u=s.format("DD/MM/YYYY");o={employeeNo:window.Affinity.user.EmployeeNo,fromDate:r,toDate:u}}kn.loading(),ce.EmployeeWorkSchedule(o).then((function(e){var t,c=e,l=Object(n["a"])(c.entries());try{for(l.s();!(t=l.n()).done;){var i=Object(Ut["a"])(t.value,2),s=i[0],o=i[1];a.sundayFirst?o.weekDateRange="".concat(o.sundayScheduleDetail.date," - ").concat(o.saturdayScheduleDetail.date):o.weekDateRange="".concat(o.mondayScheduleDetail.date," - ").concat(o.sundayScheduleDetail.date),o.weekName="Week ".concat(s+1),a.manageCompanyConfig.getAllowSundayFirst()?(o.detailArr=[],o.detailArr.push(o.sundayScheduleDetail),o.detailArr.push(o.mondayScheduleDetail),o.detailArr.push(o.tuesdayScheduleDetail),o.detailArr.push(o.wednesdayScheduleDetail),o.detailArr.push(o.thursdayScheduleDetail),o.detailArr.push(o.fridayScheduleDetail),o.detailArr.push(o.saturdayScheduleDetail)):(o.detailArr=[],o.detailArr.push(o.mondayScheduleDetail),o.detailArr.push(o.tuesdayScheduleDetail),o.detailArr.push(o.wednesdayScheduleDetail),o.detailArr.push(o.thursdayScheduleDetail),o.detailArr.push(o.fridayScheduleDetail),o.detailArr.push(o.saturdayScheduleDetail),o.detailArr.push(o.sundayScheduleDetail));var r,u=Object(n["a"])(o.detailArr);try{for(u.s();!(r=u.n()).done;){var d=r.value;a.clearZeroHour(d)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){l.e(h)}finally{l.f()}a.schedules=c,kn.clear()}),(function(e){console.log("err",e),kn.clear()})).finally((function(){kn.clear()}))}},clearZeroHour:function(e){e&&(("12:00 am"===e.finishTime&&"12:00 am"===e.startTime||"12:00 AM"===e.finishTime&&"12:00 AM"===e.startTime)&&(e.finishTime="",e.startTime=""),"0"===e.hours&&(e.hours="",e.shiftDescription=""))},convertDateRange:function(e,t){var a=e.clone(),n=t.clone();return this.manageCompanyConfig.getAllowSundayFirst()?(e.day()>a.startOf("week").day()&&(a=a.startOf("week")),t.day()<n.endOf("week").day()&&(n=n.endOf("week"))):(e.day()>1?a=a.subtract(e.day()-1,"day"):0===e.day()&&(a=a.subtract(6,"day")),t.day()>0&&(n=n.add(7-t.day(),"day"))),[a,n]},displayScheduleDetail:function(e){return 0!==e.hours&&null!==e.hours&&""!==e.hours},selectDateTodayForFromDate:function(){this.fromDate=zt()().startOf("day"),this.toDate=null,this.loadSchedules(this.fromDate,this.toDate)},selectDateTodayForToDate:function(){this.toDate=zt()(),this.toDate.hour(11),this.toDate.minute(59),this.toDate<this.fromDate&&(this.fromDate=null),this.loadSchedules(this.fromDate,this.toDate)},getWeekDayByIndex:function(e){var t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return t[e]},openDatePicker:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return a=t.sent,e.selectedDateType===In.toDate?e.toDate=a:e.selectedDateType===In.fromDate&&(e.fromDate=a),e.loadSchedules(e.fromDate,e.toDate),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()}}});a("fcab");const Rn=se()(Ln,[["render",On]]);var Hn=Rn,Wn=function(e){return Object(c["A"])("data-v-dc59e724"),e=e(),Object(c["y"])(),e},Bn={class:"vue-sched-management"},Vn={class:"sched-card-default mr-4 mr-xs-0"},$n=Wn((function(){return Object(c["h"])("div",null,[Object(c["h"])("h3",{class:"mt-2"},"Schedules")],-1)})),Un={key:0,class:"sched-card-default sched-detail-card sche-detail-mt"},Jn={key:0},_n=Wn((function(){return Object(c["h"])("h3",null,"Create New Schedule",-1)})),Gn=[_n],Kn={key:1,class:"d-flex justify-space-between"},zn=Wn((function(){return Object(c["h"])("h3",null,"Schedule Details",-1)})),Qn={key:3,class:"sched-man-allocations mt-4"},qn=Wn((function(){return Object(c["h"])("div",{class:"caption font-weight-bold text-start"},"Employee Allocations",-1)})),Xn={class:"aff-table allowcated-employee-table mt-4"},Zn=Wn((function(){return Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Employee Name"),Object(c["h"])("th",{class:"text-center"},"Date From"),Object(c["h"])("th",{class:"text-center"},"Date To")])],-1)})),ec={class:"text-center"},tc={class:"text-center"},ac={class:"d-flex justify-end mt-2"};function nc(e,t){var a=Object(c["F"])("search-schedule"),n=Object(c["F"])("schedule-detail");return Object(c["x"])(),Object(c["g"])("div",Bn,[Object(c["S"])(Object(c["h"])("div",Vn,[$n,Object(c["k"])(a,{ref:"searchScheduleRef",onCreateNewSchedule:e.createNewSchedule,onSelectSchedFromSearch:e.selectSchedulesDetail},null,8,["onCreateNewSchedule","onSelectSchedFromSearch"])],512),[[c["P"],!e.createNew]]),e.schedDetail?(Object(c["x"])(),Object(c["g"])("div",Un,[e.createNew?(Object(c["x"])(),Object(c["g"])("div",Jn,Gn)):(Object(c["x"])(),Object(c["g"])("div",Kn,[zn,Object(c["h"])("span",{class:"icon-cross vp-icon",onClick:t[0]||(t[0]=function(t){return e.closeScheduleDetail(!0)})})])),e.schedDetail?(Object(c["x"])(),Object(c["e"])(n,{key:2,ref:"detail",shiftTypeList:e.shiftTypeList,detail:e.schedDetail,"read-only":0,onCancel:e.cancelScheduleDetail,onReload:e.reloadSchedulesDetail,onScheduleSaved:e.scheduleSaved,onScheduleDeleted:e.scheduleDeleted},null,8,["shiftTypeList","detail","onCancel","onReload","onScheduleSaved","onScheduleDeleted"])):Object(c["f"])("",!0),e.schedDetail&&e.schedDetail.EmpAllocations&&e.schedDetail.EmpAllocations.length>0?(Object(c["x"])(),Object(c["g"])("div",Qn,[qn,Object(c["h"])("div",Xn,[Object(c["h"])("table",null,[Zn,Object(c["h"])("tbody",null,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.schedDetail.EmpAllocations,(function(t){return Object(c["x"])(),Object(c["g"])("tr",{class:Object(c["r"])({"hide-none-active-detail":!t.isActive&&e.showActiveSchedule})},[Object(c["h"])("td",null,Object(c["J"])(t.EmployeeName),1),Object(c["h"])("td",ec,Object(c["J"])(e.$filters.reformatDateString(t.DateFrom,null)),1),Object(c["h"])("td",tc,Object(c["J"])(e.$filters.reformatDateString(t.DateTo,null)),1)],2)})),256))])])]),Object(c["h"])("div",ac,[Object(c["h"])("button",{class:"grey white--text text-capitalize small",onClick:t[1]||(t[1]=function(){return e.toggleShowActiveSchedule&&e.toggleShowActiveSchedule.apply(e,arguments)})},[Object(c["S"])(Object(c["h"])("span",null,"Show Active",512),[[c["P"],!e.showActiveSchedule]]),Object(c["S"])(Object(c["h"])("span",null,"Show All",512),[[c["P"],e.showActiveSchedule]])])])])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])}a("3ca3");var cc=function(e){return Object(c["A"])("data-v-079290e7"),e=e(),Object(c["y"])(),e},lc={class:"default-form sched-detail-form mt-4"},ic={key:0,class:"caption d-flex"},sc={class:"d-flex align-center"},oc=cc((function(){return Object(c["h"])("label",{for:"personal",class:"ml-2 cursor-pointer"},"Create Personal Schedule",-1)})),rc={class:"d-flex align-center ml-6"},uc=cc((function(){return Object(c["h"])("label",{for:"team",class:"ml-2 cursor-pointer"},"Create Team Schedule",-1)})),dc={class:"caption d-flex justify-space-between mt-4"},hc={class:"full-width d-flex align-center"},fc=cc((function(){return Object(c["h"])("div",{class:"form-label"},"Name",-1)})),bc={key:1},mc={key:2,class:"label-detail"},pc={key:0,class:"red--text"},Oc={key:1,class:"caption mt-4"},jc=cc((function(){return Object(c["h"])("div",{class:"form-label"},[Object(c["h"])("span",null,"Employee No")],-1)})),yc={key:0,class:"employeeNo-autoComplete"},gc={key:1,class:"label-detail"},vc={class:"caption d-flex mt-4"},Dc=cc((function(){return Object(c["h"])("div",{class:"form-label"},"Description",-1)})),Sc={class:"caption mt-4"},kc=cc((function(){return Object(c["h"])("div",{class:"form-label"},"Effective Date",-1)})),xc={class:"inline-block"},wc=["value"],Cc=cc((function(){return Object(c["h"])("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),Ac={class:"caption mt-4 ml-4 d-inline number-of-weeks"},Tc=cc((function(){return Object(c["h"])("div",{class:"d-inline mr-4 bold-text"},"Number of Weeks",-1)})),Ec=cc((function(){return Object(c["h"])("label",{for:"now"},null,-1)})),Mc={class:"mobile-arrow"},Fc=cc((function(){return Object(c["h"])("span",{class:"icon-arrowhead-up arrow-icon"},null,-1)})),Nc=[Fc],Pc=cc((function(){return Object(c["h"])("span",{class:"mt-1 icon-arrowhead-down arrow-icon"},null,-1)})),Ic=[Pc],Yc={class:"section-table ui-gridbox-scrollable-titles mt-4"},Lc={class:"aff-table sched-detail-table"},Rc=Object(c["i"])('<div class="head-cell" data-v-079290e7>Week</div><div class="head-cell" data-v-079290e7>Day</div><div class="head-cell" data-v-079290e7>Hours</div><div class="head-cell" data-v-079290e7>Start</div><div class="head-cell" data-v-079290e7>Finish</div><div class="head-cell break-column-width" data-v-079290e7>Unpaid Break</div>',6),Hc={class:"head-cell"},Wc={class:"aff-table-body"},Bc={class:"aff-table-body-cell"},Vc={class:"table-date-counter aff-table-body-cell"},$c={class:"mr-2"},Uc={class:"aff-table-body-cell"},Jc=["onUpdate:modelValue","error","onChange","data-test"],_c={class:"aff-table-body-cell"},Gc=["value","onChange"],Kc={class:"aff-table-body-cell"},zc=["value","onChange"],Qc={class:"unpaid-break hide-arrow aff-table-body-cell"},qc=["onUpdate:modelValue","onChange"],Xc=cc((function(){return Object(c["h"])("span",null,":",-1)})),Zc=["onUpdate:modelValue","onChange"],el={key:0,class:"shift-select-td aff-table-body-cell"},tl={class:"schedules-buttons form-row d-flex flex-wrap justify-end mt-2"},al={key:0},nl={key:1},cl=["disabled"],ll=cc((function(){return Object(c["h"])("span",{class:"icon-trash mr-1"},null,-1)})),il=cc((function(){return Object(c["h"])("span",null,"Delete",-1)})),sl=[ll,il],ol=["disabled"],rl=cc((function(){return Object(c["h"])("span",{class:"icon-briefcase mr-1"},null,-1)})),ul=cc((function(){return Object(c["h"])("span",null,"Archive",-1)})),dl=[rl,ul],hl=["disabled"],fl=cc((function(){return Object(c["h"])("span",{class:"icon-cancel mr-1"},null,-1)})),bl=cc((function(){return Object(c["h"])("span",null,"Cancel",-1)})),ml=[fl,bl],pl=["disabled"],Ol=cc((function(){return Object(c["h"])("span",{class:"icon-save mr-1"},null,-1)})),jl=cc((function(){return Object(c["h"])("span",null,"Save",-1)})),yl=[Ol,jl];function gl(e,t){var a=Object(c["F"])("auto-complete"),n=Object(c["F"])("custom-select"),l=Object(c["F"])("date-picker"),i=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",lc,[Object(c["h"])("form",{onChange:t[22]||(t[22]=function(){return e.formUpdated&&e.formUpdated.apply(e,arguments)}),onSubmit:t[23]||(t[23]=Object(c["U"])((function(t){return e.formSubmited(t)}),["prevent"]))},[e.isNewSchedule&&e.$CompanyConfig.isAllowPersonal?(Object(c["x"])(),Object(c["g"])("div",ic,[Object(c["h"])("div",sc,[Object(c["S"])(Object(c["h"])("input",{type:"radio",id:"personal",value:"personal",class:"cursor-pointer","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.createType=t})},null,512),[[c["N"],e.createType]]),oc]),Object(c["h"])("div",rc,[Object(c["S"])(Object(c["h"])("input",{type:"radio",id:"team",value:"team",class:"cursor-pointer","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.createType=t})},null,512),[[c["N"],e.createType]]),uc])])):Object(c["f"])("",!0),Object(c["h"])("div",dc,[Object(c["h"])("div",hc,[fc,e.isNewSchedule&&"team"===e.createType?Object(c["S"])((Object(c["x"])(),Object(c["g"])("input",{key:0,class:"caption underline-input full-width",name:"name",onKeyup:t[2]||(t[2]=function(t){return e.hasChanges=!0}),counter:"49","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.detail.Name=t})},null,544)),[[c["O"],e.detail.Name]]):e.isNewSchedule&&"personal"===e.createType&&e.detail.EmployeeNo?(Object(c["x"])(),Object(c["g"])("div",bc,Object(c["J"])("Personal_"+e.detail.EmployeeNo),1)):Object(c["S"])((Object(c["x"])(),Object(c["g"])("div",mc,[Object(c["j"])(Object(c["J"])(e.detail.Name),1)])),[[i,{content:e.detail.Name,delay:{show:3e3,hide:100}},void 0,{top:!0}]])]),e.detail.Archive?(Object(c["x"])(),Object(c["g"])("div",pc,"Archived")):Object(c["f"])("",!0)]),"personal"===e.createType&&e.$CompanyConfig.isAllowPersonal?(Object(c["x"])(),Object(c["g"])("div",Oc,[jc,e.isNewSchedule&&e.employees&&e.employees.length>0?(Object(c["x"])(),Object(c["g"])("span",yc,[Object(c["k"])(a,{inputList:e.employees,optionName:"joinedName",onSelected:e.selectedEmployee},null,8,["inputList","onSelected"])])):Object(c["S"])((Object(c["x"])(),Object(c["g"])("div",gc,[Object(c["j"])(Object(c["J"])(e.detail.EmployeeNo),1)])),[[i,{content:e.detail.EmployeeNo,delay:{show:3e3,hide:100}},void 0,{top:!0}]])])):Object(c["f"])("",!0),Object(c["h"])("div",vc,[Dc,Object(c["S"])(Object(c["h"])("textarea",{class:"caption description-area","hide-details":"",rows:"2",onKeyup:t[4]||(t[4]=function(t){return e.hasChanges=!0}),outlined:"",dense:"","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.detail.Description=t})}," ",544),[[c["O"],e.detail.Description]])]),Object(c["h"])("div",Sc,[kc,Object(c["h"])("div",xc,[Object(c["h"])("input",{class:"date-input",value:e.$filters.reformatDate(e.detail.StartDate),onClick:t[6]||(t[6]=function(){return e.openDatePicker&&e.openDatePicker.apply(e,arguments)})},null,8,wc),Cc]),Object(c["h"])("div",Ac,[Tc,Ec,Object(c["S"])(Object(c["h"])("input",{class:"number-input",max:"12",min:"1",step:"1",id:"now",name:"now",type:"number","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.detail.NoOfWeeks=t}),onChange:t[8]||(t[8]=function(){return e.updateNoOfWeeks&&e.updateNoOfWeeks.apply(e,arguments)}),onKeydown:t[9]||(t[9]=function(){return e.numLimitKeyDown&&e.numLimitKeyDown.apply(e,arguments)}),style:{width:"60px"}},null,544),[[c["O"],e.detail.NoOfWeeks]]),Object(c["h"])("div",Mc,[e.detail.NoOfWeeks<12?(Object(c["x"])(),Object(c["g"])("button",{key:0,type:"button",class:"icon",color:"grey",onClick:t[10]||(t[10]=function(){return e.increaseNumber&&e.increaseNumber.apply(e,arguments)})},Nc)):Object(c["f"])("",!0),e.detail.NoOfWeeks>1?(Object(c["x"])(),Object(c["g"])("button",{key:1,type:"button",class:"ml-2 icon",small:"",color:"grey",onClick:t[11]||(t[11]=function(){return e.reduceNumber&&e.reduceNumber.apply(e,arguments)})},Ic)):Object(c["f"])("",!0)])])]),Object(c["h"])("div",Yc,[Object(c["h"])("div",Lc,[Object(c["h"])("div",{class:Object(c["r"])(["sched-detail-days",{"shift-min-width":e.showMore}])},[Object(c["h"])("div",{class:Object(c["r"])(["aff-table-head",{"show-shift-column":e.showMore}])},[Rc,Object(c["S"])(Object(c["h"])("div",Hc,"Shift",512),[[c["P"],e.showMore]])],2),Object(c["h"])("div",Wc,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.detail.Days,(function(a){return Object(c["x"])(),Object(c["g"])("div",{key:a.DayNumber,class:Object(c["r"])(["aff-table-body-row",{"show-shift-column":e.showMore}])},[Object(c["h"])("div",Bc,[Object(c["S"])(Object(c["h"])("span",null,Object(c["J"])(a.Week),513),[[c["P"],e.isFirstDayOfWeek(a.DayOfWeek)]])]),Object(c["h"])("div",Vc,[Object(c["h"])("span",$c,Object(c["J"])(a.DayNumber+1),1),Object(c["h"])("span",null,Object(c["J"])(e.getDayOfWeek(a.DayOfWeek)),1)]),Object(c["h"])("div",Uc,[Object(c["S"])(Object(c["h"])("input",{type:"number",step:"any",min:"0",max:"24","onUpdate:modelValue":function(e){return a.Hours=e},class:"caption sched-detail-table-input",center:"",name:"Sche Hour",autocomplete:"off","data-lpignore":"true",error:a.error,onKeydown:t[12]||(t[12]=function(t){return e.numLimitKeyDown(t,!0,!1)}),onChange:function(t){return e.checkHour(a)},"data-test":a.Hours},null,40,Jc),[[c["O"],a.Hours,void 0,{number:!0}]])]),Object(c["h"])("div",_c,[Object(c["h"])("input",{value:e.$filters.reformatTime(a.StartTime),autocomplete:"off","data-lpignore":"true",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"StartTime")},onKeydown:t[13]||(t[13]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[14]||(t[14]=function(t){return e.fromDate=null})},null,40,Gc)]),Object(c["h"])("div",Kc,[Object(c["h"])("input",{value:e.$filters.reformatTime(a.FinishTime),autocomplete:"off","data-lpignore":"true",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"FinishTime")},onKeydown:t[15]||(t[15]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[16]||(t[16]=function(t){return e.fromDate=null})},null,40,zc)]),Object(c["h"])("div",Qc,[Object(c["S"])(Object(c["h"])("input",{class:"sched-detail-table-input",type:"number",max:"100","onUpdate:modelValue":function(e){return a.breakH=e},onChange:function(t){return e.calcBreakHour(a)}},null,40,qc),[[c["O"],a.breakH,void 0,{lazy:!0}]]),Xc,Object(c["S"])(Object(c["h"])("input",{class:"sched-detail-table-input","onUpdate:modelValue":function(e){return a.breakM=e},onChange:function(t){return e.calcBreakHour(a)}},null,40,Zc),[[c["O"],a.breakM,void 0,{lazy:!0}]])]),e.showMore?(Object(c["x"])(),Object(c["g"])("div",el,[Object(c["k"])(n,{class:"caption",options:e.shifts,selected:a.ShiftId,onSelectOption:function(t){return e.selectedShift(t,a)}},null,8,["options","selected","onSelectOption"])])):Object(c["f"])("",!0)],2)})),128))])],2)])]),Object(c["h"])("div",tl,[Object(c["h"])("button",{type:"button",class:"white--text grey caption text-capitalize mr-2 mt-2 small",onClick:t[17]||(t[17]=function(){return e.toggleShift&&e.toggleShift.apply(e,arguments)})},[e.showMore?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("span",al,"Show Shift")),e.showMore?(Object(c["x"])(),Object(c["g"])("span",nl,"Hide Shift")):Object(c["f"])("",!0)]),!e.isNewSchedule&&e.detail.EmpAllocations&&0===e.detail.EmpAllocations.length?(Object(c["x"])(),Object(c["g"])("button",{key:0,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[18]||(t[18]=function(t){return e.deleteSchedule()})},sl,8,cl)):Object(c["f"])("",!0),e.detail.Archive||e.isNewSchedule||"team"!==e.createType?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("button",{key:1,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[19]||(t[19]=function(t){return e.archiveSchedule()})},dl,8,ol)),Object(c["h"])("button",{type:"button",class:"white--text grey text-capitalize mr-2 mt-2 small",disabled:!e.hasChanges&&!e.isNewSchedule,onClick:t[20]||(t[20]=function(t){return e.cancelChanges()})},ml,8,hl),Object(c["h"])("button",{type:"button",class:"white--text text-capitalize mr-1 mt-2 green small",disabled:!e.hasChanges,onClick:t[21]||(t[21]=function(t){return e.updateDetail()})},yl,8,pl)])],32),Object(c["k"])(l,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.detail.StartDate},null,8,["top","leftInput","date"])])}var vl,Dl,Sl,kl;a("4de4"),a("a434");(function(e){e["getEmployees"]="GET_EMPLOYEES",e["getFilteredEmployees"]="GET_FILTERED_EMPLOYEES"})(Dl||(Dl={})),function(e){e["setEmployees"]="SET_EMPLOYEES"}(Sl||(Sl={})),function(e){e["getEmployees"]="GET_EMPLOYEES"}(kl||(kl={}));var xl=(vl={},Object($t["a"])(vl,Dl.getEmployees,(function(e){return e.employees})),Object($t["a"])(vl,Dl.getFilteredEmployees,(function(e){return e.filteredEmployees})),vl),wl=Object($t["a"])({},Sl.setEmployees,(function(e,t){e.employees=t,e.filteredEmployees=t.slice()})),Cl=Object($t["a"])({},kl.getEmployees,(function(e,t){var a=e.commit,n=e.state;return n.employees.length>0?n.employees:ce.GetManagedEmployees(t).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));return a(Sl.setEmployees,t),t}))})),Al={state:{employees:[],employeesWithPeronsalSche:[],filteredEmployees:[]},getters:xl,mutations:wl,actions:Cl},Tl=Al,El=(a("b0c0"),{class:"custom-select",tabindex:"1",ref:"selectRef"}),Ml={class:"custom-select-selected"},Fl={class:"custom-select-items"},Nl=["tabindex","onClick"],Pl={class:"cell-config"};function Il(e,t){return Object(c["x"])(),Object(c["g"])("div",El,[Object(c["h"])("div",Ml,[Object(c["S"])(Object(c["h"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectSearchInput=t}),onKeyup:t[1]||(t[1]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[c["O"],e.selectSearchInput]])]),Object(c["h"])("div",Fl,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.dropDownList,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])(["custom-select-item",{targeting:t.targeting}]),ref_for:!0,ref:"selectDropdownRef",key:a,tabindex:a+99,onClick:function(a){return e.chooseOption(a,t)}},[Object(c["h"])("div",Pl,Object(c["J"])(t.name),1)],10,Nl)})),128))])],512)}var Yl=Object(c["l"])({name:"AutoComplete",props:{inputList:{type:Array},optionName:{type:String}},data:function(){return{editing:!1,targetingIndex:null}},setup:function(e){e.optionName||console.error("need object, optionName is missing");var t=Object(c["C"])(e.inputList.map((function(t,a){return{targeting:!1,name:t[e.optionName],index:a}}))),a=Object(c["C"])(t.value.slice()),n=Object(c["C"])("");return{originList:t,dropDownList:a,selectSearchInput:n}},methods:{updateSearchList:function(e){var t=this;"ArrowDown"!==e.key?"ArrowUp"!==e.key?"Enter"===e.key&&this.targetingIndex?this.selectFromTarget():this.dropDownList=this.originList.filter((function(e){return e.targeting=!1,e.name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1})):this.moveTargetUp():this.moveTargetDown()},moveTargetDown:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex+1<this.dropDownList.length?(this.targetingIndex++,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex,this.dropDownList.length,this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},moveTargetUp:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex-1>=0?(this.targetingIndex--,this.dropDownList[this.targetingIndex].targeting=!0):this.targetingIndex-1<0?(this.targetingIndex=this.dropDownList.length-1,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},selectFromTarget:function(){this.selectSearchInput=this.dropDownList[this.targetingIndex].name,this.$emit("selected",this.inputList[this.targetingIndex])},chooseOption:function(e,t){this.selectSearchInput=t.name,this.$emit("selected",this.inputList[t.index]),e.target.blur()}}});a("6f09");const Ll=se()(Yl,[["render",Il],["__scopeId","data-v-309b7c5e"]]);var Rl=Ll,Hl=a("53ca"),Wl=function(e){return Object(c["A"])("data-v-0c2a3a8e"),e=e(),Object(c["y"])(),e},Bl={class:"custom-select",tabindex:"1",ref:"selectRef"},Vl={key:0,class:"custom-select-selected"},$l={key:0},Ul={key:1},Jl={key:2,class:"custom-select-empty-selected"},_l={key:1,class:"custom-select-selected"},Gl={key:0},Kl={key:1},zl={key:2,class:"custom-select-empty-selected"},Ql=["onClick"],ql={class:"cell-config"},Xl={key:0},Zl={key:1},ei=Wl((function(){return Object(c["h"])("label",null,null,-1)}));function ti(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",null,[Object(c["h"])("span",null,[Object(c["h"])("div",Bl,[e.modelValue?(Object(c["x"])(),Object(c["g"])("div",Vl,[e.modelValue&&"object"===Object(Hl["a"])(e.modelValue)&&e.displayKey?(Object(c["x"])(),Object(c["g"])("span",$l,Object(c["J"])(e.modelValue[e.displayKey]),1)):e.modelValue?(Object(c["x"])(),Object(c["g"])("span",Ul,Object(c["J"])(e.modelValue),1)):(Object(c["x"])(),Object(c["g"])("span",Jl))])):(Object(c["x"])(),Object(c["g"])("div",_l,[e.selected&&"object"===Object(Hl["a"])(e.selected)?(Object(c["x"])(),Object(c["g"])("span",Gl,Object(c["J"])(e.selected[e.displayKey]),1)):e.selected?(Object(c["x"])(),Object(c["g"])("span",Kl,Object(c["J"])(e.selected),1)):(Object(c["x"])(),Object(c["g"])("span",zl))])),Object(c["h"])("div",{class:"custom-select-items",style:Object(c["s"])({left:e.left+"px",top:e.getTop()+"px"})},[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.options,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",key:a,onClick:function(a){e.selectOption(a,t)}},[Object(c["h"])("div",ql,[e.displayKey?(Object(c["x"])(),Object(c["g"])("label",Xl,Object(c["J"])(t[e.displayKey]),1)):(Object(c["x"])(),Object(c["g"])("label",Zl,Object(c["J"])(t),1)),ei])],8,Ql)})),128))],4)],512)])])}var ai=Object(c["l"])({name:"CustomSelect",props:{options:{type:Array,default:[]},displayKey:{type:String,default:""},modelValue:{type:[String,Number]},selected:{}},data:function(){return{left:0,top:0}},mounted:function(){var e=this.$refs.selectRef.getClientRects()[0];this.left=e.left,this.top=e.top+e.height},methods:{getTop:function(){if(!this.$refs.selectRef)return 0;var e=this.$refs.selectRef.getClientRects()[0];return e.top+e.height},selectOption:function(e,t){e.target.blur();var a=this.$refs.selectRef;a.blur(),this.modelValue?this.$emit("update:modelValue",t):this.$emit("selectOption",t)}}});a("600c");const ni=se()(ai,[["render",ti],["__scopeId","data-v-0c2a3a8e"]]);var ci=ni,li=Object(c["l"])({name:"schedule-detail",components:{AutoComplete:Rl,DatePicker:Yn,CustomSelect:ci},props:["detail","shiftTypeList","readOnly"],data:function(){return{createType:"team",employees:[],week:1,tablePadding:"0 0;",hasChanges:!1,isDateToCleared:!1,shifts:[],showMore:!0,initialEmpSched:null,startDateMenu:!1,dateModalTop:0,dateModalLeft:0,timePickerTargetDay:null,selectedTimeType:"Start"}},computed:{isNewSchedule:function(){var e=this.detail;return e.Id<=0}},mounted:function(){var e=this;this.shifts=this.shiftTypeList,this.hasChanges=-1==this.detail.Id,this.$emit("dataChanged",this.hasChanges);var t=this.$store.getters[Dl.getEmployees];t=t.filter((function(t){return!e.$store.state.EmployeeModule.employeesWithPeronsalSche.includes(t.employeeNo)})),this.employees=t.map((function(e){return e.joinedName=e.commonName+" "+e.employeeNo,e})),this.remapDays(),console.log("schedule type",this.detail.ScheduleType),this.createType=0===this.detail.ScheduleType||void 0===this.detail.ScheduleType?"team":"personal"},watch:Object($t["a"])({},"detail",(function(e,t){this.remapDays(),this.createType=0===this.detail.ScheduleType||void 0===this.detail.ScheduleType?"team":"personal",e!=t&&-1==e.Id&&(this.detail.Days=[],this.createNewDays(1,1))})),methods:{selectedShift:function(e,t){t.ShiftId=e,this.hasChanges=!0},formSubmited:function(e){return e.preventDefault(),e.stopPropagation(),!1},increaseNumber:function(){this.detail.NoOfWeeks++,this.updateNoOfWeeks()},reduceNumber:function(){this.detail.NoOfWeeks--,this.updateNoOfWeeks()},toggleShift:function(){this.showMore=!this.showMore},remapDays:function(){for(var e=0,t=zt()(this.detail.StartDate),a=7*this.detail.NoOfWeeks,n=new Array(a),c=0;c<a;c++)c%7==0&&e++,n[c]={DayNumber:c,DayOfWeek:t.day(),Week:e,Date:zt()(t),Hours:0,StartTime:null,FinishTime:null,ShiftId:null,BreakHours:null},t.add(1,"day");this.showMore=!1,this.detail.Days.map((function(e){e.StartTime&&(n[e.DayNumber].StartTime=zt()(e.StartTime)),e.FinishTime&&(n[e.DayNumber].FinishTime=zt()(e.FinishTime)),n[e.DayNumber].Hours=e.Hours,n[e.DayNumber].ShiftId=e.ShiftId,n[e.DayNumber].BreakHours=e.BreakHours;var t=e.BreakHours,a=Math.floor(t),c=t-a;0!==a&&(n[e.DayNumber].breakH=a),c>0&&(n[e.DayNumber].breakM=Math.round(60*c))})),this.detail.Days=n,this.detail.StartDate=zt()(this.detail.StartDate),this.hasChanges=!1},timeTextChanged:function(e,t,a){var n;if(n=e.target.value.includes(":")?zt()(e.target.value,"HH:mm"):zt()(e.target.value,"Hmm"),"FinishTime"===a){if(!n.isValid())return e.target.value="InValid Time",void(t.FinishTime=null);if(t.FinishTime&&n.hour()===t.FinishTime.hour()&&n.minute()===t.FinishTime.minute())return;if(""===e)return void(t.FinishTime=null);t.FinishTime=n}else{if(t.StartTime&&n.hour()===t.StartTime.hour()&&n.minute()===t.StartTime.minute())return;if(!n.isValid())return e.target.value="InValid Time",void(t.StartTime=null);if(""===e)return void(t.StartTime=null);t.StartTime=n}this.timePickerTargetDay=t,this.autoCalcTime(a),this.hasChanges=!0},autoCalcTime:function(e){var t=this.timePickerTargetDay;if(console.log("calc time"),!t.FinishTime||"00:00"===t.FinishTime.format("HH:mm")||!t.StartTime||"00:00"===t.StartTime.format("HH:mm")||t.Hours&&0!==t.Hours)if(!t.FinishTime||!t.Hours||t.StartTime&&"00:00"!==t.StartTime.format("HH:mm"))if(!t.StartTime||!t.Hours||t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")){if(t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")&&t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")&&(t.Hours||0!==t.Hours)){var a=t.BreakHours?t.Hours+t.BreakHours:t.Hours;"StartTime"===e?t.FinishTime=t.StartTime.clone().add(a,"hours"):"FinishTime"===e&&(t.StartTime=t.FinishTime.clone().subtract(a,"hours"))}}else{var n=t.BreakHours?t.Hours+t.BreakHours:t.Hours;t.FinishTime=t.StartTime.clone().add(n,"hours")}else{var c=t.BreakHours?t.Hours+t.BreakHours:t.Hours;t.StartTime=t.FinishTime.clone().subtract(c,"hours")}else{t.FinishTime.year(t.StartTime.year()),t.FinishTime.month(t.StartTime.month()),t.FinishTime.day(t.StartTime.day());var l=t.FinishTime.startOf("minute").diff(t.StartTime.startOf("minute"),"hours",!0);t.BreakHours&&(l-=t.BreakHours),t.Hours=Math.round(100*l)/100}},updateDateText:function(e,t){this.startDateMenu=!1,t.set(zt()(e,"DD/MM/YYYY").toObject()),this.remapDays()},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=zt()(e)),this.detail.StartDate=e,this.remapDays()},isFirstDayOfWeek:function(e){var t=zt()(this.detail.StartDate);return e==t.day()},calcBreakHour:function(e){e.breakH&&e.breakM?e.BreakHours=Number(e.breakH)+Math.round(Number(e.breakM)/60*1e3)/1e3:e.breakH?e.BreakHours=Number(e.breakH):e.breakM?e.BreakHours=Math.round(Number(e.breakM)/60*1e3)/1e3:(0===e.breakHours&&e.breakM,e.BreakHours=0),e.StartTime&&"00:00"!==e.StartTime.format("HH:mm")&&e.FinishTime&&"00:00"!==e.FinishTime.format("HH:mm")&&(e.Hours=e.FinishTime.startOf("minute").diff(e.StartTime.startOf("minute"),"hours",!0)-e.BreakHours)},getDayOfWeek:function(e){if(e<0||e>6)return console.error("day No not correct"),"unknown";var t=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];return t[e]},checkHour:function(e){if(this.hasChanges=!0,e.Hours>24)return kn.alert("You can only enter up to 24 hours."),void(e.Hours=24);var t=e.BreakHours?e.Hours+e.BreakHours:e.Hours;e.StartTime&&e.Hours&&e.FinishTime||e.StartTime&&e.Hours?e.FinishTime=e.StartTime.clone().add(t,"hours"):e.Hours&&e.FinishTime&&(e.StartTime=e.FinishTime.clone().add(t,"hours"))},updateNoOfWeeks:function(e){var t=this.detail.Days.length,a=Math.floor(t/7);if(this.detail.NoOfWeeks>a)this.createNewDays(a+1,this.detail.NoOfWeeks);else{var n=7*this.detail.NoOfWeeks;this.detail.Days.splice(n)}},numLimitKeyDown:function(e,t,a){var n=[8,9,13,46,16,17];n.push(65,67,86,88),t&&n.push(190,110),a&&n.push(186),e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||n.indexOf(e.keyCode)>-1||(e.preventDefault(),e.stopPropagation())},cancelChanges:function(){var e=this;if(this.hasChanges){var t="You haven't saved your changes.  <br /> Are you sure you want to cancel?";kn.checkChange({message:t,confirmButtonText:"Yes",cancelButtonText:"No",onOk:function(){e.hasChanges=!1,e.$emit("cancel")}})}else this.$emit("cancel")},reloadDetail:function(){this.hasChanges&&this.$emit("reload")},createNewDays:function(e,t){if(!(e>t)){var a=e,n=this.detail.Days.length;while(a<=t){var c=zt()(this.detail.StartDate);c.add(n,"day"),this.detail.Days.push({DayNumber:n,DayOfWeek:c.day(),Week:a,Date:c,Hours:0,StartTime:null,FinishTime:null,ShiftId:null,startDateModal:!1,endDateModal:!1}),n++,a=Math.floor(n/7)+1}}},archiveSchedule:function(){var e=this;this.hasChanges||(this.detail.Archive?kn.alert("Unable to archive schedule, it's already archived."):kn.confirmOrCancel({message:"Are you sure you want to archive this work schedule?"}).then((function(){e.detail.Archive=!0,e.doUpdateDetail()})))},deleteSchedule:function(){var e=this;this.hasChanges||(this.detail.EmpAllocations.length>0?kn.alert("Unable to delete schedule, it's currently allocated to employees"):ly.emit("dialog",{message:"Are you sure you want to permanently delete this work schedule?",showButtons:!0,showCancel:!0,okColor:"red",onOk:function(){e.doDeleteSchedule()},onCancel:function(){}}))},doDeleteSchedule:function(){var e=this;kn.loading(),ce.DeleteSchedule(this.detail.Id).then((function(t){e.$emit("schedule-deleted"),kn.clear()}))},updateDetail:function(){this.hasChanges&&this.doUpdateValidation()&&this.doUpdateDetail()},doUpdateValidation:function(){if("team"===this.createType){if(!this.detail.Name&&!this.detail.Description||""===this.detail.Name&&""===this.detail.Description)return kn.alert("Schedule name cannot be blank. <br /> Schedule description cannot be blank."),!1;if(!this.detail.Name||""===this.detail.Name)return kn.alert("Schedule name cannot be blank."),!1}return this.detail.Description&&""!==this.detail.Description?void 0!==this.detail.Name&&null!==this.detail.Name&&this.detail.Name.length>50?(kn.alert("Schedule names must be 50 characters or fewer (including spaces)."),!1):!(void 0!==this.detail.Description&&null!==this.detail.Description&&this.detail.Description.length>50)||(kn.alert("Schedule descriptions must be 50 characters or fewer (including spaces)."),!1):(kn.alert("Schedule description cannot be blank."),!1)},doUpdateDetail:function(){var e=this,t={Id:this.detail.Id,NoOfWeeks:this.detail.NoOfWeeks,StartDate:zt()(this.detail.StartDate).format("DD/MMM/YYYY"),Name:"team"===this.createType?this.detail.Name:"Personal_ "+this.detail.EmployeeNo,EmployeeNo:this.detail.EmployeeNo?this.detail.EmployeeNo:null,ScheduleType:this.detail.EmployeeNo?1:0,IsPersonal:!!this.detail.EmployeeNo,Description:this.detail.Description,Archive:this.detail.Archive,Days:[]};this.detail.Days.map((function(e){(e.Hours>0||null!==e.ShiftId&&""!==e.ShiftId)&&(""===e.ShiftId&&(e.ShiftId=null),t.Days.push({DayNumber:e.DayNumber,StartTime:e.StartTime?e.StartTime.format("HH:mm"):null,FinishTime:e.FinishTime?e.FinishTime.format("HH:mm"):null,Hours:e.Hours>24?24:e.Hours,ShiftId:e.ShiftId,BreakHours:e.BreakHours?Number(e.BreakHours):null}))})),kn.loading(),ce.PostSchedule(t).then((function(t){e.$emit("schedule-saved",t.Data),void 0!==e&&void 0!==e.hasChanges&&(e.hasChanges=!1)})).finally((function(){kn.clear()}))},formUpdated:function(){this.hasChanges=!0},openDatePicker:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.dateModalTop=n.bottom,t.dateModalLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.detail.StartDate);case 6:t.detail.StartDate=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.t0&&console.error(a.t0),a.abrupt("return");case 13:t.remapDays(),t.hasChanges=!0;case 15:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectedEmployee:function(e){this.detail.EmployeeNo=e.employeeNo,this.detail.Description="".concat(e.commonName," ").concat(e.employeeNo," Personal Schedule")}}});a("f28b");const ii=se()(li,[["render",gl],["__scopeId","data-v-079290e7"]]);var si=ii,oi=function(e){return Object(c["A"])("data-v-6ae049cf"),e=e(),Object(c["y"])(),e},ri={id:"sched-man-list ",class:"sched-man-list mt-4"},ui={class:"d-flex align-center flex-wrap"},di={class:"filter-dropdown"},hi={class:"custom-select",tabindex:"1",ref:"selectRef"},fi={class:"custom-select-selected"},bi={class:"custom-select-items"},mi=["tabindex","onClick"],pi={class:"cell-config"},Oi=oi((function(){return Object(c["h"])("span",{class:"icon-plus btn-icon white"},null,-1)})),ji=oi((function(){return Object(c["h"])("span",{class:"font-weight-regular text-capitalize white"}," Create",-1)})),yi=[Oi,ji],gi={class:"d-flex justify-start mt-2"},vi={class:"d-flex align-center"},Di=oi((function(){return Object(c["h"])("label",{class:"ml-1"},"My Employees Only",-1)})),Si={class:"d-flex align-center ml-2"},ki=oi((function(){return Object(c["h"])("label",{class:"ml-1"},"All Employees",-1)})),xi={class:"aff-table sche-search-table mt-4"},wi={class:"ui-grid"},Ci={class:"table-head"},Ai=Object(c["j"])(" Name "),Ti=Object(c["j"])(" Description "),Ei=Object(c["j"])(" Weeks "),Mi=Object(c["j"])(" H/W "),Fi=Object(c["j"])(" Allocated "),Ni={class:"table-body-box"},Pi=["onClick"],Ii={class:"table-body-cell table-body-cell-first"},Yi={class:"table-body-cell"},Li={class:"sched-search-desc"},Ri={class:"table-body-cell text-center"},Hi={class:"table-body-cell text-center"},Wi={class:"table-body-cell text-center"};function Bi(e,t){var a=Object(c["G"])("tooltip");return Object(c["S"])((Object(c["x"])(),Object(c["g"])("div",ri,[Object(c["h"])("div",null,[Object(c["h"])("div",ui,[Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filters.searchTerm=t}),type:"text",placeholder:"Search for schedules","hide-details":"",class:"sched-search-box body-2 underline-input"},null,512),[[c["O"],e.filters.searchTerm]]),Object(c["h"])("div",di,[Object(c["h"])("div",hi,[Object(c["h"])("div",fi,Object(c["J"])(e.filters.selected),1),Object(c["h"])("div",bi,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.filters.options,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",key:a,tabindex:a+99,onClick:function(a){return e.choseFilter(a,t)}},[Object(c["h"])("div",pi,Object(c["J"])(t),1)],8,mi)})),128))])],512)]),Object(c["h"])("button",{class:"blue ml-2 small",onClick:t[1]||(t[1]=function(t){return e.createNewSchedule()})},yi)]),Object(c["h"])("div",gi,[Object(c["h"])("div",vi,[Object(c["S"])(Object(c["h"])("input",{class:"ma-0",type:"radio",id:"myEmployee",value:"MyEmployee","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.myEmployeeToggle=t}),onChange:t[3]||(t[3]=function(){return e.getSchedulesList&&e.getSchedulesList.apply(e,arguments)})},null,544),[[c["N"],e.myEmployeeToggle]]),Di]),Object(c["h"])("div",Si,[Object(c["S"])(Object(c["h"])("input",{class:"my-0",type:"radio",id:"allEmployee",value:"AllEmployee","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.myEmployeeToggle=t}),onChange:t[5]||(t[5]=function(){return e.getSchedulesList&&e.getSchedulesList.apply(e,arguments)})},null,544),[[c["N"],e.myEmployeeToggle]]),ki])])]),Object(c["h"])("div",xi,[Object(c["h"])("div",wi,[Object(c["h"])("div",Ci,[Object(c["h"])("div",{class:"table-head-cell table-head-cell-first",onClick:t[6]||(t[6]=function(t){return e.updateSort(0)})},[Ai,Object(c["h"])("span",{class:Object(c["r"])({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[0],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[0]})},null,2)]),Object(c["h"])("div",{class:"table-head-cell",onClick:t[7]||(t[7]=function(t){return e.updateSort(1)})},[Ti,Object(c["h"])("span",{class:Object(c["r"])({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[1],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[1]})},null,2)]),Object(c["h"])("div",{class:"table-head-cell text-center",onClick:t[8]||(t[8]=function(t){return e.updateSort(2)})},[Ei,Object(c["h"])("span",{class:Object(c["r"])({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[2],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[2]})},null,2)]),Object(c["h"])("div",{class:"table-head-cell text-center",onClick:t[9]||(t[9]=function(t){return e.updateSort(3)})},[Mi,Object(c["h"])("span",{class:Object(c["r"])({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[3],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[3]})},null,2)]),Object(c["h"])("div",{class:"table-head-cell text-center",onClick:t[10]||(t[10]=function(t){return e.updateSort(4)})},[Fi,Object(c["h"])("span",{class:Object(c["r"])({"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[4],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[4]})},null,2)])]),Object(c["h"])("div",Ni,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.schedList,(function(t){return Object(c["x"])(),Object(c["g"])("div",{onClick:function(a){return e.selectSchedulesDetail(t)},class:Object(c["r"])([t.classObject,"table-body"])},[Object(c["h"])("div",Ii,[Object(c["h"])("div",null,Object(c["J"])(t.Name),1)]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("div",Yi,[Object(c["h"])("div",Li,Object(c["J"])(t.Description),1)])),[[a,{content:t.Description,delay:{show:3e3,hide:100}},void 0,{right:!0}]]),Object(c["h"])("div",Ri,[Object(c["h"])("div",null,Object(c["J"])(t.NoOfWeeks),1)]),Object(c["h"])("div",Hi,[Object(c["h"])("div",null,Object(c["J"])(t.HoursPerWeek),1)]),Object(c["h"])("div",Wi,[Object(c["h"])("div",null,Object(c["J"])(t.Count),1)])],10,Pi)})),256))])])])],512)),[[c["P"],!e.createNew]])}var Vi;a("4e82"),a("498a"),a("ac1f"),a("5319");(function(e){e["myEmployee"]="MyEmployee",e["allEmployee"]="AllEmployee"})(Vi||(Vi={}));var $i=Object(c["l"])({name:"SearchSchedule",inject:{manageCompanyConfig:"MANAGE_COMPANY_CONFIG"},data:function(){return{selectedSched:null,schedList:[],shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showFilters:!0,myEmployeeToggle:Vi.myEmployee,filters:{searchTerm:"",sort:"Name",sortOptions:["Name","Description","NoOfWeeks","HoursPerWeek","Count"],orderBy:"Asc",orderByArrow:["Asc","Asc","Asc","Asc","Asc"],partTimeSche:!1,fullTimeSche:!0,activeSche:!0,inActiveSche:!1,archivedSche:!1,options:[],selected:"Show Active",all:!1},searchTermFocus:!1}},mounted:function(){this.showFilters=!0,this.getSchedulesList(),this.manageCompanyConfig.getAllowPersonal()?this.filters.options=["Show All","Show Active","Show Inactive","Show Archived","Show Personal"]:this.filters.options=["Show All","Show Active","Show Inactive","Show Archived"],this.$watch("filters",this.refreshFilters,{deep:!0})},methods:{choseFilter:function(e,t){e.target.blur(),this.filters.selected=t;e.target.blur();var a=this.$refs.selectRef;a.blur()},createNewSchedule:function(){this.$emit("createNewSchedule")},selectSchedulesDetail:function(e){this.schedList.map((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedSched=e,this.$emit("selectSchedFromSearch",this.selectedSched)},deselectScheDetail:function(){this.schedList.forEach((function(e){e.classObject.selected=!1})),this.selectedSched=null},toggleFilters:function(){this.showFilters=!this.showFilters},refreshFilters:function(){var e=this,t=this;this.schedList.sort((function(e,a){var n,c,l=1;return"Desc"===t.filters.orderBy&&(l=-1),"string"===typeof e[t.filters.sort]?(n=e[t.filters.sort].toLowerCase(),c=a[t.filters.sort].toLowerCase()):(n=e[t.filters.sort],c=a[t.filters.sort]),n<c?-1*l:n>c?1*l:0}));var a=this.filters.searchTerm.toLowerCase().trim();this.schedList.forEach((function(n){n.classObject.selected=!!t.selectedSched&&t.selectedSched.Id==n.Id,n.classObject.visible=!0,e.filters.all?n.classObject.visible=!0:(n.classObject.visible=e.getDropDownFilterResult(n),n.classObject.visible&&0!=a.length&&(n.classObject.visible=(-1!==n.Name.toLowerCase().indexOf(a)||-1!==n.Description.toLowerCase().indexOf(a))&&n.classObject.visible)),n.classObject.hidden=!n.classObject.visible}))},getDropDownFilterResult:function(e){switch(this.filters.selected){case"Show All":return!0;case"Show Active":return!0===e.isActive&&!1===e.Archive&&0===e.ScheduleType;case"Show Inactive":return!1===e.isActive&&!1===e.Archive&&0===e.ScheduleType;case"Show Archived":return!0===e.Archive&&0===e.ScheduleType;case"Show Personal":return 1===e.ScheduleType}},getSchedulesList:function(){var e=this;kn.loading(),ce.StandardSchedules(this.myEmployeeToggle===Vi.allEmployee).then((function(t){var a=[],n=[],c=t.Data;e.manageCompanyConfig.getAllowPersonal()||(c=t.Data.filter((function(e){return 0===e.ScheduleType}))),c.map((function(t){if(t.Name.includes("Personal")){var c=t.Name.replace(/^\D+/g,"");n.push(Number(c))}t.classObject={selected:!1,visible:!0,hidden:!1},e.selectedSched&&e.selectedSched.Id===t.Id&&(e.selectedSched=t,t.classObject.selected=!0),a.push(t.NoOfWeeks)})),a.unshift("All"),e.schedList=c,e.$store.state.EmployeeModule.employeesWithPeronsalSche=n,e.refreshFilters(),kn.clear()}))},updateSort:function(e){this.filters.orderBy=this.filters.orderByArrow[e]="Asc"===this.filters.orderByArrow[e]?"Desc":"Asc",this.filters.sort=this.filters.sortOptions[e],this.filters.orderByArrow.forEach((function(t,a){a!==e&&"Asc"}))}}});a("7bf7");const Ui=se()($i,[["render",Bi],["__scopeId","data-v-6ae049cf"]]);var Ji=Ui,_i=Object(c["l"])({name:"schedulesManagement",components:{SearchSchedule:Ji,"schedule-detail":si},data:function(){return{selectedSched:null,shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showActiveSchedule:!0,employees:[]}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return kn.loading(),t.next=3,Promise.all([e.getShiftTypeList(),e.getEmployees()]);case 3:kn.clear();case 4:case"end":return t.stop()}}),t)})))()},methods:{getShiftTypeList:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.ShiftTypes();case 3:a=t.sent,e.shiftTypeList=a.map((function(e){return e.ShiftType})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEmployees:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(kl.getEmployees,Affinity.user.EmployeeNo);case 3:e.employees=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toggleShowActiveSchedule:function(){this.showActiveSchedule=!this.showActiveSchedule},selectSchedulesDetail:function(e){var t=this;this.$refs.detail&&this.$refs.detail.hasChanges?kn.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.loadScheduleDetail(e)}}):this.loadScheduleDetail(e)},loadScheduleDetail:function(e){var t=this;kn.loading(),ce.ScheduleDetail(e.Id).then((function(a){t.schedDetail=a.Data,t.checkEmpAllocationActive(),kn.clear(),t.selectedSched=e}),(function(e){kn.clear(),"Network Error"===e.message?kn.alert("Lost Internet connection. Please try again after reconnect."):kn.alert("Something went wrong")}))},checkEmpAllocationActive:function(){this.schedDetail.EmpAllocations.forEach((function(e){if(e.DateTo){var t=zt()(e.DateFrom),a=zt()(e.DateTo);e.isActive=a.diff(zt()(),"day")>=0&&t.diff(zt()(),"day")<=0}else e.isActive=!0}))},createNewSchedule:function(){this.createNew=!0;var e=zt()();e.hour(0),e.minute(0),e.second(0),this.schedDetail={Id:-1,Name:"",Description:"",NoOfWeeks:1,StartDate:e,Days:[]},this.$refs.detail&&(this.$refs.detail.hasChanges=!0)},cancelScheduleDetail:function(){this.createNew&&(this.createNew=!1),this.schedDetail=null},reloadSchedulesDetail:function(){this.selectedSched?this.selectSchedulesDetail(this.selectedSched):this.schedDetail=null,this.createNew=!1},closeScheduleDetail:function(e){var t=this;if(!e||!this.$refs.detail.hasChanges)return this.schedDetail=null,this.createNew=!1,this.selectedSched=null,void this.$refs.searchScheduleRef.deselectScheDetail();kn.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.closeScheduleDetail(!1)}})},scheduleSaved:function(e){this.selectedSched?(this.schedDetail=e,this.selectedSched={Id:e.Id}):this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList(),this.createNew=!1},scheduleDeleted:function(){this.selectedSched=null,this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList()}}});a("58be"),a("2b9b");const Gi=se()(_i,[["render",nc],["__scopeId","data-v-dc59e724"]]);var Ki=Gi,zi=function(e){return Object(c["A"])("data-v-5d3c1829"),e=e(),Object(c["y"])(),e},Qi={class:"outter-h-scroll"},qi={class:"fix-content-width"},Xi={key:0,class:"emp-detail pa-4 mr-4 ml-4 mr-xs-0"},Zi={class:"section"},es=zi((function(){return Object(c["h"])("div",{class:"d-flex justify-space-between"},[Object(c["h"])("h3",null,"Selected Employees")],-1)})),ts={class:"emp-selection-list mt-4 caption"},as={class:"list-text"},ns=["onClick"],cs=zi((function(){return Object(c["h"])("span",{class:"icon-calendar white lh-0"},null,-1)})),ls=[cs],is=["onClick"],ss=zi((function(){return Object(c["h"])("span",{class:"icon-minus white lh-0"},null,-1)})),os=[ss],rs=["onClick"],us=zi((function(){return Object(c["h"])("span",{class:"icon-minus white lh-0"},null,-1)})),ds=[us],hs=["onClick"],fs=zi((function(){return Object(c["h"])("span",{class:"icon-calendar white lh-0"},null,-1)})),bs=[fs],ms={class:"schedules-buttons mt-2 d-flex justify-end"},ps=zi((function(){return Object(c["h"])("span",{class:"icon-cancel mr-2 vert-mid white lh-0"},null,-1)})),Os=zi((function(){return Object(c["h"])("span",{class:"text-capitalize white"},"Clear",-1)})),js=[ps,Os],ys=zi((function(){return Object(c["h"])("span",{class:"icon-cancel vert-mid white lh-0"},null,-1)})),gs=zi((function(){return Object(c["h"])("span",{class:"text-capitalize white"},"Clear",-1)})),vs=[ys,gs],Ds={class:"section mt-4",style:{height:"100%"}},Ss=zi((function(){return Object(c["h"])("h3",{class:"bold-text"},"Allocate Schedule",-1)})),ks={class:"mt-4 allocate-sche-form"},xs={class:"custom-select",tabindex:"1",ref:"selectRef"},ws={class:"custom-select-selected"},Cs={class:"custom-select-items"},As=["tabindex","onClick"],Ts={class:"cell-config"},Es={key:0,class:"mt-4"},Ms=zi((function(){return Object(c["h"])("div",{class:"bold-text"},"Description",-1)})),Fs={class:"caption"},Ns={class:"bold-text mt-4"},Ps=Object(c["j"])("No. of Weeks: "),Is={class:"ml-4"},Ys={class:"d-flex justify-space-between"},Ls={class:"mt-4 date-input-warpper"},Rs=zi((function(){return Object(c["h"])("div",{class:"bold-text"},"Date From",-1)})),Hs=["value"],Ws=zi((function(){return Object(c["h"])("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),Bs={class:"mt-4 date-input-warpper"},Vs=zi((function(){return Object(c["h"])("div",{class:"bold-text"},"Date To",-1)})),$s=["value"],Us=zi((function(){return Object(c["h"])("span",{class:"input-icon icon-calendar xs-icon"},null,-1)})),Js={class:"mt-4"},_s=zi((function(){return Object(c["h"])("div",{class:"bold-text"},"Notes",-1)})),Gs={key:1,class:"form-row mt-4"},Ks={class:"label-width"},zs={class:"schedules-buttons mt-4 d-flex justify-end"},Qs=zi((function(){return Object(c["h"])("span",{class:"icon-cancel vert-mid lh-0 white--text mr-1"},null,-1)})),qs=zi((function(){return Object(c["h"])("span",{class:"text-capitalize white--text"},"Cancel",-1)})),Xs=[Qs,qs],Zs=zi((function(){return Object(c["h"])("span",{class:"icon-paperplane vert-mid lh-0 white--text mr-1"},null,-1)})),eo=zi((function(){return Object(c["h"])("span",{class:"text-capitalize white--text"},"Allocate",-1)})),to=[Zs,eo];function ao(e,t){var a=Object(c["F"])("search-employee"),n=Object(c["F"])("employee-schedule"),l=Object(c["F"])("date-picker"),i=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",Qi,[Object(c["h"])("div",qi,[Object(c["k"])(a,{class:"mr-4 mr-xs-0",ref:"SearchEmployeeRef",onUpdateSelectedEmpList:e.updateEmpList},null,8,["onUpdateSelectedEmpList"]),e.bulkEmpList.length>0?(Object(c["x"])(),Object(c["g"])("div",Xi,[Object(c["h"])("div",Zi,[es,Object(c["h"])("div",ts,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.bulkEmpList,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])(["d-flex justify-space-between align-center py-1 px-2",{"emp-select-item-odd":a%2}])},[Object(c["h"])("div",null,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",as,[Object(c["j"])(Object(c["J"])(t.EmployeeName)+" ("+Object(c["J"])(t.EmployeeNo)+")",1)])),[[i,{content:"Remove from Employee Selection List"},void 0,{right:!0}]])]),Object(c["h"])("div",null,[e.isMobileView?Object(c["f"])("",!0):Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{key:0,class:"blue small",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},ls,8,ns)),[[i,{content:"View Schedule Allocations"},void 0,{right:!0}]]),e.isMobileView?Object(c["f"])("",!0):Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{key:1,class:"orange small",onClick:function(a){return e.removeEmployee(t)}},os,8,is)),[[i,{content:"Remove from Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(c["x"])(),Object(c["g"])("button",{key:2,class:"orange small",onClick:function(a){return e.removeEmployee(t)}},ds,8,rs)):Object(c["f"])("",!0),e.isMobileView?(Object(c["x"])(),Object(c["g"])("button",{key:3,class:"blue ml-1 small",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},bs,8,hs)):Object(c["f"])("",!0)])],2)})),256))]),Object(c["h"])("div",ms,[e.isMobileView?Object(c["f"])("",!0):Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{key:0,class:"button grey small",onClick:t[0]||(t[0]=function(t){return e.clearSelectedEmployee()})},js)),[[i,{content:"Clear Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(c["x"])(),Object(c["g"])("button",{key:1,class:"button grey small",onClick:t[1]||(t[1]=function(t){return e.clearSelectedEmployee()})},vs)):Object(c["f"])("",!0)])]),Object(c["h"])("div",{onSubmit:t[16]||(t[16]=Object(c["U"])((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[Object(c["h"])("div",Ds,[Ss,Object(c["h"])("div",ks,[Object(c["h"])("form",null,[Object(c["h"])("div",xs,[Object(c["h"])("div",ws,[Object(c["S"])(Object(c["h"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectSearchInput=t}),onKeyup:t[3]||(t[3]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[c["O"],e.selectSearchInput]])]),Object(c["h"])("div",Cs,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.cloneSchedList,(function(a,n){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",ref_for:!0,ref:"selectDropdownRef",key:n,tabindex:n+99,onKeyup:t[4]||(t[4]=Object(c["T"])((function(){return e.navDownList&&e.navDownList.apply(e,arguments)}),["down"])),onClick:function(t){return e.chooseSchedule(t,a)}},[Object(c["h"])("div",Ts,Object(c["J"])(a.Name),1)],40,As)})),128))])],512),e.selectedSchedule&&e.selectedSchedule.Name?(Object(c["x"])(),Object(c["g"])("div",Es,[Ms,Object(c["h"])("div",Fs,Object(c["J"])(e.selectedSchedule.Description),1),Object(c["h"])("div",Ns,[Ps,Object(c["h"])("span",Is,Object(c["J"])(e.selectedSchedule.NoOfWeeks),1)])])):Object(c["f"])("",!0),Object(c["h"])("div",Ys,[Object(c["h"])("div",Ls,[Rs,Object(c["h"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateFrom),class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input",onChange:t[5]||(t[5]=function(t){return e.updateDateText(t,e.schedAllocation.DateFrom,"DateFrom")}),onClick:t[6]||(t[6]=function(t){return e.updateDateTime(t,e.schedAllocation.DateFrom,"DateFrom")}),"onClick:clear":t[7]||(t[7]=function(t){return e.fromDate=!1})},null,40,Hs),Ws]),Object(c["h"])("div",Bs,[Vs,Object(c["h"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateTo),class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input",onChange:t[8]||(t[8]=function(t){return e.updateDateText(t,e.schedAllocation.DateTo,"DateTo")}),onClick:t[9]||(t[9]=function(t){return e.updateDateTime(t,e.schedAllocation.DateTo,"DateTo")}),"onClick:clear":t[10]||(t[10]=function(t){return e.toDateMenu=!1})},null,40,$s),Us])]),Object(c["h"])("div",Js,[_s,Object(c["S"])(Object(c["h"])("textarea",{rows:"3",class:"caption",onKeyup:t[11]||(t[11]=function(t){return e.hasChanges=!0}),"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.schedAllocation.Comment=t})}," ",544),[[c["O"],e.schedAllocation.Comment]])]),e.schedAllocation.DateFrom?(Object(c["x"])(),Object(c["g"])("div",Gs,[Object(c["h"])("label",Ks,"End existing schedules on "+Object(c["J"])(e.capDate),1),Object(c["S"])(Object(c["h"])("input",{type:"checkbox",value:"1","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.schedAllocation.EndExistingScheds=t})},null,512),[[c["M"],e.schedAllocation.EndExistingScheds]])])):Object(c["f"])("",!0),Object(c["h"])("div",zs,[Object(c["h"])("button",{class:"grey vert-mid small",onClick:t[14]||(t[14]=function(t){return e.closeSchedAllocation()})},Xs),Object(c["h"])("button",{class:"green ml-4 small",onClick:t[15]||(t[15]=function(t){return e.allocateEmployees()})},to)])])])])],32)])):Object(c["f"])("",!0),e.selectedEmpForDetail?(Object(c["x"])(),Object(c["e"])(n,{key:1,ref:"EmployeeScheduleRef",employee:e.selectedEmpForDetail,onClose:e.resetSelectedEmpForDetail},null,8,["employee","onClose"])):Object(c["f"])("",!0),Object(c["k"])(l,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])])}a("466d");var no=function(e){return Object(c["A"])("data-v-3708ba95"),e=e(),Object(c["y"])(),e},co={class:"emp-workSched-card pa-4"},lo={class:"d-flex justify-space-between"},io={class:"d-flex justify-end align-center mt-4 caption"},so=no((function(){return Object(c["h"])("label",{class:"default-line-height"},"Active Only",-1)})),oo={key:0,class:"section-table aff-table mt-2"},ro=no((function(){return Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Schedule Name"),Object(c["h"])("th",{class:"text-center"},"Date From"),Object(c["h"])("th",{class:"text-center"},"Date To")])],-1)})),uo=["onClick"],ho={class:"text-center"},fo={class:"text-center"},bo={key:1};function mo(e,t){var a=Object(c["F"])("emp-schedule-detail");return Object(c["x"])(),Object(c["g"])("div",co,[Object(c["h"])("div",lo,[Object(c["h"])("h3",null,Object(c["J"])(e.selectedEmp.EmployeeName)+" ("+Object(c["J"])(e.selectedEmp.EmployeeNo)+")",1),Object(c["h"])("span",{class:"icon-cross vp-icon",onClick:t[0]||(t[0]=function(t){return e.closeEmployeeSchedule(!0)})})]),Object(c["h"])("div",io,[Object(c["S"])(Object(c["h"])("input",{class:"override-width mr-2",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeOnly=t}),onChange:t[2]||(t[2]=function(){return e.updateActiveOnly&&e.updateActiveOnly.apply(e,arguments)}),"true-value":1,"false-value":0},null,544),[[c["M"],e.activeOnly]]),so]),e.empSchedList.length>0?(Object(c["x"])(),Object(c["g"])("div",oo,[Object(c["h"])("table",null,[ro,Object(c["h"])("tbody",null,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.empSchedList,(function(t){return Object(c["x"])(),Object(c["g"])("tr",{class:Object(c["r"])(t.classObject),onClick:function(a){return e.selectEmpSchedCheck(t)}},[Object(c["h"])("td",null,Object(c["J"])(t.WorkSchedName),1),Object(c["h"])("td",ho,Object(c["J"])(e.$filters.reformatDate(t.DateFrom)),1),Object(c["h"])("td",fo,Object(c["J"])(e.$filters.reformatDate(t.DateTo)),1)],10,uo)})),256))])])])):(Object(c["x"])(),Object(c["g"])("div",bo," Work schedule empty.")),e.selectedEmpSched?(Object(c["x"])(),Object(c["e"])(a,{key:2,ref:"empScheDetailRef",empSched:e.selectedEmpSched,onDeleted:e.deleteSelection,onUpdated:e.updatedEmpSchedule},null,8,["empSched","onDeleted","onUpdated"])):Object(c["f"])("",!0)])}var po=function(e){return Object(c["A"])("data-v-2c9a2982"),e=e(),Object(c["y"])(),e},Oo={key:0,class:"section default-form sched-empSched-form mt-4"},jo=po((function(){return Object(c["h"])("h3",null,"Schedule Details",-1)})),yo={class:"caption mt-2"},go=po((function(){return Object(c["h"])("div",{class:"form-label"},"Name",-1)})),vo={class:"label-empSched"},Do={class:"caption d-flex mt-4"},So=po((function(){return Object(c["h"])("div",{class:"form-label"},"Number of Weeks",-1)})),ko={class:"label-empSched"},xo={class:"d-flex justify-space-between"},wo={class:"caption mt-4"},Co=po((function(){return Object(c["h"])("div",{class:"date-label"},"Date From",-1)})),Ao=["value"],To={class:"caption mt-4"},Eo=po((function(){return Object(c["h"])("div",{class:"date-label"},"Date To",-1)})),Mo=["value"],Fo={class:"caption mt-4"},No=po((function(){return Object(c["h"])("div",{class:"date-label"},"Notes",-1)})),Po={class:"section-table ui-gridbox-scrollable-titles mt-4"},Io={class:"aff-table sched-empSched-table"},Yo=Object(c["i"])('<div class="head-cell" data-v-2c9a2982>Week</div><div class="head-cell" data-v-2c9a2982>Day</div><div class="head-cell" data-v-2c9a2982>Hours</div><div class="head-cell" data-v-2c9a2982>Start</div><div class="head-cell" data-v-2c9a2982>Finish</div><div class="head-cell break-column-width" data-v-2c9a2982>Unpaid Break</div><div class="head-cell" data-v-2c9a2982>Shift</div>',7),Lo=[Yo],Ro={class:"aff-table-body"},Ho={class:"aff-table-body-row"},Wo={class:"aff-table-body-cell"},Bo={class:"aff-table-body-cell"},Vo={class:"mr-2 days-width"},$o={class:"aff-table-body-cell"},Uo={class:"aff-table-body-cell"},Jo={class:"aff-table-body-cell"},_o={class:"aff-table-body-cell"},Go={class:"aff-table-body-cell"},Ko={class:"schedules-buttons form-row d-flex justify-end mt-4"},zo=po((function(){return Object(c["h"])("span",{class:"icon-briefcase mr-1"},null,-1)})),Qo=po((function(){return Object(c["h"])("span",null,"Remove",-1)})),qo=[zo,Qo],Xo=["disabled"],Zo=po((function(){return Object(c["h"])("span",{class:"icon-cancel mr-1"},null,-1)})),er=po((function(){return Object(c["h"])("span",null,"Cancel",-1)})),tr=[Zo,er],ar=["disabled"],nr=po((function(){return Object(c["h"])("span",{class:"icon-save mr-1"},null,-1)})),cr=po((function(){return Object(c["h"])("span",null,"Update",-1)})),lr=[nr,cr];function ir(e,t){var a=Object(c["F"])("date-picker");return e.empSchedDetail&&e.empSchedDetail.Detail?(Object(c["x"])(),Object(c["g"])("div",Oo,[jo,Object(c["h"])("form",{onSubmit:t[11]||(t[11]=Object(c["U"])((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[Object(c["h"])("div",yo,[go,Object(c["h"])("div",vo,Object(c["J"])(e.empSchedDetail.Detail.Name),1)]),Object(c["h"])("div",Do,[So,Object(c["h"])("div",ko,Object(c["J"])(e.empSchedDetail.Detail.NoOfWeeks),1)]),Object(c["h"])("div",xo,[Object(c["h"])("div",wo,[Co,Object(c["h"])("input",Object(c["p"])({value:e.$filters.reformatDate(e.empSchedDetail.DateFrom)},e.attrs,Object(c["K"])(e.on),{outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.empSchedDetail.DateFrom)}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateFrom,"DateFrom")}),"onClick:clear":t[2]||(t[2]=function(t){return e.fromDate=!1})}),null,16,Ao)]),Object(c["h"])("div",To,[Eo,Object(c["h"])("input",Object(c["p"])({value:e.$filters.reformatDate(e.empSchedDetail.DateTo)},e.attrs,Object(c["K"])(e.on),{autocomplete:"off",outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[3]||(t[3]=function(t){return e.updateDateText(t,e.empSchedDetail.DateTo)}),onClick:t[4]||(t[4]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateTo,"DateTo")}),"onClick:clear":t[5]||(t[5]=function(t){return e.toDateMenu=!1})}),null,16,Mo)])]),Object(c["h"])("div",Fo,[No,Object(c["S"])(Object(c["h"])("textarea",{class:"caption schedule-textarea",onKeyup:t[6]||(t[6]=function(t){return e.hasChanges=!0}),"hide-details":"",rows:"2",outlined:"",dense:"","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.empSchedDetail.Comment=t})},"\r\n                ",544),[[c["O"],e.empSchedDetail.Comment]])]),Object(c["h"])("div",Po,[Object(c["h"])("div",Io,[Object(c["h"])("div",{class:Object(c["r"])(["sched-detail-days",{"shift-min-width":e.showMore}])},[Object(c["h"])("div",{class:Object(c["r"])(["aff-table-head",{"show-shift-column":e.showMore}])},Lo,2),Object(c["h"])("div",Ro,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.empSchedDetail.Detail.Days,(function(t){return Object(c["x"])(),Object(c["g"])("div",Ho,[Object(c["h"])("div",Wo,[Object(c["S"])(Object(c["h"])("span",null,Object(c["J"])(t.Week),513),[[c["P"],e.isFirstDayOfWeek(t.DayOfWeek)]])]),Object(c["h"])("div",Bo,[Object(c["h"])("span",Vo,Object(c["J"])(t.DayNumber+1),1),Object(c["h"])("span",null,Object(c["J"])(e.getDayOfWeek(t.DayOfWeek)),1)]),Object(c["h"])("div",$o,Object(c["J"])(t.Hours),1),Object(c["h"])("div",Uo,[Object(c["h"])("span",null,Object(c["J"])(e.$filters.reformatTime(t.StartTime)),1)]),Object(c["h"])("div",Jo,[Object(c["h"])("span",null,Object(c["J"])(e.$filters.reformatTime(t.FinishTime)),1)]),Object(c["h"])("div",_o,[Object(c["h"])("span",null,Object(c["J"])(e.$filters.reformatBreakHours(t.BreakHours)),1)]),Object(c["h"])("div",Go,[Object(c["h"])("span",null,Object(c["J"])(t.ShiftId),1)])])})),256))])],2)])]),Object(c["h"])("div",Ko,[Object(c["h"])("button",{type:"button",class:"white--text small red text-capitalize mr-2",onClick:t[8]||(t[8]=function(t){return e.RemoveSchedule()})},qo),Object(c["h"])("button",{type:"button",class:"white--text small grey text-capitalize mr-2",disabled:!e.hasChanges,onClick:t[9]||(t[9]=function(t){return e.cancelChanges()})},tr,8,Xo),Object(c["h"])("button",{type:"button",class:"white--text small green text-capitalize mr-1",disabled:!e.hasChanges,onClick:t[10]||(t[10]=function(t){return e.updateEmpSched()})},lr,8,ar)])],32),Object(c["k"])(a,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])):Object(c["f"])("",!0)}var sr=Object(c["l"])({name:"emp-schedule-detail",props:["empSched"],components:{DatePicker:Yn},data:function(){return{dateModalTop:null,dateModalLeft:null,datePickerTargetDay:null,dateType:"",empSchedDetail:null,hasChanges:!1,fromDateMenu:!1,toDateMenu:!1,fromDatePickerValue:"",toDatePickerValue:""}},computed:{},mounted:function(){this.$emit("dataChanged",this.hasChanges),this.getEmpSchedDetail()},watch:Object($t["a"])({},"empSched",(function(e,t){e!=t&&(this.empSchedDetail=null,this.hasChanges=null,this.fromDateMenu=!1,this.toDateMenu=!1,this.getEmpSchedDetail())})),methods:{getEmpSchedDetail:function(){var e=this;kn.loading(),ce.EmpSchedDetailRequest(this.empSched.EmployeeNo+"/"+this.empSched.Id).then((function(t){if(e.empSchedDetail=t.Data,e.empSchedDetail.Detail){for(var a=0,n=zt()(e.empSchedDetail.Detail.StartDate),c=7*e.empSchedDetail.Detail.NoOfWeeks,l=new Array(c),i=0;i<c;i++)i%7==0&&a++,l[i]={DayNumber:i,DayOfWeek:n.day(),Week:a,Date:zt()(n),Hours:0,BreakHours:null,StartTime:null,FinishTime:null,ShiftId:null},n.add(1,"day");e.empSchedDetail.Detail.Days.map((function(e){e.StartTime&&(l[e.DayNumber].StartTime=zt()(e.StartTime)),e.FinishTime&&(l[e.DayNumber].FinishTime=zt()(e.FinishTime)),l[e.DayNumber].Hours=e.Hours,l[e.DayNumber].ShiftId=e.ShiftId,l[e.DayNumber].BreakHours=e.BreakHours})),e.empSchedDetail.Detail.Days=l,e.empSchedDetail.Detail.StartDate=zt()(e.empSchedDetail.Detail.StartDate),t.Data.DateFrom&&(e.empSchedDetail.DateFrom=zt()(t.Data.DateFrom,"YYYY-MM-DD")),t.Data.DateTo&&(e.empSchedDetail.DateTo=zt()(t.Data.DateTo,"YYYY-MM-DD")),e.datePickerFormattedFromDate(),e.datePickerFormattedToDate()}})).finally((function(){return kn.clear()}))},submitForm:function(){return!1},updateDateText:function(e,t){this.toDateMenu=!1,t.set(zt()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.fromDatePickerValue=this.empSchedDetail.DateFrom?zt()(this.empSchedDetail.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.empSchedDetail.DateTo?zt()(this.empSchedDetail.DateTo).format("YYYY-MM-DD"):void 0},fromDateDatePickerHandler:function(e){"string"===typeof e&&(e=zt()(e)),this.empSchedDetail.DateFrom=e,this.hasChanges=!0,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=zt()(e)),this.empSchedDetail.DateTo=e,this.hasChanges=!0,this.datePickerFormattedToDate()},isFirstDayOfWeek:function(e){var t=zt()(this.empSchedDetail.Detail.StartDate);return e==t.day()},getDayOfWeek:function(e){if(e<0||e>6)return"unknown";var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[e]},RemoveSchedule:function(){var e=this;kn.checkChange({message:"Are you sure?",onOk:function(){kn.loading(),ce.RemoveEmployeeWorkSchedule(e.empSchedDetail.Id,e.empSched.EmployeeNo).then((function(t){e.$emit("deleted")})).finally((function(){return kn.clear()}))}})},cancelChanges:function(){var e=this;if(this.hasChanges){var t="There is currently unsaved schedule changes <br /> Do you want to discard your changes?";ly.emit("dialog",{message:t,showButtons:!0,showCancel:!0,okColor:"orange",onOk:function(){e.getEmpSchedDetail(),e.hasChanges=!1},onCancel:function(){}})}else this.getEmpSchedDetail()},updateEmpSched:function(){var e=this,t=zt()(this.empSchedDetail.DateFrom),a=zt()(this.empSchedDetail.DateTo);if(t&&a&&t>a)kn.alert("<br />Date From cannot be before Date To.");else{ly.emit("dialog",{message:"Updating Employee Schedule",showButtons:!1,showLoader:!0,noClose:!1}),kn.loading();var n={Id:this.empSchedDetail.Id,DateFrom:t?t.format("DD/MMM/YYYY"):null,DateTo:a?a.format("DD/MMM/YYYY"):null,Comment:this.empSchedDetail.Comment};ce.UpdateEmpSchedRequest(n,this.empSched.EmployeeNo).then((function(t){kn.clear(),e.$emit("updated")})).catch((function(e){kn.alert(e.message),console.error("err",e)}))}},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.empSchedDetail.DateTo=a:"DateFrom"===e.dateType&&(e.empSchedDetail.DateFrom=a),e.hasChanges=!0;case 5:case"end":return t.stop()}}),t)})))()}}});a("28f0");const or=se()(sr,[["render",ir],["__scopeId","data-v-2c9a2982"]]);var rr=or,ur=Object(c["l"])({name:"employeeSchedule",components:{EmpScheduleDetail:rr},props:["employee"],data:function(){return{selectedEmp:null,empSchedList:[],activeOnly:!1,selectedEmpSched:null}},setup:function(e){var t=Object(c["C"])(e.employee);return{selectedEmp:t}},mounted:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")},watch:{employee:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")}},methods:{selectEmpSchedCheck:function(e){var t=this;this.$refs.empScheDetailRef&&this.$refs.empScheDetailRef.hasChanges?kn.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.selectEmpSched(e)}}):this.selectEmpSched(e)},selectEmpSched:function(e){this.empSchedList.forEach((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedEmpSched=e},getEmpWorkScheds:function(){var e=this;kn.loading(),ce.EmpWorkScheds(this.selectedEmp.EmployeeNo+(this.activeOnly?"?activeOnly=true":"?activeOnly=false")).then((function(t){t.Data.map((function(e,t){e.classObject={selected:!1,odd:t%2},e.DateFrom=new Date(Date.parse(e.DateFrom)),e.DateTo&&(e.DateTo=new Date(Date.parse(e.DateTo)))})),e.empSchedList=t.Data,kn.clear()}))},updateActiveOnly:function(){this.getEmpWorkScheds()},closeEmployeeSchedule:function(e){var t=this;e&&this.$refs.empScheDetailRef&&(!this.$refs.empScheDetailRef||this.$refs.empScheDetailRef.hasChanges)?kn.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.closeEmployeeSchedule(!1)}}):this.$emit("close")},deleteSelection:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()},updatedEmpSchedule:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()}}});a("3e91");const dr=se()(ur,[["render",mo],["__scopeId","data-v-3708ba95"]]);var hr=dr,fr=function(e){return Object(c["A"])("data-v-d14d6750"),e=e(),Object(c["y"])(),e},br={class:"section shadow sched-card-default pa-4"},mr=fr((function(){return Object(c["h"])("h3",null,"Select Employees",-1)})),pr={class:"aff-table mt-4"},Or={class:"ui-grid"},jr=["onClick"],yr={class:"name-text-width"},gr={class:"current-schedules-width"},vr={class:"schedule-name"},Dr={class:"schedule-name"},Sr=["onClick"],kr=fr((function(){return Object(c["h"])("span",{class:"icon-add-to-list"},null,-1)})),xr=[kr],wr=["onClick"],Cr=fr((function(){return Object(c["h"])("span",{class:"icon-add-to-list"},null,-1)})),Ar=[Cr],Tr=["onClick"],Er=fr((function(){return Object(c["h"])("span",{class:"icon-minus white--text small"},null,-1)})),Mr=[Er];function Fr(e,t){var a=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",br,[mr,Object(c["S"])(Object(c["h"])("input",{class:"mt-2 caption text-field-input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchTerm=t}),"hide-details":"",dense:"",outlined:"",type:"text",placeholder:"Search for employees "},null,512),[[c["O"],e.searchTerm]]),Object(c["h"])("div",pr,[Object(c["h"])("table",Or,[Object(c["h"])("tbody",null,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.empList,(function(t){return Object(c["x"])(),Object(c["g"])("tr",{class:Object(c["r"])(t.classObject),onClick:function(a){return e.toggleEmployeeSelect(t)}},[Object(c["h"])("td",null,[Object(c["h"])("span",yr,Object(c["J"])(t.EmployeeName)+" ("+Object(c["J"])(t.EmployeeNo)+")",1),Object(c["h"])("span",gr,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(t.WorkschedNames,(function(e){return Object(c["x"])(),Object(c["g"])("div",vr,Object(c["J"])(e),1)})),256)),Object(c["h"])("div",Dr,Object(c["J"])(t.PersonalSchedule),1)])]),Object(c["h"])("td",null,[e.isMobileView||t.classObject.selected?Object(c["f"])("",!0):Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{key:0,class:"green white--text fsmall",onClick:Object(c["U"])((function(a){return e.addEmployee(t)}),["stop"])},xr,8,Sr)),[[a,{content:"Add to Employee Selection List"},void 0,{right:!0}]]),e.isMobileView&&!t.classObject.selected?(Object(c["x"])(),Object(c["g"])("button",{key:1,class:"green white--text fsmall",onClick:Object(c["U"])((function(a){return e.addEmployee(t)}),["stop"])},Ar,8,wr)):Object(c["f"])("",!0),t.classObject.selected?Object(c["S"])((Object(c["x"])(),Object(c["g"])("button",{key:2,class:"grey fsmall",onClick:Object(c["U"])((function(a){return e.removeEmployee(t)}),["stop"])},Mr,8,Tr)),[[a,{content:"Remove Employee From Selection List"},void 0,{right:!0}]]):Object(c["f"])("",!0)])],10,jr)})),256))])])])])}a("25f0");var Nr=Object(c["l"])({name:"SearchEmployee",data:function(){return{searchTerm:"",empList:[],selectedEmpList:[],selectedEmp:null,isMobileView:!1}},mounted:function(){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(console.log("is mobile view true"),this.isMobileView=!0):this.isMobileView=!1,this.getEmployeesList()},watch:{searchTerm:function(e,t){if(t!=e)if(0==e.trim().length)this.empList.forEach((function(e){e.classObject.visible=!0,e.classObject.hidden=!1}));else{var a=e.toLowerCase().trim();this.empList.forEach((function(e){e.classObject.visible=e.EmployeeName&&e.EmployeeName.toLowerCase().indexOf(a)>-1||e.EmployeeNo&&e.EmployeeNo.toString().indexOf(a)>-1,e.classObject.hidden=!e.classObject.visible}))}}},methods:{getEmployeesList:function(){var e=this;kn.loading(),ce.EmployeesList().then((function(t){t.Data.map((function(e,t){e.classObject={visible:!0,hidden:!1,selected:!1,odd:t%2}})),e.empList=t.Data})).finally((function(){kn.clear()}))},toggleEmployeeSelect:function(e){e.classObject.selected?this.removeEmployee(e):this.addEmployee(e)},removeEmployee:function(e){e.classObject.selected=!1,this.selectedEmpList.splice(this.selectedEmpList.indexOf(e),1),this.$emit("updateSelectedEmpList",this.selectedEmpList)},addEmployee:function(e){e.classObject.selected=!0,this.selectedEmpList.push(e),this.$emit("updateSelectedEmpList",this.selectedEmpList)},clearSelectedEmployeeList:function(){this.selectedEmpList.forEach((function(e){e.classObject.selected=!1})),this.selectedEmpList=[],this.$emit("updateSelectedEmpList",this.selectedEmpList)}}});a("1fa8");const Pr=se()(Nr,[["render",Fr],["__scopeId","data-v-d14d6750"]]);var Ir=Pr,Yr=Object(c["l"])({name:"employeeAllocation",components:{SearchEmployee:Ir,EmployeeSchedule:hr,DatePicker:Yn},data:function(){return{bulkEmpList:[],schedList:[],hasChanges:!1,cloneSchedList:[],selectSearchInput:"",schedAllocation:{WorkschedId:-1,DateFrom:zt()(),DateTo:null,Comment:"",EndExistingScheds:!0},selectedSchedule:{},selectedEmpForDetail:null,startDateMenu:!1,toDateMenu:!1,startDatePickerValue:"",toDatePickerValue:"",datePickerTargetDay:null,dateType:"",isMobileView:!1,dateModalTop:null,dateModalLeft:null}},mounted:function(){var e=this;this.isMobileView=this.checkIsMobileView(),ce.StandardSchedules().then((function(t){e.schedList=t.Data.filter((function(e){return!1===e.Archive&&0===e.ScheduleType})),e.cloneSchedList=e.schedList.slice()})),this.$watch("schedAllocation",(function(t,a){t===a&&(e.hasChanges=!0)}),{deep:!0})},computed:{selectedSched:function(){var e=this;if(-1===this.schedAllocation.WorkschedId)return!1;var t=this.schedList;return t.find((function(t){return t.Id===e.schedAllocation.WorkschedId}))},capDate:function(){if(this.schedAllocation.DateFrom){var e=this.schedAllocation,t=zt()(e.DateFrom),a=t.subtract(1,"day");return a.format("DD/MM/YYYY")}}},methods:{navDownList:function(){},updateSearchList:function(e){var t=this;"ArrowDown"===e.key&&this.$refs.selectDropdownRef.focus(),this.cloneSchedList=this.schedList.filter((function(e){return e.Name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1}))},updateDateText:function(e,t,a){var n,c;if(this.startDateMenu=!1,this.toDateMenu=!1,t)t.set(zt()(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value,"DD/MM/YYYY").toObject());else if("DateTo"===a)this.schedAllocation.DateTo=zt()(null===e||void 0===e||null===(c=e.target)||void 0===c?void 0:c.value,"DD/MM/YYYY");else if("DateFrom"===a){var l;this.schedAllocation.DateFrom=zt()(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value,"DD/MM/YYYY")}this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.startDatePickerValue=this.schedAllocation.DateFrom?zt()(this.schedAllocation.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.schedAllocation.DateTo?zt()(this.schedAllocation.DateTo).format("YYYY-MM-DD"):void 0},updateEmpList:function(e){this.bulkEmpList=e},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=zt()(e)),this.schedAllocation.DateFrom=e,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=zt()(e)),this.schedAllocation.DateTo=e,this.datePickerFormattedToDate()},removeEmployee:function(e){this.$refs.SearchEmployeeRef.removeEmployee(e)},clearSelectedEmployee:function(){var e=this;this.hasChanges?kn.checkChange({message:"There are currently Schedule Allocation changes <br /> Do you want to discard your changes?",onOk:function(){e.$refs.SearchEmployeeRef.clearSelectedEmployeeList(),e.resetSchedAllocation()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},allocateEmployees:function(){var e=this,t="";if((this.selectedSchedule.Id<1||!this.selectedSchedule.Id)&&(t+="<br />Select a schedule that you want to allocate."),this.schedAllocation.DateFrom&&this.schedAllocation.DateTo&&this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo)>0&&(t+="<br />Date To cannot be before Date From."),""==t){var a={WorkschedId:this.selectedSchedule.Id,EmployeeList:[],DateFrom:zt()(this.schedAllocation.DateFrom)?zt()(this.schedAllocation.DateFrom).format("DD/MMM/YYYY"):null,DateTo:zt()(this.schedAllocation.DateTo)?zt()(this.schedAllocation.DateTo).format("DD/MMM/YYYY"):null,Comment:this.schedAllocation.Comment,EndExistingScheds:this.schedAllocation.EndExistingScheds};this.bulkEmpList.length>0&&this.bulkEmpList.forEach((function(e){a.EmployeeList.push(e.EmployeeNo)})),kn.loading(),ce.AllocateSchedule(a).then((function(t){e.hasChanges=!1,e.resetSchedAllocation(),kn.clear(),e.$refs.EmployeeScheduleRef&&e.$refs.EmployeeScheduleRef.getEmpWorkScheds()})).catch((function(e){kn.alert(e.message),console.error("err",e)}))}else kn.alert(t)},closeSchedAllocation:function(){var e=this;this.hasChanges?kn.checkChange({message:"You have unsaved changes. Are you sure to discard the changes?",onOk:function(){e.resetSchedAllocation(),e.hasChanges=!1,e.$refs.SearchEmployeeRef.clearSelectedEmployeeList()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},showScheduleDetail:function(e){this.selectedEmpForDetail=e},resetSelectedEmpForDetail:function(){this.selectedEmpForDetail=null},resetSchedAllocation:function(){this.hasChanges=!1,this.schedAllocation={WorkschedId:-1,DateFrom:zt()(),DateTo:null,Comment:"",EndExistingScheds:!0}},checkIsMobileView:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},chooseSchedule:function(e,t){e.target.blur(),this.selectedSchedule=t,this.selectSearchInput=this.selectedSchedule.Name;e.target.blur();var a=this.$refs.selectRef;a.blur();var n=this.$refs.selectInputRef;n.blur()},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.schedAllocation.DateTo=a:"DateFrom"===e.dateType&&(e.schedAllocation.DateFrom=a);case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(){}}});a("91a1");const Lr=se()(Yr,[["render",ao],["__scopeId","data-v-5d3c1829"]]);var Rr=Lr,Hr=(a("b680"),function(e){return Object(c["A"])("data-v-54e0be5c"),e=e(),Object(c["y"])(),e}),Wr={class:"d-flex mt-4 justify-space-between"},Br=Object(c["i"])('<div class="left-box ml-2" data-v-54e0be5c><div class="background-legend" data-v-54e0be5c><div data-v-54e0be5c><div class="flexi-legend" data-v-54e0be5c></div><div class="legend-label" data-v-54e0be5c>Flexi Schedule</div></div><div class="ml-4" data-v-54e0be5c><div class="team-legend" data-v-54e0be5c></div><div class="legend-label" data-v-54e0be5c>Team Schedule</div></div><div class="ml-4" data-v-54e0be5c><div class="personal-legend" data-v-54e0be5c></div><div class="legend-label" data-v-54e0be5c>Personal Schedule</div></div></div></div>',1),Vr={class:"weekDetail d-flex align-center"},$r={class:"status-section right-box"},Ur={class:"copy2 ml-2 text-capitalize"},Jr={class:"d-flex mt-4 justify-space-between align-center"},_r={class:"d-flex align-center"},Gr={class:"costCenter-wrapper"},Kr={key:0},zr={class:"custom-select",tabindex:"1",ref:"selectRef"},Qr=Hr((function(){return Object(c["h"])("span",{class:"inline-block-middle"},"Actions",-1)})),qr={class:"inline-block-middle ml-1",style:{height:"15px"}},Xr={class:"custom-select-items"},Zr={class:"action-buttons"},eu={key:1},tu={key:0},au={class:"custom-select",tabindex:"1",ref:"selectRef"},nu=Hr((function(){return Object(c["h"])("span",{class:"inline-block-middle"},"Actions",-1)})),cu={class:"inline-block-middle ml-1",style:{height:"15px"}},lu={class:"custom-select-items"},iu={class:"action-buttons"},su={class:"schedules-data-medium mt-4",style:{overflow:"auto"}},ou={class:"flex-sche-table"},ru={class:"table-head"},uu={class:"schedule-head-grid"},du=Hr((function(){return Object(c["h"])("div",{class:"table-cell"},null,-1)})),hu=Hr((function(){return Object(c["h"])("div",{class:"table-cell"},"Std Hours",-1)})),fu=Hr((function(){return Object(c["h"])("div",{class:"table-cell"},"Net Hours",-1)})),bu={class:"table-cell"},mu={class:"table-body"},pu={key:0,class:"schedules-arr"},Ou=["onClick"],ju={key:0,class:"published-icon"},yu=Hr((function(){return Object(c["h"])("span",null,"P",-1)})),gu=[yu],vu={class:"content-cell"},Du={class:"content-cell"},Su={class:"schedules-data-medium mt-4"};function ku(e,t){var a=Object(c["F"])("Icon"),n=Object(c["F"])("flex-schedule-cell-control"),l=Object(c["F"])("flex-schedule-cost-center"),i=Object(c["F"])("day-cell"),s=Object(c["F"])("perfect-scrollbar"),o=Object(c["F"])("printable-view"),r=Object(c["F"])("edit-flex-schedule"),u=Object(c["F"])("date-picker"),d=Object(c["F"])("draft-creation-dialog"),h=Object(c["F"])("extra-emp-detail"),f=Object(c["F"])("analysis-chart"),b=Object(c["F"])("publish-dialog"),m=Object(c["F"])("cost-analysis-dialog"),p=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",Wr,[Br,Object(c["h"])("div",Vr,[Object(c["h"])("span",{class:"arrow-height mr-4",onClick:t[0]||(t[0]=function(){return e.getLastWeek&&e.getLastWeek.apply(e,arguments)})},[Object(c["k"])(a,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#0000008a"}},null,8,["icon"])]),Object(c["h"])("span",{onClick:t[1]||(t[1]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},Object(c["J"])(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+Object(c["J"])(e.dayFocus.format("DD/MM/YYYY")),1),Object(c["h"])("span",{class:"arrow-height ml-4",onClick:t[2]||(t[2]=function(){return e.getNextWeek&&e.getNextWeek.apply(e,arguments)})},[Object(c["k"])(a,{icon:e.$icons.chevronRight,height:"30",style:{color:"#0000008a"}},null,8,["icon"])])]),Object(c["h"])("div",$r,[Object(c["h"])("span",Ur," Status: "+Object(c["J"])(e.getCurrentWeekStatus()),1)])]),Object(c["h"])("div",Jr,[Object(c["h"])("div",_r,[Object(c["k"])(n,{class:"inline-block"}),Object(c["h"])("div",Gr,[Object(c["k"])(l,{class:"ml-2",costCenterOptions:e.costCenterOptions,onSelectOption:e.selectCostCenter},null,8,["costCenterOptions","onSelectOption"])])]),"published"===e.weekStatus?(Object(c["x"])(),Object(c["g"])("div",Kr,[Object(c["h"])("div",zr,[Object(c["h"])("div",null,[Object(c["h"])("button",{class:"grey small copy2 white--text action-button-width",onClick:t[3]||(t[3]=function(){return e.changeDisplayControl&&e.changeDisplayControl.apply(e,arguments)})},[Qr,Object(c["h"])("span",qr,[Object(c["k"])(a,{icon:e.$icons.chevronDown,height:"15",style:{color:"#FFFF"}},null,8,["icon"])])])]),Object(c["h"])("div",Xr,[Object(c["h"])("div",Zr,[Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[4]||(t[4]=function(){return e.openAnalysisChart&&e.openAnalysisChart.apply(e,arguments)})},"Coverage"),Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[5]||(t[5]=function(){return e.openCostAnalysis&&e.openCostAnalysis.apply(e,arguments)})},"Cost"),Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[6]||(t[6]=function(){return e.printFlexSchedule&&e.printFlexSchedule.apply(e,arguments)})},"Print")])])],512)])):(Object(c["x"])(),Object(c["g"])("div",eu,[e.isAdmin?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("div",tu,[Object(c["h"])("span",null,[Object(c["h"])("div",au,[Object(c["h"])("div",null,[Object(c["h"])("button",{class:"grey small copy2 white--text action-button-width",onClick:t[7]||(t[7]=function(){return e.changeDisplayControl&&e.changeDisplayControl.apply(e,arguments)})},[nu,Object(c["h"])("span",cu,[Object(c["k"])(a,{icon:e.$icons.chevronDown,height:"15",style:{color:"#FFFF"}},null,8,["icon"])])])]),Object(c["h"])("div",lu,[Object(c["h"])("div",iu,[e.showCopy()?(Object(c["x"])(),Object(c["g"])("button",{key:0,class:"blue small copy2 white--text",onClick:t[8]||(t[8]=function(){return e.openDraftDialog&&e.openDraftDialog.apply(e,arguments)})},"Copy")):Object(c["f"])("",!0),"draft"===e.weekStatus||"partial"===e.weekStatus?(Object(c["x"])(),Object(c["g"])("button",{key:1,class:"blue small copy2 mt-2 white--text",onClick:t[9]||(t[9]=function(){return e.selectEmployeeAndPublish&&e.selectEmployeeAndPublish.apply(e,arguments)})},"Publish")):Object(c["f"])("",!0),Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[10]||(t[10]=function(){return e.openAnalysisChart&&e.openAnalysisChart.apply(e,arguments)})},"Coverage"),Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[11]||(t[11]=function(){return e.openCostAnalysis&&e.openCostAnalysis.apply(e,arguments)})},"Cost"),Object(c["h"])("button",{class:"blue small copy2 mt-2 white--text",onClick:t[12]||(t[12]=function(){return e.printFlexSchedule&&e.printFlexSchedule.apply(e,arguments)})},"Print")])])],512)])]))]))]),Object(c["h"])("div",su,[Object(c["h"])("div",ou,[Object(c["h"])("div",ru,[Object(c["h"])("div",uu,[du,hu,fu,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.weekDays,(function(e){return Object(c["x"])(),Object(c["g"])("div",bu,Object(c["J"])(e.day),1)})),256))])]),Object(c["k"])(s,null,{default:Object(c["R"])((function(){return[Object(c["h"])("div",mu,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.scheduleWeekMap.keys(),(function(t){var a;return Object(c["x"])(),Object(c["g"])(c["a"],null,[e.scheduleWeekMap.get(t)&&e.scheduleWeekMap.get(t).show?(Object(c["x"])(),Object(c["g"])("div",pu,[Object(c["h"])("div",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},[Object(c["h"])("span",null,Object(c["J"])(e.scheduleWeekMap.get(t).employeeName),1),"published"===e.scheduleWeekMap.get(t).empSchePublishState?Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",ju,gu)),[[p,{content:"Schedule for the week is published. "},void 0,{top:!0}]]):Object(c["f"])("",!0)],8,Ou),Object(c["h"])("div",vu,Object(c["J"])(null===(a=e.scheduleWeekMap.get(t).stdHoursPerWeek)||void 0===a?void 0:a.toFixed(2)),1),Object(c["h"])("div",Du,Object(c["J"])(e.getTotalHour(e.scheduleWeekMap.get(t).sche)),1),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.scheduleWeekMap.get(t).sche,(function(a){return Object(c["x"])(),Object(c["g"])("div",{class:"content-cell",style:Object(c["s"])(a.column)},[Object(c["k"])(i,{scheDay:a,employeeNo:t,employeeName:e.scheduleWeekMap.get(t).employeeName,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","employeeNo","employeeName","onOpenEditDialog"])],4)})),256))])):Object(c["f"])("",!0)],64)})),256))])]})),_:1})])]),Object(c["h"])("div",Su,[Object(c["k"])(o,{scheduleWeek:e.scheduleWeekMap,weekDays:e.weekDays,ref:"PrintableViewRef"},null,8,["scheduleWeek","weekDays"])]),Object(c["h"])("div",null,[Object(c["k"])(r,{ref:"EditModalRef",isEdit:e.isEditingDialog,weekStatus:e.weekStatus,modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["isEdit","weekStatus","onReload"]),Object(c["k"])(u,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"]),Object(c["k"])(d,{ref:"DraftCreationDialogRef",modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["onReload"]),Object(c["k"])(h,{ref:"ExtraEmpDetailRef",externalDetail:e.externalDetail},null,8,["externalDetail"]),Object(c["k"])(f,{ref:"AnalysisChartRef",modalIndex:1999},null,512),Object(c["k"])(b,{ref:"PublishDialogRef",onPublish:e.publishCurrentWeek},null,8,["onPublish"]),Object(c["k"])(m,{ref:"CostAnalysisDialogRef",dayFocus:e.dayFocus},null,8,["dayFocus"])])],64)}var xu=a("2909"),wu=(a("4ec9"),a("6062"),function(e){return Object(c["A"])("data-v-fbcfe204"),e=e(),Object(c["y"])(),e}),Cu={class:"bold"},Au={key:0},Tu={key:1},Eu={key:0},Mu={key:1},Fu={key:0,class:"mt-2"},Nu={key:1,class:"error-area red"},Pu={key:2,class:"error-area red"},Iu={class:"edit-form mt-4 copy2"},Yu=wu((function(){return Object(c["h"])("label",null,"Date",-1)})),Lu=Object(c["j"])(),Ru=wu((function(){return Object(c["h"])("label",null,"Employee Name",-1)})),Hu=Object(c["j"])(),Wu=wu((function(){return Object(c["h"])("label",null,"Employee No",-1)})),Bu=Object(c["j"])(),Vu=wu((function(){return Object(c["h"])("label",null,"Position",-1)})),$u={key:0},Uu=wu((function(){return Object(c["h"])("div",{class:"mt-4"},null,-1)})),Ju=Object(c["j"])(),_u=wu((function(){return Object(c["h"])("div",null,null,-1)})),Gu=wu((function(){return Object(c["h"])("label",null,"Start Time",-1)})),Ku=wu((function(){return Object(c["h"])("label",null,"Finish Time",-1)})),zu={key:0,class:"two-column orange"},Qu=wu((function(){return Object(c["h"])("div",{class:"mt-4"},null,-1)})),qu=wu((function(){return Object(c["h"])("div",null,null,-1)})),Xu=wu((function(){return Object(c["h"])("label",null,"Unpaid Break",-1)})),Zu={class:"break-parts"},ed=wu((function(){return Object(c["h"])("span",{class:"font-small"},"Hours",-1)})),td=wu((function(){return Object(c["h"])("div",{class:"break-parts mobile-column ml-2 mr-2"},[Object(c["h"])("span",null,":")],-1)})),ad={class:"break-parts"},nd=wu((function(){return Object(c["h"])("span",{class:"font-small"},"Minutes",-1)})),cd=wu((function(){return Object(c["h"])("label",null,"Net Hours",-1)})),ld=wu((function(){return Object(c["h"])("label",null,"Shift ID",-1)})),id={class:"mt-4 full-width d-flex justify-space-between"},sd=wu((function(){return Object(c["h"])("div",null,null,-1)})),od=wu((function(){return Object(c["h"])("span",{class:"white"},"Save",-1)})),rd=[od],ud=wu((function(){return Object(c["h"])("span",{class:"white"},"Delete",-1)})),dd=[ud],hd=wu((function(){return Object(c["h"])("span",{class:"white"},"Create",-1)})),fd=[hd],bd=wu((function(){return Object(c["h"])("span",{class:"white"},"Cancel",-1)})),md=[bd];function pd(e,t){var a=Object(c["F"])("custom-select"),n=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(n,{ref:"ModalRef"},{header:Object(c["R"])((function(){return[Object(c["h"])("div",null,[Object(c["h"])("h2",Cu,[e.isEdit?(Object(c["x"])(),Object(c["g"])("span",Au,"Edit Schedule")):(Object(c["x"])(),Object(c["g"])("span",Tu,["published"===e.weekStatus?(Object(c["x"])(),Object(c["g"])("span",Eu,"Create Schedule")):(Object(c["x"])(),Object(c["g"])("span",Mu,"Create Schedule"))]))])])]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",null,["Team"===e.day.scheduleType?(Object(c["x"])(),Object(c["g"])("div",Fu," This schedule is generated from team schedule. ")):Object(c["f"])("",!0),e.showTimeHourError?(Object(c["x"])(),Object(c["g"])("div",Nu,"The value for Hours Unpaid Break field must be a whole number. Use Minutes field for breaks that last partial hours.")):Object(c["f"])("",!0),e.showTimeMinuteError?(Object(c["x"])(),Object(c["g"])("div",Pu,"The value for Minutes Unpaid Break field must be a whole number.")):Object(c["f"])("",!0),Object(c["h"])("div",Iu,[Yu,Lu,Object(c["h"])("span",null,Object(c["J"])(e.dialogDate),1),Ru,Hu,Object(c["h"])("span",null,Object(c["J"])(e.employeeDetail.employeeName),1),Wu,Bu,Object(c["h"])("span",null,Object(c["J"])(e.employeeDetail.employeeNo),1),Vu,Object(c["h"])("div",null,[e.positionOptions&&1===e.positionOptions.length?(Object(c["x"])(),Object(c["g"])("span",$u,Object(c["J"])(e.positionOptions[0].positionTitle),1)):e.positionOptions&&e.positionOptions.length>1?(Object(c["x"])(),Object(c["e"])(a,{key:1,options:e.positionOptions,displayKey:"positionTitle",selected:e.selectedPosition,onSelectOption:e.selectPositionCustom},null,8,["options","selected","onSelectOption"])):Object(c["S"])((Object(c["x"])(),Object(c["g"])("input",{key:2,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.day.position=t})},null,512)),[[c["O"],e.day.position]])]),Uu,Ju,_u,Gu,Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.day.startTime=t}),onChange:t[2]||(t[2]=function(t){return e.updateStartTime(e.day)})},null,544),[[c["O"],e.day.startTime]]),Ku,Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.day.endTime=t}),onChange:t[4]||(t[4]=function(t){return e.updateEndTime(e.day)})},null,544),[[c["O"],e.day.endTime]]),e.showUnAvaError?(Object(c["x"])(),Object(c["g"])("span",zu,"Note: This schedule's time overlaps with this person's unavailability time.")):Object(c["f"])("",!0),Qu,qu,Xu,Object(c["h"])("div",null,[Object(c["h"])("div",Zu,[Object(c["S"])(Object(c["h"])("input",{type:"number",step:"any","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.breakHours=t}),onChange:t[6]||(t[6]=function(){return e.calcBreakHour&&e.calcBreakHour.apply(e,arguments)}),onKeydown:t[7]||(t[7]=function(t){return e.breakValidation(t)})},null,544),[[c["O"],e.breakHours,void 0,{lazy:!0}]]),ed]),td,Object(c["h"])("div",ad,[Object(c["S"])(Object(c["h"])("input",{type:"number",step:"any","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.breakMinutes=t}),onChange:t[9]||(t[9]=function(){return e.calcBreakHour&&e.calcBreakHour.apply(e,arguments)}),onKeydown:t[10]||(t[10]=function(t){return e.breakValidation(t)})},null,544),[[c["O"],e.breakMinutes,void 0,{lazy:!0}]]),nd])]),cd,Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.fixedHours=t})},null,512),[[c["O"],e.fixedHours,void 0,{lazy:!0}]]),ld,Object(c["h"])("div",null,[e.shiftOptions&&e.shiftOptions.length>0?(Object(c["x"])(),Object(c["e"])(a,{key:0,options:e.shiftOptions,displayKey:"description",selected:e.selectedShift,onSelectOption:e.selectShift},null,8,["options","selected","onSelectOption"])):Object(c["f"])("",!0)])])])]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",id,[sd,Object(c["h"])("div",null,[e.isEdit?(Object(c["x"])(),Object(c["g"])("button",{key:0,class:"blue normal copy2",onClick:t[12]||(t[12]=function(t){return e.updateSche()})},rd)):Object(c["f"])("",!0),e.isEdit&&e.allowDelete()?(Object(c["x"])(),Object(c["g"])("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[13]||(t[13]=function(t){return e.confirmIfDeleteSche()})},dd)):Object(c["f"])("",!0),e.isEdit?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("button",{key:2,class:"blue normal copy2",onClick:t[14]||(t[14]=function(t){return e.createSche()})},fd)),Object(c["h"])("button",{class:"ml-2 normal orange copy2",onClick:t[15]||(t[15]=function(t){return e.cancel()})},md)])])]})),_:1},512)}function Od(e,t){return window.innerWidth<1200?e.format("DD/MM/YYYY"):e.day(t).format("DD/MM/YYYY")}function jd(e,t){return window.innerWidth<1200?e.format("MM/DD/YYYY"):e.day(t).format("MM/DD/YYYY")}var yd=Object(c["l"])({name:"EditFlexSchedule",components:{Modal:Ce,CustomSelect:ci},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{day:{},unAvailability:null,selectedPosition:{},selectedShift:{},selectedCostElement1:{},selectedCostElement2:{},employeeDetail:{},dialogDate:"",showUnAvaError:!1,showTimeHourError:!1,showTimeMinuteError:!1,breakHours:null,breakMinutes:null}},setup:function(){var e=Object(Vt["b"])();return{shiftOptions:Object(c["c"])((function(){var t={shiftType:"",description:"",isDefault:null,archive:"F"},a=e.state.LookUp.shifts.slice();return a.unshift(t),a})),costElementOptions:Object(c["c"])((function(){return e.state.LookUp.costElements}))}},computed:{positionOptions:function(){var e=this.$store.state.LookUp.positions;return 1===e.length&&(this.selectedPosition=e[0]),e},fixedHours:{get:function(){return this.day.hours?this.day.hours.toFixed(2):""},set:function(e){this.day.hours=Number(e)}},fixedBreakLength:{get:function(){return this.day.breakLength?this.day.breakLength.toFixed(2):""},set:function(e){this.day.breakLength=Number(e)}}},mounted:function(){this.$store;this.day=this.$store.state.FlexSchedule.flexScheduleDay},methods:{selectCostElement1:function(e){this.selectedCostElement1=e},selectCostElement2:function(e){this.selectedCostElement2=e},selectShift:function(e){this.selectedShift=e},selectPositionCustom:function(e){this.selectedPosition=e},selectPosition:function(e,t){this.selectedPosition=t,e.target.blur();var a=this.$refs.selectRef;a.blur()},updateStartTime:function(e){var t;e.startTime&&(t=e.startTime.includes(":")?zt()(e.startTime,"HH:mm"):zt()(e.startTime,"Hmm"),t.isValid()?(e.startTime=t.format("HH:mm"),this.calcNetHour()):e.startTime="Invalid Time")},updateEndTime:function(e){var t;e.endTime&&(t=e.endTime.includes(":")?zt()(e.endTime,"HH:mm"):zt()(e.endTime,"Hmm"),t.isValid()?(e.endTime=t.format("HH:mm"),this.calcNetHour()):e.endTime="Invalid Time")},breakValidation:function(e){e.key.match(/[-]/)&&e.preventDefault()},checkBreakHours:function(){if(this.day.breakLength){var e=this.day.breakLength,t=Math.floor(e),a=e-t;0!==t&&(this.breakHours=t),a>0&&(this.breakMinutes=Math.round(60*a))}},calcBreakHour:function(){this.breakHours&&this.breakMinutes?this.day.breakLength=Number(this.breakHours)+Math.round(Number(this.breakMinutes)/60*1e3)/1e3:this.breakHours?this.day.breakLength=Number(this.breakHours):this.breakMinutes?this.day.breakLength=Math.round(Number(this.breakMinutes)/60*1e3)/1e3:(0===this.breakHours&&this.breakMinutes,this.day.breakLength=0),this.calcNetHour()},calcNetHour:function(){if("Invalid Time"!==this.day.startTime&&"Invalid Time"!==this.day.endTime&&this.day.startTime&&this.day.endTime){var e=zt()(this.day.startTime,"H:mm"),t=zt()(this.day.endTime,"H:mm"),a=t.diff(e,"hours",!0);a<=0&&(a=t.add(1,"day").diff(e,"hours",!0));var n=Math.round(100*a)/100;this.day.breakLength?this.day.hours=n-this.day.breakLength:this.day.hours=n,this.checkUnavailability()}},checkUnavailability:function(){if(this.showUnAvaError=!1,this.day.startTime&&this.day.endTime&&this.unAvailability&&this.unAvailability.endTime&&this.unAvailability.startTime){var e=zt()(this.day.startTime,"HH:mm"),t=zt()(this.day.endTime,"HH:mm"),a=zt()(this.unAvailability.startTime,"HH:mm"),n=zt()(this.unAvailability.endTime,"HH:mm");e<=n&&t>=a&&(console.log("show error"),this.showUnAvaError=!0)}},clearForm:function(){this.$store.commit(Ht.clearForm),this.showUnAvaError=!1,this.showTimeHourError=!1,this.showTimeMinuteError=!1},cancel:function(){this.$store.commit(Ht.clearForm),this.showUnAvaError=!1,this.showTimeHourError=!1,this.showTimeMinuteError=!1,this.toggleShow()},getPublishStateBaseOnEmp:function(){if(aa())return"draft";var e=this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,t=this.$store.state.FlexSchedule.scheduleWeek.get(e).empSchePublishState;return"published"===t?"published":"draft"},validateForm:function(){return this.showTimeHourError=!1,this.showTimeMinuteError=!1,this.breakHours&&this.breakHours.toString().indexOf(".")>-1?(this.showTimeHourError=!0,!1):!(this.breakMinutes&&this.breakMinutes.toString().indexOf(".")>-1)||(this.showTimeMinuteError=!0,!1)},updateSche:function(){var e=this;if(this.validateForm()){var t=this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),a=this.getStartAndEndTimeWithDate(t,this.day.startTime,this.day.endTime),n=Object(Ut["a"])(a,2),c=n[0],l=n[1];kn.loading();var i={Id:this.$store.state.FlexSchedule.selectedFlexDay.id,EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:t,StartTime:c,EndTime:l,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:this.getPublishStateBaseOnEmp(),ScheduleType:"Flex",ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};ce.PatchFlexSchedule([i]).then((function(t){e.$emit("reload"),kn.clear()}),(function(){kn.clear(),kn.alert("Something went wrong. Update Schedule failed")})),this.$store.commit(Ht.saveScheduleDayToWeek),this.toggleShow()}},createSche:function(){var e=this;if(this.validateForm()){var t=jd(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),a=this.getStartAndEndTimeWithDate(t,this.day.startTime,this.day.endTime),n=Object(Ut["a"])(a,2),c=n[0],l=n[1];kn.loading();var i=[{EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:t,StartTime:c,EndTime:l,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:this.getPublishStateBaseOnEmp(),ScheduleType:"Flex",ScheduleData:{ShiftId:this.selectedShift.shiftType?this.selectedShift.shiftType:"",BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:"",CostElement2:this.selectedCostElement2?this.selectedCostElement2.id:""}}];ce.CreateFlexSchedule(i).then((function(t){if(t.Error)throw t;e.$store.commit(Ht.saveScheduleDayToWeek),kn.clear(),e.toggleShow(),e.$emit("reload")})).catch((function(e){kn.clear(),e.Error?kn.alert(e.Error):kn.alert("Something went wrong. Create Schedule failed")}))}},allowDelete:function(){return 0!==this.$store.state.FlexSchedule.selectedFlexDay.id},confirmIfDeleteSche:function(){var e=this;this.$store.state.FlexSchedule.selectedFlexDay.id?kn.confirmOrCancel({message:"Are you sure you want to delete this schedule?"}).then((function(){e.deleteSche(e.$store.state.FlexSchedule.selectedFlexDay.id)})):kn.alert("This record cannot be deleted yet, as it is too far away from today's date.")},deleteSche:function(e){var t=this;kn.loading();var a=jd(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),n=this.getStartAndEndTimeWithDate(a,this.day.startTime,this.day.endTime),c=Object(Ut["a"])(n,2),l=c[0],i=c[1],s={Id:this.$store.state.FlexSchedule.selectedFlexDay.id,EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:a,StartTime:l,EndTime:i,Hours:this.day.hours,PublishStatus:this.$store.state.FlexSchedule.selectedFlexDay.publishStatus?this.$store.state.FlexSchedule.selectedFlexDay.publishStatus:"draft",ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};ce.DeleteFlexSchedule(s).then((function(e){t.$emit("reload"),t.toggleShow()}),(function(e){kn.alert("Something went wrong. Delete Schedule failed")})).finally((function(){}))},getStartAndEndTimeWithDate:function(e,t,a){if(!t&&a){var n=zt()(e),c=zt()(a,"HH:mm"),l=n.clone().hours(c.hour()).minutes(c.minutes());return[null,l]}if(t&&!a){var i=zt()(e),s=zt()(t,"HH:mm"),o=i.clone().hours(s.hour()).minutes(s.minutes());return[o,null]}if(t||a){var r=zt()(e),u=zt()(t,"HH:mm"),d=zt()(a,"HH:mm"),h=r.clone().hours(u.hour()).minutes(u.minutes()),f=r.clone().hours(d.hour()).minutes(d.minutes()),b=f.diff(h,"hours",!0);return b<=0&&f.add(1,"day"),[h.format("YYYY-MM-DDTHH:mm:ss"),f.format("YYYY-MM-DDTHH:mm:ss")]}return[null,null]},openEdit:function(){var e,t,a=this;this.breakMinutes=null,this.breakHours=null,this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(t=this.shiftOptions.find((function(e){return e.shiftType===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId}))),t&&(this.selectedShift=t),this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(this.selectedCostElement1=this.costElementOptions.find((function(e){return e.id===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1})),this.selectedCostElement2=this.costElementOptions.find((function(e){return e.id===a.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2}))),this.employeeDetail={employeeName:this.$store.state.FlexSchedule.selectedFlexDay.employeeName,employeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo},this.dialogDate=Od(this.$store.state.FlexSchedule.calendarFocusDate,this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek),this.day=this.$store.state.FlexSchedule.flexScheduleDay,this.unAvailability=null===(e=this.$store.state.FlexSchedule.selectedFlexDay)||void 0===e?void 0:e.unAvailability,this.checkUnavailability(),this.checkBreakHours(),this.$refs.ModalRef.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("7d4f");const gd=se()(yd,[["render",pd],["__scopeId","data-v-fbcfe204"]]);var vd,Dd,Sd,kd,xd=gd,wd=function(e){return Object(c["A"])("data-v-38c36867"),e=e(),Object(c["y"])(),e},Cd={class:"day-info"},Ad=wd((function(){return Object(c["h"])("span",{class:"white"},"Create",-1)})),Td=[Ad],Ed={key:1},Md={class:"full-width"},Fd={key:0},Nd={key:1},Pd={key:2},Id={key:3},Yd={key:4},Ld=wd((function(){return Object(c["h"])("div",null,"Position:",-1)})),Rd=wd((function(){return Object(c["h"])("span",{class:"white caption"},"Edit",-1)})),Hd=[Rd],Wd={key:2,class:"leave-unit mt-2"},Bd={key:0},Vd={key:1},$d={key:3,class:"leave-unit mt-2"},Ud=wd((function(){return Object(c["h"])("div",null,"Unavailable",-1)}));function Jd(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Cd,[Object(c["h"])("div",{class:Object(c["r"])(["display-day",{"team-color-bg":"Team"===e.scheDay.scheduleType,"flexi-color-bg":"Flex"===e.scheDay.scheduleType,"personal-color-bg":"Personal"===e.scheDay.scheduleType}]),onClick:t[2]||(t[2]=Object(c["U"])((function(){return e.clickDayCell&&e.clickDayCell.apply(e,arguments)}),["prevent"]))},[e.scheDay.startTime||e.scheDay.endTime||e.scheDay.hours||!e.scheDay.allowCreateOrEdit||!e.checkMobileShowCreate()?e.scheDay.startTime||e.scheDay.endTime||e.scheDay.hours?(Object(c["x"])(),Object(c["g"])("div",Ed,[Object(c["h"])("div",Md,[e.scheDay.startTime||e.scheDay.endTime?(Object(c["x"])(),Object(c["g"])("div",Fd,[Object(c["h"])("div",null,Object(c["J"])(e.scheDay.startTime)+" - "+Object(c["J"])(e.scheDay.endTime),1)])):Object(c["f"])("",!0),e.shouldDisplayHours(e.scheDay)?(Object(c["x"])(),Object(c["g"])("div",Nd,[Object(c["h"])("div",null,"Net Hours: "+Object(c["J"])(Math.round(100*e.scheDay.hours)/100),1)])):Object(c["f"])("",!0),e.cellSettings.showBreakLength.value&&e.scheDay.breakLength?(Object(c["x"])(),Object(c["g"])("div",Pd,[Object(c["h"])("div",null,"Break Length: "+Object(c["J"])(Math.round(100*e.scheDay.breakLength)/100),1)])):Object(c["f"])("",!0),e.cellSettings.showShiftId.value&&e.scheDay.shiftId?(Object(c["x"])(),Object(c["g"])("div",Id,[Object(c["h"])("div",null,"Shift ID: "+Object(c["J"])(e.scheDay.shiftId),1)])):Object(c["f"])("",!0),e.cellSettings.showPosition.value&&e.scheDay.positionTitle?(Object(c["x"])(),Object(c["g"])("div",Yd,[Ld,Object(c["h"])("div",null,Object(c["J"])(e.scheDay.positionTitle),1)])):Object(c["f"])("",!0)]),e.scheDay.allowCreateOrEdit&&!e.scheDay.isPaid&&e.checkMobileShowEdit()?(Object(c["x"])(),Object(c["g"])("button",{key:0,class:Object(c["r"])(["detail-button blue small mt-2",{"detail-button-auto-hide":!e.isMobileG()}]),onClick:t[1]||(t[1]=function(t){return e.moreDetail(e.scheDay)})},Hd,2)):Object(c["f"])("",!0)])):Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("div",{key:0,class:Object(c["r"])(["create-day",{"create-day-show":!e.isMobileG()}])},[Object(c["h"])("button",{class:"blue small",onClick:t[0]||(t[0]=function(t){return e.createSche(e.scheDay)})},Td)],2)),e.scheDay.leaveUnit?(Object(c["x"])(),Object(c["g"])("div",Wd,["D"===e.scheDay.leaveUnit.calcUnit?(Object(c["x"])(),Object(c["g"])("span",Bd,"Leave: "+Object(c["J"])(e.scheDay.leaveUnit.daysAppliedFor)+" day",1)):(Object(c["x"])(),Object(c["g"])("span",Vd,"Leave: "+Object(c["J"])(e.scheDay.leaveUnit.hoursAppliedFor)+" hours",1))])):Object(c["f"])("",!0),e.scheDay.unAvailability?(Object(c["x"])(),Object(c["g"])("div",$d,[Ud,Object(c["h"])("span",null,Object(c["J"])(e.scheDay.unAvailability.startTime)+" - "+Object(c["J"])(e.scheDay.unAvailability.endTime),1),Object(c["h"])("div",null,Object(c["J"])(e.scheDay.unAvailability.reason),1)])):Object(c["f"])("",!0)],2)])}(function(e){e["setShifts"]="SET_SHIFTS",e["setPosition"]="SET_POSITION",e["setCostElements"]="SET_COST_ELEMENTS",e["setWorkTypes"]="SET_WORK_TYPES",e["setCostCenters"]="SET_COST_CENTER"})(Sd||(Sd={})),function(e){e["getPositions"]="GET_POSITIONS",e["getShifts"]="GET_SHIFTS",e["getCostElement"]="GET_COST_ELEMENT",e["getWorkTypes"]="GET_WORK_TYPES",e["getCostCenters"]="GET_COST_CENTER"}(kd||(kd={}));var _d=(vd={},Object($t["a"])(vd,Sd.setShifts,(function(e,t){e.shifts=t})),Object($t["a"])(vd,Sd.setPosition,(function(e,t){e.positions=t})),Object($t["a"])(vd,Sd.setCostElements,(function(e,t){e.costElements=t})),Object($t["a"])(vd,Sd.setWorkTypes,(function(e,t){e.workTypes=t})),Object($t["a"])(vd,Sd.setCostCenters,(function(e,t){e.costCenters=t})),vd),Gd=(Dd={},Object($t["a"])(Dd,kd.getPositions,(function(e,t){var a=e.commit;ce.GetPosition(t).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a(Sd.setPosition,t)}))})),Object($t["a"])(Dd,kd.getShifts,(function(e){var t=e.commit;ce.ShiftTypes().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));t(Sd.setShifts,a)}))})),Object($t["a"])(Dd,kd.getCostElement,(function(e){var t=e.commit;ce.GetCostelements().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));t(Sd.setCostElements,a)}))})),Object($t["a"])(Dd,kd.getWorkTypes,(function(e){var t=e.commit;ce.GetWorkTypes().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a.map((function(e){e.isSelected=!1})),t(Sd.setWorkTypes,a)}))})),Object($t["a"])(Dd,kd.getCostCenters,(function(e,t){var a=e.commit;return ce.GetEmployeesCostCentres(t).then((function(e){var t=e.data.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));return a(Sd.setCostCenters,t),t}))})),Dd),Kd={state:{shifts:[],positions:[],costElements:[],workTypes:[],costCenters:[]},mutations:_d,actions:Gd},zd=Kd,Qd=Object(c["l"])({name:"DayCell",props:{scheDay:{type:Object},employeeNo:{type:Number},employeeName:{type:String}},data:function(){return{mobileShowCreate:!1,mobileShowEdit:!1}},setup:function(){var e=Object(Vt["b"])(),t=e.state.FlexSchedule.flexScheduleCellSetting,a=Object(c["c"])((function(){return e.state.LookUp.shifts})),n=Object(c["c"])((function(){return e.state.LookUp.positions}));return{cellSettings:t,shiftOptions:a,positionOptions:n,selectedShift:Object(c["c"])((function(e){return a.value.find((function(t){return t.shiftType===e}))}))}},methods:{moreDetail:function(e){var t=this;this.$store.dispatch(kd.getPositions,this.employeeNo);var a=this.$store.state.FlexSchedule.flexScheduleRemoteData.find((function(a){return a.date===e.date&&a.employeeNo===t.employeeNo}));a?(this.$store.commit(Ht.setScheduleDay,a),this.$emit("openEditDialog",!0)):console.error("can not find selected schedule")},createSche:function(e){this.$store.dispatch(kd.getPositions,this.employeeNo);var t=Gt.a.clone(e);t.employeeNo=this.employeeNo,t.employeeName=this.employeeName,this.$store.commit(Ht.createNewScheduleDay,t),this.$emit("openEditDialog",!1)},shouldDisplayHours:function(e){return!!this.cellSettings.showHours.value&&(!(!e.startTime&&!e.endTime||0!==e.hours)||!!e.hours)},isMobileG:function(){return aa()},clickDayCell:function(){this.mobileShowCreate=!this.mobileShowCreate,this.mobileShowEdit=!this.mobileShowEdit},checkMobileShowEdit:function(){return!aa()||this.mobileShowEdit},checkMobileShowCreate:function(){return!aa()||this.mobileShowCreate}}});a("c921");const qd=se()(Qd,[["render",Jd],["__scopeId","data-v-38c36867"]]);var Xd=qd,Zd=function(e){return Object(c["A"])("data-v-2aa8cc25"),e=e(),Object(c["y"])(),e},eh={class:"cell-config-list"},th={class:"custom-select",tabindex:"1"},ah=Zd((function(){return Object(c["h"])("div",{class:"custom-select-selected"}," Show/Hide Details ",-1)})),nh={class:"custom-select-items"},ch=["onClick"],lh={class:"cell-config"},ih=["onUpdate:modelValue"];function sh(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",eh,[Object(c["h"])("div",null,[Object(c["h"])("div",th,[ah,Object(c["h"])("div",nh,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.cellSettings,(function(a,n){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",key:n,onClick:function(t){e.checkOptions(a)}},[Object(c["h"])("div",lh,[Object(c["h"])("label",null,Object(c["J"])(a.name),1),Object(c["S"])(Object(c["h"])("input",{type:"checkbox","onUpdate:modelValue":function(e){return a.value=e},onChange:t[0]||(t[0]=function(){return e.optionChanged&&e.optionChanged.apply(e,arguments)})},null,40,ih),[[c["M"],a.value]])])],8,ch)})),128))])])])])}var oh=Object(c["l"])({name:"FlexScheduleCellControl",setup:function(){var e=Object(Vt["b"])(),t=Object(c["C"])(!1),a=Object(c["C"])([]),n=e.state.FlexSchedule.flexScheduleCellSetting;return{open:t,cellSettings:n,optionSelected:a}},methods:{optionChanged:function(){localStorage.setItem("flexScheduleCellSetting",JSON.stringify(this.cellSettings))},checkOptions:function(e){}}});a("a2e1");const rh=se()(oh,[["render",sh],["__scopeId","data-v-2aa8cc25"]]);var uh=rh,dh=Object(c["h"])("div",{class:"heading"},null,-1),hh={class:"content"},fh={class:"clock-frame"},bh={ref:"clockRef",width:"200",height:"200",style:{"background-color":"white"}},mh=Object(c["h"])("div",{class:"controls"},null,-1);function ph(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",null,[dh,Object(c["h"])("div",hh,[Object(c["h"])("div",fh,[Object(c["h"])("canvas",bh,null,512)]),mh])])}a("cb29");var Oh=Object(c["l"])({name:"TimePicker",setup:function(){for(var e=Object(c["C"])([]),t=Object(c["C"])([]),a=Object(c["C"])(null),n=0;n<12;n++)e.value.push(n);for(var l=0;l<=55;l+=5)t.value.push(l);return Object(c["v"])((function(){var e=a.value,t=e.getContext("2d"),n=e.height/2;function c(){t.arc(0,0,n,0,2*Math.PI),t.fillStyle="lightGrey",t.fill(),l(t,n),i(t,n),s(t,n)}function l(e,t){e.beginPath(),e.arc(0,0,5,0,2*Math.PI),e.fillStyle="#333",e.fill()}function i(e,t){var a;e.font="18px arial",e.textBaseline="middle",e.textAlign="center";for(var n=1;n<13;n++)a=n*Math.PI/6,e.rotate(a),e.translate(0,.85*-t),e.rotate(-a),e.fillText(n.toString(),0,0),e.rotate(a),e.translate(0,.85*t),e.rotate(-a)}function s(e,t){new Date;var a=5,n=15;a%=12,a=a*Math.PI/6,o(e,a,.5*t,5),n=n*Math.PI/30,o(e,n,.7*t,3)}function o(e,t,a,n){e.beginPath(),e.lineWidth=n,e.lineCap="round",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-a),e.stroke(),e.rotate(-t)}t.translate(n,n),n*=.9,c()})),{clockHours:e,clockMinutes:t,clockRef:a}}});const jh=se()(Oh,[["render",ph]]);var yh=jh,gh=a("c850"),vh=function(e){return Object(c["A"])("data-v-42d9f14e"),e=e(),Object(c["y"])(),e},Dh=vh((function(){return Object(c["h"])("div",null,[Object(c["h"])("h2",null,[Object(c["h"])("b",null,"Create Draft Schedule")])],-1)})),Sh=vh((function(){return Object(c["h"])("div",{class:"line-break my-4"},null,-1)})),kh={class:"d-flex align-center"},xh=Object(c["j"])("Copy from Flexi Schedules"),wh=[xh],Ch={class:"mt-2 draft-option pa-2"},Ah={key:0,class:"grey-wrapper"},Th={class:"input-label"},Eh=Object(c["j"])("From Date"),Mh=[Eh],Fh={class:"mt-2"},Nh={class:"input-label"},Ph=Object(c["j"])("Number of Days"),Ih=[Ph],Yh={key:0,class:"mt-1"},Lh=vh((function(){return Object(c["h"])("span",{class:"red"},"Number of days cannot be greater than 14",-1)})),Rh=[Lh],Hh={class:"mt-2"},Wh={class:"input-label"},Bh=Object(c["j"])("Start On"),Vh=[Bh],$h=vh((function(){return Object(c["h"])("div",{class:"line-break my-4"},null,-1)})),Uh={class:"d-flex"},Jh={class:"container-half"},_h=vh((function(){return Object(c["h"])("div",null," Paste Options ",-1)})),Gh={class:"px-2 mt-4"},Kh={class:"d-flex align-center"},zh=Object(c["j"])("Replace All"),Qh=[zh],qh={class:"d-flex align-center mt-2"},Xh=Object(c["j"])("Merge"),Zh=[Xh],ef={class:"container-half"},tf=vh((function(){return Object(c["h"])("label",null,"Exclude Worker Type",-1)})),af=vh((function(){return Object(c["h"])("div",{class:"line-break my-4"},null,-1)})),nf={class:"d-flex"},cf=Object(c["j"])("Override Team and Personal Schedules"),lf=[cf],sf={class:"d-flex justify-end full-width mt-4"};function of(e,t){var a=Object(c["F"])("multi-select"),n=Object(c["F"])("date-picker"),l=Object(c["F"])("Modal"),i=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["e"])(l,{ref:"ModalRef"},{header:Object(c["R"])((function(){return[Dh]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",null,[Object(c["h"])("form",null,[Sh,Object(c["h"])("div",null,[Object(c["h"])("div",kh,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",null,wh)),[[i,{content:"Copies information from a previous flexi schedule and pastes it into a current or future flexi schedule.",classes:"tool-tip-width"},void 0,{top:!0}]])]),Object(c["h"])("div",Ch,["copy"!==e.sourceMode?(Object(c["x"])(),Object(c["g"])("div",Ah)):Object(c["f"])("",!0),Object(c["h"])("div",null,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",Th,Mh)),[[i,{content:"The date to copy from."},void 0,{top:!0}]]),Object(c["S"])(Object(c["h"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.copyFromDateText=t}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,"copyFromDate")})},null,512),[[c["O"],e.copyFromDateText]])]),Object(c["h"])("div",Fh,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",Nh,Ih)),[[i,{content:"The number of days to copy."},void 0,{top:!0}]]),Object(c["S"])(Object(c["h"])("input",{class:"input-box",type:"number",max:"14","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.copyToDateDuration=t}),onChange:t[3]||(t[3]=function(){return e.validNoDays&&e.validNoDays.apply(e,arguments)})},null,544),[[c["O"],e.copyToDateDuration,void 0,{number:!0}]]),e.showNoDaysError?(Object(c["x"])(),Object(c["g"])("div",Yh,Rh)):Object(c["f"])("",!0)]),Object(c["h"])("div",Hh,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",Wh,Vh)),[[i,{content:"The date in the flexi schedule when copied information will start. </br> For example, if you copy a 5-day block from 1 April and start it on 11 July, it will run from 11- 15 July."},void 0,{top:!0}]]),Object(c["S"])(Object(c["h"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.targetDateText=t}),onClick:t[5]||(t[5]=function(t){return e.updateDateTime(t,"targetDate")})},null,512),[[c["O"],e.targetDateText]])])])])]),$h,Object(c["h"])("div",Uh,[Object(c["h"])("div",Jh,[_h,Object(c["h"])("div",Gh,[Object(c["h"])("div",Kh,[Object(c["S"])(Object(c["h"])("input",{type:"radio",name:"copyOption",value:"replace",class:"mt-0 ml-0","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.copyOption=t})},null,512),[[c["N"],e.copyOption]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",null,Qh)),[[i,{content:"When copied information is pasted in, it will replace all information on the days specified.",classes:"tool-tip-width"},void 0,{top:!0}]])]),Object(c["h"])("div",qh,[Object(c["S"])(Object(c["h"])("input",{type:"radio",name:"copyOption",value:"merge",class:"mt-0 ml-0","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.copyOption=t})},null,512),[[c["N"],e.copyOption]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",null,Zh)),[[i,{content:"When copied information is pasted in, <br/> it will replace information on the days specified only if there is a conflict."},void 0,{top:!0}]])])])]),Object(c["h"])("div",ef,[tf,Object(c["k"])(a,{class:"mt-4",selectOptionInput:e.workTypeOptions,targetString:"description","fixed-left":!0},null,8,["selectOptionInput"])])]),af,Object(c["h"])("div",nf,[Object(c["h"])("div",null,[Object(c["S"])(Object(c["h"])("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.overrideTeam=t})},null,512),[[c["M"],e.overrideTeam]]),Object(c["S"])((Object(c["x"])(),Object(c["g"])("span",null,lf)),[[i,{content:"Selecting this option will copy Flexi Schedules for all non-published employees</br> as well as those employees who are already on a Team or a Personal Schedule."},void 0,{top:!0}]])])]),Object(c["k"])(n,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft,"min-date":e.datePickerMin,"max-date":e.datePickerMax},null,8,["top","left","min-date","max-date"])])]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",sf,[Object(c["h"])("button",{class:"blue xsmall white--text mr-2",onClick:t[9]||(t[9]=function(){return e.actionByMode&&e.actionByMode.apply(e,arguments)})},"Create"),Object(c["h"])("button",{class:"orange xsmall white--text",onClick:t[10]||(t[10]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},"Cancel")])]})),_:1},512)}var rf={class:"custom-select",tabindex:"1",ref:"selectRef"},uf={class:"custom-select-selected"},df=["onClick"],hf={class:"cell-config"},ff=["onUpdate:modelValue"],bf={class:"ml-2 vert-mid"};function mf(e,t){return Object(c["x"])(),Object(c["g"])("div",null,[Object(c["h"])("span",null,[Object(c["h"])("div",rf,[Object(c["h"])("div",uf,[Object(c["h"])("span",null,Object(c["J"])(e.getSelectedOptions()),1)]),Object(c["h"])("div",{class:"custom-select-items",style:Object(c["s"])(e.getLeft())},[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.options,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",key:a,onClick:function(a){return e.selectOptionAction(t)}},[Object(c["h"])("div",hf,[Object(c["S"])(Object(c["h"])("input",{type:"checkbox",class:"ma-0 vert-mid","onUpdate:modelValue":function(e){return t.isSelected=e}},null,8,ff),[[c["M"],t.isSelected]]),Object(c["h"])("label",bf,Object(c["J"])(t[e.targetString]),1)])],8,df)})),128))],4)],512)])])}var pf=Object(c["l"])({name:"CustomSelect",props:{selectOptionInput:{type:Array},targetString:{type:String},allowAll:{type:Boolean},fixedLeft:{type:Boolean}},data:function(){return{options:[],left:0,selected:[]}},mounted:function(){this.left=this.$refs.selectRef.getClientRects()[0].left,this.options=this.selectOptionInput;var e=!1;if(this.options.find((function(e){return e.isSelected}))&&(e=!0),this.allowAll){var t={commonName:"All",isAll:!0,isSelected:!e};this.options.unshift(t)}},methods:{getSelectedOptions:function(){var e=this,t=this.options.filter((function(e){return e.isSelected})),a="";return t.map((function(t,n){a=n>0?a+", "+t[e.targetString]:t[e.targetString]})),a},getLeft:function(){return this.fixedLeft?{left:this.left+"px"}:{position:"absolute"}},selectOptionAction:function(e){e.isAll&&0==e.isSelected?this.options.forEach((function(e,t){t>0&&(e.isSelected=!1)})):!e.isAll&&this.options[0].isAll&&(this.options[0].isSelected=!1),e.isSelected=!e.isSelected}}});a("93be");const Of=se()(pf,[["render",mf],["__scopeId","data-v-45e6dd59"]]);var jf,yf=Of;(function(e){e["copy"]="replace",e["merge"]="merge"})(jf||(jf={}));var gf=Object(c["l"])({name:"DraftCreationDialog",components:{Modal:Ce,DatePicker:Yn,MultiSelect:yf},data:function(){return{datePickerTop:0,datePickerLeft:0,sourceMode:"copy",copyOption:"replace",overrideTeam:!1,scheduleStartDateText:"",copyFromDateText:"",targetDateText:"",scheduleStartDate:zt()(),copyFromDate:zt()(),copyToDateDuration:0,targetDate:zt()(),datePickerMax:null,datePickerMin:null,dateTarget:"",copyPersonalDuration:0,workTypeOptions:[],selected:{},options:[],left:0,showNoDaysError:!1}},mounted:function(){},methods:{selectOption:function(){},resetData:function(){this.datePickerTop=0,this.datePickerLeft=0,this.sourceMode="copy",this.copyOption="replace",this.scheduleStartDateText="",this.copyFromDateText="",this.targetDateText="",this.scheduleStartDate=zt()(),this.copyFromDate=zt()(),this.copyToDateDuration=0,this.targetDate=zt()(),this.dateTarget="",this.copyPersonalDuration=0,this.datePickerMax=null,this.datePickerMin=null,this.showNoDaysError=!1,this.workTypeOptions=this.$store.state.LookUp.workTypes},toggleShow:function(){this.resetData(),this.$refs.ModalRef.toggleShow()},actionByMode:function(){"copy"===this.sourceMode?this.createDraft():this.importFromPersonal()},importFromPersonal:function(){var e=this;kn.loading();var t,a=[],c=Object(n["a"])(this.$store.state.FlexSchedule.scheduleWeek.values());try{var l=function(){var n=t.value;e.$store.state.EmployeeModule.filteredEmployees.find((function(e){return e.employeeNo===n.employeeNo}))&&a.push(n.employeeNo)};for(c.s();!(t=c.n()).done;)l()}catch(s){c.e(s)}finally{c.f()}var i={CopyFromPersonalSchedule:!0,EmployeeNumbers:a,PersonalSchedCopyDurationInDays:this.copyPersonalDuration,TargetDate:this.scheduleStartDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption,ExcludedworkTypes:this.getExcludedWorkTypes()};ce.CopyFlexSchedule(i).then((function(t){e.$refs.ModalRef.toggleShow(),e.$emit("reload")})).finally((function(){}))},validForm:function(){return this.validNoDays()},validNoDays:function(){return this.copyToDateDuration>14?(this.showNoDaysError=!0,!1):(this.showNoDaysError=!1,!0)},createDraft:function(){var e=this;if(this.validForm()){kn.loading();var t=[];if(this.overrideTeam){var a,c=Object(n["a"])(this.$store.state.FlexSchedule.scheduleWeek.values());try{for(c.s();!(a=c.n()).done;){var l=a.value;(l.includeTeamOrPersonal||"published"!==l.empSchePublishState)&&t.push(l.employeeNo)}}catch(u){c.e(u)}finally{c.f()}}else{var i,s=Object(n["a"])(this.$store.state.FlexSchedule.scheduleWeek.values());try{for(s.s();!(i=s.n()).done;){var o=i.value;"published"!==o.empSchePublishState&&t.push(o.employeeNo)}}catch(u){s.e(u)}finally{s.f()}}t=t.filter((function(t){return!!e.$store.state.EmployeeModule.filteredEmployees.find((function(e){return e.employeeNo===t}))}));var r={CopyFromPersonalSchedule:!1,EmployeeNumbers:t,CopyFromDate:this.copyFromDate.format("DD/MMM/YYYY"),CopyToDate:this.copyFromDate.add(this.copyToDateDuration-1,"days").format("DD/MMM/YYYY"),TargetDate:this.targetDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption,ExcludedworkTypes:this.getExcludedWorkTypes(),OverrideTeam:this.overrideTeam};ce.CopyFlexSchedule(r).then((function(t){kn.clear(),e.$refs.ModalRef.toggleShow(),kn.alert("Your schedules are being copied. This process can take a few minutes. You will need to refresh your screen to see the updated schedules.")})).finally((function(){}))}},getExcludedWorkTypes:function(){var e=this.workTypeOptions.filter((function(e){return e.isSelected}));return e.length<1&&(e=this.$store.state.FlexSchedule.defaultWorkTypes),e.map((function(e){return e.code}))},updateDateTime:function(e,t){var a=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c=e.target.getClientRects()[0],a.datePickerTop=c.bottom,a.datePickerLeft=c.left,n.prev=3,n.t0=t,n.next="ScheduleStartDate"===n.t0?7:"copyFromDate"===n.t0?12:"targetDate"===n.t0?19:26;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.scheduleStartDate);case 9:return a.scheduleStartDate=n.sent,a.scheduleStartDateText=a.scheduleStartDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return a.datePickerMax=null,a.datePickerMin=null,n.next=16,a.$refs.DatePickerRef.toggleShow(a.copyFromDate);case 16:return a.copyFromDate=n.sent,a.copyFromDateText=a.copyFromDate.format("DD/MM/YYYY"),n.abrupt("return");case 19:return a.datePickerMax=null,a.datePickerMin=zt()().add(-2,"day"),n.next=23,a.$refs.DatePickerRef.toggleShow(a.targetDate);case 23:return a.targetDate=n.sent,a.targetDateText=a.targetDate.format("DD/MM/YYYY"),n.abrupt("return");case 26:n.next=31;break;case 28:return n.prev=28,n.t1=n["catch"](3),n.abrupt("return");case 31:case"end":return n.stop()}}),n,null,[[3,28]])})))()},cancel:function(){this.toggleShow()}}});a("2eb4");const vf=se()(gf,[["render",of],["__scopeId","data-v-42d9f14e"]]);var Df=vf,Sf=function(e){return Object(c["A"])("data-v-3e8387ea"),e=e(),Object(c["y"])(),e},kf=Sf((function(){return Object(c["h"])("h2",{class:"bold"},"Employee Details",-1)})),xf={class:"mt-4"},wf={class:"mt-4"};function Cf(e,t,a,n,l,i){var s=Object(c["F"])("cf-widget"),o=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(o,{ref:"ModalRef"},{header:Object(c["R"])((function(){return[kf]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",xf,[Object(c["k"])(s,{title:e.title,icon:"",class:"my-pay-widget",data:e.externalDetail,loading:e.loading,error:e.error},null,8,["title","data","loading","error"])])]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",wf,[Object(c["h"])("button",{class:"grey small white--text",onClick:t[0]||(t[0]=function(){return e.toggleShow&&e.toggleShow.apply(e,arguments)})},"Close")])]})),_:1},512)}var Af={class:"cf-widget"};function Tf(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Af,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(i.items,(function(e,t){return Object(c["x"])(),Object(c["e"])(Object(c["H"])(e.Type),{data:e,class:"item",key:t},null,8,["data"])})),128))])}var Ef={class:"field-display"},Mf={class:"label"},Ff=["href"],Nf=["href"],Pf={key:2,class:"value"};function If(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Ef,[Object(c["h"])("div",Mf,Object(c["J"])(a.data.Label),1),i.email?(Object(c["x"])(),Object(c["g"])("a",{key:0,href:i.email,class:"value"},Object(c["J"])(a.data.Value),9,Ff)):Object(c["f"])("",!0),!i.email&&i.tel?(Object(c["x"])(),Object(c["g"])("a",{key:1,href:i.tel,class:"value"},Object(c["J"])(a.data.Value),9,Nf)):Object(c["f"])("",!0),i.email||i.tel?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("div",Pf,Object(c["J"])(a.data.Value),1))])}var Yf={props:["data"],computed:{tel:function(){return"string"==typeof this.data.Key&&(this.data.Key.includes("Phone")||this.data.Key.includes("Mobile"))?"tel:".concat(this.data.Value):null},email:function(){return"string"==typeof this.data.Value&&this.data.Value.includes("@")?"mailto:".concat(this.data.Value):null}}};const Lf=se()(Yf,[["render",If]]);var Rf=Lf,Hf={class:"separator"};function Wf(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Hf)}var Bf={};const Vf=se()(Bf,[["render",Wf]]);var $f=Vf,Uf={class:"youtube-input"},Jf=["src"];function _f(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",Uf,[Object(c["h"])("iframe",{class:"video-frame",src:"//www.youtube.com/embed/"+a.data.Value+"?autoplay=0&controls=1&rel=0&showinfo=0&theme=light&modestbranding=1"},null,8,Jf)])}var Gf={props:["data"]};a("f9e1");const Kf=se()(Gf,[["render",_f]]);var zf=Kf;function Qf(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("p",null,Object(c["J"])(a.data.Label),1)}var qf={props:["data"]};const Xf=se()(qf,[["render",Qf]]);var Zf=Xf,eb={class:"explanation"};function tb(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("p",eb,Object(c["J"])(a.data.Label),1)}var ab={props:["data"]};a("4de6");const nb=se()(ab,[["render",tb]]);var cb=nb,lb={class:"attachment"},ib={class:"label"},sb={class:"value"},ob={href:"#"};function rb(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",lb,[Object(c["h"])("div",ib,Object(c["J"])(a.data.Label),1),Object(c["h"])("div",sb,[Object(c["h"])("a",ob,Object(c["J"])(a.data.Value.Display),1)])])}var ub={props:["data"]};const db=se()(ub,[["render",rb]]);var hb=db,fb={class:"subheading"},bb={class:"label"};function mb(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("div",fb,[Object(c["h"])("div",bb,Object(c["J"])(a.data.Label),1)])}var pb={props:["data"]};a("2c74");const Ob=se()(pb,[["render",mb]]);var jb=Ob,yb=["href"];function gb(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("a",{href:a.data.Value},Object(c["J"])(a.data.Label),9,yb)}var vb={props:["data"]};const Db=se()(vb,[["render",gb]]);var Sb=Db,kb={props:["title","icon","data","loading","error"],components:{FieldDisplay:Rf,Separator:$f,YoutubeInput:zf,Paragraph:Zf,Explanation:cb,AttachFile:hb,Subheading:jb,Link:Sb},computed:{items:function(){if(this.data)return this.data.filter((function(e){return"Separator"===e.Type||"Subheading"===e.Type||"Explanation"===e.Type||"Paragraph"===e.Type||"YoutubeInput"===e.Type||"Link"===e.Type||e.Value}))}}};a("5d16");const xb=se()(kb,[["render",Tf]]);var wb=xb,Cb=Object(c["l"])({name:"TestEmployeeList",components:{Modal:Ce,CfWidget:wb},props:{externalDetail:{type:Array}},data:function(){return{title:"data title",loading:!1,error:null}},mounted:function(){},methods:{toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("71f8");const Ab=se()(Cb,[["render",Cf],["__scopeId","data-v-3e8387ea"]]);var Tb=Ab,Eb=function(e){return Object(c["A"])("data-v-19c59d50"),e=e(),Object(c["y"])(),e},Mb={class:"flex-sche-table print-only",id:"FlexSchedules"},Fb={class:"table-head"},Nb=Eb((function(){return Object(c["h"])("th",{class:"table-cell"},null,-1)})),Pb=Eb((function(){return Object(c["h"])("th",{class:"table-cell"},"Std Hours",-1)})),Ib=Eb((function(){return Object(c["h"])("th",{class:"table-cell"},"Net Hours",-1)})),Yb={class:"table-cell"},Lb={class:"table-body"},Rb={key:0,class:"schedules-arr"},Hb=["onClick"],Wb={class:"content-cell"},Bb={class:"content-cell"},Vb={key:0,class:"leave-unit mt-2"},$b={key:0},Ub={key:1};function Jb(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])("table",Mb,[Object(c["h"])("thead",null,[Object(c["h"])("tr",Fb,[Nb,Pb,Ib,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.weekDays,(function(e){return Object(c["x"])(),Object(c["g"])("th",Yb,Object(c["J"])(e.day),1)})),256))])]),Object(c["h"])("tbody",Lb,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.scheduleWeek.keys(),(function(t){return Object(c["x"])(),Object(c["g"])(c["a"],null,[e.scheduleWeek.get(t)&&e.scheduleWeek.get(t).show?(Object(c["x"])(),Object(c["g"])("tr",Rb,[Object(c["h"])("td",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},Object(c["J"])(e.scheduleWeek.get(t).employeeName),9,Hb),Object(c["h"])("td",Wb,Object(c["J"])(e.scheduleWeek.get(t).stdHoursPerWeek.toFixed(2)),1),Object(c["h"])("td",Bb,Object(c["J"])(e.getTotalHour(e.scheduleWeek.get(t).sche)),1),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.scheduleWeek.get(t).sche,(function(e){return Object(c["x"])(),Object(c["g"])("td",{class:"content-cell",style:Object(c["s"])(e.column)},[Object(c["h"])("div",null,Object(c["J"])(e.startTime)+" - "+Object(c["J"])(e.endTime),1),e.leaveUnit?(Object(c["x"])(),Object(c["g"])("div",Vb,["D"===e.leaveUnit.calcUnit?(Object(c["x"])(),Object(c["g"])("span",$b,"Leave: "+Object(c["J"])(e.leaveUnit.daysAppliedFor)+" day",1)):(Object(c["x"])(),Object(c["g"])("span",Ub,"Leave: "+Object(c["J"])(e.leaveUnit.hoursAppliedFor)+" hours",1))])):Object(c["f"])("",!0)],4)})),256))])):Object(c["f"])("",!0)],64)})),256))])])}var _b=Object(c["l"])({name:"PrintableView",props:{scheduleWeek:{type:Object},weekDays:{type:Array}},methods:{getTotalHour:function(e){var t,a=0,c=Object(n["a"])(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(i){c.e(i)}finally{c.f()}return a.toFixed(2)},printFlexSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("FlexSchedules").outerHTML,n=window.open("","Print",e),c=a("c368").toString();n.document.write("<html>"),n.document.write("<head>"),n.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),n.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),n.document.write('<style type="text/css">'.concat(c,"</style>")),n.document.write("</head>"),n.document.write("<body>"),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),n.print(),n.close()}}});a("ce0a");const Gb=se()(_b,[["render",Jb],["__scopeId","data-v-19c59d50"]]);var Kb=Gb,zb=function(e){return Object(c["A"])("data-v-5b5175ae"),e=e(),Object(c["y"])(),e},Qb=zb((function(){return Object(c["h"])("div",{class:"d-flex justify-center"},[Object(c["h"])("h3",null,"Shift Coverage")],-1)})),qb={class:"mt-4 full-width"},Xb=zb((function(){return Object(c["h"])("label",null,"Choose Date:",-1)})),Zb=["value"],em={key:0,class:"d-flex justify-center mt-4"},tm={key:0,class:"choose-date-info"},am={key:1,class:"choose-date-info"},nm={class:"analysisChart"},cm={class:"axis-canvas",id:"myChartHeader",height:"39",ref:"myChartHeaderRef"},lm={class:"main-canvas-wrapper"},im={class:"main-canvas",ref:"myChartRef",id:"myChart",colours:"[ { fillColor: '#ffff00' }, { fillColor: '#0066ff' } ]"};function sm(e,t){var a=Object(c["F"])("Modal"),n=Object(c["F"])("date-picker");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(a,{ref:"ModalRef",onCancel:e.cancelModal,modalIndex:e.modalIndex},{header:Object(c["R"])((function(){return[Qb]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",qb,[Object(c["h"])("div",null,[Xb,Object(c["h"])("input",{value:e.$filters.reformatDate(e.selectedDate),class:"d-inline-flex ma-0 pa-0 mr-2 ml-2 caption analysis-date-input",style:{"max-width":"120px"},onChange:t[0]||(t[0]=function(t){return e.updateDateText(t,e.selectedDate)}),onClick:t[1]||(t[1]=function(t){return e.updateDateTime(t,e.selectedDate)}),"onClick:clear":t[2]||(t[2]=function(t){return e.toDate=null})},null,40,Zb)]),0===e.chartDatasets.length?(Object(c["x"])(),Object(c["g"])("div",em,[null===e.selectedDate?(Object(c["x"])(),Object(c["g"])("h3",tm,"Choose a day above to view the shift coverage")):0===e.chartDatasets.length?(Object(c["x"])(),Object(c["g"])("h3",am,"There's no one scheduled on this day. Please choose another day.")):Object(c["f"])("",!0)])):Object(c["f"])("",!0),Object(c["S"])(Object(c["h"])("div",nm,[Object(c["h"])("canvas",cm,null,512),Object(c["h"])("div",lm,[Object(c["h"])("div",{class:"myChart-wrapper",style:Object(c["s"])({height:e.canvasHeight+"px"})},[Object(c["h"])("canvas",im,null,512)],4)])],512),[[c["P"],e.chartDatasets.length>0]])])]})),_:1},8,["onCancel","modalIndex"]),Object(c["k"])(n,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.datePickerTargetDay},null,8,["top","leftInput","date"])],64)}var om=a("d549"),rm=(a("1c86"),null),um=Object(c["l"])({name:"AnalysisChart",components:{Modal:Ce,DatePicker:Yn},props:{modalIndex:{type:Number}},data:function(){return{selectedDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:zt()(),chartLabels:[],chartDatasets:[],min:0,max:100,canvasHeight:1,myChartHeader:null}},setup:function(){var e=Object(c["C"])(),t=Object(c["C"])();return{myChartRef:e,myChartHeaderRef:t}},methods:{toggleShow:function(){this.$refs.ModalRef.toggleShow()},updateDateText:function(e,t){this.selectedDate=zt()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t){var a=this,n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=this.selectedDate,this.dateModal=!0,this.openDatePicker().then((function(e){a.prepareChartData()})).catch((function(e){console.log("err",e)}))},openDatePicker:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return a=t.sent,e.selectedDate=a,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getData:function(e){return this.getDateData(e,e)},getDateData:function(e,t){var a=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c={},e&&t&&(c={employeeNo:Affinity.user.EmployeeNo,startDate:e.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD"),forManagedEmployees:!0}),n.abrupt("return",ce.GetFlexSchedules(c).then((function(e){return e.FlexSchedules.filter((function(e){return!!a.$store.state.EmployeeModule.filteredEmployees.find((function(t){return t.employeeNo===e.EmployeeNo}))}))})));case 3:case"end":return n.stop()}}),n)})))()},staticWorkersPerHour:function(e){var t,a=e.map((function(e){return[zt()(e[0]),zt()(e[1])]})),c=Array(24).fill(0),l=Object(n["a"])(a);try{for(l.s();!(t=l.n()).done;)for(var i=t.value,s=i[0],o=i[1],r=s.hour(),u=o.diff(s,"hour"),d=0;d<r+u;d++)d>=r&&(c[d]=c[d]+1)}catch(h){l.e(h)}finally{l.f()}return c},prepareChartData:function(){var e=this,t=zt()(this.selectedDate);kn.loading(),this.getData(t).then((function(a){kn.clear();var c,l=a,i=new Map,s=Object(n["a"])(l);try{for(s.s();!(c=s.n()).done;){var o=c.value;if(o&&o.StartTime&&o.EndTime){var r=o.EmployeeName,u=zt()(o.StartTime),d=zt()(o.EndTime),h=t.clone();h.hour(u.hour()),h.minutes(u.minutes());var f=t.clone();f.hour(d.hours()),f.minutes(d.minutes());var b=[h.toISOString(),f.toISOString()];i.set(r,b)}}}catch(k){s.e(k)}finally{s.f()}var m=Object(xu["a"])(i.keys()),p=Object(xu["a"])(i.values());e.chartDatasets=p;var O=e.staticWorkersPerHour(p),j=zt()(t).startOf("day").valueOf(),y=zt()(t).endOf("day").valueOf();if(e.canvasHeight=30*m.length+100,rm)if(m.length<=0){var g=e.myChartHeaderRef.getContext("2d");g.clearRect(0,0,e.myChartHeaderRef.width,e.myChartHeaderRef.height),console.info("destroy chart"),rm.destroy(),rm=null}else console.info("update chart"),rm.options.scales.x.min=j,rm.options.scales.x.max=y,rm.options.scales.x1.ticks={callback:function(e,t,a){return O[t]}},rm.data.labels=m,rm.data.datasets[0].data=p,m.length<=0&&(rm.data.labels=[],rm.data.datasets=[],rm.options.scales.x.min=0,rm.options.scales.x.max=1),rm.update();else if(m.length<=0);else{console.info("create new chart");var v=document.getElementById("myChart").getContext("2d"),D=e,S={type:"bar",data:{labels:m,datasets:[{label:"Work Hours",data:p,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:2,borderSkipped:!1}]},grouped:!1,options:{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:window.devicePixelRatio,indexAxis:"y",scales:{y:{stacked:!1},x:{id:"xAxis2",backgroundColor:"#ffffff",position:"top",type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},title:{display:!0,text:"Time"},min:j,max:y,ticks:{stepSize:5e5}},x1:{id:"xAxis1",type:"time",position:"bottom",gridLines:{drawOnChartArea:!1},time:{unit:"hour",displayFormats:{hour:"HH:mm:ss"}},min:j,max:y,title:{display:!0,text:"Working Employees / Hour"},ticks:{callback:function(e,t,a){return O[t]}}}},plugins:{title:{display:!1},legend:{display:!1},tooltip:{usePointStyle:!0,callbacks:{label:function(e){var t=e.raw;return" ".concat(zt()(t[0]).format("HH:mm")," - ").concat(zt()(t[1]).format("HH:mm"))},labelPointStyle:function(e){return{pointStyle:"triangle",rotation:0}}}}},animation:{onComplete:function(e){var t=this.ctx.canvas,a=this.canvas.width,n=this.scales.x.height,c=window.devicePixelRatio,l=D.myChartHeaderRef.getContext("2d"),i=document.getElementById("myChartHeader");i.style.width=this.canvas.width/c+"px",i.style.height=n/c+"px",i.width=Math.floor(this.canvas.width),i.height=Math.floor(n),l.scale(c,c),l.drawImage(t,0,0,a,n,0,0,a/c,n/c)}}}};rm=new om["a"](v,S)}})).catch((function(){kn.clear(),kn.alert("Something Wrong. Please try again later")}))},cancelModal:function(){rm&&(rm.destroy(),rm=null,this.selectedDate=null,this.canvasHeight=1,this.chartDatasets=[])}},beforeUnmount:function(){rm&&(rm.destroy(),rm=null,this.selectedDate=null,this.canvasHeight=1,this.chartDatasets=[])}});a("2f3d");const dm=se()(um,[["render",sm],["__scopeId","data-v-5b5175ae"]]);var hm=dm;function fm(e){return{id:e.id,startTime:e.startTime,endTime:e.endTime,hours:e.hours,date:e.date,isPaid:e.isPaid,scheduleType:e.scheduleType,dayInWeek:e.dayInWeek,publishStatus:e.publishStatus,breakLength:e.scheduleDetail.breakLength,position:e.scheduleDetail.position,positionTitle:e.scheduleDetail.positionTitle,shiftId:e.scheduleDetail.shiftId}}function bm(e,t,a,c){var l,i=a.flexSchedules,s=new Map,o=Object(n["a"])(t);try{for(o.s();!(l=o.n()).done;){var r=l.value,u=Object(Jt["a"])({},r);u.show=!0,s.set(r.employeeNo,u)}}catch(p){o.e(p)}finally{o.f()}var d,h=Object(n["a"])(i);try{for(h.s();!(d=h.n()).done;){var f=d.value,b=s.get(f.EmployeeNo);if(b&&!b.sche)b.sche=[fm(f)];else if(b){var m=fm(f);b.sche.push(m)}}}catch(p){h.e(p)}finally{h.f()}return s}function mm(e,t,a,c){var l,i=a.flexSchedules,s=new Map,o=Object(n["a"])(t);try{for(o.s();!(l=o.n()).done;){var r=l.value,u=Object(Jt["a"])({},r);u.show=!0,s.set(r.employeeNo,u)}}catch(j){o.e(j)}finally{o.f()}var d,h=Object(n["a"])(i);try{for(h.s();!(d=h.n()).done;){var f=d.value,b=s.get(f.EmployeeNo);b&&(b.sche=fm(f))}}catch(j){h.e(j)}finally{h.f()}var m,p=Object(n["a"])(s.values());try{for(p.s();!(m=p.n()).done;){var O=m.value;O.sche||(O.sche={},O.sche.dayInWeek=0,O.sche.employeeName=O.employeeName,O.sche.employeeNo=O.employeeNo),O.sche.allowCreateOrEdit=!0,O.sche.editing=!1}}catch(j){p.e(j)}finally{p.f()}return s}function pm(e,t,a){var c,l=Object(n["a"])(t);try{for(l.s();!(c=l.n()).done;){var i,s=c.value,o=Object(n["a"])(s.leaveUnits);try{for(o.s();!(i=o.n()).done;){var r,u=i.value,d=zt()(u.leaveDate).diff(e,"days");d<0||(u.calcUnit=s.calcUnit,u.leaveCode=s.leaveCode,u.leaveName=s.leaveName,null!==(r=a.get(s.employeeNo))&&void 0!==r&&r.sche[d]&&(a.get(s.employeeNo).sche[d].leaveUnit=u))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){l.e(h)}finally{l.f()}}function Om(e,t){var a,c=Object(n["a"])(e);try{for(c.s();!(a=c.n()).done;){var l,i=a.value,s=Object(n["a"])(i.leaveUnits);try{for(s.s();!(l=s.n()).done;){var o,r=l.value;r.calcUnit=i.calcUnit,r.leaveCode=i.leaveCode,r.leaveName=i.leaveName,null!==(o=t.get(i.employeeNo))&&void 0!==o&&o.sche&&(t.get(i.employeeNo).sche.leaveUnit=r)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){c.e(u)}finally{c.f()}}function jm(e,t){var a,c=Object(n["a"])(e.unAvailabilities);try{for(c.s();!(a=c.n()).done;){var l=a.value,i=zt()(l.unavailabilityDate).day();t.get(l.employeeNo)&&t.get(l.employeeNo).sche&&t.get(l.employeeNo).sche[i]&&(t.get(l.employeeNo).sche[i].unAvailability=l)}}catch(s){c.e(s)}finally{c.f()}}function ym(e,t){var a,c=Object(n["a"])(e.unAvailabilities);try{for(c.s();!(a=c.n()).done;){var l=a.value;t.get(l.employeeNo)&&t.get(l.employeeNo).sche&&(t.get(l.employeeNo).sche.unAvailability=l)}}catch(i){c.e(i)}finally{c.f()}}function gm(e,t){zt()();var a,c=Object(n["a"])(t.values());try{for(c.s();!(a=c.n()).done;){for(var l=a.value,i=l.EmployeeName,s=l.EmployeeNo,o=function(e){var t=void 0;l.sche?t=l.sche.find((function(t){return t.dayInWeek===e})):l.sche=[],t||(0!==e||l.sche[0]&&null!==l.sche[0].dayInWeek&&void 0!==l.sche[0].dayInWeek?l.sche.push({dayInWeek:e,employeeName:i,employeeNo:s}):(l.sche[0]={},l.sche[0].dayInWeek=0,l.sche[0].employeeName=i,l.sche[0].employeeNo=s))},r=0;r<=6;r++)o(r);l.sche.sort((function(e,t){return e.dayInWeek-t.dayInWeek}));var u,d=Object(n["a"])(l.sche.entries());try{for(d.s();!(u=d.n()).done;){var h=Object(Ut["a"])(u.value,2),f=(h[0],h[1]);f.column="grid-column-start: ".concat(f.dayInWeek+4),f.allowCreateOrEdit=!0,f.editing=!1}}catch(b){d.e(b)}finally{d.f()}}}catch(b){c.e(b)}finally{c.f()}}var vm={prepareGridData:bm,prepareGridDataMobile:mm,scheDaysToColumn:gm,addLeaveToGrid:pm,addUnAvaToGrid:jm,addUnAvaToGridMobile:ym,addLeaveToGridMobile:Om},Dm=function(e){return Object(c["A"])("data-v-0fee4348"),e=e(),Object(c["y"])(),e},Sm=Dm((function(){return Object(c["h"])("div",null,[Object(c["h"])("h2",null,[Object(c["h"])("b",null,"Publish Flexi Schedule")])],-1)})),km={class:"full-width mt-4"},xm={key:0},wm=Dm((function(){return Object(c["h"])("br",null,null,-1)})),Cm=Object(c["j"])(" This will publish the schedule for all employees."),Am={key:1},Tm={key:0},Em=Dm((function(){return Object(c["h"])("span",null,"Publish by individual employee(s)",-1)})),Mm=[Em],Fm={key:1},Nm={class:"container-half mt-4"},Pm=Dm((function(){return Object(c["h"])("label",null,"Select Employees",-1)})),Im=Dm((function(){return Object(c["h"])("div",{class:"line-break mt-4"},null,-1)})),Ym={class:"d-flex justify-end full-width mt-4"};function Lm(e,t){var a=Object(c["F"])("multi-select"),n=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(n,{ref:"ModalRef","no-overflow-auto-body":!0},{header:Object(c["R"])((function(){return[Sm]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",km,[Object(c["h"])("div",null,[!1===e.showPublishByEmployee?(Object(c["x"])(),Object(c["g"])("span",xm,[Object(c["j"])("Are you sure you want to publish the schedule for week "+Object(c["J"])(e.selectedDate)+"? ",1),wm,Cm])):Object(c["f"])("",!0),!0===e.showPublishByEmployee?(Object(c["x"])(),Object(c["g"])("span",Am,"Are you sure you want to publish the schedule for week "+Object(c["J"])(e.selectedDate)+"?",1)):Object(c["f"])("",!0)]),!1===e.showPublishByEmployee?(Object(c["x"])(),Object(c["g"])("div",Tm,[Object(c["h"])("button",{class:"text-button mt-4",onClick:t[0]||(t[0]=function(t){return e.showPublishByEmployee=!0})},Mm)])):Object(c["f"])("",!0),!0===e.showPublishByEmployee?(Object(c["x"])(),Object(c["g"])("div",Fm,[Object(c["h"])("div",Nm,[Pm,Object(c["k"])(a,{class:"mt-2",targetString:"commonName",allowAll:!0,selectOptionInput:e.selectOptions},null,8,["selectOptionInput"])])])):Object(c["f"])("",!0),Im])]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",Ym,[Object(c["h"])("button",{class:"blue xsmall white--text mr-2",onClick:t[1]||(t[1]=function(){return e.publish&&e.publish.apply(e,arguments)})},"Publish"),Object(c["h"])("button",{class:"orange xsmall white--text",onClick:t[2]||(t[2]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},"Cancel")])]})),_:1},512)}var Rm=Object(c["l"])({name:"PublishDialog",components:{Modal:Ce,MultiSelect:yf},data:function(){return{selectOptions:[],selectedDate:"",showPublishByEmployee:!1}},mounted:function(){this.showPublishByEmployee=!1,this.selectOptions=this.$store.getters[Dl.getFilteredEmployees].slice()},methods:{selectOption:function(){},resetData:function(){this.showPublishByEmployee=!1},publish:function(){if(!this.showPublishByEmployee){var e=this.selectOptions.map((function(e){return e.employeeNo}));return this.$emit("publish",e),void this.$refs.ModalRef.toggleShow()}if(this.selectOptions[0].isAll&&this.selectOptions[0].isSelected)this.publishAllEmployee();else{var t=this.selectOptions.filter((function(e){return e.isSelected})).map((function(e){return e.employeeNo}));this.$emit("publish",t),this.$refs.ModalRef.toggleShow()}},publishAllEmployee:function(){var e=this.selectOptions.slice();e.shift();var t=e.map((function(e){return e.employeeNo}));this.$emit("publish",t),this.$refs.ModalRef.toggleShow()},cancel:function(){this.toggleShow()},setSelectedDate:function(e){this.selectedDate=e},toggleShow:function(){this.resetData(),this.selectOptions=this.$store.getters[Dl.getFilteredEmployees].slice(),this.$refs.ModalRef.toggleShow()}}});a("8efc");const Hm=se()(Rm,[["render",Lm],["__scopeId","data-v-0fee4348"]]);var Wm=Hm,Bm=function(e){return Object(c["A"])("data-v-4a322bba"),e=e(),Object(c["y"])(),e},Vm=Bm((function(){return Object(c["h"])("div",{class:"d-flex justify-center"},[Object(c["h"])("h2",null,[Object(c["h"])("b",null,"Cost Analysis")])],-1)})),$m={class:"d-flex justify-center mt-2"},Um={key:0,class:"mt-4"},Jm=Bm((function(){return Object(c["h"])("h3",null,"No Cost Analysis Data",-1)})),_m=[Jm],Gm={key:1,class:"mt-4 full-width costAnalaysisBody"},Km={class:"display-option"},zm={class:"cost-grid mt-4"},Qm=Bm((function(){return Object(c["h"])("div",{class:"table-cell"},null,-1)})),qm={class:"table-cell"},Xm={key:0,class:"table-cell"},Zm={key:0},ep={key:1},tp=Bm((function(){return Object(c["h"])("div",{class:"table-cell bold"}," Total ",-1)})),ap={key:0},np={key:1},cp={class:"mt-4"};function lp(e,t){var a=Object(c["F"])("multi-select"),n=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(n,{ref:"ModalRef",onCancel:e.cancelModal,modalIndex:e.modalIndex},{header:Object(c["R"])((function(){return[Vm,Object(c["h"])("div",$m,[Object(c["h"])("h3",null,Object(c["J"])(e.weekStart)+" - "+Object(c["J"])(e.weekEnd),1)])]})),body:Object(c["R"])((function(){return[e.data[0]?(Object(c["x"])(),Object(c["g"])("div",Gm,[Object(c["h"])("div",Km,[Object(c["k"])(a,{class:"mt-4",selectOptionInput:e.displayOptions,targetString:"description","fixed-left":!1},null,8,["selectOptionInput"])]),Object(c["h"])("div",zm,[Object(c["h"])("div",{class:"day-arr cost-grid-heading",style:Object(c["s"])(e.getGridTemplateStyle())},[Qm,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.displayList,(function(e){return Object(c["x"])(),Object(c["g"])("div",qm,Object(c["J"])(e.heading),1)})),256))],4),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.data,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:"day-arr",style:Object(c["s"])(e.getGridTemplateStyle())},[t.day?(Object(c["x"])(),Object(c["g"])("div",Xm,Object(c["J"])(t.day),1)):Object(c["f"])("",!0),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(Object.entries(e.displayList),(function(n){var l=Object(Ut["a"])(n,2),i=l[0],s=l[1];return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])(["table-cell",e.getDataStyle(e.calculatedData[a],i,s)])},[s.isCalculated?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("span",Zm,"$")),Object(c["h"])("span",null,Object(c["J"])(t[i]),1),s.isCalculated?(Object(c["x"])(),Object(c["g"])("span",ep,"%")):Object(c["f"])("",!0)],2)})),256))],4)})),256)),Object(c["h"])("div",{class:"day-arr",style:Object(c["s"])(e.getGridTemplateStyle())},[tp,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(Object.entries(e.displayList),(function(t){var a=Object(Ut["a"])(t,2),n=a[0],l=a[1];return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])(["table-cell bold",e.getDataStyle(e.totalInNumber,n,l)])},[l.isCalculated?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("span",ap,"$")),Object(c["h"])("span",null,Object(c["J"])(e.total[n]),1),l.isCalculated?(Object(c["x"])(),Object(c["g"])("span",np,"%")):Object(c["f"])("",!0)],2)})),256))],4)])])):(Object(c["x"])(),Object(c["g"])("div",Um,_m))]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",cp,[Object(c["h"])("button",{class:"orange small white--text",onClick:t[0]||(t[0]=function(){return e.toggleShow&&e.toggleShow.apply(e,arguments)})},"Close")])]})),_:1},8,["onCancel","modalIndex"])}a("9129");var ip=a("72f9"),sp=a.n(ip),op=Object(c["l"])({name:"CostAnalysisDialog",components:{Modal:Ce,MultiSelect:yf},props:{dayFocus:{type:Object},modalIndex:{type:Number}},data:function(){return{selectedDate:null,data:[],calculatedData:[],total:{},totalInNumber:{},displayN:6,displayList:{},sourceDisplayList:{scheduled:{heading:"Scheduled",isDisplay:!0,isCalculated:!1},actual:{heading:"Actuals",isDisplay:!1,isCalculated:!1},budgeted:{heading:"Budgeted",isDisplay:!1,isCalculated:!1},sales:{heading:"Sales",isDisplay:!1,isCalculated:!1},scheduledVSBudgeted:{heading:"Scheduled vs Budgeted",isDisplay:!1,isCalculated:!0},actualsVSBudgeted:{heading:"Actuals vs Budgeted",isDisplay:!1,isCalculated:!0},actualsVSScheduled:{heading:"Actuals vs Scheduled",isDisplay:!1,isCalculated:!0},scheduledVSSales:{heading:"Scheduled vs Sales",isDisplay:!1,isCalculated:!0},actualsVSSales:{heading:"Actuals vs Sales",isDisplay:!1,isCalculated:!0}},weekStart:"",weekEnd:"",displayOptions:[{key:"scheduled",description:"Scheduled",isSelected:!0},{key:"actual",description:"Actuals",isSelected:!1},{key:"budgeted",description:"Budgeted",isSelected:!0},{key:"sales",description:"Sales",isSelected:!0},{key:"scheduledVSBudgeted",description:"Scheduled vs Budgeted",isSelected:!1},{key:"actualsVSBudgeted",description:"Actuals vs Budgeted",isSelected:!1},{key:"actualsVSScheduled",description:"Actuals vs Scheduled",isSelected:!1},{key:"scheduledVSSales",description:"Scheduled vs Sales",isSelected:!1},{key:"actualsVSSales",description:"Actuals vs Sales",isSelected:!1}]}},setup:function(){},computed:{comparedValue:function(){for(var e=[],t=0,a=Object.entries(this.displayList);t<a.length;t++){var n=Object(Ut["a"])(a[t],2),c=(n[0],n[1]);c.isDisplay&&e.push(c)}return e}},mounted:function(){var e=JSON.parse(localStorage.getItem("costAnalysisSetting_v1.2"));e&&(this.displayOptions=e)},watch:{displayOptions:{handler:function(e,t){var a=this;this.displayList={};for(var n=function(){var t=Object(Ut["a"])(l[c],2),n=t[0],i=t[1],s=e.find((function(e){return e.key===n}));s&&s.isSelected?(a.displayList[n]=i,a.displayList[n].isDisplay=s.isSelected):console.error("key not found",n)},c=0,l=Object.entries(this.sourceDisplayList);c<l.length;c++)n();localStorage.setItem("costAnalysisSetting_v1.2",JSON.stringify(e))},deep:!0}},methods:{getDataStyle:function(e,t,a){if(a.isCalculated)return"scheduledVSBudgeted"===t||"actualsVSBudgeted"===t?e[t]>0?"positive-cell":"negative-cell":void 0},getGridTemplateStyle:function(){return this.calculateDisplayRow(),this.displayN>1?"grid-template-columns: 100px repeat( ".concat(this.displayN," , 100px)"):"grid-template-columns: 100px repeat( ".concat(this.displayN," , auto)")},open:function(){var e=this;Object.keys(this.displayList).forEach((function(t){e.displayList[t].isDisplay=!1}));var t=this.dayFocus.clone().startOf("week").format("DD/MMM/YYYY");this.weekStart=t;var a=this.dayFocus.clone().endOf("week").format("DD/MMM/YYYY");this.weekEnd=a;var n=this.$store.getters[Dl.getFilteredEmployees].map((function(e){return e.employeeNo})),c={employeeNumbers:n,dateFrom:t,dateTo:a};kn.loading();for(var l=function(){var t=Object(Ut["a"])(s[i],2),a=t[0],n=t[1],c=e.displayOptions.find((function(e){return e.key===a}));c&&!0===c.isSelected?(e.displayList[a]=n,e.displayList[a].isDisplay=c.isSelected):console.error("key not found",a)},i=0,s=Object.entries(this.sourceDisplayList);i<s.length;i++)l();ce.GetCostAnalysis(c).then((function(t){if(!t[0])return e.data=[],e.total=[],e.$refs.ModalRef.toggleShow(),void kn.clear();var a=t.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));e.calculatedData=[],e.data=a.map((function(t){var a=Object(Jt["a"])({},t),n={};a.weekDay=zt()(t.date).format("dddd"),e.sourceDisplayList.scheduledVSBudgeted&&(a.scheduledVSBudgeted=e.calculateRatioPercentage(t.scheduled,t.budgeted)),e.sourceDisplayList.actualsVSBudgeted&&(a.actualsVSBudgeted=e.calculateRatioPercentage(t.actual,t.budgeted)),e.sourceDisplayList.actualsVSScheduled&&(a.actualsVSScheduled=e.calculateDiffPercentage(t.actual,t.scheduled)),e.sourceDisplayList.actualsVSSales&&(a.actualsVSSales=e.calculateRatioPercentage(t.actual,t.sales)),e.sourceDisplayList.scheduledVSSales&&(a.scheduledVSSales=e.calculateRatioPercentage(t.scheduled,t.sales));for(var c=0,l=Object.entries(a);c<l.length;c++){var i=Object(Ut["a"])(l[c],2),s=i[0],o=i[1];Number.isNaN(o)&&(a[s]=0),n[s]="day"===s||"dayNumber"===s?o:sp()(a[s]).format({symbol:""})}return e.calculatedData.push(a),n})),e.calculateTotal(),kn.clear(),e.$refs.ModalRef.toggleShow()})).catch((function(t){e.data=[],e.total=[]}))},calculateTotal:function(){var e=[];this.totalInNumber={};for(var t=0,a=Object.entries(this.sourceDisplayList);t<a.length;t++){var c=Object(Ut["a"])(a[t],2),l=c[0];c[1];e.push(l)}if(1!==e.length){for(var i=0,s=e;i<s.length;i++){var o=s[i];this.totalInNumber[o]=0;var r,u=Object(n["a"])(this.calculatedData);try{for(u.s();!(r=u.n()).done;){var d=r.value;d[o]||(d[o]=0),this.totalInNumber[o]=this.totalInNumber[o]+d[o]}}catch(O){u.e(O)}finally{u.f()}}this.sourceDisplayList.scheduledVSBudgeted&&(this.totalInNumber.scheduledVSBudgeted=this.calculateRatioPercentage(this.totalInNumber.scheduled,this.totalInNumber.budgeted)),this.sourceDisplayList.actualsVSBudgeted&&(this.totalInNumber.actualsVSBudgeted=this.calculateRatioPercentage(this.totalInNumber.actual,this.totalInNumber.budgeted)),this.sourceDisplayList.actualsVSScheduled&&(this.totalInNumber.actualsVSScheduled=this.calculateDiffPercentage(this.totalInNumber.actual,this.totalInNumber.scheduled)),this.sourceDisplayList.actualsVSSales&&(this.totalInNumber.actualsVSSales=this.calculateRatioPercentage(this.totalInNumber.actual,this.totalInNumber.sales)),this.sourceDisplayList.scheduledVSSales&&(this.totalInNumber.scheduledVSSales=this.calculateRatioPercentage(this.totalInNumber.scheduled,this.totalInNumber.sales));for(var h=0,f=Object.entries(this.totalInNumber);h<f.length;h++){var b=Object(Ut["a"])(f[h],2),m=b[0],p=b[1];Number.isNaN(p)&&(this.totalInNumber[m]=0),this.total[m]=sp()(this.totalInNumber[m]).format({symbol:""})}}else this.totalInNumber[e[0]]=Math.round(100*this.calculatedData[0][e[0]])/100},calculateDiffPercentage:function(e,t){return t?(e-t)/t*100:0},calculateRatioPercentage:function(e,t){return t?e/t*100:0},calculateDisplayRow:function(){this.displayN=this.displayOptions.filter((function(e){return e.isSelected})).length},toggleShow:function(){this.data=[],this.total=[],this.calculatedData=[],this.$refs.ModalRef.toggleShow()},cancelModal:function(){this.data=[],this.total=[],this.calculatedData=[]}}});a("109b");const rp=se()(op,[["render",lp],["__scopeId","data-v-4a322bba"]]);var up=rp,dp=(a("a4d3"),a("e01a"),function(e){return Object(c["A"])("data-v-eb233cc0"),e=e(),Object(c["y"])(),e}),hp={class:"cell-config-list"},fp={class:"custom-select",tabindex:"1"},bp=dp((function(){return Object(c["h"])("div",{class:"custom-select-selected"}," Select Cost Center ",-1)})),mp={class:"custom-select-items"},pp=["onClick"],Op={class:"cell-config"},jp=["onUpdate:modelValue"];function yp(e,t,a,n,l,i){var s=Object(c["G"])("tooltip");return Object(c["x"])(),Object(c["g"])("div",hp,[Object(c["h"])("div",null,[Object(c["h"])("div",fp,[bp,Object(c["h"])("div",mp,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.costCenterOptions,(function(t,a){return Object(c["x"])(),Object(c["g"])("div",{class:"custom-select-item",key:a,onClick:function(a){e.checkOptions(t)}},[Object(c["h"])("div",Op,[Object(c["S"])((Object(c["x"])(),Object(c["g"])("label",null,[Object(c["j"])(Object(c["J"])(t.description),1)])),[[s,{content:t.description},void 0,{top:!0}]]),Object(c["S"])(Object(c["h"])("input",{type:"checkbox","onUpdate:modelValue":function(e){return t.selected=e}},null,8,jp),[[c["M"],t.selected]])])],8,pp)})),128))])])])])}var gp=Object(c["l"])({name:"FlexScheduleCostCenter",props:{costCenterOptions:{type:Array}},setup:function(){var e=Object(Vt["b"])(),t=Object(c["C"])(!1),a=Object(c["C"])([]),n=e.state.LookUp.costCenters;return{open:t,costCenters:n,optionSelected:a}},methods:{checkOptions:function(e){if(e.selected=!e.selected,-1===e.costCentreId&&this.costCenterOptions){var t,a=Object(n["a"])(this.costCenterOptions);try{for(a.s();!(t=a.n()).done;){var c=t.value;c.selected=!1}}catch(l){a.e(l)}finally{a.f()}this.costCenterOptions[0].selected=!0}else this.costCenterOptions[0].selected=!1;this.$emit("selectOption",this.costCenterOptions)}}});a("768e");const vp=se()(gp,[["render",yp],["__scopeId","data-v-eb233cc0"]]);var Dp,Sp=vp;(function(e){e["empty"]="",e["draft"]="draft",e["published"]="published",e["partial"]="partial"})(Dp||(Dp={}));var kp=Object(c["l"])({name:"FlexSchedule",components:{FlexScheduleCostCenter:Sp,CostAnalysisDialog:up,AnalysisChart:hm,PrintableView:Kb,DraftCreationDialog:Df,DatePicker:Yn,TimePicker:yh,EditFlexSchedule:xd,DayCell:Xd,FlexScheduleCellControl:uh,Icon:gh["a"],AutoComplete:Rl,ExtraEmpDetail:Tb,PublishDialog:Wm,CustomSelect:ci},data:function(){return{dayFocus:zt()(),weekDays:[],datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map,weekStatus:Dp.empty,showControl:!1,extraEmpDetail:[],isAdmin:!1,hasFuturePaidDate:!1,costCenterOptions:[]}},setup:function(){var e=Object(sa["c"])();window.innerWidth<1200&&e.push({name:"FlexScheduleMobile"});var t=Object(c["C"])(),a=Object(c["C"])(),n=Object(c["C"])(),l=Object(c["C"])(),i=Object(c["C"])(),s=Object(c["C"])(),o=Object(c["C"])(),r=Object(c["C"])(!1),u=Object(c["C"])([]);function d(){o.value.open()}function h(){t.value.toggleShow()}function f(){i.value.toggleShow()}function b(){s.value.toggleShow()}function m(e){r.value=e,a.value.openEdit()}function p(e){kn.loading(),ce.GetEmployeeExtraDetail(e).then((function(e){u.value=e.map((function(e){return"DateTime"===e.InputType?(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=zt()(e.KeyValue).format("ddd DD MMM YYYY"),e.Value=zt()(e.Value).format("ddd DD MMM YYYY")):"Double"===e.InputType&&(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=Math.round(100*e.KeyValue)/100,e.Value=Math.round(100*e.Value)/100),e})),kn.clear(),n.value.toggleShow()}),(function(e){kn.clear(),kn.alert("Something went wrong")}))}function O(){l.value.printFlexSchedule()}return{openDraftDialog:h,openEditDialog:m,openEmployeeDetail:p,openAnalysisChart:f,printFlexSchedule:O,openPublishDialog:b,openCostAnalysis:d,DraftCreationDialogRef:t,EditModalRef:a,ExtraEmpDetailRef:n,PrintableViewRef:l,AnalysisChartRef:i,PublishDialogRef:s,CostAnalysisDialogRef:o,isEditingDialog:r,externalDetail:u}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(kd.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(kd.getShifts),e.$store.dispatch(kd.getCostElement),e.$store.dispatch(kd.getWorkTypes),a=e.dayFocus.clone().startOf("week"),n=e.dayFocus.clone().endOf("week"),e.loadDate(a,n,!0),ce.GetDefaultWorkTypes().then((function(t){e.$store.state.FlexSchedule.defaultWorkTypes=t})),Affinity.user.EmployeeNo>=5e6&&(e.isAdmin=!0);case 9:case"end":return t.stop()}}),t)})))()},methods:{showCopy:function(){return!this.hasFuturePaidDate&&zt()().diff(this.dayFocus.endOf("week"),"day")<=0},reloadAfterEdit:function(){var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t,!1)},getCurrentWeekStatus:function(){return this.weekStatus===Dp.empty||this.weekStatus===Dp.draft?"Draft":this.weekStatus===Dp.partial?"Partially Published":this.weekStatus===Dp.published?"Published":this.weekStatus},loadDate:function(e,t){var a=arguments,c=this;return Object(j["a"])(regeneratorRuntime.mark((function l(){var i,s,o,r,u,d,h,f,b,m,p,O,j,y,g,v;return regeneratorRuntime.wrap((function(l){while(1)switch(l.prev=l.next){case 0:return i=a.length>2&&void 0!==a[2]&&a[2],c.weekStatus=Dp.empty,c.showControl=!1,c.hasFuturePaidDate=!1,s={managerEmployeeNo:Affinity.user.EmployeeNo,dateFrom:e.format("YYYY-MM-DD"),dateTo:t.format("YYYY-MM-DD")},kn.loading(),l.next=8,Promise.all([c.$store.dispatch(Rt.loadFlexiSchedules,{startDate:e,endDate:t}),ce.GetManagedLeaves(s),c.$store.dispatch(kl.getEmployees,Affinity.user.EmployeeNo).then((function(e){return e.map((function(e){return{employeeName:e.commonName,employeeNo:e.employeeNo,stdHoursPerWeek:e.stdHoursPerWeek,positionCode:e.positionCode,cost1:e.cost1}}))}))]).finally((function(){kn.clear()}));case 8:if(o=l.sent,r=Object(Ut["a"])(o,3),u=r[0],d=r[1],h=r[2],kn.clear(),f=vm.prepareGridData(e,h,u,d),vm.scheDaysToColumn(e,f),vm.addLeaveToGrid(e,d,f),vm.addUnAvaToGrid(u,f),c.$store.state.FlexSchedule.calendarFocusDate=c.dayFocus,c.weekDays=c.getSelectedWeek(e),c.scheduleWeekMap=c.$store.state.FlexSchedule.scheduleWeek=f,c.checkStatus(c.scheduleWeekMap),i)c.setupCostCenterList(h);else{b=Object(n["a"])(c.scheduleWeekMap.entries());try{for(b.s();!(m=b.n()).done;)p=Object(Ut["a"])(m.value,2),p[0],O=p[1],O.show=!1}catch(D){b.e(D)}finally{b.f()}j=Object(n["a"])(c.$store.state.EmployeeModule.filteredEmployees);try{for(j.s();!(y=j.n()).done;)g=y.value,v=c.scheduleWeekMap.get(g.employeeNo),v.show=!0}catch(D){j.e(D)}finally{j.f()}}case 23:case"end":return l.stop()}}),l)})))()},setupCostCenterList:function(e){var t=this,a=e.map((function(e){return e.cost1})),n=Object(xu["a"])(new Set(a));this.$store.dispatch(kd.getCostCenters,n).then((function(){t.costCenterOptions=t.$store.state.LookUp.costCenters,t.costCenterOptions=t.costCenterOptions.map((function(e){return e.selected=!1,e})),t.costCenterOptions.unshift({costCentreId:-1,description:"All",selected:!0})}))},selectCostCenter:function(e){this.costCenterOptions.filter((function(e){return e.selected}));var t=e.map((function(e){return!!e.selected&&e.costCentreId}));if(t.find((function(e){return-1===e}))){var a,c=Object(n["a"])(this.scheduleWeekMap.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(Ut["a"])(a.value,2),i=(l[0],l[1]);i.show=!0}}catch(p){c.e(p)}finally{c.f()}this.$store.state.EmployeeModule.filteredEmployees=this.$store.state.EmployeeModule.employees}else{var s=this.$store.state.EmployeeModule.employees.filter((function(e){return!!t.find((function(t){return t===e.cost1}))}));this.$store.state.EmployeeModule.filteredEmployees=s;var o,r=Object(n["a"])(this.scheduleWeekMap.entries());try{for(r.s();!(o=r.n()).done;){var u=Object(Ut["a"])(o.value,2),d=(u[0],u[1]);d.show=!1}}catch(p){r.e(p)}finally{r.f()}var h,f=Object(n["a"])(s);try{for(f.s();!(h=f.n()).done;){var b=h.value,m=this.scheduleWeekMap.get(b.employeeNo);m.show=!0}}catch(p){f.e(p)}finally{f.f()}}},checkStatus:function(e){var t,a=new Set,c=Object(n["a"])(e.values());try{for(c.s();!(t=c.n()).done;){var l=t.value;l.empSchePublishState="";var i,s=Object(n["a"])(l.sche);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.publishStatus&&(o.publishStatus===Dp.draft?l.empSchePublishState=Dp.draft:o.publishStatus===Dp.published&&(l.empSchePublishState=Dp.published)),!this.hasFuturePaidDate&&o.isPaid&&zt()(0,"HH").diff(zt()(o.date),"days")<=-1&&(this.hasFuturePaidDate=!0)}}catch(u){s.e(u)}finally{s.f()}""===l.empSchePublishState?a.add(Dp.empty):a.add(l.empSchePublishState);var r=l.sche.find((function(e){return"Personal"===e.scheduleType||"Team"===e.scheduleType}));r&&(l.includeTeamOrPersonal=!0)}}catch(u){c.e(u)}finally{c.f()}a.has(Dp.published)?a.has(Dp.draft)&&a.has(Dp.published)||a.has(Dp.empty)&&a.has(Dp.published)?this.weekStatus=Dp.partial:this.weekStatus=Dp.published:this.weekStatus=Dp.draft},chooseCalendarDate:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.datePickerTop=n.bottom,t.datePickerLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:c=a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.abrupt("return");case 12:return a.next=14,t.selectDate(c);case 14:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectDate:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,n=e.clone().startOf("week"),c=e.clone().endOf("week"),a.next=6,t.loadDate(n,c);case 6:case"end":return a.stop()}}),a)})))()},getSelectedWeek:function(e){for(var t=e.clone().startOf("week"),a=(e.clone().endOf("week"),[]),n=0;n<=6;n++){var c=zt()(t).add(n,"days");a.push({momentDay:c,day:c.format("ddd, MMM Do")})}return a},getLastWeek:function(){this.dayFocus.subtract(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},getNextWeek:function(){this.dayFocus.add(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},moreDetail:function(e){this.$store.commit(Ht.setScheduleDay,e)},getTotalHour:function(e){var t,a=0,c=Object(n["a"])(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(i){c.e(i)}finally{c.f()}return a.toFixed(2)},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},selectEmployeeAndPublish:function(){this.PublishDialogRef.setSelectedDate(this.dayFocus.week().toString()),this.openPublishDialog()},publishCurrentWeek:function(e){var t=this,a=this.dayFocus.clone().startOf("week"),n=this.dayFocus.clone().endOf("week"),c={EmployeeNumbers:e,DateFrom:a.format("YYYY-MM-DD"),DateTo:n.format("YYYY-MM-DD")};kn.loading(),ce.PublishFlexSchedule(c).then((function(){t.reloadAfterEdit(),kn.clear()}),(function(e){console.error(e),kn.alert("Something went wrong.")}))},changeDisplayControl:function(){this.showControl=!this.showControl}}});a("6740");const xp=se()(kp,[["render",ku],["__scopeId","data-v-54e0be5c"]]);var wp,Cp=xp,Ap=function(e){return Object(c["A"])("data-v-56f4609f"),e=e(),Object(c["y"])(),e},Tp={class:"mt-4"},Ep=Object(c["i"])('<div class="left-box ml-2" data-v-56f4609f><div class="background-legend" data-v-56f4609f><div data-v-56f4609f><div class="flexi-legend" data-v-56f4609f></div><div class="legend-label" data-v-56f4609f>Flexi Schedule</div></div><div class="ml-4" data-v-56f4609f><div class="team-legend" data-v-56f4609f></div><div class="legend-label" data-v-56f4609f>Team Schedule</div></div><div class="ml-4" data-v-56f4609f><div class="personal-legend" data-v-56f4609f></div><div class="legend-label" data-v-56f4609f>Personal Schedule</div></div></div></div>',1),Mp={class:"weekDetail d-flex align-center justify-center"},Fp={class:"mt-4",style:{overflow:"auto"}},Np={class:"flex-sche-table"},Pp=Ap((function(){return Object(c["h"])("div",{class:"table-head"},[Object(c["h"])("div",{class:"schedule-head-grid"},[Object(c["h"])("div",{class:"table-cell"},"Employee"),Object(c["h"])("div",{class:"table-cell"},"Schedule")])],-1)})),Ip={class:"table-body"},Yp={class:"schedules-arr"},Lp=["onClick"],Rp={key:0,class:"published-icon"},Hp=Ap((function(){return Object(c["h"])("span",null,"P",-1)})),Wp=[Hp],Bp={class:"content-cell"};function Vp(e,t){var a=Object(c["F"])("Icon"),n=Object(c["F"])("day-cell"),l=Object(c["F"])("perfect-scrollbar"),i=Object(c["F"])("edit-flex-schedule"),s=Object(c["F"])("date-picker"),o=Object(c["F"])("extra-emp-detail");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",Tp,[Ep,Object(c["h"])("div",Mp,[Object(c["h"])("span",{class:"arrow-height mr-4",onClick:t[0]||(t[0]=function(t){return e.getLastDate()})},[Object(c["k"])(a,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#0000008a"}},null,8,["icon"])]),Object(c["h"])("span",{onClick:t[1]||(t[1]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},Object(c["J"])(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+Object(c["J"])(e.dayFocus.format("DD/MM/YYYY")),1),Object(c["h"])("span",{class:"arrow-height ml-4",onClick:t[2]||(t[2]=function(t){return e.getNextDate()})},[Object(c["k"])(a,{icon:e.$icons.chevronRight,height:"30",style:{color:"#0000008a"}},null,8,["icon"])])])]),Object(c["h"])("div",Fp,[Object(c["h"])("div",Np,[Pp,Object(c["k"])(l,null,{default:Object(c["R"])((function(){return[Object(c["h"])("div",Ip,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.scheduleWeekMap.keys(),(function(t){return Object(c["x"])(),Object(c["g"])("div",Yp,[Object(c["h"])("div",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},[Object(c["h"])("span",null,Object(c["J"])(e.scheduleWeekMap.get(t).employeeName),1),"published"===e.scheduleWeekMap.get(t).empSchePublishState?(Object(c["x"])(),Object(c["g"])("span",Rp,Wp)):Object(c["f"])("",!0)],8,Lp),Object(c["h"])("div",Bp,[Object(c["k"])(n,{scheDay:e.scheduleWeekMap.get(t).sche,employeeNo:e.scheduleWeekMap.get(t).employeeNo,employeeName:e.scheduleWeekMap.get(t).employeeName,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","employeeNo","employeeName","onOpenEditDialog"])])])})),256))])]})),_:1})])]),Object(c["h"])("div",null,[Object(c["k"])(i,{ref:"EditModalRef",isEdit:e.isEditingDialog,weekStatus:e.weekStatus,modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["isEdit","weekStatus","onReload"]),Object(c["k"])(s,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"]),Object(c["k"])(o,{ref:"ExtraEmpDetailRef",externalDetail:e.externalDetail},null,8,["externalDetail"])])],64)}(function(e){e["empty"]="",e["draft"]="draft",e["published"]="published",e["partial"]="partial"})(wp||(wp={}));var $p=Object(c["l"])({name:"FlexScheduleM",components:{CostAnalysisDialog:up,AnalysisChart:hm,PrintableView:Kb,DraftCreationDialog:Df,DatePicker:Yn,TimePicker:yh,EditFlexSchedule:xd,DayCell:Xd,FlexScheduleCellControl:uh,Icon:gh["a"],AutoComplete:Rl,ExtraEmpDetail:Tb,PublishDialog:Wm},data:function(){return{dayFocus:zt()(),weekDays:[],datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map,weekStatus:wp.empty,showControl:!1,extraEmpDetail:[],isAdmin:!1,hasFuturePaidDate:!1}},setup:function(){var e=Object(c["C"])(),t=Object(c["C"])(),a=Object(c["C"])(!1),n=Object(c["C"])([]);function l(t){a.value=t,e.value.openEdit()}function i(e){kn.loading(),ce.GetEmployeeExtraDetail(e).then((function(e){n.value=e.map((function(e){return"DateTime"===e.InputType?(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=zt()(e.KeyValue).format("ddd DD MMM YYYY"),e.Value=zt()(e.Value).format("ddd DD MMM YYYY")):"Double"===e.InputType&&(e.remoteKeyValue=e.KeyValue,e.remoteValue=e.Value,e.KeyValue=Math.round(100*e.KeyValue)/100,e.Value=Math.round(100*e.Value)/100),e})),kn.clear(),t.value.toggleShow()}),(function(e){kn.clear(),kn.alert("Something went wrong")}))}return{openEditDialog:l,openEmployeeDetail:i,EditModalRef:e,ExtraEmpDetailRef:t,isEditingDialog:a,externalDetail:n}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(kd.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(kd.getShifts),e.$store.dispatch(kd.getCostElement),e.$store.dispatch(kd.getWorkTypes),e.loadDate(),ce.GetDefaultWorkTypes().then((function(t){e.$store.state.FlexSchedule.defaultWorkTypes=t})),Affinity.user.EmployeeNo>=5e6&&(e.isAdmin=!0);case 7:case"end":return t.stop()}}),t)})))()},methods:{showCopy:function(){return!this.hasFuturePaidDate&&zt()().diff(this.dayFocus.endOf("week"),"day")<=0},reloadAfterEdit:function(){this.loadDate()},getCurrentWeekStatus:function(){return this.weekStatus===wp.empty||this.weekStatus===wp.draft?"Draft":this.weekStatus===wp.partial?"Partially Published":this.weekStatus===wp.published?"Published":this.weekStatus},loadDate:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var a,n,c,l,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.weekStatus=wp.empty,e.showControl=!1,e.hasFuturePaidDate=!1,a={managerEmployeeNo:Affinity.user.EmployeeNo,dateFrom:e.dayFocus.format("YYYY-MM-DD"),dateTo:e.dayFocus.format("YYYY-MM-DD")},kn.loading(),t.next=7,Promise.all([e.$store.dispatch(Rt.loadFlexiSchedules,{startDate:e.dayFocus,endDate:e.dayFocus}),ce.GetManagedLeaves(a),e.$store.dispatch(kl.getEmployees,Affinity.user.EmployeeNo).then((function(e){return e.map((function(e){return{employeeName:e.commonName,employeeNo:e.employeeNo,stdHoursPerWeek:e.stdHoursPerWeek,positionCode:e.positionCode}}))}))]).finally((function(){kn.clear()}));case 7:n=t.sent,c=Object(Ut["a"])(n,3),l=c[0],i=c[1],s=c[2],kn.clear(),o=vm.prepareGridDataMobile(e.dayFocus,s,l,i),e.scheduleWeekMap=o,vm.addUnAvaToGridMobile(l,o),vm.addLeaveToGridMobile(i,o);case 17:case"end":return t.stop()}}),t)})))()},checkStatus:function(e){var t,a=new Set,c=Object(n["a"])(e.values());try{for(c.s();!(t=c.n()).done;){var l=t.value;l.empSchePublishState="";var i,s=Object(n["a"])(l.sche);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.publishStatus&&(o.publishStatus===wp.draft?l.empSchePublishState=wp.draft:o.publishStatus===wp.published&&(l.empSchePublishState=wp.published)),!this.hasFuturePaidDate&&o.isPaid&&zt()(0,"HH").diff(zt()(o.date),"days")<=-1&&(this.hasFuturePaidDate=!0)}}catch(r){s.e(r)}finally{s.f()}""===l.empSchePublishState?a.add(wp.empty):a.add(l.empSchePublishState)}}catch(r){c.e(r)}finally{c.f()}a.has(wp.published)?a.has(wp.draft)&&a.has(wp.published)||a.has(wp.empty)&&a.has(wp.published)?this.weekStatus=wp.partial:this.weekStatus=wp.published:this.weekStatus=wp.draft},chooseCalendarDate:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.datePickerTop=n.bottom,t.datePickerLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:c=a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.abrupt("return");case 12:return a.next=14,t.selectDate(c);case 14:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectDate:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,a.next=4,t.loadDate();case 4:case"end":return a.stop()}}),a)})))()},getSelectedWeek:function(e){for(var t=e.clone().startOf("week"),a=(e.clone().endOf("week"),[]),n=0;n<=6;n++){var c=zt()(t).add(n,"days");a.push({momentDay:c,day:c.format("ddd, MMM Do")})}return a},getLastDate:function(){this.dayFocus=this.dayFocus.clone().subtract(1,"days"),this.$store.state.FlexSchedule.calendarFocusDate=this.dayFocus,this.loadDate()},getNextDate:function(){this.dayFocus=this.dayFocus.clone().add(1,"days"),this.$store.state.FlexSchedule.calendarFocusDate=this.dayFocus,this.loadDate()},moreDetail:function(e){this.$store.commit(Ht.setScheduleDay,e)},getTotalHour:function(e){var t,a=0,c=Object(n["a"])(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;l.hours&&(a+=l.hours)}}catch(i){c.e(i)}finally{c.f()}return a.toFixed(2)},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},publishCurrentWeek:function(e){var t=this,a=this.dayFocus.clone().startOf("week"),n=this.dayFocus.clone().endOf("week"),c={EmployeeNumbers:e,DateFrom:a.format("YYYY-MM-DD"),DateTo:n.format("YYYY-MM-DD")};kn.loading(),ce.PublishFlexSchedule(c).then((function(){t.reloadAfterEdit(),kn.clear()}),(function(e){console.error(e),kn.alert("Something went wrong.")}))},changeDisplayControl:function(){this.showControl=!this.showControl}}});a("09ec");const Up=se()($p,[["render",Vp],["__scopeId","data-v-56f4609f"]]);var Jp=Up,_p=function(e){return Object(c["A"])("data-v-69f9b2fb"),e=e(),Object(c["y"])(),e},Gp=_p((function(){return Object(c["h"])("p",{class:"mt-4"},[Object(c["j"])("I am "),Object(c["h"])("b",null,"unavailable"),Object(c["j"])(" during these times:")],-1)})),Kp={class:"available-table mt-4"},zp={class:"service-grid"},Qp=Object(c["i"])('<div class="grid-heading" data-v-69f9b2fb>Day of Week</div><div class="grid-heading" data-v-69f9b2fb>Start Time</div><div class="grid-heading" data-v-69f9b2fb>End Time</div><div class="grid-heading" data-v-69f9b2fb>Repeat</div><div class="grid-heading" data-v-69f9b2fb>Starts On</div><div class="grid-heading" data-v-69f9b2fb>Ends On</div><div class="grid-heading" data-v-69f9b2fb>Actions</div><div class="grid-heading" data-v-69f9b2fb>Reason</div>',8),qp={class:"grid-item"},Xp={class:"grid-item"},Zp={class:"grid-item"},eO={class:"grid-item"},tO={class:"grid-item"},aO={class:"grid-item"},nO={class:"grid-item"},cO=["onClick"],lO=["onClick"],iO={class:"grid-item"},sO={class:"d-flex justify-end mt-4"};function oO(e,t,a,n,l,i){var s=Object(c["F"])("edit-availability");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",null,[Gp,Object(c["h"])("div",Kp,[Object(c["h"])("div",zp,[Qp,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.girdData,(function(t){return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",qp,Object(c["J"])(t.dayOfWeek),1),Object(c["h"])("div",Xp,Object(c["J"])(t.startTime),1),Object(c["h"])("div",Zp,Object(c["J"])(t.endTime),1),Object(c["h"])("div",eO,Object(c["J"])(t.frequencyType),1),Object(c["h"])("div",tO,Object(c["J"])(t.startDate),1),Object(c["h"])("div",aO,Object(c["J"])(t.endDate),1),Object(c["h"])("div",nO,[Object(c["h"])("button",{class:"green white--text xsmall",onClick:function(a){return e.openEditDialog(!0,t)}},"Edit",8,cO),Object(c["h"])("button",{class:"grey white--text xsmall ml-2",onClick:function(a){return e.confirmDelete(t)}},"Delete",8,lO)]),Object(c["h"])("div",iO,Object(c["J"])(t.reason),1)],64)})),256))])]),Object(c["h"])("div",sO,[Object(c["h"])("button",{class:"green small white--text",onClick:t[0]||(t[0]=function(t){return e.openEditDialog(!1)})},"Create")])]),Object(c["k"])(s,{ref:"EditAvailabilityRef",isEdit:e.isEditingDialog,onReload:e.loadAvailability,modalIndex:1999},null,8,["isEdit","onReload"])],64)}var rO=function(e){return Object(c["A"])("data-v-a3a9af32"),e=e(),Object(c["y"])(),e},uO={class:"bold"},dO={key:0},hO={key:1},fO={class:"edit-form mt-4 copy2"},bO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"Start Time ",-1)})),mO={class:"mt-2"},pO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"End Time ",-1)})),OO={class:"mt-4"},jO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"Day of Week",-1)})),yO={class:"select-day-of-week"},gO={class:"mt-2"},vO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"Repeat",-1)})),DO={class:"select-repeat"},SO={class:"mt-4"},kO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"Start On",-1)})),xO={class:"mt-2 endDateWidth"},wO={key:0},CO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"End On",-1)})),AO={class:"ml-2"},TO=rO((function(){return Object(c["h"])("label",{class:"checkbox-label"},"No End Date",-1)})),EO={class:"mt-2"},MO=rO((function(){return Object(c["h"])("label",{class:"form-label"},"Reason",-1)})),FO={class:"mt-4 full-width d-flex justify-end"},NO=rO((function(){return Object(c["h"])("span",{class:"white"},"Save",-1)})),PO=[NO],IO=rO((function(){return Object(c["h"])("span",{class:"white"},"Delete",-1)})),YO=[IO],LO=rO((function(){return Object(c["h"])("span",{class:"white"},"Create",-1)})),RO=[LO],HO=rO((function(){return Object(c["h"])("span",{class:"white"},"Cancel",-1)})),WO=[HO];function BO(e,t){var a=Object(c["F"])("custom-select"),n=Object(c["F"])("date-picker"),l=Object(c["F"])("Modal");return Object(c["x"])(),Object(c["e"])(l,{ref:"ModalRef"},{header:Object(c["R"])((function(){return[Object(c["h"])("div",null,[Object(c["h"])("h2",uO,[e.isEdit?(Object(c["x"])(),Object(c["g"])("span",dO,"Edit Unavailability")):(Object(c["x"])(),Object(c["g"])("span",hO,"Create Unavailability"))])])]})),body:Object(c["R"])((function(){return[Object(c["h"])("div",null,[Object(c["h"])("div",fO,[Object(c["h"])("div",null,[bO,Object(c["S"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.startTime=t}),onChange:t[1]||(t[1]=function(){return e.updateStartTime&&e.updateStartTime.apply(e,arguments)})},null,544),[[c["O"],e.startTime]])]),Object(c["h"])("div",mO,[pO,Object(c["S"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.endTime=t}),onChange:t[3]||(t[3]=function(){return e.updateEndTime&&e.updateEndTime.apply(e,arguments)})},null,544),[[c["O"],e.endTime]])]),Object(c["h"])("div",OO,[jO,Object(c["h"])("div",yO,[Object(c["k"])(a,{options:e.dayOfWeekOption,modelValue:e.selectedDayOfWeek,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selectedDayOfWeek=t}),modelModifiers:{modelValue:!0}},null,8,["options","modelValue"])])]),Object(c["h"])("div",gO,[vO,Object(c["h"])("div",DO,[Object(c["k"])(a,{options:e.repeatOption,modelValue:e.selectedRepeat,"onUpdate:modelValue":[t[5]||(t[5]=function(t){return e.selectedRepeat=t}),e.updateRepeat],modelModifiers:{modelValue:!0}},null,8,["options","modelValue","onUpdate:modelValue"])])]),Object(c["h"])("div",SO,[kO,Object(c["S"])(Object(c["h"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.startDateText=t}),onChange:t[7]||(t[7]=function(t){return e.updateDateTimeText("startDate")}),onClick:t[8]||(t[8]=function(t){return e.updateDateTime(t,"startDate")})},null,544),[[c["O"],e.startDateText]])]),Object(c["h"])("div",xO,[e.endDateDisable?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("div",wO,[CO,Object(c["S"])(Object(c["h"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.endDateText=t}),onChange:t[10]||(t[10]=function(t){return e.updateDateTimeText("endDate")}),onClick:t[11]||(t[11]=function(t){return e.updateDateTime(t,"endDate")})},null,544),[[c["O"],e.endDateText]]),Object(c["h"])("span",AO,[Object(c["S"])(Object(c["h"])("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.noEndDate=t}),onChange:t[13]||(t[13]=function(){return e.clickedNoEndDate&&e.clickedNoEndDate.apply(e,arguments)})},null,544),[[c["M"],e.noEndDate]]),TO])]))]),Object(c["h"])("div",EO,[MO,Object(c["S"])(Object(c["h"])("textarea",{"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.reason=t})},null,512),[[c["O"],e.reason]])])]),Object(c["k"])(n,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"])])]})),footer:Object(c["R"])((function(){return[Object(c["h"])("div",FO,[e.isEdit?(Object(c["x"])(),Object(c["g"])("button",{key:0,class:"blue normal copy2",onClick:t[15]||(t[15]=function(t){return e.updateAvailability()})},PO)):Object(c["f"])("",!0),e.isEdit?(Object(c["x"])(),Object(c["g"])("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[16]||(t[16]=function(t){return e.confirmDelete()})},YO)):Object(c["f"])("",!0),e.isEdit?Object(c["f"])("",!0):(Object(c["x"])(),Object(c["g"])("button",{key:2,class:"blue normal copy2",onClick:t[17]||(t[17]=function(t){return e.createAvailability()})},RO)),Object(c["h"])("button",{class:"ml-2 normal orange copy2",onClick:t[18]||(t[18]=function(t){return e.cancel()})},WO)])]})),_:1},512)}var VO=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$O=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],UO=["Once","Weekly","Fortnightly"];function JO(e){return $O[VO.indexOf(e)]}function _O(e){return VO[$O.indexOf(e)]}var GO={shortWeekDays:VO,fullWeekDays:$O,frequencyCycle:UO,findFullDaysByShort:JO,findShortDayByFull:_O},KO=GO,zO=Object(c["l"])({name:"EditAvailability",components:{Modal:Ce,CustomSelect:ci,DatePicker:Yn},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{ava:null,employeeNo:0,startTime:"",endTime:"",dayOfWeekOption:KO.fullWeekDays,selectedDayOfWeek:"Monday",repeatOption:KO.frequencyCycle,selectedRepeat:"Weekly",datePickerTop:0,datePickerLeft:0,startDate:zt()(),startDateText:"",endDate:zt()(),endDateText:"",reason:"",noEndDate:!0,endDateDisable:!1}},setup:function(){return{}},watch:{selectedDayOfWeek:function(e,t){}},methods:{reset:function(){this.ava=null,this.employeeNo=0,this.startTime="",this.endTime="",this.startDate=zt()(),this.startDateText="",this.endDate=zt()(),this.endDateText="",this.reason="",this.selectedRepeat="Weekly",this.noEndDate=!0,this.endDateDisable=!1},updateStartTime:function(){this.startTime=na.parseTimeColumn(this.startTime)},updateEndTime:function(){this.endTime=na.parseTimeColumn(this.endTime)},updateRepeat:function(){"Once"===this.selectedRepeat?this.endDateDisable=!0:this.endDateDisable=!1},clickedNoEndDate:function(){this.noEndDate&&(this.endDateText="",this.endDate=null)},createAvailability:function(){var e=this;kn.loading();var t=this.endDateText?this.endDate.format("DD/MMM/YYYY"):null;t=this.noEndDate||this.endDateDisable?null:t;var a=[{employeeNo:Affinity.user.EmployeeNo,startTime:this.startTime,endTime:this.endTime,dayOfWeek:KO.findShortDayByFull(this.selectedDayOfWeek),dayOfMonth:null,frequencyType:this.selectedRepeat,startDate:this.startDate.format("DD/MMM/YYYY"),endDate:t,reason:this.reason,hasNoEndDate:this.noEndDate}];ce.CreateAvailability(a).then((function(t){kn.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTimeText:function(e){if("endDate"===e)if(""===this.endDateText)this.endDate=null;else{this.noEndDate=!1;var t=zt()(this.endDateText,"DD/MM/YYYY");t.isValid()&&(this.endDate=t)}else if("startDate"===e)if(""===this.startDateText)this.startDate=null;else{this.noEndDate=!1;var a=zt()(this.startDateText,"DD/MM/YYYY");a.isValid()&&(this.startDate=a)}},confirmDelete:function(){var e=this;kn.confirmOrCancel({message:"Are you sure you want to delete this period of unavailability?"}).then((function(){ce.DeleteAvailabilities(e.ava.id).then((function(t){e.$emit("reload"),e.$refs.ModalRef.toggleShow()}),(function(e){kn.alert("Something went wrong. Delete Availability failed")}))}))},updateAvailability:function(){var e=this,t=this.endDateText?this.endDate.format("DD/MMM/YYYY"):null;t=this.noEndDate||this.endDateDisable?null:t,kn.loading();var a=[{Id:this.ava.id,StartTime:this.startTime,EndTime:this.endTime,DayOfWeek:KO.findShortDayByFull(this.selectedDayOfWeek),DayOfMonth:null,FrequencyType:this.selectedRepeat,StartDate:this.startDate.format("DD/MMM/YYYY"),EndDate:t,Reason:this.reason,HasNoEndDate:this.noEndDate}];ce.PatchAvailabilities(a).then((function(t){kn.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTime:function(e,t){var a=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c=e.target.getClientRects()[0],a.datePickerTop=c.bottom,a.datePickerLeft=c.left,n.prev=3,n.t0=t,n.next="startDate"===n.t0?7:"endDate"===n.t0?12:19;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.startDate);case 9:return a.startDate=n.sent,a.startDateText=a.startDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return a.endDate&&a.endDate.isValid()||(a.endDate=zt()()),n.next=15,a.$refs.DatePickerRef.toggleShow(a.endDate);case 15:return a.endDate=n.sent,a.endDateText=a.endDate.format("DD/MM/YYYY"),a.noEndDate=!1,n.abrupt("return");case 19:n.next=24;break;case 21:return n.prev=21,n.t1=n["catch"](3),n.abrupt("return");case 24:case"end":return n.stop()}}),n,null,[[3,21]])})))()},openEditDialog:function(e){e?(this.ava=e,this.employeeNo=Affinity.user.EmployeeNo,this.startTime=e.startTime,this.endTime=e.endTime,this.selectedDayOfWeek=e.dayOfWeek,this.selectedRepeat=e.frequencyType,this.startDateText=e.startDate,this.startDate=zt()(this.startDateText,"DD/MM/YYYY"),this.endDateText=e.endDate?e.endDate:"",this.endDate=zt()(this.endDateText,"DD/MM/YYYY"),this.reason=e.reason,this.noEndDate=e.hasNoEndDate):this.reset(),this.$refs.ModalRef.toggleShow()},cancel:function(){this.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("1c76");const QO=se()(zO,[["render",BO],["__scopeId","data-v-a3a9af32"]]);var qO=QO,XO=Object(c["l"])({components:{EditAvailability:qO},data:function(){return{}},setup:function(){var e=Object(c["C"])(!1),t=Object(c["C"])(),a=Object(c["C"])([]),n=Object(c["C"])();function l(a,n){e.value=a,t.value.openEditDialog(n)}function i(){ce.GetAvailabilities(Affinity.user.EmployeeNo).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Ut["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a.value=t.map((function(e){return e.startDate=zt()(e.startDate).format("DD/MM/YYYY"),e.endDate&&(e.endDate=zt()(e.endDate).format("DD/MM/YYYY")),e.dayOfWeek=KO.findFullDaysByShort(e.dayOfWeek),e}))}))}return Object(c["v"])((function(){i()})),{girdData:a,openEditDialog:l,selectedAva:n,loadAvailability:i,isEditingDialog:e,EditAvailabilityRef:t}},mounted:function(){},methods:{confirmDelete:function(e){var t=this;kn.confirmOrCancel({message:"Are you sure you want to delete this period of unavailability?"}).then((function(){t.deleteAva(e.id)}))},deleteAva:function(e){var t=this;ce.DeleteAvailabilities(e).then((function(e){t.loadAvailability()}),(function(e){kn.alert("Something went wrong. Delete Availability failed")}))}}});a("a5ce");const ZO=se()(XO,[["render",oO],["__scopeId","data-v-69f9b2fb"]]);var ej=ZO,tj=Object(c["h"])("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1",crossorigin:"anonymous"},null,-1),aj={class:"col-sm-4"},nj=Object(c["h"])("p",null,"Login form style 3",-1),cj={class:"card"},lj={class:"card-body"},ij=Object(c["h"])("h4",{class:"card-title text-center mb-4 mt-1"},"Sign in",-1),sj=Object(c["h"])("hr",null,null,-1),oj=Object(c["h"])("p",{class:"text-success text-center"},"Some message goes here",-1),rj={class:"form-group"},uj={class:"input-group"},dj={class:"form-group mt-2"},hj={class:"input-group"},fj=Object(c["h"])("div",{class:"form-group mt-4"},[Object(c["h"])("button",{type:"submit",class:"btn btn-primary btn-block"}," Login ")],-1);function bj(e,t,a,n,l,i){return Object(c["x"])(),Object(c["g"])(c["a"],null,[tj,Object(c["h"])("aside",aj,[nj,Object(c["h"])("div",cj,[Object(c["h"])("article",lj,[ij,sj,oj,Object(c["h"])("form",{onSubmit:t[2]||(t[2]=Object(c["U"])((function(){return i.login&&i.login.apply(i,arguments)}),["prevent"]))},[Object(c["h"])("div",rj,[Object(c["h"])("div",uj,[Object(c["S"])(Object(c["h"])("input",{name:"",class:"form-control",placeholder:"Email or login","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.username=e})},null,512),[[c["O"],l.username]])])]),Object(c["h"])("div",dj,[Object(c["h"])("div",hj,[Object(c["S"])(Object(c["h"])("input",{class:"form-control",placeholder:"******",type:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.password=e})},null,512),[[c["O"],l.password]])])]),fj],32)])])])],64)}var mj={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){console.log("login"),console.log(this.username),console.log(this.password),g.a.post("http://localhost:61160/api/Authentication/post",{username:this.username,password:this.password}).then((function(e){console.log("res",e)}))}}};const pj=se()(mj,[["render",bj]]);var Oj=pj,jj=function(e){return Object(c["A"])("data-v-48fcc23f"),e=e(),Object(c["y"])(),e},yj={class:"d-flex justify-space-between align-center"},gj={class:"mt-2 ml-2 analytic-date-picker pa-2"},vj=jj((function(){return Object(c["h"])("label",null,"Select View",-1)})),Dj={class:"ml-4"},Sj=jj((function(){return Object(c["h"])("span",{class:"input-label"},"From Date",-1)})),kj={class:"ml-4"},xj=jj((function(){return Object(c["h"])("span",{class:"input-label"},"End Date",-1)})),wj={class:"ml-4"},Cj={class:"mt-4 full-width grid-section"},Aj={class:"grid-extra-width"},Tj={class:"grid-heading"},Ej={class:"heading-cell"},Mj={class:"grid-body"},Fj={class:"grid-body-row"},Nj={class:"grid-body-cell"},Pj={class:"pagination"},Ij={class:"total-page-small"},Yj=["onClick"];function Lj(e,t){var a=Object(c["F"])("custom-select"),n=Object(c["F"])("perfect-scrollbar"),l=Object(c["F"])("date-picker");return Object(c["x"])(),Object(c["g"])("div",null,[Object(c["h"])("div",yj,[Object(c["h"])("div",gj,[vj,Object(c["k"])(a,{class:"ml-2",options:e.options,selected:"Start/End Time"},null,8,["options"]),Object(c["h"])("div",Dj,[Sj,Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fromDateText=t}),class:"input-box ml-2",type:"text",onClick:t[1]||(t[1]=function(t){return e.updateFromDateTime(t,e.fromDate)})},null,512),[[c["O"],e.fromDateText]])]),Object(c["h"])("div",kj,[xj,Object(c["S"])(Object(c["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.toDateText=t}),class:"input-box ml-2",type:"text",onClick:t[3]||(t[3]=function(t){return e.updateToDateTime(t,e.toDate)})},null,512),[[c["O"],e.toDateText]])]),Object(c["h"])("div",wj,[Object(c["h"])("button",{class:"light-blue small action-button white",onClick:t[4]||(t[4]=function(){return e.loadGridDataWithDate&&e.loadGridDataWithDate.apply(e,arguments)})},"Show")])]),Object(c["h"])("div",null,[Object(c["h"])("button",{class:"light-blue small action-button white",onClick:t[5]||(t[5]=function(){return e.exportCSV&&e.exportCSV.apply(e,arguments)})},"Export CSV")])]),Object(c["h"])("div",Cj,[Object(c["k"])(n,null,{default:Object(c["R"])((function(){return[Object(c["h"])("div",Aj,[Object(c["h"])("div",Tj,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.dataHeadings,(function(e){return Object(c["x"])(),Object(c["g"])("div",Ej,Object(c["J"])(e),1)})),256))]),Object(c["h"])("div",Mj,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.dataAnalysis,(function(e){return Object(c["x"])(),Object(c["g"])("div",Fj,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(Object.entries(e),(function(e){var t=Object(Ut["a"])(e,2),a=(t[0],t[1]);return Object(c["x"])(),Object(c["g"])("div",Nj,Object(c["J"])(a),1)})),256))])})),256))])])]})),_:1})]),Object(c["h"])("div",Pj,[Object(c["h"])("div",Ij,[Object(c["h"])("div",{class:"previous-button page-button",onClick:t[6]||(t[6]=function(t){return e.selectNextPage(-1)})}," < "),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["D"])(e.pageList,(function(t){return Object(c["x"])(),Object(c["g"])("div",{class:Object(c["r"])(["page-button",{selected:e.pageNumber===t}]),onClick:function(a){return e.selectPage(t)}},Object(c["J"])(t),11,Yj)})),256)),Object(c["h"])("div",{class:"next-button page-button",onClick:t[7]||(t[7]=function(t){return e.selectNextPage(1)})}," > ")])]),Object(c["k"])(l,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,"max-date":e.datePickerMax,"min-date":e.datePickerMin,date:e.datePickerTargetDay},null,8,["top","leftInput","max-date","min-date","date"])])}a("a630"),a("a15b"),a("07ac");var Rj=Object(c["l"])({name:"AnalysisV2",components:{Modal:Ce,CustomSelect:ci,DatePicker:Yn},setup:function(){var e=Object(Vt["b"])(),t=Object(c["C"])([]),a=Object(c["C"])(1),n=Object(c["C"])(20),l=Object(c["C"])(5),i=Object(c["C"])([]),s=Object(c["C"])(),o=Object(c["C"])(null),r=Object(c["C"])(null),u=Object(c["C"])([]),d=Object(c["C"])(""),h=Object(c["C"])(""),f=Object(c["C"])(0),b=Object(c["C"])(0),m=Object(c["C"])(null),p=Object(c["C"])(null),O=Object(c["C"])(zt()()),y=Object(c["C"])(["Employee Name","Employee Number","Functional Area","Date","Award","Scheduled Hours","Actual Hours","Hours Variance","Scheduled Cost","Actual Cost","Cost Variance","Actual Start Time","Actual End Time","Adjusted Start Time","Adjusted End Time"]),g=Object(c["C"])([]),v=Object(c["C"])(["Start/End Time","Detailed Cost Report"]);function D(){return S.apply(this,arguments)}function S(){return S=Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return kn.loading(),t.next=3,e.dispatch(kl.getEmployees,Affinity.user.EmployeeNo).then((function(e){u.value=e.map((function(e){return e.employeeNo}))}));case 3:return t.next=5,w();case 5:kn.clear();case 6:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return x=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!o.value||!r.value){e.next=5;break}if(!(r.value.diff(o.value,"weeks")>6)){e.next=5;break}throw kn.alert("Selected Date range must not greater then 6 week"),"weeks error";case 5:return a.value=1,kn.loading(),e.next=9,w();case 9:kn.clear(),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])}))),x.apply(this,arguments)}function w(){return C.apply(this,arguments)}function C(){return C=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.value&&r.value||(o.value||(o.value=zt()().startOf("month")),r.value||(r.value=zt()().endOf("month"))),t={pageNumber:a.value,pageSize:n.value,pagingEnabled:!0,sortBy:"EmployeeNo",sortingType:"asc",employeeNumbers:u.value,transDateFrom:o.value?o.value.format("YYYY-MM-DD"):null,transDateTo:r.value?r.value.format("YYYY-MM-DD"):null},e.next=4,ce.GetCostAnalysisV2(t).then((function(e){g.value=e.response.map((function(e){var t={};return t.commonName=e.commonName,t.employeeNo=e.employeeNo,t.functionalArea=e.functionalArea,t.transDate=zt()(e.transDate).format("YYYY-MM-DD"),t.awardId=e.awardId,t.scheduledHours=e.scheduledUnits,t.actualHours=e.actualUnits,t.hoursVariance=Math.round(100*(t.actualHours-t.scheduledHours))/100,t.scheduledCost=e.scheduledCost?Math.round(100*e.scheduledCost)/100:null,t.actualCost=e.actualCost?Math.round(100*e.actualCost)/100:null,t.costVariance=Math.round(100*(t.actualCost-t.scheduledCost))/100,t.actStartTime=e.actStartTime?zt()(e.actStartTime).format("hh:mm"):null,t.actEndTime=e.actEndTime?zt()(e.actEndTime).format("hh:mm"):null,t.adjStartTime=e.adjStartTime?zt()(e.adjStartTime).format("hh:mm"):null,t.adjEndTime=e.adjEndTime?zt()(e.adjEndTime).format("hh:mm"):null,t})),l.value=e.totalPages,a.value=e.currentPageNumber,A(e.currentPageNumber,e.totalPages)}));case 4:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function A(e,t){i.value=t<=5?Array.from(Array(t).keys()).map((function(e){return e+1})):e<=3?Array.from(Array(5).keys()).map((function(e){return e+1})):t>e+2?Array.from(Array(5).keys()).map((function(t){return t+e-2})):Array.from(Array(5).keys()).map((function(e){return e+t-4}))}function T(e,t){return E.apply(this,arguments)}function E(){return E=Object(j["a"])(regeneratorRuntime.mark((function e(t,a){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.getClientRects()[0],f.value=n.bottom,b.value=n.left,o&&(p.value=o.value,m.value=null),O.value=r.value?r.value:zt()(),e.next=7,L();case 7:c=e.sent,r.value=c||void 0,h.value=r.value.format("DD/MM/YYYY");case 10:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function M(e,t){return F.apply(this,arguments)}function F(){return F=Object(j["a"])(regeneratorRuntime.mark((function e(t,a){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target.getClientRects()[0],f.value=n.bottom,b.value=n.left,r&&(p.value=null,m.value=r.value),O.value=o.value?o.value:zt()(),e.next=7,L();case 7:c=e.sent,o.value=c||void 0,d.value=o.value.format("DD/MM/YYYY");case 10:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function N(e){return P.apply(this,arguments)}function P(){return P=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.value=t,kn.loading(),e.next=4,w();case 4:kn.clear();case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function I(){return Y.apply(this,arguments)}function Y(){return Y=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,a.value=a.value+t,kn.loading(),e.next=5,w();case 5:kn.clear();case 6:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function L(){return R.apply(this,arguments)}function R(){return R=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.value.toggleShow(O.value);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function H(){return W.apply(this,arguments)}function W(){return W=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return kn.loading(),e.next=3,B();case 3:t=e.sent,kn.clear(),a="data:text/csv;charset=utf-8,",a+=y.value.join(",")+"\r\n",t.map((function(e){a+=Object.values(e).join(",")+"\r\n"})),n=encodeURI(a),c=document.createElement("a"),c.setAttribute("href",n),c.setAttribute("download","Analytic.csv"),document.body.appendChild(c),c.click();case 14:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function B(){return V.apply(this,arguments)}function V(){return V=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={pageNumber:1,pageSize:1e4,pagingEnabled:!1,sortBy:"EmployeeNo",sortingType:"asc",employeeNumbers:u.value,transDateFrom:o.value?o.value.format("YYYY-MM-DD"):null,transDateTo:r.value?r.value.format("YYYY-MM-DD"):null},e.next=3,ce.GetCostAnalysisV2(t).then((function(e){return e.response.sort((function(e,t){var a=e.commonName.toUpperCase(),n=t.commonName.toUpperCase();return a<n?-1:a>n?1:0})),e.response.map((function(e){var t={};return t.commonName=e.commonName,t.employeeNo=e.employeeNo,t.functionalArea=e.functionalArea,t.transDate=zt()(e.transDate).format("YYYY-MM-DD"),t.awardId=e.awardId,t.scheduledHours=e.scheduledUnits,t.actualHours=e.actualUnits,t.hoursVariance=Math.round(100*(t.actualHours-t.scheduledHours))/100,t.scheduledCost=e.scheduledCost?Math.round(100*e.scheduledCost)/100:null,t.actualCost=e.actualCost?Math.round(100*e.actualCost)/100:null,t.costVariance=Math.round(100*(t.actualCost-t.scheduledCost))/100,t.actStartTime=e.actStartTime?zt()(e.actStartTime).format("hh:mm"):null,t.actEndTime=e.actEndTime?zt()(e.actEndTime).format("hh:mm"):null,t.adjStartTime=e.adjStartTime?zt()(e.adjStartTime).format("hh:mm"):null,t.adjEndTime=e.adjEndTime?zt()(e.adjEndTime).format("hh:mm"):null,t}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}return Object(c["v"])((function(){o.value&&r.value||(o.value||(o.value=zt()().startOf("month"),d.value=o.value.format("DD/MM/YYYY")),r.value||(r.value=zt()().endOf("month"),h.value=r.value.format("DD/MM/YYYY"))),D()})),{DatePickerRef:s,data:t,dataHeadings:y,dataAnalysis:g,options:v,pageNumber:a,pageSize:n,totalPages:l,pageList:i,dateModalTop:f,dateModalLeft:b,datePickerMax:m,datePickerMin:p,datePickerTargetDay:O,fromDate:o,toDate:r,fromDateText:d,toDateText:h,updateToDateTime:T,updateFromDateTime:M,loadGridData:w,exportCSV:H,selectPage:N,loadGridDataWithDate:k,selectNextPage:I}}});a("70bf");const Hj=se()(Rj,[["render",Lj],["__scopeId","data-v-48fcc23f"]]);var Wj=Hj,Bj=[{path:"/login",name:"Login",component:Oj},{path:"/my-schedules",name:"My Schedule",component:Hn},{path:"/availability",name:"Availability",component:ej},{path:"/flex-schedule",name:"Flex Schedule",component:Cp,beforeEnter:function(e,t,a){aa()?a("/flex-schedule-mobile"):a()}},{path:"/flex-schedule-mobile",name:"FlexScheduleMobile",component:Jp},{path:"/team-schedules",name:"Schedule Management",component:Ki},{path:"/employee-allocations",name:"Employee Allocation",component:Rr},{path:"/cost-reports",name:"Analysis",component:Wj},{path:"/",name:"Home",component:Hn}],Vj=Object(sa["a"])({history:Object(sa["b"])("/"),routes:Bj}),$j=Vj,Uj={state:{magic:123},modules:{FlexSchedule:ea,LookUp:zd,EmployeeModule:Tl}},Jj=new Vt["a"].Store(Uj),_j=(a("ba8f"),a("8e1f"),a("14b7")),Gj=a("e37d"),Kj={reformatDate:function(e){var t;if(!e)return e;if("string"===typeof e)return e;if("object"===Object(Hl["a"])(e)&&"Date"===(null===(t=e.constructor)||void 0===t?void 0:t.name)){var a=zt()(e);return a.format("DD/MM/YYYY")}if(e.isValid()){var n=zt()(e);return null!=n&&n.isValid()?n.format("DD/MM/YYYY"):e}return e},reformatDateString:function(e,t){return e&&"string"===typeof e?zt()(e,t).format("DD/MM/YYYY"):e},reformatTime:function(e){if(!e)return e;var t=zt()(e);if(null==t||!t.isValid()){var a=zt()(e,"h:m");return null!=a&&a.isValid()?a.format("HH:mm"):e}return t.format("HH:mm")},reformatBreakHours:function(e){if(!e)return e;var t=e,a=Math.floor(t),n=t-a;return n>0&&(n=Math.round(60*n)),a&&n?"".concat(a,":").concat(n):a?"".concat(a," hour"):n?"".concat(n," min"):void 0},ordinalSuffix:function(e){var t=e%10,a=e%100;return 1==t&&11!=a?e+"st":2==t&&12!=a?e+"nd":3==t&&13!=a?e+"rd":e+"th"}},zj=Kj,Qj=a("97d2"),qj=a("5210"),Xj=a("963c"),Zj=a("f68e"),ey={chevronUp:Qj["a"],chevronLeft:qj["a"],chevronRight:Xj["a"],chevronDown:Zj["a"]},ty=ey,ay={},ny={install:function(e){function t(t){e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowPersonal=t:e.config.globalProperties.$CompanyConfig={isAllowPersonal:t}}function a(t){e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowSundayFirst=t:e.config.globalProperties.$CompanyConfig={isAllowSundayFirst:t}}function n(){return e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowPersonal:null}function c(){return e.config.globalProperties.$CompanyConfig?e.config.globalProperties.$CompanyConfig.isAllowSundayFirst:null}ay.setAllowPersonal=t,ay.getAllowPersonal=n,ay.setAllowSundayFirst=a,ay.getAllowSundayFirst=c,e.provide("MANAGE_COMPANY_CONFIG",ay)}},cy=a("0192"),ly=(a("a72e"),Object(_j["a"])());navigator.serviceWorker.getRegistrations().then((function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;c.unregister()}}catch(l){a.e(l)}finally{a.f()}}));var iy=Object(c["d"])(ia);iy.config.globalProperties.emitter=ly,iy.use(Gj["a"]),iy.use(cy["a"]),iy.use(ny),iy.use(Jj).use($j).mount("#app"),iy.config.globalProperties.$filters=zj,iy.config.globalProperties.$icons=ty},ce0a:function(e,t,a){"use strict";a("2699")},dde9:function(e,t,a){},def1:function(e,t,a){"use strict";a("e67b")},dfcd:function(e,t,a){"use strict";a("34ab")},e3ba:function(e,t,a){},e439:function(e,t,a){},e552:function(e,t,a){},e67b:function(e,t,a){},ea8e:function(e,t,a){},f28b:function(e,t,a){"use strict";a("919e")},f378:function(e,t,a){},f70e:function(e,t,a){},f9e1:function(e,t,a){"use strict";a("88ce")},fcab:function(e,t,a){"use strict";a("a883")},ff5d:function(e,t,a){"use strict";a("336f")}});
//# sourceMappingURL=app.js.map