(function(e){function t(t){for(var n,l,s=t[0],o=t[1],r=t[2],u=0,h=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&h.push(i[l][0]),i[l]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(h.length)h.shift()();return c.push.apply(c,r||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==i[o]&&(n=!1)}n&&(c.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},c=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var r=0;r<s.length;r++)t(s[r]);var d=o;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"01da":function(e,t,a){},"03d8":function(e,t,a){},"11dc":function(e,t,a){},1951:function(e,t,a){"use strict";a("01da")},"1c7e0":function(e,t,a){},"1fa8":function(e,t,a){"use strict";a("6a0c")},2866:function(e,t,a){"use strict";a("b8cf")},"288c":function(e,t,a){},"2b5c":function(e,t,a){},"2c74":function(e,t,a){"use strict";a("80b4")},"2d8b":function(e,t,a){},"357f":function(e,t,a){},"3c05":function(e,t,a){"use strict";a("cf5e")},"3e12":function(e,t,a){"use strict";a("8bd6")},"3fab":function(e,t,a){},"3fc3":function(e,t,a){"use strict";a("562e")},"42ae":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=c,e.exports=i,i.id="4678"},"470f":function(e,t,a){"use strict";a("f22f")},"4c7b":function(e,t,a){"use strict";a("2d8b")},"4de6":function(e,t,a){"use strict";a("9a1c")},"4ffb":function(e,t,a){"use strict";a("1c7e0")},5527:function(e,t,a){},"562e":function(e,t,a){},"56ef":function(e,t,a){},"58be":function(e,t,a){"use strict";a("e552")},"5d16":function(e,t,a){"use strict";a("8f67")},6143:function(e,t,a){"use strict";a("11dc")},"69af":function(e,t,a){},"6a04":function(e,t,a){},"6a0c":function(e,t,a){},"6f09":function(e,t,a){"use strict";a("e3ba")},"7ac5":function(e,t,a){"use strict";a("7f83")},"7f83":function(e,t,a){},"7f94":function(e,t,a){"use strict";a("6a04")},"80b4":function(e,t,a){},8241:function(e,t,a){},"845b":function(e,t,a){"use strict";a("a191")},"854b":function(e,t,a){},"86cf":function(e,t,a){"use strict";a("dde9")},"88ce":function(e,t,a){},"8bd6":function(e,t,a){},"8e1f":function(e,t,a){},"8ed8":function(e,t,a){},"8f67":function(e,t,a){},"902d":function(e,t,a){"use strict";a("8ed8")},9557:function(e,t,a){"use strict";a("3fab")},"97fb":function(e,t,a){"use strict";a("03d8")},"9a1c":function(e,t,a){},"9ede":function(e,t,a){},a191:function(e,t,a){},a273:function(e,t,a){},a33d:function(e,t,a){"use strict";a("56ef")},a883:function(e,t,a){},b8cf:function(e,t,a){},ba8f:function(e,t,a){},beef:function(e,t,a){"use strict";a("854b")},cd49:function(e,t,a){"use strict";a.r(t),a.d(t,"emitter",(function(){return sh}));var n=a("b85c"),i=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("7a23")),c={class:"v-application"};function l(e,t,a,n,l,s){var o=Object(i["B"])("schedules-navigation"),r=Object(i["B"])("alert"),d=Object(i["B"])("router-view"),u=Object(i["B"])("dashboard");return Object(i["t"])(),Object(i["e"])("div",null,[Object(i["i"])(u,{"enable-by-config":!0,"config-url":"/Config/Dashboard","info-url":"/Auth/GetInfo","logout-url":"/Auth/Logout"},{default:Object(i["N"])((function(){return[Object(i["i"])("div",c,[Object(i["i"])(o),Object(i["i"])(r),Object(i["i"])(d)])]})),_:1})])}a("b64b"),a("357f");var s=Object(i["R"])("data-v-fe1b96a6");Object(i["w"])("data-v-fe1b96a6");var o={class:"schedules"},r={class:"sch-nav justify-space-between align-center primary body-2"},d={class:"white--text"},u={key:0,class:"d-flex align-center"},h={class:"sch-nav-options mr-1 pa-0"},f={href:"/help/index",class:"sch-nav-help align-center mr-2",target:"_blank"},b=Object(i["i"])("span",{class:"icon-help-round white"},null,-1);Object(i["u"])();var m=s((function(e,t){var a=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])("div",o,[Object(i["i"])("div",r,[Object(i["i"])("div",d,"Schedules - "+Object(i["F"])(e.userFullName),1),e.user?(Object(i["t"])(),Object(i["e"])("div",u,[Object(i["i"])("ul",h,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.authorizedMenus,(function(t){return Object(i["t"])(),Object(i["e"])("li",{class:["nav-box mr-1 py-1 px-2 my-1 caption",{selected:t.selected}],onClick:function(a){return e.selectMenu(t)}},[Object(i["i"])("div",null,Object(i["F"])(t.display),1)],10,["onClick"])})),256))]),Object(i["O"])(Object(i["i"])("a",f,[b],512),[[a,{content:"Help"},void 0,{top:!0}]])])):Object(i["f"])("",!0)])])})),p=(a("99af"),a("159b"),a("7db0"),a("1da1")),O=(a("96cf"),a("d3b7"),a("bc3a")),j=a.n(O),y=!1;Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST&&(y=!0,j.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST),j.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",j.a.interceptors.response.use((function(e){return e}),(function(e){return e&&e.response&&401==e.response.status&&location.reload(),Promise.reject(e)}));var v=function(e){return j.a.post("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))},g=function(){return j.a.post("Auth/GetInfo").then((function(e){return e.data}))};function D(){return j.a.get("StandardSchedules").then((function(e){return e.data}))}function S(){return k.apply(this,arguments)}function k(){return k=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("ShiftTypes").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function w(e){return j.a.get("ScheduleDetail/".concat(e)).then((function(e){return e.data}))}function A(e){return j.a.post("PostSchedule",e).then((function(e){return e.data}))}function x(e){return j.a.get("DeleteSchedule/".concat(e)).then((function(e){return e.data}))}function T(e){return j.a.post("AllocateSchedule",e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function E(e,t){return j.a.get("RemoveEmployeeWorkSchedule/".concat(t,"/").concat(e)).then((function(e){return e.data}))}function C(e,t){return j.a.post("UpdateEmployeeWorkSchedule/".concat(t),e).then((function(e){if(e.data.Messages&&e.data.Messages.length>=1)throw new Error(e.data.Messages[0].Message);return e.data}))}function F(){return j.a.get("EmployeeOptions").then((function(e){return e.data}))}function M(e){return j.a.get("EmployeeWorkSchedules/".concat(e)).then((function(e){return e.data}))}function N(e){return j.a.get("EmployeeWorkScheduleDetail/".concat(e)).then((function(e){return e.data}))}function L(e){return j.a.get("FlexScheduleDetail/".concat(e)).then((function(e){return e.data}))}function I(e){return j.a.get("FlexSchedules",{params:e}).then((function(e){return e.data}))}function P(e){return j.a.post("CreateFlexSchedule/",e).then((function(e){return e.data}))}function R(e,t){return j.a.put("UpdateFlexSchedule/".concat(e),t).then((function(e){return e.data}))}function Y(e){return j.a.patch("PatchFlexSchedule",e).then((function(e){return e.data}))}function B(e){return j.a.get("GetManagedEmployees/".concat(e,"?fields=EmployeeNo,CommonName,StdHoursPerWeek,PositionCode,PositionTitle")).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))}function W(e){return j.a.get("GetPositions/".concat(e)).then((function(e){return e.data}))}function H(){return j.a.get("GetCostElements").then((function(e){return e.data}))}function U(e){return j.a.get("GetManagedLeaves",{params:e}).then((function(e){return"string"===typeof e.data?""===e.data?(e.data=[],e.data):JSON.parse(e.data):e.data}))}function V(e){return j.a.post("CopyFlexSchedule",e).then((function(e){return e.data}))}function $(e){return j.a.delete("DeleteFlexSchedule/".concat(e)).then((function(e){return e.data}))}function K(e){return j.a.post("CreateAvailability",e).then((function(e){return e.data}))}function _(e){return j.a.get("GetAvailability",{params:{employeeNo:e}}).then((function(e){return e.data}))}function z(e){return j.a.patch("PatchAvailability",e).then((function(e){return e.data}))}function Q(e){return j.a.delete("DeleteAvailability/".concat(e)).then((function(e){return e.data}))}function G(e){return j.a.get("GetAdditionalDetails",{params:{employeeNo:e}}).then((function(e){return e.data}))}y&&(v=function(e){return console.log("data",e),j.a.get("EmployeeWorkSchedule",e).then((function(e){return"string"===typeof e.data&&""!==e.data?JSON.parse(e.data):e.data}))},g=function(){return j.a.get("Auth/GetInfo").then((function(e){return e.data}))});var J={EmployeeWorkSchedule:v,AuthGetInfo:g,StandardSchedules:D,ShiftTypes:S,ScheduleDetail:w,PostSchedule:A,DeleteSchedule:x,AllocateSchedule:T,RemoveEmployeeWorkSchedule:E,UpdateEmpSchedRequest:C,EmployeesList:F,EmpWorkScheds:M,EmpSchedDetailRequest:N,GetFlexScheduleDetail:L,GetFlexSchedules:I,CreateFlexSchedule:P,UpdateFlexSchedule:R,PatchFlexSchedule:Y,GetManagedEmployees:B,GetPosition:W,GetCostelements:H,GetManagedLeaves:U,CopyFlexSchedule:V,DeleteFlexSchedule:$,CreateAvailability:K,GetAvailabilities:_,PatchAvailabilities:z,DeleteAvailabilities:Q,GetEmployeeExtraDetail:G},q=Object(i["j"])({name:"scheduleNavigation",data:function(){return{user:null,menus:[{text:"Work Schedule",display:"My Schedules",route:"/my-schedules",selected:!1,default:!0},{text:"Availability",display:"Availability",route:"/Availability",selected:!1,default:!1},{text:"Flex Schedule",display:"Flexi Schedules",route:"/flex-schedule",selected:!1,default:!1},{text:"Schedule Management",display:"Team Schedules",route:"/team-schedules",selected:!1,default:!1},{text:"Employee Allocation",display:"Employee Allocations",route:"/employee-allocations",selected:!1,default:!1}],selectedMenu:null}},computed:{userFullName:function(){var e=this.user;return e?"".concat(e.FirstName," ").concat(e.LastName):""},authorizedMenus:function(){for(var e=[],t=this.user.AccessibleMenus,a=this.menus,n=0;n<this.menus.length;n++){var i=a[n];-1!=t.indexOf(i.text)&&e.push(i)}return e}},methods:{selectMenu:function(e){this.$router.push(e.route),this.menus.forEach((function(e){e.selected=!1})),e.selected=!0},isSelected:function(e){return this.selectedMenu&&this.selectedMenu.text==e}},mounted:function(){var e=this;if(!window.Affinity||window.Affinity&&!window.Affinity.user)console.log("no affinity requesting authInfo"),J.AuthGetInfo().then((function(t){e.user=t}));else{console.log("loading user from Affinity lib"),this.user=window.Affinity.user;var t=this.menus.find((function(t){return t.route===e.$route.path}));if(!t){var a=this.menus.find((function(e){return!0===e.default}));this.selectMenu(a)}}}});a("a33d");q.render=m,q.__scopeId="data-v-fe1b96a6";var X=q,Z=Object(i["R"])("data-v-9b88c2bc");Object(i["w"])("data-v-9b88c2bc");var ee={class:"promt-box"},te={key:0,class:"mr-2 d-inline"},ae=Object(i["i"])("img",{class:"loader-icon",src:"data:image/gif;base64,R0lGODlhEAAQAPQAADMzM8zMzDs7O3h4eERERKGhoYKCgszMzJaWlra2tmNjY1lZWb+/v21tbcjIyKqqqoyMjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="},null,-1),ne={key:0,class:"promptButtons mt-4"},ie={class:"label text-capitalize"},ce=Object(i["i"])("span",{class:""}," ",-1),le={class:"label text-capitalize"};Object(i["u"])();var se=Z((function(e,t,a,n,c,l){var s=Object(i["B"])("modal");return Object(i["t"])(),Object(i["e"])(s,{ref:"alertModalRef",noBox:!0},{body:Z((function(){return[Object(i["i"])("div",ee,[Object(i["i"])("div",null,[e.showLoader?(Object(i["t"])(),Object(i["e"])("div",te,[ae])):Object(i["f"])("",!0),Object(i["i"])("div",{class:"content ",innerHTML:e.message},null,8,["innerHTML"])]),e.showButtons?(Object(i["t"])(),Object(i["e"])("div",ne,[Object(i["i"])("button",{type:"button",class:["orange white--text small",{"mr-4":e.showCancel}],tabindex:"9999998",onClick:t[1]||(t[1]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},[Object(i["i"])("span",ie,Object(i["F"])(e.confirmButtonText),1)],2),ce,e.showCancel?(Object(i["t"])(),Object(i["e"])("button",{key:0,class:"grey white--text small",small:"",tabindex:"9999999",onClick:t[2]||(t[2]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},[Object(i["i"])("span",le,Object(i["F"])(e.cancelButtonText),1)])):Object(i["f"])("",!0)])):Object(i["f"])("",!0)])]})),_:1},512)})),oe=Object(i["R"])("data-v-6c97dca8");Object(i["w"])("data-v-6c97dca8");var re={class:"modal-wrapper"},de={class:"modal-header"},ue={class:"modal-body"},he={class:"modal-footer"};Object(i["u"])();var fe=oe((function(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])(i["b"],{name:"modal"},{default:oe((function(){return[Object(i["i"])("div",null,[e.show?(Object(i["t"])(),Object(i["e"])("div",{key:0,class:"modal-mask",style:[e.modalIndex?{"z-index":e.modalIndex}:""]},[Object(i["i"])("div",re,[Object(i["i"])("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=function(){return e.clickWrapper&&e.clickWrapper.apply(e,arguments)})}),Object(i["i"])("div",{class:["modal-box",{"no-modal-box":e.noBox}],style:e.getCustomPosition()},[Object(i["i"])("div",de,[Object(i["A"])(e.$slots,"header",{},void 0,!0)]),Object(i["i"])("div",ue,[Object(i["A"])(e.$slots,"body",{},void 0,!0)]),Object(i["i"])("div",he,[Object(i["A"])(e.$slots,"footer",{},void 0,!0)])],6)])],4)):Object(i["f"])("",!0)])]})),_:3})})),be=(a("a9e3"),Object(i["j"])({name:"modal",props:{customPosition:{type:Boolean,default:!1},top:{type:Number},left:{type:Number},noBox:{type:Boolean},modalIndex:{type:Number}},data:function(){return{show:!1}},methods:{toggleShow:function(e){this.show=!0===e||!1===e?e:!this.show},clickWrapper:function(){this.show=!1,this.$emit("cancel")},getCustomPosition:function(){if(this.customPosition){var e={position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px")};return e}return""}}}));a("7f94");be.render=fe,be.__scopeId="data-v-6c97dca8";var me=be,pe=Object(i["j"])({name:"alert",components:{Modal:me},data:function(){return{dialog:!1,message:"some message ",showLoader:!1,showButtons:!1,showCancel:!1,confirmButtonText:"Ok",cancelButtonText:"Cancel"}},mounted:function(){var e=this;sh.on("alert",(function(t){console.log("emitter alert"),e.dialog=!0,e.message=t,e.showLoader=!1,e.showButtons=!0})),sh.on("dialog--loading--request",(function(t){console.log("emitter loading request"),e.dialog=!0,e.message=t,e.showCancel=!1,e.showButtons=!1,e.showLoader=!0})),sh.on("clearDialog",(function(){console.log("emitter clear dialog"),e.clearDialog(),e.dialog=!1})),sh.on("dialog",(function(t){console.log("emitter on dialog"),e.toggleShow(),e.dialog=!!t,e.message=t.message,e.showCancel=t.showCancel,e.showButtons=t.showButtons,e.showLoader=t.showLoader,e.confirmButtonText=t.confirmButtonText?t.confirmButtonText:"Ok",e.cancelButtonText=t.cancelButtonText?t.cancelButtonText:"Cancel",t.onOk&&(e.onOk=function(){t.onOk(),e.dialog=!1,e.toggleShow()}),t.onCancel&&(e.onCancel=function(){t.onCancel(),e.dialog=!1,e.toggleShow()})}))},methods:{clearDialog:function(){this.$refs.alertModalRef.toggleShow(!1)},toggleShow:function(){this.$refs.alertModalRef.toggleShow()},onOk:function(){this.$refs.alertModalRef.toggleShow()},onCancel:function(){this.$refs.alertModalRef.toggleShow()}}});a("f962");pe.render=se,pe.__scopeId="data-v-9b88c2bc";var Oe=pe,je={key:0,class:"UIPromtBoxBG"},ye=Object(i["i"])("div",{class:"UIPromtBox loader"},[Object(i["i"])("span",{class:"img-loader"}),Object(i["i"])("span",{class:"content aligncenter"},"Please wait")],-1),ve={key:1,class:"UIPromtBoxBG"},ge={class:"UIPromtBox error-text"},De=Object(i["i"])("br",null,null,-1),Se={key:2,class:"pagewrapper"},ke={class:"pagecontent"},we={class:"contentwrapper"};function Ae(e,t,a,n,c,l){var s=Object(i["B"])("dash-header"),o=Object(i["B"])("navbar"),r=Object(i["B"])("dash-footer");return Object(i["t"])(),Object(i["e"])("div",{class:{dashboard:c.enabled,"show-nav":c.showNav,"hide-nav":c.hideNav}},[c.loading?(Object(i["t"])(),Object(i["e"])("div",je,[ye])):c.error?(Object(i["t"])(),Object(i["e"])("div",ve,[Object(i["i"])("div",ge,[Object(i["i"])("span",null,Object(i["F"])(c.error),1),De,Object(i["i"])("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=function(){return l.reloadPage&&l.reloadPage.apply(l,arguments)})},"Please retry")])])):(Object(i["t"])(),Object(i["e"])("div",Se,[Object(i["i"])(s,{title:l.userFullName,logoUrl:l.logoUrl,onNavtoggle:l.onNavToggle},null,8,["title","logoUrl","onNavtoggle"]),Object(i["i"])(o,{apps:c.apps,"logout-url":a.logoutUrl,onHide:l.onNavHide},null,8,["apps","logout-url","onHide"]),Object(i["i"])("div",ke,[Object(i["i"])("div",we,[Object(i["A"])(e.$slots,"default")])]),Object(i["i"])(r,{version:a.version},null,8,["version"])]))],2)}var xe={class:"dash-header"},Te={id:"desktop-nav-toggle",class:"dash-menu-toggle"},Ee={class:"dash-header-title displayname"},Ce={class:"dash-header-logo"};function Fe(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",xe,[Object(i["i"])("div",{id:"mobile-nav-toggle",class:"dash-menu-toggle",onMousedown:t[2]||(t[2]=Object(i["Q"])((function(){}),["stop"]))},[Object(i["i"])("span",{class:"icon-list",onClick:t[1]||(t[1]=function(t){return e.$emit("navtoggle",!0)})})],32),Object(i["i"])("div",Te,[Object(i["i"])("span",{class:"icon-list",onClick:t[3]||(t[3]=function(t){return e.$emit("navtoggle",!1)})})]),Object(i["i"])("div",Ee,Object(i["F"])(a.title),1),Object(i["i"])("div",Ce,[Object(i["i"])("img",{src:a.logoUrl},null,8,["src"])])])}var Me={props:{title:String,logoUrl:String}};Me.render=Fe;var Ne=Me,Le={class:"top"},Ie={class:"bottom"},Pe=Object(i["i"])("div",{class:"divider"},null,-1),Re=Object(i["i"])("span",{class:"dash-nav-item-inner"},[Object(i["i"])("span",{class:"icon icon-logout"}),Object(i["i"])("span",{class:"label"},"Logout")],-1);function Ye(e,t,a,n,c,l){var s=Object(i["B"])("nav-item"),o=Object(i["B"])("scrollable");return Object(i["t"])(),Object(i["e"])("div",{id:"dash-nav",class:"dash-nav accordion",onMousedown:t[1]||(t[1]=function(){return l.onMouseDown&&l.onMouseDown.apply(l,arguments)})},[Object(i["i"])("div",Le,[Object(i["i"])(o,{"scroll-x":!1},{default:Object(i["N"])((function(){return[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(l.enabledApps,(function(e,t){return Object(i["t"])(),Object(i["e"])(s,{data:e,key:t},null,8,["data"])})),128))]})),_:1})]),Object(i["i"])("div",Ie,[Pe,Object(i["i"])("a",{class:"dash-nav-item",href:l.signoutUrl},[Re],8,["href"])])],32)}var Be=Object(i["i"])("span",{class:"sub-nav-icon icon-arrow-line-small-up"},null,-1),We={class:"label"},He={key:0,ref:"menu",class:"sub-nav"};function Ue(e,t,a,n,c,l){var s=Object(i["B"])("nav-item",!0);return Object(i["t"])(),Object(i["e"])("a",{class:["dash-nav-item",{selected:l.selected,"has-sub-nav":l.hasMenu,expanded:!c.expanding}],href:l.url,target:l.target},[Object(i["i"])("div",{class:"dash-nav-item-inner",onClick:t[1]||(t[1]=function(){return l.toggleMenu&&l.toggleMenu.apply(l,arguments)})},[Be,Object(i["i"])("span",{class:"icon icon-"+a.data.Icon},null,2),Object(i["i"])("span",We,Object(i["F"])(a.data.Text||a.data.Name),1)]),l.hasMenu&&c.expanded?(Object(i["t"])(),Object(i["e"])("div",He,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(a.data.Menu,(function(e,t){return Object(i["t"])(),Object(i["e"])(s,{data:e,"is-owned":!0,key:t},null,8,["data"])})),128))],512)):Object(i["f"])("",!0)],10,["href","target"])}var Ve=a("c909"),$e=a.n(Ve),Ke=a("cffa"),_e=a("5c40"),ze={name:"nav-item",props:{data:{type:Object,default:function(){return{}}},host:String,isOwned:Boolean},data:function(){return{expanded:!1,expanding:!1}},computed:{target:function(){return this.data.External?this.data.Name||"_blank":"_self"},selected:function(){var e=new $e.a(this.url).path().toLowerCase();return!this.isOwned&&Affinity.app==this.data.Name||"/"!==e&&e===window.location.pathname.toLowerCase()||"/cleverforms/inbox"===e&&"/inbox"===window.location.pathname.toLowerCase()||"/cleverforms/template"===e&&"/template"===window.location.pathname.toLowerCase()||"/cleverforms/admin"===e&&"/admin"===window.location.pathname.toLowerCase()},hasMenu:function(){return this.data.Menu&&this.data.Menu.length>0},url:function(){return this.hasMenu?"javascript:void(0);":this.data.Url}},methods:{toggleMenu:function(){var e=this;this.hasMenu&&(this.expanding=!this.expanded,this.expanding?(this.expanded=!0,Object(_e["t"])((function(){Ke["a"].from(e.$refs.menu,{duration:.25,height:0})}))):Ke["a"].to(this.$refs.menu,{duration:.25,height:0,onComplete:function(){e.expanded=!1}}))}},mounted:function(){this.expanded=this.selected&&this.hasMenu,this.expanding=this.expanded}};ze.render=Ue;var Qe=ze,Ge={ref:"container",class:"scrollable"};function Je(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",Ge,[Object(i["A"])(e.$slots,"default")],512)}var qe=a("b7f5"),Xe=a("eec4"),Ze=a.n(Xe),et=(a("7da8"),{props:{scrollX:{type:Boolean,default:!0},scrollY:{type:Boolean,default:!0}},data:function(){return{ps:null,resizeDetector:Ze()({strategy:"scroll"})}},methods:{onResize:function(){this.ps&&this.ps.update(this.$refs.container)}},mounted:function(){this.ps=new qe["a"](this.$refs.container,{suppressScrollX:!this.scrollX,suppressScrollY:!this.scrollY}),this.resizeDetector.listenTo(this.$refs.container,this.onResize);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.listenTo(t,this.onResize)}},beforeUnmount:function(){this.resizeDetector.uninstall(this.$refs.container);for(var e=0;e<this.$slots.default.length;e++){var t=this.$slots.default[e].elm;this.resizeDetector.uninstall(t)}}});et.render=Je;var tt=et,at={props:{apps:Array,logoutUrl:String},data:function(){return{mousedown:!1}},computed:{enabledApps:function(){if(this.apps instanceof Array){var e=[];return this.apps.forEach((function(t){t&&t.Enabled&&e.push(t)})),e}return[]},signoutUrl:function(){if(this.logoutUrl)return this.logoutUrl;for(var e=this.apps[0].Url,t=1;t<this.apps.length;t++){var a=this.apps[t];if(a&&a.Name==Affinity.app)return e+"/Root/ExternalLogout?redirectUrl="+encodeURI(a.Url)}return"/Auth/SignOut"}},methods:{onMouseDown:function(){this.mousedown=!0},onBodyMouseDown:function(e){this.mousedown||this.$emit("hide"),this.mousedown=!1}},created:function(){document.body.addEventListener("mousedown",this.onBodyMouseDown)},beforeDestroy:function(){document.body.removeEventListener("mousedown",this.onBodyMouseDown)},components:{NavItem:Qe,Scrollable:tt}};at.render=Ye;var nt=at,it={class:"dash-footer"},ct={key:0,class:"version"},lt=Object(i["i"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},"Affinity Employer Services",-1),st=Object(i["i"])("a",{href:"http://www.affinityteam.co.nz/",target:"affinity"},[Object(i["i"])("span",{class:"dash-footer-logo"})],-1);function ot(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",it,[a.version?(Object(i["t"])(),Object(i["e"])("span",ct,"Version "+Object(i["F"])(a.version),1)):Object(i["f"])("",!0),Object(i["h"])(" © Copyright "+Object(i["F"])(l.year)+" Affinity - ",1),lt,st])}var rt={props:{version:String},computed:{year:function(){return(new Date).getFullYear()}}};rt.render=ot;var dt=rt,ut=(a("e439"),a("a273"),a("8241"),a("9ede"),a("69af"),{props:{version:String,enableByConfig:Boolean,configUrl:String,infoUrl:String,logoutUrl:String,legacyAuth:Boolean},data:function(){return{user:null,error:null,apps:[{Enabled:!0,Name:"Dashboard",Url:"",Icon:"gauge"}],loading:!0,enabled:!0,showNav:!1,hideNav:!1}},computed:{userFullName:function(){return this.user?"".concat(this.user.FirstName," ").concat(this.user.LastName):""},logoUrl:function(){var e=this.apps[0].Url;return e&&this.user?"".concat(e,"/Root/Logo?company=").concat(this.user.CompanyNo,"&employee=").concat(this.user.EmployeeNo):""}},methods:{authorize:function(e){var t=this;if(console.log("dashboard authorize"),Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_LOCAL1){var a={FirstName:"Norah",LastName:"Barlow",CompanyNo:5004,EmployeeNo:100603,UseDashboard:!0,AccessibleMenus:["Work Schedule","Schedule Management","Employee Allocation"]},n=Affinity.user=this.legacyAuth?{FirstName:a.Firstname,LastName:a.Lastname,PayPoint:a.PayPoint,CompanyNo:a.CompanyNumber,EmployeeNo:a.EmployeeNumber}:a;this.enabled=!this.enableByConfig||n.UseDashboard,e&&e()}else{var i={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.legacyAuth?Affinity.authroot+"/GetUser":this.infoUrl};j()(i).then((function(a){var n=Affinity.user=t.legacyAuth?{FirstName:a.data.Firstname,LastName:a.data.Lastname,PayPoint:a.data.PayPoint,CompanyNo:a.data.CompanyNumber,EmployeeNo:a.data.EmployeeNumber}:a.data;t.enabled=!t.enableByConfig||n.UseDashboard,e&&e()})).catch((function(e){console.log("err",e),t.error="Unable to load the page.",t.loading=!1}))}},getConfig:function(){var e=this,t={method:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AXIOSHOST?"get":"post",url:this.configUrl};j()(t).then((function(t){var a=t.data;e.user=Affinity.user,e.apps[0].Url=a.Url,a.Apps&&a.Apps.forEach((function(t){e.apps.push(t.Link)})),a.Forms&&e.user.EmployeeNo<=5e6&&a.Forms.forEach((function(t){t.Enabled&&e.apps.push(t)})),e.loading=!1,Object(_e["t"])((function(){e.$emit("ready",a)}))})).catch((function(){e.error="Unable to load the page."})).then((function(){e.loading=!1}))},reloadPage:function(){window.location.reload()},onNavToggle:function(e){e?this.showNav=!this.showNav:this.hideNav=!this.hideNav},onNavHide:function(){this.showNav=!1}},created:function(){var e=this;console.log("dashboard created"),this.authorize((function(){e.enabled?e.getConfig():e.loading=!1}))},components:{"dash-header":Ne,navbar:nt,"dash-footer":dt}});a("86cf");ut.render=Ae;var ht=ut,ft=ht,bt=a("5502"),mt={name:"App",components:{Dashboard:ft,schedulesNavigation:X,Alert:Oe},setup:function(){var e=Object(bt["b"])(),t=localStorage.getItem("clientStorageVersion");if("0.11"!==t)localStorage.clear(),localStorage.setItem("clientStorageVersion","0.11"),localStorage.setItem("flexScheduleCellSetting",JSON.stringify(e.state.FlexSchedule.flexScheduleCellSetting));else for(var a=e.state.FlexSchedule.flexScheduleCellSetting,n=JSON.parse(localStorage.getItem("flexScheduleCellSetting")),i=0,c=Object.keys(n);i<c.length;i++){var l=c[i];a[l]&&(a[l]=n[l])}},mounted:function(){console.log("app vue created")}};a("4ffb");mt.render=l;var pt=mt,Ot=a("6c02"),jt={class:"mt-4 mt-md-10"},yt={class:"my-schedules-search-filter d-flex flex-wrap align-center mb-sm-4"},vt={class:" mr-2 mr-sm-6 date-searcher d-flex align-center"},gt=Object(i["i"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date From",-1),Dt=Object(i["i"])("span",{class:"icon-popup white xs-icon"},null,-1),St=Object(i["i"])("span",{class:"icon-calendar white xs-icon"},null,-1),kt=Object(i["i"])("span",{class:"icon-cross white"},null,-1),wt={class:"date-searcher d-flex align-center ml-4"},At=Object(i["i"])("div",{class:"mr-2 d-inline caption bold date-searcher-label"},"Date To",-1),xt=Object(i["i"])("span",{class:"icon-popup white","x-small":""},null,-1),Tt=Object(i["i"])("span",{class:"icon-calendar white","x-small":""},null,-1),Et=Object(i["i"])("span",{class:"icon-cross white","x-small":""},null,-1),Ct=Object(i["i"])("span",{class:"mr-1 icon-printer","x-small":""},null,-1),Ft=Object(i["i"])("span",{class:"text-capitalize"},"Print",-1),Mt={style:{"margin-top":"10px"}},Nt={class:"schedules-data-small",style:{overflow:"auto"}},Lt={class:"",style:{width:"100%"}},It={class:"weekInfoDisplay py-2"},Pt={class:"schedules-data-small-head"},Rt={class:"dayScheduleDisplay"},Yt={key:0},Bt={key:0},Wt={key:1},Ht={key:2},Ut={id:"workSchedules",class:"schedules-data-medium section",style:{overflow:"auto"}},Vt={class:"my-schedules aff-table"},$t=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"Week"),Object(i["i"])("th",null,"Mon"),Object(i["i"])("th",null,"Tue"),Object(i["i"])("th",null,"Wed"),Object(i["i"])("th",null,"Thu"),Object(i["i"])("th",null,"Fri"),Object(i["i"])("th",null,"Sat"),Object(i["i"])("th",null,"Sun")])],-1),Kt={class:"myschedules-tr"},_t={class:"weekInfoRows"},zt={class:"myschedules-td"},Qt={key:0},Gt={class:"bold-text"},Jt={key:0},qt={key:1};function Xt(e,t){var a=Object(i["B"])("date-picker"),n=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])("div",jt,[Object(i["i"])("div",yt,[Object(i["i"])("div",vt,[gt,Object(i["i"])("input",{value:e.$filters.reformatDate(e.fromDate),class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[1]||(t[1]=function(t){return e.updateDateText(t,e.fromDate,"fromDate")}),onClick:t[2]||(t[2]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")}),"onClick:clear":t[3]||(t[3]=function(t){return e.fromDate=null})},null,40,["value"]),Object(i["O"])(Object(i["i"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",onClick:t[4]||(t[4]=function(t){return e.updateDateTime(t,e.fromDate,"fromDate")})},[Dt],512),[[n,{content:"Open calendar"},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("button",{class:"green small px-aff-10 lh-0",onClick:t[5]||(t[5]=function(t){return e.selectDateTodayForFromDate()})},[St],512),[[n,{content:"Set to today"},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("button",{class:"orange small px-aff-10 lh-0",onClick:t[6]||(t[6]=function(t){return e.fromDate=null})},[kt],512),[[n,{content:"Clear"},void 0,{top:!0}]])]),Object(i["i"])("div",wt,[At,Object(i["i"])("input",{value:e.$filters.reformatDate(e.toDate),outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 mr-2 caption",style:{"max-width":"120px"},onChange:t[7]||(t[7]=function(t){return e.updateDateText(t,e.toDate,"toDate")}),onClick:t[8]||(t[8]=function(t){return e.updateDateTime(t,e.toDate,"toDate")}),"onClick:clear":t[9]||(t[9]=function(t){return e.toDate=null})},null,40,["value"]),Object(i["O"])(Object(i["i"])("button",{class:"light-blue small px-aff-10 ml-2 lh-0",tile:"",onClick:t[10]||(t[10]=function(t){return e.updateDateTime(t,e.toDate,"toDate")})},[xt],512),[[n,{content:"Open calendar"},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("button",{class:"green small px-aff-10 lh-0",tile:"",onClick:t[11]||(t[11]=function(t){return e.selectDateTodayForToDate()})},[Tt],512),[[n,{content:"Set to today"},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("button",{class:"orange small px-aff-10 lh-0",tile:"",onClick:t[12]||(t[12]=function(t){return e.toDate=null})},[Et],512),[[n,{content:"Clear"},void 0,{top:!0}]])]),Object(i["i"])("button",{class:"light-blue white--text ml-4 ml-sm-4 mt-sm-0 px-aff-10 small",onClick:t[13]||(t[13]=function(t){return e.printWorkSchedule()})},[Ct,Ft])]),Object(i["i"])("div",Mt,[Object(i["i"])("div",Nt,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.schedules,(function(t){return Object(i["t"])(),Object(i["e"])("div",Lt,[Object(i["i"])("div",It,[Object(i["i"])("div",Pt,[Object(i["i"])("div",null,[Object(i["i"])("h3",null,Object(i["F"])(t.weekName),1)]),Object(i["i"])("div",null,Object(i["F"])(t.weekDateRange),1)])]),(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(t.detailArr,(function(a,n){return Object(i["t"])(),Object(i["e"])("div",Rt,[Object(i["i"])("div",null,Object(i["F"])(t.weekName)+" - "+Object(i["F"])(e.getWeekDayByIndex(n)),1),e.displayScheduleDetail(a)?(Object(i["t"])(),Object(i["e"])("div",Yt,[Object(i["i"])("div",null,Object(i["F"])(a.shiftDescription),1),a.startTime?(Object(i["t"])(),Object(i["e"])("div",Bt,"Start Time:"+Object(i["F"])(a.startTime),1)):Object(i["f"])("",!0),a.finishTime?(Object(i["t"])(),Object(i["e"])("div",Wt,"Finish Time:"+Object(i["F"])(a.finishTime),1)):Object(i["f"])("",!0),a.hours?(Object(i["t"])(),Object(i["e"])("div",Ht,"Hours:"+Object(i["F"])(a.hours),1)):Object(i["f"])("",!0)])):Object(i["f"])("",!0)])})),256))])})),256))]),Object(i["i"])("div",Ut,[Object(i["i"])("div",Vt,[Object(i["i"])("table",null,[$t,Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.schedules,(function(t){return Object(i["t"])(),Object(i["e"])("tr",Kt,[Object(i["i"])("td",_t,[Object(i["i"])("div",null,Object(i["F"])(t.weekName),1),Object(i["i"])("div",null,Object(i["F"])(t.weekDateRange),1)]),(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(t.detailArr,(function(t){return Object(i["t"])(),Object(i["e"])("td",zt,[e.displayScheduleDetail(t)?(Object(i["t"])(),Object(i["e"])("div",Qt,[Object(i["i"])("div",null,Object(i["F"])(t.date),1),Object(i["i"])("div",Gt,Object(i["F"])(t.shiftDescription),1),t.hours?(Object(i["t"])(),Object(i["e"])("div",Jt,"Hours:"+Object(i["F"])(t.hours),1)):Object(i["f"])("",!0),t.startTime?(Object(i["t"])(),Object(i["e"])("div",qt,Object(i["F"])(t.startTime)+" - "+Object(i["F"])(t.finishTime),1)):Object(i["f"])("",!0)])):Object(i["f"])("",!0)])})),256))])})),256))])])])])]),Object(i["i"])(a,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.datePickerTargetDay},null,8,["top","leftInput","date"])])}var Zt=a("c1df"),ea=a.n(Zt);function ta(){sh.emit("dialog",{message:"here is a test dialog",showButtons:!0,showCancel:!0,okColor:"orange"})}function aa(e){sh.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){e.onOk()},onCancel:function(){e.onCancel&&e.onCancel()}})}function na(e){return new Promise((function(t,a){sh.emit("dialog",{dialog:!0,message:e.message,showCancel:!0,showButtons:!0,showLoader:!1,confirmButtonText:e.confirmButtonText?e.confirmButtonText:"Yes",cancelButtonText:e.cancelButtonText?e.cancelButtonText:"No",onOk:function(){t("ok")},onCancel:function(){a("cancel")}})}))}function ia(e){sh.emit("dialog",{dialog:!0,message:e,showLoader:!1,showButtons:!0,onOk:function(){},onCancel:function(){}})}function ca(e){sh.emit("dialog",{dialog:!0,message:e||"Loading",showCancel:!1,showButtons:!1,showLoader:!0})}function la(){sh.emit("clearDialog")}var sa={testDialog:ta,loading:ca,clear:la,checkChange:aa,alert:ia,confirmOrCancel:na},oa=Object(i["R"])("data-v-b371faa2");Object(i["w"])("data-v-b371faa2");var ra={class:"v3-calendar"},da={class:"dp-heading"},ua={class:"db-content"},ha={class:"dp-week-of-day"},fa={class:"dp-week-days"},ba={class:"date-wrapper"};Object(i["u"])();var ma=oa((function(e,t){var a=Object(i["B"])("Modal");return Object(i["t"])(),Object(i["e"])(a,{ref:"ModalRef",top:e.top,left:e.calculateLeft(e.left),customPosition:!(!e.top&&!e.left),onCancel:e.cancelPickDate},{body:oa((function(){return[Object(i["i"])("div",ra,[Object(i["i"])("section",da,[Object(i["i"])("span",{class:"icon-arrow-left",onClick:t[1]||(t[1]=function(){return e.previousMonth&&e.previousMonth.apply(e,arguments)})}),Object(i["i"])("div",null,Object(i["F"])(e.selectedDate.format("YYYY MMM")),1),Object(i["i"])("span",{class:"icon-arrow-right",onClick:t[2]||(t[2]=function(){return e.nextMonth&&e.nextMonth.apply(e,arguments)})})]),Object(i["i"])("section",ua,[Object(i["i"])("div",ha,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.weekOfDays,(function(e){return Object(i["t"])(),Object(i["e"])("span",null,Object(i["F"])(e.shortName),1)})),256))]),Object(i["i"])("div",fa,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.calendarArr,(function(t){return Object(i["t"])(),Object(i["e"])("span",ba,[Object(i["i"])("span",{class:["date-number-cell",{"today-target":e.colorToday(t),"last-month-day":t.lastMonth,"next-month-day":t.nextMonth,selected:t.selected}],onClick:function(a){return e.selectDate(t)}},Object(i["F"])(t.dateNumber),11,["onClick"])])})),256))])])])]})),_:1},8,["top","left","customPosition","onCancel"])})),pa=Object(i["j"])({name:"DatePicker",components:{Modal:me},props:{top:{type:Number},leftInput:{type:Number},date:{type:Object}},data:function(){return{left:0,currentYear:2021,datePickerPromise:null,resolve:null,reject:null,selectedDate:ea()(),weekOfDays:[{fullName:"Sunday",shortName:"Sun",dayNumber:0},{fullName:"Monday",shortName:"Mon",dayNumber:1},{fullName:"Tuesday",shortName:"Tue",dayNumber:2},{fullName:"Wednesday",shortName:"Wed",dayNumber:3},{fullName:"Thursday",shortName:"Thu",dayNumber:4},{fullName:"Friday",shortName:"Fri",dayNumber:5},{fullName:"Saturday",shortName:"Sat",dayNumber:6}]}},setup:function(){var e=Object(i["y"])([]),t=Object(i["y"])();return t.value=ea()().month(),{currentMonth:t,calendarArr:e}},mounted:function(){var e=this;this.calculateMonth(),this.datePickerPromise=new Promise((function(t,a){e.resolve=t,e.reject=a}))},methods:{cancelPickDate:function(){this.reject()},calculateLeft:function(){return this.leftInput?(window.innerWidth<this.leftInput+370?this.left=window.innerWidth-400:this.left=this.leftInput,this.left):""},nextMonth:function(){this.currentMonth=this.currentMonth+1,this.calculateMonth()},previousMonth:function(){this.currentMonth=this.currentMonth-1,this.calculateMonth()},colorToday:function(e){var t=ea()();return t.year()===e.year&&t.month()+1===e.month&&t.date()===e.dateNumber},selectDateOnly:function(e){var t,a=Object(n["a"])(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.year===e.year()&&i.month===e.month()+1&&i.dateNumber===e.date()?i.selected=!0:i.selected=!1}}catch(c){a.e(c)}finally{a.f()}},selectDate:function(e){this.selectedDate=this.selectedDate.date(e.dateNumber);var t,a=Object(n["a"])(this.calendarArr);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.selected=!1}}catch(c){a.e(c)}finally{a.f()}e.selected=!0,this.$refs.ModalRef.toggleShow(),this.resolve(this.selectedDate.clone())},calculateMonth:function(e){e||(e=ea()());var t=e.clone().month(this.currentMonth),a=t.startOf("month").day(),n=t.endOf("month").day(),i=[],c=t.clone().date(0).date(),l=c-(a-1);for(l;l<=c;l++)i.push({year:t.clone().date(0).year(),month:t.clone().date(0).month()+1,dateNumber:l,selected:!1,lastMonth:!0});var s=1,o=t.endOf("month").date();for(s;s<=o;s++)i.push({year:t.year(),month:t.month()+1,dateNumber:s,selected:!1});var r=1,d=7-n-1;for(r;r<=d;r++)i.push({year:t.clone().add(1,"month").year(),month:t.clone().add(1,"month").month()+1,dateNumber:r,selected:!1,nextMonth:!0});this.calendarArr=i,t.endOf("month").date()<=this.selectedDate.date()?this.selectedDate=t.endOf("month").clone():this.selectedDate=t.date(this.selectedDate.date())},toggleShow:function(e){var t=this;return e?(this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year(),this.selectDateOnly(e)):(e=ea()(),this.currentMonth=e.month(),this.selectedDate=e.clone(),this.calculateMonth(e),this.currentYear=e.year()),this.$refs.ModalRef.toggleShow(),this.datePickerPromise=new Promise((function(e,a){t.resolve=e,t.reject=a})),this.waitPickDate()},waitPickDate:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.datePickerPromise);case 1:case"end":return t.stop()}}),t)})))()}}});a("845b");pa.render=ma,pa.__scopeId="data-v-b371faa2";var Oa,ja=pa;(function(e){e["fromDate"]="fromDate",e["toDate"]="toDate"})(Oa||(Oa={}));var ya=Object(i["j"])({name:"mySchedules",components:{DatePicker:ja},data:function(){return{title:"Work Schedule",schedules:[],user:null,datePickerFormat:"dd/MM/yyyy",menu1:!1,menu2:!1,fromDate:null,toDate:null,dateModal:!1,dateModalTop:0,dateModalLeft:0,datePickerTargetDay:ea()(),selectedDateType:Oa.fromDate}},mounted:function(){var e=new Date;e.setHours(0,0,0,0);var t=e.getDate(),a=e.getDay(),n=new Date;n.setHours(0,0,0,0);var i=new Date;i.setHours(0,0,0,0);var c=0==a?7:a;n.setDate(t-(c-1)),i.setDate(t+(7-c)),this.fromDate=ea()(n),this.toDate=ea()(i),this.loadSchedules(this.fromDate,this.toDate)},methods:{updateDateText:function(e,t,a){"toDate"===a?this.toDate=ea()(e.target.value,"DD/MM/YYYY"):this.fromDate=ea()(e.target.value,"DD/MM/YYYY"),this.dateModal=!1},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.selectedDateType=a,this.datePickerTargetDay="toDate"===a?this.toDate?this.toDate:ea()():this.fromDate?this.fromDate:ea()(),this.dateModal=!0,this.openDatePicker()},printWorkSchedule:function(){var e="left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1",t=document.getElementById("workSchedules").innerHTML,a=window.open("","Print",e);a.document.write("<html>"),a.document.write("<head>"),a.document.write('<style type="text/css">table {border-collapse: collapse;}</style>'),a.document.write('<style type="text/css">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>'),a.document.write("</head>"),a.document.write("<body>"),a.document.write(t),a.document.write("</body></html>"),a.document.close(),a.focus(),a.print(),a.close()},loadSchedules:function(e,t){var a=this;if(null!==e&&e.startOf("day"),null!==t&&""!==t&&t.startOf("day"),this.schedules=[],null!==t||null!==e){null!==t&&null===e&&(e=t),null===t&&null!==e&&(t=e);var i={employeeNo:null,fromDate:null,toDate:null};if(null!==e&&null!==t){var c=e.format("DD/MM/YYYY"),l=t.format("DD/MM/YYYY");i={employeeNo:window.Affinity.user.EmployeeNo,fromDate:c,toDate:l}}sa.loading(),J.EmployeeWorkSchedule(i).then((function(e){var t,i=e,c=Object(n["a"])(i);try{for(c.s();!(t=c.n()).done;){var l=t.value;l.detailArr=[],l.detailArr.push(l.mondayScheduleDetail),l.detailArr.push(l.tuesdayScheduleDetail),l.detailArr.push(l.wednesdayScheduleDetail),l.detailArr.push(l.thursdayScheduleDetail),l.detailArr.push(l.fridayScheduleDetail),l.detailArr.push(l.saturdayScheduleDetail),l.detailArr.push(l.sundayScheduleDetail);var s,o=Object(n["a"])(l.detailArr);try{for(o.s();!(s=o.n()).done;){var r=s.value;("12:00 am"===r.finishTime&&"12:00 am"===r.startTime||"12:00 AM"===r.finishTime&&"12:00 AM"===r.startTime)&&(r.finishTime="",r.startTime=""),"0"===r.hours&&(r.hours="",r.shiftDescription="")}}catch(d){o.e(d)}finally{o.f()}}}catch(d){c.e(d)}finally{c.f()}a.schedules=i,sa.clear()})).finally((function(){sa.clear()}))}},displayScheduleDetail:function(e){return 0!==e.hours&&null!==e.hours&&""!==e.hours},selectDateTodayForFromDate:function(){this.fromDate=ea()().startOf("day"),this.toDate=null,this.loadSchedules(this.fromDate,this.toDate)},selectDateTodayForToDate:function(){this.toDate=ea()(),this.toDate.hour(11),this.toDate.minute(59),this.toDate<this.fromDate&&(this.fromDate=null),this.loadSchedules(this.fromDate,this.toDate)},getWeekDayByIndex:function(e){var t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return t[e]},openDatePicker:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:return a=t.sent,e.selectedDateType===Oa.toDate?e.toDate=a:e.selectedDateType===Oa.fromDate&&(e.fromDate=a),e.loadSchedules(e.fromDate,e.toDate),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()}}});a("fcab");ya.render=Xt;var va=ya,ga=Object(i["R"])("data-v-aa61ba0c");Object(i["w"])("data-v-aa61ba0c");var Da={class:"vue-sched-management"},Sa={class:"sched-card-default mr-4 mr-xs-0"},ka=Object(i["i"])("div",null,[Object(i["i"])("h3",null,"Schedules")],-1),wa={key:0,class:"sched-card-default sched-detail-card sche-detail-mt"},Aa={key:0},xa=Object(i["i"])("h3",null,"Create New Schedule",-1),Ta={key:1,class:"d-flex justify-space-between"},Ea=Object(i["i"])("h3",null,"Schedule Details",-1),Ca={key:3,class:"sched-man-allocations mt-4"},Fa=Object(i["i"])("div",{class:"caption font-weight-bold text-start"},"Employee Allocations",-1),Ma={class:"aff-table allowcated-employee-table mt-4"},Na=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"Employee Name"),Object(i["i"])("th",{class:"text-center"},"Date From"),Object(i["i"])("th",{class:"text-center"},"Date To")])],-1),La={class:"text-center"},Ia={class:"text-center"},Pa={class:"d-flex justify-end mt-2"};Object(i["u"])();var Ra=ga((function(e,t){var a=Object(i["B"])("search-schedule"),n=Object(i["B"])("schedule-detail");return Object(i["t"])(),Object(i["e"])("div",Da,[Object(i["O"])(Object(i["i"])("div",Sa,[ka,Object(i["i"])(a,{ref:"searchScheduleRef",onCreateNewSchedule:e.createNewSchedule,onSelectSchedFromSearch:e.selectSchedulesDetail},null,8,["onCreateNewSchedule","onSelectSchedFromSearch"])],512),[[i["L"],!e.createNew]]),e.schedDetail?(Object(i["t"])(),Object(i["e"])("div",wa,[e.createNew?(Object(i["t"])(),Object(i["e"])("div",Aa,[xa])):(Object(i["t"])(),Object(i["e"])("div",Ta,[Ea,Object(i["i"])("span",{class:"icon-cross vp-icon",onClick:t[1]||(t[1]=function(t){return e.closeScheduleDetail(!0)})})])),e.schedDetail?(Object(i["t"])(),Object(i["e"])(n,{key:2,ref:"detail",shiftTypeList:e.shiftTypeList,detail:e.schedDetail,"read-only":0,onCancel:e.cancelScheduleDetail,onReload:e.reloadSchedulesDetail,onScheduleSaved:e.scheduleSaved,onScheduleDeleted:e.scheduleDeleted},null,8,["shiftTypeList","detail","onCancel","onReload","onScheduleSaved","onScheduleDeleted"])):Object(i["f"])("",!0),e.schedDetail&&e.schedDetail.EmpAllocations&&e.schedDetail.EmpAllocations.length>0?(Object(i["t"])(),Object(i["e"])("div",Ca,[Fa,Object(i["i"])("div",Ma,[Object(i["i"])("table",null,[Na,Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.schedDetail.EmpAllocations,(function(t){return Object(i["t"])(),Object(i["e"])("tr",{class:{"hide-none-active-detail":!t.isActive&&e.showActiveSchedule}},[Object(i["i"])("td",null,Object(i["F"])(t.EmployeeName),1),Object(i["i"])("td",La,Object(i["F"])(t.DateFrom|e.date),1),Object(i["i"])("td",Ia,Object(i["F"])(t.DateTo|e.date),1)],2)})),256))])])]),Object(i["i"])("div",Pa,[Object(i["i"])("button",{class:"grey white--text text-capitalize small",onClick:t[2]||(t[2]=function(){return e.toggleShowActiveSchedule&&e.toggleShowActiveSchedule.apply(e,arguments)})},[Object(i["O"])(Object(i["i"])("span",null,"Show Active",512),[[i["L"],!e.showActiveSchedule]]),Object(i["O"])(Object(i["i"])("span",null,"Show All",512),[[i["L"],e.showActiveSchedule]])])])])):Object(i["f"])("",!0)])):Object(i["f"])("",!0)])})),Ya=(a("3ca3"),a("ddb0"),a("d81d"),Object(i["R"])("data-v-30af8fa8"));Object(i["w"])("data-v-30af8fa8");var Ba={class:"default-form sched-detail-form mt-4"},Wa={key:0,class:"caption d-flex"},Ha={class:"d-flex align-center"},Ua=Object(i["i"])("label",{for:"personal",class:"ml-2 cursor-pointer"},"Create Personal Schedule",-1),Va={class:"d-flex align-center ml-6"},$a=Object(i["i"])("label",{for:"team",class:"ml-2 cursor-pointer"},"Create Team Schedule",-1),Ka={class:"caption d-flex justify-space-between mt-4"},_a={class:"full-width d-flex align-center"},za=Object(i["i"])("div",{class:"form-label"},"Name",-1),Qa={key:1},Ga={key:0,class:"red--text"},Ja={key:1,class:"caption mt-4"},qa=Object(i["i"])("div",{class:"form-label"},[Object(i["i"])("span",null,"Employee No")],-1),Xa={key:0,class:"employeeNo-autoComplete"},Za={class:"caption d-flex mt-4"},en=Object(i["i"])("div",{class:"form-label"},"Description",-1),tn={class:"caption mt-4"},an=Object(i["i"])("div",{class:"form-label"},"Effective Date",-1),nn={class:"caption mt-4 ml-4 d-inline number-of-weeks"},cn=Object(i["i"])("div",{class:"d-inline mr-4 bold-text"},"Number of Weeks",-1),ln=Object(i["i"])("label",{for:"now"},null,-1),sn={class:"mobile-arrow"},on=Object(i["i"])("span",{class:"icon-arrowhead-up arrow-icon"},null,-1),rn=Object(i["i"])("span",{class:"mt-1 icon-arrowhead-down arrow-icon"},null,-1),dn={class:"section-table ui-gridbox-scrollable-titles mt-4"},un={class:"aff-table sched-detail-table"},hn=Object(i["i"])("th",null,"Week",-1),fn=Object(i["i"])("th",null,"Day",-1),bn=Object(i["i"])("th",null,"Hours",-1),mn=Object(i["i"])("th",null,"Start",-1),pn=Object(i["i"])("th",null,"Finish",-1),On={class:"table-date-counter"},jn={class:"mr-2"},yn={key:0,class:"shift-select-td"},vn={class:"schedules-buttons form-row d-flex flex-wrap justify-end mt-2"},gn={key:0},Dn={key:1},Sn=Object(i["i"])("span",{class:"icon-trash mr-1"},null,-1),kn=Object(i["i"])("span",null,"Delete",-1),wn=Object(i["i"])("span",{class:"icon-briefcase mr-1"},null,-1),An=Object(i["i"])("span",null,"Archive",-1),xn=Object(i["i"])("span",{class:"icon-cancel mr-1"},null,-1),Tn=Object(i["i"])("span",null,"Cancel",-1),En=Object(i["i"])("span",{class:"icon-save mr-1"},null,-1),Cn=Object(i["i"])("span",null,"Save",-1);Object(i["u"])();var Fn,Mn,Nn,Ln=Ya((function(e,t){var a=Object(i["B"])("auto-complete"),n=Object(i["B"])("custom-select"),c=Object(i["B"])("date-picker"),l=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])("div",Ba,[Object(i["i"])("form",{onChange:t[23]||(t[23]=function(){return e.formUpdated&&e.formUpdated.apply(e,arguments)}),onSubmit:t[24]||(t[24]=Object(i["Q"])((function(t){return e.formSubmited(t)}),["prevent"]))},[e.isNewSchedule?(Object(i["t"])(),Object(i["e"])("div",Wa,[Object(i["i"])("div",Ha,[Object(i["O"])(Object(i["i"])("input",{type:"radio",id:"personal",value:"personal",class:"cursor-pointer","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.createType=t})},null,512),[[i["J"],e.createType]]),Ua]),Object(i["i"])("div",Va,[Object(i["O"])(Object(i["i"])("input",{type:"radio",id:"team",value:"team",class:"cursor-pointer","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.createType=t})},null,512),[[i["J"],e.createType]]),$a])])):Object(i["f"])("",!0),Object(i["i"])("div",Ka,[Object(i["i"])("div",_a,[za,e.isNewSchedule&&"team"===e.createType?Object(i["O"])((Object(i["t"])(),Object(i["e"])("input",{key:0,class:"caption",name:"name",onKeyup:t[3]||(t[3]=function(t){return e.hasChanges=!0}),counter:"49","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.detail.Name=t})},null,544)),[[i["K"],e.detail.Name]]):e.isNewSchedule&&"personal"===e.createType&&e.detail.EmployeeNo?(Object(i["t"])(),Object(i["e"])("div",Qa,Object(i["F"])("Personal_"+e.detail.EmployeeNo),1)):Object(i["O"])((Object(i["t"])(),Object(i["e"])("div",{key:2,class:"label-detail"},Object(i["F"])(e.detail.Name),513)),[[l,{content:e.detail.Name,delay:{show:3e3,hide:100}},void 0,{top:!0}]])]),e.detail.Archive?(Object(i["t"])(),Object(i["e"])("div",Ga,"Archived")):Object(i["f"])("",!0)]),"personal"===e.createType?(Object(i["t"])(),Object(i["e"])("div",Ja,[qa,e.isNewSchedule&&e.employees&&e.employees.length>0?(Object(i["t"])(),Object(i["e"])("span",Xa,[Object(i["i"])(a,{inputList:e.employees,optionName:"joinedName",onSelected:e.selectedEmployee},null,8,["inputList","onSelected"])])):Object(i["O"])((Object(i["t"])(),Object(i["e"])("div",{key:1,class:"label-detail"},Object(i["F"])(e.detail.EmployeeNo),513)),[[l,{content:e.detail.EmployeeNo,delay:{show:3e3,hide:100}},void 0,{top:!0}]])])):Object(i["f"])("",!0),Object(i["i"])("div",Za,[en,Object(i["O"])(Object(i["i"])("textarea",{class:"caption description-area","hide-details":"",rows:"2",onKeyup:t[5]||(t[5]=function(t){return e.hasChanges=!0}),outlined:"",dense:"","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.detail.Description=t})}," ",544),[[i["K"],e.detail.Description]])]),Object(i["i"])("div",tn,[an,Object(i["i"])("input",{class:"date-input",value:e.$filters.reformatDate(e.detail.StartDate),onClick:t[7]||(t[7]=function(){return e.openDatePicker&&e.openDatePicker.apply(e,arguments)})},null,8,["value"]),Object(i["i"])("div",nn,[cn,ln,Object(i["O"])(Object(i["i"])("input",{class:"number-input",max:"12",min:"1",step:"1",id:"now",name:"now",type:"number","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.detail.NoOfWeeks=t}),onChange:t[9]||(t[9]=function(){return e.updateNoOfWeeks&&e.updateNoOfWeeks.apply(e,arguments)}),onKeydown:t[10]||(t[10]=function(){return e.numLimitKeyDown&&e.numLimitKeyDown.apply(e,arguments)}),style:{width:"60px"}},null,544),[[i["K"],e.detail.NoOfWeeks]]),Object(i["i"])("div",sn,[e.detail.NoOfWeeks<12?(Object(i["t"])(),Object(i["e"])("button",{key:0,type:"button",class:"icon ",color:"grey",onClick:t[11]||(t[11]=function(){return e.increaseNumber&&e.increaseNumber.apply(e,arguments)})},[on])):Object(i["f"])("",!0),e.detail.NoOfWeeks>1?(Object(i["t"])(),Object(i["e"])("button",{key:1,type:"button",class:"ml-2 icon",small:"",color:"grey",onClick:t[12]||(t[12]=function(){return e.reduceNumber&&e.reduceNumber.apply(e,arguments)})},[rn])):Object(i["f"])("",!0)])])]),Object(i["i"])("div",dn,[Object(i["i"])("div",un,[Object(i["i"])("table",{class:["sched-detail-days",{"shift-min-width":e.showShift}]},[Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[hn,fn,bn,mn,pn,Object(i["O"])(Object(i["i"])("th",null,"Shift",512),[[i["L"],e.showShift]])])]),Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.detail.Days,(function(a){return Object(i["t"])(),Object(i["e"])("tr",{key:a.DayNumber},[Object(i["i"])("td",null,[Object(i["O"])(Object(i["i"])("span",null,Object(i["F"])(a.Week),513),[[i["L"],e.isFirstDayOfWeek(a.DayOfWeek)]])]),Object(i["i"])("td",On,[Object(i["i"])("span",jn,Object(i["F"])(a.DayNumber+1),1),Object(i["i"])("span",null,Object(i["F"])(e.getDayOfWeek(a.DayOfWeek)),1)]),Object(i["i"])("td",null,[Object(i["O"])(Object(i["i"])("input",{type:"number",step:"any",min:"0",max:"24","onUpdate:modelValue":function(e){return a.Hours=e},class:"caption sched-detail-table-input",center:"",name:"Sche Hour",outlined:"",dense:"","hide-details":"",autocomplete:"off",error:a.error,onKeydown:t[13]||(t[13]=function(t){return e.numLimitKeyDown(t,!0,!1)}),onChange:function(t){return e.checkHour(a)},"data-test":a.Hours},null,40,["onUpdate:modelValue","error","onChange","data-test"]),[[i["K"],a.Hours,void 0,{number:!0}]])]),Object(i["i"])("td",null,[Object(i["i"])("input",{value:e.$filters.reformatTime(a.StartTime),name:"Sche StartTime",outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"StartTime")},onKeydown:t[14]||(t[14]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[15]||(t[15]=function(t){return e.fromDate=null})},null,40,["value","onChange"])]),Object(i["i"])("td",null,[Object(i["i"])("input",{value:e.$filters.reformatTime(a.FinishTime),name:"Sche FinishTime",outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 caption sched-detail-table-input",onChange:function(t){return e.timeTextChanged(t,a,"FinishTime")},onKeydown:t[16]||(t[16]=function(t){return e.numLimitKeyDown(t,!1,!0)}),"onClick:clear":t[17]||(t[17]=function(t){return e.fromDate=null})},null,40,["value","onChange"])]),e.showShift?(Object(i["t"])(),Object(i["e"])("td",yn,[Object(i["i"])(n,{class:"caption",options:e.shifts,selected:a.ShiftId,onSelectOption:function(t){return e.selectedShift(t,a)}},null,8,["options","selected","onSelectOption"])])):Object(i["f"])("",!0)])})),128))])],2)])]),Object(i["i"])("div",vn,[Object(i["i"])("button",{type:"button",class:"white--text grey caption text-capitalize mr-2 mt-2 small",onClick:t[18]||(t[18]=function(){return e.toggleShift&&e.toggleShift.apply(e,arguments)})},[e.showShift?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("span",gn,"Show Shift")),e.showShift?(Object(i["t"])(),Object(i["e"])("span",Dn,"Hide Shift")):Object(i["f"])("",!0)]),!e.isNewSchedule&&e.detail.EmpAllocations&&0===e.detail.EmpAllocations.length?(Object(i["t"])(),Object(i["e"])("button",{key:0,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[19]||(t[19]=function(t){return e.deleteSchedule()})},[Sn,kn],8,["disabled"])):Object(i["f"])("",!0),e.detail.Archive||e.isNewSchedule||"team"!==e.createType?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("button",{key:1,type:"button",class:"white--text red text-capitalize mr-2 mt-2 small",disabled:e.hasChanges,onClick:t[20]||(t[20]=function(t){return e.archiveSchedule()})},[wn,An],8,["disabled"])),Object(i["i"])("button",{type:"button",class:"white--text grey text-capitalize mr-2 mt-2 small",disabled:!e.hasChanges&&!e.isNewSchedule,onClick:t[21]||(t[21]=function(t){return e.cancelChanges()})},[xn,Tn],8,["disabled"]),Object(i["i"])("button",{type:"button",class:"white--text text-capitalize mr-1 mt-2 green small",disabled:!e.hasChanges,onClick:t[22]||(t[22]=function(t){return e.updateDetail()})},[En,Cn],8,["disabled"])])],32),Object(i["i"])(c,{ref:"DatePickerRef",top:e.dateModalTop,leftInput:e.dateModalLeft,date:e.detail.StartDate},null,8,["top","leftInput","date"])])})),In=a("ade3"),Pn=(a("4de4"),a("caad"),a("2532"),a("a434"),a("3835"));a("c1f9"),a("4fad"),a("fb6a");(function(e){e["getEmployees"]="GET_EMPLOYEES"})(Fn||(Fn={})),function(e){e["setEmployees"]="SET_EMPLOYEES"}(Mn||(Mn={})),function(e){e["getEmployees"]="GET_EMPLOYEES"}(Nn||(Nn={}));var Rn=Object(In["a"])({},Fn.getEmployees,(function(e){return e.employees})),Yn=Object(In["a"])({},Mn.setEmployees,(function(e,t){e.employees=t})),Bn=Object(In["a"])({},Nn.getEmployees,(function(e,t){var a=e.commit,n=e.state;return n.employees.length>0?n.employees:J.GetManagedEmployees(t).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));return a(Mn.setEmployees,t),t}))})),Wn={state:{employees:[],employeesWithPeronsalSche:[]},getters:Rn,mutations:Yn,actions:Bn},Hn=Wn,Un=(a("b0c0"),Object(i["R"])("data-v-309b7c5e"));Object(i["w"])("data-v-309b7c5e");var Vn={class:"custom-select",tabindex:"1",ref:"selectRef"},$n={class:"custom-select-selected"},Kn={class:"custom-select-items"},_n={class:"cell-config"};Object(i["u"])();var zn=Un((function(e,t){return Object(i["t"])(),Object(i["e"])("div",Vn,[Object(i["i"])("div",$n,[Object(i["O"])(Object(i["i"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectSearchInput=t}),onKeyup:t[2]||(t[2]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[i["K"],e.selectSearchInput]])]),Object(i["i"])("div",Kn,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.dropDownList,(function(t,a){return Object(i["t"])(),Object(i["e"])("div",{class:["custom-select-item",{targeting:t.targeting}],ref:"selectDropdownRef",key:a,tabindex:a+99,onClick:function(a){return e.chooseOption(a,t)}},[Object(i["i"])("div",_n,Object(i["F"])(t.name),1)],10,["tabindex","onClick"])})),128))])],512)})),Qn=Object(i["j"])({name:"AutoComplete",props:{inputList:{type:Array},optionName:{type:String}},data:function(){return{editing:!1,targetingIndex:null}},setup:function(e){e.optionName||console.error("need object, optionName is missing");var t=Object(i["y"])(e.inputList.map((function(t,a){return{targeting:!1,name:t[e.optionName],index:a}}))),a=Object(i["y"])(t.value.slice()),n=Object(i["y"])("");return{originList:t,dropDownList:a,selectSearchInput:n}},methods:{updateSearchList:function(e){var t=this;"ArrowDown"!==e.key?"ArrowUp"!==e.key?"Enter"===e.key&&this.targetingIndex?this.selectFromTarget():this.dropDownList=this.originList.filter((function(e){return e.targeting=!1,e.name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1})):this.moveTargetUp():this.moveTargetDown()},moveTargetDown:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex+1<this.dropDownList.length?(this.targetingIndex++,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex,this.dropDownList.length,this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},moveTargetUp:function(){null!==this.targetingIndex?(this.dropDownList[this.targetingIndex].targeting=!1,this.targetingIndex-1>=0?(this.targetingIndex--,this.dropDownList[this.targetingIndex].targeting=!0):this.targetingIndex-1<0?(this.targetingIndex=this.dropDownList.length-1,this.dropDownList[this.targetingIndex].targeting=!0):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)):(this.targetingIndex=0,this.dropDownList[this.targetingIndex].targeting=!0)},selectFromTarget:function(){this.selectSearchInput=this.dropDownList[this.targetingIndex].name,this.$emit("selected",this.inputList[this.targetingIndex])},chooseOption:function(e,t){this.selectSearchInput=t.name,this.$emit("selected",this.inputList[t.index]),e.target.blur()}}});a("6f09");Qn.render=zn,Qn.__scopeId="data-v-309b7c5e";var Gn=Qn,Jn=a("53ca"),qn=Object(i["R"])("data-v-7e952b10");Object(i["w"])("data-v-7e952b10");var Xn={class:"custom-select",tabindex:"1",ref:"selectRef"},Zn={key:0,class:"custom-select-selected"},ei={key:0},ti={key:1},ai={key:2,class:"custom-select-empty-selected"},ni={key:1,class:"custom-select-selected"},ii={key:0},ci={key:1},li={key:2,class:"custom-select-empty-selected"},si={class:"cell-config"},oi={key:0},ri={key:1};Object(i["u"])();var di=qn((function(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",null,[Object(i["i"])("span",null,[Object(i["i"])("div",Xn,[e.modelValue?(Object(i["t"])(),Object(i["e"])("div",Zn,[e.modelValue&&"object"===Object(Jn["a"])(e.modelValue)&&e.displayKey?(Object(i["t"])(),Object(i["e"])("span",ei,Object(i["F"])(e.modelValue[e.displayKey]),1)):e.modelValue?(Object(i["t"])(),Object(i["e"])("span",ti,Object(i["F"])(e.modelValue),1)):(Object(i["t"])(),Object(i["e"])("span",ai))])):(Object(i["t"])(),Object(i["e"])("div",ni,[e.selected&&"object"===Object(Jn["a"])(e.selected)?(Object(i["t"])(),Object(i["e"])("span",ii,Object(i["F"])(e.selected[e.displayKey]),1)):e.selected?(Object(i["t"])(),Object(i["e"])("span",ci,Object(i["F"])(e.selected),1)):(Object(i["t"])(),Object(i["e"])("span",li))])),Object(i["i"])("div",{class:"custom-select-items",style:{left:e.left+"px"}},[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.options,(function(t,a){return Object(i["t"])(),Object(i["e"])("div",{class:"custom-select-item",key:a,onClick:function(a){e.selectOption(a,t)}},[Object(i["i"])("div",si,[e.displayKey?(Object(i["t"])(),Object(i["e"])("label",oi,Object(i["F"])(t[e.displayKey]),1)):(Object(i["t"])(),Object(i["e"])("label",ri,Object(i["F"])(t),1))])],8,["onClick"])})),128))],4)],512)])])})),ui=Object(i["j"])({name:"CustomSelect",props:{options:{type:Array,default:[]},displayKey:{type:String,default:""},modelValue:{type:[String,Number]},selected:{}},data:function(){return{left:0}},mounted:function(){this.left=this.$refs.selectRef.getClientRects()[0].left},methods:{selectOption:function(e,t){e.target.blur();var a=this.$refs.selectRef;a.blur(),this.modelValue?this.$emit("update:modelValue",t):this.$emit("selectOption",t)}}});a("d3cc");ui.render=di,ui.__scopeId="data-v-7e952b10";var hi=ui,fi=Object(i["j"])({name:"schedule-detail",components:{AutoComplete:Gn,DatePicker:ja,CustomSelect:hi},props:["detail","shiftTypeList","readOnly"],data:function(){return{createType:"team",employees:[],week:1,tablePadding:"0 0;",hasChanges:!1,isDateToCleared:!1,shifts:[],showShift:!0,initialEmpSched:null,startDateMenu:!1,dateModalTop:0,dateModalLeft:0,timePickerTargetDay:null,selectedTimeType:"Start"}},computed:{isNewSchedule:function(){var e=this.detail;return e.Id<=0}},mounted:function(){var e=this;this.shifts=this.shiftTypeList,this.hasChanges=-1==this.detail.Id,this.$emit("dataChanged",this.hasChanges);var t=this.$store.getters[Fn.getEmployees];t=t.filter((function(t){return!e.$store.state.EmployeeModule.employeesWithPeronsalSche.includes(t.employeeNo)})),this.employees=t.map((function(e){return e.joinedName=e.commonName+" "+e.employeeNo,e})),this.remapDays(),this.createType=0===this.detail.ScheduleType?"team":"personal"},watch:Object(In["a"])({},"detail",(function(e,t){this.remapDays(),this.createType=0===this.detail.ScheduleType?"team":"personal",e!=t&&-1==e.Id&&(this.detail.Days=[],this.createNewDays(1,1))})),methods:{selectedShift:function(e,t){t.ShiftId=e,this.hasChanges=!0},formSubmited:function(e){return e.preventDefault(),e.stopPropagation(),!1},increaseNumber:function(){this.detail.NoOfWeeks++,this.updateNoOfWeeks()},reduceNumber:function(){this.detail.NoOfWeeks--,this.updateNoOfWeeks()},toggleShift:function(){this.showShift=!this.showShift},remapDays:function(){for(var e=0,t=ea()(this.detail.StartDate),a=7*this.detail.NoOfWeeks,n=new Array(a),i=0;i<a;i++)i%7==0&&e++,n[i]={DayNumber:i,DayOfWeek:t.day(),Week:e,Date:ea()(t),Hours:0,StartTime:null,FinishTime:null,ShiftId:null},t.add(1,"day");this.showShift=!1,this.detail.Days.map((function(e){e.StartTime&&(n[e.DayNumber].StartTime=ea()(e.StartTime)),e.FinishTime&&(n[e.DayNumber].FinishTime=ea()(e.FinishTime)),n[e.DayNumber].Hours=e.Hours,n[e.DayNumber].ShiftId=e.ShiftId})),this.detail.Days=n,this.detail.StartDate=ea()(this.detail.StartDate),this.hasChanges=!1},timeTextChanged:function(e,t,a){var n=ea()(e.target.value,"HH:mm");if("FinishTime"===a){if(t.FinishTime&&n.hour()===t.FinishTime.hour()&&n.minute()===t.FinishTime.minute())return;if(""===e)return void(t.FinishTime=null);t.FinishTime=n}else{if(t.StartTime&&n.hour()===t.StartTime.hour()&&n.minute()===t.StartTime.minute())return;if(""===e)return void(t.StartTime=null);t.StartTime=n}this.timePickerTargetDay=t,this.autoCalcTime(a),this.hasChanges=!0},autoCalcTime:function(e){var t=this.timePickerTargetDay;if(!t.FinishTime||"00:00"===t.FinishTime.format("HH:mm")||!t.StartTime||"00:00"===t.StartTime.format("HH:mm")||t.Hours&&0!==t.Hours)!t.FinishTime||!t.Hours||t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")?!t.StartTime||!t.Hours||t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")?t.FinishTime&&"00:00"!==t.FinishTime.format("HH:mm")&&t.StartTime&&"00:00"!==t.StartTime.format("HH:mm")&&(t.Hours||0!==t.Hours)&&("StartTime"===e?t.FinishTime=t.StartTime.clone().add(t.Hours,"hours"):"FinishTime"===e&&(t.StartTime=t.FinishTime.clone().subtract(t.Hours,"hours"))):t.FinishTime=t.StartTime.clone().add(t.Hours,"hours"):t.StartTime=t.FinishTime.clone().subtract(t.Hours,"hours");else{t.FinishTime.year(t.StartTime.year()),t.FinishTime.month(t.StartTime.month()),t.FinishTime.day(t.StartTime.day());var a=t.FinishTime.startOf("minute").diff(t.StartTime.startOf("minute"),"hours",!0);t.Hours=Math.round(100*a)/100}},updateDateText:function(e,t){this.startDateMenu=!1,t.set(ea()(e,"DD/MM/YYYY").toObject()),this.remapDays()},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=ea()(e)),this.detail.StartDate=e,this.remapDays()},isFirstDayOfWeek:function(e){var t=ea()(this.detail.StartDate);return e==t.day()},getDayOfWeek:function(e){if(e<0||e>6)return console.error("day No not correct"),"unknown";var t=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];return t[e]},checkHour:function(e){if(this.hasChanges=!0,e.Hours>24)return sa.alert("You can only enter up to 24 hours."),void(e.Hours=24);e.StartTime&&e.Hours&&e.FinishTime||e.StartTime&&e.Hours?e.FinishTime=e.StartTime.clone().add(e.Hours,"hours"):e.Hours&&e.FinishTime&&(e.StartTime=e.FinishTime.clone().add(e.Hours,"hours"))},updateNoOfWeeks:function(e){var t=this.detail.Days.length,a=Math.floor(t/7);if(this.detail.NoOfWeeks>a)this.createNewDays(a+1,this.detail.NoOfWeeks);else{var n=7*this.detail.NoOfWeeks;this.detail.Days.splice(n)}},numLimitKeyDown:function(e,t,a){var n=[8,9,13,46,16,17];n.push(65,67,86,88),t&&n.push(190,110),a&&n.push(186),e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||n.indexOf(e.keyCode)>-1||(e.preventDefault(),e.stopPropagation())},cancelChanges:function(){var e=this;if(this.hasChanges){var t="You haven't saved your changes.  <br /> Are you sure you want to cancel?";sa.checkChange({message:t,confirmButtonText:"Yes",cancelButtonText:"No",onOk:function(){e.hasChanges=!1,e.$emit("cancel")}})}else this.$emit("cancel")},reloadDetail:function(){this.hasChanges&&this.$emit("reload")},createNewDays:function(e,t){if(!(e>t)){var a=e,n=this.detail.Days.length;while(a<=t){var i=ea()(this.detail.StartDate);i.add(n,"day"),this.detail.Days.push({DayNumber:n,DayOfWeek:i.day(),Week:a,Date:i,Hours:0,StartTime:null,FinishTime:null,ShiftId:null,startDateModal:!1,endDateModal:!1}),n++,a=Math.floor(n/7)+1}}},archiveSchedule:function(){this.hasChanges||(this.detail.Archive?sa.alert("Unable to archive schedule, it's already archived."):(this.detail.Archive=!0,this.doUpdateDetail()))},deleteSchedule:function(){var e=this;this.hasChanges||(this.detail.EmpAllocations.length>0?sa.alert("Unable to delete schedule, it's currently allocated to employees"):sh.emit("dialog",{message:"Are you sure you want to permanently delete this work schedule?",showButtons:!0,showCancel:!0,okColor:"red",onOk:function(){e.doDeleteSchedule()},onCancel:function(){}}))},doDeleteSchedule:function(){var e=this;sa.loading(),J.DeleteSchedule(this.detail.Id).then((function(t){e.$emit("schedule-deleted"),sa.clear()}))},updateDetail:function(){this.hasChanges&&this.doUpdateValidation()&&this.doUpdateDetail()},doUpdateValidation:function(){if("team"===this.createType){if(!this.detail.Name&&!this.detail.Description||""===this.detail.Name&&""===this.detail.Description)return sa.alert("Schedule name cannot be blank. <br /> Schedule description cannot be blank."),!1;if(!this.detail.Name||""===this.detail.Name)return sa.alert("Schedule name cannot be blank."),!1}return this.detail.Description&&""!==this.detail.Description?void 0!==this.detail.Name&&null!==this.detail.Name&&this.detail.Name.length>50?(sa.alert("Schedule names must be 50 characters or fewer (including spaces)."),!1):!(void 0!==this.detail.Description&&null!==this.detail.Description&&this.detail.Description.length>50)||(sa.alert("Schedule descriptions must be 50 characters or fewer (including spaces)."),!1):(sa.alert("Schedule description cannot be blank."),!1)},doUpdateDetail:function(){var e=this,t={Id:this.detail.Id,NoOfWeeks:this.detail.NoOfWeeks,StartDate:ea()(this.detail.StartDate).format("DD/MMM/YYYY"),Name:"team"===this.createType?this.detail.Name:"Personal_ "+this.detail.EmployeeNo,EmployeeNo:this.detail.EmployeeNo?this.detail.EmployeeNo:null,ScheduleType:this.detail.EmployeeNo?1:0,IsPersonal:!!this.detail.EmployeeNo,Description:this.detail.Description,Archive:this.detail.Archive,Days:[]};this.detail.Days.map((function(e){(e.Hours>0||null!==e.ShiftId&&""!==e.ShiftId)&&(""===e.ShiftId&&(e.ShiftId=null),t.Days.push({DayNumber:e.DayNumber,StartTime:e.StartTime?e.StartTime.format("HH:mm"):null,FinishTime:e.FinishTime?e.FinishTime.format("HH:mm"):null,Hours:e.Hours>24?24:e.Hours,ShiftId:e.ShiftId}))})),sa.loading(),J.PostSchedule(t).then((function(t){e.$emit("schedule-saved",t.Data),void 0!==e&&void 0!==e.hasChanges&&(e.hasChanges=!1)})).finally((function(){sa.clear()}))},formUpdated:function(){this.hasChanges=!0},openDatePicker:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.dateModalTop=n.bottom,t.dateModalLeft=n.left,a.next=5,t.$refs.DatePickerRef.toggleShow(t.detail.StartDate);case 5:t.detail.StartDate=a.sent,t.remapDays();case 7:case"end":return a.stop()}}),a)})))()},selectedEmployee:function(e){this.detail.EmployeeNo=e.employeeNo,this.detail.Description="".concat(e.commonName," ").concat(e.employeeNo," Personal Schedule")}}});a("6143");fi.render=Ln,fi.__scopeId="data-v-30af8fa8";var bi=fi,mi=Object(i["R"])("data-v-f8aabd3a");Object(i["w"])("data-v-f8aabd3a");var pi={id:"sched-man-list ",class:"sched-man-list mt-4"},Oi={class:"d-flex align-center flex-wrap"},ji={class:"filter-dropdown"},yi={class:"custom-select",tabindex:"1",ref:"selectRef"},vi={class:"custom-select-selected"},gi={class:"custom-select-items"},Di={class:"cell-config"},Si=Object(i["i"])("span",{class:"icon-plus btn-icon white"},null,-1),ki=Object(i["i"])("span",{class:"font-weight-regular text-capitalize white"}," Create",-1),wi={class:"aff-table sche-search-table mt-4"},Ai={class:"ui-grid"},xi=Object(i["h"])("Name "),Ti=Object(i["h"])("Description "),Ei=Object(i["h"])("Weeks "),Ci=Object(i["h"])("H/W "),Fi=Object(i["h"])("Allocated"),Mi={style:{width:"50px"}},Ni={style:{width:"100px"}},Li={class:"sched-search-desc"},Ii={class:"text-center"},Pi={class:"text-center"},Ri={class:"text-center"};Object(i["u"])();var Yi=mi((function(e,t){var a=Object(i["C"])("tooltip");return Object(i["O"])((Object(i["t"])(),Object(i["e"])("div",pi,[Object(i["i"])("div",null,[Object(i["i"])("div",Oi,[Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filters.searchTerm=t}),type:"text",placeholder:"Search for schedules","hide-details":"",class:"sched-search-box body-2 underline-input"},null,512),[[i["K"],e.filters.searchTerm]]),Object(i["i"])("div",ji,[Object(i["i"])("div",yi,[Object(i["i"])("div",vi,Object(i["F"])(e.filters.selected),1),Object(i["i"])("div",gi,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.filters.options,(function(t,a){return Object(i["t"])(),Object(i["e"])("div",{class:"custom-select-item",key:a,tabindex:a+99,onClick:function(a){return e.choseFilter(a,t)}},[Object(i["i"])("div",Di,Object(i["F"])(t),1)],8,["tabindex","onClick"])})),128))])],512)]),Object(i["i"])("button",{class:"blue ml-2 small",onClick:t[2]||(t[2]=function(t){return e.createNewSchedule()})},[Si,ki])])]),Object(i["i"])("div",wi,[Object(i["i"])("table",Ai,[Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",{style:{width:"120px"},onClick:t[3]||(t[3]=function(t){return e.updateSort(0)})},[xi,Object(i["i"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[0],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[0]}},null,2)]),Object(i["i"])("th",{onClick:t[4]||(t[4]=function(t){return e.updateSort(1)})},[Ti,Object(i["i"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[1],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[1]}},null,2)]),Object(i["i"])("th",{style:{width:"70px"},class:"text-center",onClick:t[5]||(t[5]=function(t){return e.updateSort(2)})},[Ei,Object(i["i"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[2],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[2]}},null,2)]),Object(i["i"])("th",{style:{width:"60px"},class:"text-center",onClick:t[6]||(t[6]=function(t){return e.updateSort(3)})},[Ci,Object(i["i"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[3],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[3]}},null,2)]),Object(i["i"])("th",{style:{width:"80px"},class:"text-center",onClick:t[7]||(t[7]=function(t){return e.updateSort(4)})},[Fi,Object(i["i"])("span",{class:{"icon-arrow-line-small-down":"Asc"===e.filters.orderByArrow[4],"icon-arrow-line-small-up":"Desc"===e.filters.orderByArrow[4]}},null,2)])])]),Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.schedList,(function(t){return Object(i["t"])(),Object(i["e"])("tr",{onClick:function(a){return e.selectSchedulesDetail(t)},class:t.classObject},[Object(i["i"])("td",Mi,[Object(i["i"])("div",null,Object(i["F"])(t.Name),1)]),Object(i["O"])(Object(i["i"])("td",Ni,[Object(i["i"])("div",Li,Object(i["F"])(t.Description),1)],512),[[a,{content:t.Description,delay:{show:3e3,hide:100}},void 0,{right:!0}]]),Object(i["i"])("td",Ii,[Object(i["i"])("div",null,Object(i["F"])(t.NoOfWeeks),1)]),Object(i["i"])("td",Pi,[Object(i["i"])("div",null,Object(i["F"])(t.HoursPerWeek),1)]),Object(i["i"])("td",Ri,[Object(i["i"])("div",null,Object(i["F"])(t.Count),1)])],10,["onClick"])})),256))])])])],512)),[[i["L"],!e.createNew]])})),Bi=(a("498a"),a("ac1f"),a("5319"),Object(i["j"])({name:"SearchSchedule",data:function(){return{selectedSched:null,schedList:[],shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showFilters:!0,filters:{searchTerm:"",sort:"Name",sortOptions:["Name","Description","NoOfWeeks","HoursPerWeek","Count"],orderBy:"Asc",orderByArrow:["Asc","Asc","Asc","Asc","Asc"],partTimeSche:!1,fullTimeSche:!0,activeSche:!0,inActiveSche:!1,archivedSche:!1,options:["Show All","Show Active","Show Inactive","Show Archived","Show Personal"],selected:"Show Active",all:!1},searchTermFocus:!1}},mounted:function(){this.showFilters=!0,this.getSchedulesList(),this.$watch("filters",this.refreshFilters,{deep:!0})},methods:{choseFilter:function(e,t){e.target.blur(),this.filters.selected=t;e.target.blur();var a=this.$refs.selectRef;a.blur()},createNewSchedule:function(){this.$emit("createNewSchedule")},selectSchedulesDetail:function(e){this.schedList.map((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedSched=e,this.$emit("selectSchedFromSearch",this.selectedSched)},deselectScheDetail:function(){this.schedList.forEach((function(e){e.classObject.selected=!1})),this.selectedSched=null},toggleFilters:function(){this.showFilters=!this.showFilters},refreshFilters:function(){var e=this,t=this;this.schedList.sort((function(e,a){var n,i,c=1;return"Desc"===t.filters.orderBy&&(c=-1),"string"===typeof e[t.filters.sort]?(n=e[t.filters.sort].toLowerCase(),i=a[t.filters.sort].toLowerCase()):(n=e[t.filters.sort],i=a[t.filters.sort]),n<i?-1*c:n>i?1*c:0}));var a=this.filters.searchTerm.toLowerCase().trim();this.schedList.forEach((function(n){n.classObject.selected=!!t.selectedSched&&t.selectedSched.Id==n.Id,n.classObject.visible=!0,e.filters.all?n.classObject.visible=!0:(n.classObject.visible=e.getDropDownFilterResult(n),n.classObject.visible&&0!=a.length&&(n.classObject.visible=(-1!==n.Name.toLowerCase().indexOf(a)||-1!==n.Description.toLowerCase().indexOf(a))&&n.classObject.visible)),n.classObject.hidden=!n.classObject.visible}))},getDropDownFilterResult:function(e){switch(this.filters.selected){case"Show All":return!0;case"Show Active":return!0===e.isActive&&!1===e.Archive;case"Show Inactive":return!1===e.isActive&&!1===e.Archive;case"Show Archived":return!0===e.Archive;case"Show Personal":return 1===e.ScheduleType}},getSchedulesList:function(){var e=this;sa.loading(),J.StandardSchedules().then((function(t){var a=[],n=[];t.Data.map((function(t){if(t.Name.includes("Personal")){var i=t.Name.replace(/^\D+/g,"");n.push(Number(i))}t.classObject={selected:!1,visible:!0,hidden:!1},e.selectedSched&&e.selectedSched.Id===t.Id&&(e.selectedSched=t,t.classObject.selected=!0),a.push(t.NoOfWeeks)})),a.unshift("All"),e.schedList=t.Data,e.$store.state.EmployeeModule.employeesWithPeronsalSche=n,e.refreshFilters(),sa.clear()}))},updateSort:function(e){this.filters.orderBy=this.filters.orderByArrow[e]="Asc"===this.filters.orderByArrow[e]?"Desc":"Asc",this.filters.sort=this.filters.sortOptions[e],this.filters.orderByArrow.forEach((function(t,a){a!==e&&"Asc"}))}}}));a("2866");Bi.render=Yi,Bi.__scopeId="data-v-f8aabd3a";var Wi=Bi,Hi=Object(i["j"])({name:"schedulesManagement",components:{SearchSchedule:Wi,"schedule-detail":bi},data:function(){return{selectedSched:null,shiftTypeList:[],schedDetail:null,createNew:!1,empListHeight:"",showActiveSchedule:!0,employees:[]}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return sa.loading(),t.next=3,Promise.all([e.getShiftTypeList(),e.getEmployees()]);case 3:sa.clear();case 4:case"end":return t.stop()}}),t)})))()},methods:{getShiftTypeList:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.ShiftTypes();case 3:a=t.sent,e.shiftTypeList=a.map((function(e){return e.ShiftType})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getEmployees:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(Nn.getEmployees,Affinity.user.EmployeeNo);case 3:e.employees=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toggleShowActiveSchedule:function(){this.showActiveSchedule=!this.showActiveSchedule},selectSchedulesDetail:function(e){var t=this;this.$refs.detail&&this.$refs.detail.hasChanges?sa.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.loadScheduleDetail(e)}}):this.loadScheduleDetail(e)},loadScheduleDetail:function(e){var t=this;sa.loading(),J.ScheduleDetail(e.Id).then((function(a){t.schedDetail=a.Data,t.checkEmpAllocationActive(),sa.clear(),t.selectedSched=e}),(function(e){sa.clear(),"Network Error"===e.message?sa.alert("Lost Internet connection. Please try again after reconnect."):sa.alert("Something went wrong")}))},checkEmpAllocationActive:function(){this.schedDetail.EmpAllocations.forEach((function(e){if(e.DateTo){var t=ea()(e.DateFrom),a=ea()(e.DateTo);e.isActive=a.diff(ea()(),"day")>=0&&t.diff(ea()(),"day")<=0}else e.isActive=!0}))},createNewSchedule:function(){this.createNew=!0;var e=ea()();e.hour(0),e.minute(0),e.second(0),this.schedDetail={Id:-1,Name:"",Description:"",NoOfWeeks:1,StartDate:e,Days:[]},this.$refs.detail&&(this.$refs.detail.hasChanges=!0)},cancelScheduleDetail:function(){this.createNew&&(this.createNew=!1),this.schedDetail=null},reloadSchedulesDetail:function(){this.selectedSched?this.selectSchedulesDetail(this.selectedSched):this.schedDetail=null,this.createNew=!1},closeScheduleDetail:function(e){var t=this;if(!e||!this.$refs.detail.hasChanges)return this.schedDetail=null,this.createNew=!1,this.selectedSched=null,void this.$refs.searchScheduleRef.deselectScheDetail();sa.checkChange({message:"There are currently Schedule Detail changes <br /> Do you want to discard your changes?",onOk:function(){t.closeScheduleDetail(!1)}})},scheduleSaved:function(e){this.selectedSched?(this.schedDetail=e,this.selectedSched={Id:e.Id}):this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList(),this.createNew=!1},scheduleDeleted:function(){this.selectedSched=null,this.schedDetail=null,this.$refs.searchScheduleRef.getSchedulesList()}}});a("58be"),a("9557");Hi.render=Ra,Hi.__scopeId="data-v-aa61ba0c";var Ui=Hi,Vi=Object(i["R"])("data-v-5fab70c5");Object(i["w"])("data-v-5fab70c5");var $i={class:"outter-h-scroll"},Ki={class:"fix-content-width"},_i={key:0,class:"emp-detail pa-4 mr-4 ml-4 mr-xs-0"},zi={class:"section"},Qi=Object(i["i"])("div",{class:"d-flex justify-space-between"},[Object(i["i"])("h3",null,"Selected Employees")],-1),Gi={class:"emp-selection-list mt-4 caption"},Ji=Object(i["i"])("span",{class:"icon-calendar white lh-0"},null,-1),qi=Object(i["i"])("span",{class:"icon-minus white lh-0"},null,-1),Xi=Object(i["i"])("span",{class:"icon-minus white lh-0"},null,-1),Zi=Object(i["i"])("span",{class:"icon-calendar white lh-0"},null,-1),ec={class:"schedules-buttons mt-2 d-flex justify-end"},tc=Object(i["i"])("span",{class:"icon-cancel mr-2 vert-mid white lh-0"},null,-1),ac=Object(i["i"])("span",{class:"text-capitalize white "},"Clear",-1),nc=Object(i["i"])("span",{class:"icon-cancel vert-mid white lh-0"},null,-1),ic=Object(i["i"])("span",{class:"text-capitalize white"},"Clear",-1),cc={class:"section mt-4",style:{height:"100%"}},lc=Object(i["i"])("h3",{class:"bold-text"},"Allocate Schedule",-1),sc={class:"mt-4 allocate-sche-form"},oc={class:"custom-select",tabindex:"1",ref:"selectRef"},rc={class:"custom-select-selected"},dc={class:"custom-select-items"},uc={class:"cell-config"},hc={key:0,class:"mt-4"},fc=Object(i["i"])("div",{class:"bold-text"},"Description",-1),bc={class:"caption"},mc={class:"bold-text mt-4"},pc=Object(i["h"])("No. of Weeks: "),Oc={class:"ml-4"},jc={class:"d-flex justify-space-between"},yc={class:"mt-4 date-input-warpper"},vc=Object(i["i"])("div",{class:"bold-text"},"Date From",-1),gc={class:"mt-4 date-input-warpper"},Dc=Object(i["i"])("div",{class:"bold-text"},"Date To",-1),Sc={class:"mt-4"},kc=Object(i["i"])("div",{class:"bold-text"},"Notes",-1),wc={key:1,class:"form-row mt-4"},Ac={class:"label-width"},xc={class:"schedules-buttons mt-4 d-flex justify-end"},Tc=Object(i["i"])("span",{class:"icon-cancel vert-mid lh-0 white--text mr-1"},null,-1),Ec=Object(i["i"])("span",{class:"text-capitalize white--text"},"Cancel",-1),Cc=Object(i["i"])("span",{class:"icon-paperplane vert-mid lh-0 white--text mr-1"},null,-1),Fc=Object(i["i"])("span",{class:"text-capitalize white--text"},"Allocate",-1);Object(i["u"])();var Mc=Vi((function(e,t){var a=Object(i["B"])("search-employee"),n=Object(i["B"])("employee-schedule"),c=Object(i["B"])("date-picker"),l=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])("div",$i,[Object(i["i"])("div",Ki,[Object(i["i"])(a,{class:"mr-4 mr-xs-0",ref:"SearchEmployeeRef",onUpdateSelectedEmpList:e.updateEmpList},null,8,["onUpdateSelectedEmpList"]),e.bulkEmpList.length>0?(Object(i["t"])(),Object(i["e"])("div",_i,[Object(i["i"])("div",zi,[Qi,Object(i["i"])("div",Gi,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.bulkEmpList,(function(t,a){return Object(i["t"])(),Object(i["e"])("div",{class:["d-flex justify-space-between align-center py-1 px-2",{"emp-select-item-odd":a%2}]},[Object(i["i"])("div",null,[Object(i["O"])(Object(i["i"])("span",{class:"list-text"},Object(i["F"])(t.EmployeeName)+" ("+Object(i["F"])(t.EmployeeNo)+")",513),[[l,{content:"Remove from Employee Selection List"},void 0,{right:!0}]])]),Object(i["i"])("div",null,[e.isMobileView?Object(i["f"])("",!0):Object(i["O"])((Object(i["t"])(),Object(i["e"])("button",{key:0,class:"blue small",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},[Ji],8,["onClick"])),[[l,{content:"View Schedule Allocations"},void 0,{right:!0}]]),e.isMobileView?Object(i["f"])("",!0):Object(i["O"])((Object(i["t"])(),Object(i["e"])("button",{key:1,class:"orange small",onClick:function(a){return e.removeEmployee(t)}},[qi],8,["onClick"])),[[l,{content:"Remove from Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(i["t"])(),Object(i["e"])("button",{key:2,class:"orange small",onClick:function(a){return e.removeEmployee(t)}},[Xi],8,["onClick"])):Object(i["f"])("",!0),e.isMobileView?(Object(i["t"])(),Object(i["e"])("button",{key:3,class:"blue ml-1 small",style:{"margin-right":"3px"},onClick:function(a){return e.showScheduleDetail(t)}},[Zi],8,["onClick"])):Object(i["f"])("",!0)])],2)})),256))]),Object(i["i"])("div",ec,[e.isMobileView?Object(i["f"])("",!0):Object(i["O"])((Object(i["t"])(),Object(i["e"])("button",{key:0,class:"button grey small",onClick:t[1]||(t[1]=function(t){return e.clearSelectedEmployee()})},[tc,ac],512)),[[l,{content:"Clear Employee Selection List"},void 0,{right:!0}]]),e.isMobileView?(Object(i["t"])(),Object(i["e"])("button",{key:1,class:"button grey small",onClick:t[2]||(t[2]=function(t){return e.clearSelectedEmployee()})},[nc,ic])):Object(i["f"])("",!0)])]),Object(i["i"])("div",{onSubmit:t[17]||(t[17]=Object(i["Q"])((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[Object(i["i"])("div",cc,[lc,Object(i["i"])("div",sc,[Object(i["i"])("form",null,[Object(i["i"])("div",oc,[Object(i["i"])("div",rc,[Object(i["O"])(Object(i["i"])("input",{class:"custom-select-input",ref:"selectInputRef","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectSearchInput=t}),onKeyup:t[4]||(t[4]=function(){return e.updateSearchList&&e.updateSearchList.apply(e,arguments)})},null,544),[[i["K"],e.selectSearchInput]])]),Object(i["i"])("div",dc,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.cloneSchedList,(function(a,n){return Object(i["t"])(),Object(i["e"])("div",{class:"custom-select-item",ref:"selectDropdownRef",key:n,tabindex:n+99,onKeyup:t[5]||(t[5]=Object(i["P"])((function(){return e.navDownList&&e.navDownList.apply(e,arguments)}),["down"])),onClick:function(t){return e.chooseSchedule(t,a)}},[Object(i["i"])("div",uc,Object(i["F"])(a.Name),1)],40,["tabindex","onClick"])})),128))])],512),e.selectedSchedule&&e.selectedSchedule.Name?(Object(i["t"])(),Object(i["e"])("div",hc,[fc,Object(i["i"])("div",bc,Object(i["F"])(e.selectedSchedule.Description),1),Object(i["i"])("div",mc,[pc,Object(i["i"])("span",Oc,Object(i["F"])(e.selectedSchedule.NoOfWeeks),1)])])):Object(i["f"])("",!0),Object(i["i"])("div",jc,[Object(i["i"])("div",yc,[vc,Object(i["i"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateFrom),class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input",onChange:t[6]||(t[6]=function(t){return e.updateDateText(t,e.schedAllocation.DateFrom)}),onClick:t[7]||(t[7]=function(t){return e.updateDateTime(t,e.schedAllocation.DateFrom,"DateFrom")}),"onClick:clear":t[8]||(t[8]=function(t){return e.fromDate=!1})},null,40,["value"])]),Object(i["i"])("div",gc,[Dc,Object(i["i"])("input",{value:e.$filters.reformatDate(e.schedAllocation.DateTo),class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input",onChange:t[9]||(t[9]=function(t){return e.updateDateText(t,e.schedAllocation.DateTo)}),onClick:t[10]||(t[10]=function(t){return e.updateDateTime(t,e.schedAllocation.DateTo,"DateTo")}),"onClick:clear":t[11]||(t[11]=function(t){return e.toDateMenu=!1})},null,40,["value"])])]),Object(i["i"])("div",Sc,[kc,Object(i["O"])(Object(i["i"])("textarea",{rows:"3",class:"caption",onKeyup:t[12]||(t[12]=function(t){return e.hasChanges=!0}),"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.schedAllocation.Comment=t})}," ",544),[[i["K"],e.schedAllocation.Comment]])]),e.schedAllocation.DateFrom?(Object(i["t"])(),Object(i["e"])("div",wc,[Object(i["i"])("label",Ac,"End existing schedules on "+Object(i["F"])(e.capDate),1),Object(i["O"])(Object(i["i"])("input",{type:"checkbox",value:"1","onUpdate:modelValue":t[14]||(t[14]=function(t){return e.schedAllocation.EndExistingScheds=t})},null,512),[[i["I"],e.schedAllocation.EndExistingScheds]])])):Object(i["f"])("",!0),Object(i["i"])("div",xc,[Object(i["i"])("button",{class:"grey vert-mid small",onClick:t[15]||(t[15]=function(t){return e.closeSchedAllocation()})},[Tc,Ec]),Object(i["i"])("button",{class:"green ml-4 small",onClick:t[16]||(t[16]=function(t){return e.allocateEmployees()})},[Cc,Fc])])])])])],32)])):Object(i["f"])("",!0),e.selectedEmpForDetail?(Object(i["t"])(),Object(i["e"])(n,{key:1,ref:"EmployeeScheduleRef",employee:e.selectedEmpForDetail,onClose:e.resetSelectedEmpForDetail},null,8,["employee","onClose"])):Object(i["f"])("",!0),Object(i["i"])(c,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])])})),Nc=(a("466d"),Object(i["R"])("data-v-1920bd7a"));Object(i["w"])("data-v-1920bd7a");var Lc={class:"emp-workSched-card pa-4"},Ic={class:"d-flex justify-space-between"},Pc={class:"d-flex justify-end align-center mt-4 caption"},Rc=Object(i["i"])("label",{class:"default-line-height"},"Active Only",-1),Yc={key:0,class:"section-table aff-table mt-2"},Bc=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"Schedule Name"),Object(i["i"])("th",{class:"text-center"},"Date From"),Object(i["i"])("th",{class:"text-center"},"Date To")])],-1),Wc={class:"text-center"},Hc={class:"text-center"},Uc={key:1};Object(i["u"])();var Vc=Nc((function(e,t){var a=Object(i["B"])("emp-schedule-detail");return Object(i["t"])(),Object(i["e"])("div",Lc,[Object(i["i"])("div",Ic,[Object(i["i"])("h3",null,Object(i["F"])(e.selectedEmp.EmployeeName)+" ("+Object(i["F"])(e.selectedEmp.EmployeeNo)+")",1),Object(i["i"])("span",{class:"icon-cross vp-icon",onClick:t[1]||(t[1]=function(t){return e.closeEmployeeSchedule(!0)})})]),Object(i["i"])("div",Pc,[Object(i["O"])(Object(i["i"])("input",{class:"override-width mr-2",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.activeOnly=t}),onChange:t[3]||(t[3]=function(){return e.updateActiveOnly&&e.updateActiveOnly.apply(e,arguments)}),"true-value":1,"false-value":0},null,544),[[i["I"],e.activeOnly]]),Rc]),e.empSchedList.length>0?(Object(i["t"])(),Object(i["e"])("div",Yc,[Object(i["i"])("table",null,[Bc,Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.empSchedList,(function(t){return Object(i["t"])(),Object(i["e"])("tr",{class:t.classObject,onClick:function(a){return e.selectEmpSchedCheck(t)}},[Object(i["i"])("td",null,Object(i["F"])(t.WorkSchedName),1),Object(i["i"])("td",Wc,Object(i["F"])(e.$filters.reformatDate(t.DateFrom)),1),Object(i["i"])("td",Hc,Object(i["F"])(e.$filters.reformatDate(t.DateTo)),1)],10,["onClick"])})),256))])])])):(Object(i["t"])(),Object(i["e"])("div",Uc," Work schedule empty.")),e.selectedEmpSched?(Object(i["t"])(),Object(i["e"])(a,{key:2,ref:"empScheDetailRef",empSched:e.selectedEmpSched,onDeleted:e.deleteSelection,onUpdated:e.updatedEmpSchedule},null,8,["empSched","onDeleted","onUpdated"])):Object(i["f"])("",!0)])})),$c=Object(i["R"])("data-v-7d332311");Object(i["w"])("data-v-7d332311");var Kc={key:0,class:"section default-form sched-empSched-form mt-4"},_c=Object(i["i"])("h3",null,"Schedule Details",-1),zc={class:"caption mt-2"},Qc=Object(i["i"])("div",{class:"form-label"},"Name",-1),Gc={class:"label-empSched"},Jc={class:"caption d-flex mt-4"},qc=Object(i["i"])("div",{class:"form-label"},"Number of Weeks",-1),Xc={class:"label-empSched"},Zc={class:"d-flex justify-space-between"},el={class:"caption mt-4"},tl=Object(i["i"])("div",{class:"date-label"},"Date From",-1),al={class:"caption mt-4"},nl=Object(i["i"])("div",{class:"date-label"},"Date To",-1),il={class:"caption mt-4"},cl=Object(i["i"])("div",{class:"date-label"},"Notes",-1),ll={class:"section-table ui-gridbox-scrollable-titles mt-4"},sl={class:"aff-table sched-empSched-table"},ol={class:"sched-empSched-days"},rl=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"Week"),Object(i["i"])("th",null,"Day"),Object(i["i"])("th",{class:"text-center"},"Hours"),Object(i["i"])("th",{class:"text-center"},"Start"),Object(i["i"])("th",{class:"text-center"},"Finish"),Object(i["i"])("th",null,"Shift")])],-1),dl={class:"text-center"},ul={class:"mr-2 days-width"},hl={class:"text-center"},fl={class:"text-center"},bl={class:"px-2"},ml={class:"text-center"},pl={class:"px-2"},Ol={class:"shift-select-td"},jl={class:"schedules-buttons form-row d-flex justify-end mt-4"},yl=Object(i["i"])("span",{class:"icon-briefcase mr-1"},null,-1),vl=Object(i["i"])("span",null,"Remove",-1),gl=Object(i["i"])("span",{class:"icon-cancel mr-1"},null,-1),Dl=Object(i["i"])("span",null,"Cancel",-1),Sl=Object(i["i"])("span",{class:"icon-save mr-1"},null,-1),kl=Object(i["i"])("span",null,"Update",-1);Object(i["u"])();var wl=$c((function(e,t){var a=Object(i["B"])("date-picker");return e.empSchedDetail&&e.empSchedDetail.Detail?(Object(i["t"])(),Object(i["e"])("div",Kc,[_c,Object(i["i"])("form",{onSubmit:t[12]||(t[12]=Object(i["Q"])((function(){return e.submitForm&&e.submitForm.apply(e,arguments)}),["prevent"]))},[Object(i["i"])("div",zc,[Qc,Object(i["i"])("div",Gc,Object(i["F"])(e.empSchedDetail.Detail.Name),1)]),Object(i["i"])("div",Jc,[qc,Object(i["i"])("div",Xc,Object(i["F"])(e.empSchedDetail.Detail.NoOfWeeks),1)]),Object(i["i"])("div",Zc,[Object(i["i"])("div",el,[tl,Object(i["i"])("input",Object(i["n"])({value:e.$filters.reformatDate(e.empSchedDetail.DateFrom)},e.attrs,Object(i["G"])(e.on),{outlined:"",dense:"","hide-details":"",autocomplete:"off",class:"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[1]||(t[1]=function(t){return e.updateDateText(t,e.empSchedDetail.DateFrom)}),onClick:t[2]||(t[2]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateFrom,"DateFrom")}),"onClick:clear":t[3]||(t[3]=function(t){return e.fromDate=!1})}),null,16,["value"])]),Object(i["i"])("div",al,[nl,Object(i["i"])("input",Object(i["n"])({value:e.$filters.reformatDate(e.empSchedDetail.DateTo)},e.attrs,Object(i["G"])(e.on),{autocomplete:"off",outlined:"",dense:"","hide-details":"",class:"d-inline-flex ma-0 pa-0 caption date-input-width date-input","append-icon":"icon-calendar",onChange:t[4]||(t[4]=function(t){return e.updateDateText(t,e.empSchedDetail.DateTo)}),onClick:t[5]||(t[5]=function(t){return e.updateDateTime(t,e.empSchedDetail.DateTo,"DateTo")}),"onClick:clear":t[6]||(t[6]=function(t){return e.toDateMenu=!1})}),null,16,["value"])])]),Object(i["i"])("div",il,[cl,Object(i["O"])(Object(i["i"])("textarea",{class:"caption schedule-textarea",onKeyup:t[7]||(t[7]=function(t){return e.hasChanges=!0}),"hide-details":"",rows:"2",outlined:"",dense:"","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.empSchedDetail.Comment=t})},"\r\n                ",544),[[i["K"],e.empSchedDetail.Comment]])]),Object(i["i"])("div",ll,[Object(i["i"])("div",sl,[Object(i["i"])("table",ol,[rl,Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.empSchedDetail.Detail.Days,(function(t){return Object(i["t"])(),Object(i["e"])("tr",null,[Object(i["i"])("td",dl,[Object(i["O"])(Object(i["i"])("span",null,Object(i["F"])(t.Week),513),[[i["L"],e.isFirstDayOfWeek(t.DayOfWeek)]])]),Object(i["i"])("td",null,[Object(i["i"])("span",ul,Object(i["F"])(t.DayNumber+1),1),Object(i["i"])("span",null,Object(i["F"])(e.getDayOfWeek(t.DayOfWeek)),1)]),Object(i["i"])("td",hl,Object(i["F"])(t.Hours),1),Object(i["i"])("td",fl,[Object(i["i"])("span",bl,Object(i["F"])(e.$filters.reformatTime(t.StartTime)),1)]),Object(i["i"])("td",ml,[Object(i["i"])("span",pl,Object(i["F"])(e.$filters.reformatTime(t.FinishTime)),1)]),Object(i["i"])("td",Ol,Object(i["F"])(t.ShiftId),1)])})),256))])])])]),Object(i["i"])("div",jl,[Object(i["i"])("button",{type:"button",class:"white--text small red text-capitalize mr-2",onClick:t[9]||(t[9]=function(t){return e.RemoveSchedule()})},[yl,vl]),Object(i["i"])("button",{type:"button",class:"white--text small grey text-capitalize mr-2",disabled:!e.hasChanges,onClick:t[10]||(t[10]=function(t){return e.cancelChanges()})},[gl,Dl],8,["disabled"]),Object(i["i"])("button",{type:"button",class:"white--text small green text-capitalize mr-1",disabled:!e.hasChanges,onClick:t[11]||(t[11]=function(t){return e.updateEmpSched()})},[Sl,kl],8,["disabled"])])],32),Object(i["i"])(a,{ref:"DatePickerRef",top:e.dateModalTop,left:e.dateModalLeft},null,8,["top","left"])])):Object(i["f"])("",!0)})),Al=Object(i["j"])({name:"emp-schedule-detail",props:["empSched"],components:{DatePicker:ja},data:function(){return{dateModalTop:null,dateModalLeft:null,datePickerTargetDay:null,dateType:"",empSchedDetail:null,hasChanges:!1,fromDateMenu:!1,toDateMenu:!1,fromDatePickerValue:"",toDatePickerValue:""}},computed:{},mounted:function(){this.$emit("dataChanged",this.hasChanges),this.getEmpSchedDetail()},watch:Object(In["a"])({},"empSched",(function(e,t){e!=t&&(this.empSchedDetail=null,this.hasChanges=null,this.fromDateMenu=!1,this.toDateMenu=!1,this.getEmpSchedDetail())})),methods:{getEmpSchedDetail:function(){var e=this;sa.loading(),J.EmpSchedDetailRequest(this.empSched.EmployeeNo+"/"+this.empSched.Id).then((function(t){if(e.empSchedDetail=t.Data,e.empSchedDetail.Detail){for(var a=0,n=ea()(e.empSchedDetail.Detail.StartDate),i=7*e.empSchedDetail.Detail.NoOfWeeks,c=new Array(i),l=0;l<i;l++)l%7==0&&a++,c[l]={DayNumber:l,DayOfWeek:n.day(),Week:a,Date:ea()(n),Hours:0,StartTime:null,FinishTime:null,ShiftId:null},n.add(1,"day");e.empSchedDetail.Detail.Days.map((function(e){e.StartTime&&(c[e.DayNumber].StartTime=ea()(e.StartTime)),e.FinishTime&&(c[e.DayNumber].FinishTime=ea()(e.FinishTime)),c[e.DayNumber].Hours=e.Hours,c[e.DayNumber].ShiftId=e.ShiftId})),e.empSchedDetail.Detail.Days=c,e.empSchedDetail.Detail.StartDate=ea()(e.empSchedDetail.Detail.StartDate),t.Data.DateFrom&&(e.empSchedDetail.DateFrom=ea()(t.Data.DateFrom,"YYYY-MM-DD")),t.Data.DateTo&&(e.empSchedDetail.DateTo=ea()(t.Data.DateTo,"YYYY-MM-DD")),e.datePickerFormattedFromDate(),e.datePickerFormattedToDate()}})).finally((function(){return sa.clear()}))},submitForm:function(){return!1},updateDateText:function(e,t){this.toDateMenu=!1,t.set(ea()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.fromDatePickerValue=this.empSchedDetail.DateFrom?ea()(this.empSchedDetail.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.empSchedDetail.DateTo?ea()(this.empSchedDetail.DateTo).format("YYYY-MM-DD"):void 0},fromDateDatePickerHandler:function(e){"string"===typeof e&&(e=ea()(e)),this.empSchedDetail.DateFrom=e,this.hasChanges=!0,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=ea()(e)),this.empSchedDetail.DateTo=e,this.hasChanges=!0,this.datePickerFormattedToDate()},isFirstDayOfWeek:function(e){var t=ea()(this.empSchedDetail.Detail.StartDate);return e==t.day()},getDayOfWeek:function(e){if(e<0||e>6)return"unknown";var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[e]},RemoveSchedule:function(){var e=this;sa.checkChange({message:"Are you sure?",onOk:function(){sa.loading(),J.RemoveEmployeeWorkSchedule(e.empSchedDetail.Id,e.empSched.EmployeeNo).then((function(t){e.$emit("deleted")})).finally((function(){return sa.clear()}))}})},cancelChanges:function(){var e=this;if(this.hasChanges){var t="There is currently unsaved schedule changes <br /> Do you want to discard your changes?";sh.emit("dialog",{message:t,showButtons:!0,showCancel:!0,okColor:"orange",onOk:function(){e.getEmpSchedDetail(),e.hasChanges=!1},onCancel:function(){}})}else this.getEmpSchedDetail()},updateEmpSched:function(){var e=this,t=ea()(this.empSchedDetail.DateFrom),a=ea()(this.empSchedDetail.DateTo);if(t&&a&&t>a)sa.alert("<br />Date From cannot be before Date To.");else{sh.emit("dialog",{message:"Updating Employee Schedule",showButtons:!1,showLoader:!0,noClose:!1}),sa.loading();var n={Id:this.empSchedDetail.Id,DateFrom:t?t.format("DD/MMM/YYYY"):null,DateTo:a?a.format("DD/MMM/YYYY"):null,Comment:this.empSchedDetail.Comment};J.UpdateEmpSchedRequest(n,this.empSched.EmployeeNo).then((function(t){sa.clear(),e.$emit("updated")})).catch((function(e){sa.alert(e.message),console.error("err",e)}))}},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.empSchedDetail.DateTo=a:"DateFrom"===e.dateType&&(e.empSchedDetail.DateFrom=a),e.hasChanges=!0;case 5:case"end":return t.stop()}}),t)})))()}}});a("4c7b");Al.render=wl,Al.__scopeId="data-v-7d332311";var xl=Al,Tl=Object(i["j"])({name:"employeeSchedule",components:{EmpScheduleDetail:xl},props:["employee"],data:function(){return{selectedEmp:null,empSchedList:[],activeOnly:!1,selectedEmpSched:null}},setup:function(e){var t=Object(i["y"])(e.employee);return{selectedEmp:t}},mounted:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")},watch:{employee:function(){this.selectedEmp=this.employee,this.selectedEmp&&this.selectedEmp.EmployeeNo?this.getEmpWorkScheds():console.error("employee or employee number missing")}},methods:{selectEmpSchedCheck:function(e){var t=this;this.$refs.empScheDetailRef&&this.$refs.empScheDetailRef.hasChanges?sa.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.selectEmpSched(e)}}):this.selectEmpSched(e)},selectEmpSched:function(e){this.empSchedList.forEach((function(e){e.classObject.selected=!1})),e.classObject.selected=!0,this.selectedEmpSched=e},getEmpWorkScheds:function(){var e=this;sa.loading(),J.EmpWorkScheds(this.selectedEmp.EmployeeNo+(this.activeOnly?"?activeOnly=true":"?activeOnly=false")).then((function(t){t.Data.map((function(e,t){e.classObject={selected:!1,odd:t%2},e.DateFrom=new Date(Date.parse(e.DateFrom)),e.DateTo&&(e.DateTo=new Date(Date.parse(e.DateTo)))})),e.empSchedList=t.Data,sa.clear()}))},updateActiveOnly:function(){this.getEmpWorkScheds()},closeEmployeeSchedule:function(e){var t=this;e&&this.$refs.empScheDetailRef&&(!this.$refs.empScheDetailRef||this.$refs.empScheDetailRef.hasChanges)?sa.checkChange({message:"There are currently Schedule changes <br /> Do you want to discard your changes?",onOk:function(){t.closeEmployeeSchedule(!1)}}):this.$emit("close")},deleteSelection:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()},updatedEmpSchedule:function(){this.selectedEmpSched=null,this.getEmpWorkScheds()}}});a("3e12");Tl.render=Vc,Tl.__scopeId="data-v-1920bd7a";var El=Tl,Cl=Object(i["R"])("data-v-d14d6750");Object(i["w"])("data-v-d14d6750");var Fl={class:"section shadow sched-card-default pa-4"},Ml=Object(i["i"])("h3",null,"Select Employees",-1),Nl={class:"aff-table mt-4"},Ll={class:"ui-grid"},Il={class:"name-text-width"},Pl={class:"current-schedules-width"},Rl={class:"schedule-name"},Yl={class:"schedule-name"},Bl=Object(i["i"])("span",{class:"icon-add-to-list"},null,-1),Wl=Object(i["i"])("span",{class:"icon-add-to-list"},null,-1),Hl=Object(i["i"])("span",{class:"icon-minus white--text small"},null,-1);Object(i["u"])();var Ul=Cl((function(e,t){var a=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])("div",Fl,[Ml,Object(i["O"])(Object(i["i"])("input",{class:"mt-2 caption text-field-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchTerm=t}),"hide-details":"",dense:"",outlined:"",type:"text",placeholder:"Search for employees "},null,512),[[i["K"],e.searchTerm]]),Object(i["i"])("div",Nl,[Object(i["i"])("table",Ll,[Object(i["i"])("tbody",null,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.empList,(function(t){return Object(i["t"])(),Object(i["e"])("tr",{class:t.classObject,onClick:function(a){return e.toggleEmployeeSelect(t)}},[Object(i["i"])("td",null,[Object(i["i"])("span",Il,Object(i["F"])(t.EmployeeName)+" ("+Object(i["F"])(t.EmployeeNo)+")",1),Object(i["i"])("span",Pl,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(t.WorkschedNames,(function(e){return Object(i["t"])(),Object(i["e"])("div",Rl,Object(i["F"])(e),1)})),256)),Object(i["i"])("div",Yl,Object(i["F"])(t.PersonalSchedule),1)])]),Object(i["i"])("td",null,[e.isMobileView||t.classObject.selected?Object(i["f"])("",!0):Object(i["O"])((Object(i["t"])(),Object(i["e"])("button",{key:0,class:"green white--text fsmall",onClick:Object(i["Q"])((function(a){return e.addEmployee(t)}),["stop"])},[Bl],8,["onClick"])),[[a,{content:"Add to Employee Selection List"},void 0,{right:!0}]]),e.isMobileView&&!t.classObject.selected?(Object(i["t"])(),Object(i["e"])("button",{key:1,class:"green white--text fsmall",onClick:Object(i["Q"])((function(a){return e.addEmployee(t)}),["stop"])},[Wl],8,["onClick"])):Object(i["f"])("",!0),t.classObject.selected?Object(i["O"])((Object(i["t"])(),Object(i["e"])("button",{key:2,class:"grey fsmall",onClick:Object(i["Q"])((function(a){return e.removeEmployee(t)}),["stop"])},[Hl],8,["onClick"])),[[a,{content:"Remove Employee From Selection List"},void 0,{right:!0}]]):Object(i["f"])("",!0)])],10,["onClick"])})),256))])])])])})),Vl=(a("25f0"),Object(i["j"])({name:"SearchEmployee",data:function(){return{searchTerm:"",empList:[],selectedEmpList:[],selectedEmp:null,isMobileView:!1}},mounted:function(){navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(console.log("is mobile view true"),this.isMobileView=!0):this.isMobileView=!1,this.getEmployeesList()},watch:{searchTerm:function(e,t){if(t!=e)if(0==e.trim().length)this.empList.forEach((function(e){e.classObject.visible=!0,e.classObject.hidden=!1}));else{var a=e.toLowerCase().trim();this.empList.forEach((function(e){e.classObject.visible=e.EmployeeName&&e.EmployeeName.toLowerCase().indexOf(a)>-1||e.EmployeeNo&&e.EmployeeNo.toString().indexOf(a)>-1,e.classObject.hidden=!e.classObject.visible}))}}},methods:{getEmployeesList:function(){var e=this;sa.loading(),J.EmployeesList().then((function(t){t.Data.map((function(e,t){e.classObject={visible:!0,hidden:!1,selected:!1,odd:t%2}})),e.empList=t.Data})).finally((function(){sa.clear()}))},toggleEmployeeSelect:function(e){e.classObject.selected?this.removeEmployee(e):this.addEmployee(e)},removeEmployee:function(e){e.classObject.selected=!1,this.selectedEmpList.splice(this.selectedEmpList.indexOf(e),1),this.$emit("updateSelectedEmpList",this.selectedEmpList)},addEmployee:function(e){e.classObject.selected=!0,this.selectedEmpList.push(e),this.$emit("updateSelectedEmpList",this.selectedEmpList)},clearSelectedEmployeeList:function(){this.selectedEmpList.forEach((function(e){e.classObject.selected=!1})),this.selectedEmpList=[],this.$emit("updateSelectedEmpList",this.selectedEmpList)}}}));a("1fa8");Vl.render=Ul,Vl.__scopeId="data-v-d14d6750";var $l=Vl,Kl=Object(i["j"])({name:"employeeAllocation",components:{SearchEmployee:$l,EmployeeSchedule:El,DatePicker:ja},data:function(){return{bulkEmpList:[],schedList:[],hasChanges:!1,cloneSchedList:[],selectSearchInput:"",schedAllocation:{WorkschedId:-1,DateFrom:ea()(),DateTo:null,Comment:"",EndExistingScheds:!0},selectedSchedule:{},selectedEmpForDetail:null,startDateMenu:!1,toDateMenu:!1,startDatePickerValue:"",toDatePickerValue:"",datePickerTargetDay:null,dateType:"",isMobileView:!1,dateModalTop:null,dateModalLeft:null}},mounted:function(){var e=this;this.isMobileView=this.checkIsMobileView(),J.StandardSchedules().then((function(t){e.schedList=t.Data.filter((function(e){return!1===e.Archive&&0===e.ScheduleType})),e.cloneSchedList=e.schedList.slice()})),this.$watch("schedAllocation",(function(t,a){t===a&&(e.hasChanges=!0)}),{deep:!0})},computed:{selectedSched:function(){var e=this;if(-1===this.schedAllocation.WorkschedId)return!1;var t=this.schedList;return t.find((function(t){return t.Id===e.schedAllocation.WorkschedId}))},capDate:function(){if(this.schedAllocation.DateFrom){var e=this.schedAllocation,t=ea()(e.DateFrom),a=t.subtract(1,"day");return a.format("DD/MM/YYYY")}}},methods:{navDownList:function(){console.log("nav down list")},updateSearchList:function(e){var t=this;"ArrowDown"===e.key&&this.$refs.selectDropdownRef.focus(),this.cloneSchedList=this.schedList.filter((function(e){return e.Name.toLowerCase().indexOf(t.selectSearchInput.toLowerCase())>-1}))},updateDateText:function(e,t){this.startDateMenu=!1,this.toDateMenu=!1,t.set(ea()(e,"DD/MM/YYYY").toObject()),this.datePickerFormattedFromDate(),this.datePickerFormattedToDate()},datePickerFormattedFromDate:function(){this.startDatePickerValue=this.schedAllocation.DateFrom?ea()(this.schedAllocation.DateFrom).format("YYYY-MM-DD"):void 0},datePickerFormattedToDate:function(){this.toDatePickerValue=this.schedAllocation.DateTo?ea()(this.schedAllocation.DateTo).format("YYYY-MM-DD"):void 0},updateEmpList:function(e){this.bulkEmpList=e},startDateDatePickerHandler:function(e){"string"===typeof e&&(e=ea()(e)),this.schedAllocation.DateFrom=e,this.datePickerFormattedFromDate()},toDateDatePickerHandler:function(e){"string"===typeof e&&(e=ea()(e)),this.schedAllocation.DateTo=e,this.datePickerFormattedToDate()},removeEmployee:function(e){this.$refs.SearchEmployeeRef.removeEmployee(e)},clearSelectedEmployee:function(){var e=this;this.hasChanges?sa.checkChange({message:"There are currently Schedule Allocation changes <br /> Do you want to discard your changes?",onOk:function(){e.$refs.SearchEmployeeRef.clearSelectedEmployeeList(),e.resetSchedAllocation()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},allocateEmployees:function(){var e=this,t="";if((this.selectedSchedule.Id<1||!this.selectedSchedule.Id)&&(t+="<br />Select a schedule that you want to allocate."),this.schedAllocation.DateFrom&&this.schedAllocation.DateTo&&this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo)>0&&(t+="<br />Date To cannot be before Date From."),""==t){var a={WorkschedId:this.selectedSchedule.Id,EmployeeList:[],DateFrom:ea()(this.schedAllocation.DateFrom)?ea()(this.schedAllocation.DateFrom).format("DD/MMM/YYYY"):null,DateTo:ea()(this.schedAllocation.DateTo)?ea()(this.schedAllocation.DateTo).format("DD/MMM/YYYY"):null,Comment:this.schedAllocation.Comment,EndExistingScheds:this.schedAllocation.EndExistingScheds};this.bulkEmpList.length>0&&this.bulkEmpList.forEach((function(e){a.EmployeeList.push(e.EmployeeNo)})),sa.loading(),J.AllocateSchedule(a).then((function(t){e.hasChanges=!1,e.resetSchedAllocation(),sa.clear(),e.$refs.EmployeeScheduleRef&&e.$refs.EmployeeScheduleRef.getEmpWorkScheds()})).catch((function(e){sa.alert(e.message),console.error("err",e)}))}else sa.alert(t)},closeSchedAllocation:function(){var e=this;this.hasChanges?sa.checkChange({message:"You have unsaved changes. Are you sure to discard the changes?",onOk:function(){e.resetSchedAllocation(),e.hasChanges=!1,e.$refs.SearchEmployeeRef.clearSelectedEmployeeList()}}):this.$refs.SearchEmployeeRef.clearSelectedEmployeeList()},showScheduleDetail:function(e){this.selectedEmpForDetail=e},resetSelectedEmpForDetail:function(){this.selectedEmpForDetail=null},resetSchedAllocation:function(){this.hasChanges=!1,this.schedAllocation={WorkschedId:-1,DateFrom:ea()(),DateTo:null,Comment:"",EndExistingScheds:!0}},checkIsMobileView:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},chooseSchedule:function(e,t){e.target.blur(),this.selectedSchedule=t,this.selectSearchInput=this.selectedSchedule.Name;e.target.blur();var a=this.$refs.selectRef;a.blur();var n=this.$refs.selectInputRef;n.blur()},updateDateTime:function(e,t,a){var n=e.target.getClientRects()[0];this.dateModalTop=n.bottom,this.dateModalLeft=n.left,this.datePickerTargetDay=t,this.dateType=a,this.openDatePicker()},openDatePicker:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.DatePickerRef.toggleShow(e.datePickerTargetDay);case 2:a=t.sent,"DateTo"===e.dateType?e.schedAllocation.DateTo=a:"DateFrom"===e.dateType&&(e.schedAllocation.DateFrom=a);case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(){}}});a("902d");Kl.render=Mc,Kl.__scopeId="data-v-5fab70c5";var _l=Kl,zl=(a("b680"),Object(i["R"])("data-v-23fcd77f"));Object(i["w"])("data-v-23fcd77f");var Ql={class:"d-flex mt-4 justify-space-between"},Gl={class:"ml-2"},Jl={class:"weekDetail d-flex align-center"},ql={class:"d-flex align-center status-section"},Xl={key:0},Zl={class:"custom-select",tabindex:"1",ref:"selectRef"},es=Object(i["i"])("span",{class:"inline-block-middle"},"Actions",-1),ts={class:"inline-block-middle ml-1",style:{height:"15px"}},as={class:"action-buttons"},ns={class:"copy2 ml-2 text-capitalize"},is={class:"schedules-data-medium mt-4",style:{overflow:"auto"}},cs={class:"flex-sche-table"},ls={class:"table-head"},ss={class:"schedule-head-grid"},os=Object(i["i"])("div",{class:"table-cell"},null,-1),rs=Object(i["i"])("div",{class:"table-cell"},"Std Hours",-1),ds=Object(i["i"])("div",{class:"table-cell"},"Net Hours",-1),us={class:"table-cell"},hs={class:"table-body"},fs={class:"schedules-arr"},bs={class:"content-cell"},ms={class:"content-cell"};Object(i["u"])();var ps=zl((function(e,t){var a=Object(i["B"])("flex-schedule-cell-control"),n=Object(i["B"])("Icon"),c=Object(i["B"])("dynamic-day-cell"),l=Object(i["B"])("edit-flex-schedule"),s=Object(i["B"])("date-picker"),o=Object(i["B"])("draft-creation-dialog"),r=Object(i["B"])("extra-emp-detail");return Object(i["t"])(),Object(i["e"])(i["a"],null,[Object(i["i"])("div",Ql,[Object(i["i"])("div",Gl,[Object(i["i"])(a)]),Object(i["i"])("div",Jl,[Object(i["i"])("span",{class:"arrow-height mr-4",onClick:t[1]||(t[1]=function(){return e.getLastWeek&&e.getLastWeek.apply(e,arguments)})},[Object(i["i"])(n,{icon:e.$icons.chevronLeft,height:"30",style:{color:"#0000008a"}},null,8,["icon"])]),Object(i["i"])("span",{onClick:t[2]||(t[2]=function(){return e.chooseCalendarDate&&e.chooseCalendarDate.apply(e,arguments)})},Object(i["F"])(e.$filters.ordinalSuffix(e.dayFocus.week()))+" Week, "+Object(i["F"])(e.dayFocus.format("DD/MM/YYYY")),1),Object(i["i"])("span",{class:"arrow-height ml-4",onClick:t[3]||(t[3]=function(){return e.getNextWeek&&e.getNextWeek.apply(e,arguments)})},[Object(i["i"])(n,{icon:e.$icons.chevronRight,height:"30",style:{color:"#0000008a"}},null,8,["icon"])])]),Object(i["i"])("div",ql,["published"!==e.weekStatus?(Object(i["t"])(),Object(i["e"])("div",Xl,[Object(i["i"])("div",null,[Object(i["i"])("span",null,[Object(i["i"])("div",Zl,[Object(i["i"])("div",null,[Object(i["i"])("button",{class:"grey small copy2 white--text",onClick:t[4]||(t[4]=function(){return e.changeDisplayControl&&e.changeDisplayControl.apply(e,arguments)})},[es,Object(i["i"])("span",ts,[Object(i["i"])(n,{icon:e.$icons.chevronDown,height:"15",style:{color:"#FFFF"}},null,8,["icon"])])])]),Object(i["i"])("div",{class:"custom-select-items",style:{left:e.left+"px"}},[Object(i["i"])("div",as,[Object(i["i"])("button",{class:"blue small copy2 white--text",onClick:t[5]||(t[5]=function(){return e.openDraftDialog&&e.openDraftDialog.apply(e,arguments)})},"Copy"),"draft"===e.weekStatus?(Object(i["t"])(),Object(i["e"])("button",{key:0,class:"blue small copy2 mt-2 white--text",onClick:t[6]||(t[6]=function(){return e.publishCurrentWeek&&e.publishCurrentWeek.apply(e,arguments)})},"Publish")):Object(i["f"])("",!0)])],4)],512)])])])):Object(i["f"])("",!0),Object(i["i"])("span",ns," Status: "+Object(i["F"])("published"===e.weekStatus?"published":"draft"),1)])]),Object(i["i"])("div",is,[Object(i["i"])("div",cs,[Object(i["i"])("div",ls,[Object(i["i"])("div",ss,[os,rs,ds,(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.weekDays,(function(e){return Object(i["t"])(),Object(i["e"])("div",us,Object(i["F"])(e.day),1)})),256))])]),Object(i["i"])("div",hs,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.scheduleWeek.keys(),(function(t){return Object(i["t"])(),Object(i["e"])("div",fs,[Object(i["i"])("div",{class:"content-cell content-employee-name",onClick:function(a){return e.openEmployeeDetail(t)}},Object(i["F"])(e.scheduleWeek.get(t).EmployeeName),9,["onClick"]),Object(i["i"])("div",bs,Object(i["F"])(e.scheduleWeek.get(t).StdHoursPerWeek.toFixed(2)),1),Object(i["i"])("div",ms,Object(i["F"])(e.getTotalHour(e.scheduleWeek.get(t).sche)),1),(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.scheduleWeek.get(t).sche,(function(t){return Object(i["t"])(),Object(i["e"])("div",{class:"content-cell",style:t.column},[Object(i["i"])(c,{scheDay:t,onOpenEditDialog:e.openEditDialog},null,8,["scheDay","onOpenEditDialog"])],4)})),256))])})),256))])])]),Object(i["i"])("div",null,[Object(i["i"])(l,{ref:"EditModalRef",isEdit:e.isEditingDialog,weekStatus:e.weekStatus,modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["isEdit","weekStatus","onReload"]),Object(i["i"])(s,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"]),Object(i["i"])(o,{ref:"DraftCreationDialogRef",modalIndex:1999,onReload:e.reloadAfterEdit},null,8,["onReload"]),Object(i["i"])(r,{ref:"ExtraEmpDetailRef",externalDetail:e.externalDetail},null,8,["externalDetail"])])],64)})),Os=(a("4ec9"),Object(i["R"])("data-v-b731d550"));Object(i["w"])("data-v-b731d550");var js={class:"bold"},ys={key:0},vs={key:1},gs=Object(i["h"])(" Schedule "),Ds={class:"edit-form mt-4 copy2"},Ss=Object(i["i"])("label",null,"Start Time",-1),ks=Object(i["i"])("label",null,"Finish Time",-1),ws=Object(i["i"])("div",{class:"mt-4"},null,-1),As=Object(i["i"])("div",null,null,-1),xs=Object(i["i"])("label",null,"Break Length",-1),Ts=Object(i["i"])("label",null,"Net Hours",-1),Es=Object(i["i"])("label",null,"Shift ID",-1),Cs=Object(i["i"])("label",null,"Position",-1),Fs={key:0},Ms={class:"mt-4 full-width d-flex justify-space-between"},Ns=Object(i["i"])("div",null,null,-1),Ls=Object(i["i"])("span",{class:"white"},"Save",-1),Is=Object(i["i"])("span",{class:"white"},"Delete",-1),Ps=Object(i["i"])("span",{class:"white"},"Create",-1),Rs=Object(i["i"])("span",{class:"white"},"Cancel",-1);Object(i["u"])();var Ys,Bs,Ws,Hs=Os((function(e,t){var a=Object(i["B"])("custom-select"),n=Object(i["B"])("Modal");return Object(i["t"])(),Object(i["e"])(n,{ref:"ModalRef"},{header:Os((function(){return[Object(i["i"])("div",null,[Object(i["i"])("h2",js,[e.isEdit?(Object(i["t"])(),Object(i["e"])("span",ys,"Edit")):(Object(i["t"])(),Object(i["e"])("span",vs,"Create Draft")),gs])])]})),body:Os((function(){return[Object(i["i"])("div",null,[Object(i["i"])("div",Ds,[Ss,Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.day.startTime=t}),onChange:t[2]||(t[2]=function(t){return e.updateStartTime(e.day)})},null,544),[[i["K"],e.day.startTime]]),ks,Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.day.endTime=t}),onChange:t[4]||(t[4]=function(t){return e.updateEndTime(e.day)})},null,544),[[i["K"],e.day.endTime]]),ws,As,xs,Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.fixedBreakLength=t}),onChange:t[6]||(t[6]=function(){return e.calcNetHour&&e.calcNetHour.apply(e,arguments)})},null,544),[[i["K"],e.fixedBreakLength,void 0,{lazy:!0}]]),Ts,Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.fixedHours=t})},null,512),[[i["K"],e.fixedHours,void 0,{lazy:!0}]]),Es,Object(i["i"])("div",null,[e.shiftOptions&&e.shiftOptions.length>0?(Object(i["t"])(),Object(i["e"])(a,{key:0,options:e.shiftOptions,displayKey:"description",selected:e.selectedShift,onSelectOption:e.selectShift},null,8,["options","selected","onSelectOption"])):Object(i["f"])("",!0)]),Cs,Object(i["i"])("div",null,[e.positionOptions&&1===e.positionOptions.length?(Object(i["t"])(),Object(i["e"])("span",Fs,Object(i["F"])(e.positionOptions[0].positionTitle),1)):e.positionOptions&&e.positionOptions.length>1?(Object(i["t"])(),Object(i["e"])(a,{key:1,options:e.positionOptions,displayKey:"positionTitle",selected:e.selectedPosition,onSelectOption:e.selectPositionCustom},null,8,["options","selected","onSelectOption"])):Object(i["O"])((Object(i["t"])(),Object(i["e"])("input",{key:2,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.day.position=t})},null,512)),[[i["K"],e.day.position]])])])])]})),footer:Os((function(){return[Object(i["i"])("div",Ms,[Ns,Object(i["i"])("div",null,[e.isEdit?(Object(i["t"])(),Object(i["e"])("button",{key:0,class:"blue normal copy2",onClick:t[9]||(t[9]=function(t){return e.updateSche()})},[Ls])):Object(i["f"])("",!0),e.isEdit?(Object(i["t"])(),Object(i["e"])("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[10]||(t[10]=function(t){return e.confirmIfDeleteSche()})},[Is])):Object(i["f"])("",!0),e.isEdit?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("button",{key:2,class:"blue normal copy2",onClick:t[11]||(t[11]=function(t){return e.createSche()})},[Ps])),Object(i["i"])("button",{class:"ml-2 normal orange copy2",onClick:t[12]||(t[12]=function(t){return e.cancel()})},[Rs])])])]})),_:1},512)})),Us=a("2ef0"),Vs=a.n(Us),$s={date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:""};(function(e){e["loadTargetSchedule"]="LOAD_TARGET_SCHEDULE"})(Bs||(Bs={})),function(e){e["clearForm"]="CLEAR_FORM",e["setScheduleDay"]="SET_SCHEDULE_DAY",e["saveScheduleDayToWeek"]="SAVE_SCHEDULE_DAY_TO_WEEK",e["updateEditConfig"]="UPDATE_EDIT_CONFIG",e["createNewScheduleDay"]="CREATE_NEW_SCHEDULE_DAY"}(Ws||(Ws={}));var Ks=Object(In["a"])({},Bs.loadTargetSchedule,(function(e,t){e.commit;console.log("scheduleId",t),J.GetFlexScheduleDetail(t).then((function(e){console.log("GetFlexScheduleDetail",e)}))})),_s=(Ys={},Object(In["a"])(Ys,Ws.clearForm,(function(e){e.flexScheduleDay=$s})),Object(In["a"])(Ys,Ws.createNewScheduleDay,(function(e,t){e.flexScheduleDay=$s,e.selectedFlexDay=t})),Object(In["a"])(Ys,Ws.setScheduleDay,(function(e,t){console.log("emit",t),e.selectedFlexDay=t,e.flexScheduleDay.startTime=t.startTime,e.flexScheduleDay.endTime=t.endTime,e.flexScheduleDay.hours=t.Hours;var a=Object.fromEntries(Object.entries(t.scheduleDetail).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})));e.flexScheduleDay=Vs.a.merge({},e.flexScheduleDay,a),console.log("state",e.flexScheduleDay)})),Object(In["a"])(Ys,Ws.saveScheduleDayToWeek,(function(e){e.selectedFlexDay?(e.selectedFlexDay.startTime=e.flexScheduleDay.startTime,e.selectedFlexDay.endTime=e.flexScheduleDay.endTime,e.selectedFlexDay.scheduleDetail=Vs.a.merge({},e.selectedFlexDay.scheduleDetail,e.flexScheduleDay)):console.error("missing selected flex day")})),Object(In["a"])(Ys,Ws.updateEditConfig,(function(e,t){e.editFlexScheduleDayConfig=Vs.a.clone(t)})),Ys),zs={state:{selectedDate:ea()(),calendarFocusDate:ea()(),selectedFlexDay:null,flexScheduleDay:{date:"",startTime:"",endTime:"",hours:0,breakLength:0,shiftId:"",position:"",costElement1:"",costElement2:""},editFlexScheduleDayConfig:{startTime:!1,endTime:!1,hours:!1,breakLength:!1,shiftId:!1,position:!1,costElement1:!1,costElement2:!1},scheduleWeek:[],flexScheduleCellSetting:{showHours:{value:!1,name:"Net Hours"},showBreakLength:{value:!1,name:"Break Length"},showShiftId:{value:!1,name:"Shift ID"},showPosition:{value:!1,name:"Position"}}},mutations:_s,actions:Ks},Qs=zs,Gs=Object(i["j"])({name:"EditFlexSchedule",components:{Modal:me,CustomSelect:hi},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{flexScheduleDay:{},selectedPosition:{},selectedShift:{},selectedCostElement1:{},selectedCostElement2:{},day:{}}},setup:function(){var e=Object(bt["b"])();return{shiftOptions:Object(i["c"])((function(){var t={shiftType:"",description:"",isDefault:null,archive:"F"},a=e.state.LookUp.shifts.slice();return a.unshift(t),a})),costElementOptions:Object(i["c"])((function(){return e.state.LookUp.costElements}))}},computed:{positionOptions:function(){var e=this.$store.state.LookUp.positions;return 1===e.length&&(this.selectedPosition=e[0]),e},fixedHours:{get:function(){return this.day.hours.toFixed(2)},set:function(e){this.day.hours=Number(e)}},fixedBreakLength:{get:function(){return this.day.breakLength.toFixed(2)},set:function(e){this.day.breakLength=Number(e)}}},mounted:function(){this.$store;this.day=this.$store.state.FlexSchedule.flexScheduleDay},methods:{selectCostElement1:function(e){this.selectedCostElement1=e},selectCostElement2:function(e){this.selectedCostElement2=e},selectShift:function(e){this.selectedShift=e},selectPositionCustom:function(e){this.selectedPosition=e},selectPosition:function(e,t){this.selectedPosition=t,e.target.blur();var a=this.$refs.selectRef;a.blur()},updateStartTime:function(e){if(!e.startTime.includes(":")){var t=ea()(e.startTime,"Hmm");t.isValid()?(e.startTime=t.format("HH:mm"),this.calcNetHour()):e.startTime="Invalid Time"}},updateEndTime:function(e){if(!e.endTime.includes(":")){var t=ea()(e.endTime,"Hmm");t.isValid()?(e.endTime=t.format("HH:mm"),this.calcNetHour()):e.endTime="Invalid Time"}},calcNetHour:function(){if("Invalid Time"!==this.day.startTime&&"Invalid Time"!==this.day.endTime&&this.day.startTime&&this.day.endTime){var e=ea()(this.day.startTime,"H:mm"),t=ea()(this.day.endTime,"H:mm"),a=t.diff(e,"hours");this.day.breakLength?this.day.hours=a-this.day.breakLength:this.day.hours=a}},clearForm:function(){this.$store.commit(Ws.clearForm)},cancel:function(){this.$store.commit(Ws.clearForm),this.toggleShow()},updateSche:function(){var e=this;sa.loading();var t={Id:this.$store.state.FlexSchedule.selectedFlexDay.id,EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),StartTime:this.day.startTime,EndTime:this.day.endTime,Hours:this.day.hours,PublishStatus:this.weekStatus===gd.published?gd.published:gd.draft,ScheduleData:{ShiftId:this.selectedShift.shiftType,BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:void 0,CostElement2:this.selectedCostElement1?this.selectedCostElement2.id:void 0}};J.PatchFlexSchedule([t]).then((function(t){e.$emit("reload"),sa.clear()}),(function(){sa.clear(),sa.alert("Something went wrong. Update Schedule failed")})),this.$store.commit(Ws.saveScheduleDayToWeek),this.toggleShow()},createSche:function(){var e=this;sa.loading();var t=[{EmployeeNo:this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,Date:this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format("MM/DD/YYYY"),StartTime:this.day.startTime,EndTime:this.day.endTime,Hours:this.day.hours,PublishStatus:this.weekStatus===gd.published?gd.published:gd.draft,ScheduleData:{ShiftId:this.selectedShift.shiftType?this.selectedShift.shiftType:"",BreakLength:this.day.breakLength,Position:this.selectedPosition.positionCode,CostElement1:this.selectedCostElement1?this.selectedCostElement1.id:"",CostElement2:this.selectedCostElement2?this.selectedCostElement2.id:""}}];J.CreateFlexSchedule(t).then((function(t){e.$store.commit(Ws.saveScheduleDayToWeek),e.$emit("reload"),sa.clear(),e.toggleShow()}),(function(e){sa.clear(),sa.alert("Something went wrong. Create Schedule failed")}))},confirmIfDeleteSche:function(){var e=this;sa.confirmOrCancel({message:"Are you sure you want to delete this schedule?"}).then((function(){e.deleteSche(e.$store.state.FlexSchedule.selectedFlexDay.id)}))},deleteSche:function(e){var t=this;J.DeleteFlexSchedule(e).then((function(e){t.$emit("reload"),t.toggleShow()}),(function(e){sa.alert("Something went wrong. Delete Schedule failed")})).finally((function(){}))},openEdit:function(){var e,t=this;this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(e=this.shiftOptions.find((function(e){return e.shiftType===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId}))),e&&(this.selectedShift=e),this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData&&(this.selectedCostElement1=this.costElementOptions.find((function(e){return e.id===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1})),this.selectedCostElement2=this.costElementOptions.find((function(e){return e.id===t.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2}))),this.day=this.$store.state.FlexSchedule.flexScheduleDay,this.$refs.ModalRef.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("ddbd");Gs.render=Hs,Gs.__scopeId="data-v-b731d550";var Js=Gs,qs=Object(i["R"])("data-v-781f7d58");Object(i["w"])("data-v-781f7d58");var Xs={class:"day-info"},Zs={class:"display-day"},eo={key:0},to={key:1},ao={class:"d-flex flex-column align-center"},no=Object(i["i"])("label",null,"Start Time",-1),io={class:"mt-2 d-flex flex-column align-center"},co=Object(i["i"])("label",{class:"px-2"},"End Time",-1),lo=Object(i["i"])("span",{class:"white"},"Create",-1),so={key:0},oo={key:1},ro={key:2},uo=Object(i["i"])("div",null,"Position:",-1),ho={key:1,class:"leave-unit mt-2"},fo={key:0},bo={key:1},mo={key:2,class:"leave-unit mt-2"},po=Object(i["i"])("div",null,"Unavailability:",-1),Oo={key:3},jo=Object(i["i"])("span",{class:"white caption"},"Edit",-1);Object(i["u"])();var yo=qs((function(e,t,a,n,c,l){var s=Object(i["B"])("editable-cell-element");return Object(i["t"])(),Object(i["e"])("div",Xs,[Object(i["i"])("div",Zs,[Object(i["i"])("div",null,[e.editTime||!e.scheDay.startTime&&!e.scheDay.endTime?e.editTime?(Object(i["t"])(),Object(i["e"])("div",to,[Object(i["i"])("div",ao,[no,Object(i["O"])(Object(i["i"])("input",{class:"time-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.scheDay.startTime=t})},null,512),[[i["K"],e.scheDay.startTime]])]),Object(i["i"])("div",io,[co,Object(i["O"])(Object(i["i"])("input",{class:"time-input","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.scheDay.endTime=t})},null,512),[[i["K"],e.scheDay.endTime]])]),Object(i["i"])("button",{class:"mt-2",onClick:t[3]||(t[3]=function(t){e.editTime=!1,e.updateEditing(!1)})},"Confirm")])):(Object(i["t"])(),Object(i["e"])("div",{key:2,class:["create-day",{"create-day-show":!e.scheDay.time&&!e.scheDay.schedule}]},[Object(i["i"])("button",{class:"blue small",onClick:t[4]||(t[4]=function(t){return e.createSche(e.scheDay)})},[lo])],2)):(Object(i["t"])(),Object(i["e"])("div",eo,[Object(i["i"])("div",null,Object(i["F"])(e.scheDay.startTime)+" - "+Object(i["F"])(e.scheDay.endTime),1)]))]),e.editTime?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("div",so,[e.cellSettings.showHours.value&&e.scheDay.hours?(Object(i["t"])(),Object(i["e"])(s,{key:0,label:"Net hours:",modelValue:e.scheDay.hours,"onUpdate:modelValue":t[5]||(t[5]=function(t){e.scheDay.hours=t,e.updateEditing})},null,8,["modelValue"])):Object(i["f"])("",!0),e.scheDay.scheduleDetail?(Object(i["t"])(),Object(i["e"])("div",oo,[e.cellSettings.showBreakLength.value?(Object(i["t"])(),Object(i["e"])(s,{key:0,label:"Break Length:",modelValue:e.scheDay.scheduleDetail.breakLength,"onUpdate:modelValue":t[6]||(t[6]=function(t){e.scheDay.scheduleDetail.breakLength=t,e.updateEditing})},null,8,["modelValue"])):Object(i["f"])("",!0),e.cellSettings.showShiftId.value?(Object(i["t"])(),Object(i["e"])(s,{key:1,label:"Shift ID:",modelValue:e.scheDay.scheduleDetail.shiftId,"onUpdate:modelValue":t[7]||(t[7]=function(t){e.scheDay.scheduleDetail.shiftId=t,e.updateEditing})},{displayValue:qs((function(){return[]})),_:1},8,["modelValue"])):Object(i["f"])("",!0),e.cellSettings.showPosition.value?(Object(i["t"])(),Object(i["e"])("div",ro,[uo,Object(i["i"])("div",null,Object(i["F"])(e.scheDay.scheduleDetail.positionTitle),1)])):Object(i["f"])("",!0)])):Object(i["f"])("",!0)])),e.scheDay.leaveUnit?(Object(i["t"])(),Object(i["e"])("div",ho,["D"===e.scheDay.leaveUnit.calcUnit?(Object(i["t"])(),Object(i["e"])("span",fo,"Leave: "+Object(i["F"])(e.scheDay.leaveUnit.daysAppliedFor)+" day",1)):(Object(i["t"])(),Object(i["e"])("span",bo,"Leave: "+Object(i["F"])(e.scheDay.leaveUnit.hoursAppliedFor)+" hours",1))])):Object(i["f"])("",!0),e.scheDay.unAvailability?(Object(i["t"])(),Object(i["e"])("div",mo,[po,Object(i["i"])("span",null,Object(i["F"])(e.scheDay.unAvailability.startTime)+" - "+Object(i["F"])(e.scheDay.unAvailability.endTime),1)])):Object(i["f"])("",!0),e.editing||!e.scheDay.startTime&&!e.scheDay.endTime?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("div",Oo,[Object(i["i"])("button",{class:" detail-button blue small mt-2",onClick:t[8]||(t[8]=function(t){return e.moreDetail(e.scheDay)})},[jo])]))])])})),vo=Object(i["R"])("data-v-675aa1ee");Object(i["w"])("data-v-675aa1ee");var go=Object(i["i"])("span",{class:"icon-tick "},null,-1),Do=Object(i["i"])("span",{class:"icon-cross"},null,-1),So={key:1};Object(i["u"])();var ko=vo((function(e,t,a,n,c,l){return e.editing?(Object(i["t"])(),Object(i["e"])("div",{key:0,class:["d-flex flex-wrap justify-center",{"input-width-full":e.fullWidthInput}]},[Object(i["i"])("label",null,Object(i["F"])(e.label),1),Object(i["O"])(Object(i["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t}),class:"input-width"},null,512),[[i["K"],e.value]]),Object(i["i"])("button",{class:"ml-1 btn-xsmall blue",onClick:t[2]||(t[2]=function(){return e.update&&e.update.apply(e,arguments)})},[go]),Object(i["i"])("button",{class:"ml-1 btn-xsmall orange",onClick:t[3]||(t[3]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},[Do])],2)):(Object(i["t"])(),Object(i["e"])("div",So,[Object(i["i"])("label",null,Object(i["F"])(e.label),1),Object(i["A"])(e.$slots,"displayValue",{},(function(){return[Object(i["h"])(Object(i["F"])(e.modelValue),1)]}),{},!0)]))})),wo=Object(i["j"])({name:"EditableCellElement",props:{modelValue:{type:[String,Number]},label:{type:String},fullWidthInput:{type:Boolean}},data:function(){return{value:"",editing:!1}},methods:{changeEditing:function(){this.value=this.modelValue,this.editing=!0,this.$emit("updateEditing",!0)},update:function(){this.$emit("update:modelValue",this.value),this.editing=!1},cancel:function(){this.editing=!1,this.$emit("updateEditing",!1)}}});a("1951");wo.render=ko,wo.__scopeId="data-v-675aa1ee";var Ao,xo,To,Eo,Co=wo;(function(e){e["setShifts"]="SET_SHIFTS",e["setPosition"]="SET_POSITION",e["setCostElements"]="SET_COST_ELEMENTS"})(To||(To={})),function(e){e["getPositions"]="GET_POSITIONS",e["getShifts"]="GET_SHIFTS",e["getCostElement"]="GET_COST_ELEMENT"}(Eo||(Eo={}));var Fo=(Ao={},Object(In["a"])(Ao,To.setShifts,(function(e,t){e.shifts=t})),Object(In["a"])(Ao,To.setPosition,(function(e,t){e.positions=t})),Object(In["a"])(Ao,To.setCostElements,(function(e,t){e.costElements=t})),Ao),Mo=(xo={},Object(In["a"])(xo,Eo.getPositions,(function(e,t){var a=e.commit;J.GetPosition(t).then((function(e){console.log("positon",e);var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a(To.setPosition,t)}))})),Object(In["a"])(xo,Eo.getShifts,(function(e){var t=e.commit;J.ShiftTypes().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));console.log("convertedShifts",a),t(To.setShifts,a)}))})),Object(In["a"])(xo,Eo.getCostElement,(function(e){var t=e.commit;J.GetCostelements().then((function(e){var a=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));console.log("convertedShifts",a),t(To.setCostElements,a)}))})),xo),No={state:{shifts:[],positions:[],costElements:[]},mutations:Fo,actions:Mo},Lo=No,Io=Object(i["j"])({name:"DynamicScheCell",components:{EditableCellElement:Co},props:{scheDay:{type:Object}},data:function(){return{editTime:!1,editing:!1}},setup:function(){var e=Object(bt["b"])(),t=e.state.FlexSchedule.flexScheduleCellSetting,a=Object(i["c"])((function(){return e.state.LookUp.shifts})),n=Object(i["c"])((function(){return e.state.LookUp.positions}));return{cellSettings:t,shiftOptions:a,positionOptions:n,selectedShift:Object(i["c"])((function(e){return a.value.find((function(t){return t.shiftType===e}))}))}},methods:{updateElement:function(e,t,a){t.startTime=e},moreDetail:function(e){this.$store.commit(Ws.setScheduleDay,e),this.$emit("openEditDialog",!0)},updateEditTime:function(e){this.editTime=e,e&&(this.editing=!0)},createSche:function(e){this.$store.dispatch(Eo.getPositions,e.employeeNo),this.$store.commit(Ws.createNewScheduleDay,e),this.$emit("openEditDialog",!1)},updateEditing:function(e){this.editing=!0===e||!1===e?e:!this.editing},startEditing:function(){this.editing=!0}}});a("7ac5");Io.render=yo,Io.__scopeId="data-v-781f7d58";var Po=Io,Ro=Object(i["R"])("data-v-3ec2220c");Object(i["w"])("data-v-3ec2220c");var Yo={class:"cell-config-list"},Bo={class:"custom-select",tabindex:"1"},Wo=Object(i["i"])("div",{class:"custom-select-selected"}," Show/Hide Details ",-1),Ho={class:"custom-select-items"},Uo={class:"cell-config"};Object(i["u"])();var Vo=Ro((function(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",Yo,[Object(i["i"])("div",null,[Object(i["i"])("div",Bo,[Wo,Object(i["i"])("div",Ho,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.cellSettings,(function(a,n){return Object(i["t"])(),Object(i["e"])("div",{class:"custom-select-item",key:n,onClick:function(t){e.checkOptions(a)}},[Object(i["i"])("div",Uo,[Object(i["i"])("label",null,Object(i["F"])(a.name),1),Object(i["O"])(Object(i["i"])("input",{type:"checkbox","onUpdate:modelValue":function(e){return a.value=e},onChange:t[1]||(t[1]=function(){return e.optionChanged&&e.optionChanged.apply(e,arguments)})},null,40,["onUpdate:modelValue"]),[[i["I"],a.value]])])],8,["onClick"])})),128))])])])])})),$o=Object(i["j"])({name:"FlexScheduleCellControl",setup:function(){var e=Object(bt["b"])(),t=Object(i["y"])(!1),a=Object(i["y"])([]),n=e.state.FlexSchedule.flexScheduleCellSetting;return{open:t,cellSettings:n,optionSelected:a}},methods:{optionChanged:function(){localStorage.setItem("flexScheduleCellSetting",JSON.stringify(this.cellSettings))},checkOptions:function(e){}}});a("3c05");$o.render=Vo,$o.__scopeId="data-v-3ec2220c";var Ko=$o,_o=Object(i["R"])("data-v-32ef9e0d");Object(i["w"])("data-v-32ef9e0d");var zo=Object(i["i"])("div",{class:"heading"},null,-1),Qo={class:"content"},Go={class:"clock-frame"},Jo={ref:"clockRef",width:"200",height:"200",style:{"background-color":"white"}},qo=Object(i["i"])("div",{class:"controls"},null,-1);Object(i["u"])();var Xo=_o((function(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",null,[zo,Object(i["i"])("div",Qo,[Object(i["i"])("div",Go,[Object(i["i"])("canvas",Jo,null,512)]),qo])])})),Zo=(a("cb29"),Object(i["j"])({name:"TimePicker",setup:function(){for(var e=Object(i["y"])([]),t=Object(i["y"])([]),a=Object(i["y"])(null),n=0;n<12;n++)e.value.push(n);for(var c=0;c<=55;c+=5)t.value.push(c);return Object(i["r"])((function(){var e=a.value,t=e.getContext("2d"),n=e.height/2;function i(){t.arc(0,0,n,0,2*Math.PI),t.fillStyle="lightGrey",t.fill(),c(t,n),l(t,n),s(t,n)}function c(e,t){e.beginPath(),e.arc(0,0,5,0,2*Math.PI),e.fillStyle="#333",e.fill()}function l(e,t){var a;e.font="18px arial",e.textBaseline="middle",e.textAlign="center";for(var n=1;n<13;n++)a=n*Math.PI/6,e.rotate(a),e.translate(0,.85*-t),e.rotate(-a),e.fillText(n.toString(),0,0),e.rotate(a),e.translate(0,.85*t),e.rotate(-a)}function s(e,t){new Date;var a=5,n=15;a%=12,a=a*Math.PI/6,o(e,a,.5*t,5),n=n*Math.PI/30,o(e,n,.7*t,3)}function o(e,t,a,n){e.beginPath(),e.lineWidth=n,e.lineCap="round",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-a),e.stroke(),e.rotate(-t)}t.translate(n,n),n*=.9,i()})),{clockHours:e,clockMinutes:t,clockRef:a}}}));Zo.render=Xo,Zo.__scopeId="data-v-32ef9e0d";var er=Zo,tr=a("c850"),ar=Object(i["R"])("data-v-e75cfd24");Object(i["w"])("data-v-e75cfd24");var nr=Object(i["i"])("div",null,[Object(i["i"])("h2",null,[Object(i["i"])("b",null,"Create Draft Schedule")])],-1),ir=Object(i["i"])("div",{class:"line-break my-4"},null,-1),cr={class:"d-flex align-center"},lr={class:"mt-2 draft-option pa-2"},sr={key:0,class:"grey-wrapper"},or={class:"input-label"},rr={class:"mt-2"},dr={class:"input-label"},ur=Object(i["i"])("div",{class:"line-break my-4"},null,-1),hr={class:"d-flex align-center"},fr={class:"mt-2 draft-option pa-2"},br={key:0,class:"grey-wrapper"},mr={class:"input-label"},pr={class:"mt-2"},Or={class:"input-label"},jr={class:"mt-2"},yr={class:"input-label"},vr=Object(i["i"])("div",{class:"line-break my-4"},null,-1),gr=Object(i["i"])("div",null," Paste Options ",-1),Dr={class:"mt-4 d-flex align-center"},Sr={class:"d-flex align-center mt-2"},kr={class:"d-flex justify-end full-width mt-4"};Object(i["u"])();var wr,Ar=ar((function(e,t,a,n,c,l){var s=Object(i["B"])("date-picker"),o=Object(i["B"])("Modal"),r=Object(i["C"])("tooltip");return Object(i["t"])(),Object(i["e"])(o,{ref:"ModalRef"},{header:ar((function(){return[nr]})),body:ar((function(){return[Object(i["i"])("div",null,[ir,Object(i["i"])("form",null,[Object(i["i"])("div",null,[Object(i["i"])("div",cr,[Object(i["O"])(Object(i["i"])("input",{type:"radio",name:"source",value:"import",class:"mt-0 ml-0","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sourceMode=t})},null,512),[[i["J"],e.sourceMode]]),Object(i["O"])(Object(i["i"])("span",null," Copy from Affinity ",512),[[r,{content:"Copies information from an employee’s personal work schedule in Affinity and pastes it into a current or future flexi schedule."},void 0,{top:!0}]])]),Object(i["i"])("div",lr,["import"!==e.sourceMode?(Object(i["t"])(),Object(i["e"])("div",sr)):Object(i["f"])("",!0),Object(i["i"])("div",null,[Object(i["O"])(Object(i["i"])("span",or,"From Date",512),[[r,{content:"The date to copy from."},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.scheduleStartDateText=t}),onClick:t[3]||(t[3]=function(t){return e.updateDateTime(t,"ScheduleStartDate")})},null,512),[[i["K"],e.scheduleStartDateText]])]),Object(i["i"])("div",rr,[Object(i["O"])(Object(i["i"])("span",dr,"Number of Days",512),[[r,{content:"The number of days to copy."},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.copyPersonalDuration=t})},null,512),[[i["K"],e.copyPersonalDuration]])])])]),ur,Object(i["i"])("div",null,[Object(i["i"])("div",hr,[Object(i["O"])(Object(i["i"])("input",{type:"radio",value:"copy",name:"source",class:"mt-0 ml-0","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.sourceMode=t})},null,512),[[i["J"],e.sourceMode]]),Object(i["O"])(Object(i["i"])("span",null,"Copy From Flexi Schedule",512),[[r,{content:"Copies information from a previous flexi schedule and pastes it into a current or future flexi schedule."},void 0,{top:!0}]])]),Object(i["i"])("div",fr,["copy"!==e.sourceMode?(Object(i["t"])(),Object(i["e"])("div",br)):Object(i["f"])("",!0),Object(i["i"])("div",null,[Object(i["O"])(Object(i["i"])("span",mr,"From Date",512),[[r,{content:"The date to copy from."},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.copyFromDateText=t}),onClick:t[7]||(t[7]=function(t){return e.updateDateTime(t,"copyFromDate")})},null,512),[[i["K"],e.copyFromDateText]])]),Object(i["i"])("div",pr,[Object(i["O"])(Object(i["i"])("span",Or,"Number of Days",512),[[r,{content:"The number of days to copy."},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.copyToDateDuration=t})},null,512),[[i["K"],e.copyToDateDuration,void 0,{number:!0}]])]),Object(i["i"])("div",jr,[Object(i["O"])(Object(i["i"])("span",yr,"Start On",512),[[r,{content:"The date in the flexi schedule when copied information will start. </br> For example, if you copy a 5-day block from 1 April and start it on 11 July, it will run from 11- 15 July."},void 0,{top:!0}]]),Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.targetDateText=t}),onClick:t[10]||(t[10]=function(t){return e.updateDateTime(t,"targetDate")})},null,512),[[i["K"],e.targetDateText]])])])])]),vr,Object(i["i"])("div",null,[gr,Object(i["i"])("div",Dr,[Object(i["O"])(Object(i["i"])("input",{type:"radio",name:"copyOption",value:"replace",class:"mt-0 ml-0","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.copyOption=t})},null,512),[[i["J"],e.copyOption]]),Object(i["O"])(Object(i["i"])("span",null,"Replace All",512),[[r,{content:"When copied information is pasted in, it will replace all information on the days specified."},void 0,{top:!0}]])]),Object(i["i"])("div",Sr,[Object(i["O"])(Object(i["i"])("input",{type:"radio",name:"copyOption",value:"merge",class:"mt-0 ml-0","onUpdate:modelValue":t[12]||(t[12]=function(t){return e.copyOption=t})},null,512),[[i["J"],e.copyOption]]),Object(i["O"])(Object(i["i"])("span",null,"Merge",512),[[r,{content:"When copied information is pasted in, it will only replace information on the days specified if there is a conflict."},void 0,{top:!0}]])])]),Object(i["i"])(s,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"])])]})),footer:ar((function(){return[Object(i["i"])("div",kr,[Object(i["i"])("button",{class:"blue xsmall white--text mr-2",onClick:t[13]||(t[13]=function(){return e.actionByMode&&e.actionByMode.apply(e,arguments)})},"Create"),Object(i["i"])("button",{class:"orange xsmall white--text",onClick:t[14]||(t[14]=function(){return e.cancel&&e.cancel.apply(e,arguments)})},"Cancel")])]})),_:1},512)}));(function(e){e["copy"]="replace",e["merge"]="merge"})(wr||(wr={}));var xr=Object(i["j"])({name:"DraftCreationDialog",components:{Modal:me,DatePicker:ja},data:function(){return{datePickerTop:0,datePickerLeft:0,sourceMode:"copy",copyOption:"replace",scheduleStartDateText:"",copyFromDateText:"",targetDateText:"",scheduleStartDate:ea()(),copyFromDate:ea()(),copyToDateDuration:0,targetDate:ea()(),dateTarget:"",copyPersonalDuration:0}},mounted:function(){},methods:{resetData:function(){this.datePickerTop=0,this.datePickerLeft=0,this.sourceMode="copy",this.copyOption="replace",this.scheduleStartDateText="",this.copyFromDateText="",this.targetDateText="",this.scheduleStartDate=ea()(),this.copyFromDate=ea()(),this.copyToDateDuration=0,this.targetDate=ea()(),this.dateTarget="",this.copyPersonalDuration=0},toggleShow:function(){this.resetData(),this.$refs.ModalRef.toggleShow()},actionByMode:function(){"copy"===this.sourceMode?this.createDraft():this.importFromPersonal()},importFromPersonal:function(){var e=this;sa.loading();var t={CopyFromPersonalSchedule:!0,EmployeeNumbers:this.$store.state.EmployeeModule.employees.map((function(e){return e.employeeNo})),PersonalSchedCopyDurationInDays:this.copyPersonalDuration,TargetDate:this.scheduleStartDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption};J.CopyFlexSchedule(t).then((function(t){e.$refs.ModalRef.toggleShow(),e.$emit("reload")})).finally((function(){}))},createDraft:function(){var e=this;sa.loading();var t={CopyFromPersonalSchedule:!1,EmployeeNumbers:this.$store.state.EmployeeModule.employees.map((function(e){return e.employeeNo})),CopyFromDate:this.copyFromDate.format("DD/MMM/YYYY"),CopyToDate:this.copyFromDate.add(this.copyToDateDuration-1,"days").format("DD/MMM/YYYY"),TargetDate:this.targetDate.format("DD/MMM/YYYY"),CopyOption:this.copyOption};J.CopyFlexSchedule(t).then((function(t){e.$refs.ModalRef.toggleShow(),e.$emit("reload")})).finally((function(){}))},updateDateTime:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.target.getClientRects()[0],a.datePickerTop=i.bottom,a.datePickerLeft=i.left,n.prev=3,n.t0=t,n.next="ScheduleStartDate"===n.t0?7:"copyFromDate"===n.t0?12:"targetDate"===n.t0?17:22;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.scheduleStartDate);case 9:return a.scheduleStartDate=n.sent,a.scheduleStartDateText=a.scheduleStartDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return n.next=14,a.$refs.DatePickerRef.toggleShow(a.copyFromDate);case 14:return a.copyFromDate=n.sent,a.copyFromDateText=a.copyFromDate.format("DD/MM/YYYY"),n.abrupt("return");case 17:return n.next=19,a.$refs.DatePickerRef.toggleShow(a.targetDate);case 19:return a.targetDate=n.sent,a.targetDateText=a.targetDate.format("DD/MM/YYYY"),n.abrupt("return");case 22:n.next=27;break;case 24:return n.prev=24,n.t1=n["catch"](3),n.abrupt("return");case 27:case"end":return n.stop()}}),n,null,[[3,24]])})))()},cancel:function(){this.toggleShow()}}});a("97fb");xr.render=Ar,xr.__scopeId="data-v-e75cfd24";var Tr=xr,Er=Object(i["R"])("data-v-0efd52a6");Object(i["w"])("data-v-0efd52a6");var Cr=Object(i["i"])("h2",{class:"bold"},"Employee Detail",-1),Fr={class:"mt-4"},Mr={class:"mt-4"};Object(i["u"])();var Nr=Er((function(e,t,a,n,c,l){var s=Object(i["B"])("cf-widget"),o=Object(i["B"])("Modal");return Object(i["t"])(),Object(i["e"])(o,{ref:"ModalRef"},{header:Er((function(){return[Cr]})),body:Er((function(){return[Object(i["i"])("div",Fr,[Object(i["i"])(s,{title:e.title,icon:"",class:"my-pay-widget",data:e.externalDetail,loading:e.loading,error:e.error},null,8,["title","data","loading","error"])])]})),footer:Er((function(){return[Object(i["i"])("div",Mr,[Object(i["i"])("button",{class:"grey small white--text",onClick:t[1]||(t[1]=function(){return e.toggleShow&&e.toggleShow.apply(e,arguments)})},"Close")])]})),_:1},512)})),Lr={class:"cf-widget"};function Ir(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",Lr,[(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(l.items,(function(e,t){return Object(i["t"])(),Object(i["e"])(Object(i["D"])(e.Type),{data:e,class:"item",key:t},null,8,["data"])})),128))])}var Pr={class:"field-display"},Rr={class:"label"},Yr={key:2,class:"value"};function Br(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",Pr,[Object(i["i"])("div",Rr,Object(i["F"])(a.data.Label),1),l.email?(Object(i["t"])(),Object(i["e"])("a",{key:0,href:l.email,class:"value"},Object(i["F"])(a.data.Value),9,["href"])):Object(i["f"])("",!0),!l.email&&l.tel?(Object(i["t"])(),Object(i["e"])("a",{key:1,href:l.tel,class:"value"},Object(i["F"])(a.data.Value),9,["href"])):Object(i["f"])("",!0),l.email||l.tel?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("div",Yr,Object(i["F"])(a.data.Value),1))])}var Wr={props:["data"],computed:{tel:function(){return"string"==typeof this.data.Key&&(this.data.Key.includes("Phone")||this.data.Key.includes("Mobile"))?"tel:".concat(this.data.Value):null},email:function(){return"string"==typeof this.data.Value&&this.data.Value.includes("@")?"mailto:".concat(this.data.Value):null}}};Wr.render=Br;var Hr=Wr,Ur={class:"separator"};function Vr(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",Ur)}var $r={};$r.render=Vr;var Kr=$r,_r={class:"youtube-input"};function zr(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",_r,[Object(i["i"])("iframe",{class:"video-frame",src:"//www.youtube.com/embed/"+a.data.Value+"?autoplay=0&controls=1&rel=0&showinfo=0&theme=light&modestbranding=1"},null,8,["src"])])}var Qr={props:["data"]};a("f9e1");Qr.render=zr;var Gr=Qr;function Jr(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("p",null,Object(i["F"])(a.data.Label),1)}var qr={props:["data"]};qr.render=Jr;var Xr=qr,Zr={class:"explanation"};function ed(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("p",Zr,Object(i["F"])(a.data.Label),1)}var td={props:["data"]};a("4de6");td.render=ed;var ad=td,nd={class:"attachment"},id={class:"label"},cd={class:"value"},ld={href:"#"};function sd(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",nd,[Object(i["i"])("div",id,Object(i["F"])(a.data.Label),1),Object(i["i"])("div",cd,[Object(i["i"])("a",ld,Object(i["F"])(a.data.Value.Display),1)])])}var od={props:["data"]};od.render=sd;var rd=od,dd={class:"subheading"},ud={class:"label"};function hd(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("div",dd,[Object(i["i"])("div",ud,Object(i["F"])(a.data.Label),1)])}var fd={props:["data"]};a("2c74");fd.render=hd;var bd=fd;function md(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])("a",{href:a.data.Value},Object(i["F"])(a.data.Label),9,["href"])}var pd={props:["data"]};pd.render=md;var Od=pd,jd={props:["title","icon","data","loading","error"],components:{FieldDisplay:Hr,Separator:Kr,YoutubeInput:Gr,Paragraph:Xr,Explanation:ad,AttachFile:rd,Subheading:bd,Link:Od},computed:{items:function(){if(this.data)return this.data.filter((function(e){return"Separator"===e.Type||"Subheading"===e.Type||"Explanation"===e.Type||"Paragraph"===e.Type||"YoutubeInput"===e.Type||"Link"===e.Type||e.Value}))}}};a("5d16");jd.render=Ir;var yd=jd,vd=Object(i["j"])({name:"TestEmployeeList",components:{Modal:me,CfWidget:yd},props:{externalDetail:{type:Array}},data:function(){return{title:"data title",loading:!1,error:null}},mounted:function(){},methods:{toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("beef");vd.render=Nr,vd.__scopeId="data-v-0efd52a6";var gd,Dd=vd;(function(e){e["empty"]="",e["draft"]="draft",e["published"]="published"})(gd||(gd={}));var Sd=Object(i["j"])({name:"FlexSchedule",components:{DraftCreationDialog:Tr,DatePicker:ja,TimePicker:er,EditFlexSchedule:Js,DynamicDayCell:Po,FlexScheduleCellControl:Ko,Icon:tr["a"],AutoComplete:Gn,ExtraEmpDetail:Dd},data:function(){return{dayFocus:ea()(),weekDays:[],scheduleWeek:[],selectedWeekStart:ea()(),datePickerTop:0,datePickerLeft:0,employeeList:[],scheduleWeekMap:new Map,weekStatus:gd.empty,showControl:!1,extraEmpDetail:[]}},setup:function(){var e=Object(i["y"])(),t=Object(i["y"])(),a=Object(i["y"])(),n=Object(i["y"])(!1),c=Object(i["y"])([]);function l(){e.value.toggleShow()}function s(e){n.value=e,t.value.openEdit()}function o(e){sa.loading(),J.GetEmployeeExtraDetail(e).then((function(e){c.value=e.map((function(e){return"DateTime"===e.InputType&&(e.remoteKeyValue=e.KeyValue,e.KeyValue=ea()(e.KeyValue).format("ddd DD MMM YYYY")),e})),sa.clear(),a.value.toggleShow()}),(function(e){sa.clear(),sa.alert("Something went wrong")}))}return{openDraftDialog:l,openEditDialog:s,openEmployeeDetail:o,DraftCreationDialogRef:e,EditModalRef:t,ExtraEmpDetailRef:a,isEditingDialog:n,externalDetail:c}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch(Eo.getPositions,Affinity.user.EmployeeNo),e.$store.dispatch(Eo.getShifts),e.$store.dispatch(Eo.getCostElement),a=e.dayFocus.clone().startOf("week"),n=e.dayFocus.clone().endOf("week"),e.loadDate(a,n);case 6:case"end":return t.stop()}}),t)})))()},methods:{reloadAfterEdit:function(){var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},loadDate:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var c,l,s,o,r,d,u,h,f,b,m,p,O,j,y,v,g,D,S,k,w,A,x,T,E;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.weekStatus=gd.empty,a.showControl=!1,c={managerEmployeeNo:Affinity.user.EmployeeNo,dateFrom:e.format("YYYY-MM-DD"),dateTo:t.format("YYYY-MM-DD")},sa.loading(),i.next=6,Promise.all([a.getDateData(e,t),J.GetManagedLeaves(c),a.$store.dispatch(Nn.getEmployees,Affinity.user.EmployeeNo).then((function(e){return e.map((function(e){return{EmployeeName:e.commonName,EmployeeNo:e.employeeNo,StdHoursPerWeek:e.stdHoursPerWeek,PositionCode:e.positionCode}}))}))]);case 6:l=i.sent,s=Object(Pn["a"])(l,3),o=s[0],r=s[1],d=s[2],sa.clear(),u=Object(n["a"])(d);try{for(u.s();!(h=u.n()).done;)f=h.value,a.scheduleWeekMap.set(f.EmployeeNo,f)}catch(C){u.e(C)}finally{u.f()}b=o.flexSchedules,m=Object(n["a"])(b);try{for(m.s();!(p=m.n()).done;)O=p.value,a.scheduleWeekMap.get(O.EmployeeNo)&&!a.scheduleWeekMap.get(O.EmployeeNo).sche?(a.scheduleWeekMap.get(O.EmployeeNo).sche=[O],a.checkStatus(O)):a.scheduleWeekMap.get(O.EmployeeNo)&&(a.scheduleWeekMap.get(O.EmployeeNo).sche.push(O),a.checkStatus(O))}catch(C){m.e(C)}finally{m.f()}j={weekStart:e,weekEnd:t,scheduleWeek:a.scheduleWeekMap},a.$store.state.FlexSchedule.calendarFocusDate=a.dayFocus,a.getNewWeek(j),y=Object(n["a"])(r);try{for(y.s();!(v=y.n()).done;){g=v.value,D=Object(n["a"])(g.leaveUnits);try{for(D.s();!(S=D.n()).done;)k=S.value,w=ea()(k.leaveDate).diff(e,"days"),k.calcUnit=g.calcUnit,k.leaveCode=g.leaveCode,k.leaveName=g.leaveName,a.scheduleWeekMap.get(g.employeeNo).sche[w].leaveUnit=k}catch(C){D.e(C)}finally{D.f()}}}catch(C){y.e(C)}finally{y.f()}A=Object(n["a"])(o.unAvailabilities);try{for(A.s();!(x=A.n()).done;)T=x.value,E=ea()(T.unavailabilityDate).day(),a.scheduleWeekMap.get(T.employeeNo).sche[E].unAvailability=T}catch(C){A.e(C)}finally{A.f()}case 24:case"end":return i.stop()}}),i)})))()},checkStatus:function(e){e.PublishStatus===gd.draft&&this.weekStatus===gd.empty?this.weekStatus=gd.draft:e.PublishStatus===gd.published&&(this.weekStatus=gd.published)},chooseCalendarDate:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.getClientRects()[0],t.datePickerTop=n.bottom,t.datePickerLeft=n.left,a.prev=3,a.next=6,t.$refs.DatePickerRef.toggleShow(t.dayFocus);case 6:i=a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a["catch"](3),a.abrupt("return");case 12:t.selectDate(i);case 13:case"end":return a.stop()}}),a,null,[[3,9]])})))()},selectDate:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dayFocus=e,t.$store.state.FlexSchedule.calendarFocusDate=e,n=e.clone().startOf("week"),i=e.clone().endOf("week"),a.next=6,t.loadDate(n,i);case 6:case"end":return a.stop()}}),a)})))()},getSelectedWeek:function(e){var t=e.clone().startOf("week");e.clone().endOf("week");this.weekDays=[];for(var a=0;a<=6;a++){var n=ea()(t).add(a,"days");this.weekDays.push({momentDay:n,day:n.format("ddd, MMM Do")})}},getDateData:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={},e&&t&&(i={employeeNo:Affinity.user.EmployeeNo,startDate:e.format("YYYY-MM-DD"),endDate:t.format("YYYY-MM-DD"),forManagedEmployees:!0}),n.abrupt("return",J.GetFlexSchedules(i).then((function(e){return a.reformatData(e)})));case 3:case"end":return n.stop()}}),n)})))()},scheDaysToColumn:function(){var e,t=Object(n["a"])(this.scheduleWeek.values());try{for(t.s();!(e=t.n()).done;){for(var a=e.value,i=a.EmployeeName,c=a.EmployeeNo,l=function(e){var t=void 0;a.sche?t=a.sche.find((function(t){return t.dayInWeek===e})):a.sche=[],t||(0!==e||a.sche[0]&&null!==a.sche[0].dayInWeek&&void 0!==a.sche[0].dayInWeek?a.sche.push({dayInWeek:e,employeeName:i,employeeNo:c}):(a.sche[0]={},a.sche[0].dayInWeek=0,a.sche[0].employeeName=i,a.sche[0].employeeNo=c))},s=0;s<=6;s++)l(s);a.sche.sort((function(e,t){return e.dayInWeek-t.dayInWeek}));var o,r=Object(n["a"])(a.sche);try{for(r.s();!(o=r.n()).done;){var d=o.value;d.column="grid-column-start: ".concat(d.dayInWeek+4),d.editing=!1}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}},getLastWeek:function(){this.dayFocus.subtract(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},getNextWeek:function(){this.dayFocus.add(7,"days");var e=this.dayFocus.clone().startOf("week"),t=this.dayFocus.clone().endOf("week");this.loadDate(e,t)},getNewWeek:function(e){var t=e;this.getSelectedWeek(t.weekStart),this.scheduleWeek=this.$store.state.FlexSchedule.scheduleWeek=t.scheduleWeek,this.scheDaysToColumn()},moreDetail:function(e){this.$store.commit(Ws.setScheduleDay,e)},getTotalHour:function(e){var t,a=0,i=Object(n["a"])(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;c.hours&&(a+=c.hours)}}catch(l){i.e(l)}finally{i.f()}return a.toFixed(2)},confirmEdit:function(e){e.editing=!1},cancelEdit:function(e){},editScheDay:function(e){e.editing=!0},reformatData:function(e){var t=e.FlexSchedules;t.forEach((function(e){e.id=e.Id,e.startTime=ea()(e.StartTime).format("HH:mm"),e.endTime=ea()(e.EndTime).format("HH:mm"),e.hours=e.Hours,e.scheduleDetail=e.ScheduleData,e.scheduleDetail.breakLength=e.scheduleDetail.BreakLength,e.scheduleDetail.position=e.scheduleDetail.Position,e.scheduleDetail.positionTitle=e.scheduleDetail.PositionTitle,e.scheduleDetail.shiftId=e.scheduleDetail.ShiftId,e.scheduleDetail.costElement1=e.scheduleDetail.CostElement1,e.scheduleDetail.costElement2=e.scheduleDetail.CostElement2,e.dayInWeek=ea()(e.Date).day()}));var a=e.Unavailabilities.map((function(e){return{id:e.EmpAvailability.Id,unavailabilityDate:e.UnavailabilityDate,employeeNo:e.EmpAvailability.EmployeeNo,startTime:e.EmpAvailability.StartTime,endTime:e.EmpAvailability.EndTime,reason:e.EmpAvailability.Reason}})),n={flexSchedules:t,unAvailabilities:a};return n},publishCurrentWeek:function(){var e,t=this,a=[],i=Object(n["a"])(this.scheduleWeekMap.entries());try{for(i.s();!(e=i.n()).done;){var c=Object(Pn["a"])(e.value,2),l=(c[0],c[1]),s=l.sche.filter((function(e){return!!e.Id}));a=a.concat(s)}}catch(r){i.e(r)}finally{i.f()}var o=a.map((function(e){return{Id:e.id,PublishStatus:"published"}}));sa.confirmOrCancel({message:"Are you sure you want to publish the schedule for week ".concat(this.dayFocus.week()," ?"),confirmButtonText:"Yes"}).then((function(){sa.loading(),J.PatchFlexSchedule(o).then((function(){t.reloadAfterEdit(),sa.clear()}),(function(e){console.error(e),sa.alert("Something went wrong.")}))}))},changeDisplayControl:function(){this.showControl=!this.showControl}}});a("3fc3");Sd.render=ps,Sd.__scopeId="data-v-23fcd77f";var kd=Sd,wd=Object(i["R"])("data-v-1f9e16a1");Object(i["w"])("data-v-1f9e16a1");var Ad=Object(i["i"])("h3",{class:"mt-4"},"Availability",-1),xd=Object(i["i"])("p",{class:"mt-4"},[Object(i["h"])("I am "),Object(i["i"])("b",null,"unavailable"),Object(i["h"])(" during these times:")],-1),Td={class:"available-table mt-4"},Ed={class:"service-grid"},Cd=Object(i["g"])('<div class="grid-heading" data-v-1f9e16a1>Day of the week</div><div class="grid-heading" data-v-1f9e16a1>Start Time</div><div class="grid-heading" data-v-1f9e16a1>End Time</div><div class="grid-heading" data-v-1f9e16a1>Recurrence</div><div class="grid-heading" data-v-1f9e16a1>Starts on</div><div class="grid-heading" data-v-1f9e16a1>Ends on</div><div class="grid-heading" data-v-1f9e16a1>Control</div><div class="grid-heading" data-v-1f9e16a1>Reason</div>',8),Fd={class:"grid-item"},Md={class:"grid-item"},Nd={class:"grid-item"},Ld={class:"grid-item"},Id={class:"grid-item"},Pd={class:"grid-item"},Rd={class:"grid-item"},Yd={class:"grid-item"},Bd={class:"d-flex justify-end mt-4"};Object(i["u"])();var Wd=wd((function(e,t,a,n,c,l){var s=Object(i["B"])("edit-availability");return Object(i["t"])(),Object(i["e"])(i["a"],null,[Object(i["i"])("div",null,[Ad,xd,Object(i["i"])("div",Td,[Object(i["i"])("div",Ed,[Cd,(Object(i["t"])(!0),Object(i["e"])(i["a"],null,Object(i["z"])(e.girdData,(function(t){return Object(i["t"])(),Object(i["e"])(i["a"],null,[Object(i["i"])("div",Fd,Object(i["F"])(t.dayOfWeek),1),Object(i["i"])("div",Md,Object(i["F"])(t.startTime),1),Object(i["i"])("div",Nd,Object(i["F"])(t.endTime),1),Object(i["i"])("div",Ld,Object(i["F"])(t.frequencyType),1),Object(i["i"])("div",Id,Object(i["F"])(t.startDate),1),Object(i["i"])("div",Pd,Object(i["F"])(t.endDate),1),Object(i["i"])("div",Rd,[Object(i["i"])("button",{class:"green white--text xsmall",onClick:function(a){return e.openEditDialog(!0,t)}},"Edit",8,["onClick"]),Object(i["i"])("button",{class:"grey white--text xsmall ml-2",onClick:function(a){return e.confirmDelete(t)}},"Delete",8,["onClick"])]),Object(i["i"])("div",Yd,Object(i["F"])(t.reason),1)],64)})),256))])]),Object(i["i"])("div",Bd,[Object(i["i"])("button",{class:"green small white--text",onClick:t[1]||(t[1]=function(t){return e.openEditDialog(!1)})},"Create")])]),Object(i["i"])(s,{ref:"EditAvailabilityRef",isEdit:e.isEditingDialog,onReload:e.loadAvailability,modalIndex:1999},null,8,["isEdit","onReload"])],64)})),Hd=Object(i["R"])("data-v-7ca82e15");Object(i["w"])("data-v-7ca82e15");var Ud={class:"bold"},Vd={key:0},$d={key:1},Kd=Object(i["h"])(" Availability "),_d={class:"edit-form mt-4 copy2"},zd=Object(i["i"])("label",{class:"form-label"},"Start Time: ",-1),Qd={class:"mt-2"},Gd=Object(i["i"])("label",{class:"form-label"},"End Time: ",-1),Jd={class:"mt-4"},qd=Object(i["i"])("label",{class:"form-label"},"Day of Week:",-1),Xd={class:"select-day-of-week"},Zd={class:"mt-2"},eu=Object(i["i"])("label",{class:"form-label"},"Repeat:",-1),tu={class:"select-repeat"},au={class:"mt-4"},nu=Object(i["i"])("label",{class:"form-label"},"Start on:",-1),iu={class:"mt-2"},cu=Object(i["i"])("label",{class:"form-label"},"End on:",-1),lu={class:"ml-2"},su=Object(i["i"])("label",{class:"checkbox-label"},"No End Date",-1),ou={class:"mt-2"},ru=Object(i["i"])("label",{class:"form-label"},"Reason:",-1),du={class:"mt-4 full-width d-flex justify-end"},uu=Object(i["i"])("span",{class:"white"},"Edit",-1),hu=Object(i["i"])("span",{class:"white"},"Delete",-1),fu=Object(i["i"])("span",{class:"white"},"Create",-1),bu=Object(i["i"])("span",{class:"white"},"Cancel",-1);Object(i["u"])();var mu=Hd((function(e,t){var a=Object(i["B"])("custom-select"),n=Object(i["B"])("date-picker"),c=Object(i["B"])("Modal");return Object(i["t"])(),Object(i["e"])(c,{ref:"ModalRef"},{header:Hd((function(){return[Object(i["i"])("div",null,[Object(i["i"])("h2",Ud,[e.isEdit?(Object(i["t"])(),Object(i["e"])("span",Vd,"Edit")):(Object(i["t"])(),Object(i["e"])("span",$d,"Create")),Kd])])]})),body:Hd((function(){return[Object(i["i"])("div",null,[Object(i["i"])("div",_d,[Object(i["i"])("div",null,[zd,Object(i["O"])(Object(i["i"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.startTime=t}),onChange:t[2]||(t[2]=function(){return e.updateStartTime&&e.updateStartTime.apply(e,arguments)})},null,544),[[i["K"],e.startTime]])]),Object(i["i"])("div",Qd,[Gd,Object(i["O"])(Object(i["i"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.endTime=t}),onChange:t[4]||(t[4]=function(){return e.updateEndTime&&e.updateEndTime.apply(e,arguments)})},null,544),[[i["K"],e.endTime]])]),Object(i["i"])("div",Jd,[qd,Object(i["i"])("div",Xd,[Object(i["i"])(a,{options:e.dayOfWeekOption,modelValue:e.selectedDayOfWeek,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selectedDayOfWeek=t}),modelModifiers:{modelValue:!0}},null,8,["options","modelValue"])])]),Object(i["i"])("div",Zd,[eu,Object(i["i"])("div",tu,[Object(i["i"])(a,{options:e.repeatOption,modelValue:e.selectedRepeat,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.selectedRepeat=t}),modelModifiers:{modelValue:!0}},null,8,["options","modelValue"])])]),Object(i["i"])("div",au,[nu,Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.startDateText=t}),onChange:t[8]||(t[8]=function(t){return e.updateDateTimeText("startDate")}),onClick:t[9]||(t[9]=function(t){return e.updateDateTime(t,"startDate")})},null,544),[[i["K"],e.startDateText]])]),Object(i["i"])("div",iu,[cu,Object(i["O"])(Object(i["i"])("input",{class:"input-box",type:"text","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.endDateText=t}),onChange:t[11]||(t[11]=function(t){return e.updateDateTimeText("endDate")}),onClick:t[12]||(t[12]=function(t){return e.updateDateTime(t,"endDate")})},null,544),[[i["K"],e.endDateText]]),Object(i["i"])("span",lu,[Object(i["O"])(Object(i["i"])("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.noEndDate=t}),onClick:t[14]||(t[14]=function(){return e.clickedNoEndDate&&e.clickedNoEndDate.apply(e,arguments)})},null,512),[[i["I"],e.noEndDate]]),su])]),Object(i["i"])("div",ou,[ru,Object(i["O"])(Object(i["i"])("textarea",{"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.reason=t})},null,512),[[i["K"],e.reason]])])]),Object(i["i"])(n,{ref:"DatePickerRef",top:e.datePickerTop,left:e.datePickerLeft},null,8,["top","left"])])]})),footer:Hd((function(){return[Object(i["i"])("div",du,[e.isEdit?(Object(i["t"])(),Object(i["e"])("button",{key:0,class:"blue normal copy2",onClick:t[16]||(t[16]=function(t){return e.updateAvailability()})},[uu])):Object(i["f"])("",!0),e.isEdit?(Object(i["t"])(),Object(i["e"])("button",{key:1,class:"grey normal copy2 ml-2",onClick:t[17]||(t[17]=function(t){return e.confirmDelete()})},[hu])):Object(i["f"])("",!0),e.isEdit?Object(i["f"])("",!0):(Object(i["t"])(),Object(i["e"])("button",{key:2,class:"blue normal copy2",onClick:t[18]||(t[18]=function(t){return e.createAvailability()})},[fu])),Object(i["i"])("button",{class:"ml-2 normal orange copy2",onClick:t[19]||(t[19]=function(t){return e.cancel()})},[bu])])]})),_:1},512)})),pu=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ou=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ju=["Once","Weekly","Fortnightly","Monthly"];function yu(e){return Ou[pu.indexOf(e)]}function vu(e){return pu[Ou.indexOf(e)]}var gu={shortWeekDays:pu,fullWeekDays:Ou,frequencyCycle:ju,findFullDaysByShort:yu,findShortDayByFull:vu},Du=gu;function Su(e){var t="Hmm";e.includes(":")&&(t="H:mm");var a=ea()(e,t);return a.isValid()?a.format("HH:mm"):"Invalid Time"}var ku={parseTimeColumn:Su},wu=Object(i["j"])({name:"EditAvailability",components:{Modal:me,CustomSelect:hi,DatePicker:ja},props:{isEdit:{type:Boolean},weekStatus:{type:String}},data:function(){return{ava:null,employeeNo:0,startTime:"",endTime:"",dayOfWeekOption:Du.fullWeekDays,selectedDayOfWeek:"Monday",repeatOption:Du.frequencyCycle,selectedRepeat:"Weekly",datePickerTop:0,datePickerLeft:0,startDate:ea()(),startDateText:"",endDate:ea()(),endDateText:"",reason:"",noEndDate:!1}},setup:function(){return{}},watch:{selectedDayOfWeek:function(e,t){console.log(e,t)}},methods:{updateStartTime:function(){this.startTime=ku.parseTimeColumn(this.startTime)},updateEndTime:function(){this.endTime=ku.parseTimeColumn(this.endTime)},clickedNoEndDate:function(){this.endDateText="",this.endDate=null},createAvailability:function(){var e=this;sa.loading();var t=[{employeeNo:Affinity.user.EmployeeNo,startTime:this.startTime,endTime:this.endTime,dayOfWeek:Du.findShortDayByFull(this.selectedDayOfWeek),dayOfMonth:null,frequencyType:this.selectedRepeat,startDate:this.startDate.format("DD/MMM/YYYY"),endDate:this.endDateText?this.endDate.format("DD/MMM/YYYY"):null,reason:this.reason}];J.CreateAvailability(t).then((function(t){sa.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTimeText:function(e){"endDate"===e?""===this.endDateText&&(this.endDate=null):"startDate"===e&&""===this.startDateText&&(this.startDate=null)},confirmDelete:function(){},updateAvailability:function(){var e=this;sa.loading();var t=[{Id:this.ava.id,StartTime:this.startTime,EndTime:this.endTime,DayOfWeek:Du.findShortDayByFull(this.selectedDayOfWeek),DayOfMonth:null,FrequencyType:this.selectedRepeat,StartDate:this.startDate.format("DD/MMM/YYYY"),EndDate:this.endDateText?this.endDate.format("DD/MMM/YYYY"):null,Reason:this.reason}];J.PatchAvailabilities(t).then((function(t){sa.clear(),e.$emit("reload"),e.$refs.ModalRef.toggleShow()}))},updateDateTime:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.target.getClientRects()[0],a.datePickerTop=i.bottom,a.datePickerLeft=i.left,n.prev=3,n.t0=t,n.next="startDate"===n.t0?7:"endDate"===n.t0?12:18;break;case 7:return n.next=9,a.$refs.DatePickerRef.toggleShow(a.startDate);case 9:return a.startDate=n.sent,a.startDateText=a.startDate.format("DD/MM/YYYY"),n.abrupt("return");case 12:return a.endDate&&a.endDate.isValid()||(a.endDate=ea()()),n.next=15,a.$refs.DatePickerRef.toggleShow(a.endDate);case 15:return a.endDate=n.sent,a.endDateText=a.endDate.format("DD/MM/YYYY"),n.abrupt("return");case 18:n.next=23;break;case 20:return n.prev=20,n.t1=n["catch"](3),n.abrupt("return");case 23:case"end":return n.stop()}}),n,null,[[3,20]])})))()},openEditDialog:function(e){e&&(this.ava=e,this.employeeNo=Affinity.user.EmployeeNo,this.startTime=e.startTime,this.endTime=e.endTime,this.selectedDayOfWeek=e.dayOfWeek,this.selectedRepeat=e.frequencyType,this.startDateText=e.startDate,this.startDate=ea()(this.startDateText,"DD/MM/YYYY"),this.endDateText=e.endDate?e.endDate:"",this.endDate=ea()(this.endDateText,"DD/MM/YYYY"),this.reason=e.reason),this.$refs.ModalRef.toggleShow()},cancel:function(){this.toggleShow()},toggleShow:function(){this.$refs.ModalRef.toggleShow()}}});a("470f");wu.render=mu,wu.__scopeId="data-v-7ca82e15";var Au=wu,xu=Object(i["j"])({components:{EditAvailability:Au},data:function(){return{}},setup:function(){var e=Object(i["y"])(!1),t=Object(i["y"])(),a=Object(i["y"])([]),n=Object(i["y"])();function c(a,n){e.value=a,t.value.openEditDialog(n)}function l(){J.GetAvailabilities(Affinity.user.EmployeeNo).then((function(e){var t=e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(Pn["a"])(e,2),a=t[0],n=t[1];return[a.charAt(0).toLowerCase()+a.slice(1),n]})))}));a.value=t.map((function(e){return e.startDate=ea()(e.startDate).format("DD/MM/YYYY"),e.endDate&&(e.endDate=ea()(e.endDate).format("DD/MM/YYYY")),e.dayOfWeek=Du.findFullDaysByShort(e.dayOfWeek),e}))}))}return Object(i["r"])((function(){l()})),{girdData:a,openEditDialog:c,selectedAva:n,loadAvailability:l,isEditingDialog:e,EditAvailabilityRef:t}},mounted:function(){},methods:{confirmDelete:function(e){var t=this;sa.confirmOrCancel({message:"Are you sure you want to delete this Availability?"}).then((function(){t.deleteAva(e.id)}))},deleteAva:function(e){var t=this;J.DeleteAvailabilities(e).then((function(e){t.loadAvailability()}),(function(e){sa.alert("Something went wrong. Delete Availability failed")}))}}});a("f89a");xu.render=Wd,xu.__scopeId="data-v-1f9e16a1";var Tu=xu,Eu=Object(i["R"])("data-v-71c5192d");Object(i["w"])("data-v-71c5192d");var Cu=Object(i["i"])("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1",crossorigin:"anonymous"},null,-1),Fu={class:"col-sm-4"},Mu=Object(i["i"])("p",null,"Login form style 3",-1),Nu={class:"card"},Lu={class:"card-body"},Iu=Object(i["i"])("h4",{class:"card-title text-center mb-4 mt-1"},"Sign in",-1),Pu=Object(i["i"])("hr",null,null,-1),Ru=Object(i["i"])("p",{class:"text-success text-center"},"Some message goes here",-1),Yu={class:"form-group"},Bu={class:"input-group"},Wu={class:"form-group mt-2"},Hu={class:"input-group"},Uu=Object(i["i"])("div",{class:"form-group mt-4"},[Object(i["i"])("button",{type:"submit",class:"btn btn-primary btn-block"}," Login ")],-1);Object(i["u"])();var Vu=Eu((function(e,t,a,n,c,l){return Object(i["t"])(),Object(i["e"])(i["a"],null,[Cu,Object(i["i"])("aside",Fu,[Mu,Object(i["i"])("div",Nu,[Object(i["i"])("article",Lu,[Iu,Pu,Ru,Object(i["i"])("form",{onSubmit:t[3]||(t[3]=Object(i["Q"])((function(){return l.login&&l.login.apply(l,arguments)}),["prevent"]))},[Object(i["i"])("div",Yu,[Object(i["i"])("div",Bu,[Object(i["O"])(Object(i["i"])("input",{name:"",class:"form-control",placeholder:"Email or login","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.username=e})},null,512),[[i["K"],c.username]])])]),Object(i["i"])("div",Wu,[Object(i["i"])("div",Hu,[Object(i["O"])(Object(i["i"])("input",{class:"form-control",placeholder:"******",type:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e})},null,512),[[i["K"],c.password]])])]),Uu],32)])])])],64)})),$u={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){console.log("login"),console.log(this.username),console.log(this.password),j.a.post("http://localhost:61160/api/Authentication/post",{username:this.username,password:this.password}).then((function(e){console.log("res",e)}))}}};$u.render=Vu,$u.__scopeId="data-v-71c5192d";var Ku=$u,_u=[{path:"/login",name:"Login",component:Ku},{path:"/my-schedules",name:"My Schedule",component:va},{path:"/availability",name:"Availability",component:Tu},{path:"/flex-schedule",name:"Flex Schedule",component:kd},{path:"/team-schedules",name:"Schedule Management",component:Ui},{path:"/employee-allocations",name:"Employee Allocation",component:_l},{path:"/",name:"Home",component:va}],zu=Object(Ot["a"])({history:Object(Ot["b"])("/"),routes:_u}),Qu=zu,Gu={state:{magic:123},modules:{FlexSchedule:Qs,LookUp:Lo,EmployeeModule:Hn}},Ju=new bt["a"].Store(Gu),qu=(a("ba8f"),a("8e1f"),a("14b7")),Xu=a("e37d"),Zu={reformatDate:function(e){var t;if(!e)return e;if("string"===typeof e)return e;if("object"===Object(Jn["a"])(e)&&"Date"===(null===(t=e.constructor)||void 0===t?void 0:t.name)){var a=ea()(e);return a.format("DD/MM/YYYY")}if(e.isValid()){var n=ea()(e);return null!=n&&n.isValid()?n.format("DD/MM/YYYY"):e}return e},reformatTime:function(e){if(!e)return e;var t=ea()(e);if(null==t||!t.isValid()){var a=ea()(e,"h:m");return null!=a&&a.isValid()?a.format("HH:mm"):e}return t.format("HH:mm")},ordinalSuffix:function(e){var t=e%10,a=e%100;return 1==t&&11!=a?e+"st":2==t&&12!=a?e+"nd":3==t&&13!=a?e+"rd":e+"th"}},eh=Zu,th=a("97d2"),ah=a("5210"),nh=a("963c"),ih=a("f68e"),ch={chevronUp:th["a"],chevronLeft:ah["a"],chevronRight:nh["a"],chevronDown:ih["a"]},lh=ch,sh=Object(qu["a"])();navigator.serviceWorker.getRegistrations().then((function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.unregister()}}catch(c){a.e(c)}finally{a.f()}}));var oh=Object(i["d"])(pt);oh.config.globalProperties.emitter=sh,oh.use(Xu["a"]),oh.use(Ju).use(Qu).mount("#app"),oh.config.globalProperties.$filters=eh,oh.config.globalProperties.$icons=lh},cf5e:function(e,t,a){},d3cc:function(e,t,a){"use strict";a("288c")},ddbd:function(e,t,a){"use strict";a("2b5c")},dde9:function(e,t,a){},e3ba:function(e,t,a){},e439:function(e,t,a){},e552:function(e,t,a){},f22f:function(e,t,a){},f89a:function(e,t,a){"use strict";a("5527")},f962:function(e,t,a){"use strict";a("42ae")},f9e1:function(e,t,a){"use strict";a("88ce")},fcab:function(e,t,a){"use strict";a("a883")}});
//# sourceMappingURL=app.js.map