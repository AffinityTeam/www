{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/FlexSchedule/AnalysisChart.vue?9c84","webpack:///./src/components/FlexSchedule/EditableCellElement.vue?50d3","webpack:///./src/components/employeeAllocation/SearchEmployee.vue?02c2","webpack:///./src/components/FlexSchedule/EditFlexSchedule.vue?d6dd","webpack:///./src/components/FlexSchedule/Search/cf-widget/subheading.vue?711b","webpack:///./src/components/FlexSchedule/Print/PrintableView.vue?1b83","webpack:///./src/components/schedulesManagement/SchedulesManagement.vue?344b","webpack:///./src/components/FlexSchedule/FlexScheduleCellControl.vue?2922","webpack:///./src/components/employeeAllocation/EmployeeSchedule.vue?cfdf","webpack:///./src/components/FlexSchedule/DynamicDayCell.vue?157a","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/schedulesNavigation/SchedulesNavigation.vue?d7af","webpack:///./src/components/employeeAllocation/EmpSchedDetail.vue?aae0","webpack:///./src/components/FlexSchedule/Search/cf-widget/explanation-text.vue?8fda","webpack:///./src/App.vue?6618","webpack:///./src/components/FlexSchedule/DraftCreationDialog.vue?531f","webpack:///./src/components/common/DatePicker.vue?c559","webpack:///./src/components/schedulesManagement/schedulesManagement.scss?41a7","webpack:///./src/components/FlexSchedule/Search/cf-widget/index.vue?57e0","webpack:///./src/components/common/MultiSelect.vue?a5e0","webpack:///./src/components/common/AutoComplete.vue?f96e","webpack:///./src/components/FlexSchedule/ExtraEmpDetail.vue?6bd2","webpack:///./src/components/common/Modal.vue?e9d8","webpack:///./external-lib/dashboard/index.vue?bac5","webpack:///./src/components/Availability/EditAvailability.vue?1878","webpack:///./src/components/employeeAllocation/EmployeeAllocation.vue?22dc","webpack:///./src/components/scheduleDetail/ScheduleDetail.vue?0939","webpack:///./src/components/Availability/Availability.vue?7de4","webpack:///./src/components/FlexSchedule/Print/PrintableView.scss","webpack:///./src/components/schedulesManagement/SearchSchedule.vue?7d8a","webpack:///./src/App.vue","webpack:///./src/components/schedulesNavigation/SchedulesNavigation.vue","webpack:///./src/remote/scheduleRequest.ts","webpack:///./src/components/schedulesNavigation/SchedulesNavigation.vue?f4ed","webpack:///./src/components/schedulesNavigation/SchedulesNavigation.vue?1e87","webpack:///./src/components/alert.vue","webpack:///./src/components/common/Modal.vue","webpack:///./src/components/common/Modal.vue?945b","webpack:///./src/components/common/Modal.vue?9492","webpack:///./src/components/alert.vue?9b14","webpack:///./src/components/alert.vue?b608","webpack:///./external-lib/dashboard/index.vue","webpack:///./external-lib/dashboard/header.vue","webpack:///./external-lib/dashboard/header.vue?59be","webpack:///./external-lib/dashboard/navbar.vue","webpack:///./external-lib/dashboard/nav-item.vue","webpack:///./external-lib/dashboard/nav-item.vue?6d94","webpack:///./external-lib/scrollable.vue","webpack:///./external-lib/scrollable.vue?3d17","webpack:///./external-lib/dashboard/navbar.vue?4c70","webpack:///./external-lib/dashboard/footer.vue","webpack:///./external-lib/dashboard/footer.vue?0ca6","webpack:///./external-lib/dashboard/index.vue?e8dd","webpack:///./external-lib/dashboard/index.js","webpack:///./src/App.vue?eabf","webpack:///./src/components/mySchedules/MySchedules.vue","webpack:///./src/components/dialog.ts","webpack:///./src/components/common/DatePicker.vue","webpack:///./src/components/common/DatePicker.vue?18fd","webpack:///./src/components/common/DatePicker.vue?5b75","webpack:///./src/components/mySchedules/MySchedules.vue?1412","webpack:///./src/components/mySchedules/MySchedules.vue?613e","webpack:///./src/components/schedulesManagement/SchedulesManagement.vue","webpack:///./src/components/scheduleDetail/ScheduleDetail.vue","webpack:///./src/store/employeeModule.ts","webpack:///./src/components/common/AutoComplete.vue","webpack:///./src/components/common/AutoComplete.vue?d9a5","webpack:///./src/components/common/AutoComplete.vue?c997","webpack:///./src/components/common/CustomSelect.vue","webpack:///./src/components/common/CustomSelect.vue?4622","webpack:///./src/components/common/CustomSelect.vue?6905","webpack:///./src/components/scheduleDetail/ScheduleDetail.vue?bed9","webpack:///./src/components/scheduleDetail/ScheduleDetail.vue?0647","webpack:///./src/components/schedulesManagement/SearchSchedule.vue","webpack:///./src/components/schedulesManagement/SearchSchedule.vue?fcce","webpack:///./src/components/schedulesManagement/SearchSchedule.vue?6c2e","webpack:///./src/components/schedulesManagement/SchedulesManagement.vue?c73d","webpack:///./src/components/schedulesManagement/SchedulesManagement.vue?8a49","webpack:///./src/components/employeeAllocation/EmployeeAllocation.vue","webpack:///./src/components/employeeAllocation/EmployeeSchedule.vue","webpack:///./src/components/employeeAllocation/EmpSchedDetail.vue","webpack:///./src/components/employeeAllocation/EmpSchedDetail.vue?6feb","webpack:///./src/components/employeeAllocation/EmpSchedDetail.vue?c245","webpack:///./src/components/employeeAllocation/EmployeeSchedule.vue?de65","webpack:///./src/components/employeeAllocation/EmployeeSchedule.vue?a993","webpack:///./src/components/employeeAllocation/SearchEmployee.vue","webpack:///./src/components/employeeAllocation/SearchEmployee.vue?26cd","webpack:///./src/components/employeeAllocation/SearchEmployee.vue?6be3","webpack:///./src/components/employeeAllocation/EmployeeAllocation.vue?14d3","webpack:///./src/components/employeeAllocation/EmployeeAllocation.vue?eb00","webpack:///./src/components/FlexSchedule/FlexSchedule.vue","webpack:///./src/components/FlexSchedule/EditFlexSchedule.vue","webpack:///./src/store/flexScheduleModule.ts","webpack:///./src/components/FlexSchedule/EditFlexSchedule.vue?75f4","webpack:///./src/components/FlexSchedule/EditFlexSchedule.vue?a58a","webpack:///./src/components/FlexSchedule/DynamicDayCell.vue","webpack:///./src/components/FlexSchedule/EditableCellElement.vue","webpack:///./src/components/FlexSchedule/EditableCellElement.vue?e5d3","webpack:///./src/components/FlexSchedule/EditableCellElement.vue?d605","webpack:///./src/store/lookupModule.ts","webpack:///./src/components/FlexSchedule/DynamicDayCell.vue?dc68","webpack:///./src/components/FlexSchedule/DynamicDayCell.vue?0d1c","webpack:///./src/components/FlexSchedule/FlexScheduleCellControl.vue","webpack:///./src/components/FlexSchedule/FlexScheduleCellControl.vue?538c","webpack:///./src/components/FlexSchedule/FlexScheduleCellControl.vue?9489","webpack:///./src/components/common/timePicker/TimePicker.vue","webpack:///./src/components/common/timePicker/TimePicker.vue?e217","webpack:///./src/components/common/timePicker/TimePicker.vue?a315","webpack:///./src/components/FlexSchedule/DraftCreationDialog.vue","webpack:///./src/components/common/MultiSelect.vue","webpack:///./src/components/common/MultiSelect.vue?9b61","webpack:///./src/components/common/MultiSelect.vue?1d9c","webpack:///./src/components/FlexSchedule/DraftCreationDialog.vue?85b3","webpack:///./src/components/FlexSchedule/DraftCreationDialog.vue?e3f2","webpack:///./src/components/FlexSchedule/ExtraEmpDetail.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/index.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/field-display.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/field-display.vue?0d80","webpack:///./src/components/FlexSchedule/Search/cf-widget/separator-line.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/separator-line.vue?733c","webpack:///./src/components/FlexSchedule/Search/cf-widget/youtube-input.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/youtube-input.vue?1e98","webpack:///./src/components/FlexSchedule/Search/cf-widget/paragraph.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/paragraph.vue?3314","webpack:///./src/components/FlexSchedule/Search/cf-widget/explanation-text.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/explanation-text.vue?4296","webpack:///./src/components/FlexSchedule/Search/cf-widget/attach-file.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/attach-file.vue?d449","webpack:///./src/components/FlexSchedule/Search/cf-widget/subheading.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/subheading.vue?e5d9","webpack:///./src/components/FlexSchedule/Search/cf-widget/url-link.vue","webpack:///./src/components/FlexSchedule/Search/cf-widget/url-link.vue?db23","webpack:///./src/components/FlexSchedule/Search/cf-widget/index.vue?165a","webpack:///./src/components/FlexSchedule/ExtraEmpDetail.vue?d23e","webpack:///./src/components/FlexSchedule/ExtraEmpDetail.vue?2377","webpack:///./src/components/FlexSchedule/Print/PrintableView.vue","webpack:///./src/components/FlexSchedule/Print/PrintableView.vue?671d","webpack:///./src/components/FlexSchedule/Print/PrintableView.vue?f9d5","webpack:///./src/components/FlexSchedule/AnalysisChart.vue","webpack:///./src/components/FlexSchedule/AnalysisChart.vue?bf4a","webpack:///./src/components/FlexSchedule/AnalysisChart.vue?27c7","webpack:///./src/components/FlexSchedule/FlexSchedule.vue?f996","webpack:///./src/components/FlexSchedule/FlexSchedule.vue?1819","webpack:///./src/components/Availability/Availability.vue","webpack:///./src/components/Availability/EditAvailability.vue","webpack:///./src/components/Availability/AvailabilityLookUp.ts","webpack:///./src/components/common/script.ts","webpack:///./src/components/Availability/EditAvailability.vue?5054","webpack:///./src/components/Availability/EditAvailability.vue?79d2","webpack:///./src/components/Availability/Availability.vue?8234","webpack:///./src/components/Availability/Availability.vue?e0a6","webpack:///./src/components/Login/Login.vue","webpack:///./src/components/Login/Login.vue?1406","webpack:///./src/router/index.ts","webpack:///./src/store/index.ts","webpack:///./src/plugins/filters.ts","webpack:///./src/plugins/iconifyIcons.ts","webpack:///./src/plugins/companyConfig.ts","webpack:///./src/main.ts","webpack:///./src/components/FlexSchedule/FlexSchedule.vue?4cd2","webpack:///./src/components/common/CustomSelect.vue?0073","webpack:///./src/components/alert.vue?f4ef","webpack:///./src/components/FlexSchedule/Search/cf-widget/youtube-input.vue?186b","webpack:///./src/components/mySchedules/mySchedules.scss?517f"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","___CSS_LOADER_API_IMPORT___","class","enable-by-config","config-url","info-url","logout-url","href","target","userFullName","user","authorizedMenus","menu","selected","selectMenu","display","ISDEV","VUE_APP_AXIOSHOST","a","defaults","baseURL","headers","common","interceptors","response","use","resp","err","status","location","reload","Promise","reject","post","then","res","JSON","parse","StandardSchedules","allSchedules","params","ShiftTypes","ScheduleDetail","PostSchedule","DeleteSchedule","AllocateSchedule","Messages","Message","RemoveEmployeeWorkSchedule","employeeNo","UpdateEmpSchedRequest","EmployeesList","EmpWorkScheds","param","EmpSchedDetailRequest","GetFlexScheduleDetail","GetFlexSchedules","CreateFlexSchedule","UpdateFlexSchedule","put","PatchFlexSchedule","patch","GetManagedEmployees","GetPosition","GetCostelements","GetManagedLeaves","CopyFlexSchedule","DeleteFlexSchedule","delete","CreateAvailability","GetAvailabilities","PatchAvailabilities","DeleteAvailabilities","GetEmployeeExtraDetail","PublishFlexSchedule","GetWorkTypes","GetDefaultWorkTypes","console","log","EmployeeWorkSchedule","AuthGetInfo","menus","text","route","default","selectedMenu","computed","this","FirstName","LastName","filteredMenus","accessibleMenus","AccessibleMenus","currentMenuIteration","indexOf","methods","$router","forEach","isSelected","menuText","mounted","manageCompanyConfig","Affinity","setAllowPersonal","AccessibleFeatures","includes","find","$route","path","defaultMenu","render","__scopeId","src","ref","noBox","body","showLoader","message","showButtons","type","showCancel","tabindex","onOk","confirmButtonText","small","onCancel","cancelButtonText","show","style","modalIndex","clickWrapper","getCustomPosition","props","customPosition","Boolean","top","Number","left","toggleShow","isShow","$emit","position","components","Modal","dialog","emitter","on","clearDialog","inputObj","$refs","alertModalRef","enabled","showNav","hideNav","loading","error","reloadPage","title","logoUrl","onNavToggle","apps","logoutUrl","onNavHide","version","String","onMouseDown","scroll-x","enabledApps","app","index","signoutUrl","hasMenu","expanding","url","toggleMenu","Icon","Text","Name","expanded","Menu","subItem","is-owned","host","isOwned","External","toLowerCase","pathname","Url","gsap","from","duration","height","to","onComplete","scrollX","scrollY","ps","resizeDetector","strategy","onResize","update","container","suppressScrollX","suppressScrollY","listenTo","$slots","el","elm","beforeUnmount","uninstall","Array","mousedown","Enabled","encodeURI","onBodyMouseDown","evt","created","document","addEventListener","removeEventListener","NavItem","Scrollable","year","Date","getFullYear","enableByConfig","configUrl","infoUrl","legacyAuth","CompanyNo","EmployeeNo","authorize","cb","VUE_APP_LOCAL1","getInfoData","Firstname","Lastname","PayPoint","CompanyNumber","EmployeeNumber","UseDashboard","remoteConfig","method","authroot","catch","getConfig","config","Apps","Link","Forms","form","mobile","navbar","Component","Dashboard","schedulesNavigation","Alert","setup","store","clientStorageVersion","localStorage","getItem","clear","setItem","stringify","state","FlexSchedule","flexScheduleCellSetting","storeCellSetting","localSetting","x-small","$filters","reformatDate","fromDate","updateDateText","$event","updateDateTime","selectDateTodayForFromDate","toDate","outlined","dense","hide-details","tile","selectDateTodayForToDate","printWorkSchedule","schedules","schedule","weekName","weekDateRange","detailArr","detail","getWeekDayByIndex","displayScheduleDetail","shiftDescription","startTime","finishTime","hours","date","dateModalTop","leftInput","dateModalLeft","max-date","datePickerMax","min-date","datePickerMin","datePickerTargetDay","testDialog","emit","okColor","checkChange","input","confirmOrCancel","confirm","alert","calculateLeft","cancelPickDate","previousMonth","selectedDate","format","nextMonth","weekOfDays","weekDay","shortName","calendarArr","calendarDay","colorToday","selectDate","dateNumber","maxDate","minDate","currentYear","datePickerPromise","fullName","dayNumber","currentMonth","month","calculateMonth","watch","calculateBaseOnInput","innerWidth","today","selectDateOnly","day","ModalRef","clone","monthStart","startOf","monthEnd","endOf","lastMonthEndDate","lastMonthBeginDate","lastMonth","mStart","mEnd","isValid","validDateRange","mNextStart","mNextEnd","add","currentDay","diff","newDate","waitPickDate","DatePickerFormat","DatePicker","datePickerFormat","menu1","menu2","dateModal","selectedDateType","currentDate","setHours","intDate","getDate","currentWeekDay","getDay","weekDayFactor","setDate","loadSchedules","event","element","getClientRects","bottom","openDatePicker","args","content","getElementById","innerHTML","mywindow","open","write","close","focus","print","finalFromDate","finalToDate","tempSchedules","week","mondayScheduleDetail","tuesdayScheduleDetail","wednesdayScheduleDetail","thursdayScheduleDetail","fridayScheduleDetail","saturdayScheduleDetail","sundayScheduleDetail","finally","scheduleDetail","hour","minute","weekdayArray","DatePickerRef","createNewSchedule","selectSchedulesDetail","createNew","schedDetail","closeScheduleDetail","shiftTypeList","read-only","cancelScheduleDetail","reloadSchedulesDetail","scheduleSaved","scheduleDeleted","EmpAllocations","empSched","isActive","showActiveSchedule","EmployeeName","reformatDateString","DateFrom","DateTo","toggleShowActiveSchedule","for","EmployeeGetters","EmployeeMutations","EmployeeActions","formUpdated","formSubmited","isNewSchedule","$CompanyConfig","isAllowPersonal","createType","hasChanges","counter","Archive","employees","inputList","optionName","selectedEmployee","rows","Description","StartDate","max","min","step","NoOfWeeks","updateNoOfWeeks","numLimitKeyDown","color","increaseNumber","reduceNumber","showShift","Days","DayNumber","Week","isFirstDayOfWeek","DayOfWeek","getDayOfWeek","Hours","center","autocomplete","checkHour","data-test","reformatTime","StartTime","timeTextChanged","FinishTime","options","shifts","ShiftId","selectedShift","toggleShift","disabled","deleteSchedule","archiveSchedule","cancelChanges","updateDetail","employeeGetters","getEmployees","employeeMutations","setEmployees","employeeActions","commit","convertedEmployees","employeeRemote","fromEntries","entries","k","v","charAt","EmployeeModule","employeesWithPeronsalSche","getters","mutations","actions","selectSearchInput","updateSearchList","dropDownList","option","targeting","chooseOption","editing","targetingIndex","originList","obj","selectFromTarget","filter","moveTargetUp","moveTargetDown","blur","modelValue","displayKey","selectOption","selectRef","b","AutoComplete","CustomSelect","tablePadding","isDateToCleared","initialEmpSched","startDateMenu","timePickerTargetDay","selectedTimeType","Id","$store","employee","joinedName","commonName","remapDays","ScheduleType","undefined","newVal","oldVal","createNewDays","preventDefault","stopPropagation","total","fullDays","dayNum","pickedTime","autoCalcTime","targetDay","subtract","timeDiff","Math","round","set","toObject","startDateDatePickerHandler","dayNo","startDate","days","currentWeek","floor","newLength","allowDecimal","allowColon","allow","keyCode","msg","reloadDetail","fromWeek","toWeek","startDateModal","endDateModal","doUpdateDetail","doDeleteSchedule","doUpdateValidation","postData","IsPersonal","Data","SearchFilter","filters","searchTerm","placeholder","choseFilter","myEmployeeToggle","getSchedulesList","updateSort","orderByArrow","schedList","sched","classObject","HoursPerWeek","Count","inject","selectedSched","empListHeight","showFilters","myEmployee","sort","sortOptions","orderBy","partTimeSche","fullTimeSche","activeSche","inActiveSche","archivedSche","all","searchTermFocus","getAllowPersonal","$watch","refreshFilters","deep","deselectScheDetail","toggleFilters","vm","x","y","xString","yString","order","trim","visible","getDropDownFilterResult","hidden","allEmployee","weeks","employeeNoList","filteredSchedule","thenum","replace","unshift","sortIndex","arrow","SearchSchedule","getShiftTypeList","shiftList","ShiftType","dispatch","loadScheduleDetail","checkEmpAllocationActive","dateFrom","dateTo","second","changeCheck","searchScheduleRef","updateEmpList","bulkEmpList","emp","isMobileView","showScheduleDetail","removeEmployee","clearSelectedEmployee","submitForm","cloneSchedList","navDownList","chooseSchedule","selectedSchedule","schedAllocation","toDateMenu","Comment","capDate","EndExistingScheds","closeSchedAllocation","allocateEmployees","selectedEmpForDetail","resetSelectedEmpForDetail","selectedEmp","closeEmployeeSchedule","activeOnly","updateActiveOnly","true-value","false-value","empSchedList","selectEmpSchedCheck","WorkSchedName","selectedEmpSched","deleteSelection","updatedEmpSchedule","empSchedDetail","Detail","attrs","append-icon","RemoveSchedule","updateEmpSched","dateType","fromDateMenu","fromDatePickerValue","toDatePickerValue","getEmpSchedDetail","datePickerFormattedFromDate","datePickerFormattedToDate","fromDateDatePickerHandler","toDateDatePickerHandler","noClose","EmpScheduleDetail","getEmpWorkScheds","empScheDetailRef","selectEmpSched","empList","toggleEmployeeSelect","WorkschedNames","PersonalSchedule","addEmployee","selectedEmpList","navigator","userAgent","match","getEmployeesList","toString","clearSelectedEmployeeList","SearchEmployee","EmployeeSchedule","WorkschedId","startDatePickerValue","checkIsMobileView","yesterday","selectDropdownRef","SearchEmployeeRef","resetSchedAllocation","warningMsgs","EmployeeList","EmployeeScheduleRef","selectInputRef","getLastWeek","icon","$icons","chevronLeft","chooseCalendarDate","ordinalSuffix","dayFocus","getNextWeek","chevronRight","weekStatus","printFlexSchedule","isAdmin","changeDisplayControl","chevronDown","openDraftDialog","publishCurrentWeek","openAnalysisChart","getCurrentWeekStatus","weekDays","scheduleWeek","empNo","openEmployeeDetail","StdHoursPerWeek","toFixed","getTotalHour","sche","scheDay","column","openEditDialog","isEdit","isEditingDialog","reloadAfterEdit","datePickerTop","datePickerLeft","externalDetail","FlexScheduleAction","FlexScheduleMutation","header","dialogDate","employeeDetail","employeeName","positionOptions","positionTitle","selectedPosition","selectPositionCustom","updateStartTime","endTime","updateEndTime","showUnAvaError","fixedBreakLength","calcNetHour","fixedHours","shiftOptions","selectShift","footer","updateSche","confirmIfDeleteSche","createSche","cancel","EMPTY_FORM","breakLength","shiftId","costElement1","costElement2","loadTargetSchedule","scheduleId","clearForm","flexScheduleDay","createNewScheduleDay","selectedFlexDay","setScheduleDay","merge","saveScheduleDayToWeek","updateEditConfig","newConfig","editFlexScheduleDayConfig","setAnalysisData","analysisHoursChartData","calendarFocusDate","defaultWorkTypes","showHours","showBreakLength","showShiftId","showPosition","unAvailability","selectedCostElement1","selectedCostElement2","blankOption","shiftType","description","isDefault","archive","shiftOption","LookUp","costElementOptions","costElements","positions","breakLengthString","selectCostElement1","selectCostElement2","selectPosition","startEndDiffTrue","startEndDiff","checkUnavailability","unAvaStartTime","unAvaEndTime","putData","dayInWeek","EndTime","PublishStatus","ScheduleData","BreakLength","Position","positionCode","CostElement1","CostElement2","deleteSche","openEdit","editTime","updateEditing","time","cellSettings","label","displayValue","leaveUnit","calcUnit","daysAppliedFor","hoursAppliedFor","reason","moreDetail","fullWidthInput","changeEditing","LookupMutations","LookupActions","lookupMutations","setShifts","setPosition","setCostElements","setWorkTypes","workTypes","lookupActions","getPositions","convertedPositions","positionRemote","getShifts","convertedShifts","shiftRemote","getCostElement","convertedCostElement","getWorkTypes","convertedWorkType","LookupSelections","EditableCellElement","updateElement","updateEditTime","isEditing","startEditing","checkOptions","optionChanged","optionSelected","width","clockHours","clockMinutes","clockRef","canvas","ctx","getContext","radius","drawClock","arc","PI","fillStyle","fill","drawFace","drawNumbers","drawTime","beginPath","ang","font","textBaseline","textAlign","rotate","translate","fillText","drawHand","pos","lineWidth","lineCap","moveTo","lineTo","stroke","sourceMode","scheduleStartDateText","copyPersonalDuration","copyFromDateText","copyToDateDuration","targetDateText","copyOption","actionByMode","CopyOptions","MultiSelect","scheduleStartDate","copyFromDate","targetDate","dateTarget","resetData","createDraft","importFromPersonal","CopyFromPersonalSchedule","EmployeeNumbers","PersonalSchedCopyDurationInDays","TargetDate","CopyOption","ExcludedworkTypes","getExcludedWorkTypes","CopyFromDate","CopyToDate","selectedWorkTypes","workType","selectedDateTarget","items","item","Type","Label","email","Value","tel","Key","Display","FieldDisplay","Separator","YoutubeInput","Paragraph","Explanation","AttachFile","Subheading","CfWidget","totalHours","outerHTML","printStyle","colours","cancelModal","chartDatasets","canvasHeight","MyChart","chartLabels","myChartHeader","myChartRef","myChartHeaderRef","prepareChartData","getData","getDateData","endDate","forManagedEmployees","FlexSchedules","staticWorkersPerHour","dataSet","timeDataSet","staticList","timeRange","startWorkingHour","workingLength","testDate","chartData","Map","originStartTime","originEndTimeTime","cleanStartTime","minutes","cleanEndTime","cleanSche","toISOString","values","chartMin","valueOf","chartMax","targetCtx","clearRect","info","destroy","scales","x1","ticks","callback","labels","datasets","_this","backgroundColor","borderColor","borderWidth","borderSkipped","responsive","maintainAspectRatio","indexAxis","unit","displayFormats","stepSize","gridLines","drawOnChartArea","plugins","legend","tooltip","usePointStyle","callbacks","tooltipItem","raw","labelPointStyle","context","pointStyle","rotation","animation","sourceCanvas","copyWidth","copyHeight","drawImage","WeeklyPublishStatus","AnalysisChart","PrintableView","DraftCreationDialog","TimePicker","EditFlexSchedule","DynamicDayCell","FlexScheduleCellControl","ExtraEmpDetail","employeeList","scheduleWeekMap","empty","showControl","extraEmpDetail","DraftCreationDialogRef","EditModalRef","ExtraEmpDetailRef","PrintableViewRef","AnalysisChartRef","InputType","remoteKeyValue","KeyValue","remoteValue","weekStart","weekEnd","loadDate","draft","partial","published","managerEmployeeNo","stdHoursPerWeek","PositionCode","dateData","leaves","flexSchedulesDateData","flexSchedules","newWeek","getNewWeek","leave","leaveUnits","dateDiff","leaveDate","leaveCode","leaveName","unAvailabilities","unAva","weeklyDay","unavailabilityDate","checkStatus","statusSet","Set","has","datePickerResult","getSelectedWeek","momentDay","reformatData","scheDaysToColumn","scheduleArr","findResult","newWeekData","confirmEdit","cancelEdit","editScheDay","flexScheduleRemoteData","PositionTitle","unAvailabilitiesData","Unavailabilities","EmpAvailability","UnavailabilityDate","Reason","flexScheduleRequest","groupedSche","employeeData","scheWithData","concat","PublishItems","girdData","dayOfWeek","frequencyType","confirmDelete","loadAvailability","dayOfWeekOption","selectedDayOfWeek","repeatOption","selectedRepeat","updateRepeat","startDateText","updateDateTimeText","endDateDisable","endDateText","noEndDate","clickedNoEndDate","updateAvailability","createAvailability","shortWeekDays","fullWeekDays","frequencyCycle","findFullDaysByShort","shortDay","findShortDayByFull","fullDay","AvailabilityLookup","parseTimeColumn","parseFormat","ava","value1","value2","dayOfMonth","DayOfMonth","FrequencyType","EndDate","avaInput","EditAvailability","EditAvailabilityRef","selectedAva","selectedData","availabilities","availability","deleteAva","login","username","password","routes","component","Login","Availability","SchedulesManagement","router","history","magic","Store","constructor","icons","chevronUp","CompanyConfig","install","globalProperties","provide","serviceWorker","getRegistrations","registrations","registration","unregister","companyConfig","mount","iconifyIcons"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AnalysisChart.vue?vue&type=style&index=0&id=b0cd3b0c&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EditableCellElement.vue?vue&type=style&index=0&id=675aa1ee&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchEmployee.vue?vue&type=style&index=0&id=d14d6750&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EditFlexSchedule.vue?vue&type=style&index=0&id=42f59623&scoped=true&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./subheading.vue?vue&type=style&index=0&id=4f6ee34e&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PrintableView.vue?vue&type=style&index=0&id=9f124e66&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SchedulesManagement.vue?vue&type=style&index=1&id=1db28f2d&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FlexScheduleCellControl.vue?vue&type=style&index=0&id=3ec2220c&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EmployeeSchedule.vue?vue&type=style&index=0&id=1920bd7a&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DynamicDayCell.vue?vue&type=style&index=0&id=4c0f5fd8&scoped=true&lang=scss\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SchedulesNavigation.vue?vue&type=style&index=0&id=805ee54e&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EmpSchedDetail.vue?vue&type=style&index=0&id=7d332311&scoped=true&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./explanation-text.vue?vue&type=style&index=0&id=2c2f0c77&lang=scss\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=46f75afd&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DraftCreationDialog.vue?vue&type=style&index=0&id=2983fbc4&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DatePicker.vue?vue&type=style&index=0&id=d7fa5efc&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./schedulesManagement.scss?vue&type=style&index=0&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=8ad9aaf2&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MultiSelect.vue?vue&type=style&index=0&id=678d974a&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AutoComplete.vue?vue&type=style&index=0&id=309b7c5e&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExtraEmpDetail.vue?vue&type=style&index=0&id=3e8387ea&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=6c97dca8&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=348e10a8&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EditAvailability.vue?vue&type=style&index=0&id=880bb710&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EmployeeAllocation.vue?vue&type=style&index=0&id=5fab70c5&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ScheduleDetail.vue?vue&type=style&index=0&id=97dbad1c&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Availability.vue?vue&type=style&index=0&id=69f9b2fb&scoped=true&lang=scss\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media print{.flex-sche-table{width:100%;background:#fff;border-collapse:collapse;-webkit-print-color-adjust:exact}.flex-sche-table td,.flex-sche-table th{border:1px solid #ddd;padding:8px}.flex-sche-table tr:nth-child(even){background:#f2f2f2}.flex-sche-table tr:hover{background:#ddd}.flex-sche-table thead th{padding:3px 5px 3px 5px;font-weight:normal;text-align:left;background:linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%)}.flex-sche-table .leave-unit{width:100%;padding:2px 5px;background-color:#e0e0e0}}@media screen{.flex-sche-table{display:none}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SearchSchedule.vue?vue&type=style&index=0&id=af8a4f80&scoped=true&lang=scss\"","<template>\r\n    <div> <!--  id = app -->\r\n        <!--    <v-app>-->\r\n              <dashboard :enable-by-config=\"true\"\r\n                         config-url=\"/Config/Dashboard\" info-url=\"/Auth/GetInfo\" logout-url=\"/Auth/Logout\">\r\n        <!--          <schedules-navigation></schedules-navigation>-->\r\n        <!--          <alert></alert>-->\r\n        <!--          <div>-->\r\n        <!--            <router-view></router-view>-->\r\n        <!--          </div>-->\r\n            <div class=\"v-application\">\r\n                <schedules-navigation></schedules-navigation>\r\n                <alert></alert>\r\n\r\n                <router-view/>\r\n            </div>\r\n\r\n              </dashboard>\r\n        <!--    </v-app>-->\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport './App.scss'\r\nimport schedulesNavigation from \"./components/schedulesNavigation/SchedulesNavigation\";\r\nimport Alert from './components/alert'\r\nimport Dashboard from '../external-lib/dashboard'\r\nimport {useStore} from \"vuex\";\r\n\r\nexport default {\r\n    name: 'App',\r\n\r\n    components: {\r\n        Dashboard,\r\n        schedulesNavigation,\r\n        Alert,\r\n    },\r\n\r\n    setup() {\r\n        const store = useStore()\r\n\r\n        let clientStorageVersion = localStorage.getItem('clientStorageVersion')\r\n        if (clientStorageVersion !== '0.11') {\r\n            localStorage.clear();\r\n            localStorage.setItem('clientStorageVersion', '0.11')\r\n            localStorage.setItem('flexScheduleCellSetting', JSON.stringify(store.state.FlexSchedule.flexScheduleCellSetting))\r\n        } else {\r\n            let storeCellSetting = store.state.FlexSchedule.flexScheduleCellSetting\r\n            let localSetting = JSON.parse(localStorage.getItem('flexScheduleCellSetting'))\r\n            for (let key of Object.keys(localSetting)) {\r\n                if (storeCellSetting[key]) {\r\n                    storeCellSetting[key] = localSetting[key]\r\n                }\r\n            }\r\n\r\n            // this.$store.state.FlexSchedule.flexScheduleCellSetting = JSON.parse(localStorage.getItem('flexScheduleCellSetting'))\r\n        }\r\n        // todo: turn localstorage into a module or plugin\r\n    },\r\n\r\n    mounted() {\r\n        console.log('app vue created')\r\n    }\r\n};\r\n</script>\r\n<style>\r\n.v-application {\r\n    min-height: calc(100vh - 130px);\r\n}\r\n\r\n.v-application .v-btn:not(.v-btn--round).v-size--small {\r\n    min-width: auto;\r\n}\r\n</style>","<template>\r\n    <div class=\"schedules\">\r\n        <div class=\"sch-nav justify-space-between align-center primary body-2\">\r\n            <div class=\"white--text\">Schedules - {{ userFullName }}</div>\r\n            <div class=\"d-flex align-center\" v-if=\"user\">\r\n                <ul class=\"sch-nav-options mr-1 pa-0\">\r\n                    <li class=\"nav-box mr-1 py-1 px-2 my-1 caption\" v-for=\"menu in authorizedMenus\"\r\n                        @click=\"selectMenu(menu)\" :class=\"{ selected : menu.selected }\">\r\n                        <div>{{ menu.display }}</div>\r\n                    </li>\r\n                </ul>\r\n                <!--  todo: data-tooltip=\"Help\" data-tooltip-dir=\"bottom,left\"-->\r\n                <a href=\"/help/index\" class=\"sch-nav-help align-center mr-2\" v-tooltip.top=\"{content:'Help'}\"\r\n                   target=\"_blank\">\r\n                    <span class=\"icon-help-round white\"></span>\r\n                </a>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, inject} from \"vue\";\r\nimport Remote from \"@/remote/scheduleRequest\"\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        Affinity: any;\r\n    }\r\n}\r\n\r\nexport default defineComponent({\r\n    name: 'scheduleNavigation',\r\n    data() {\r\n        return {\r\n            user: <any>null,\r\n            menus: [\r\n                {\r\n                    text: 'Work Schedule',\r\n                    display: 'My Schedules',\r\n                    route: \"/my-schedules\",\r\n                    selected: false,\r\n                    default: true\r\n                },\r\n                {\r\n                    text: 'Availability',\r\n                    display: 'My Availability',\r\n                    route: \"/Availability\",\r\n                    selected: false,\r\n                    default: false\r\n                },\r\n                {\r\n                    text: 'Flex Schedule',\r\n                    display: 'Flexi Schedules',\r\n                    route: \"/flex-schedule\",\r\n                    selected: false,\r\n                    default: false,\r\n                },\r\n                {\r\n                    text: 'Schedule Management',\r\n                    display: 'Team Schedules',\r\n                    route: \"/team-schedules\",\r\n                    selected: false,\r\n                    default: false,\r\n                },\r\n                {\r\n                    text: 'Employee Allocation',\r\n                    display: 'Employee Allocations',\r\n                    route: \"/employee-allocations\",\r\n                    selected: false,\r\n                    default: false\r\n                }\r\n            ],\r\n            selectedMenu: <any>null\r\n        }\r\n    },\r\n    computed: {\r\n        userFullName() {\r\n            // bug: can not use this.user in return, throw missing typing error.\r\n            let user: any = this.user;\r\n            return user ? `${user.FirstName} ${user.LastName}` : '';\r\n        },\r\n        authorizedMenus() {\r\n            var filteredMenus = [];\r\n            var accessibleMenus = this.user.AccessibleMenus;\r\n            // accessibleMenus.push('Flex Schedule')\r\n            // accessibleMenus.push('Availability')\r\n\r\n            // bug: can not use this.user in return, throw missing typing error.\r\n            let menus: any[] = this.menus;\r\n            for (var i = 0; i < this.menus.length; i++) {\r\n                var currentMenuIteration = menus[i];\r\n                if (accessibleMenus.indexOf(currentMenuIteration.text) != -1) {\r\n                    filteredMenus.push(currentMenuIteration);\r\n                }\r\n            }\r\n            return filteredMenus;\r\n        }\r\n    },\r\n    methods: {\r\n        selectMenu: function (menu: any) {\r\n            this.$router.push(menu.route)\r\n\r\n            this.menus.forEach(m => {\r\n                m.selected = false;\r\n            })\r\n            menu.selected = true\r\n        },\r\n        isSelected: function (menuText: string) {\r\n            return this.selectedMenu && this.selectedMenu.text == menuText;\r\n        }\r\n    },\r\n    mounted: function () {\r\n        const manageCompanyConfig: any = inject(\"MANAGE_COMPANY_CONFIG\");\r\n\r\n\r\n        if (!window.Affinity || (window.Affinity && !window.Affinity.user)) {\r\n            console.log('no affinity requesting authInfo')\r\n            // call request to get user\r\n            Remote.AuthGetInfo().then(res => {\r\n                this.user = res\r\n                console.log('set to true')\r\n                manageCompanyConfig.setAllowPersonal(res.AccessibleFeatures.includes('Personal Schedule'))\r\n            });\r\n        } else {\r\n            console.log('loading user from Affinity lib')\r\n            this.user = window.Affinity.user;\r\n\r\n            manageCompanyConfig.setAllowPersonal(this.user.AccessibleFeatures.includes('Personal Schedule'))\r\n\r\n            // todo: move this logic to router\r\n            let selected = this.menus.find(m => m.route === this.$route.path)\r\n\r\n            if (!selected) {\r\n                let defaultMenu = this.menus.find((menu => {\r\n                    return menu.default === true;\r\n                }))\r\n                this.selectMenu(defaultMenu)\r\n            }\r\n        }\r\n    },\r\n})\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.nav-box {\r\n    border-bottom: 1px solid #44b5ec;\r\n    background-color: #2d72b3;\r\n    color: white;\r\n    list-style-type: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.selected {\r\n    background-color: #448ccf;\r\n}\r\n\r\n.sch-nav {\r\n    display: flex;\r\n    padding: 5px 0 5px 8px;\r\n\r\n    @media only screen and (max-width: 768px) {\r\n        display: block;\r\n\r\n\r\n    }\r\n}\r\n\r\n.sch-nav-options {\r\n    display: flex;\r\n    @media only screen and (max-width: 600px) {\r\n        display: block;\r\n        width: 100%;\r\n\r\n    }\r\n}\r\n\r\n.sch-nav-help {\r\n    display: flex;\r\n    border-radius: 50%;\r\n    width: 30px;\r\n    height: 30px;\r\n    text-decoration: none;\r\n    font-size: 25px;\r\n    @media only screen and (max-width: 600px) {\r\n        display: none;\r\n    }\r\n}\r\n</style>","import Vue from \"vue\";\r\n// import utils from \"../utils\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport Dialog from '@/components/dialog'\r\nimport {Leave, RemoteFlexScheDetail} from \"@/remote/flexSchedulesRequest\";\r\nimport {EMPPosition} from \"@/store/lookupModule\";\r\nimport {ManagedEmployee} from \"@/store/employeeModule\";\r\n\r\nlet ISDEV = false;\r\n//\r\nif (process.env.VUE_APP_AXIOSHOST) {\r\n    ISDEV = true;\r\n    axios.defaults.baseURL = process.env.VUE_APP_AXIOSHOST\r\n}\r\n//\r\n\r\naxios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\naxios.interceptors.response.use(resp => {\r\n    return resp;\r\n}, (err) => {\r\n    if (err && err.response && err.response.status == 401) {\r\n        location.reload();\r\n    }\r\n    return Promise.reject(err);\r\n});\r\n\r\nlet EmployeeWorkSchedule = function (data: any) {\r\n    return axios.post('EmployeeWorkSchedule', data).then(res => {\r\n        if (typeof res.data === \"string\" && res.data !== \"\") {\r\n            return JSON.parse(res.data)\r\n        }\r\n\r\n        return res.data\r\n    })\r\n}\r\n\r\nlet AuthGetInfo = function () {\r\n    return axios.post('Auth/GetInfo').then(res => {\r\n    // return axios.post('http://localhost:3000/Auth/GetInfo').then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nif (ISDEV) {\r\n    // for dev with dummy data\r\n    EmployeeWorkSchedule = function (data) {\r\n        console.log('data', data)\r\n        return axios.get('EmployeeWorkSchedule', data).then(res => {\r\n            if (typeof res.data === \"string\" && res.data !== \"\") {\r\n                return JSON.parse(res.data)\r\n            }\r\n\r\n            return res.data\r\n        })\r\n    }\r\n\r\n    AuthGetInfo = function () {\r\n        return axios.get('Auth/GetInfo').then(res => {\r\n            return res.data\r\n        })\r\n    }\r\n}\r\n\r\nfunction StandardSchedules(allSchedules?: boolean) {\r\n    return axios.get('StandardSchedules', {\r\n        params: {\r\n            allSchedules: allSchedules\r\n        }\r\n    }).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nasync function ShiftTypes() {\r\n    return axios.get('ShiftTypes').then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction ScheduleDetail(id: number) {\r\n    return axios.get(`ScheduleDetail/${id}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\n\r\n/*\r\ndata : {\r\ndays: [\r\n        {\r\n            DayNumber: 0\r\n            FinishTime: \"01:23\"\r\n            Hours: 2\r\n            ShiftId: null\r\n            StartTime: \"12:00\"\r\n        }\r\n      ]\r\nDescription: \"123123\"\r\nId: -1\r\nName: \"213\"\r\nNoOfWeeks: \"1\"\r\nStartDate: \"31/Jul/20\"\r\n}\r\n */\r\n\r\nfunction PostSchedule(data: any) {\r\n    return axios.post('PostSchedule', data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction DeleteSchedule(id: number) {\r\n    return axios.get(`DeleteSchedule/${id}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction AllocateSchedule(data: any) {\r\n    return axios.post('AllocateSchedule', data).then(res => {\r\n        if (res.data.Messages && res.data.Messages.length >= 1) {\r\n            throw new Error(res.data.Messages[0].Message)\r\n        }\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction RemoveEmployeeWorkSchedule(id: number, employeeNo: number) {\r\n    return axios.get(`RemoveEmployeeWorkSchedule/${employeeNo}/${id}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\n/* Data: {  Id, DateFrom, DateTo, Comment  } */\r\nfunction UpdateEmpSchedRequest(data: any, employeeNo: number) {\r\n    return axios.post(`UpdateEmployeeWorkSchedule/${employeeNo}`, data).then(res => {\r\n        if (res.data.Messages && res.data.Messages.length >= 1) {\r\n            throw new Error(res.data.Messages[0].Message)\r\n        }\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction EmployeesList() {\r\n    return axios.get(`EmployeeOptions`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction EmpWorkScheds(param: any) {\r\n    return axios.get(`EmployeeWorkSchedules/${param}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction EmpSchedDetailRequest(param: any) {\r\n    return axios.get(`EmployeeWorkScheduleDetail/${param}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetFlexScheduleDetail(id: number) {\r\n    return axios.get(`FlexScheduleDetail/${id}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetFlexSchedules(params: any): Promise<RemoteFlexScheDetail[]> {\r\n    return axios.get(`FlexSchedules`, {\r\n        params: params\r\n    }).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction CreateFlexSchedule(data: any) {\r\n    return axios.post(`CreateFlexSchedule/`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\n// notes currently changed to use PatchFlexSchedule\r\nfunction UpdateFlexSchedule(id: number, data: any) {\r\n    return axios.put(`UpdateFlexSchedule/${id}`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction PatchFlexSchedule(data: any) {\r\n    return axios.patch('PatchFlexSchedule', data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\n// CommonName\r\n// EmployeeNo\r\n// StdHoursPerWeek\r\n// PositionCode\r\n\r\nfunction GetManagedEmployees(id: number) {\r\n    return axios.get(`GetManagedEmployees/${id}?fields=EmployeeNo,CommonName,StdHoursPerWeek,PositionCode,PositionTitle`).then(res => {\r\n        if (typeof res.data === \"string\" && res.data !== \"\") {\r\n            return JSON.parse(res.data)\r\n        }\r\n\r\n        return res.data\r\n    })\r\n}\r\n\r\n\r\nfunction GetPosition(employeeNo: number): Promise<EMPPosition[]> {\r\n    return axios.get(`GetPositions/${employeeNo}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetCostelements(): Promise<any> {\r\n    return axios.get(`GetCostElements`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetManagedLeaves(params: any): Promise<Leave[]> {\r\n    return axios.get(`GetManagedLeaves`, {\r\n        params: params\r\n    }).then(res => {\r\n        if (typeof res.data === \"string\") {\r\n            if (res.data === \"\") {\r\n                res.data = []\r\n                return res.data\r\n            }\r\n            return JSON.parse(res.data)\r\n        }\r\n\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction CopyFlexSchedule(data: any): Promise<any> {\r\n    return axios.post(`CopyFlexSchedule`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction DeleteFlexSchedule(id: number) {\r\n    return  axios.delete(`DeleteFlexSchedule/${id}`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction CreateAvailability(data: any) {\r\n    return axios.post(`CreateAvailability`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetAvailabilities(employeeNo: number) {\r\n    return axios.get(`GetAvailability`, {\r\n        params: {\r\n            employeeNo: employeeNo\r\n        }\r\n    } ).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction PatchAvailabilities(data: any) {\r\n    return axios.patch(`PatchAvailability`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction DeleteAvailabilities(employeeNo: number) {\r\n    return axios.delete(`DeleteAvailability/${employeeNo}` ).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetEmployeeExtraDetail(employeeNo: any) {\r\n    return axios.get(`GetAdditionalDetails`, {\r\n        params: {\r\n            employeeNo: employeeNo\r\n        }\r\n    }).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction PublishFlexSchedule(data: any) {\r\n    return axios.post(`PublishFlexSchedule`, data).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetWorkTypes() {\r\n    return axios.get(`WorkTypes`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\nfunction GetDefaultWorkTypes() {\r\n    return axios.get(`ExcludedWorkTypes`).then(res => {\r\n        return res.data\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport default {\r\n    EmployeeWorkSchedule,\r\n    AuthGetInfo,\r\n    StandardSchedules,\r\n    ShiftTypes,\r\n    ScheduleDetail,\r\n    PostSchedule,\r\n    DeleteSchedule,\r\n    AllocateSchedule,\r\n    RemoveEmployeeWorkSchedule,\r\n    UpdateEmpSchedRequest,\r\n    EmployeesList,\r\n    EmpWorkScheds,\r\n    EmpSchedDetailRequest,\r\n    GetFlexScheduleDetail,\r\n    GetFlexSchedules,\r\n    CreateFlexSchedule,\r\n    UpdateFlexSchedule,\r\n    PatchFlexSchedule,\r\n    GetManagedEmployees,\r\n    GetPosition,\r\n    GetCostelements,\r\n    GetManagedLeaves,\r\n    CopyFlexSchedule,\r\n    DeleteFlexSchedule,\r\n    CreateAvailability,\r\n    GetAvailabilities,\r\n    PatchAvailabilities,\r\n    DeleteAvailabilities,\r\n    GetEmployeeExtraDetail,\r\n    PublishFlexSchedule,\r\n    GetWorkTypes,\r\n    GetDefaultWorkTypes\r\n}\r\n\r\n","\r\nimport {defineComponent, inject} from \"vue\";\r\nimport Remote from \"@/remote/scheduleRequest\"\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        Affinity: any;\r\n    }\r\n}\r\n\r\nexport default defineComponent({\r\n    name: 'scheduleNavigation',\r\n    data() {\r\n        return {\r\n            user: <any>null,\r\n            menus: [\r\n                {\r\n                    text: 'Work Schedule',\r\n                    display: 'My Schedules',\r\n                    route: \"/my-schedules\",\r\n                    selected: false,\r\n                    default: true\r\n                },\r\n                {\r\n                    text: 'Availability',\r\n                    display: 'My Availability',\r\n                    route: \"/Availability\",\r\n                    selected: false,\r\n                    default: false\r\n                },\r\n                {\r\n                    text: 'Flex Schedule',\r\n                    display: 'Flexi Schedules',\r\n                    route: \"/flex-schedule\",\r\n                    selected: false,\r\n                    default: false,\r\n                },\r\n                {\r\n                    text: 'Schedule Management',\r\n                    display: 'Team Schedules',\r\n                    route: \"/team-schedules\",\r\n                    selected: false,\r\n                    default: false,\r\n                },\r\n                {\r\n                    text: 'Employee Allocation',\r\n                    display: 'Employee Allocations',\r\n                    route: \"/employee-allocations\",\r\n                    selected: false,\r\n                    default: false\r\n                }\r\n            ],\r\n            selectedMenu: <any>null\r\n        }\r\n    },\r\n    computed: {\r\n        userFullName() {\r\n            // bug: can not use this.user in return, throw missing typing error.\r\n            let user: any = this.user;\r\n            return user ? `${user.FirstName} ${user.LastName}` : '';\r\n        },\r\n        authorizedMenus() {\r\n            var filteredMenus = [];\r\n            var accessibleMenus = this.user.AccessibleMenus;\r\n            // accessibleMenus.push('Flex Schedule')\r\n            // accessibleMenus.push('Availability')\r\n\r\n            // bug: can not use this.user in return, throw missing typing error.\r\n            let menus: any[] = this.menus;\r\n            for (var i = 0; i < this.menus.length; i++) {\r\n                var currentMenuIteration = menus[i];\r\n                if (accessibleMenus.indexOf(currentMenuIteration.text) != -1) {\r\n                    filteredMenus.push(currentMenuIteration);\r\n                }\r\n            }\r\n            return filteredMenus;\r\n        }\r\n    },\r\n    methods: {\r\n        selectMenu: function (menu: any) {\r\n            this.$router.push(menu.route)\r\n\r\n            this.menus.forEach(m => {\r\n                m.selected = false;\r\n            })\r\n            menu.selected = true\r\n        },\r\n        isSelected: function (menuText: string) {\r\n            return this.selectedMenu && this.selectedMenu.text == menuText;\r\n        }\r\n    },\r\n    mounted: function () {\r\n        const manageCompanyConfig: any = inject(\"MANAGE_COMPANY_CONFIG\");\r\n\r\n\r\n        if (!window.Affinity || (window.Affinity && !window.Affinity.user)) {\r\n            console.log('no affinity requesting authInfo')\r\n            // call request to get user\r\n            Remote.AuthGetInfo().then(res => {\r\n                this.user = res\r\n                console.log('set to true')\r\n                manageCompanyConfig.setAllowPersonal(res.AccessibleFeatures.includes('Personal Schedule'))\r\n            });\r\n        } else {\r\n            console.log('loading user from Affinity lib')\r\n            this.user = window.Affinity.user;\r\n\r\n            manageCompanyConfig.setAllowPersonal(this.user.AccessibleFeatures.includes('Personal Schedule'))\r\n\r\n            // todo: move this logic to router\r\n            let selected = this.menus.find(m => m.route === this.$route.path)\r\n\r\n            if (!selected) {\r\n                let defaultMenu = this.menus.find((menu => {\r\n                    return menu.default === true;\r\n                }))\r\n                this.selectMenu(defaultMenu)\r\n            }\r\n        }\r\n    },\r\n})\r\n","import { render } from \"./SchedulesNavigation.vue?vue&type=template&id=805ee54e&scoped=true\"\nimport script from \"./SchedulesNavigation.vue?vue&type=script&lang=ts\"\nexport * from \"./SchedulesNavigation.vue?vue&type=script&lang=ts\"\n\nimport \"./SchedulesNavigation.vue?vue&type=style&index=0&id=805ee54e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-805ee54e\"\n\nexport default script","<template>\r\n    <!--    <div v-model=\"dialog\"  content-class=\"dialog-width\">-->\r\n    <modal ref=\"alertModalRef\" :noBox=\"true\">\r\n        <template v-slot:body>\r\n            <div class=\"promt-box\">\r\n                <div>\r\n                    <div class=\"mr-2 d-inline\" v-if=\"showLoader\">\r\n                        <img class=\"loader-icon\"\r\n                             src=\"data:image/gif;base64,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\">\r\n                    </div>\r\n\r\n                    <div class=\"content \" v-html=\"message\"></div>\r\n                </div>\r\n\r\n                <div class=\"promptButtons mt-4\" v-if=\"showButtons\">\r\n                    <button type=\"button\" class=\"orange white--text small\" v-bind:class=\"{'mr-4' : showCancel}\"  tabindex=\"9999998\"\r\n                            @click=\"onOk\">\r\n                        <!--                    <v-icon small>icon-tick</v-icon>-->\r\n                        <span class=\"label text-capitalize\">{{ confirmButtonText }}</span>\r\n                    </button>\r\n                    <span class=\"\">&nbsp;</span>\r\n                    <button class=\"grey white--text small\" v-if=\"showCancel\" small tabindex=\"9999999\"\r\n                            @click=\"onCancel\">\r\n                        <!--                    <v-icon class=\"mr-1\" small>icon-cancel</v-icon>-->\r\n                        <span class=\"label text-capitalize\">{{ cancelButtonText }}</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <!--        <div v-if=\"showLoader\">-->\r\n        <!--            <img src=\"data:image/gif;base64,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\">-->\r\n        <!--            <div class=\"content\" v-html=\"message\" ></div>-->\r\n        <!--        </div>-->\r\n    </modal>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {emitter} from '../main'\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"alert\",\r\n    components: {\r\n      Modal\r\n    },\r\n    data() {\r\n        return {\r\n            dialog: false,\r\n            message: 'some message ',\r\n            showLoader: false,\r\n            showButtons: false,\r\n            showCancel: false,\r\n            confirmButtonText: 'Ok',\r\n            cancelButtonText: 'Cancel',\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n        // console.log('mounted in alert')\r\n        emitter.on('alert', (message) => {\r\n            console.log('emitter alert')\r\n            this.dialog = true;\r\n            this.message = message;\r\n            this.showLoader = false;\r\n            this.showButtons = true;\r\n        })\r\n\r\n        emitter.on('dialog--loading--request', (message) => {\r\n            console.log('emitter loading request')\r\n            this.dialog = true;\r\n            this.message = message;\r\n            this.showCancel = false;\r\n            this.showButtons = false;\r\n            this.showLoader = true;\r\n        })\r\n\r\n        emitter.on('clearDialog', () => {\r\n            console.log('emitter clear dialog')\r\n            this.clearDialog();\r\n            this.dialog = false;\r\n        });\r\n        emitter.on('dialog', (inputObj) => {\r\n            console.log('emitter on dialog')\r\n            this.toggleShow();\r\n            this.dialog = !!inputObj;\r\n            this.message = inputObj.message;\r\n            this.showCancel = inputObj.showCancel;\r\n            this.showButtons = inputObj.showButtons;\r\n            this.showLoader = inputObj.showLoader;\r\n            this.confirmButtonText = inputObj.confirmButtonText ? inputObj.confirmButtonText : 'Ok'\r\n            this.cancelButtonText = inputObj.cancelButtonText ? inputObj.cancelButtonText : 'Cancel'\r\n\r\n            if (inputObj.onOk) {\r\n                this.onOk = () => {\r\n                    inputObj.onOk();\r\n                    this.dialog = false;\r\n                    this.toggleShow()\r\n                }\r\n            }\r\n\r\n            if (inputObj.onCancel) {\r\n                this.onCancel = () => {\r\n                    inputObj.onCancel();\r\n                    this.dialog = false;\r\n                    this.toggleShow()\r\n                }\r\n            }\r\n\r\n        })\r\n    },\r\n    methods: {\r\n        // onOk() {\r\n        //     this.dialog = false;\r\n        // },\r\n        // onCancel() {\r\n        //     this.dialog = false;\r\n        // },\r\n        clearDialog() {\r\n            (this.$refs.alertModalRef as any).toggleShow(false);\r\n        },\r\n        toggleShow() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n        },\r\n        onOk() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n\r\n        },\r\n        onCancel() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n\r\n        },\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\n::v-deep .dialog-width {\r\n    width: auto;\r\n    max-width: 800px;\r\n}\r\n\r\n.promt-box {\r\n    padding: 20px 60px;\r\n    font-size: 16px;\r\n    background: #333;\r\n    color: #fff;\r\n    text-align: center;\r\n    line-height: 1.2;\r\n    -webkit-border-radius: 10px;\r\n    -moz-border-radius: 10px;\r\n    border-radius: 10px;\r\n    -webkit-box-shadow: 0 3px 5px rgba(0, 0, 0, .5);\r\n    -moz-box-shadow: 0 3px 5px rgba(0, 0, 0, .5);\r\n    box-shadow: 0 3px 5px rgba(0, 0, 0, .5);\r\n    z-index: 10000000;\r\n}\r\n\r\n\r\n.content {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    text-align: center;\r\n}\r\n\r\n.loader-icon {\r\n    vertical-align: middle;\r\n}\r\n</style>","<template>\r\n    <transition name=\"modal\">\r\n        <!--    <div v-if=\"show\">-->\r\n        <div>\r\n            <div v-if=\"show\" class=\"modal-mask\" v-bind:style=\"[modalIndex ? {'z-index': modalIndex } : '']\">\r\n                <div class=\"modal-wrapper\">\r\n                    <div class=\"modal-backdrop\" @click=\"clickWrapper\"></div>\r\n                    <!--          <div class=\"modal-container\">-->\r\n                    <div class=\"modal-box\" v-bind:style=\"getCustomPosition()\" v-bind:class=\"{'no-modal-box': noBox}\">\r\n                        <div class=\"modal-header\">\r\n                            <slot name=\"header\">\r\n                                <!--                default header-->\r\n                            </slot>\r\n                        </div>\r\n\r\n                        <div class=\"modal-body\">\r\n                            <slot name=\"body\">\r\n                                <!--                default body-->\r\n                            </slot>\r\n                        </div>\r\n\r\n                        <div class=\"modal-footer\">\r\n                            <slot name=\"footer\">\r\n                                <!--                default footer-->\r\n                                <!--                <button class=\"modal-default-button\" @click=\"$emit('close'); show=false\">-->\r\n                                <!--                  OK-->\r\n                                <!--                </button>-->\r\n                            </slot>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!--    </div>-->\r\n    </transition>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"modal\",\r\n    props: {\r\n        customPosition: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        top: {\r\n            type: Number,\r\n        },\r\n        left: {\r\n            type: Number\r\n        },\r\n        noBox: {\r\n            type: Boolean\r\n        },\r\n        modalIndex: {\r\n            type: Number,\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            show: false\r\n        }\r\n    },\r\n    methods: {\r\n        toggleShow(isShow?: boolean) {\r\n            if (isShow === true || isShow === false) {\r\n                this.show = isShow\r\n            } else {\r\n                this.show = !this.show\r\n            }\r\n\r\n        },\r\n        clickWrapper() {\r\n            this.show = false;\r\n            this.$emit('cancel')\r\n        },\r\n        getCustomPosition() {\r\n            if (this.customPosition) {\r\n                // let customPosition = [`position: absolute;`, `top: ${this.top};`, `left: ${this.left};`]\r\n                let customPosition = {\r\n                    position: 'absolute',\r\n                    top: `${this.top}px`,\r\n                    left: `${this.left}px`}\r\n                return customPosition\r\n            } else {\r\n                return ''\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n@use '../../style/layouts';\r\n@use \"../../style/colors\";\r\n\r\n.modal-mask {\r\n    position: fixed;\r\n    z-index: 9998;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    /*background-color: rgba(0, 0, 0, 0.5);*/\r\n    display: table;\r\n    transition: opacity 0.3s ease;\r\n}\r\n\r\n.modal-backdrop {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.modal-wrapper {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    display: flex;\r\n    vertical-align: middle;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.modal-box {\r\n    background: white;\r\n    padding: 30px 40px;\r\n    max-width: 940px;\r\n    max-height: 80vh;\r\n    border-radius: 6px;\r\n    box-shadow: colors.$box-shadow-1;\r\n    //$box-shadow-1: 0px 5px 20px rgba(0, 55, 128, 0.2);\r\n\r\n    transition: all 0.3s ease;\r\n    z-index: 99999;\r\n\r\n    @media screen and (max-width: layouts.$md-screen) {\r\n        max-width: 800px;\r\n    }\r\n\r\n    @media screen and (max-width: layouts.$sm-screen) {\r\n        max-width: calc(100% - 40px);\r\n        margin: 0 20px;\r\n    }\r\n}\r\n\r\n.no-modal-box {\r\n    background: transparent;\r\n    box-shadow: none;\r\n}\r\n\r\n.modal-container {\r\n    position: absolute;\r\n    width: 940px;\r\n    top: 100px;\r\n    bottom: 60px;\r\n    left: calc(50% - 940px / 2);\r\n    margin: 0px auto;\r\n    padding: 30px 30px;\r\n    background-color: #fff;\r\n    border-radius: 2px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\r\n    transition: all 0.3s ease;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    overflow: auto;\r\n\r\n    @media screen and (max-width: layouts.$md-screen) {\r\n        width: 800px;\r\n        left: calc(50% - 800px / 2);\r\n\r\n    }\r\n\r\n    @media screen and (max-width: layouts.$sm-screen) {\r\n        width: auto;\r\n        left: 20px;\r\n        right: 20px;\r\n        top: 50px;\r\n        bottom: 50px;\r\n    }\r\n}\r\n\r\n.modal-header h3 {\r\n    margin-top: 0;\r\n    color: #42b983;\r\n}\r\n\r\n.modal-body {\r\n    display: flex;\r\n    justify-content: center;\r\n    max-height: calc(80vh - 160px);\r\n    overflow: auto;\r\n}\r\n\r\n.modal-footer {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n/*\r\n * The following styles are auto-applied to elements with\r\n * transition=\"modal\" when their visibility is toggled\r\n * by Vue.js.\r\n *\r\n * You can easily play with the modal transition by editing\r\n * these styles.\r\n */\r\n\r\n.modal-enter {\r\n    opacity: 0;\r\n}\r\n\r\n.modal-leave-active {\r\n    opacity: 0;\r\n}\r\n\r\n.modal-enter-active {\r\n    transition: all .3s ease-out;\r\n}\r\n\r\n.modal-leave-active {\r\n    transition: all .3s ease-out;\r\n}\r\n\r\n.modal-enter-from,\r\n.modal-leave-to {\r\n    -webkit-transform: scale(1.1);\r\n    transform: scale(1.1);\r\n    opacity: 0;\r\n}\r\n\r\n</style>","\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"modal\",\r\n    props: {\r\n        customPosition: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        top: {\r\n            type: Number,\r\n        },\r\n        left: {\r\n            type: Number\r\n        },\r\n        noBox: {\r\n            type: Boolean\r\n        },\r\n        modalIndex: {\r\n            type: Number,\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            show: false\r\n        }\r\n    },\r\n    methods: {\r\n        toggleShow(isShow?: boolean) {\r\n            if (isShow === true || isShow === false) {\r\n                this.show = isShow\r\n            } else {\r\n                this.show = !this.show\r\n            }\r\n\r\n        },\r\n        clickWrapper() {\r\n            this.show = false;\r\n            this.$emit('cancel')\r\n        },\r\n        getCustomPosition() {\r\n            if (this.customPosition) {\r\n                // let customPosition = [`position: absolute;`, `top: ${this.top};`, `left: ${this.left};`]\r\n                let customPosition = {\r\n                    position: 'absolute',\r\n                    top: `${this.top}px`,\r\n                    left: `${this.left}px`}\r\n                return customPosition\r\n            } else {\r\n                return ''\r\n            }\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Modal.vue?vue&type=template&id=6c97dca8&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=ts\"\nexport * from \"./Modal.vue?vue&type=script&lang=ts\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=6c97dca8&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6c97dca8\"\n\nexport default script","\r\nimport {emitter} from '../main'\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"alert\",\r\n    components: {\r\n      Modal\r\n    },\r\n    data() {\r\n        return {\r\n            dialog: false,\r\n            message: 'some message ',\r\n            showLoader: false,\r\n            showButtons: false,\r\n            showCancel: false,\r\n            confirmButtonText: 'Ok',\r\n            cancelButtonText: 'Cancel',\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n        // console.log('mounted in alert')\r\n        emitter.on('alert', (message) => {\r\n            console.log('emitter alert')\r\n            this.dialog = true;\r\n            this.message = message;\r\n            this.showLoader = false;\r\n            this.showButtons = true;\r\n        })\r\n\r\n        emitter.on('dialog--loading--request', (message) => {\r\n            console.log('emitter loading request')\r\n            this.dialog = true;\r\n            this.message = message;\r\n            this.showCancel = false;\r\n            this.showButtons = false;\r\n            this.showLoader = true;\r\n        })\r\n\r\n        emitter.on('clearDialog', () => {\r\n            console.log('emitter clear dialog')\r\n            this.clearDialog();\r\n            this.dialog = false;\r\n        });\r\n        emitter.on('dialog', (inputObj) => {\r\n            console.log('emitter on dialog')\r\n            this.toggleShow();\r\n            this.dialog = !!inputObj;\r\n            this.message = inputObj.message;\r\n            this.showCancel = inputObj.showCancel;\r\n            this.showButtons = inputObj.showButtons;\r\n            this.showLoader = inputObj.showLoader;\r\n            this.confirmButtonText = inputObj.confirmButtonText ? inputObj.confirmButtonText : 'Ok'\r\n            this.cancelButtonText = inputObj.cancelButtonText ? inputObj.cancelButtonText : 'Cancel'\r\n\r\n            if (inputObj.onOk) {\r\n                this.onOk = () => {\r\n                    inputObj.onOk();\r\n                    this.dialog = false;\r\n                    this.toggleShow()\r\n                }\r\n            }\r\n\r\n            if (inputObj.onCancel) {\r\n                this.onCancel = () => {\r\n                    inputObj.onCancel();\r\n                    this.dialog = false;\r\n                    this.toggleShow()\r\n                }\r\n            }\r\n\r\n        })\r\n    },\r\n    methods: {\r\n        // onOk() {\r\n        //     this.dialog = false;\r\n        // },\r\n        // onCancel() {\r\n        //     this.dialog = false;\r\n        // },\r\n        clearDialog() {\r\n            (this.$refs.alertModalRef as any).toggleShow(false);\r\n        },\r\n        toggleShow() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n        },\r\n        onOk() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n\r\n        },\r\n        onCancel() {\r\n            (this.$refs.alertModalRef as any).toggleShow();\r\n\r\n        },\r\n    }\r\n})\r\n","import { render } from \"./alert.vue?vue&type=template&id=9b88c2bc&scoped=true\"\nimport script from \"./alert.vue?vue&type=script&lang=ts\"\nexport * from \"./alert.vue?vue&type=script&lang=ts\"\n\nimport \"./alert.vue?vue&type=style&index=0&id=9b88c2bc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-9b88c2bc\"\n\nexport default script","<script>\r\nimport Vue from \"vue\";\r\nimport Header from \"./header.vue\";\r\nimport NavBar from \"./navbar.vue\";\r\nimport Footer from \"./footer.vue\";\r\nimport axios from \"axios\";\r\nimport {nextTick} from \"@vue/runtime-core\";\r\n\r\nimport './style/dashboard.default.less'\r\nimport './style/dashboard.foot.less'\r\nimport './style/dashboard.head.less'\r\nimport './style/dashboard.nav.less'\r\nimport './style/dashboard.nav.tiles.less'\r\n\r\nexport default {\r\n  props: {\r\n    version: String,\r\n    enableByConfig: Boolean,\r\n    configUrl: String,\r\n    infoUrl: String,\r\n    logoutUrl: String,\r\n    legacyAuth: Boolean\r\n  },\r\n  data() {\r\n    return {\r\n      user: null,\r\n      error: null,\r\n      apps: [\r\n        {\r\n          Enabled: true,\r\n          Name: \"Dashboard\",\r\n          Url: \"\",\r\n          Icon: \"gauge\"\r\n        }\r\n      ],\r\n      loading: true,\r\n      enabled: true,\r\n      showNav: false,\r\n      hideNav: false\r\n    };\r\n  },\r\n  computed: {\r\n    userFullName() {\r\n      return this.user ? `${this.user.FirstName} ${this.user.LastName}` : \"\";\r\n    },\r\n    logoUrl() {\r\n      let url = this.apps[0].Url;\r\n      return url && this.user\r\n        ? `${url}/Root/Logo?company=${this.user.CompanyNo}&employee=${this.user.EmployeeNo}`\r\n        : \"\";\r\n    }\r\n  },\r\n  methods: {\r\n    authorize(cb) {\r\n      console.log('dashboard authorize')\r\n\r\n        // if (process.env.VUE_APP_LOCAL) {\r\n        if (process.env.VUE_APP_LOCAL1) {\r\n            let getInfoData = {\"FirstName\":\"Norah\",\"LastName\":\"Barlow\",\"CompanyNo\":5004,\"EmployeeNo\":100603,\"UseDashboard\":true,\"AccessibleMenus\":[\"Work Schedule\",\"Schedule Management\",\"Employee Allocation\"]}\r\n            let user = (Affinity.user = this.legacyAuth\r\n                ? {\r\n                    FirstName: getInfoData.Firstname,\r\n                    LastName: getInfoData.Lastname,\r\n                    PayPoint: getInfoData.PayPoint,\r\n                    CompanyNo: getInfoData.CompanyNumber,\r\n                    EmployeeNo: getInfoData.EmployeeNumber\r\n                }\r\n                : getInfoData);\r\n\r\n            this.enabled = !this.enableByConfig || user.UseDashboard;\r\n\r\n            if (cb) cb();\r\n        } else {\r\n            let remoteConfig = {\r\n                method: process.env.VUE_APP_AXIOSHOST ? 'get' : 'post',\r\n                url: this.legacyAuth ? Affinity.authroot + \"/GetUser\" : this.infoUrl\r\n                // url: 'http://localhost:3000/Auth/GetInfo'\r\n            }\r\n\r\n            axios(remoteConfig)\r\n                // axios.get(url)\r\n                .then(resp => {\r\n                    let user = (Affinity.user = this.legacyAuth\r\n                        ? {\r\n                            FirstName: resp.data.Firstname,\r\n                            LastName: resp.data.Lastname,\r\n                            PayPoint: resp.data.PayPoint,\r\n                            CompanyNo: resp.data.CompanyNumber,\r\n                            EmployeeNo: resp.data.EmployeeNumber\r\n                        }\r\n                        : resp.data);\r\n\r\n                    this.enabled = !this.enableByConfig || user.UseDashboard;\r\n\r\n                    if (cb) cb();\r\n                })\r\n                .catch((err) => {\r\n                    console.log('err', err)\r\n                    this.error = \"Unable to load the page.\";\r\n                    this.loading = false;\r\n                });\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n    getConfig() {\r\n      let remoteConfig = {\r\n        method: process.env.VUE_APP_AXIOSHOST ? 'get' : 'post',\r\n        url: this.configUrl\r\n      }\r\n\r\n      axios(remoteConfig)\r\n        // .get(this.configUrl)\r\n        .then(resp => {\r\n          let config = resp.data;\r\n\r\n          this.user = Affinity.user;\r\n\r\n          this.apps[0].Url = config.Url;\r\n\r\n          if (config.Apps) {\r\n            config.Apps.forEach(app => {\r\n              this.apps.push(app.Link);\r\n            });\r\n          }\r\n\r\n          if (config.Forms && this.user.EmployeeNo <= 5000000) {\r\n            config.Forms.forEach(form => {\r\n              if (form.Enabled) this.apps.push(form);\r\n            });\r\n          }\r\n\r\n          this.loading = false;\r\n\r\n          nextTick(() => {\r\n            this.$emit(\"ready\", config);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.error = \"Unable to load the page.\";\r\n        })\r\n        .then(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    reloadPage() {\r\n      window.location.reload();\r\n    },\r\n    onNavToggle(mobile) {\r\n      if (mobile) this.showNav = !this.showNav;\r\n      else this.hideNav = !this.hideNav;\r\n    },\r\n    onNavHide() {\r\n      this.showNav = false;\r\n    }\r\n  },\r\n  created() {\r\n    console.log('dashboard created')\r\n    this.authorize(() => {\r\n      if (this.enabled) {\r\n        this.getConfig();\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    });\r\n  },\r\n  components: {\r\n    \"dash-header\": Header,\r\n    navbar: NavBar,\r\n    \"dash-footer\": Footer\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"{ dashboard: enabled, 'show-nav': showNav, 'hide-nav': hideNav }\">\r\n    <div v-if=\"loading\" class=\"UIPromtBoxBG\">\r\n      <div class=\"UIPromtBox loader\">\r\n        <span class=\"img-loader\"></span>\r\n        <span class=\"content aligncenter\">Please wait</span>\r\n      </div>\r\n    </div>\r\n    <div v-else-if=\"error\" class=\"UIPromtBoxBG\">\r\n      <div class=\"UIPromtBox error-text\">\r\n        <span>{{ error }}</span>\r\n        <br />\r\n        <a href=\"javascript:void(0)\" @click=\"reloadPage\">Please retry</a>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"pagewrapper\">\r\n      <dash-header :title=\"userFullName\" :logoUrl=\"logoUrl\" @navtoggle=\"onNavToggle\"></dash-header>\r\n      <navbar :apps=\"apps\" :logout-url=\"logoutUrl\" @hide=\"onNavHide\"></navbar>\r\n      <div class=\"pagecontent\">\r\n        <div class=\"contentwrapper\">\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n      <dash-footer :version=\"version\"></dash-footer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.dashboard {\r\n  height: 100%;\r\n\r\n  .UIPromtBox.error-text {\r\n    a {\r\n      color: #90caf9;\r\n      margin-top: 5px;\r\n      display: inline-block;\r\n\r\n      &:hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script>\r\n    export default {\r\n        props: {\r\n            title: String,\r\n            logoUrl: String\r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <div class=\"dash-header\">\r\n        <div id=\"mobile-nav-toggle\" class=\"dash-menu-toggle\" @mousedown.stop=\"\">\r\n            <span class=\"icon-list\" @click=\"$emit('navtoggle', true)\"></span>\r\n        </div>\r\n        <div id=\"desktop-nav-toggle\" class=\"dash-menu-toggle\">\r\n            <span class=\"icon-list\" @click=\"$emit('navtoggle', false)\"></span>\r\n        </div>\r\n        <div class=\"dash-header-title displayname\">{{ title }}</div>\r\n        <div class=\"dash-header-logo\">\r\n            <img :src=\"logoUrl\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n","import { render } from \"./header.vue?vue&type=template&id=3432a2e3\"\nimport script from \"./header.vue?vue&type=script&lang=js\"\nexport * from \"./header.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<script>\r\n    import NavItem from './nav-item.vue';\r\n    import Scrollable from '../scrollable.vue';\r\n\r\n    export default {\r\n        props: {\r\n            apps: Array,\r\n            logoutUrl: String\r\n        },\r\n        data() {\r\n            return {\r\n                mousedown: false\r\n            }\r\n        },\r\n        computed: {\r\n            enabledApps() {\r\n                if (this.apps instanceof Array) {\r\n                    let apps = [];\r\n\r\n                    this.apps.forEach((app) => {\r\n                        if (app && app.Enabled) apps.push(app);\r\n                    })\r\n\r\n                    return apps;\r\n                }\r\n\r\n                return [];\r\n            },\r\n            signoutUrl() {\r\n                if (this.logoutUrl) return this.logoutUrl;\r\n\r\n                let url = this.apps[0].Url;\r\n\r\n                for (let i = 1; i < this.apps.length; i++) {\r\n                    let app = this.apps[i];\r\n\r\n                    if (app && app.Name == Affinity.app) {\r\n                        return url + '/Root/ExternalLogout?redirectUrl=' + encodeURI(app.Url);\r\n                    }\r\n                }\r\n\r\n                return '/Auth/SignOut';\r\n            }\r\n        },\r\n        methods: {\r\n            onMouseDown() {\r\n                this.mousedown = true;\r\n            },\r\n            onBodyMouseDown(evt) {\r\n                if (!this.mousedown) this.$emit('hide');\r\n                this.mousedown = false;\r\n            }\r\n        },\r\n        created() {\r\n            document.body.addEventListener('mousedown', this.onBodyMouseDown);\r\n        },\r\n        beforeUnmount() {\r\n            document.body.removeEventListener('mousedown', this.onBodyMouseDown);\r\n        },\r\n        components: {\r\n            NavItem,\r\n            Scrollable\r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <div id=\"dash-nav\" class=\"dash-nav accordion\" @mousedown=\"onMouseDown\">\r\n        <div class=\"top\">\r\n            <scrollable :scroll-x=\"false\">\r\n                <nav-item v-for=\"(app, index) of enabledApps\" :data=\"app\" :key=\"index\"></nav-item>\r\n            </scrollable>\r\n        </div>\r\n        <div class=\"bottom\">\r\n            <div class=\"divider\"></div>\r\n            <a class=\"dash-nav-item\" :href=\"signoutUrl\">\r\n               <span class=\"dash-nav-item-inner\">\r\n                   <span class=\"icon icon-logout\"></span>\r\n                   <span class=\"label\">Logout</span>\r\n               </span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</template>\r\n","<script>\r\nimport Vue from 'vue';\r\nimport URI from 'urijs';\r\n// import TweenMax from 'TweenMax';\r\nimport gsap from 'gsap';\r\nimport {nextTick} from \"@vue/runtime-core\";\r\n\r\n    export default {\r\n        name: 'nav-item',\r\n        props: {\r\n            data: {\r\n                type: Object,\r\n                default() {\r\n                    return {};\r\n                }\r\n            },\r\n            host: String,\r\n            isOwned: Boolean\r\n        },\r\n        data() {\r\n            return {\r\n                expanded: false,\r\n                expanding: false\r\n            }\r\n        },\r\n        computed: {\r\n            target() {\r\n                return this.data.External ? this.data.Name || '_blank' : '_self';\r\n            },\r\n            selected() {\r\n              var path = new URI(this.url).path().toLowerCase();\r\n              return (!this.isOwned && Affinity.app == this.data.Name)\r\n                || (path !== '/' && path === window.location.pathname.toLowerCase()) \r\n                || (path === '/cleverforms/inbox' && window.location.pathname.toLowerCase() === '/inbox') \r\n                || (path === '/cleverforms/template' && window.location.pathname.toLowerCase() === '/template') \r\n                || (path === '/cleverforms/admin' && window.location.pathname.toLowerCase() === '/admin');\r\n            },\r\n            hasMenu() {\r\n                return this.data.Menu && this.data.Menu.length > 0;\r\n            },\r\n            url() {\r\n                return this.hasMenu ? 'javascript:void(0);' : this.data.Url;\r\n            }\r\n        },\r\n        methods: {\r\n            toggleMenu() {\r\n                if (!this.hasMenu) return;\r\n\r\n                this.expanding = !this.expanded;\r\n\r\n                if (this.expanding) {\r\n                    this.expanded = true;\r\n                    nextTick(() => {\r\n                        gsap.from(this.$refs.menu, {\r\n                            duration: 0.25,\r\n                            height: 0\r\n                        });\r\n                    })\r\n                }\r\n                else gsap.to(this.$refs.menu, {\r\n                    duration: 0.25,\r\n                    height: 0,\r\n                    onComplete: () => {\r\n                        this.expanded = false;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        mounted() {\r\n            this.expanded = this.selected && this.hasMenu;\r\n            this.expanding = this.expanded;\r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <a class=\"dash-nav-item\" :href=\"url\" :target=\"target\" :class=\"{ selected: selected, 'has-sub-nav': hasMenu, expanded: !expanding }\">\r\n       <div class=\"dash-nav-item-inner\" @click=\"toggleMenu\">\r\n           <span class=\"sub-nav-icon icon-arrow-line-small-up\"></span>\r\n           <span :class=\"'icon icon-' + data.Icon\"></span>\r\n           <span class=\"label\">{{ data.Text || data.Name }}</span>\r\n       </div>\r\n       <div ref=\"menu\" class=\"sub-nav\" v-if=\"hasMenu && expanded\">\r\n           <nav-item v-for=\"(subItem, index) in data.Menu\" :data=\"subItem\" :is-owned=\"true\" :key=\"index\"></nav-item>\r\n       </div>\r\n    </a>\r\n</template>\r\n","import { render } from \"./nav-item.vue?vue&type=template&id=fb549ec8\"\nimport script from \"./nav-item.vue?vue&type=script&lang=js\"\nexport * from \"./nav-item.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<script>\r\nimport Ps from 'perfect-scrollbar';\r\nimport erd from 'element-resize-detector';\r\nimport 'perfect-scrollbar/css/perfect-scrollbar.css'\r\n\r\nexport default {\r\n    props: {\r\n        scrollX: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        scrollY: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            ps: null,\r\n            resizeDetector: erd({\r\n                strategy: \"scroll\"\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        onResize() {\r\n            if (this.ps) {\r\n                this.ps.update(this.$refs.container);\r\n            }\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n        this.ps = new Ps(this.$refs.container, {\r\n            suppressScrollX: !this.scrollX,\r\n            suppressScrollY: !this.scrollY\r\n        });\r\n\r\n        // Ps.initialize(this.$refs.container, {\r\n        //     suppressScrollX: !this.scrollX,\r\n        //     suppressScrollY: !this.scrollY\r\n        // });\r\n        this.resizeDetector.listenTo(this.$refs.container, this.onResize);\r\n\r\n        for (let i = 0; i < this.$slots.default.length; i++) {\r\n            let el = this.$slots.default[i].elm;\r\n            this.resizeDetector.listenTo(el, this.onResize);\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        this.resizeDetector.uninstall(this.$refs.container);\r\n\r\n        for (let i = 0; i < this.$slots.default.length; i++) {\r\n            let el = this.$slots.default[i].elm;\r\n            this.resizeDetector.uninstall(el);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div ref=\"container\" class=\"scrollable\">\r\n        <slot></slot>\r\n    </div>\r\n</template>\r\n","import { render } from \"./scrollable.vue?vue&type=template&id=670603d5\"\nimport script from \"./scrollable.vue?vue&type=script&lang=js\"\nexport * from \"./scrollable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./navbar.vue?vue&type=template&id=f5021d2e\"\nimport script from \"./navbar.vue?vue&type=script&lang=js\"\nexport * from \"./navbar.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<script>\r\n    export default {\r\n        props: {\r\n            version: String\r\n        },\r\n        computed: {\r\n            year() {\r\n                return new Date().getFullYear();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <div class=\"dash-footer\">\r\n        <span v-if=\"version\" class=\"version\">Version {{ version }}</span>\r\n        &copy; Copyright {{ year }} Affinity - <a href=\"http://www.affinityteam.co.nz/\" target=\"affinity\">Affinity Employer Services</a>\r\n        <a href=\"http://www.affinityteam.co.nz/\" target=\"affinity\"><span class=\"dash-footer-logo\"></span></a>\r\n    </div>\r\n</template>\r\n","import { render } from \"./footer.vue?vue&type=template&id=fc2f964e\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=348e10a8\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=348e10a8&lang=scss\"\nscript.render = render\n\nexport default script","import Component from './index.vue';\r\nexport default Component;\r\n","import { render } from \"./App.vue?vue&type=template&id=46f75afd\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=46f75afd&lang=css\"\nscript.render = render\n\nexport default script","<style src=\"./mySchedules.scss\" lang=\"scss\"></style>\r\n<template>\r\n    <div class=\"mt-4 mt-md-10\">\r\n\r\n        <div class=\"my-schedules-search-filter d-flex flex-wrap align-center mb-sm-4\">\r\n            <div class=\" mr-2 mr-sm-6 date-searcher d-flex align-center\">\r\n                <div class=\"mr-2 d-inline caption bold date-searcher-label\">Date From</div>\r\n\r\n                <input :value=\"$filters.reformatDate(fromDate)\"\r\n                       class=\"d-inline-flex ma-0 pa-0 mr-2 caption\" style=\"max-width:120px\"\r\n                       @change=\"updateDateText($event, fromDate, 'fromDate')\"\r\n                       @click=\"updateDateTime($event, fromDate, 'fromDate')\"\r\n                       @click:clear=\"fromDate = null\">\r\n\r\n                <button class=\"light-blue small px-aff-10 ml-2 lh-0\"\r\n                        @click=\"updateDateTime($event, fromDate, 'fromDate')\"\r\n                        v-tooltip.top=\"{content: 'Open calendar'}\">\r\n                    <span class=\"icon-popup white xs-icon\"></span></button>\r\n\r\n                <button class=\"green small px-aff-10 lh-0\" @click=\"selectDateTodayForFromDate()\"\r\n                        v-tooltip.top=\"{content: 'Set to today'}\">\r\n                    <span class=\"icon-calendar white xs-icon\"></span></button>\r\n                <button class=\"orange small px-aff-10 lh-0\" @click=\"fromDate=null\"\r\n                        v-tooltip.top=\"{content: 'Clear'}\">\r\n                    <span class=\"icon-cross white\"></span></button>\r\n            </div>\r\n            <div class=\"date-searcher d-flex align-center ml-4\">\r\n                <div class=\"mr-2 d-inline caption bold date-searcher-label\">Date To</div>\r\n                <input :value=\"$filters.reformatDate(toDate)\"\r\n                       outlined dense hide-details\r\n                       class=\"d-inline-flex ma-0 pa-0 mr-2 caption\" style=\"max-width:120px\"\r\n                       @change=\"updateDateText($event, toDate, 'toDate')\"\r\n                       @click=\"updateDateTime($event, toDate, 'toDate')\"\r\n                       @click:clear=\"toDate = null\">\r\n                <button class=\"light-blue small px-aff-10 ml-2 lh-0\" tile\r\n                        @click=\"updateDateTime($event, toDate, 'toDate')\"\r\n                        v-tooltip.top=\"{content: 'Open calendar'}\">\r\n                    <span class=\"icon-popup white\" x-small></span></button>\r\n                <button class=\"green small px-aff-10 lh-0\" tile @click=\"selectDateTodayForToDate()\"\r\n                        v-tooltip.top=\"{content: 'Set to today'}\">\r\n                    <span class=\"icon-calendar white\" x-small></span></button>\r\n                <button class=\"orange small px-aff-10 lh-0\" tile @click=\"toDate = null\"\r\n                        v-tooltip.top=\"{content: 'Clear'}\">\r\n                    <span class=\"icon-cross white\" x-small></span></button>\r\n            </div>\r\n            <button class=\"light-blue white--text ml-4 ml-sm-4 mt-sm-0 px-aff-10 small\" @click=\"printWorkSchedule()\">\r\n                <span class=\"mr-1 icon-printer\" x-small></span><span class=\"text-capitalize\">Print</span>\r\n            </button>\r\n        </div>\r\n\r\n        <div style=\"margin-top: 10px;\">\r\n            <div class=\"schedules-data-small\" style=\"overflow:auto;\">\r\n                <div class=\"\" v-for=\"schedule in schedules\" style=\"width:100%;\">\r\n                    <div class=\"weekInfoDisplay py-2\">\r\n                        <div class=\"schedules-data-small-head\">\r\n                            <div>\r\n                                <h3>{{ schedule.weekName }}</h3>\r\n                            </div>\r\n                            <div>{{ schedule.weekDateRange }}</div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"dayScheduleDisplay\" v-for=\"(detail, index) in schedule.detailArr\">\r\n                        <div>\r\n                            {{ schedule.weekName }} - {{ getWeekDayByIndex(index) }}\r\n                        </div>\r\n\r\n                        <div v-if=\"displayScheduleDetail(detail)\">\r\n                            <div>{{ detail.shiftDescription }}</div>\r\n                            <div v-if=\"detail.startTime\">Start Time:{{ detail.startTime }}</div>\r\n                            <div v-if=\"detail.finishTime\">Finish Time:{{ detail.finishTime }}</div>\r\n                            <div v-if=\"detail.hours\">Hours:{{ detail.hours }}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"workSchedules\" class=\"schedules-data-medium section\" style=\"overflow:auto;\">\r\n                <div class=\"my-schedules aff-table\">\r\n                    <table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Week</th>\r\n                            <th>Mon</th>\r\n                            <th>Tue</th>\r\n                            <th>Wed</th>\r\n                            <th>Thu</th>\r\n                            <th>Fri</th>\r\n                            <th>Sat</th>\r\n                            <th>Sun</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr class=\"myschedules-tr\" v-for=\"schedule in schedules\">\r\n                                <td class=\"weekInfoRows\">\r\n                                    <div>{{ schedule.weekName }}</div>\r\n                                    <div>{{ schedule.weekDateRange }}</div>\r\n                                </td>\r\n\r\n                                <td class=\"myschedules-td\" v-for=\"detail in schedule.detailArr\">\r\n                                    <div v-if=\"displayScheduleDetail(detail)\">\r\n                                        <div>{{ detail.date }}</div>\r\n                                        <div class=\"bold-text\">{{ detail.shiftDescription }}</div>\r\n                                        <div v-if=\"detail.hours\">Hours:{{ detail.hours }}</div>\r\n                                        <div v-if=\"detail.startTime\">{{ detail.startTime }} -\r\n                                            {{ detail.finishTime }}\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <date-picker ref=\"DatePickerRef\"\r\n                     :top=\"dateModalTop\"\r\n                     :leftInput=\"dateModalLeft\"\r\n                     :max-date=\"datePickerMax\"\r\n                     :min-date=\"datePickerMin\"\r\n                     :date=\"datePickerTargetDay\"></date-picker>\r\n\r\n    </div>\r\n\r\n</template>\r\n<script lang=\"ts\">\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport moment, {Moment} from 'moment';\r\nimport Dialog from '@/components/dialog';\r\n\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nenum DatePickerFormat {\r\n    fromDate = 'fromDate',\r\n    toDate = 'toDate'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: 'mySchedules',\r\n    components: {\r\n        DatePicker,\r\n        // FlexSchedule\r\n    },\r\n    data() {\r\n        return {\r\n            title: 'Work Schedule',\r\n\r\n            schedules: [],\r\n            user: null,\r\n            datePickerFormat: \"dd/MM/yyyy\",\r\n\r\n            //\r\n            menu1: false,\r\n            menu2: false,\r\n            fromDate: <Moment | null> null,\r\n            toDate: <Moment | null> null,\r\n\r\n            //\r\n            //  date picker\r\n            dateModal: false,\r\n            // datePickerDate: \"\",\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n            datePickerTargetDay: moment(), // todo: clear moment and string mix\r\n            selectedDateType: DatePickerFormat.fromDate, // Start Finish\r\n            datePickerMax: <Moment | null>null,\r\n            datePickerMin: <Moment | null>null\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n        var currentDate = new Date();\r\n        currentDate.setHours(0, 0, 0, 0);\r\n        var intDate = currentDate.getDate();\r\n        var currentWeekDay = currentDate.getDay();\r\n        var fromDate = new Date();\r\n        fromDate.setHours(0, 0, 0, 0);\r\n        var toDate = new Date();\r\n        toDate.setHours(0, 0, 0, 0);\r\n\r\n        var weekDayFactor = currentWeekDay == 0 ? 7 : currentWeekDay;\r\n        fromDate.setDate(intDate - (weekDayFactor - 1));\r\n        toDate.setDate(intDate + (7 - weekDayFactor));\r\n\r\n        this.fromDate = moment(fromDate);\r\n        this.toDate = moment(toDate);\r\n\r\n        this.loadSchedules(this.fromDate, this.toDate);\r\n    },\r\n\r\n    methods: {\r\n        updateDateText(event: any, target: any, type: string) {\r\n            if (type === 'toDate') {\r\n                this.toDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            } else {\r\n                this.fromDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            }\r\n            this.dateModal = false;\r\n\r\n            // todo: add check for is correct format\r\n        },\r\n\r\n        updateDateTime($event: any, d: any, type: DatePickerFormat) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.selectedDateType = type;\r\n            if (type === 'toDate') {\r\n                if (this.fromDate) {\r\n                    this.datePickerMin = this.fromDate;\r\n                    this.datePickerMax = null;\r\n                }\r\n\r\n                this.datePickerTargetDay = this.toDate ? this.toDate : moment();\r\n            } else {\r\n                if (this.toDate) {\r\n                    this.datePickerMin = null;\r\n                    this.datePickerMax = this.toDate;\r\n                }\r\n                this.datePickerTargetDay = this.fromDate ? this.fromDate : moment();\r\n            }\r\n\r\n            this.dateModal = true;\r\n            this.openDatePicker()\r\n        },\r\n\r\n        printWorkSchedule: function () {\r\n            var args = \"left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1\";\r\n            var content = (document as any).getElementById(\"workSchedules\").innerHTML;\r\n            var mywindow: any = window.open('', 'Print', args);\r\n\r\n            mywindow.document.write('<html>');\r\n            mywindow.document.write('<head>');\r\n            mywindow.document.write('<style type=\"text/css\">table {border-collapse: collapse;}</style>');\r\n            mywindow.document.write('<style type=\"text/css\">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>');\r\n            mywindow.document.write('</head>');\r\n            mywindow.document.write('<body>');\r\n            mywindow.document.write(content);\r\n            mywindow.document.write('</body></html>');\r\n\r\n            mywindow.document.close();\r\n            mywindow.focus()\r\n            mywindow.print();\r\n            mywindow.close();\r\n        },\r\n        loadSchedules: function (fromDate: any, toDate: any) {\r\n            if (fromDate !== null) {\r\n                fromDate.startOf('day')\r\n            }\r\n\r\n            if (toDate !== null && toDate !== '') {\r\n                toDate.startOf('day')\r\n            }\r\n\r\n            this.schedules = [];\r\n\r\n            if (toDate === null && fromDate === null) {\r\n                return;\r\n            }\r\n\r\n            if (toDate !== null && fromDate === null) {\r\n                fromDate = toDate;\r\n            }\r\n\r\n            if (toDate === null && fromDate !== null) {\r\n                toDate = fromDate;\r\n            }\r\n\r\n            var param = {\r\n                employeeNo: <number | null>null,\r\n                fromDate: null,\r\n                toDate: null\r\n            };\r\n\r\n            if (fromDate !== null && toDate !== null) {\r\n                var finalFromDate = fromDate.format(\"DD/MM/YYYY\");\r\n                var finalToDate = toDate.format(\"DD/MM/YYYY\");\r\n                param = {\r\n                    employeeNo: window.Affinity.user.EmployeeNo,\r\n                    // employeeNo: 1148,\r\n                    fromDate: finalFromDate,\r\n                    toDate: finalToDate\r\n                };\r\n            }\r\n\r\n            Dialog.loading();\r\n            Remote.EmployeeWorkSchedule(param).then(response => {\r\n                let tempSchedules = response;\r\n                // server return json include key name 'mondayScheduleDetail' to 'sundayScheduleDetail'\r\n                // transform it into a array so we can v-for it in correct order.\r\n                for (let week of tempSchedules) {\r\n                    week.detailArr = [];\r\n                    week.detailArr.push(week.mondayScheduleDetail);\r\n                    week.detailArr.push(week.tuesdayScheduleDetail);\r\n                    week.detailArr.push(week.wednesdayScheduleDetail);\r\n                    week.detailArr.push(week.thursdayScheduleDetail);\r\n                    week.detailArr.push(week.fridayScheduleDetail);\r\n                    week.detailArr.push(week.saturdayScheduleDetail);\r\n                    week.detailArr.push(week.sundayScheduleDetail);\r\n\r\n                    for (let detail of week.detailArr) {\r\n                        // clear default value\r\n                        if (detail.finishTime === \"12:00 am\" && detail.startTime === '12:00 am'\r\n                            || detail.finishTime === \"12:00 AM\" && detail.startTime === '12:00 AM') {\r\n                            detail.finishTime = '';\r\n                            detail.startTime = '';\r\n                        }\r\n\r\n                        if (detail.hours === \"0\") {\r\n                            detail.hours = '';\r\n                            detail.shiftDescription = '';\r\n                        }\r\n                    }\r\n                }\r\n\r\n                this.schedules = tempSchedules;\r\n                Dialog.clear();\r\n            }).finally(() => {\r\n                Dialog.clear();\r\n            })\r\n        },\r\n\r\n        displayScheduleDetail(scheduleDetail: any) {\r\n            return scheduleDetail.hours !== 0 && scheduleDetail.hours !== null && scheduleDetail.hours !== \"\";\r\n        },\r\n\r\n        selectDateTodayForFromDate: function () {\r\n            this.fromDate = moment().startOf('day')\r\n            this.toDate = null;\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n        },\r\n\r\n        selectDateTodayForToDate: function () {\r\n            this.toDate = moment();\r\n            this.toDate.hour(11)\r\n            this.toDate.minute(59)\r\n            if (this.toDate < this.fromDate!) {\r\n                this.fromDate = null;\r\n            }\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n        },\r\n\r\n        getWeekDayByIndex: function (index: number) {\r\n            let weekdayArray = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\r\n            return weekdayArray[index];\r\n        },\r\n\r\n        async openDatePicker() {\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay)) as Promise<any>;\r\n\r\n            if (this.selectedDateType === DatePickerFormat.toDate) {\r\n                this.toDate = result as any;\r\n            } else if (this.selectedDateType === DatePickerFormat.fromDate) {\r\n                this.fromDate = result as any;\r\n            }\r\n\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n\r\n            return result;\r\n        }\r\n    }\r\n})\r\n</script>\r\n","import {emitter} from \"../main\";\r\n\r\nconst DIALOG_QUEUE = []\r\n\r\nexport interface ConfirmDialogInput {\r\n    message: string,\r\n    confirmButtonText?: string,\r\n    cancelButtonText?: string,\r\n}\r\n\r\n\r\nfunction testDialog() {\r\n    emitter.emit('dialog', {\r\n        message: 'here is a test dialog',\r\n        showButtons: true,\r\n        showCancel: true,\r\n        okColor: 'orange',\r\n    })\r\n}\r\n\r\nfunction checkChange(input: any) {\r\n    emitter.emit('dialog', {\r\n        dialog: true,\r\n        message: input.message,\r\n        showCancel: true,\r\n        showButtons: true,\r\n        showLoader: false,\r\n        confirmButtonText: input.confirmButtonText ? input.confirmButtonText : 'Yes',\r\n        cancelButtonText: input.cancelButtonText ? input.cancelButtonText : 'No',\r\n        onOk: () => {\r\n            input.onOk();\r\n        },\r\n        onCancel: () => {\r\n            if (input.onCancel) {\r\n                input.onCancel();\r\n            }\r\n        },\r\n    })\r\n}\r\n\r\nfunction confirmOrCancel(input: ConfirmDialogInput): Promise<any> {\r\n    return new Promise((confirm, reject) => {\r\n        emitter.emit('dialog', {\r\n            dialog: true,\r\n            message: input.message,\r\n            showCancel: true,\r\n            showButtons: true,\r\n            showLoader: false,\r\n            confirmButtonText: input.confirmButtonText ? input.confirmButtonText : 'Yes',\r\n            cancelButtonText: input.cancelButtonText ? input.cancelButtonText : 'No',\r\n            onOk: () => {\r\n                // input.onOk();\r\n                confirm('ok');\r\n            },\r\n            onCancel: () => {\r\n                reject('cancel')\r\n            },\r\n        })\r\n    })\r\n}\r\n\r\nfunction alert(message: string) {\r\n    emitter.emit('dialog', {\r\n        dialog: true,\r\n        message: message,\r\n        showLoader: false,\r\n        showButtons: true,\r\n        onOk: () => {\r\n            // do nothing\r\n        },\r\n        onCancel: () => {\r\n            // do nothing\r\n        }\r\n    })\r\n\r\n}\r\n\r\nfunction loading(message?: string) {\r\n    emitter.emit('dialog', {\r\n        dialog: true,\r\n        message: message ? message : \"Loading\",\r\n        showCancel: false,\r\n        showButtons: false,\r\n        showLoader: true,\r\n    })\r\n    // DIALOG_QUEUE.push('message')\r\n}\r\n\r\nfunction clear() {\r\n    // DIALOG_QUEUE.pop();\r\n    // if (DIALOG_QUEUE.length === 0) {\r\n    emitter.emit('clearDialog')\r\n    // }\r\n}\r\n\r\nexport default {\r\n    testDialog,\r\n    loading,\r\n    clear,\r\n    checkChange,\r\n    alert,\r\n    confirmOrCancel\r\n}","<template>\r\n    <Modal ref=\"ModalRef\" :top=\"top\" :left=\"calculateLeft(left)\" :customPosition=\"!!(top || left)\" @cancel=\"cancelPickDate\">\r\n        <template v-slot:body>\r\n            <div class=\"v3-calendar\">\r\n                <section class=\"dp-heading\">\r\n                    <span class=\"icon-arrow-left\" @click=\"previousMonth\"></span>\r\n                    <div>{{ selectedDate.format('YYYY MMM') }}</div>\r\n                    <span class=\"icon-arrow-right\" @click=\"nextMonth\"></span>\r\n                </section>\r\n                <section class=\"db-content\">\r\n                    <div class=\"dp-week-of-day\">\r\n                        <span v-for=\"weekDay in weekOfDays\">{{ weekDay.shortName }}</span>\r\n                    </div>\r\n                    <div class=\"dp-week-days\">\r\n                        <span class=\"date-wrapper\" v-for=\"calendarDay in calendarArr\">\r\n                              <span class=\"date-number-cell\"\r\n                                    @click=\"selectDate(calendarDay)\"\r\n                                    v-bind:class=\"{'today-target': colorToday(calendarDay),\r\n                                     'not-valid': !calendarDay.isValid,\r\n                                     'last-month-day': calendarDay.lastMonth,\r\n                                     'next-month-day': calendarDay.nextMonth,\r\n                                     'selected': calendarDay.selected}\">{{ calendarDay.dateNumber }}\r\n                              </span>\r\n                        </span>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </template>\r\n    </Modal>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nexport interface CalendarDay {\r\n    dateNumber: number,\r\n    month: number,\r\n    lastMonth?: boolean,\r\n    nextMonth?: boolean,\r\n    isValid?: boolean,\r\n    selected: boolean,\r\n    year: number\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"DatePicker\",\r\n    components: {\r\n        Modal\r\n    },\r\n    props: {\r\n        top: {\r\n            type: Number,\r\n        },\r\n        leftInput: {\r\n            type: Number\r\n        },\r\n        date: {\r\n            type: Object\r\n        },\r\n        maxDate: {\r\n            type: Object\r\n        },\r\n        minDate: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            left: 0,\r\n            currentYear: 2021,\r\n            datePickerPromise: <any>null,\r\n            resolve: <any>null,\r\n            reject: <any>null,\r\n            selectedDate: moment(),\r\n            weekOfDays: [{\r\n                    fullName: \"Sunday\",\r\n                    shortName: \"Sun\",\r\n                    dayNumber: 0,\r\n                },\r\n                {\r\n                    fullName: \"Monday\",\r\n                    shortName: \"Mon\",\r\n                    dayNumber: 1,\r\n                },\r\n                {\r\n                    fullName: \"Tuesday\",\r\n                    shortName: \"Tue\",\r\n                    dayNumber: 2,\r\n                },\r\n                {\r\n                    fullName: \"Wednesday\",\r\n                    shortName: \"Wed\",\r\n                    dayNumber: 3,\r\n                },\r\n                {\r\n                    fullName: \"Thursday\",\r\n                    shortName: \"Thu\",\r\n                    dayNumber: 4,\r\n                },\r\n                {\r\n                    fullName: \"Friday\",\r\n                    shortName: \"Fri\",\r\n                    dayNumber: 5,\r\n                },\r\n                {\r\n                    fullName: \"Saturday\",\r\n                    shortName: \"Sat\",\r\n                    dayNumber: 6\r\n                }\r\n            ],\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        const calendarArr = ref<CalendarDay[]>([]);\r\n        const currentMonth = ref();\r\n        currentMonth.value = moment().month();\r\n\r\n        return {\r\n            currentMonth,\r\n\r\n            calendarArr\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this.calculateMonth();\r\n        this.datePickerPromise = new Promise((resolve, reject) => {\r\n          this.resolve = resolve;\r\n          this.reject = reject;\r\n        })\r\n    },\r\n\r\n    watch: {\r\n        maxDate () {\r\n            if (this.selectedDate) {\r\n                this.calculateBaseOnInput(this.selectedDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n        },\r\n        minDate() {\r\n            if (this.selectedDate) {\r\n                this.calculateBaseOnInput(this.selectedDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        cancelPickDate() {\r\n            this.reject();\r\n        },\r\n        calculateLeft() {\r\n            if (!this.leftInput) return 0;\r\n            // this.left = <any>this.leftInput\r\n            if (window.innerWidth < this.leftInput + 370) {\r\n                this.left = window.innerWidth - 400;\r\n            } else {\r\n                this.left = this.leftInput\r\n            }\r\n            return this.left\r\n        },\r\n        nextMonth() {\r\n            this.currentMonth = this.currentMonth + 1\r\n            this.calculateMonth()\r\n        },\r\n\r\n        previousMonth() {\r\n            this.currentMonth = this.currentMonth - 1\r\n            this.calculateMonth()\r\n        },\r\n\r\n        colorToday(calendarDay: CalendarDay) {\r\n            const today = moment();\r\n            // console.log('calendarDay', calendarDay)\r\n            return today.year() === calendarDay.year\r\n                && today.month() + 1 === calendarDay.month\r\n                && today.date() === calendarDay.dateNumber;\r\n        },\r\n\r\n        selectDateOnly(selectedDate: Moment) {\r\n            // this.selectedDate = calendarDay;\r\n            for (let day of this.calendarArr) {\r\n                // console.log('date', day)\r\n\r\n                if (day.year === selectedDate.year()\r\n                    && day.month === selectedDate.month() + 1\r\n                    && day.dateNumber === selectedDate.date()) {\r\n                    day.selected = true\r\n                } else {\r\n                    day.selected = false;\r\n                }\r\n\r\n            }\r\n            // calendarDay.selected = true;\r\n        },\r\n\r\n        selectDate(calendarDay: CalendarDay) {\r\n            this.selectedDate = this.selectedDate.date(calendarDay.dateNumber);\r\n            for (let day of this.calendarArr) {\r\n                day.selected = false;\r\n            }\r\n            calendarDay.selected = true;\r\n            // todo: fix method sequence. should toggle modal after send resolve\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // this.$emit('selectDate', this.selectedDate.clone())\r\n            this.resolve(this.selectedDate.clone())\r\n        },\r\n\r\n        calculateMonth(date?: Moment) {\r\n            if(!date) {\r\n                date = moment();\r\n            }\r\n\r\n            let currentMonth = date.clone().month(this.currentMonth);\r\n            let monthStart = currentMonth.startOf('month').day()\r\n            let monthEnd = currentMonth.endOf('month').day()\r\n            let calendarArr: any[] = [];\r\n\r\n            // add last month day appear in calendar\r\n            let lastMonthEndDate = currentMonth.clone().date(0).date()\r\n            let lastMonthBeginDate = lastMonthEndDate - (monthStart - 1);\r\n\r\n            for (lastMonthBeginDate; lastMonthBeginDate <= lastMonthEndDate; lastMonthBeginDate++) {\r\n                calendarArr.push({\r\n                    year: currentMonth.clone().date(0).year(),\r\n                    month: currentMonth.clone().date(0).month() + 1,\r\n                    dateNumber: lastMonthBeginDate,\r\n                    selected: false,\r\n                    lastMonth: true\r\n                });\r\n            }\r\n\r\n            // add this month day appear in calendar\r\n            let mStart = 1\r\n            let mEnd = currentMonth.clone().endOf('month').date();\r\n\r\n            for (mStart; mStart <= mEnd; mStart++) {\r\n                // calendarArr.push(mStart);\r\n                calendarArr.push({\r\n                    year: currentMonth.year(),\r\n                    month: currentMonth.month() + 1,\r\n                    isValid: this.validDateRange(this.maxDate, this.minDate, currentMonth.clone().startOf('month').date(mStart)),\r\n                    dateNumber: mStart,\r\n                    selected: false\r\n                });\r\n            }\r\n\r\n            // add next month day appear in calendar\r\n\r\n            let mNextStart = 1\r\n            let mNextEnd = 7 - monthEnd - 1\r\n\r\n            for (mNextStart; mNextStart <= mNextEnd; mNextStart++) {\r\n                // calendarArr.push(mNextStart);\r\n                calendarArr.push({\r\n                    year: currentMonth.clone().add(1, 'month').year(),\r\n                    month: currentMonth.clone().add(1, 'month').month() + 1,\r\n                    dateNumber: mNextStart,\r\n                    selected: false,\r\n                    nextMonth: true\r\n                });\r\n            }\r\n\r\n            this.calendarArr = calendarArr;\r\n\r\n            if (currentMonth.endOf('month').date() <= this.selectedDate.date()) {\r\n                this.selectedDate = currentMonth.endOf('month').clone()\r\n            } else {\r\n                this.selectedDate = currentMonth.date(this.selectedDate.date())\r\n            }\r\n\r\n        },\r\n        validDateRange(maxDate: any, minDate: any, currentDay: Moment) {\r\n            if (maxDate && minDate) {\r\n                return currentDay.diff(maxDate, 'day') < 0 && currentDay.diff(minDate, 'day') > 0\r\n            } else if (maxDate) {\r\n                return currentDay.diff(maxDate, 'day') < 0\r\n            } else if (minDate) {\r\n                return currentDay.diff(minDate, 'day') > 0\r\n            } else {\r\n                return true\r\n            }\r\n        },\r\n\r\n        calculateBaseOnInput(newDate?: Moment) {\r\n            if (!newDate) {\r\n                newDate = moment()\r\n                this.currentMonth = newDate.month();\r\n                this.selectedDate = newDate.clone();\r\n                this.calculateMonth(newDate);\r\n                this.currentYear = newDate.year();\r\n            } else {\r\n                this.currentMonth = newDate.month();\r\n                this.selectedDate = newDate.clone();\r\n                this.calculateMonth(newDate);\r\n                this.currentYear = newDate.year();\r\n                this.selectDateOnly(newDate);\r\n            }\r\n        },\r\n\r\n        toggleShow(newDate?: Moment) {\r\n            if (newDate) {\r\n                this.calculateBaseOnInput(newDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n\r\n            // newDate = (this.date as Moment) ? (this.date as Moment).clone() : moment();\r\n\r\n\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // this.selectDate(newDate)\r\n            this.datePickerPromise = new Promise((resolve, reject) => {\r\n                this.resolve = resolve;\r\n                this.reject = reject;\r\n            })\r\n\r\n            return this.waitPickDate();\r\n        },\r\n\r\n        async waitPickDate() {\r\n            return this.datePickerPromise;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.v3-calendar {\r\n    display: block;\r\n    width: 290px;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.dp-heading {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    height: 30px;\r\n}\r\n\r\n.dp-week-of-day {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    width: 100%;\r\n\r\n    span {\r\n        display: inline-block;\r\n        width: 14.2%;\r\n        height: 30px;\r\n        text-align: center;\r\n        font-size: 14px;\r\n    }\r\n}\r\n\r\n.dp-week-days {\r\n    //display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-around;\r\n\r\n    .date-wrapper {\r\n        display: inline-block;\r\n        width: 14.2%;\r\n        text-align: center;\r\n    }\r\n\r\n    .date-number-cell {\r\n        display: inline-block;\r\n        width: 30px;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        font-size: 14px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        border: 1px solid transparent;\r\n\r\n        &:hover {\r\n            background: orange;\r\n            color: white;\r\n            border: 1px solid orange;\r\n        }\r\n    }\r\n\r\n    .today-target {\r\n        color: orange;\r\n        border: 1px solid orange;\r\n    }\r\n\r\n    .last-month-day, .next-month-day, .not-valid {\r\n        color: grey;\r\n        border-color: transparent;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .selected {\r\n        background-color: darkorange;\r\n        color: white;\r\n        border: 1px solid darkorange;\r\n\r\n    }\r\n\r\n\r\n}\r\n</style>","\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nexport interface CalendarDay {\r\n    dateNumber: number,\r\n    month: number,\r\n    lastMonth?: boolean,\r\n    nextMonth?: boolean,\r\n    isValid?: boolean,\r\n    selected: boolean,\r\n    year: number\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"DatePicker\",\r\n    components: {\r\n        Modal\r\n    },\r\n    props: {\r\n        top: {\r\n            type: Number,\r\n        },\r\n        leftInput: {\r\n            type: Number\r\n        },\r\n        date: {\r\n            type: Object\r\n        },\r\n        maxDate: {\r\n            type: Object\r\n        },\r\n        minDate: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            left: 0,\r\n            currentYear: 2021,\r\n            datePickerPromise: <any>null,\r\n            resolve: <any>null,\r\n            reject: <any>null,\r\n            selectedDate: moment(),\r\n            weekOfDays: [{\r\n                    fullName: \"Sunday\",\r\n                    shortName: \"Sun\",\r\n                    dayNumber: 0,\r\n                },\r\n                {\r\n                    fullName: \"Monday\",\r\n                    shortName: \"Mon\",\r\n                    dayNumber: 1,\r\n                },\r\n                {\r\n                    fullName: \"Tuesday\",\r\n                    shortName: \"Tue\",\r\n                    dayNumber: 2,\r\n                },\r\n                {\r\n                    fullName: \"Wednesday\",\r\n                    shortName: \"Wed\",\r\n                    dayNumber: 3,\r\n                },\r\n                {\r\n                    fullName: \"Thursday\",\r\n                    shortName: \"Thu\",\r\n                    dayNumber: 4,\r\n                },\r\n                {\r\n                    fullName: \"Friday\",\r\n                    shortName: \"Fri\",\r\n                    dayNumber: 5,\r\n                },\r\n                {\r\n                    fullName: \"Saturday\",\r\n                    shortName: \"Sat\",\r\n                    dayNumber: 6\r\n                }\r\n            ],\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        const calendarArr = ref<CalendarDay[]>([]);\r\n        const currentMonth = ref();\r\n        currentMonth.value = moment().month();\r\n\r\n        return {\r\n            currentMonth,\r\n\r\n            calendarArr\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this.calculateMonth();\r\n        this.datePickerPromise = new Promise((resolve, reject) => {\r\n          this.resolve = resolve;\r\n          this.reject = reject;\r\n        })\r\n    },\r\n\r\n    watch: {\r\n        maxDate () {\r\n            if (this.selectedDate) {\r\n                this.calculateBaseOnInput(this.selectedDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n        },\r\n        minDate() {\r\n            if (this.selectedDate) {\r\n                this.calculateBaseOnInput(this.selectedDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        cancelPickDate() {\r\n            this.reject();\r\n        },\r\n        calculateLeft() {\r\n            if (!this.leftInput) return 0;\r\n            // this.left = <any>this.leftInput\r\n            if (window.innerWidth < this.leftInput + 370) {\r\n                this.left = window.innerWidth - 400;\r\n            } else {\r\n                this.left = this.leftInput\r\n            }\r\n            return this.left\r\n        },\r\n        nextMonth() {\r\n            this.currentMonth = this.currentMonth + 1\r\n            this.calculateMonth()\r\n        },\r\n\r\n        previousMonth() {\r\n            this.currentMonth = this.currentMonth - 1\r\n            this.calculateMonth()\r\n        },\r\n\r\n        colorToday(calendarDay: CalendarDay) {\r\n            const today = moment();\r\n            // console.log('calendarDay', calendarDay)\r\n            return today.year() === calendarDay.year\r\n                && today.month() + 1 === calendarDay.month\r\n                && today.date() === calendarDay.dateNumber;\r\n        },\r\n\r\n        selectDateOnly(selectedDate: Moment) {\r\n            // this.selectedDate = calendarDay;\r\n            for (let day of this.calendarArr) {\r\n                // console.log('date', day)\r\n\r\n                if (day.year === selectedDate.year()\r\n                    && day.month === selectedDate.month() + 1\r\n                    && day.dateNumber === selectedDate.date()) {\r\n                    day.selected = true\r\n                } else {\r\n                    day.selected = false;\r\n                }\r\n\r\n            }\r\n            // calendarDay.selected = true;\r\n        },\r\n\r\n        selectDate(calendarDay: CalendarDay) {\r\n            this.selectedDate = this.selectedDate.date(calendarDay.dateNumber);\r\n            for (let day of this.calendarArr) {\r\n                day.selected = false;\r\n            }\r\n            calendarDay.selected = true;\r\n            // todo: fix method sequence. should toggle modal after send resolve\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // this.$emit('selectDate', this.selectedDate.clone())\r\n            this.resolve(this.selectedDate.clone())\r\n        },\r\n\r\n        calculateMonth(date?: Moment) {\r\n            if(!date) {\r\n                date = moment();\r\n            }\r\n\r\n            let currentMonth = date.clone().month(this.currentMonth);\r\n            let monthStart = currentMonth.startOf('month').day()\r\n            let monthEnd = currentMonth.endOf('month').day()\r\n            let calendarArr: any[] = [];\r\n\r\n            // add last month day appear in calendar\r\n            let lastMonthEndDate = currentMonth.clone().date(0).date()\r\n            let lastMonthBeginDate = lastMonthEndDate - (monthStart - 1);\r\n\r\n            for (lastMonthBeginDate; lastMonthBeginDate <= lastMonthEndDate; lastMonthBeginDate++) {\r\n                calendarArr.push({\r\n                    year: currentMonth.clone().date(0).year(),\r\n                    month: currentMonth.clone().date(0).month() + 1,\r\n                    dateNumber: lastMonthBeginDate,\r\n                    selected: false,\r\n                    lastMonth: true\r\n                });\r\n            }\r\n\r\n            // add this month day appear in calendar\r\n            let mStart = 1\r\n            let mEnd = currentMonth.clone().endOf('month').date();\r\n\r\n            for (mStart; mStart <= mEnd; mStart++) {\r\n                // calendarArr.push(mStart);\r\n                calendarArr.push({\r\n                    year: currentMonth.year(),\r\n                    month: currentMonth.month() + 1,\r\n                    isValid: this.validDateRange(this.maxDate, this.minDate, currentMonth.clone().startOf('month').date(mStart)),\r\n                    dateNumber: mStart,\r\n                    selected: false\r\n                });\r\n            }\r\n\r\n            // add next month day appear in calendar\r\n\r\n            let mNextStart = 1\r\n            let mNextEnd = 7 - monthEnd - 1\r\n\r\n            for (mNextStart; mNextStart <= mNextEnd; mNextStart++) {\r\n                // calendarArr.push(mNextStart);\r\n                calendarArr.push({\r\n                    year: currentMonth.clone().add(1, 'month').year(),\r\n                    month: currentMonth.clone().add(1, 'month').month() + 1,\r\n                    dateNumber: mNextStart,\r\n                    selected: false,\r\n                    nextMonth: true\r\n                });\r\n            }\r\n\r\n            this.calendarArr = calendarArr;\r\n\r\n            if (currentMonth.endOf('month').date() <= this.selectedDate.date()) {\r\n                this.selectedDate = currentMonth.endOf('month').clone()\r\n            } else {\r\n                this.selectedDate = currentMonth.date(this.selectedDate.date())\r\n            }\r\n\r\n        },\r\n        validDateRange(maxDate: any, minDate: any, currentDay: Moment) {\r\n            if (maxDate && minDate) {\r\n                return currentDay.diff(maxDate, 'day') < 0 && currentDay.diff(minDate, 'day') > 0\r\n            } else if (maxDate) {\r\n                return currentDay.diff(maxDate, 'day') < 0\r\n            } else if (minDate) {\r\n                return currentDay.diff(minDate, 'day') > 0\r\n            } else {\r\n                return true\r\n            }\r\n        },\r\n\r\n        calculateBaseOnInput(newDate?: Moment) {\r\n            if (!newDate) {\r\n                newDate = moment()\r\n                this.currentMonth = newDate.month();\r\n                this.selectedDate = newDate.clone();\r\n                this.calculateMonth(newDate);\r\n                this.currentYear = newDate.year();\r\n            } else {\r\n                this.currentMonth = newDate.month();\r\n                this.selectedDate = newDate.clone();\r\n                this.calculateMonth(newDate);\r\n                this.currentYear = newDate.year();\r\n                this.selectDateOnly(newDate);\r\n            }\r\n        },\r\n\r\n        toggleShow(newDate?: Moment) {\r\n            if (newDate) {\r\n                this.calculateBaseOnInput(newDate)\r\n            } else {\r\n                this.calculateBaseOnInput()\r\n            }\r\n\r\n            // newDate = (this.date as Moment) ? (this.date as Moment).clone() : moment();\r\n\r\n\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // this.selectDate(newDate)\r\n            this.datePickerPromise = new Promise((resolve, reject) => {\r\n                this.resolve = resolve;\r\n                this.reject = reject;\r\n            })\r\n\r\n            return this.waitPickDate();\r\n        },\r\n\r\n        async waitPickDate() {\r\n            return this.datePickerPromise;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DatePicker.vue?vue&type=template&id=d7fa5efc&scoped=true\"\nimport script from \"./DatePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./DatePicker.vue?vue&type=script&lang=ts\"\n\nimport \"./DatePicker.vue?vue&type=style&index=0&id=d7fa5efc&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-d7fa5efc\"\n\nexport default script","\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport moment, {Moment} from 'moment';\r\nimport Dialog from '@/components/dialog';\r\n\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nenum DatePickerFormat {\r\n    fromDate = 'fromDate',\r\n    toDate = 'toDate'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: 'mySchedules',\r\n    components: {\r\n        DatePicker,\r\n        // FlexSchedule\r\n    },\r\n    data() {\r\n        return {\r\n            title: 'Work Schedule',\r\n\r\n            schedules: [],\r\n            user: null,\r\n            datePickerFormat: \"dd/MM/yyyy\",\r\n\r\n            //\r\n            menu1: false,\r\n            menu2: false,\r\n            fromDate: <Moment | null> null,\r\n            toDate: <Moment | null> null,\r\n\r\n            //\r\n            //  date picker\r\n            dateModal: false,\r\n            // datePickerDate: \"\",\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n            datePickerTargetDay: moment(), // todo: clear moment and string mix\r\n            selectedDateType: DatePickerFormat.fromDate, // Start Finish\r\n            datePickerMax: <Moment | null>null,\r\n            datePickerMin: <Moment | null>null\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n        var currentDate = new Date();\r\n        currentDate.setHours(0, 0, 0, 0);\r\n        var intDate = currentDate.getDate();\r\n        var currentWeekDay = currentDate.getDay();\r\n        var fromDate = new Date();\r\n        fromDate.setHours(0, 0, 0, 0);\r\n        var toDate = new Date();\r\n        toDate.setHours(0, 0, 0, 0);\r\n\r\n        var weekDayFactor = currentWeekDay == 0 ? 7 : currentWeekDay;\r\n        fromDate.setDate(intDate - (weekDayFactor - 1));\r\n        toDate.setDate(intDate + (7 - weekDayFactor));\r\n\r\n        this.fromDate = moment(fromDate);\r\n        this.toDate = moment(toDate);\r\n\r\n        this.loadSchedules(this.fromDate, this.toDate);\r\n    },\r\n\r\n    methods: {\r\n        updateDateText(event: any, target: any, type: string) {\r\n            if (type === 'toDate') {\r\n                this.toDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            } else {\r\n                this.fromDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            }\r\n            this.dateModal = false;\r\n\r\n            // todo: add check for is correct format\r\n        },\r\n\r\n        updateDateTime($event: any, d: any, type: DatePickerFormat) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.selectedDateType = type;\r\n            if (type === 'toDate') {\r\n                if (this.fromDate) {\r\n                    this.datePickerMin = this.fromDate;\r\n                    this.datePickerMax = null;\r\n                }\r\n\r\n                this.datePickerTargetDay = this.toDate ? this.toDate : moment();\r\n            } else {\r\n                if (this.toDate) {\r\n                    this.datePickerMin = null;\r\n                    this.datePickerMax = this.toDate;\r\n                }\r\n                this.datePickerTargetDay = this.fromDate ? this.fromDate : moment();\r\n            }\r\n\r\n            this.dateModal = true;\r\n            this.openDatePicker()\r\n        },\r\n\r\n        printWorkSchedule: function () {\r\n            var args = \"left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1\";\r\n            var content = (document as any).getElementById(\"workSchedules\").innerHTML;\r\n            var mywindow: any = window.open('', 'Print', args);\r\n\r\n            mywindow.document.write('<html>');\r\n            mywindow.document.write('<head>');\r\n            mywindow.document.write('<style type=\"text/css\">table {border-collapse: collapse;}</style>');\r\n            mywindow.document.write('<style type=\"text/css\">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>');\r\n            mywindow.document.write('</head>');\r\n            mywindow.document.write('<body>');\r\n            mywindow.document.write(content);\r\n            mywindow.document.write('</body></html>');\r\n\r\n            mywindow.document.close();\r\n            mywindow.focus()\r\n            mywindow.print();\r\n            mywindow.close();\r\n        },\r\n        loadSchedules: function (fromDate: any, toDate: any) {\r\n            if (fromDate !== null) {\r\n                fromDate.startOf('day')\r\n            }\r\n\r\n            if (toDate !== null && toDate !== '') {\r\n                toDate.startOf('day')\r\n            }\r\n\r\n            this.schedules = [];\r\n\r\n            if (toDate === null && fromDate === null) {\r\n                return;\r\n            }\r\n\r\n            if (toDate !== null && fromDate === null) {\r\n                fromDate = toDate;\r\n            }\r\n\r\n            if (toDate === null && fromDate !== null) {\r\n                toDate = fromDate;\r\n            }\r\n\r\n            var param = {\r\n                employeeNo: <number | null>null,\r\n                fromDate: null,\r\n                toDate: null\r\n            };\r\n\r\n            if (fromDate !== null && toDate !== null) {\r\n                var finalFromDate = fromDate.format(\"DD/MM/YYYY\");\r\n                var finalToDate = toDate.format(\"DD/MM/YYYY\");\r\n                param = {\r\n                    employeeNo: window.Affinity.user.EmployeeNo,\r\n                    // employeeNo: 1148,\r\n                    fromDate: finalFromDate,\r\n                    toDate: finalToDate\r\n                };\r\n            }\r\n\r\n            Dialog.loading();\r\n            Remote.EmployeeWorkSchedule(param).then(response => {\r\n                let tempSchedules = response;\r\n                // server return json include key name 'mondayScheduleDetail' to 'sundayScheduleDetail'\r\n                // transform it into a array so we can v-for it in correct order.\r\n                for (let week of tempSchedules) {\r\n                    week.detailArr = [];\r\n                    week.detailArr.push(week.mondayScheduleDetail);\r\n                    week.detailArr.push(week.tuesdayScheduleDetail);\r\n                    week.detailArr.push(week.wednesdayScheduleDetail);\r\n                    week.detailArr.push(week.thursdayScheduleDetail);\r\n                    week.detailArr.push(week.fridayScheduleDetail);\r\n                    week.detailArr.push(week.saturdayScheduleDetail);\r\n                    week.detailArr.push(week.sundayScheduleDetail);\r\n\r\n                    for (let detail of week.detailArr) {\r\n                        // clear default value\r\n                        if (detail.finishTime === \"12:00 am\" && detail.startTime === '12:00 am'\r\n                            || detail.finishTime === \"12:00 AM\" && detail.startTime === '12:00 AM') {\r\n                            detail.finishTime = '';\r\n                            detail.startTime = '';\r\n                        }\r\n\r\n                        if (detail.hours === \"0\") {\r\n                            detail.hours = '';\r\n                            detail.shiftDescription = '';\r\n                        }\r\n                    }\r\n                }\r\n\r\n                this.schedules = tempSchedules;\r\n                Dialog.clear();\r\n            }).finally(() => {\r\n                Dialog.clear();\r\n            })\r\n        },\r\n\r\n        displayScheduleDetail(scheduleDetail: any) {\r\n            return scheduleDetail.hours !== 0 && scheduleDetail.hours !== null && scheduleDetail.hours !== \"\";\r\n        },\r\n\r\n        selectDateTodayForFromDate: function () {\r\n            this.fromDate = moment().startOf('day')\r\n            this.toDate = null;\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n        },\r\n\r\n        selectDateTodayForToDate: function () {\r\n            this.toDate = moment();\r\n            this.toDate.hour(11)\r\n            this.toDate.minute(59)\r\n            if (this.toDate < this.fromDate!) {\r\n                this.fromDate = null;\r\n            }\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n        },\r\n\r\n        getWeekDayByIndex: function (index: number) {\r\n            let weekdayArray = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\r\n            return weekdayArray[index];\r\n        },\r\n\r\n        async openDatePicker() {\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay)) as Promise<any>;\r\n\r\n            if (this.selectedDateType === DatePickerFormat.toDate) {\r\n                this.toDate = result as any;\r\n            } else if (this.selectedDateType === DatePickerFormat.fromDate) {\r\n                this.fromDate = result as any;\r\n            }\r\n\r\n            this.loadSchedules(this.fromDate, this.toDate);\r\n\r\n            return result;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./MySchedules.vue?vue&type=template&id=5daec2f2\"\nimport script from \"./MySchedules.vue?vue&type=script&lang=ts\"\nexport * from \"./MySchedules.vue?vue&type=script&lang=ts\"\n\nimport \"./mySchedules.scss?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script","<style lang=\"scss\" src=\"./schedulesManagement.scss\"></style>\r\n<template>\r\n    <div class=\"vue-sched-management\">\r\n        <div class=\"sched-card-default mr-4 mr-xs-0\" v-show=\"!createNew\">\r\n            <div>\r\n                <h3 class=\"mt-2\">Schedules</h3>\r\n            </div>\r\n            <search-schedule ref=\"searchScheduleRef\" @createNewSchedule=\"createNewSchedule\"\r\n                             @selectSchedFromSearch=\"selectSchedulesDetail\"></search-schedule>\r\n        </div>\r\n        <div class=\"sched-card-default sched-detail-card sche-detail-mt\" v-if=\"schedDetail\">\r\n            <div v-if=\"createNew\">\r\n                <h3>Create New Schedule</h3>\r\n            </div>\r\n            <div v-else class=\"d-flex justify-space-between\">\r\n                <h3>Schedule Details</h3>\r\n                <span class=\"icon-cross vp-icon\" @click=\"closeScheduleDetail(true)\"></span>\r\n            </div>\r\n            <schedule-detail v-if=\"schedDetail\" ref=\"detail\"\r\n                             :shiftTypeList=\"shiftTypeList\"\r\n                             :detail=\"schedDetail\"\r\n                             :read-only=\"0\"\r\n                             @cancel=\"cancelScheduleDetail\"\r\n                             @reload=\"reloadSchedulesDetail\"\r\n                             @schedule-saved=\"scheduleSaved\"\r\n                             @schedule-deleted=\"scheduleDeleted\"></schedule-detail>\r\n            <div class=\"sched-man-allocations mt-4\"\r\n                 v-if=\"schedDetail && schedDetail.EmpAllocations && schedDetail.EmpAllocations.length > 0\">\r\n                <div class=\"caption font-weight-bold text-start\">Employee Allocations</div>\r\n                <div class=\"aff-table allowcated-employee-table mt-4\">\r\n                    <table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Employee Name</th>\r\n                            <th class=\"text-center\">Date From</th>\r\n                            <th class=\"text-center\">Date To</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr v-for=\"empSched in schedDetail.EmpAllocations\"\r\n                            v-bind:class=\"{'hide-none-active-detail': !empSched.isActive && showActiveSchedule}\">\r\n                            <td>{{ empSched.EmployeeName }}</td>\r\n                            <td class=\"text-center\">{{ $filters.reformatDateString(empSched.DateFrom, null) }}</td>\r\n                            <td class=\"text-center\">{{ $filters.reformatDateString(empSched.DateTo, null) }}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <div class=\"d-flex justify-end mt-2\">\r\n                    <button class=\"grey white--text text-capitalize small\" @click=\"toggleShowActiveSchedule\">\r\n                        <span v-show=\"!showActiveSchedule\">Show Active</span>\r\n                        <span v-show=\"showActiveSchedule\">Show All</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport moment from 'moment';\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport ScheduleDetail from \"@/components/scheduleDetail/ScheduleDetail.vue\";\r\nimport SearchSchedule from \"@/components/schedulesManagement/SearchSchedule.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {defineComponent} from \"vue\";\r\nimport {EmployeeActions} from \"@/store/employeeModule\";\r\ndeclare var Affinity: any\r\n\r\nexport default defineComponent({\r\n    name: 'schedulesManagement',\r\n    components: {\r\n        SearchSchedule,\r\n        'schedule-detail': ScheduleDetail,\r\n    },\r\n    data() {\r\n        return {\r\n            selectedSched: <any>null,\r\n            shiftTypeList: [],\r\n            schedDetail: <any>null,\r\n            createNew: false,\r\n            empListHeight: '',\r\n            showActiveSchedule: true,\r\n            employees: []\r\n        };\r\n    },\r\n    async mounted() {\r\n        Dialog.loading()\r\n        await Promise.all([this.getShiftTypeList(), this.getEmployees()]);\r\n        Dialog.clear()\r\n    },\r\n    methods: {\r\n        async getShiftTypeList () {\r\n            try {\r\n                let shiftList = await Remote.ShiftTypes();\r\n                this.shiftTypeList = shiftList.map((s: any) => s.ShiftType)\r\n            } catch (e) {\r\n                console.error(e)\r\n            }\r\n        },\r\n\r\n        async getEmployees() {\r\n            try {\r\n                this.employees = await this.$store.dispatch(EmployeeActions.getEmployees, Affinity.user.EmployeeNo)\r\n            } catch (e) {\r\n                console.error(e)\r\n            }\r\n        },\r\n\r\n        toggleShowActiveSchedule() {\r\n            this.showActiveSchedule = !this.showActiveSchedule;\r\n        },\r\n\r\n        selectSchedulesDetail(sched: any) {\r\n            if (this.$refs.detail && (this.$refs as any).detail.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule Detail changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        this.loadScheduleDetail(sched)\r\n                    }\r\n                })\r\n            } else {\r\n                this.loadScheduleDetail(sched)\r\n            }\r\n        },\r\n\r\n        loadScheduleDetail(sched: any) {\r\n            Dialog.loading()\r\n            Remote.ScheduleDetail(sched.Id).then(res => {\r\n                this.schedDetail = res.Data\r\n                this.checkEmpAllocationActive()\r\n                Dialog.clear();\r\n                this.selectedSched = sched;\r\n            }, (err) => {\r\n                Dialog.clear();\r\n                if (err.message === 'Network Error') {\r\n                    Dialog.alert('Lost Internet connection. Please try again after reconnect.')\r\n                } else {\r\n                    Dialog.alert('Something went wrong')\r\n                }\r\n            })\r\n        },\r\n\r\n        checkEmpAllocationActive() {\r\n            this.schedDetail.EmpAllocations.forEach((detail: any) => {\r\n                if (!detail.DateTo) {\r\n                    detail.isActive = true;\r\n                    return\r\n                }\r\n                let dateFrom = moment(detail.DateFrom)\r\n                let dateTo = moment(detail.DateTo)\r\n                detail.isActive = dateTo.diff(moment(), 'day') >= 0 && dateFrom.diff(moment(), 'day') <= 0\r\n            })\r\n        },\r\n\r\n\r\n        createNewSchedule: function () {\r\n            this.createNew = true;\r\n            let startDate = moment();\r\n            startDate.hour(0);\r\n            startDate.minute(0);\r\n            startDate.second(0);\r\n            this.schedDetail = {\r\n                Id: -1,\r\n                Name: '',\r\n                Description: '',\r\n                NoOfWeeks: 1,\r\n                StartDate: startDate,\r\n                Days: []\r\n            };\r\n\r\n            if (this.$refs.detail) {\r\n                (this.$refs.detail as any).hasChanges = true;\r\n            }\r\n        },\r\n\r\n        cancelScheduleDetail() {\r\n            if (this.createNew) {\r\n                this.createNew = false;\r\n            }\r\n\r\n            this.schedDetail = null;\r\n        },\r\n\r\n        reloadSchedulesDetail: function () {\r\n            if (!this.selectedSched)\r\n                this.schedDetail = null;\r\n            else\r\n                this.selectSchedulesDetail(this.selectedSched);\r\n\r\n            this.createNew = false;\r\n        },\r\n\r\n        closeScheduleDetail(changeCheck: boolean) {\r\n            if (!changeCheck || !(this.$refs as any).detail.hasChanges) {\r\n                this.schedDetail = null;\r\n                this.createNew = false;\r\n                this.selectedSched = null;\r\n                (this.$refs as any).searchScheduleRef.deselectScheDetail();\r\n                return;\r\n            }\r\n\r\n            Dialog.checkChange({\r\n                message: 'There are currently Schedule Detail changes <br /> Do you want to discard your changes?',\r\n                onOk: () => {\r\n                    this.closeScheduleDetail(false)\r\n                }\r\n            })\r\n        },\r\n\r\n        scheduleSaved: function (detail: any) {\r\n            if (!this.selectedSched)\r\n                this.schedDetail = null;\r\n            else {\r\n                this.schedDetail = detail;\r\n                this.selectedSched = {\r\n                    Id: detail.Id,\r\n                };\r\n            }\r\n\r\n            (this.$refs as any).searchScheduleRef.getSchedulesList();\r\n            this.createNew = false;\r\n        },\r\n\r\n        scheduleDeleted: function () {\r\n            this.selectedSched = null;\r\n            this.schedDetail = null;\r\n            (this.$refs as any).searchScheduleRef.getSchedulesList();\r\n        },\r\n    },\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$button-blue: #44b5ec;\r\n\r\n.hide-none-active-detail {\r\n    display: none;\r\n}\r\n\r\n.sched-card-default {\r\n    background: #efefef;\r\n\r\n    @media screen and (max-width: 960px) {\r\n        margin-top: 8px;\r\n    }\r\n}\r\n\r\n.sched-detail-card {\r\n    width: 565px;\r\n\r\n    @media screen and (max-width: 768px) {\r\n        width: 100%;\r\n    }\r\n\r\n}\r\n\r\n.sched-search-box {\r\n    width: 150px;\r\n}\r\n\r\n.sched-man-allocations {\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    max-width: 600px;\r\n    max-height: 400px;\r\n    min-height: 200px;\r\n    width: 100%;\r\n    padding-right: 0px;\r\n\r\n    table {\r\n        min-width: 300px;\r\n    }\r\n}\r\n\r\n.aff-table {\r\n    .selected td {\r\n        background-color: $button-blue;\r\n        color: white;\r\n    }\r\n\r\n    .hidden {\r\n        display: none;\r\n    }\r\n\r\n    @media screen and (max-width: 768px) {\r\n        overflow-x: auto;\r\n    }\r\n}\r\n\r\n.sche-detail-mt {\r\n    @media screen and (max-width: 1440px) {\r\n        margin-top: 10px;\r\n    }\r\n}\r\n\r\n.allowcated-employee-table {\r\n    max-height: 300px;\r\n    overflow: auto;\r\n}\r\n</style>","<template>\r\n    <div class=\"default-form sched-detail-form mt-4\">\r\n        <form @change=\"formUpdated\" v-on:submit.prevent=\"formSubmited($event)\">\r\n            <div class=\"caption d-flex\" v-if=\"isNewSchedule && $CompanyConfig.isAllowPersonal\">\r\n                <div class=\"d-flex align-center\">\r\n                    <input type=\"radio\" id=\"personal\" value=\"personal\" class=\"cursor-pointer\" v-model=\"createType\">\r\n                    <label for=\"personal\" class=\"ml-2 cursor-pointer\">Create Personal Schedule</label>\r\n                </div>\r\n                <div class=\"d-flex align-center ml-6\">\r\n                    <input type=\"radio\" id=\"team\" value=\"team\" class=\"cursor-pointer\" v-model=\"createType\">\r\n                    <label for=\"team\" class=\"ml-2 cursor-pointer\">Create Team Schedule</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"caption d-flex justify-space-between mt-4\">\r\n                <div class=\"full-width d-flex align-center\">\r\n                    <div class=\"form-label\">Name</div>\r\n                    <input class=\"caption underline-input full-width\" name=\"name\" @keyup=\"hasChanges = true\"\r\n                           counter=\"49\" v-if=\"isNewSchedule && createType === 'team'\" v-model=\"detail.Name\">\r\n                    <div v-else-if=\"isNewSchedule && createType === 'personal' && detail.EmployeeNo\">\r\n                        {{ 'Personal_' + detail.EmployeeNo }}\r\n                    </div>\r\n                    <div v-else class=\"label-detail\"\r\n                         v-tooltip.top=\"{content: detail.Name, delay: {show: 3000, hide: 100}}\">\r\n                        {{ detail.Name }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-if=\"detail.Archive\" class=\"red--text\">Archived</div>\r\n            </div>\r\n            <div class=\"caption mt-4\" v-if=\"createType === 'personal' && $CompanyConfig.isAllowPersonal\">\r\n                <div class=\"form-label\">\r\n                    <span>Employee No</span>\r\n                </div>\r\n\r\n                 <span v-if=\"isNewSchedule && employees && employees.length > 0\" class=\"employeeNo-autoComplete\">\r\n                    <auto-complete :inputList=\"employees\" :optionName=\"'joinedName'\" @selected=\"selectedEmployee\"></auto-complete>\r\n                 </span>\r\n\r\n                <div v-else class=\"label-detail\"\r\n                     v-tooltip.top=\"{content: detail.EmployeeNo, delay: {show: 3000, hide: 100}}\">{{ detail.EmployeeNo }}\r\n                </div>\r\n            </div>\r\n            <div class=\"caption d-flex mt-4\">\r\n                <div class=\"form-label\">Description</div>\r\n                <textarea class=\"caption description-area\" hide-details rows=\"2\" @keyup=\"hasChanges = true\" outlined dense\r\n                          v-model=\"detail.Description\"> </textarea>\r\n            </div>\r\n            <div class=\"caption mt-4\">\r\n                <div class=\"form-label\">Effective Date</div>\r\n                <input class=\"date-input\" :value=\"$filters.reformatDate(detail.StartDate)\" @click=\"openDatePicker\">\r\n\r\n                <div class=\"caption mt-4 ml-4 d-inline number-of-weeks\">\r\n                    <div class=\"d-inline mr-4 bold-text\">Number of Weeks</div>\r\n                        <label for=\"now\"></label>\r\n                        <input class=\"number-input\" max=\"12\" min=\"1\" step=\"1\" id=\"now\" name=\"now\" type=\"number\" v-model=\"detail.NoOfWeeks\"\r\n                               @change=\"updateNoOfWeeks\"\r\n                               @keydown=\"numLimitKeyDown\"  style=\"width:60px;\">\r\n                    <div class=\"mobile-arrow\">\r\n                        <button type=\"button\" class=\"icon \"  v-if=\"detail.NoOfWeeks < 12\"  color=\"grey\" @click=\"increaseNumber\">\r\n                            <span class=\"icon-arrowhead-up arrow-icon\"></span>\r\n                        </button>\r\n                        <button type=\"button\" class=\"ml-2 icon\"  v-if=\"detail.NoOfWeeks > 1\" small color=\"grey\" @click=\"reduceNumber\">\r\n                            <span class=\"mt-1 icon-arrowhead-down arrow-icon\"></span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class=\"section-table ui-gridbox-scrollable-titles mt-4\">\r\n                <div class=\"aff-table sched-detail-table\">\r\n                    <table class=\"sched-detail-days\" v-bind:class=\"{'shift-min-width': showShift}\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Week</th>\r\n                            <th>Day</th>\r\n                            <th>Hours</th>\r\n                            <th>Start</th>\r\n                            <th>Finish</th>\r\n                            <th v-show=\"showShift\">Shift</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr v-for=\"d in detail.Days\" :key=\"d.DayNumber\">\r\n                            <td>\r\n                                <span v-show=\"isFirstDayOfWeek(d.DayOfWeek)\">{{ d.Week }}</span>\r\n                            </td>\r\n                            <td class=\"table-date-counter\">\r\n                                <span class=\"mr-2\">{{ d.DayNumber + 1 }}</span>\r\n                                <span>{{ getDayOfWeek(d.DayOfWeek) }}</span>\r\n                            </td>\r\n                            <td>\r\n                                <input type=\"number\" step=\"any\" min=\"0\" max=\"24\" v-model.number=\"d.Hours\"\r\n                                       class=\"caption sched-detail-table-input\" center name=\"Sche Hour\"\r\n                                       outlined dense hide-details autocomplete=\"off\"\r\n                                       :error=\"d.error\"\r\n                                       @keydown=\"numLimitKeyDown($event, true, false)\"\r\n                                       @change=\"checkHour(d)\"\r\n                                       :data-test=\"d.Hours\">\r\n                            </td>\r\n                            <td>\r\n                                <input :value=\"$filters.reformatTime(d.StartTime)\" name=\"Sche StartTime\"\r\n                                       outlined dense hide-details autocomplete=\"off\"\r\n                                       class=\"d-inline-flex ma-0 pa-0 caption sched-detail-table-input\"\r\n                                       @change=\"timeTextChanged($event, d, 'StartTime')\"\r\n                                       @keydown=\"numLimitKeyDown($event, false, true)\"\r\n                                       @click:clear=\"fromDate = null\">\r\n\r\n                            </td>\r\n                            <td>\r\n                                <input :value=\"$filters.reformatTime(d.FinishTime)\" name=\"Sche FinishTime\"\r\n                                       outlined dense hide-details autocomplete=\"off\"\r\n                                       class=\"d-inline-flex ma-0 pa-0 caption sched-detail-table-input\"\r\n                                       @change=\"timeTextChanged($event, d, 'FinishTime')\"\r\n                                       @keydown=\"numLimitKeyDown($event, false, true)\"\r\n                                       @click:clear=\"fromDate = null\">\r\n\r\n\r\n                            </td>\r\n                            <td class=\"shift-select-td\" v-if=\"showShift\">\r\n                                <custom-select class=\"caption\"\r\n                                               :options=\"shifts\"\r\n                                               :selected=\"d.ShiftId\"\r\n                                               @selectOption=\"selectedShift($event, d)\">\r\n                                </custom-select>\r\n<!--                                <select class=\"caption\" dense outlined hide-details-->\r\n<!--                                        :menu-props=\"{bottom: true, offsetY: true}\"-->\r\n<!--                                        v-model=\"d.ShiftId\"-->\r\n<!--                                        @change=\"hasChanges = true\"-->\r\n<!--                                        :items=\"shifts\" item-text=\"name\" item-value=\"name\"></select>-->\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"schedules-buttons form-row d-flex flex-wrap justify-end mt-2\">\r\n                <button type=\"button\" class=\"white--text grey caption text-capitalize mr-2 mt-2 small\"\r\n                        @click=\"toggleShift\">\r\n                    <span v-if=\"!showShift\">Show Shift</span>\r\n                    <span v-if=\"showShift\">Hide Shift</span>\r\n                </button>\r\n                <button  type=\"button\" class=\"white--text red text-capitalize mr-2 mt-2 small\" :disabled=\"hasChanges\"\r\n                        @click=\"deleteSchedule()\"\r\n                        v-if=\"!isNewSchedule && detail.EmpAllocations && detail.EmpAllocations.length === 0\">\r\n                    <span class=\"icon-trash mr-1\"></span><span>Delete</span>\r\n                </button>\r\n                <button  type=\"button\" class=\"white--text red text-capitalize mr-2 mt-2 small\" :disabled=\"hasChanges\"\r\n                        @click=\"archiveSchedule()\"\r\n                        v-if=\"!detail.Archive && !isNewSchedule && createType === 'team'\">\r\n                    <span class=\"icon-briefcase mr-1\"></span>\r\n                    <span>Archive</span>\r\n                </button>\r\n                <button  type=\"button\" class=\"white--text grey text-capitalize mr-2 mt-2 small\"\r\n                        :disabled=\"!hasChanges && !isNewSchedule\"\r\n                        @click=\"cancelChanges()\">\r\n                    <span class=\"icon-cancel mr-1\"></span><span>Cancel</span>\r\n                </button>\r\n                <button  type=\"button\" class=\"white--text text-capitalize mr-1 mt-2 green small\" :disabled=\"!hasChanges\"\r\n                        @click=\"updateDetail()\">\r\n                    <span class=\"icon-save mr-1\"></span><span>Save</span>\r\n                </button>\r\n            </div>\r\n        </form>\r\n        <date-picker ref=\"DatePickerRef\"\r\n                     :top=\"dateModalTop\"\r\n                     :leftInput=\"dateModalLeft\"\r\n                     :date=\"detail.StartDate\"></date-picker>\r\n<!--        <date-picker ref=\"DatePickerRef\" @selectDate=\"detail.StartDate\"></date-picker>-->\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport Vue, {defineComponent} from 'vue';\r\nimport moment from \"moment\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {emitter} from '@/main';\r\nimport Dialog from \"@/components/dialog\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {EmployeeGetters} from \"@/store/employeeModule\";\r\nimport AutoComplete from \"@/components/common/AutoComplete.vue\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"schedule-detail\",\r\n    components: {\r\n        AutoComplete,\r\n        DatePicker,\r\n        CustomSelect\r\n    },\r\n    props: ['detail', 'shiftTypeList', 'readOnly'],\r\n    data: function () {\r\n        return {\r\n            //\r\n            createType: 'team',\r\n            employees: [],\r\n\r\n            // todo: bring back name length rule\r\n            // nameLengthRule: [v => v.length <= 49 || 'Max 50 characters'],\r\n            week: 1,\r\n            tablePadding: '0 0;',\r\n            hasChanges: false,\r\n            isDateToCleared: false,\r\n            shifts: <any[]>[],\r\n            showShift: true,\r\n            initialEmpSched: null,\r\n\r\n            startDateMenu: false,\r\n\r\n            //\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n\r\n            //  time picker\r\n            timePickerTargetDay: <any>null,\r\n            selectedTimeType: 'Start', // Start Finish\r\n        }\r\n    },\r\n    computed: {\r\n        isNewSchedule() {\r\n            let detail: any = this.detail\r\n            return detail.Id <= 0;\r\n        },\r\n    },\r\n    // created: function () {\r\n    // },\r\n\r\n    mounted: function () {\r\n        // this.loadShiftTypes();\r\n        this.shifts = this.shiftTypeList;\r\n\r\n        this.hasChanges = this.detail.Id == -1; //new schedules always has changes\r\n\r\n        this.$emit(\"dataChanged\", this.hasChanges); // todo wtf is components? check what does this line do !!!\r\n\r\n\r\n        let employees = this.$store.getters[EmployeeGetters.getEmployees]\r\n\r\n        employees = employees.filter((employee: any) => {\r\n            return !this.$store.state.EmployeeModule.employeesWithPeronsalSche.includes(employee.employeeNo)\r\n        })\r\n\r\n        this.employees = employees.map((employee: any) => {\r\n            employee.joinedName = employee.commonName + ' ' + employee.employeeNo\r\n            return employee;\r\n        })\r\n        //\r\n\r\n        //Add missing 0 days\r\n        this.remapDays()\r\n\r\n        console.log('schedule type', this.detail.ScheduleType)\r\n\r\n        this.createType = this.detail.ScheduleType === 0 || this.detail.ScheduleType === undefined ? 'team' : 'personal';\r\n    },\r\n    watch: {\r\n        ['detail'](newVal, oldVal) {\r\n            this.remapDays()\r\n            this.createType = this.detail.ScheduleType === 0 || this.detail.ScheduleType === undefined ? 'team' : 'personal';\r\n            // todo: simplify this to create event\r\n            if (newVal != oldVal && newVal.Id == -1) {\r\n                this.detail.Days = [];\r\n                this.createNewDays(1, 1);\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        selectedShift(selectedShift: any, d: any) {\r\n            d.ShiftId = selectedShift;\r\n            this.hasChanges = true;\r\n        },\r\n        formSubmited($event: any) {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n            return false\r\n          //\r\n        },\r\n        increaseNumber() {\r\n            this.detail.NoOfWeeks++;\r\n            this.updateNoOfWeeks()\r\n        },\r\n        reduceNumber() {\r\n            this.detail.NoOfWeeks--;\r\n            this.updateNoOfWeeks()\r\n        },\r\n        toggleShift() {\r\n            this.showShift = !this.showShift;\r\n        },\r\n        // todo: fix calendar\r\n        // getDay(date: any) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n        remapDays() {\r\n            var week = 0;\r\n            var date = moment(this.detail.StartDate);\r\n            var total = this.detail.NoOfWeeks * 7;\r\n\r\n            var fullDays = new Array(total);\r\n\r\n            for (var dayNum = 0; dayNum < total; dayNum++) {\r\n                if (dayNum % 7 == 0) {\r\n                    week++;\r\n                }\r\n\r\n                fullDays[dayNum] = {\r\n                    DayNumber: dayNum,\r\n                    DayOfWeek: date.day(),\r\n                    Week: week,\r\n                    Date: moment(date),\r\n                    Hours: 0,\r\n                    StartTime: null,\r\n                    FinishTime: null,\r\n                    ShiftId: null\r\n                };\r\n\r\n                date.add(1, 'day')\r\n            }\r\n\r\n            this.showShift = false;\r\n            this.detail.Days.map((day: any) => {\r\n                if (day.StartTime)\r\n                    fullDays[day.DayNumber].StartTime = moment(day.StartTime);\r\n                if (day.FinishTime)\r\n                    fullDays[day.DayNumber].FinishTime = moment(day.FinishTime);\r\n                fullDays[day.DayNumber].Hours = day.Hours;\r\n                fullDays[day.DayNumber].ShiftId = day.ShiftId;\r\n            });\r\n            this.detail.Days = fullDays;\r\n            this.detail.StartDate = moment(this.detail.StartDate);\r\n            this.hasChanges = false;\r\n        },\r\n\r\n        timeTextChanged(input: any, d: any, type: string) {\r\n            let pickedTime = moment(input.target.value, 'HH:mm');\r\n\r\n            if (type === 'FinishTime') {\r\n                if (d.FinishTime && pickedTime.hour() === d.FinishTime.hour() && pickedTime.minute() === d.FinishTime.minute()) {\r\n                    return\r\n                }\r\n\r\n                if (input === '') {\r\n                    d.FinishTime = null;\r\n                    return\r\n                }\r\n\r\n                d.FinishTime = pickedTime;\r\n            } else {\r\n                if (d.StartTime && pickedTime.hour() === d.StartTime.hour() && pickedTime.minute() === d.StartTime.minute()) {\r\n                    return\r\n                }\r\n\r\n                if (input === '') {\r\n                    d.StartTime = null;\r\n                    return\r\n                }\r\n\r\n                d.StartTime = pickedTime;\r\n            }\r\n\r\n            this.timePickerTargetDay = d;\r\n            this.autoCalcTime(type)\r\n\r\n            this.hasChanges = true;\r\n            // this.timeModal = false;\r\n        },\r\n\r\n        autoCalcTime(type: any) {\r\n            let targetDay = this.timePickerTargetDay\r\n            if (targetDay.FinishTime && targetDay.FinishTime.format('HH:mm') !== \"00:00\"\r\n                && targetDay.StartTime && targetDay.StartTime.format('HH:mm') !== \"00:00\"\r\n                && (!targetDay.Hours || targetDay.Hours === 0)) { // auto calc hours\r\n                // set year month day to same\r\n                targetDay.FinishTime.year(targetDay.StartTime.year())\r\n                targetDay.FinishTime.month(targetDay.StartTime.month())\r\n                targetDay.FinishTime.day(targetDay.StartTime.day())\r\n                let timeDiff = targetDay.FinishTime.startOf('minute').diff(targetDay.StartTime.startOf('minute'), 'hours', true);\r\n\r\n                targetDay.Hours = Math.round(timeDiff * 100) / 100;\r\n            } else if (targetDay.FinishTime && targetDay.Hours\r\n                && (!targetDay.StartTime || targetDay.StartTime.format('HH:mm') === \"00:00\")) { // auto calc start time\r\n                targetDay.StartTime = targetDay.FinishTime.clone().subtract(targetDay.Hours, 'hours')\r\n            } else if (targetDay.StartTime && targetDay.Hours\r\n                && (!targetDay.FinishTime || targetDay.FinishTime.format('HH:mm') === \"00:00\")) { // auto calc finish time\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.FinishTime && targetDay.FinishTime.format('HH:mm') !== \"00:00\"\r\n                && targetDay.StartTime && targetDay.StartTime.format('HH:mm') !== \"00:00\"\r\n                && (targetDay.Hours || targetDay.Hours !== 0)) { // otherwise all blank filled.\r\n                if (type === 'StartTime') {\r\n                    targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n                } else if (type === 'FinishTime') {\r\n                    targetDay.StartTime = targetDay.FinishTime.clone().subtract(targetDay.Hours, 'hours')\r\n                }\r\n            }\r\n        },\r\n\r\n        updateDateText(event: any, target: any) {\r\n            this.startDateMenu = false\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.remapDays()\r\n        },\r\n\r\n        startDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.detail.StartDate = date;\r\n            this.remapDays()\r\n        },\r\n\r\n        isFirstDayOfWeek: function (dayNo: any) {\r\n            var startDate = moment(this.detail.StartDate);\r\n            return dayNo == startDate.day();\r\n        },\r\n        // loadShiftTypes: function () {\r\n        //     var list = this.shiftTypeList;\r\n        //\r\n        //     for (var i = 0; i < list.length; i++) {\r\n        //         if (list[i].ShiftType !== undefined &&\r\n        //             list[i].ShiftType !== null &&\r\n        //             list[i].ShiftType.length <= 5) {\r\n        //             var shiftType: any = {\r\n        //                 name: list[i].ShiftType\r\n        //             };\r\n        //             this.shifts.push(shiftType);\r\n        //         }\r\n        //     }\r\n        //\r\n        //     this.shifts.sort(function (a, b) {\r\n        //         var x = a.name.toLowerCase();\r\n        //         var y = b.name.toLowerCase();\r\n        //         if (x < y) {\r\n        //             return -1;\r\n        //         }\r\n        //         if (x > y) {\r\n        //             return 1;\r\n        //         }\r\n        //         return 0;\r\n        //     });\r\n        // },\r\n\r\n        getDayOfWeek: function (dayNo: number) {\r\n            if (dayNo < 0 || dayNo > 6) {\r\n                console.error('day No not correct')\r\n                return 'unknown';\r\n            }\r\n\r\n            var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat'];\r\n            return days[dayNo];\r\n        },\r\n\r\n        checkHour(targetDay: any) {\r\n            this.hasChanges = true;\r\n\r\n            if (targetDay.Hours > 24) {\r\n                Dialog.alert('You can only enter up to 24 hours.')\r\n                targetDay.Hours = 24\r\n                return;\r\n            }\r\n\r\n            if (targetDay.StartTime && targetDay.Hours && targetDay.FinishTime) {\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.StartTime && targetDay.Hours) {\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.Hours && targetDay.FinishTime) {\r\n                targetDay.StartTime = targetDay.FinishTime.clone().add(targetDay.Hours, 'hours')\r\n            }\r\n        },\r\n\r\n        updateNoOfWeeks($event?: any) {\r\n            let dayNum = this.detail.Days.length;\r\n            let currentWeek = Math.floor(dayNum / 7);\r\n\r\n            if (this.detail.NoOfWeeks > currentWeek) {\r\n                this.createNewDays(currentWeek + 1, this.detail.NoOfWeeks)\r\n            } else {\r\n                let newLength = this.detail.NoOfWeeks * 7;\r\n                this.detail.Days.splice(newLength);\r\n            }\r\n        },\r\n\r\n        numLimitKeyDown: function (event: any, allowDecimal: boolean, allowColon: boolean) {\r\n            let allow = [8, 9, 13, 46, 16, 17]; // backspace, del, tab, shift, ctrl, dot\r\n            allow.push(65, 67, 86, 88); // a, c, v, x\r\n\r\n            if (allowDecimal)\r\n                allow.push(190, 110); //.\r\n\r\n            if (allowColon) allow.push(186)\r\n\r\n            if ((event.keyCode >= 48 && event.keyCode <= 57) || //key board numbers\r\n                (event.keyCode >= 96 && event.keyCode <= 105) || //key pad numbers\r\n                allow.indexOf(event.keyCode) > -1) { //various keys\r\n                // all good!\r\n            } else {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n        },\r\n\r\n        cancelChanges() {\r\n            if (!this.hasChanges) {\r\n                this.$emit('cancel');\r\n                return;\r\n            }\r\n\r\n            let msg = 'You haven\\'t saved your changes.  <br /> Are you sure you want to cancel?';\r\n            Dialog.checkChange({\r\n                message: msg,\r\n                confirmButtonText: 'Yes',\r\n                cancelButtonText: 'No',\r\n                onOk: () => {\r\n                    this.hasChanges = false;\r\n                    this.$emit('cancel')\r\n                }\r\n            })\r\n\r\n        },\r\n\r\n        // todo: use reload to clean the changes\r\n        reloadDetail: function () {\r\n            if (!this.hasChanges)\r\n                return;\r\n            // toodo: add has change check\r\n            this.$emit('reload');\r\n        },\r\n\r\n        createNewDays: function (fromWeek: any, toWeek: any) {\r\n            if (fromWeek > toWeek)\r\n                return;\r\n\r\n            var week = fromWeek;\r\n            var dayNum = this.detail.Days.length;\r\n            while (week <= toWeek) {\r\n                var date = moment(this.detail.StartDate);\r\n                date.add(dayNum, 'day');\r\n                this.detail.Days.push({\r\n                    DayNumber: dayNum,\r\n                    DayOfWeek: date.day(),\r\n                    Week: week,\r\n                    Date: date,\r\n                    Hours: 0,\r\n                    StartTime: null,\r\n                    FinishTime: null,\r\n                    ShiftId: null,\r\n                    startDateModal: false,\r\n                    endDateModal: false\r\n                })\r\n                dayNum++;\r\n                week = Math.floor(dayNum / 7) + 1;\r\n            }\r\n        },\r\n\r\n        archiveSchedule: function () {\r\n            if (this.hasChanges) {\r\n                return;\r\n            }\r\n\r\n            if (this.detail.Archive) {\r\n                Dialog.alert('Unable to archive schedule, it\\'s already archived.')\r\n            } else {\r\n\r\n                Dialog.confirmOrCancel({\r\n                    message: 'Are you sure you want to archive this work schedule?'\r\n                })\r\n                .then(() => {\r\n                    this.detail.Archive = true;\r\n                    this.doUpdateDetail();\r\n                })\r\n            }\r\n        },\r\n\r\n        deleteSchedule: function () {\r\n            if (this.hasChanges)\r\n                return;\r\n\r\n            if (this.detail.EmpAllocations.length > 0) {\r\n                Dialog.alert('Unable to delete schedule, it\\'s currently allocated to employees')\r\n            } else {\r\n                emitter.emit('dialog', {\r\n                    message: \"Are you sure you want to permanently delete this work schedule?\",\r\n                    showButtons: true,\r\n                    showCancel: true,\r\n                    okColor: 'red',\r\n                    onOk: () => {\r\n                        this.doDeleteSchedule();\r\n                    },\r\n                    onCancel: () => {\r\n                    }\r\n                })\r\n            }\r\n        },\r\n\r\n        doDeleteSchedule: function () {\r\n            Dialog.loading()\r\n\r\n            Remote.DeleteSchedule(this.detail.Id).then(res => {\r\n                this.$emit('schedule-deleted');\r\n                Dialog.clear()\r\n            })\r\n        },\r\n\r\n        updateDetail: function () {\r\n            if (!this.hasChanges)\r\n                return;\r\n\r\n            if (!this.doUpdateValidation()) {\r\n                return;\r\n            }\r\n\r\n            this.doUpdateDetail();\r\n        },\r\n        doUpdateValidation: function () {\r\n            if (this.createType === 'team') {\r\n                if ((!this.detail.Name && !this.detail.Description)\r\n                    || (this.detail.Name === '' && this.detail.Description === '')) {\r\n                    Dialog.alert('Schedule name cannot be blank. <br /> Schedule description cannot be blank.')\r\n                    return false;\r\n                }\r\n\r\n                if (!this.detail.Name || this.detail.Name === '') {\r\n                    Dialog.alert('Schedule name cannot be blank.')\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (!this.detail.Description || this.detail.Description === '') {\r\n                Dialog.alert('Schedule description cannot be blank.')\r\n                return false;\r\n            }\r\n\r\n            if (this.detail.Name !== undefined &&\r\n                this.detail.Name !== null &&\r\n                this.detail.Name.length > 50) {\r\n                Dialog.alert('Schedule names must be 50 characters or fewer (including spaces).')\r\n                return false;\r\n            }\r\n\r\n            if (this.detail.Description !== undefined &&\r\n                this.detail.Description !== null &&\r\n                this.detail.Description.length > 50) {\r\n                Dialog.alert('Schedule descriptions must be 50 characters or fewer (including spaces).')\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n        doUpdateDetail: function () {\r\n            var postData = {\r\n                Id: this.detail.Id,\r\n                NoOfWeeks: this.detail.NoOfWeeks,\r\n                StartDate: moment(this.detail.StartDate).format('DD/MMM/YYYY'),\r\n                Name: this.createType === 'team' ? this.detail.Name : 'Personal_ ' + this.detail.EmployeeNo,\r\n                EmployeeNo: this.detail.EmployeeNo ? this.detail.EmployeeNo : null,\r\n                ScheduleType: this.detail.EmployeeNo ? 1 : 0,\r\n                IsPersonal: !!this.detail.EmployeeNo,\r\n                Description: this.detail.Description,\r\n                Archive: this.detail.Archive,\r\n                Days: <any[]>[]\r\n            }\r\n\r\n            this.detail.Days.map(function (day: any) {\r\n\r\n                if (day.Hours > 0 ||\r\n                    (day.ShiftId !== null && day.ShiftId !== \"\")) {\r\n                    if (day.ShiftId === \"\") day.ShiftId = null;\r\n                    postData.Days.push({\r\n                        DayNumber: day.DayNumber,\r\n                        StartTime: day.StartTime ? day.StartTime.format('HH:mm') : null,\r\n                        FinishTime: day.FinishTime ? day.FinishTime.format('HH:mm') : null,\r\n                        Hours: day.Hours > 24 ? 24 : day.Hours,\r\n                        ShiftId: day.ShiftId,\r\n                    });\r\n                }\r\n            });\r\n\r\n            Dialog.loading()\r\n            Remote.PostSchedule(postData).then(res => {\r\n                this.$emit('schedule-saved', res.Data);\r\n                if (this !== undefined &&\r\n                    this.hasChanges !== undefined) {\r\n                    this.hasChanges = false;\r\n                }\r\n                if (this !== undefined) {\r\n                    // todo broken\r\n                    // this.hasDataChanges = this.hasChanges;\r\n                }\r\n            }).finally(() => {\r\n                Dialog.clear();\r\n            })\r\n        },\r\n        formUpdated() {\r\n            this.hasChanges = true;\r\n        },\r\n\r\n        async openDatePicker($event: any) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            try {\r\n                this.detail.StartDate = await (this.$refs.DatePickerRef as any).toggleShow(this.detail.StartDate);\r\n            } catch (e) {\r\n                e ? console.error(e) : null;\r\n                return;\r\n            }\r\n\r\n            this.remapDays()\r\n            this.hasChanges = true;\r\n        },\r\n        selectedEmployee(employee: any) {\r\n            this.detail.EmployeeNo = employee.employeeNo\r\n            this.detail.Description = `${employee.commonName} ${employee.employeeNo} Personal Schedule`\r\n        }\r\n    },\r\n\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$grey: #475062;\r\n\r\n.description-area {\r\n    flex-grow: 1;\r\n    height: 54px;\r\n    padding: 4px 5px 4px 5px;\r\n    border: 1px solid rgba($grey, 0.7);\r\n    border-radius: 4px;\r\n}\r\n\r\n.form-label {\r\n    display: inline-block;\r\n    width: 120px;\r\n    font-weight: bold;\r\n    flex-grow: 0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.label-detail {\r\n    display: inline-block;\r\n}\r\n\r\n.table-date-counter {\r\n    width: 70px;\r\n}\r\n\r\n.v-input--dense {\r\n    min-height: 0;\r\n}\r\n\r\n.shift-select-td ::v-deep .v-text-field .v-input__control .v-input__slot {\r\n    padding: 0 0 0 8px;\r\n}\r\n\r\n/*.v-text-field.v-text-field--enclosed:not(.v-text-field--rounded) > .v-input__control > .v-input__slot,*/\r\n.sched-detail-form .v-input--dense ::v-deep .v-input__control .v-input__slot {\r\n    min-height: 0;\r\n\r\n}\r\n\r\n.sched-detail-table {\r\n    overflow-y: scroll;\r\n    max-height: 480px;\r\n    overflow-x: auto;\r\n\r\n    table {\r\n        width: auto;\r\n        min-width: 340px;\r\n    }\r\n\r\n    .shift-min-width {\r\n        min-width: 460px;\r\n    }\r\n}\r\n\r\n.shift-select-td {\r\n    position: relative;\r\n    width: 120px;\r\n\r\n    .v-icon {\r\n        position: absolute;\r\n        right: 20px;\r\n        width: 0;\r\n    }\r\n}\r\n\r\n.shift-select {\r\n    width: 100%;\r\n    border: 1px solid grey;\r\n}\r\n\r\n.number-of-weeks {\r\n    @media screen and (max-width: 600px) {\r\n        width: 80%;\r\n        display: block !important;\r\n        margin-left: 0 !important;\r\n    }\r\n}\r\n\r\n.mobile-arrow {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-left: 5px;\r\n\r\n    .arrow-icon {\r\n        font-size: 20px;\r\n    }\r\n\r\n    @media screen and (min-width: 600px) {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.sched-detail-table-input {\r\n    width: 100%;\r\n    padding: 4px 10px;\r\n    border: 1px solid grey;\r\n    border-radius: 4px;\r\n    box-sizing: border-box;\r\n\r\n    &::-webkit-outer-spin-button,\r\n    &::-webkit-inner-spin-button {\r\n        -webkit-appearance: auto;\r\n\r\n    }\r\n\r\n\r\n    @media screen and (max-width: 600px) {\r\n        width: calc(100% - 20px);\r\n        display: block;\r\n        margin: 0 auto\r\n    }\r\n}\r\n\r\n.date-input {\r\n    width: 100px;\r\n    padding: 5px 0 5px 10px;\r\n    border-radius: 4px;\r\n    border: 1px solid rgba(0,0,0,.42);;\r\n    box-shadow: none;\r\n}\r\n\r\n.number-input {\r\n    padding: 5px 5px 5px 10px;\r\n    border-radius: 4px;\r\n    border: 1px solid rgba(0,0,0,.42);;\r\n    box-shadow: none;\r\n}\r\n\r\n.default-form {\r\n    input {\r\n        margin: 0;\r\n    }\r\n}\r\n\r\n.employeeNo-autoComplete {\r\n    display: inline-block;\r\n    width: 220px;\r\n}\r\n\r\n::v-deep .custom-select-selected {\r\n    padding: 4px 10px;\r\n    min-height: 15px;\r\n    font-size: 12px;\r\n    line-height: initial;\r\n    background: none;\r\n    border-color: grey;\r\n}\r\n\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n    appearance: auto;\r\n    -moz-appearance: auto;\r\n    -webkit-appearance: auto;\r\n    cursor: pointer;\r\n}\r\n\r\n</style>\r\n","import {ActionTree, Module, MutationTree} from \"vuex\";\r\n\r\nimport {RootState} from \"@/store/index\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\n\r\nexport interface ManagedEmployeeRemote {\r\n    CommonName: string,\r\n    EmployeeNo: number\r\n    PositionCode: string\r\n    StdHoursPerWeek: number\r\n}\r\n\r\nexport interface ManagedEmployee {\r\n    commonName: string,\r\n    employeeNo: number\r\n    positionCode: string\r\n    stdHoursPerWeek: number\r\n}\r\n\r\n\r\nexport interface EmployeeState {\r\n    employees: ManagedEmployee[]\r\n    employeesWithPeronsalSche: number[]\r\n}\r\n\r\nexport enum EmployeeGetters {\r\n    getEmployees = \"GET_EMPLOYEES\",\r\n}\r\n\r\nexport enum EmployeeMutations {\r\n    setEmployees = \"SET_EMPLOYEES\",\r\n}\r\n\r\nexport enum EmployeeActions {\r\n    getEmployees = 'GET_EMPLOYEES',\r\n}\r\n\r\nconst employeeGetters: MutationTree<EmployeeState> = {\r\n    [EmployeeGetters.getEmployees] (state): ManagedEmployee[] {\r\n        return state.employees;\r\n    }\r\n}\r\n\r\nconst employeeMutations: MutationTree<EmployeeState> = {\r\n    [EmployeeMutations.setEmployees](state, employees: any[]) {\r\n        state.employees = employees\r\n    },\r\n}\r\n\r\nconst employeeActions: ActionTree<EmployeeState, RootState> = {\r\n    [EmployeeActions.getEmployees] ({ commit, state }, employeeNo: number) {\r\n        if (state.employees.length > 0) {\r\n            return state.employees\r\n        }\r\n        return Remote.GetManagedEmployees(employeeNo).then(res => {\r\n            let convertedEmployees: ManagedEmployee[] = res.map((employeeRemote: any) => {\r\n                return Object.fromEntries(\r\n                    Object.entries(employeeRemote).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                );\r\n            })\r\n\r\n            commit(EmployeeMutations.setEmployees, convertedEmployees)\r\n            return convertedEmployees\r\n        })\r\n    },\r\n}\r\n\r\nconst EmployeeModule: Module<EmployeeState, RootState> = {\r\n    state: {\r\n        employees: [],\r\n        employeesWithPeronsalSche: []\r\n    },\r\n    getters: employeeGetters,\r\n    mutations: employeeMutations,\r\n    actions: employeeActions\r\n}\r\n\r\nexport default EmployeeModule;\r\n","<template>\r\n    <div class=\"custom-select\" tabindex=\"1\"  ref=\"selectRef\">\r\n        <div class=\"custom-select-selected\">\r\n            <input class=\"custom-select-input\" ref=\"selectInputRef\"\r\n                   v-model=\"selectSearchInput\" @keyup=\"updateSearchList\">\r\n        </div>\r\n        <div class=\"custom-select-items\">\r\n            <div class=\"custom-select-item\" ref=\"selectDropdownRef\"\r\n                 v-for=\"(option, index) in dropDownList\" :key=\"index\"\r\n                 :tabindex=\"index + 99\"\r\n                 v-bind:class=\"{'targeting': option.targeting}\"\r\n                 @click=\"chooseOption($event, option)\">\r\n                <div class=\"cell-config\">\r\n                    {{ option.name }}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\nimport _ from \"lodash\";\r\n\r\nexport default defineComponent({\r\nname: \"AutoComplete\",\r\n    props: {\r\n        inputList: {\r\n            type: Array\r\n        },\r\n        optionName: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            // selectSearchInput: false,\r\n            editing: false,\r\n            targetingIndex: <number | null>null,\r\n            // downDownList: <any[]>[],\r\n        }\r\n\r\n    },\r\n    setup(props: any) {\r\n\r\n        if (!props.optionName) {\r\n            // todo: treat as string array\r\n            console.error(\"need object, optionName is missing\")\r\n        } else {\r\n            // todo: treat as object array\r\n            // console.log('inputLIst', props.inputList)\r\n            // console.log('inputLIst', props.optionName)\r\n        }\r\n\r\n        const originList = ref(props.inputList.map((obj: any, index: number) => {\r\n            return {\r\n                targeting: false,\r\n                name: obj[props.optionName],\r\n                index: index\r\n            }\r\n        }))\r\n        const dropDownList = ref(originList.value.slice())\r\n        const selectSearchInput = ref('')\r\n\r\n        return {originList, dropDownList, selectSearchInput}\r\n\r\n    },\r\n\r\n    methods: {\r\n        updateSearchList(event: any) {\r\n            if (event.key === \"ArrowDown\") {\r\n                this.moveTargetDown();\r\n                return\r\n            } else if (event.key === \"ArrowUp\") {\r\n                this.moveTargetUp();\r\n                return\r\n            } else if (event.key === \"Enter\") {\r\n                if (this.targetingIndex) {\r\n                    this.selectFromTarget();\r\n                    return\r\n                }\r\n            }\r\n\r\n            this.dropDownList = this.originList.filter((o: any) => {\r\n                o.targeting = false;\r\n                return o.name.toLowerCase().indexOf(this.selectSearchInput.toLowerCase()) > -1\r\n            })\r\n        },\r\n\r\n        moveTargetDown() {\r\n            if (this.targetingIndex !== null) {\r\n                this.dropDownList[this.targetingIndex].targeting = false;\r\n                if (this.targetingIndex + 1 < this.dropDownList.length) {\r\n                    this.targetingIndex++\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else if (this.targetingIndex + 1 === this.dropDownList.length) {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                }\r\n            } else {\r\n                this.targetingIndex = 0\r\n                this.dropDownList[this.targetingIndex].targeting = true;\r\n            }\r\n        },\r\n\r\n        moveTargetUp() {\r\n            if (this.targetingIndex !== null) {\r\n                this.dropDownList[this.targetingIndex].targeting = false;\r\n                if (this.targetingIndex - 1 >= 0) {\r\n                    this.targetingIndex--\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else if (this.targetingIndex - 1 < 0) {\r\n                    this.targetingIndex = this.dropDownList.length - 1;\r\n                    this.dropDownList[this.targetingIndex!].targeting = true;\r\n                } else {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                }\r\n            } else {\r\n                this.targetingIndex = 0\r\n                this.dropDownList[this.targetingIndex].targeting = true;\r\n            }\r\n        },\r\n\r\n        selectFromTarget() {\r\n            this.selectSearchInput = this.dropDownList[this.targetingIndex!].name\r\n            this.$emit('selected', this.inputList![this.targetingIndex!])\r\n        },\r\n\r\n        chooseOption($event: any, option: any) {\r\n            this.selectSearchInput = option.name\r\n            this.$emit('selected', this.inputList![option.index])\r\n\r\n            $event.target.blur();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use '../../style/colors';\r\n\r\n.custom-select {\r\n    font-size: 12px;\r\n}\r\n\r\n.custom-select-selected {\r\n    min-height: 24px;\r\n    padding: 4px 1.5em 4px 0.2em;\r\n    border: none;\r\n    border-radius: 0;\r\n    background-color: transparent;\r\n    border-bottom: 1px solid rgba(colors.$grey, 0.7);\r\n\r\n}\r\n\r\n.custom-select-selected:after {\r\n    top: 8px;\r\n    right: 0;\r\n}\r\n\r\n.custom-select:focus-within {\r\n.custom-select-selected {\r\n    border: none;\r\n    border-radius: 0;\r\n    border-bottom: 1px solid colors.$aff-dark-blue;\r\n}\r\n\r\n.custom-select-selected:after {\r\n    transform: rotate(180deg);\r\n    top: 4px;\r\n}\r\n}\r\n\r\n.custom-select-items {\r\n    background: white;\r\n}\r\n\r\n.custom-select-item {\r\n    color: colors.$dark-blue-app;\r\n// padding-left: 1em;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 4px 1em;\r\n}\r\n\r\n.custom-select-item:hover {\r\n    color: colors.$aff-dark-blue;\r\n    background-color: lighten(colors.$aff-blue, 50%);\r\n}\r\n\r\n.custom-select-input {\r\n    border: none;\r\n    background: transparent;\r\n}\r\n\r\n.cell-config {\r\n    pointer-events: none;\r\n}\r\n\r\n.targeting {\r\n    background-color: colors.$aff-dark-blue;\r\n    color: white;\r\n}\r\n</style>","\r\nimport {defineComponent, ref} from \"vue\";\r\nimport _ from \"lodash\";\r\n\r\nexport default defineComponent({\r\nname: \"AutoComplete\",\r\n    props: {\r\n        inputList: {\r\n            type: Array\r\n        },\r\n        optionName: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            // selectSearchInput: false,\r\n            editing: false,\r\n            targetingIndex: <number | null>null,\r\n            // downDownList: <any[]>[],\r\n        }\r\n\r\n    },\r\n    setup(props: any) {\r\n\r\n        if (!props.optionName) {\r\n            // todo: treat as string array\r\n            console.error(\"need object, optionName is missing\")\r\n        } else {\r\n            // todo: treat as object array\r\n            // console.log('inputLIst', props.inputList)\r\n            // console.log('inputLIst', props.optionName)\r\n        }\r\n\r\n        const originList = ref(props.inputList.map((obj: any, index: number) => {\r\n            return {\r\n                targeting: false,\r\n                name: obj[props.optionName],\r\n                index: index\r\n            }\r\n        }))\r\n        const dropDownList = ref(originList.value.slice())\r\n        const selectSearchInput = ref('')\r\n\r\n        return {originList, dropDownList, selectSearchInput}\r\n\r\n    },\r\n\r\n    methods: {\r\n        updateSearchList(event: any) {\r\n            if (event.key === \"ArrowDown\") {\r\n                this.moveTargetDown();\r\n                return\r\n            } else if (event.key === \"ArrowUp\") {\r\n                this.moveTargetUp();\r\n                return\r\n            } else if (event.key === \"Enter\") {\r\n                if (this.targetingIndex) {\r\n                    this.selectFromTarget();\r\n                    return\r\n                }\r\n            }\r\n\r\n            this.dropDownList = this.originList.filter((o: any) => {\r\n                o.targeting = false;\r\n                return o.name.toLowerCase().indexOf(this.selectSearchInput.toLowerCase()) > -1\r\n            })\r\n        },\r\n\r\n        moveTargetDown() {\r\n            if (this.targetingIndex !== null) {\r\n                this.dropDownList[this.targetingIndex].targeting = false;\r\n                if (this.targetingIndex + 1 < this.dropDownList.length) {\r\n                    this.targetingIndex++\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else if (this.targetingIndex + 1 === this.dropDownList.length) {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                }\r\n            } else {\r\n                this.targetingIndex = 0\r\n                this.dropDownList[this.targetingIndex].targeting = true;\r\n            }\r\n        },\r\n\r\n        moveTargetUp() {\r\n            if (this.targetingIndex !== null) {\r\n                this.dropDownList[this.targetingIndex].targeting = false;\r\n                if (this.targetingIndex - 1 >= 0) {\r\n                    this.targetingIndex--\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                } else if (this.targetingIndex - 1 < 0) {\r\n                    this.targetingIndex = this.dropDownList.length - 1;\r\n                    this.dropDownList[this.targetingIndex!].targeting = true;\r\n                } else {\r\n                    this.targetingIndex = 0\r\n                    this.dropDownList[this.targetingIndex].targeting = true;\r\n                }\r\n            } else {\r\n                this.targetingIndex = 0\r\n                this.dropDownList[this.targetingIndex].targeting = true;\r\n            }\r\n        },\r\n\r\n        selectFromTarget() {\r\n            this.selectSearchInput = this.dropDownList[this.targetingIndex!].name\r\n            this.$emit('selected', this.inputList![this.targetingIndex!])\r\n        },\r\n\r\n        chooseOption($event: any, option: any) {\r\n            this.selectSearchInput = option.name\r\n            this.$emit('selected', this.inputList![option.index])\r\n\r\n            $event.target.blur();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./AutoComplete.vue?vue&type=template&id=309b7c5e&scoped=true\"\nimport script from \"./AutoComplete.vue?vue&type=script&lang=ts\"\nexport * from \"./AutoComplete.vue?vue&type=script&lang=ts\"\n\nimport \"./AutoComplete.vue?vue&type=style&index=0&id=309b7c5e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-309b7c5e\"\n\nexport default script","<template>\r\n    <div>\r\n        <span>\r\n            <div class=\"custom-select\" tabindex=\"1\" ref=\"selectRef\">\r\n                <div v-if=\"modelValue\" class=\"custom-select-selected\">\r\n                    <span v-if=\"modelValue && typeof modelValue === 'object' && displayKey\" >{{modelValue[displayKey]}}</span>\r\n                    <span v-else-if=\"modelValue\">{{modelValue}}</span>\r\n                    <span v-else class=\"custom-select-empty-selected\"></span>\r\n                </div>\r\n                <div v-else class=\"custom-select-selected\">\r\n                    <span v-if=\"selected && typeof selected === 'object'\">{{selected[displayKey]}}</span>\r\n                    <span v-else-if=\"selected\">{{selected}}</span>\r\n                    <span v-else class=\"custom-select-empty-selected\"></span>\r\n                </div>\r\n                <div class=\"custom-select-items\" v-bind:style=\"{ 'left': left + 'px'}\">\r\n                    <div class=\"custom-select-item\"\r\n                         v-for=\"(option, index) of options\" :key=\"index\"\r\n                         @click=\"selectOption($event, option);\">\r\n                        <div class=\"cell-config\">\r\n                            <label v-if=\"displayKey\">{{ option[displayKey] }}</label>\r\n                            <label v-else>{{option}}</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"CustomSelect\",\r\n    props: {\r\n        options: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n        displayKey: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        modelValue: {\r\n            type: [String, Number]\r\n        },\r\n        selected: {}\r\n    },\r\n    data() {\r\n        return {\r\n            left: 0\r\n        }\r\n    },\r\n    mounted() {\r\n        this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n    },\r\n    methods: {\r\n        selectOption($event: any, option: any) {\r\n            $event.target.blur()\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n\r\n            if (this.modelValue) {\r\n                this.$emit('update:modelValue', option)\r\n            } else {\r\n                this.$emit('selectOption', option)\r\n            }\r\n        }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-select-selected:after {\r\n    top: calc(50% - 3px);\r\n    right: 10px;\r\n}\r\n\r\n.custom-select-selected {\r\n    padding: 8px 10px;\r\n    min-height: 35px;\r\n}\r\n\r\n.custom-select-items {\r\n    position: fixed;\r\n    width: 150px;\r\n}\r\n\r\n.custom-select-empty-selected {\r\n    display: inline-block;\r\n    width: 1px;\r\n    height: 15px;\r\n}\r\n\r\n.cell-config {\r\n    label {\r\n        cursor: pointer;\r\n    }\r\n}\r\n</style>","\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"CustomSelect\",\r\n    props: {\r\n        options: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n        displayKey: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        modelValue: {\r\n            type: [String, Number]\r\n        },\r\n        selected: {}\r\n    },\r\n    data() {\r\n        return {\r\n            left: 0\r\n        }\r\n    },\r\n    mounted() {\r\n        this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n    },\r\n    methods: {\r\n        selectOption($event: any, option: any) {\r\n            $event.target.blur()\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n\r\n            if (this.modelValue) {\r\n                this.$emit('update:modelValue', option)\r\n            } else {\r\n                this.$emit('selectOption', option)\r\n            }\r\n        }\r\n    }\r\n\r\n})\r\n","import { render } from \"./CustomSelect.vue?vue&type=template&id=7e952b10&scoped=true\"\nimport script from \"./CustomSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CustomSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CustomSelect.vue?vue&type=style&index=0&id=7e952b10&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7e952b10\"\n\nexport default script","\r\nimport Vue, {defineComponent} from 'vue';\r\nimport moment from \"moment\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {emitter} from '@/main';\r\nimport Dialog from \"@/components/dialog\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {EmployeeGetters} from \"@/store/employeeModule\";\r\nimport AutoComplete from \"@/components/common/AutoComplete.vue\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"schedule-detail\",\r\n    components: {\r\n        AutoComplete,\r\n        DatePicker,\r\n        CustomSelect\r\n    },\r\n    props: ['detail', 'shiftTypeList', 'readOnly'],\r\n    data: function () {\r\n        return {\r\n            //\r\n            createType: 'team',\r\n            employees: [],\r\n\r\n            // todo: bring back name length rule\r\n            // nameLengthRule: [v => v.length <= 49 || 'Max 50 characters'],\r\n            week: 1,\r\n            tablePadding: '0 0;',\r\n            hasChanges: false,\r\n            isDateToCleared: false,\r\n            shifts: <any[]>[],\r\n            showShift: true,\r\n            initialEmpSched: null,\r\n\r\n            startDateMenu: false,\r\n\r\n            //\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n\r\n            //  time picker\r\n            timePickerTargetDay: <any>null,\r\n            selectedTimeType: 'Start', // Start Finish\r\n        }\r\n    },\r\n    computed: {\r\n        isNewSchedule() {\r\n            let detail: any = this.detail\r\n            return detail.Id <= 0;\r\n        },\r\n    },\r\n    // created: function () {\r\n    // },\r\n\r\n    mounted: function () {\r\n        // this.loadShiftTypes();\r\n        this.shifts = this.shiftTypeList;\r\n\r\n        this.hasChanges = this.detail.Id == -1; //new schedules always has changes\r\n\r\n        this.$emit(\"dataChanged\", this.hasChanges); // todo wtf is components? check what does this line do !!!\r\n\r\n\r\n        let employees = this.$store.getters[EmployeeGetters.getEmployees]\r\n\r\n        employees = employees.filter((employee: any) => {\r\n            return !this.$store.state.EmployeeModule.employeesWithPeronsalSche.includes(employee.employeeNo)\r\n        })\r\n\r\n        this.employees = employees.map((employee: any) => {\r\n            employee.joinedName = employee.commonName + ' ' + employee.employeeNo\r\n            return employee;\r\n        })\r\n        //\r\n\r\n        //Add missing 0 days\r\n        this.remapDays()\r\n\r\n        console.log('schedule type', this.detail.ScheduleType)\r\n\r\n        this.createType = this.detail.ScheduleType === 0 || this.detail.ScheduleType === undefined ? 'team' : 'personal';\r\n    },\r\n    watch: {\r\n        ['detail'](newVal, oldVal) {\r\n            this.remapDays()\r\n            this.createType = this.detail.ScheduleType === 0 || this.detail.ScheduleType === undefined ? 'team' : 'personal';\r\n            // todo: simplify this to create event\r\n            if (newVal != oldVal && newVal.Id == -1) {\r\n                this.detail.Days = [];\r\n                this.createNewDays(1, 1);\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        selectedShift(selectedShift: any, d: any) {\r\n            d.ShiftId = selectedShift;\r\n            this.hasChanges = true;\r\n        },\r\n        formSubmited($event: any) {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n            return false\r\n          //\r\n        },\r\n        increaseNumber() {\r\n            this.detail.NoOfWeeks++;\r\n            this.updateNoOfWeeks()\r\n        },\r\n        reduceNumber() {\r\n            this.detail.NoOfWeeks--;\r\n            this.updateNoOfWeeks()\r\n        },\r\n        toggleShift() {\r\n            this.showShift = !this.showShift;\r\n        },\r\n        // todo: fix calendar\r\n        // getDay(date: any) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n        remapDays() {\r\n            var week = 0;\r\n            var date = moment(this.detail.StartDate);\r\n            var total = this.detail.NoOfWeeks * 7;\r\n\r\n            var fullDays = new Array(total);\r\n\r\n            for (var dayNum = 0; dayNum < total; dayNum++) {\r\n                if (dayNum % 7 == 0) {\r\n                    week++;\r\n                }\r\n\r\n                fullDays[dayNum] = {\r\n                    DayNumber: dayNum,\r\n                    DayOfWeek: date.day(),\r\n                    Week: week,\r\n                    Date: moment(date),\r\n                    Hours: 0,\r\n                    StartTime: null,\r\n                    FinishTime: null,\r\n                    ShiftId: null\r\n                };\r\n\r\n                date.add(1, 'day')\r\n            }\r\n\r\n            this.showShift = false;\r\n            this.detail.Days.map((day: any) => {\r\n                if (day.StartTime)\r\n                    fullDays[day.DayNumber].StartTime = moment(day.StartTime);\r\n                if (day.FinishTime)\r\n                    fullDays[day.DayNumber].FinishTime = moment(day.FinishTime);\r\n                fullDays[day.DayNumber].Hours = day.Hours;\r\n                fullDays[day.DayNumber].ShiftId = day.ShiftId;\r\n            });\r\n            this.detail.Days = fullDays;\r\n            this.detail.StartDate = moment(this.detail.StartDate);\r\n            this.hasChanges = false;\r\n        },\r\n\r\n        timeTextChanged(input: any, d: any, type: string) {\r\n            let pickedTime = moment(input.target.value, 'HH:mm');\r\n\r\n            if (type === 'FinishTime') {\r\n                if (d.FinishTime && pickedTime.hour() === d.FinishTime.hour() && pickedTime.minute() === d.FinishTime.minute()) {\r\n                    return\r\n                }\r\n\r\n                if (input === '') {\r\n                    d.FinishTime = null;\r\n                    return\r\n                }\r\n\r\n                d.FinishTime = pickedTime;\r\n            } else {\r\n                if (d.StartTime && pickedTime.hour() === d.StartTime.hour() && pickedTime.minute() === d.StartTime.minute()) {\r\n                    return\r\n                }\r\n\r\n                if (input === '') {\r\n                    d.StartTime = null;\r\n                    return\r\n                }\r\n\r\n                d.StartTime = pickedTime;\r\n            }\r\n\r\n            this.timePickerTargetDay = d;\r\n            this.autoCalcTime(type)\r\n\r\n            this.hasChanges = true;\r\n            // this.timeModal = false;\r\n        },\r\n\r\n        autoCalcTime(type: any) {\r\n            let targetDay = this.timePickerTargetDay\r\n            if (targetDay.FinishTime && targetDay.FinishTime.format('HH:mm') !== \"00:00\"\r\n                && targetDay.StartTime && targetDay.StartTime.format('HH:mm') !== \"00:00\"\r\n                && (!targetDay.Hours || targetDay.Hours === 0)) { // auto calc hours\r\n                // set year month day to same\r\n                targetDay.FinishTime.year(targetDay.StartTime.year())\r\n                targetDay.FinishTime.month(targetDay.StartTime.month())\r\n                targetDay.FinishTime.day(targetDay.StartTime.day())\r\n                let timeDiff = targetDay.FinishTime.startOf('minute').diff(targetDay.StartTime.startOf('minute'), 'hours', true);\r\n\r\n                targetDay.Hours = Math.round(timeDiff * 100) / 100;\r\n            } else if (targetDay.FinishTime && targetDay.Hours\r\n                && (!targetDay.StartTime || targetDay.StartTime.format('HH:mm') === \"00:00\")) { // auto calc start time\r\n                targetDay.StartTime = targetDay.FinishTime.clone().subtract(targetDay.Hours, 'hours')\r\n            } else if (targetDay.StartTime && targetDay.Hours\r\n                && (!targetDay.FinishTime || targetDay.FinishTime.format('HH:mm') === \"00:00\")) { // auto calc finish time\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.FinishTime && targetDay.FinishTime.format('HH:mm') !== \"00:00\"\r\n                && targetDay.StartTime && targetDay.StartTime.format('HH:mm') !== \"00:00\"\r\n                && (targetDay.Hours || targetDay.Hours !== 0)) { // otherwise all blank filled.\r\n                if (type === 'StartTime') {\r\n                    targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n                } else if (type === 'FinishTime') {\r\n                    targetDay.StartTime = targetDay.FinishTime.clone().subtract(targetDay.Hours, 'hours')\r\n                }\r\n            }\r\n        },\r\n\r\n        updateDateText(event: any, target: any) {\r\n            this.startDateMenu = false\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.remapDays()\r\n        },\r\n\r\n        startDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.detail.StartDate = date;\r\n            this.remapDays()\r\n        },\r\n\r\n        isFirstDayOfWeek: function (dayNo: any) {\r\n            var startDate = moment(this.detail.StartDate);\r\n            return dayNo == startDate.day();\r\n        },\r\n        // loadShiftTypes: function () {\r\n        //     var list = this.shiftTypeList;\r\n        //\r\n        //     for (var i = 0; i < list.length; i++) {\r\n        //         if (list[i].ShiftType !== undefined &&\r\n        //             list[i].ShiftType !== null &&\r\n        //             list[i].ShiftType.length <= 5) {\r\n        //             var shiftType: any = {\r\n        //                 name: list[i].ShiftType\r\n        //             };\r\n        //             this.shifts.push(shiftType);\r\n        //         }\r\n        //     }\r\n        //\r\n        //     this.shifts.sort(function (a, b) {\r\n        //         var x = a.name.toLowerCase();\r\n        //         var y = b.name.toLowerCase();\r\n        //         if (x < y) {\r\n        //             return -1;\r\n        //         }\r\n        //         if (x > y) {\r\n        //             return 1;\r\n        //         }\r\n        //         return 0;\r\n        //     });\r\n        // },\r\n\r\n        getDayOfWeek: function (dayNo: number) {\r\n            if (dayNo < 0 || dayNo > 6) {\r\n                console.error('day No not correct')\r\n                return 'unknown';\r\n            }\r\n\r\n            var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat'];\r\n            return days[dayNo];\r\n        },\r\n\r\n        checkHour(targetDay: any) {\r\n            this.hasChanges = true;\r\n\r\n            if (targetDay.Hours > 24) {\r\n                Dialog.alert('You can only enter up to 24 hours.')\r\n                targetDay.Hours = 24\r\n                return;\r\n            }\r\n\r\n            if (targetDay.StartTime && targetDay.Hours && targetDay.FinishTime) {\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.StartTime && targetDay.Hours) {\r\n                targetDay.FinishTime = targetDay.StartTime.clone().add(targetDay.Hours, 'hours')\r\n            } else if (targetDay.Hours && targetDay.FinishTime) {\r\n                targetDay.StartTime = targetDay.FinishTime.clone().add(targetDay.Hours, 'hours')\r\n            }\r\n        },\r\n\r\n        updateNoOfWeeks($event?: any) {\r\n            let dayNum = this.detail.Days.length;\r\n            let currentWeek = Math.floor(dayNum / 7);\r\n\r\n            if (this.detail.NoOfWeeks > currentWeek) {\r\n                this.createNewDays(currentWeek + 1, this.detail.NoOfWeeks)\r\n            } else {\r\n                let newLength = this.detail.NoOfWeeks * 7;\r\n                this.detail.Days.splice(newLength);\r\n            }\r\n        },\r\n\r\n        numLimitKeyDown: function (event: any, allowDecimal: boolean, allowColon: boolean) {\r\n            let allow = [8, 9, 13, 46, 16, 17]; // backspace, del, tab, shift, ctrl, dot\r\n            allow.push(65, 67, 86, 88); // a, c, v, x\r\n\r\n            if (allowDecimal)\r\n                allow.push(190, 110); //.\r\n\r\n            if (allowColon) allow.push(186)\r\n\r\n            if ((event.keyCode >= 48 && event.keyCode <= 57) || //key board numbers\r\n                (event.keyCode >= 96 && event.keyCode <= 105) || //key pad numbers\r\n                allow.indexOf(event.keyCode) > -1) { //various keys\r\n                // all good!\r\n            } else {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n        },\r\n\r\n        cancelChanges() {\r\n            if (!this.hasChanges) {\r\n                this.$emit('cancel');\r\n                return;\r\n            }\r\n\r\n            let msg = 'You haven\\'t saved your changes.  <br /> Are you sure you want to cancel?';\r\n            Dialog.checkChange({\r\n                message: msg,\r\n                confirmButtonText: 'Yes',\r\n                cancelButtonText: 'No',\r\n                onOk: () => {\r\n                    this.hasChanges = false;\r\n                    this.$emit('cancel')\r\n                }\r\n            })\r\n\r\n        },\r\n\r\n        // todo: use reload to clean the changes\r\n        reloadDetail: function () {\r\n            if (!this.hasChanges)\r\n                return;\r\n            // toodo: add has change check\r\n            this.$emit('reload');\r\n        },\r\n\r\n        createNewDays: function (fromWeek: any, toWeek: any) {\r\n            if (fromWeek > toWeek)\r\n                return;\r\n\r\n            var week = fromWeek;\r\n            var dayNum = this.detail.Days.length;\r\n            while (week <= toWeek) {\r\n                var date = moment(this.detail.StartDate);\r\n                date.add(dayNum, 'day');\r\n                this.detail.Days.push({\r\n                    DayNumber: dayNum,\r\n                    DayOfWeek: date.day(),\r\n                    Week: week,\r\n                    Date: date,\r\n                    Hours: 0,\r\n                    StartTime: null,\r\n                    FinishTime: null,\r\n                    ShiftId: null,\r\n                    startDateModal: false,\r\n                    endDateModal: false\r\n                })\r\n                dayNum++;\r\n                week = Math.floor(dayNum / 7) + 1;\r\n            }\r\n        },\r\n\r\n        archiveSchedule: function () {\r\n            if (this.hasChanges) {\r\n                return;\r\n            }\r\n\r\n            if (this.detail.Archive) {\r\n                Dialog.alert('Unable to archive schedule, it\\'s already archived.')\r\n            } else {\r\n\r\n                Dialog.confirmOrCancel({\r\n                    message: 'Are you sure you want to archive this work schedule?'\r\n                })\r\n                .then(() => {\r\n                    this.detail.Archive = true;\r\n                    this.doUpdateDetail();\r\n                })\r\n            }\r\n        },\r\n\r\n        deleteSchedule: function () {\r\n            if (this.hasChanges)\r\n                return;\r\n\r\n            if (this.detail.EmpAllocations.length > 0) {\r\n                Dialog.alert('Unable to delete schedule, it\\'s currently allocated to employees')\r\n            } else {\r\n                emitter.emit('dialog', {\r\n                    message: \"Are you sure you want to permanently delete this work schedule?\",\r\n                    showButtons: true,\r\n                    showCancel: true,\r\n                    okColor: 'red',\r\n                    onOk: () => {\r\n                        this.doDeleteSchedule();\r\n                    },\r\n                    onCancel: () => {\r\n                    }\r\n                })\r\n            }\r\n        },\r\n\r\n        doDeleteSchedule: function () {\r\n            Dialog.loading()\r\n\r\n            Remote.DeleteSchedule(this.detail.Id).then(res => {\r\n                this.$emit('schedule-deleted');\r\n                Dialog.clear()\r\n            })\r\n        },\r\n\r\n        updateDetail: function () {\r\n            if (!this.hasChanges)\r\n                return;\r\n\r\n            if (!this.doUpdateValidation()) {\r\n                return;\r\n            }\r\n\r\n            this.doUpdateDetail();\r\n        },\r\n        doUpdateValidation: function () {\r\n            if (this.createType === 'team') {\r\n                if ((!this.detail.Name && !this.detail.Description)\r\n                    || (this.detail.Name === '' && this.detail.Description === '')) {\r\n                    Dialog.alert('Schedule name cannot be blank. <br /> Schedule description cannot be blank.')\r\n                    return false;\r\n                }\r\n\r\n                if (!this.detail.Name || this.detail.Name === '') {\r\n                    Dialog.alert('Schedule name cannot be blank.')\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (!this.detail.Description || this.detail.Description === '') {\r\n                Dialog.alert('Schedule description cannot be blank.')\r\n                return false;\r\n            }\r\n\r\n            if (this.detail.Name !== undefined &&\r\n                this.detail.Name !== null &&\r\n                this.detail.Name.length > 50) {\r\n                Dialog.alert('Schedule names must be 50 characters or fewer (including spaces).')\r\n                return false;\r\n            }\r\n\r\n            if (this.detail.Description !== undefined &&\r\n                this.detail.Description !== null &&\r\n                this.detail.Description.length > 50) {\r\n                Dialog.alert('Schedule descriptions must be 50 characters or fewer (including spaces).')\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n        doUpdateDetail: function () {\r\n            var postData = {\r\n                Id: this.detail.Id,\r\n                NoOfWeeks: this.detail.NoOfWeeks,\r\n                StartDate: moment(this.detail.StartDate).format('DD/MMM/YYYY'),\r\n                Name: this.createType === 'team' ? this.detail.Name : 'Personal_ ' + this.detail.EmployeeNo,\r\n                EmployeeNo: this.detail.EmployeeNo ? this.detail.EmployeeNo : null,\r\n                ScheduleType: this.detail.EmployeeNo ? 1 : 0,\r\n                IsPersonal: !!this.detail.EmployeeNo,\r\n                Description: this.detail.Description,\r\n                Archive: this.detail.Archive,\r\n                Days: <any[]>[]\r\n            }\r\n\r\n            this.detail.Days.map(function (day: any) {\r\n\r\n                if (day.Hours > 0 ||\r\n                    (day.ShiftId !== null && day.ShiftId !== \"\")) {\r\n                    if (day.ShiftId === \"\") day.ShiftId = null;\r\n                    postData.Days.push({\r\n                        DayNumber: day.DayNumber,\r\n                        StartTime: day.StartTime ? day.StartTime.format('HH:mm') : null,\r\n                        FinishTime: day.FinishTime ? day.FinishTime.format('HH:mm') : null,\r\n                        Hours: day.Hours > 24 ? 24 : day.Hours,\r\n                        ShiftId: day.ShiftId,\r\n                    });\r\n                }\r\n            });\r\n\r\n            Dialog.loading()\r\n            Remote.PostSchedule(postData).then(res => {\r\n                this.$emit('schedule-saved', res.Data);\r\n                if (this !== undefined &&\r\n                    this.hasChanges !== undefined) {\r\n                    this.hasChanges = false;\r\n                }\r\n                if (this !== undefined) {\r\n                    // todo broken\r\n                    // this.hasDataChanges = this.hasChanges;\r\n                }\r\n            }).finally(() => {\r\n                Dialog.clear();\r\n            })\r\n        },\r\n        formUpdated() {\r\n            this.hasChanges = true;\r\n        },\r\n\r\n        async openDatePicker($event: any) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            try {\r\n                this.detail.StartDate = await (this.$refs.DatePickerRef as any).toggleShow(this.detail.StartDate);\r\n            } catch (e) {\r\n                e ? console.error(e) : null;\r\n                return;\r\n            }\r\n\r\n            this.remapDays()\r\n            this.hasChanges = true;\r\n        },\r\n        selectedEmployee(employee: any) {\r\n            this.detail.EmployeeNo = employee.employeeNo\r\n            this.detail.Description = `${employee.commonName} ${employee.employeeNo} Personal Schedule`\r\n        }\r\n    },\r\n\r\n})\r\n","import { render } from \"./ScheduleDetail.vue?vue&type=template&id=97dbad1c&scoped=true\"\nimport script from \"./ScheduleDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ScheduleDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ScheduleDetail.vue?vue&type=style&index=0&id=97dbad1c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-97dbad1c\"\n\nexport default script","<template>\r\n    <div id=\"sched-man-list \" class=\"sched-man-list mt-4\" v-show=\"!createNew\">\r\n        <div>\r\n            <div class=\"d-flex align-center flex-wrap\">\r\n                <input v-model=\"filters.searchTerm\" type=\"text\" placeholder=\"Search for schedules\" hide-details\r\n                       class=\"sched-search-box body-2 underline-input\"/>\r\n                <div class=\"filter-dropdown\">\r\n                    <div class=\"custom-select\" tabindex=\"1\" ref=\"selectRef\">\r\n                        <div class=\"custom-select-selected\">\r\n                            {{filters.selected}}\r\n                        </div>\r\n                        <div class=\"custom-select-items\">\r\n                            <div class=\"custom-select-item\"\r\n                                 v-for=\"(option, index) in filters.options\" :key=\"index\"\r\n                                 :tabindex=\"index+99\"\r\n                                 @click=\"choseFilter($event, option)\">\r\n                                <div class=\"cell-config\">\r\n                                    {{ option }}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button class=\"blue ml-2 small\" @click=\"createNewSchedule()\">\r\n                    <span class=\"icon-plus btn-icon white\"></span>\r\n                    <span class=\"font-weight-regular text-capitalize white\">&nbsp;Create</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"d-flex justify-start mt-2\">\r\n                <div class=\"d-flex align-center\">\r\n                    <input class=\"ma-0\" type=\"radio\" id=\"myEmployee\" value=\"MyEmployee\" v-model=\"myEmployeeToggle\" @change=\"getSchedulesList\">\r\n                    <label class=\"ml-1\">My Employees Only</label>\r\n                </div>\r\n                <div class=\"d-flex align-center ml-2\">\r\n                    <input class=\"my-0\" type=\"radio\" id=\"allEmployee\" value=\"AllEmployee\" v-model=\"myEmployeeToggle\" @change=\"getSchedulesList\">\r\n                    <label class=\"ml-1\">All Employees</label>\r\n                </div>\r\n\r\n\r\n            </div>\r\n        </div>\r\n        <div class=\"aff-table sche-search-table mt-4\">\r\n            <table class=\"ui-grid\">\r\n                <thead>\r\n                <tr>\r\n                    <th style=\"width: 120px\" @click=\"updateSort(0)\">Name <span\r\n                        v-bind:class=\"{'icon-arrow-line-small-down': filters.orderByArrow[0] === 'Asc', 'icon-arrow-line-small-up': filters.orderByArrow[0] === 'Desc'}\"></span>\r\n                    </th>\r\n                    <th @click=\"updateSort(1)\">Description <span\r\n                        v-bind:class=\"{'icon-arrow-line-small-down': filters.orderByArrow[1] === 'Asc', 'icon-arrow-line-small-up': filters.orderByArrow[1] === 'Desc'}\"></span>\r\n                    </th>\r\n                    <th style=\"width: 70px\" class=\"text-center\" @click=\"updateSort(2)\">Weeks <span\r\n                        v-bind:class=\"{'icon-arrow-line-small-down': filters.orderByArrow[2] === 'Asc', 'icon-arrow-line-small-up': filters.orderByArrow[2] === 'Desc'}\"></span>\r\n                    </th>\r\n                    <th style=\"width: 60px\" class=\"text-center\" @click=\"updateSort(3)\">H/W <span\r\n                        v-bind:class=\"{'icon-arrow-line-small-down': filters.orderByArrow[3] === 'Asc', 'icon-arrow-line-small-up': filters.orderByArrow[3] === 'Desc'}\"></span>\r\n                    </th>\r\n                    <th style=\"width: 80px\" class=\"text-center\" @click=\"updateSort(4)\">Allocated<span\r\n                        v-bind:class=\"{'icon-arrow-line-small-down': filters.orderByArrow[4] === 'Asc', 'icon-arrow-line-small-up': filters.orderByArrow[4] === 'Desc'}\"></span>\r\n                    </th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"sched in schedList\" @click=\"selectSchedulesDetail(sched)\"\r\n                    v-bind:class=\"sched.classObject\">\r\n                    <td style=\"width: 50px;\">\r\n                        <div>{{ sched.Name }}</div>\r\n                    </td>\r\n                    <td style=\"width: 100px;\"\r\n                        v-tooltip.right=\"{content: sched.Description, delay: {show: 3000, hide: 100}}\">\r\n                        <!--                        v-tooltip.right=\"{content: sched.Description,-->\r\n                        <!--                        class: 'tooltip-custom tooltip-other-custom'}\"-->\r\n                        <div class=\"sched-search-desc\">\r\n                            {{ sched.Description }}\r\n                        </div>\r\n                    </td>\r\n                    <td class=\"text-center\">\r\n                        <div>{{ sched.NoOfWeeks }}</div>\r\n                    </td>\r\n                    <td class=\"text-center\">\r\n                        <div>{{ sched.HoursPerWeek }}</div>\r\n                    </td>\r\n                    <td class=\"text-center\">\r\n                        <div>{{ sched.Count }}</div>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue, {defineComponent, inject} from \"vue\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport moment from \"moment\";\r\nimport Dialog from '@/components/dialog'\r\nimport {StandardResponse} from \"@/components/schedulesManagement/ScheduleManagementInterface\";\r\n\r\nenum SearchFilter {\r\n    myEmployee = \"MyEmployee\",\r\n    allEmployee = \"AllEmployee\"\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"SearchSchedule\",\r\n    inject: {\r\n        manageCompanyConfig: 'MANAGE_COMPANY_CONFIG'\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selectedSched: <any>null,\r\n            schedList: <any[]>[],\r\n            shiftTypeList: [],\r\n            schedDetail: null,\r\n            createNew: false,\r\n            empListHeight: '',\r\n            showFilters: true,\r\n            myEmployeeToggle: SearchFilter.myEmployee,\r\n            // checkboxes\r\n\r\n            filters: {\r\n                searchTerm: '',\r\n                sort: 'Name',\r\n                sortOptions: ['Name', 'Description', 'NoOfWeeks', 'HoursPerWeek', 'Count'],\r\n                orderBy: 'Asc',\r\n                orderByArrow: ['Asc', 'Asc', 'Asc', 'Asc', 'Asc'],\r\n\r\n                partTimeSche: false,\r\n                fullTimeSche: true,\r\n                activeSche: true,\r\n                inActiveSche: false,\r\n                archivedSche: false,\r\n                options: <any[]>[],\r\n                selected: 'Show Active',\r\n                all: false,\r\n            },\r\n            searchTermFocus: false\r\n        }\r\n    },\r\n\r\n    mounted: function () {\r\n        this.showFilters = true;\r\n        this.getSchedulesList();\r\n        if ((this as any).manageCompanyConfig.getAllowPersonal()) {\r\n            this.filters.options = ['Show All', 'Show Active', 'Show Inactive', 'Show Archived', 'Show Personal']\r\n        } else {\r\n            this.filters.options = ['Show All', 'Show Active', 'Show Inactive', 'Show Archived']\r\n        }\r\n\r\n        this.$watch('filters', this.refreshFilters, {deep: true});\r\n    },\r\n    methods: {\r\n        choseFilter($event: any, selected: any) {\r\n            $event.target.blur()\r\n\r\n            this.filters.selected = selected;\r\n\r\n            let a = $event.target.blur();\r\n\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n        },\r\n        createNewSchedule() {\r\n            this.$emit('createNewSchedule')\r\n        },\r\n        selectSchedulesDetail(sched: any) {\r\n            this.schedList.map((sched: any) => {\r\n                sched.classObject.selected = false;\r\n            })\r\n            sched.classObject.selected = true;\r\n            this.selectedSched = sched;\r\n            this.$emit('selectSchedFromSearch', this.selectedSched)\r\n        },\r\n        deselectScheDetail() {\r\n            this.schedList.forEach((sched: any) => {\r\n                sched.classObject.selected = false;\r\n            })\r\n            this.selectedSched = null;\r\n        },\r\n\r\n        toggleFilters: function () {\r\n            this.showFilters = !this.showFilters;\r\n        },\r\n        refreshFilters: function () {\r\n\r\n            //Sort\r\n            var vm: any = this;\r\n\r\n            this.schedList.sort(function (x: any, y: any) {\r\n                var order = 1;\r\n\r\n                if (vm.filters.orderBy === 'Desc')\r\n                    order = -1;\r\n                var xString\r\n                var yString\r\n                if (typeof x[vm.filters.sort] === 'string') {\r\n                    xString = x[vm.filters.sort].toLowerCase();\r\n                    yString = y[vm.filters.sort].toLowerCase();\r\n                } else {\r\n                    xString = x[vm.filters.sort];\r\n                    yString = y[vm.filters.sort];\r\n                }\r\n\r\n\r\n                if (xString < yString) {\r\n                    return -1 * order;\r\n                } else if (xString > yString) {\r\n                    return 1 * order;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            })\r\n\r\n            var searchTerm = this.filters.searchTerm.toLowerCase().trim();\r\n            this.schedList.forEach((sched: any) => {\r\n                sched.classObject.selected = vm.selectedSched ? vm.selectedSched.Id == sched.Id : false;\r\n                sched.classObject.visible = true;\r\n\r\n                // if all filter are selected\r\n                if (this.filters.all) {\r\n                    sched.classObject.visible = true\r\n                } else {\r\n                    //Type filter\r\n                    // sched.classObject.visible = this.getCheckboxFilterResult(sched);\r\n                    sched.classObject.visible = this.getDropDownFilterResult(sched);\r\n                    //search term\r\n                    if (sched.classObject.visible && searchTerm.length != 0) {\r\n                        sched.classObject.visible = (sched.Name.toLowerCase().indexOf(searchTerm) !== -1\r\n                            || sched.Description.toLowerCase().indexOf(searchTerm) !== -1) && sched.classObject.visible;\r\n                    }\r\n                }\r\n\r\n                sched.classObject.hidden = !sched.classObject.visible;\r\n            });\r\n        },\r\n\r\n        getDropDownFilterResult(sched: any) {\r\n            // All', 'Active', 'InActive', 'Archived'\r\n            switch (this.filters.selected) {\r\n                case 'Show All':\r\n                    return true;\r\n                case 'Show Active':\r\n                    return sched.isActive === true && sched.Archive === false && sched.ScheduleType === 0;\r\n                case 'Show Inactive':\r\n                    return sched.isActive === false && sched.Archive === false && sched.ScheduleType === 0;\r\n                case 'Show Archived':\r\n                    return sched.Archive === true && sched.ScheduleType === 0;\r\n                case 'Show Personal':\r\n                    return sched.ScheduleType === 1;\r\n            }\r\n        },\r\n\r\n        getSchedulesList: function () {\r\n            Dialog.loading()\r\n\r\n            Remote.StandardSchedules(this.myEmployeeToggle === SearchFilter.allEmployee)\r\n            .then((response: StandardResponse) => {\r\n                var weeks = [];\r\n                let employeeNoList: number[] = [];\r\n                let filteredSchedule = response.Data;\r\n\r\n                if (!(this as any).manageCompanyConfig.getAllowPersonal()) {\r\n                    filteredSchedule = response.Data.filter((sched: any) => {\r\n                        return sched.ScheduleType === 0\r\n                    })\r\n                }\r\n\r\n                filteredSchedule.map((sched: any) => {\r\n\r\n                    // parse Peronsal_10005 to find employee id\r\n                    if (sched.Name.includes('Personal')) {\r\n                        var thenum = sched.Name.replace( /^\\D+/g, '');\r\n                        employeeNoList.push(Number(thenum))\r\n                    }\r\n\r\n                    sched.classObject = {\r\n                        selected: false,\r\n                        visible: true,\r\n                        hidden: false\r\n                    };\r\n\r\n                    if (this.selectedSched && this.selectedSched.Id === sched.Id) {\r\n\r\n                        this.selectedSched = sched;\r\n                        sched.classObject.selected = true;\r\n                    }\r\n\r\n                    weeks.push(sched.NoOfWeeks)\r\n\r\n                })\r\n                weeks.unshift('All');\r\n                this.schedList = filteredSchedule;\r\n                this.$store.state.EmployeeModule.employeesWithPeronsalSche = employeeNoList;\r\n                this.refreshFilters();\r\n                Dialog.clear();\r\n            })\r\n        },\r\n        updateSort: function (sortIndex: number) {\r\n            this.filters.orderBy = this.filters.orderByArrow[sortIndex] = this.filters.orderByArrow[sortIndex] === 'Asc' ? 'Desc' : 'Asc';\r\n            this.filters.sort = this.filters.sortOptions[sortIndex];\r\n            // reset other arrows;\r\n            this.filters.orderByArrow.forEach((arrow, index) => {\r\n                if (index !== sortIndex) {\r\n                    arrow = 'Asc'\r\n                }\r\n            })\r\n        },\r\n\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '../../style/colors';\r\n\r\n.sched-man-list {\r\n    max-height: 400px;\r\n    max-height: 80vh;\r\n    min-height: 100px;\r\n\r\n    .section-table {\r\n        height: 90%;\r\n        padding-bottom: 20px;\r\n        overflow: auto;\r\n    }\r\n\r\n    @media screen and (max-width: 1200px) {\r\n        /*height: 200px;*/\r\n    }\r\n}\r\n\r\n.sched-search-box {\r\n    margin-right: 16px;\r\n    flex-grow: 1;\r\n    @media screen and (max-width: 600px) {\r\n        width: 100%;\r\n        margin-right: 0;\r\n    }\r\n}\r\n\r\n.emp-sched-list {\r\n    margin-bottom: 20px;\r\n    margin-right: 30px;\r\n    overflow-y: auto;\r\n    max-height: 300px;\r\n    min-height: 140px;\r\n}\r\n\r\n.sched-man-filters {\r\n    margin: 0 10px 10px 0;\r\n\r\n    .label-width-120 {\r\n        display: inline-block;\r\n        width: 120px;\r\n    }\r\n\r\n    .label-width-70 {\r\n        display: inline-block;\r\n        width: 70px;\r\n    }\r\n\r\n    .v-input {\r\n        display: inline-flex;\r\n        font-size: 12px;\r\n    }\r\n\r\n    span {\r\n        margin-right: 5px;\r\n    }\r\n\r\n    select {\r\n        width: auto;\r\n        padding: 2px 5px;\r\n    }\r\n}\r\n\r\n.sche-search-table {\r\n    overflow: auto;\r\n    max-height: calc(100vh - 300px);\r\n\r\n    table {\r\n        min-width: 530px;\r\n        table-layout: fixed;\r\n\r\n        tr {\r\n            cursor: pointer;\r\n        }\r\n\r\n        td {\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n    }\r\n\r\n    @media screen and (max-width: 600px) {\r\n        max-height: 230px;\r\n    }\r\n}\r\n\r\n.sched-search-desc {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n    line-height: 1;\r\n    vertical-align: middle;\r\n}\r\n\r\n.filter-dropdown {\r\n    width: 120px;\r\n}\r\n\r\n.cell-config {\r\n    pointer-events: none;\r\n}\r\n\r\n.custom-select {\r\n    font-size: 12px;\r\n}\r\n\r\n.custom-select-selected {\r\n    padding: 4px 1.5em 4px 0.2em;\r\n    border: none;\r\n    border-radius: 0;\r\n    background-color: transparent;\r\n    border-bottom: 1px solid rgba(colors.$grey, 0.7);\r\n\r\n}\r\n\r\n.custom-select-selected:after {\r\n    top: 8px;\r\n    right: 0;\r\n}\r\n\r\n.custom-select:focus-within {\r\n    .custom-select-selected {\r\n        border: none;\r\n        border-radius: 0;\r\n        border-bottom: 1px solid colors.$aff-dark-blue;\r\n    }\r\n\r\n    .custom-select-selected:after {\r\n        transform: rotate(180deg);\r\n        top: 4px;\r\n    }\r\n}\r\n\r\n.custom-select-items {\r\n    background: white;\r\n    width: max-content;\r\n}\r\n\r\n.custom-select-item {\r\n    color: colors.$dark-blue-app;\r\n    // padding-left: 1em;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 4px 1em;\r\n}\r\n\r\n.custom-select-item:hover {\r\n    color: colors.$aff-dark-blue;\r\n    background-color: lighten(colors.$aff-blue, 50%);\r\n}\r\n\r\n</style>","\r\nimport Vue, {defineComponent, inject} from \"vue\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport moment from \"moment\";\r\nimport Dialog from '@/components/dialog'\r\nimport {StandardResponse} from \"@/components/schedulesManagement/ScheduleManagementInterface\";\r\n\r\nenum SearchFilter {\r\n    myEmployee = \"MyEmployee\",\r\n    allEmployee = \"AllEmployee\"\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"SearchSchedule\",\r\n    inject: {\r\n        manageCompanyConfig: 'MANAGE_COMPANY_CONFIG'\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selectedSched: <any>null,\r\n            schedList: <any[]>[],\r\n            shiftTypeList: [],\r\n            schedDetail: null,\r\n            createNew: false,\r\n            empListHeight: '',\r\n            showFilters: true,\r\n            myEmployeeToggle: SearchFilter.myEmployee,\r\n            // checkboxes\r\n\r\n            filters: {\r\n                searchTerm: '',\r\n                sort: 'Name',\r\n                sortOptions: ['Name', 'Description', 'NoOfWeeks', 'HoursPerWeek', 'Count'],\r\n                orderBy: 'Asc',\r\n                orderByArrow: ['Asc', 'Asc', 'Asc', 'Asc', 'Asc'],\r\n\r\n                partTimeSche: false,\r\n                fullTimeSche: true,\r\n                activeSche: true,\r\n                inActiveSche: false,\r\n                archivedSche: false,\r\n                options: <any[]>[],\r\n                selected: 'Show Active',\r\n                all: false,\r\n            },\r\n            searchTermFocus: false\r\n        }\r\n    },\r\n\r\n    mounted: function () {\r\n        this.showFilters = true;\r\n        this.getSchedulesList();\r\n        if ((this as any).manageCompanyConfig.getAllowPersonal()) {\r\n            this.filters.options = ['Show All', 'Show Active', 'Show Inactive', 'Show Archived', 'Show Personal']\r\n        } else {\r\n            this.filters.options = ['Show All', 'Show Active', 'Show Inactive', 'Show Archived']\r\n        }\r\n\r\n        this.$watch('filters', this.refreshFilters, {deep: true});\r\n    },\r\n    methods: {\r\n        choseFilter($event: any, selected: any) {\r\n            $event.target.blur()\r\n\r\n            this.filters.selected = selected;\r\n\r\n            let a = $event.target.blur();\r\n\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n        },\r\n        createNewSchedule() {\r\n            this.$emit('createNewSchedule')\r\n        },\r\n        selectSchedulesDetail(sched: any) {\r\n            this.schedList.map((sched: any) => {\r\n                sched.classObject.selected = false;\r\n            })\r\n            sched.classObject.selected = true;\r\n            this.selectedSched = sched;\r\n            this.$emit('selectSchedFromSearch', this.selectedSched)\r\n        },\r\n        deselectScheDetail() {\r\n            this.schedList.forEach((sched: any) => {\r\n                sched.classObject.selected = false;\r\n            })\r\n            this.selectedSched = null;\r\n        },\r\n\r\n        toggleFilters: function () {\r\n            this.showFilters = !this.showFilters;\r\n        },\r\n        refreshFilters: function () {\r\n\r\n            //Sort\r\n            var vm: any = this;\r\n\r\n            this.schedList.sort(function (x: any, y: any) {\r\n                var order = 1;\r\n\r\n                if (vm.filters.orderBy === 'Desc')\r\n                    order = -1;\r\n                var xString\r\n                var yString\r\n                if (typeof x[vm.filters.sort] === 'string') {\r\n                    xString = x[vm.filters.sort].toLowerCase();\r\n                    yString = y[vm.filters.sort].toLowerCase();\r\n                } else {\r\n                    xString = x[vm.filters.sort];\r\n                    yString = y[vm.filters.sort];\r\n                }\r\n\r\n\r\n                if (xString < yString) {\r\n                    return -1 * order;\r\n                } else if (xString > yString) {\r\n                    return 1 * order;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            })\r\n\r\n            var searchTerm = this.filters.searchTerm.toLowerCase().trim();\r\n            this.schedList.forEach((sched: any) => {\r\n                sched.classObject.selected = vm.selectedSched ? vm.selectedSched.Id == sched.Id : false;\r\n                sched.classObject.visible = true;\r\n\r\n                // if all filter are selected\r\n                if (this.filters.all) {\r\n                    sched.classObject.visible = true\r\n                } else {\r\n                    //Type filter\r\n                    // sched.classObject.visible = this.getCheckboxFilterResult(sched);\r\n                    sched.classObject.visible = this.getDropDownFilterResult(sched);\r\n                    //search term\r\n                    if (sched.classObject.visible && searchTerm.length != 0) {\r\n                        sched.classObject.visible = (sched.Name.toLowerCase().indexOf(searchTerm) !== -1\r\n                            || sched.Description.toLowerCase().indexOf(searchTerm) !== -1) && sched.classObject.visible;\r\n                    }\r\n                }\r\n\r\n                sched.classObject.hidden = !sched.classObject.visible;\r\n            });\r\n        },\r\n\r\n        getDropDownFilterResult(sched: any) {\r\n            // All', 'Active', 'InActive', 'Archived'\r\n            switch (this.filters.selected) {\r\n                case 'Show All':\r\n                    return true;\r\n                case 'Show Active':\r\n                    return sched.isActive === true && sched.Archive === false && sched.ScheduleType === 0;\r\n                case 'Show Inactive':\r\n                    return sched.isActive === false && sched.Archive === false && sched.ScheduleType === 0;\r\n                case 'Show Archived':\r\n                    return sched.Archive === true && sched.ScheduleType === 0;\r\n                case 'Show Personal':\r\n                    return sched.ScheduleType === 1;\r\n            }\r\n        },\r\n\r\n        getSchedulesList: function () {\r\n            Dialog.loading()\r\n\r\n            Remote.StandardSchedules(this.myEmployeeToggle === SearchFilter.allEmployee)\r\n            .then((response: StandardResponse) => {\r\n                var weeks = [];\r\n                let employeeNoList: number[] = [];\r\n                let filteredSchedule = response.Data;\r\n\r\n                if (!(this as any).manageCompanyConfig.getAllowPersonal()) {\r\n                    filteredSchedule = response.Data.filter((sched: any) => {\r\n                        return sched.ScheduleType === 0\r\n                    })\r\n                }\r\n\r\n                filteredSchedule.map((sched: any) => {\r\n\r\n                    // parse Peronsal_10005 to find employee id\r\n                    if (sched.Name.includes('Personal')) {\r\n                        var thenum = sched.Name.replace( /^\\D+/g, '');\r\n                        employeeNoList.push(Number(thenum))\r\n                    }\r\n\r\n                    sched.classObject = {\r\n                        selected: false,\r\n                        visible: true,\r\n                        hidden: false\r\n                    };\r\n\r\n                    if (this.selectedSched && this.selectedSched.Id === sched.Id) {\r\n\r\n                        this.selectedSched = sched;\r\n                        sched.classObject.selected = true;\r\n                    }\r\n\r\n                    weeks.push(sched.NoOfWeeks)\r\n\r\n                })\r\n                weeks.unshift('All');\r\n                this.schedList = filteredSchedule;\r\n                this.$store.state.EmployeeModule.employeesWithPeronsalSche = employeeNoList;\r\n                this.refreshFilters();\r\n                Dialog.clear();\r\n            })\r\n        },\r\n        updateSort: function (sortIndex: number) {\r\n            this.filters.orderBy = this.filters.orderByArrow[sortIndex] = this.filters.orderByArrow[sortIndex] === 'Asc' ? 'Desc' : 'Asc';\r\n            this.filters.sort = this.filters.sortOptions[sortIndex];\r\n            // reset other arrows;\r\n            this.filters.orderByArrow.forEach((arrow, index) => {\r\n                if (index !== sortIndex) {\r\n                    arrow = 'Asc'\r\n                }\r\n            })\r\n        },\r\n\r\n    }\r\n})\r\n","import { render } from \"./SearchSchedule.vue?vue&type=template&id=af8a4f80&scoped=true\"\nimport script from \"./SearchSchedule.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchSchedule.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchSchedule.vue?vue&type=style&index=0&id=af8a4f80&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-af8a4f80\"\n\nexport default script","\r\nimport moment from 'moment';\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport ScheduleDetail from \"@/components/scheduleDetail/ScheduleDetail.vue\";\r\nimport SearchSchedule from \"@/components/schedulesManagement/SearchSchedule.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {defineComponent} from \"vue\";\r\nimport {EmployeeActions} from \"@/store/employeeModule\";\r\ndeclare var Affinity: any\r\n\r\nexport default defineComponent({\r\n    name: 'schedulesManagement',\r\n    components: {\r\n        SearchSchedule,\r\n        'schedule-detail': ScheduleDetail,\r\n    },\r\n    data() {\r\n        return {\r\n            selectedSched: <any>null,\r\n            shiftTypeList: [],\r\n            schedDetail: <any>null,\r\n            createNew: false,\r\n            empListHeight: '',\r\n            showActiveSchedule: true,\r\n            employees: []\r\n        };\r\n    },\r\n    async mounted() {\r\n        Dialog.loading()\r\n        await Promise.all([this.getShiftTypeList(), this.getEmployees()]);\r\n        Dialog.clear()\r\n    },\r\n    methods: {\r\n        async getShiftTypeList () {\r\n            try {\r\n                let shiftList = await Remote.ShiftTypes();\r\n                this.shiftTypeList = shiftList.map((s: any) => s.ShiftType)\r\n            } catch (e) {\r\n                console.error(e)\r\n            }\r\n        },\r\n\r\n        async getEmployees() {\r\n            try {\r\n                this.employees = await this.$store.dispatch(EmployeeActions.getEmployees, Affinity.user.EmployeeNo)\r\n            } catch (e) {\r\n                console.error(e)\r\n            }\r\n        },\r\n\r\n        toggleShowActiveSchedule() {\r\n            this.showActiveSchedule = !this.showActiveSchedule;\r\n        },\r\n\r\n        selectSchedulesDetail(sched: any) {\r\n            if (this.$refs.detail && (this.$refs as any).detail.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule Detail changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        this.loadScheduleDetail(sched)\r\n                    }\r\n                })\r\n            } else {\r\n                this.loadScheduleDetail(sched)\r\n            }\r\n        },\r\n\r\n        loadScheduleDetail(sched: any) {\r\n            Dialog.loading()\r\n            Remote.ScheduleDetail(sched.Id).then(res => {\r\n                this.schedDetail = res.Data\r\n                this.checkEmpAllocationActive()\r\n                Dialog.clear();\r\n                this.selectedSched = sched;\r\n            }, (err) => {\r\n                Dialog.clear();\r\n                if (err.message === 'Network Error') {\r\n                    Dialog.alert('Lost Internet connection. Please try again after reconnect.')\r\n                } else {\r\n                    Dialog.alert('Something went wrong')\r\n                }\r\n            })\r\n        },\r\n\r\n        checkEmpAllocationActive() {\r\n            this.schedDetail.EmpAllocations.forEach((detail: any) => {\r\n                if (!detail.DateTo) {\r\n                    detail.isActive = true;\r\n                    return\r\n                }\r\n                let dateFrom = moment(detail.DateFrom)\r\n                let dateTo = moment(detail.DateTo)\r\n                detail.isActive = dateTo.diff(moment(), 'day') >= 0 && dateFrom.diff(moment(), 'day') <= 0\r\n            })\r\n        },\r\n\r\n\r\n        createNewSchedule: function () {\r\n            this.createNew = true;\r\n            let startDate = moment();\r\n            startDate.hour(0);\r\n            startDate.minute(0);\r\n            startDate.second(0);\r\n            this.schedDetail = {\r\n                Id: -1,\r\n                Name: '',\r\n                Description: '',\r\n                NoOfWeeks: 1,\r\n                StartDate: startDate,\r\n                Days: []\r\n            };\r\n\r\n            if (this.$refs.detail) {\r\n                (this.$refs.detail as any).hasChanges = true;\r\n            }\r\n        },\r\n\r\n        cancelScheduleDetail() {\r\n            if (this.createNew) {\r\n                this.createNew = false;\r\n            }\r\n\r\n            this.schedDetail = null;\r\n        },\r\n\r\n        reloadSchedulesDetail: function () {\r\n            if (!this.selectedSched)\r\n                this.schedDetail = null;\r\n            else\r\n                this.selectSchedulesDetail(this.selectedSched);\r\n\r\n            this.createNew = false;\r\n        },\r\n\r\n        closeScheduleDetail(changeCheck: boolean) {\r\n            if (!changeCheck || !(this.$refs as any).detail.hasChanges) {\r\n                this.schedDetail = null;\r\n                this.createNew = false;\r\n                this.selectedSched = null;\r\n                (this.$refs as any).searchScheduleRef.deselectScheDetail();\r\n                return;\r\n            }\r\n\r\n            Dialog.checkChange({\r\n                message: 'There are currently Schedule Detail changes <br /> Do you want to discard your changes?',\r\n                onOk: () => {\r\n                    this.closeScheduleDetail(false)\r\n                }\r\n            })\r\n        },\r\n\r\n        scheduleSaved: function (detail: any) {\r\n            if (!this.selectedSched)\r\n                this.schedDetail = null;\r\n            else {\r\n                this.schedDetail = detail;\r\n                this.selectedSched = {\r\n                    Id: detail.Id,\r\n                };\r\n            }\r\n\r\n            (this.$refs as any).searchScheduleRef.getSchedulesList();\r\n            this.createNew = false;\r\n        },\r\n\r\n        scheduleDeleted: function () {\r\n            this.selectedSched = null;\r\n            this.schedDetail = null;\r\n            (this.$refs as any).searchScheduleRef.getSchedulesList();\r\n        },\r\n    },\r\n\r\n})\r\n","import { render } from \"./SchedulesManagement.vue?vue&type=template&id=1db28f2d&scoped=true\"\nimport script from \"./SchedulesManagement.vue?vue&type=script&lang=ts\"\nexport * from \"./SchedulesManagement.vue?vue&type=script&lang=ts\"\n\nimport \"./schedulesManagement.scss?vue&type=style&index=0&lang=scss\"\nimport \"./SchedulesManagement.vue?vue&type=style&index=1&id=1db28f2d&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1db28f2d\"\n\nexport default script","<template>\r\n    <div class=\"outter-h-scroll\">\r\n        <div class=\"fix-content-width\">\r\n            <search-employee class=\"mr-4 mr-xs-0\" ref=\"SearchEmployeeRef\"\r\n                             @updateSelectedEmpList=\"updateEmpList\"></search-employee>\r\n            <div class=\"emp-detail pa-4 mr-4 ml-4 mr-xs-0\" v-if=\"bulkEmpList.length > 0\">\r\n                <div class=\"section\">\r\n                    <div class=\"d-flex justify-space-between\">\r\n                        <h3>Selected Employees</h3>\r\n                    </div>\r\n\r\n                    <div class=\"emp-selection-list mt-4 caption\">\r\n                        <div v-for=\"(emp, index) in bulkEmpList\"\r\n                             class=\"d-flex justify-space-between align-center py-1 px-2\"\r\n                             v-bind:class=\"{'emp-select-item-odd': index % 2}\">\r\n                            <div>\r\n                                <span class=\"list-text\"\r\n                                      v-tooltip.right=\"{content: 'Remove from Employee Selection List'}\">{{ emp.EmployeeName }} ({{ emp.EmployeeNo }})</span>\r\n                            </div>\r\n                            <div>\r\n                                <button v-if=\"!isMobileView\"\r\n                                        class=\"blue small\"\r\n                                        v-tooltip.right=\"{ content: 'View Schedule Allocations'}\"\r\n                                        style=\"margin-right:3px;\"\r\n                                        @click=\"showScheduleDetail(emp)\">\r\n                                    <span class=\"icon-calendar white lh-0\"></span>\r\n                                </button>\r\n\r\n                                <button v-if=\"!isMobileView\"\r\n                                        class=\"orange small\"\r\n                                        v-tooltip.right=\"{ content: 'Remove from Employee Selection List'}\"\r\n                                        @click=\"removeEmployee(emp)\">\r\n                                    <span class=\"icon-minus white lh-0\"></span>\r\n                                </button>\r\n\r\n                                <button v-if=\"isMobileView\"\r\n                                        class=\"orange small\"\r\n                                        @click=\"removeEmployee(emp)\">\r\n                                    <span class=\"icon-minus white lh-0\"></span>\r\n                                </button>\r\n\r\n                                <button v-if=\"isMobileView\" class=\"blue ml-1 small\"\r\n                                        style=\"margin-right:3px;\" @click=\"showScheduleDetail(emp)\">\r\n                                    <span class=\"icon-calendar white lh-0\"></span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"schedules-buttons mt-2 d-flex justify-end\">\r\n                        <button v-if=\"!isMobileView\" class=\"button grey small\"\r\n                                @click=\"clearSelectedEmployee()\"\r\n                                v-tooltip.right=\"{ content: 'Clear Employee Selection List'}\">\r\n                            <span class=\"icon-cancel mr-2 vert-mid white lh-0\"></span><span class=\"text-capitalize white \">Clear</span>\r\n                        </button>\r\n\r\n                        <button v-if=\"isMobileView\" class=\"button grey small\"\r\n                                @click=\"clearSelectedEmployee()\">\r\n                            <span class=\"icon-cancel vert-mid white lh-0\"></span><span class=\"text-capitalize white\">Clear</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div v-on:submit.prevent=\"submitForm\">\r\n                    <div class=\"section mt-4\" style=\"height:100%;\">\r\n                        <h3 class=\"bold-text\">Allocate Schedule</h3>\r\n                        <div class=\"mt-4 allocate-sche-form\">\r\n                            <form>\r\n                                <div class=\"custom-select\" tabindex=\"1\" ref=\"selectRef\">\r\n                                    <div class=\"custom-select-selected\">\r\n                                        <input class=\"custom-select-input\" ref=\"selectInputRef\"\r\n                                               v-model=\"selectSearchInput\" @keyup=\"updateSearchList\">\r\n                                    </div>\r\n                                    <div class=\"custom-select-items\">\r\n                                        <div class=\"custom-select-item\" ref=\"selectDropdownRef\"\r\n                                             v-for=\"(option, index) in cloneSchedList\" :key=\"index\"\r\n                                             :tabindex=\"index+99\"\r\n                                             @keyup.down=\"navDownList\"\r\n                                             @click=\"chooseSchedule($event, option)\">\r\n                                            <div class=\"cell-config\">\r\n                                                {{ option.Name }}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div v-if=\"selectedSchedule && selectedSchedule.Name\" class=\"mt-4\">\r\n                                    <div class=\"bold-text\">Description</div>\r\n                                    <div class=\"caption\">{{ selectedSchedule.Description }}</div>\r\n                                    <div class=\"bold-text mt-4\">No. of Weeks: <span\r\n                                        class=\"ml-4\">{{ selectedSchedule.NoOfWeeks }}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"d-flex justify-space-between\">\r\n                                    <div class=\"mt-4 date-input-warpper\">\r\n                                        <div class=\"bold-text\">Date From</div>\r\n\r\n                                        <input :value=\"$filters.reformatDate(schedAllocation.DateFrom)\"\r\n                                              class=\"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input\"\r\n                                              @change=\"updateDateText($event, schedAllocation.DateFrom)\"\r\n                                              @click=\"updateDateTime($event, schedAllocation.DateFrom, 'DateFrom')\"\r\n                                              @click:clear=\"fromDate = false\">\r\n                                    </div>\r\n                                    <div class=\"mt-4 date-input-warpper\">\r\n                                        <div class=\"bold-text\">Date To</div>\r\n                                        <input :value=\"$filters.reformatDate(schedAllocation.DateTo)\"\r\n                                              class=\"d-inline-flex ma-0 pa-0 caption date-input-width date-input\"\r\n                                              @change=\"updateDateText($event, schedAllocation.DateTo)\"\r\n                                               @click=\"updateDateTime($event, schedAllocation.DateTo, 'DateTo')\"\r\n                                               @click:clear=\"toDateMenu = false\">\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"mt-4\">\r\n                                    <div class=\"bold-text\">Notes</div>\r\n                                    <textarea rows=\"3\" class=\"caption\"\r\n                                              @keyup=\"hasChanges = true\"\r\n                                              v-model=\"schedAllocation.Comment\"> </textarea>\r\n                                </div>\r\n                                <div class=\"form-row mt-4\" v-if=\"schedAllocation.DateFrom\">\r\n                                    <label class=\"label-width\">End existing schedules on {{ capDate }}</label>\r\n                                    <input type=\"checkbox\" value=\"1\" v-model=\"schedAllocation.EndExistingScheds\">\r\n                                </div>\r\n                                <div class=\"schedules-buttons mt-4 d-flex justify-end\">\r\n                                    <button class=\"grey vert-mid small\" @click=\"closeSchedAllocation()\">\r\n                                        <span class=\"icon-cancel vert-mid lh-0 white--text mr-1\"></span>\r\n                                        <span class=\"text-capitalize white--text\">Cancel</span>\r\n                                    </button>\r\n                                    <button class=\"green ml-4 small\" @click=\"allocateEmployees()\">\r\n                                        <span class=\"icon-paperplane vert-mid lh-0 white--text mr-1\"></span>\r\n                                        <span class=\"text-capitalize white--text\">Allocate</span>\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <template v-if=\"selectedEmpForDetail\">\r\n                <employee-schedule ref=\"EmployeeScheduleRef\" :employee=\"selectedEmpForDetail\"\r\n                                   @close=\"resetSelectedEmpForDetail\"></employee-schedule>\r\n            </template>\r\n            <date-picker ref=\"DatePickerRef\" :top=\"dateModalTop\" :left=\"dateModalLeft\"></date-picker>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script lang=\"ts\">\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport {emitter} from \"../../main\";\r\nimport moment, {Moment} from \"moment\";\r\nimport EmployeeSchedule from \"./EmployeeSchedule.vue\";\r\nimport SearchEmployee from \"./SearchEmployee.vue\";\r\nimport Dialog from '@/components/dialog';\r\nimport {defineComponent} from \"vue\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\n\r\nexport default defineComponent({\r\n    name: 'employeeAllocation',\r\n    components: {\r\n        SearchEmployee,\r\n        EmployeeSchedule,\r\n        DatePicker,\r\n    },\r\n    data: function () {\r\n        return {\r\n            bulkEmpList: <any[]>[],\r\n            schedList: <any[]>[],\r\n            hasChanges: false,\r\n\r\n            // select schedule\r\n            cloneSchedList: <any[]>[],\r\n            selectSearchInput: '',\r\n\r\n            // form model\r\n            schedAllocation: {\r\n                WorkschedId: -1,\r\n                DateFrom: <Moment | null>moment(),\r\n                DateTo: <Moment | null>null,\r\n                Comment: '',\r\n                EndExistingScheds: true\r\n            },\r\n\r\n            selectedSchedule: <any>{},\r\n\r\n            // employee-chedule component input data\r\n            selectedEmpForDetail: null,\r\n\r\n            // datePicker\r\n            startDateMenu: false,\r\n            toDateMenu: false,\r\n            startDatePickerValue: <any>'',\r\n            toDatePickerValue: <any>'',\r\n            datePickerTargetDay: <any>null,\r\n            dateType: '',\r\n\r\n            //\r\n            isMobileView: false,\r\n\r\n            //date modal\r\n            dateModalTop: null,\r\n            dateModalLeft: null,\r\n        };\r\n    },\r\n\r\n    // created: function () {\r\n    //\r\n    // },\r\n    mounted: function () {\r\n        this.isMobileView = this.checkIsMobileView()\r\n        // Dialog.loading()\r\n        Remote.StandardSchedules().then(response => {\r\n            this.schedList = response.Data.filter((data: any) => data.Archive === false && data.ScheduleType === 0);\r\n            this.cloneSchedList = this.schedList.slice();\r\n            //  Dialog.clear()\r\n        })\r\n        this.$watch('schedAllocation', (newVal: any, oldVal: any) => {\r\n            if (newVal === oldVal) {\r\n                this.hasChanges = true; //ignore employee list changes.\r\n            }\r\n        }, {deep: true});\r\n    },\r\n    computed: {\r\n        selectedSched() {\r\n            if (this.schedAllocation.WorkschedId === -1) {\r\n                return false;\r\n            }\r\n\r\n            // todo: cant not use this.schedList in return\r\n            let schedList: any = this.schedList;\r\n            return schedList.find((sched: any)=> {\r\n                return sched.Id === this.schedAllocation.WorkschedId\r\n            })\r\n        },\r\n\r\n        capDate: function () {\r\n            if (!this.schedAllocation.DateFrom) {\r\n                return\r\n            }\r\n\r\n            let schedAllocation: any = this.schedAllocation\r\n\r\n            let date = moment(schedAllocation.DateFrom);\r\n            let yesterday = date.subtract(1, 'day')\r\n            return yesterday.format('DD/MM/YYYY');\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        // todo: fix calendar\r\n        // getDay(date) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n\r\n        navDownList() {\r\n            console.log('nav down list')\r\n        },\r\n\r\n        updateSearchList(event: any) {\r\n            if (event.key === \"ArrowDown\") {\r\n                (this.$refs.selectDropdownRef as any).focus();\r\n            }\r\n            this.cloneSchedList = this.schedList.filter(o => {\r\n                return o.Name.toLowerCase().indexOf(this.selectSearchInput.toLowerCase()) > -1\r\n            })\r\n        },\r\n\r\n        updateDateText(event: any, target: any) {\r\n            this.startDateMenu = false\r\n            this.toDateMenu = false;\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.datePickerFormattedFromDate();\r\n            this.datePickerFormattedToDate();\r\n        },\r\n\r\n        datePickerFormattedFromDate() {\r\n            this.startDatePickerValue = this.schedAllocation.DateFrom ? moment(this.schedAllocation.DateFrom).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n        datePickerFormattedToDate() {\r\n            this.toDatePickerValue = this.schedAllocation.DateTo ? moment(this.schedAllocation.DateTo).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n\r\n        updateEmpList(empList: any) {\r\n            this.bulkEmpList = empList\r\n        },\r\n        startDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.schedAllocation.DateFrom = date;\r\n            this.datePickerFormattedFromDate()\r\n        },\r\n        toDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.schedAllocation.DateTo = date;\r\n            this.datePickerFormattedToDate()\r\n        },\r\n\r\n        removeEmployee: function (emp: any) {\r\n            (this.$refs.SearchEmployeeRef as any).removeEmployee(emp)\r\n        },\r\n\r\n        clearSelectedEmployee: function () {\r\n            if (this.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule Allocation changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n                        this.resetSchedAllocation()\r\n                    }\r\n                })\r\n            } else {\r\n                (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n            }\r\n        },\r\n\r\n        allocateEmployees: function () {\r\n            var warningMsgs = '';\r\n            if (this.selectedSchedule.Id < 1 || !this.selectedSchedule.Id) {\r\n                warningMsgs += '<br />Select a schedule that you want to allocate.';\r\n            }\r\n\r\n            if (this.schedAllocation.DateFrom && this.schedAllocation.DateTo &&\r\n                this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo) > 0) {\r\n                warningMsgs += '<br />Date To cannot be before Date From.';\r\n            }\r\n\r\n            if (warningMsgs != '') {\r\n                Dialog.alert(warningMsgs)\r\n                // emitter.emit('dialog', {\r\n                //     message: warningMsgs,\r\n                //     showButtons: true,\r\n                //     noClose: false,\r\n                //     showLoader: false\r\n                // });\r\n\r\n                return;\r\n            }\r\n\r\n            var postData = {\r\n                WorkschedId: this.selectedSchedule.Id,\r\n                EmployeeList: <any[]> [],\r\n                DateFrom: moment(this.schedAllocation.DateFrom) ? moment(this.schedAllocation.DateFrom).format('DD/MMM/YYYY') : null,\r\n                DateTo: moment(this.schedAllocation.DateTo) ? moment(this.schedAllocation.DateTo).format('DD/MMM/YYYY') : null,\r\n                Comment: this.schedAllocation.Comment,\r\n                EndExistingScheds: this.schedAllocation.EndExistingScheds\r\n            };\r\n\r\n            if (this.bulkEmpList.length > 0) {\r\n                this.bulkEmpList.forEach((emp: any) => {\r\n                    postData.EmployeeList.push(emp.EmployeeNo);\r\n                });\r\n\r\n            }\r\n\r\n            // todo: did not find this.selectedEmp ??!!\r\n            // else if (this.selectedEmp) {\r\n            //     postData.EmployeeList = [this.selectedEmp.EmployeeNo];\r\n            // }\r\n\r\n            Dialog.loading()\r\n            Remote.AllocateSchedule(postData).then(res => {\r\n                this.hasChanges = false;\r\n                this.resetSchedAllocation();\r\n                Dialog.clear()\r\n                if (this.$refs.EmployeeScheduleRef) {\r\n                    (this.$refs.EmployeeScheduleRef as any).getEmpWorkScheds()\r\n                }\r\n\r\n                // this.getEmpWorkScheds\r\n            })\r\n                .catch(err => {\r\n                    Dialog.alert(err.message)\r\n                    console.error('err', err)\r\n                })\r\n        },\r\n\r\n        closeSchedAllocation: function () {\r\n            if (this.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'You have unsaved changes. Are you sure to discard the changes?',\r\n                    onOk: () => {\r\n                        this.resetSchedAllocation();\r\n                        this.hasChanges = false;\r\n                        (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n                    },\r\n                })\r\n            } else {\r\n                (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n            }\r\n        },\r\n\r\n        showScheduleDetail: function (employee: any) {\r\n            this.selectedEmpForDetail = employee;\r\n        },\r\n\r\n        resetSelectedEmpForDetail() {\r\n            this.selectedEmpForDetail = null;\r\n        },\r\n\r\n        resetSchedAllocation: function () {\r\n            this.hasChanges = false;\r\n            this.schedAllocation = {\r\n                WorkschedId: -1,\r\n                DateFrom: moment(),\r\n                DateTo: null,\r\n                Comment: '',\r\n                EndExistingScheds: true\r\n            };\r\n        },\r\n\r\n        checkIsMobileView: function () {\r\n            if (navigator.userAgent.match(/Android/i)\r\n                || navigator.userAgent.match(/webOS/i)\r\n                || navigator.userAgent.match(/iPhone/i)\r\n                || navigator.userAgent.match(/iPad/i)\r\n                || navigator.userAgent.match(/iPod/i)\r\n                || navigator.userAgent.match(/BlackBerry/i)\r\n                || navigator.userAgent.match(/Windows Phone/i)\r\n            ) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        chooseSchedule($event: any, option: any) {\r\n            $event.target.blur()\r\n            this.selectedSchedule = option;\r\n            this.selectSearchInput = this.selectedSchedule.Name;\r\n\r\n            let a = $event.target.blur();\r\n\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n            let c = (this.$refs.selectInputRef as any);\r\n            c.blur();\r\n        },\r\n\r\n        updateDateTime($event: any, dateFrom: any, dateType: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.datePickerTargetDay = dateFrom;\r\n            this.dateType = dateType;\r\n            this.openDatePicker()\r\n        },\r\n\r\n        async openDatePicker() {\r\n            // (this.$refs.DatePickerRef as any).toggleShow();\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay));\r\n            if (this.dateType === 'DateTo') {\r\n                this.schedAllocation.DateTo = result\r\n            } else if (this.dateType === 'DateFrom') {\r\n                this.schedAllocation.DateFrom = result\r\n            }\r\n\r\n        },\r\n\r\n        submitForm() {\r\n            //\r\n        }\r\n    },\r\n})\r\n</script>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n@use '../../style/colors';\r\n\r\n$button-blue: #44b5ec;\r\n$table-odd-color: #f6f6f6;\r\n\r\n.outter-h-scroll {\r\n    overflow-x: auto;\r\n}\r\n\r\n.fix-content-width {\r\n    width: max-content;\r\n\r\n    @media only screen and (max-width: 980px) {\r\n        width: auto;\r\n        text-align: center;\r\n    }\r\n}\r\n\r\n\r\n.vert-mid {\r\n    vertical-align: middle;\r\n}\r\n\r\n.emp-detail {\r\n    display: inline-block;\r\n    width: 380px;\r\n    background: #efefef;\r\n\r\n    @media only screen and (max-width: 980px) {\r\n        margin-top: 10px;\r\n    }\r\n\r\n    @media only screen and (max-width: 600px) {\r\n        margin-top: 8px;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.emp-selection-list {\r\n    max-height: 150px;\r\n    overflow: auto;\r\n    background: white;\r\n}\r\n\r\n.emp-select-item-odd {\r\n    background-color: $table-odd-color;\r\n}\r\n\r\n.aff-table table tr .emp-selected {\r\n    background: $button-blue;\r\n    color: white;\r\n}\r\n\r\ntextarea {\r\n    width: 100%;\r\n    padding: 5px;\r\n\r\n    margin: 0;\r\n    border-top: 1px solid #b3b3b3;\r\n    border-right: 1px solid #e6e6e6;\r\n    border-bottom: 1px solid #fff;\r\n    border-left: 1px solid #e6e6e6;\r\n    font-size: 12px;\r\n    font-family: 'Montserrat', Arial, 'Helvetica Neue', Helvetica, Sans-Serif;\r\n    background: #fff;\r\n}\r\n\r\n.allocate-sche-form {\r\n    font-size: 12px;\r\n}\r\n\r\n.date-input-width {\r\n    max-width: 160px;\r\n}\r\n\r\n.date-input-width {\r\n    width: 90%\r\n}\r\n\r\n.date-input-warpper {\r\n    width: 45%;\r\n}\r\n\r\n.custom-select {\r\n    font-size: 12px;\r\n}\r\n\r\n.custom-select-selected {\r\n    min-height: 24px;\r\n    padding: 4px 1.5em 4px 0.2em;\r\n    border: none;\r\n    border-radius: 0;\r\n    background-color: transparent;\r\n    border-bottom: 1px solid rgba(colors.$grey, 0.7);\r\n\r\n}\r\n\r\n.custom-select-selected:after {\r\n    top: 8px;\r\n    right: 0;\r\n}\r\n\r\n.custom-select:focus-within {\r\n    .custom-select-selected {\r\n        border: none;\r\n        border-radius: 0;\r\n        border-bottom: 1px solid colors.$aff-dark-blue;\r\n    }\r\n\r\n    .custom-select-selected:after {\r\n        transform: rotate(180deg);\r\n        top: 4px;\r\n    }\r\n}\r\n\r\n.custom-select-items {\r\n    background: white;\r\n}\r\n\r\n.custom-select-item {\r\n    color: colors.$dark-blue-app;\r\n    // padding-left: 1em;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 4px 1em;\r\n}\r\n\r\n.custom-select-item:hover {\r\n    color: colors.$aff-dark-blue;\r\n    background-color: lighten(colors.$aff-blue, 50%);\r\n}\r\n\r\n.custom-select-input {\r\n    border: none;\r\n    background: transparent;\r\n}\r\n\r\n.cell-config {\r\n    pointer-events: none;\r\n}\r\n</style>","<template>\r\n    <div class=\"emp-workSched-card pa-4\">\r\n        <div class=\"d-flex justify-space-between\">\r\n            <h3>{{ selectedEmp.EmployeeName }} ({{ selectedEmp.EmployeeNo }})</h3>\r\n            <span class=\"icon-cross vp-icon\" @click=\"closeEmployeeSchedule(true)\"></span>\r\n        </div>\r\n\r\n        <div class=\"d-flex justify-end align-center mt-4 caption\">\r\n            <input class=\"override-width mr-2\" type=\"checkbox\" v-model=\"activeOnly\" @change=\"updateActiveOnly\"\r\n                   v-bind:true-value=\"1\" v-bind:false-value=\"0\">\r\n            <label class=\"default-line-height\">Active Only</label>\r\n            <!--span class=\"button blue w-icon-only\" @click=\"openSchedAllocation()\" v-bind:class=\"{ 'disabled': showSchedAllocation}\" v-show=\"!bulkAllocationSelected()\"><span class=\"icon-schedule\"></span><span>Allocate</span></span-->\r\n        </div>\r\n        <div v-if=\"empSchedList.length > 0\" class=\"section-table aff-table mt-2\">\r\n            <table>\r\n                <thead>\r\n                <tr>\r\n                    <th>Schedule Name</th>\r\n                    <th class=\"text-center\">Date From</th>\r\n                    <th class=\"text-center\">Date To</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"empSched in empSchedList\" v-bind:class=\"empSched.classObject\"\r\n                    @click=\"selectEmpSchedCheck(empSched)\">\r\n                    <td>{{ empSched.WorkSchedName }}</td>\r\n                    <td class=\"text-center\">{{ $filters.reformatDate(empSched.DateFrom) }}</td>\r\n                    <td class=\"text-center\">{{ $filters.reformatDate(empSched.DateTo) }}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div v-else> Work schedule empty.</div>\r\n\r\n        <template v-if=\"selectedEmpSched\">\r\n            <emp-schedule-detail ref=\"empScheDetailRef\" :empSched=\"selectedEmpSched\" @deleted=\"deleteSelection\"\r\n                                 @updated=\"updatedEmpSchedule\"></emp-schedule-detail>\r\n        </template>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {emitter} from \"../../main\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport EmpScheduleDetail from \"@/components/employeeAllocation/EmpSchedDetail.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"employeeSchedule\",\r\n    components: {EmpScheduleDetail},\r\n    props: ['employee'],\r\n    data: function () {\r\n        return {\r\n            selectedEmp: <any>null,\r\n            empSchedList: <any[]>[],\r\n            activeOnly: false,\r\n            selectedEmpSched: <any>null\r\n        }\r\n    },\r\n    setup(props) {\r\n        const selectedEmp = ref<any>(props.employee)\r\n\r\n        return {selectedEmp}\r\n    },\r\n    mounted() {\r\n        this.selectedEmp = this.employee;\r\n        if (this.selectedEmp && this.selectedEmp.EmployeeNo) {\r\n            this.getEmpWorkScheds()\r\n        } else {\r\n            console.error('employee or employee number missing')\r\n        }\r\n    },\r\n    watch: {\r\n        employee() {\r\n            this.selectedEmp = this.employee;\r\n            if (this.selectedEmp && this.selectedEmp.EmployeeNo) {\r\n                this.getEmpWorkScheds()\r\n            } else {\r\n                console.error('employee or employee number missing')\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        selectEmpSchedCheck(empSched: any) {\r\n            if (this.$refs.empScheDetailRef && (this.$refs.empScheDetailRef as any).hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        this.selectEmpSched(empSched)\r\n                    }\r\n                })\r\n            } else {\r\n                this.selectEmpSched(empSched)\r\n            }\r\n        },\r\n        selectEmpSched(empSched: any) {\r\n\r\n            this.empSchedList.forEach(empSched => {\r\n                empSched.classObject.selected = false;\r\n            })\r\n\r\n            empSched.classObject.selected = true\r\n            this.selectedEmpSched = empSched;\r\n        },\r\n\r\n        getEmpWorkScheds() {\r\n            Dialog.loading()\r\n            Remote.EmpWorkScheds(this.selectedEmp.EmployeeNo + (this.activeOnly ? \"?activeOnly=true\" : \"?activeOnly=false\"))\r\n                .then(res => {\r\n                    res.Data.map((empSched: any, index: number) => {\r\n                        empSched.classObject = {\r\n                            'selected': false,\r\n                            'odd': index % 2\r\n                        }\r\n                        empSched.DateFrom = new Date(Date.parse(empSched.DateFrom));\r\n                        if (empSched.DateTo)\r\n                            empSched.DateTo = new Date(Date.parse(empSched.DateTo));\r\n                    });\r\n                    this.empSchedList = res.Data;\r\n                    Dialog.clear();\r\n                })\r\n        },\r\n\r\n        updateActiveOnly() {\r\n            this.getEmpWorkScheds();\r\n        },\r\n        closeEmployeeSchedule(changeCheck: any) {\r\n            if (!changeCheck || !this.$refs.empScheDetailRef || (this.$refs.empScheDetailRef && !(this.$refs.empScheDetailRef as any).hasChanges)) {\r\n                this.$emit('close')\r\n                return;\r\n            }\r\n\r\n            Dialog.checkChange({\r\n                message: 'There are currently Schedule changes <br /> Do you want to discard your changes?',\r\n                onOk: () => {\r\n                    this.closeEmployeeSchedule(false)\r\n                }\r\n            })\r\n        },\r\n        deleteSelection() {\r\n            this.selectedEmpSched = null;\r\n            this.getEmpWorkScheds();\r\n        },\r\n        updatedEmpSchedule() {\r\n            this.selectedEmpSched = null;\r\n            this.getEmpWorkScheds();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.emp-workSched-card {\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    min-height: 450px;\r\n    background: #efefef;\r\n    width: 460px;\r\n    /*font-size: 12px;*/\r\n\r\n    @media only screen and (max-width: 980px) {\r\n        margin-top: 10px;\r\n\r\n    }\r\n\r\n    @media only screen and (max-width: 600px) {\r\n        width: 100%;\r\n        margin-top: 8px;\r\n    }\r\n}\r\n\r\n.aff-table {\r\n    tr {\r\n        cursor: pointer;\r\n    }\r\n}\r\n\r\n.override-width {\r\n    width: auto !important;\r\n}\r\n</style>","<!--<style src=\"./scheduleDetail.scss\" lang=\"scss\"></style>-->\r\n<template>\r\n    <div class=\"section default-form sched-empSched-form mt-4\" v-if=\"empSchedDetail && empSchedDetail.Detail\">\r\n        <h3>Schedule Details</h3>\r\n        <form v-on:submit.prevent=\"submitForm\">\r\n            <div class=\"caption mt-2\">\r\n                <div class=\"form-label\">Name</div>\r\n                <div class=\"label-empSched\">{{ empSchedDetail.Detail.Name }}</div>\r\n            </div>\r\n            <div class=\"caption d-flex mt-4\">\r\n                <div class=\"form-label\">Number of Weeks</div>\r\n                <div class=\"label-empSched\">{{ empSchedDetail.Detail.NoOfWeeks }}</div>\r\n            </div>\r\n            <div class=\"d-flex justify-space-between\">\r\n                <div class=\"caption mt-4\">\r\n                    <div class=\"date-label\">Date From</div>\r\n\r\n                    <input :value=\"$filters.reformatDate(empSchedDetail.DateFrom)\"\r\n                           v-bind=\"attrs\" v-on=\"on\"\r\n                           outlined dense hide-details\r\n                           autocomplete=\"off\"\r\n                           class=\"d-inline-flex ma-0 pa-0 mr-2 caption date-input-width date-input\"\r\n                           append-icon=\"icon-calendar\"\r\n                           @change=\"updateDateText($event, empSchedDetail.DateFrom)\"\r\n                           @click=\"updateDateTime($event, empSchedDetail.DateFrom, 'DateFrom')\"\r\n                           @click:clear=\"fromDate = false\">\r\n                    <!--                    <v-menu v-model=\"fromDateMenu\" bottom offsetY-->\r\n                    <!--                            :close-on-content-click=\"false\">-->\r\n                    <!--                        <template v-slot:activator=\"{ on, attrs }\">-->\r\n                    <!--                            <input :value=\"empSchedDetail.DateFrom | date\"-->\r\n                    <!--                                          v-bind=\"attrs\" v-on=\"on\"-->\r\n                    <!--                                          autocomplete=\"off\"-->\r\n                    <!--                                          outlined dense hide-details-->\r\n                    <!--                                          append-icon=\"icon-calendar\"-->\r\n                    <!--                                          @change=\"updateDateText($event, empSchedDetail.DateFrom)\"-->\r\n                    <!--                                          class=\"d-inline-flex ma-0 pa-0 caption white date-input-width\"-->\r\n                    <!--                                          @click:clear=\"empSchedDetail.DateFrom = null\">-->\r\n                    <!--                            -->\r\n                    <!--                        </template>-->\r\n                    <!--                        <v-date-picker :value=\"fromDatePickerValue\" @input=\"fromDateDatePickerHandler\"-->\r\n                    <!--                                       :weekday-format=\"getDay\"-->\r\n                    <!--                                       no-title @change=\"fromDateMenu = false\"></v-date-picker>-->\r\n                    <!--                    </v-menu>-->\r\n                </div>\r\n                <div class=\"caption mt-4\">\r\n                    <div class=\"date-label\">Date To</div>\r\n                    <input :value=\"$filters.reformatDate(empSchedDetail.DateTo)\"\r\n                           v-bind=\"attrs\" v-on=\"on\"\r\n                           autocomplete=\"off\"\r\n                           outlined dense hide-details\r\n                           class=\"d-inline-flex ma-0 pa-0 caption date-input-width date-input\"\r\n                           append-icon=\"icon-calendar\"\r\n                           @change=\"updateDateText($event,  empSchedDetail.DateTo)\"\r\n                           @click=\"updateDateTime($event, empSchedDetail.DateTo, 'DateTo')\"\r\n                           @click:clear=\"toDateMenu = false\">\r\n                    <!--                    <v-menu v-model=\"toDateMenu\" bottom offsetY-->\r\n                    <!--                            :close-on-content-click=\"false\">-->\r\n                    <!--                        <template v-slot:activator=\"{ on, attrs }\">-->\r\n                    <!--                            <input :value=\"empSchedDetail.DateTo | date\"-->\r\n                    <!--                                          v-bind=\"attrs\" v-on=\"on\"-->\r\n                    <!--                                          autocomplete=\"off\"-->\r\n                    <!--                                          outlined dense hide-details-->\r\n                    <!--                                          append-icon=\"icon-calendar\"-->\r\n                    <!--                                          @change=\"updateDateText($event, empSchedDetail.DateTo)\"-->\r\n                    <!--                                          class=\"d-inline-flex ma-0 pa-0 caption white date-input-width\"-->\r\n                    <!--                                          @click:clear=\"empSchedDetail.DateTo = null\">-->\r\n                    <!--                            -->\r\n                    <!--                        </template>-->\r\n                    <!--                        <v-date-picker :value=\"toDatePickerValue\"-->\r\n                    <!--                                       :weekday-format=\"getDay\"-->\r\n                    <!--                                       @input=\"toDateDatePickerHandler\" no-title @change=\"toDateMenu = false\"></v-date-picker>-->\r\n                    <!--                    </v-menu>-->\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"caption mt-4\">\r\n                <div class=\"date-label\">Notes</div>\r\n                <textarea class=\"caption schedule-textarea\"\r\n                          @keyup=\"hasChanges = true\"\r\n                          hide-details rows=\"2\" outlined dense v-model=\"empSchedDetail.Comment\">\r\n                </textarea>\r\n            </div>\r\n\r\n            <div class=\"section-table ui-gridbox-scrollable-titles mt-4\">\r\n                <div class=\"aff-table sched-empSched-table\">\r\n                    <table class=\"sched-empSched-days\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Week</th>\r\n                            <th>Day</th>\r\n                            <th class=\"text-center\">Hours</th>\r\n                            <th class=\"text-center\">Start</th>\r\n                            <th class=\"text-center\">Finish</th>\r\n                            <th>Shift</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr v-for=\"d in empSchedDetail.Detail.Days\">\r\n                            <td class=\"text-center\">\r\n                                <span v-show=\"isFirstDayOfWeek(d.DayOfWeek)\">{{ d.Week }}</span>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"mr-2 days-width\">{{ d.DayNumber + 1 }}</span>\r\n                                <span>{{ getDayOfWeek(d.DayOfWeek) }}</span>\r\n                            </td>\r\n                            <td class=\"text-center\">{{ d.Hours }}</td>\r\n                            <td class=\"text-center\"><span class=\"px-2\">{{ $filters.reformatTime(d.StartTime) }}</span></td>\r\n                            <td class=\"text-center\"><span class=\"px-2\">{{ $filters.reformatTime(d.FinishTime) }}</span></td>\r\n                            <td class=\"shift-select-td\">{{ d.ShiftId }}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"schedules-buttons form-row d-flex justify-end mt-4\">\r\n                <button type=\"button\" class=\"white--text small red text-capitalize mr-2\"\r\n                        @click=\"RemoveSchedule()\">\r\n                    <span class=\"icon-briefcase mr-1\"></span><span>Remove</span>\r\n                </button>\r\n                <button type=\"button\" class=\"white--text small grey text-capitalize mr-2\" :disabled=\"!hasChanges\"\r\n                        @click=\"cancelChanges()\">\r\n                    <span class=\"icon-cancel mr-1\"></span><span>Cancel</span>\r\n                </button>\r\n                <button type=\"button\" class=\"white--text small green text-capitalize mr-1\" :disabled=\"!hasChanges\"\r\n                        @click=\"updateEmpSched()\">\r\n                    <span class=\"icon-save mr-1\"></span><span>Update</span>\r\n                </button>\r\n            </div>\r\n        </form>\r\n        <date-picker ref=\"DatePickerRef\" :top=\"dateModalTop\" :left=\"dateModalLeft\"></date-picker>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport Vue, {defineComponent} from 'vue';\r\nimport moment from \"moment\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {emitter} from '@/main';\r\nimport Dialog from \"@/components/dialog\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"emp-schedule-detail\",\r\n    props: ['empSched'],\r\n    components: {\r\n        DatePicker\r\n    },\r\n    data: function () {\r\n        return {\r\n            // datepicker\r\n            dateModalTop: null,\r\n            dateModalLeft: null,\r\n            datePickerTargetDay: <any>null,\r\n            dateType: '',\r\n\r\n            empSchedDetail: <any>null,\r\n            hasChanges: <null | boolean>false,\r\n            fromDateMenu: false,\r\n            toDateMenu: false,\r\n            fromDatePickerValue: <any>'',\r\n            toDatePickerValue: <any>'',\r\n\r\n        }\r\n    },\r\n    computed: {},\r\n\r\n    mounted: function () {\r\n        this.$emit(\"dataChanged\", this.hasChanges); // todo wtf is components? check what does this line do !!!\r\n        this.getEmpSchedDetail()\r\n    },\r\n    watch: {\r\n        ['empSched'](newVal, oldVal) {\r\n            if (newVal != oldVal) {\r\n                this.empSchedDetail = null;\r\n                this.hasChanges = null;\r\n                this.fromDateMenu = false;\r\n                this.toDateMenu = false;\r\n\r\n                this.getEmpSchedDetail()\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // todo: fix calendar\r\n        // getDay(date) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n        getEmpSchedDetail() {\r\n            Dialog.loading()\r\n            Remote.EmpSchedDetailRequest(this.empSched.EmployeeNo + '/' + this.empSched.Id)\r\n            .then(response => {\r\n                this.empSchedDetail = response.Data;\r\n                if (!this.empSchedDetail.Detail) {\r\n                    return;\r\n                }\r\n                var week = 0;\r\n                var date = moment(this.empSchedDetail.Detail.StartDate);\r\n                // Add missing 0 days\r\n                var total = this.empSchedDetail.Detail.NoOfWeeks * 7;\r\n                var fullDays = new Array(total);\r\n                for (var dayNum = 0; dayNum < total; dayNum++) {\r\n                    if (dayNum % 7 == 0) {\r\n                        week++;\r\n                    }\r\n\r\n                    fullDays[dayNum] = {\r\n                        DayNumber: dayNum,\r\n                        DayOfWeek: date.day(),\r\n                        Week: week,\r\n                        Date: moment(date),\r\n                        Hours: 0,\r\n                        StartTime: null,\r\n                        FinishTime: null,\r\n                        ShiftId: null\r\n                    };\r\n\r\n                    date.add(1, 'day')\r\n                }\r\n\r\n                this.empSchedDetail.Detail.Days.map(function (day: any) {\r\n                    //day.Date = new Date(Date.parse(day.Date));\r\n                    if (day.StartTime)\r\n                        fullDays[day.DayNumber].StartTime = moment(day.StartTime);\r\n                    if (day.FinishTime)\r\n                        fullDays[day.DayNumber].FinishTime = moment(day.FinishTime);\r\n                    fullDays[day.DayNumber].Hours = day.Hours;\r\n                    fullDays[day.DayNumber].ShiftId = day.ShiftId;\r\n\r\n                });\r\n\r\n                this.empSchedDetail.Detail.Days = fullDays;\r\n                this.empSchedDetail.Detail.StartDate = moment(this.empSchedDetail.Detail.StartDate);\r\n\r\n                if (response.Data.DateFrom) {\r\n                    this.empSchedDetail.DateFrom = moment(response.Data.DateFrom, 'YYYY-MM-DD')\r\n                }\r\n\r\n\r\n                if (response.Data.DateTo) {\r\n                    this.empSchedDetail.DateTo = moment(response.Data.DateTo, 'YYYY-MM-DD')\r\n                }\r\n\r\n                this.datePickerFormattedFromDate();\r\n                this.datePickerFormattedToDate();\r\n            })\r\n            .finally(() => Dialog.clear())\r\n        },\r\n\r\n        submitForm() {\r\n            return false;\r\n        },\r\n\r\n\r\n        updateDateText(event: any, target: any) {\r\n            // this.startDateMenu = false\r\n            this.toDateMenu = false;\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.datePickerFormattedFromDate();\r\n            this.datePickerFormattedToDate();\r\n        },\r\n        datePickerFormattedFromDate() {\r\n            this.fromDatePickerValue = this.empSchedDetail.DateFrom ? moment(this.empSchedDetail.DateFrom).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n        datePickerFormattedToDate() {\r\n            this.toDatePickerValue = this.empSchedDetail.DateTo ? moment(this.empSchedDetail.DateTo).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n\r\n        fromDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.empSchedDetail.DateFrom = date;\r\n            this.hasChanges = true;\r\n            this.datePickerFormattedFromDate()\r\n        },\r\n        toDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.empSchedDetail.DateTo = date;\r\n            this.hasChanges = true;\r\n            this.datePickerFormattedToDate();\r\n        },\r\n\r\n        isFirstDayOfWeek: function (dayNo: any) {\r\n            var startDate = moment(this.empSchedDetail.Detail.StartDate);\r\n            return dayNo == startDate.day();\r\n        },\r\n        getDayOfWeek: function (dayNo: any) {\r\n            if (dayNo < 0 || dayNo > 6)\r\n                return 'unknown';\r\n            var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n            return days[dayNo];\r\n        },\r\n\r\n        RemoveSchedule() {\r\n            // should be dialog confirm\r\n            Dialog.checkChange({\r\n                message: 'Are you sure?',\r\n                onOk: () => {\r\n                    Dialog.loading()\r\n                    Remote.RemoveEmployeeWorkSchedule(this.empSchedDetail.Id, this.empSched.EmployeeNo)\r\n                        .then(res => {\r\n                            //\r\n                            this.$emit('deleted')\r\n                        }).finally(() => Dialog.clear())\r\n\r\n                }\r\n            })\r\n        },\r\n\r\n        cancelChanges() {\r\n            // this.reloadDetail();\r\n            if (!this.hasChanges) {\r\n                // this.$emit('reload');\r\n                this.getEmpSchedDetail()\r\n                return;\r\n            }\r\n\r\n            let msg = 'There is currently unsaved schedule changes <br /> Do you want to discard your changes?';\r\n            emitter.emit('dialog', {\r\n                message: msg,\r\n                showButtons: true,\r\n                showCancel: true,\r\n                okColor: 'orange',\r\n                onOk: () => {\r\n                    // this.$emit('reload');\r\n                    this.getEmpSchedDetail()\r\n                    this.hasChanges = false;\r\n                },\r\n                onCancel: () => {\r\n                    // do nothing\r\n                }\r\n            })\r\n        },\r\n\r\n        updateEmpSched() {\r\n            var dateFrom = moment(this.empSchedDetail.DateFrom);\r\n            var dateTo = moment(this.empSchedDetail.DateTo);\r\n\r\n            if (dateFrom && dateTo &&\r\n                dateFrom > dateTo) {\r\n                Dialog.alert('<br />Date From cannot be before Date To.')\r\n                return;\r\n            }\r\n\r\n            emitter.emit('dialog', {\r\n                message: 'Updating Employee Schedule',\r\n                showButtons: false,\r\n                showLoader: true,\r\n                noClose: false\r\n            });\r\n            Dialog.loading()\r\n\r\n            var postData = {\r\n                Id: this.empSchedDetail.Id,\r\n                DateFrom: dateFrom ? dateFrom.format('DD/MMM/YYYY') : null,\r\n                DateTo: dateTo ? dateTo.format('DD/MMM/YYYY') : null,\r\n                Comment: this.empSchedDetail.Comment\r\n            };\r\n\r\n            Remote.UpdateEmpSchedRequest(postData, this.empSched.EmployeeNo)\r\n                .then(res => {\r\n                    Dialog.clear();\r\n                    this.$emit('updated')\r\n                })\r\n                .catch(err => {\r\n                    Dialog.alert(err.message)\r\n                    console.error('err', err)\r\n                })\r\n        },\r\n        updateDateTime($event: any, dateFrom: any, dateType: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.datePickerTargetDay = dateFrom;\r\n            this.dateType = dateType;\r\n            this.openDatePicker()\r\n\r\n        },\r\n\r\n        async openDatePicker() {\r\n            // (this.$refs.DatePickerRef as any).toggleShow();\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay));\r\n            if (this.dateType === 'DateTo') {\r\n                this.empSchedDetail.DateTo = result\r\n            } else if (this.dateType === 'DateFrom') {\r\n                this.empSchedDetail.DateFrom = result\r\n            }\r\n            this.hasChanges = true;\r\n\r\n        }\r\n    },\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.form-label {\r\n    display: inline-block;\r\n    width: 160px;\r\n    font-weight: bold;\r\n}\r\n\r\n.date-label {\r\n    display: block;\r\n    font-weight: bold;\r\n    width: 100px;\r\n}\r\n\r\n.date-to-label {\r\n    display: inline-block;\r\n    font-weight: bold;\r\n    width: auto;\r\n    margin-right: 40px;\r\n}\r\n\r\n.input-width {\r\n    width: 200px;\r\n}\r\n\r\n.date-input-width {\r\n    width: 160px;\r\n}\r\n\r\n.label-empSched {\r\n    display: inline-block;\r\n}\r\n\r\n.v-input--dense {\r\n    min-height: 0;\r\n}\r\n\r\n.sched-empSched-form .v-input--dense ::v-deep .v-input__control .v-input__slot {\r\n    min-height: 0;\r\n\r\n\r\n    input {\r\n        padding: 4px 0;\r\n    }\r\n}\r\n\r\n.sched-empSched-table {\r\n    overflow: auto;\r\n    max-height: 260px;\r\n\r\n    table {\r\n        @media only screen and (max-width: 600px) {\r\n\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n\r\n.shift-select-td {\r\n    position: relative;\r\n    width: 100px;\r\n}\r\n\r\n.days-width {\r\n    display: inline-block;\r\n    width: 14px;\r\n}\r\n\r\n.full-width {\r\n    width: 100%;\r\n}\r\n\r\n.schedule-textarea {\r\n    width: 100%;\r\n    height: 54px;\r\n}\r\n\r\nbody.newui .dashboard .pagecontent .mt-4 {\r\n    margin-top: 16px;\r\n}\r\n\r\n</style>\r\n","\r\nimport Vue, {defineComponent} from 'vue';\r\nimport moment from \"moment\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {emitter} from '@/main';\r\nimport Dialog from \"@/components/dialog\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"emp-schedule-detail\",\r\n    props: ['empSched'],\r\n    components: {\r\n        DatePicker\r\n    },\r\n    data: function () {\r\n        return {\r\n            // datepicker\r\n            dateModalTop: null,\r\n            dateModalLeft: null,\r\n            datePickerTargetDay: <any>null,\r\n            dateType: '',\r\n\r\n            empSchedDetail: <any>null,\r\n            hasChanges: <null | boolean>false,\r\n            fromDateMenu: false,\r\n            toDateMenu: false,\r\n            fromDatePickerValue: <any>'',\r\n            toDatePickerValue: <any>'',\r\n\r\n        }\r\n    },\r\n    computed: {},\r\n\r\n    mounted: function () {\r\n        this.$emit(\"dataChanged\", this.hasChanges); // todo wtf is components? check what does this line do !!!\r\n        this.getEmpSchedDetail()\r\n    },\r\n    watch: {\r\n        ['empSched'](newVal, oldVal) {\r\n            if (newVal != oldVal) {\r\n                this.empSchedDetail = null;\r\n                this.hasChanges = null;\r\n                this.fromDateMenu = false;\r\n                this.toDateMenu = false;\r\n\r\n                this.getEmpSchedDetail()\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // todo: fix calendar\r\n        // getDay(date) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n        getEmpSchedDetail() {\r\n            Dialog.loading()\r\n            Remote.EmpSchedDetailRequest(this.empSched.EmployeeNo + '/' + this.empSched.Id)\r\n            .then(response => {\r\n                this.empSchedDetail = response.Data;\r\n                if (!this.empSchedDetail.Detail) {\r\n                    return;\r\n                }\r\n                var week = 0;\r\n                var date = moment(this.empSchedDetail.Detail.StartDate);\r\n                // Add missing 0 days\r\n                var total = this.empSchedDetail.Detail.NoOfWeeks * 7;\r\n                var fullDays = new Array(total);\r\n                for (var dayNum = 0; dayNum < total; dayNum++) {\r\n                    if (dayNum % 7 == 0) {\r\n                        week++;\r\n                    }\r\n\r\n                    fullDays[dayNum] = {\r\n                        DayNumber: dayNum,\r\n                        DayOfWeek: date.day(),\r\n                        Week: week,\r\n                        Date: moment(date),\r\n                        Hours: 0,\r\n                        StartTime: null,\r\n                        FinishTime: null,\r\n                        ShiftId: null\r\n                    };\r\n\r\n                    date.add(1, 'day')\r\n                }\r\n\r\n                this.empSchedDetail.Detail.Days.map(function (day: any) {\r\n                    //day.Date = new Date(Date.parse(day.Date));\r\n                    if (day.StartTime)\r\n                        fullDays[day.DayNumber].StartTime = moment(day.StartTime);\r\n                    if (day.FinishTime)\r\n                        fullDays[day.DayNumber].FinishTime = moment(day.FinishTime);\r\n                    fullDays[day.DayNumber].Hours = day.Hours;\r\n                    fullDays[day.DayNumber].ShiftId = day.ShiftId;\r\n\r\n                });\r\n\r\n                this.empSchedDetail.Detail.Days = fullDays;\r\n                this.empSchedDetail.Detail.StartDate = moment(this.empSchedDetail.Detail.StartDate);\r\n\r\n                if (response.Data.DateFrom) {\r\n                    this.empSchedDetail.DateFrom = moment(response.Data.DateFrom, 'YYYY-MM-DD')\r\n                }\r\n\r\n\r\n                if (response.Data.DateTo) {\r\n                    this.empSchedDetail.DateTo = moment(response.Data.DateTo, 'YYYY-MM-DD')\r\n                }\r\n\r\n                this.datePickerFormattedFromDate();\r\n                this.datePickerFormattedToDate();\r\n            })\r\n            .finally(() => Dialog.clear())\r\n        },\r\n\r\n        submitForm() {\r\n            return false;\r\n        },\r\n\r\n\r\n        updateDateText(event: any, target: any) {\r\n            // this.startDateMenu = false\r\n            this.toDateMenu = false;\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.datePickerFormattedFromDate();\r\n            this.datePickerFormattedToDate();\r\n        },\r\n        datePickerFormattedFromDate() {\r\n            this.fromDatePickerValue = this.empSchedDetail.DateFrom ? moment(this.empSchedDetail.DateFrom).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n        datePickerFormattedToDate() {\r\n            this.toDatePickerValue = this.empSchedDetail.DateTo ? moment(this.empSchedDetail.DateTo).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n\r\n        fromDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.empSchedDetail.DateFrom = date;\r\n            this.hasChanges = true;\r\n            this.datePickerFormattedFromDate()\r\n        },\r\n        toDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.empSchedDetail.DateTo = date;\r\n            this.hasChanges = true;\r\n            this.datePickerFormattedToDate();\r\n        },\r\n\r\n        isFirstDayOfWeek: function (dayNo: any) {\r\n            var startDate = moment(this.empSchedDetail.Detail.StartDate);\r\n            return dayNo == startDate.day();\r\n        },\r\n        getDayOfWeek: function (dayNo: any) {\r\n            if (dayNo < 0 || dayNo > 6)\r\n                return 'unknown';\r\n            var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n            return days[dayNo];\r\n        },\r\n\r\n        RemoveSchedule() {\r\n            // should be dialog confirm\r\n            Dialog.checkChange({\r\n                message: 'Are you sure?',\r\n                onOk: () => {\r\n                    Dialog.loading()\r\n                    Remote.RemoveEmployeeWorkSchedule(this.empSchedDetail.Id, this.empSched.EmployeeNo)\r\n                        .then(res => {\r\n                            //\r\n                            this.$emit('deleted')\r\n                        }).finally(() => Dialog.clear())\r\n\r\n                }\r\n            })\r\n        },\r\n\r\n        cancelChanges() {\r\n            // this.reloadDetail();\r\n            if (!this.hasChanges) {\r\n                // this.$emit('reload');\r\n                this.getEmpSchedDetail()\r\n                return;\r\n            }\r\n\r\n            let msg = 'There is currently unsaved schedule changes <br /> Do you want to discard your changes?';\r\n            emitter.emit('dialog', {\r\n                message: msg,\r\n                showButtons: true,\r\n                showCancel: true,\r\n                okColor: 'orange',\r\n                onOk: () => {\r\n                    // this.$emit('reload');\r\n                    this.getEmpSchedDetail()\r\n                    this.hasChanges = false;\r\n                },\r\n                onCancel: () => {\r\n                    // do nothing\r\n                }\r\n            })\r\n        },\r\n\r\n        updateEmpSched() {\r\n            var dateFrom = moment(this.empSchedDetail.DateFrom);\r\n            var dateTo = moment(this.empSchedDetail.DateTo);\r\n\r\n            if (dateFrom && dateTo &&\r\n                dateFrom > dateTo) {\r\n                Dialog.alert('<br />Date From cannot be before Date To.')\r\n                return;\r\n            }\r\n\r\n            emitter.emit('dialog', {\r\n                message: 'Updating Employee Schedule',\r\n                showButtons: false,\r\n                showLoader: true,\r\n                noClose: false\r\n            });\r\n            Dialog.loading()\r\n\r\n            var postData = {\r\n                Id: this.empSchedDetail.Id,\r\n                DateFrom: dateFrom ? dateFrom.format('DD/MMM/YYYY') : null,\r\n                DateTo: dateTo ? dateTo.format('DD/MMM/YYYY') : null,\r\n                Comment: this.empSchedDetail.Comment\r\n            };\r\n\r\n            Remote.UpdateEmpSchedRequest(postData, this.empSched.EmployeeNo)\r\n                .then(res => {\r\n                    Dialog.clear();\r\n                    this.$emit('updated')\r\n                })\r\n                .catch(err => {\r\n                    Dialog.alert(err.message)\r\n                    console.error('err', err)\r\n                })\r\n        },\r\n        updateDateTime($event: any, dateFrom: any, dateType: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.datePickerTargetDay = dateFrom;\r\n            this.dateType = dateType;\r\n            this.openDatePicker()\r\n\r\n        },\r\n\r\n        async openDatePicker() {\r\n            // (this.$refs.DatePickerRef as any).toggleShow();\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay));\r\n            if (this.dateType === 'DateTo') {\r\n                this.empSchedDetail.DateTo = result\r\n            } else if (this.dateType === 'DateFrom') {\r\n                this.empSchedDetail.DateFrom = result\r\n            }\r\n            this.hasChanges = true;\r\n\r\n        }\r\n    },\r\n})\r\n","import { render } from \"./EmpSchedDetail.vue?vue&type=template&id=7d332311&scoped=true\"\nimport script from \"./EmpSchedDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./EmpSchedDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./EmpSchedDetail.vue?vue&type=style&index=0&id=7d332311&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-7d332311\"\n\nexport default script","\r\nimport {emitter} from \"../../main\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport EmpScheduleDetail from \"@/components/employeeAllocation/EmpSchedDetail.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"employeeSchedule\",\r\n    components: {EmpScheduleDetail},\r\n    props: ['employee'],\r\n    data: function () {\r\n        return {\r\n            selectedEmp: <any>null,\r\n            empSchedList: <any[]>[],\r\n            activeOnly: false,\r\n            selectedEmpSched: <any>null\r\n        }\r\n    },\r\n    setup(props) {\r\n        const selectedEmp = ref<any>(props.employee)\r\n\r\n        return {selectedEmp}\r\n    },\r\n    mounted() {\r\n        this.selectedEmp = this.employee;\r\n        if (this.selectedEmp && this.selectedEmp.EmployeeNo) {\r\n            this.getEmpWorkScheds()\r\n        } else {\r\n            console.error('employee or employee number missing')\r\n        }\r\n    },\r\n    watch: {\r\n        employee() {\r\n            this.selectedEmp = this.employee;\r\n            if (this.selectedEmp && this.selectedEmp.EmployeeNo) {\r\n                this.getEmpWorkScheds()\r\n            } else {\r\n                console.error('employee or employee number missing')\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        selectEmpSchedCheck(empSched: any) {\r\n            if (this.$refs.empScheDetailRef && (this.$refs.empScheDetailRef as any).hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        this.selectEmpSched(empSched)\r\n                    }\r\n                })\r\n            } else {\r\n                this.selectEmpSched(empSched)\r\n            }\r\n        },\r\n        selectEmpSched(empSched: any) {\r\n\r\n            this.empSchedList.forEach(empSched => {\r\n                empSched.classObject.selected = false;\r\n            })\r\n\r\n            empSched.classObject.selected = true\r\n            this.selectedEmpSched = empSched;\r\n        },\r\n\r\n        getEmpWorkScheds() {\r\n            Dialog.loading()\r\n            Remote.EmpWorkScheds(this.selectedEmp.EmployeeNo + (this.activeOnly ? \"?activeOnly=true\" : \"?activeOnly=false\"))\r\n                .then(res => {\r\n                    res.Data.map((empSched: any, index: number) => {\r\n                        empSched.classObject = {\r\n                            'selected': false,\r\n                            'odd': index % 2\r\n                        }\r\n                        empSched.DateFrom = new Date(Date.parse(empSched.DateFrom));\r\n                        if (empSched.DateTo)\r\n                            empSched.DateTo = new Date(Date.parse(empSched.DateTo));\r\n                    });\r\n                    this.empSchedList = res.Data;\r\n                    Dialog.clear();\r\n                })\r\n        },\r\n\r\n        updateActiveOnly() {\r\n            this.getEmpWorkScheds();\r\n        },\r\n        closeEmployeeSchedule(changeCheck: any) {\r\n            if (!changeCheck || !this.$refs.empScheDetailRef || (this.$refs.empScheDetailRef && !(this.$refs.empScheDetailRef as any).hasChanges)) {\r\n                this.$emit('close')\r\n                return;\r\n            }\r\n\r\n            Dialog.checkChange({\r\n                message: 'There are currently Schedule changes <br /> Do you want to discard your changes?',\r\n                onOk: () => {\r\n                    this.closeEmployeeSchedule(false)\r\n                }\r\n            })\r\n        },\r\n        deleteSelection() {\r\n            this.selectedEmpSched = null;\r\n            this.getEmpWorkScheds();\r\n        },\r\n        updatedEmpSchedule() {\r\n            this.selectedEmpSched = null;\r\n            this.getEmpWorkScheds();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./EmployeeSchedule.vue?vue&type=template&id=1920bd7a&scoped=true\"\nimport script from \"./EmployeeSchedule.vue?vue&type=script&lang=ts\"\nexport * from \"./EmployeeSchedule.vue?vue&type=script&lang=ts\"\n\nimport \"./EmployeeSchedule.vue?vue&type=style&index=0&id=1920bd7a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1920bd7a\"\n\nexport default script","<template>\r\n    <div class=\"section shadow sched-card-default pa-4\">\r\n        <h3>Select Employees</h3>\r\n        <input class=\"mt-2 caption text-field-input\" v-model=\"searchTerm\" hide-details dense outlined type=\"text\"\r\n               placeholder=\"Search for employees \"/>\r\n        <div class=\"aff-table mt-4\">\r\n            <table class=\"ui-grid\">\r\n                <tbody>\r\n                <tr v-for=\"emp in empList\" :class=\"emp.classObject\" @click=\"toggleEmployeeSelect(emp)\">\r\n                    <td>\r\n                        <span class=\"name-text-width\">{{ emp.EmployeeName }} ({{ emp.EmployeeNo }})</span>\r\n\r\n                        <span class=\"current-schedules-width\">\r\n                            <div class=\"schedule-name\" v-for=\"name in emp.WorkschedNames\">{{ name }}</div>\r\n                            <div class=\"schedule-name\">{{ emp.PersonalSchedule }}</div>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <button v-if=\"!isMobileView && !emp.classObject.selected\"\r\n                                class=\"green white--text fsmall\"\r\n                                v-tooltip.right=\"{content: 'Add to Employee Selection List'}\"\r\n                                @click.stop=\"addEmployee(emp)\">\r\n                            <span class=\"icon-add-to-list\"></span>\r\n                        </button>\r\n                        <button v-if=\"isMobileView && !emp.classObject.selected\"\r\n                                class=\"green white--text fsmall\"\r\n                                @click.stop=\"addEmployee(emp)\">\r\n                            <span class=\"icon-add-to-list\"></span>\r\n                        </button>\r\n                        <button v-if=\"emp.classObject.selected\"\r\n                                class=\"grey fsmall\"\r\n                                v-tooltip.right=\"{content: 'Remove Employee From Selection List'}\"\r\n                                @click.stop=\"removeEmployee(emp)\">\r\n                            <span class=\"icon-minus white--text small\"></span>\r\n                        </button>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {emitter} from \"../../main\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport Vue, {defineComponent} from \"vue\";\r\nimport Dialog from '@/components/dialog'\r\n\r\nexport default defineComponent({\r\n    name: \"SearchEmployee\",\r\n    data: function () {\r\n        return {\r\n            // employee list\r\n            searchTerm: '',\r\n            empList: [],\r\n            selectedEmpList: <any>[],\r\n            selectedEmp: null,\r\n            isMobileView: false,\r\n        }\r\n    },\r\n    mounted() {\r\n        if (navigator.userAgent.match(/Android/i)\r\n            || navigator.userAgent.match(/webOS/i)\r\n            || navigator.userAgent.match(/iPhone/i)\r\n            || navigator.userAgent.match(/iPad/i)\r\n            || navigator.userAgent.match(/iPod/i)\r\n            || navigator.userAgent.match(/BlackBerry/i)\r\n            || navigator.userAgent.match(/Windows Phone/i)\r\n        ) {\r\n            console.log('is mobile view true')\r\n            this.isMobileView = true;\r\n        } else {\r\n            this.isMobileView = false;\r\n        }\r\n\r\n        this.getEmployeesList()\r\n    },\r\n    watch: {\r\n        searchTerm: function (newVal, oldVal) {\r\n            if (oldVal != newVal) {\r\n                if (newVal.trim().length == 0) {\r\n                    this.empList.forEach(function (emp: any) {\r\n                        emp.classObject.visible = true;\r\n                        emp.classObject.hidden = false;\r\n                    });\r\n\r\n                } else {\r\n                    var searchTerm = newVal.toLowerCase().trim();\r\n                    this.empList.forEach((emp: any) => {\r\n                        emp.classObject.visible = (emp.EmployeeName && emp.EmployeeName.toLowerCase().indexOf(searchTerm) > -1) || (emp.EmployeeNo && emp.EmployeeNo.toString().indexOf(searchTerm) > -1);\r\n                        emp.classObject.hidden = !emp.classObject.visible;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        getEmployeesList() {\r\n            Dialog.loading()\r\n            Remote.EmployeesList().then(response => {\r\n                response.Data.map((sched: any, index: number) => {\r\n                    sched.classObject = {\r\n                        'visible': true,\r\n                        'hidden': false,\r\n                        'selected': false,\r\n                        'odd': index % 2\r\n                    }\r\n                })\r\n                this.empList = response.Data;\r\n            }).finally(() => {\r\n                Dialog.clear()\r\n            })\r\n\r\n        },\r\n        toggleEmployeeSelect: function (emp: any) {\r\n            if (emp.classObject.selected) {\r\n                this.removeEmployee(emp)\r\n            } else {\r\n                this.addEmployee(emp)\r\n            }\r\n        },\r\n        removeEmployee: function (emp: any) {\r\n            emp.classObject.selected = false;\r\n            this.selectedEmpList.splice(this.selectedEmpList.indexOf(emp), 1);\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n\r\n        addEmployee: function (emp: any) {\r\n            emp.classObject.selected = true;\r\n            this.selectedEmpList.push(emp);\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n\r\n        // external\r\n        // called from parent\r\n        clearSelectedEmployeeList: function () {\r\n            this.selectedEmpList.forEach((emp: any) => {\r\n                emp.classObject.selected = false;\r\n            })\r\n\r\n            this.selectedEmpList = [];\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sched-card-default {\r\n    background: #efefef;\r\n    width: 460px;\r\n\r\n    @media only screen and (max-width: 600px) {\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.aff-table {\r\n    max-height: 600px;\r\n    overflow: auto;\r\n\r\n    table {\r\n        border: 1px solid #e3e3e3;\r\n    }\r\n\r\n    tr {\r\n        cursor: pointer;\r\n    }\r\n\r\n    @media only screen and (max-height: 900px) {\r\n        max-height: 600px;\r\n    }\r\n\r\n    @media only screen and (max-height: 800px) {\r\n        max-height: 500px;\r\n    }\r\n\r\n    @media only screen and (max-height: 700px) {\r\n        max-height: 400px;\r\n    }\r\n\r\n    @media only screen and (max-width: 600px) {\r\n        max-height: 200px;\r\n    }\r\n}\r\n\r\n.emp-selected-table {\r\n    width: 80%;\r\n}\r\n\r\n.v-btn:not(.v-btn--round).v-size--small {\r\n    height: 24px;\r\n}\r\n\r\n.name-text-width {\r\n    display: inline-block;\r\n    width: 200px;\r\n    vertical-align: top;\r\n    @media screen and (max-width: 600px) {\r\n        width: 140px;\r\n    }\r\n}\r\n\r\n.current-schedules-width {\r\n    display: inline-block;\r\n    width: 130px;\r\n}\r\n\r\n.schedule-name {\r\n    width: 130px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n</style>","\r\nimport {emitter} from \"../../main\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport Vue, {defineComponent} from \"vue\";\r\nimport Dialog from '@/components/dialog'\r\n\r\nexport default defineComponent({\r\n    name: \"SearchEmployee\",\r\n    data: function () {\r\n        return {\r\n            // employee list\r\n            searchTerm: '',\r\n            empList: [],\r\n            selectedEmpList: <any>[],\r\n            selectedEmp: null,\r\n            isMobileView: false,\r\n        }\r\n    },\r\n    mounted() {\r\n        if (navigator.userAgent.match(/Android/i)\r\n            || navigator.userAgent.match(/webOS/i)\r\n            || navigator.userAgent.match(/iPhone/i)\r\n            || navigator.userAgent.match(/iPad/i)\r\n            || navigator.userAgent.match(/iPod/i)\r\n            || navigator.userAgent.match(/BlackBerry/i)\r\n            || navigator.userAgent.match(/Windows Phone/i)\r\n        ) {\r\n            console.log('is mobile view true')\r\n            this.isMobileView = true;\r\n        } else {\r\n            this.isMobileView = false;\r\n        }\r\n\r\n        this.getEmployeesList()\r\n    },\r\n    watch: {\r\n        searchTerm: function (newVal, oldVal) {\r\n            if (oldVal != newVal) {\r\n                if (newVal.trim().length == 0) {\r\n                    this.empList.forEach(function (emp: any) {\r\n                        emp.classObject.visible = true;\r\n                        emp.classObject.hidden = false;\r\n                    });\r\n\r\n                } else {\r\n                    var searchTerm = newVal.toLowerCase().trim();\r\n                    this.empList.forEach((emp: any) => {\r\n                        emp.classObject.visible = (emp.EmployeeName && emp.EmployeeName.toLowerCase().indexOf(searchTerm) > -1) || (emp.EmployeeNo && emp.EmployeeNo.toString().indexOf(searchTerm) > -1);\r\n                        emp.classObject.hidden = !emp.classObject.visible;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        getEmployeesList() {\r\n            Dialog.loading()\r\n            Remote.EmployeesList().then(response => {\r\n                response.Data.map((sched: any, index: number) => {\r\n                    sched.classObject = {\r\n                        'visible': true,\r\n                        'hidden': false,\r\n                        'selected': false,\r\n                        'odd': index % 2\r\n                    }\r\n                })\r\n                this.empList = response.Data;\r\n            }).finally(() => {\r\n                Dialog.clear()\r\n            })\r\n\r\n        },\r\n        toggleEmployeeSelect: function (emp: any) {\r\n            if (emp.classObject.selected) {\r\n                this.removeEmployee(emp)\r\n            } else {\r\n                this.addEmployee(emp)\r\n            }\r\n        },\r\n        removeEmployee: function (emp: any) {\r\n            emp.classObject.selected = false;\r\n            this.selectedEmpList.splice(this.selectedEmpList.indexOf(emp), 1);\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n\r\n        addEmployee: function (emp: any) {\r\n            emp.classObject.selected = true;\r\n            this.selectedEmpList.push(emp);\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n\r\n        // external\r\n        // called from parent\r\n        clearSelectedEmployeeList: function () {\r\n            this.selectedEmpList.forEach((emp: any) => {\r\n                emp.classObject.selected = false;\r\n            })\r\n\r\n            this.selectedEmpList = [];\r\n            this.$emit('updateSelectedEmpList', this.selectedEmpList)\r\n        },\r\n    }\r\n})\r\n","import { render } from \"./SearchEmployee.vue?vue&type=template&id=d14d6750&scoped=true\"\nimport script from \"./SearchEmployee.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchEmployee.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchEmployee.vue?vue&type=style&index=0&id=d14d6750&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d14d6750\"\n\nexport default script","\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport {emitter} from \"../../main\";\r\nimport moment, {Moment} from \"moment\";\r\nimport EmployeeSchedule from \"./EmployeeSchedule.vue\";\r\nimport SearchEmployee from \"./SearchEmployee.vue\";\r\nimport Dialog from '@/components/dialog';\r\nimport {defineComponent} from \"vue\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\n\r\nexport default defineComponent({\r\n    name: 'employeeAllocation',\r\n    components: {\r\n        SearchEmployee,\r\n        EmployeeSchedule,\r\n        DatePicker,\r\n    },\r\n    data: function () {\r\n        return {\r\n            bulkEmpList: <any[]>[],\r\n            schedList: <any[]>[],\r\n            hasChanges: false,\r\n\r\n            // select schedule\r\n            cloneSchedList: <any[]>[],\r\n            selectSearchInput: '',\r\n\r\n            // form model\r\n            schedAllocation: {\r\n                WorkschedId: -1,\r\n                DateFrom: <Moment | null>moment(),\r\n                DateTo: <Moment | null>null,\r\n                Comment: '',\r\n                EndExistingScheds: true\r\n            },\r\n\r\n            selectedSchedule: <any>{},\r\n\r\n            // employee-chedule component input data\r\n            selectedEmpForDetail: null,\r\n\r\n            // datePicker\r\n            startDateMenu: false,\r\n            toDateMenu: false,\r\n            startDatePickerValue: <any>'',\r\n            toDatePickerValue: <any>'',\r\n            datePickerTargetDay: <any>null,\r\n            dateType: '',\r\n\r\n            //\r\n            isMobileView: false,\r\n\r\n            //date modal\r\n            dateModalTop: null,\r\n            dateModalLeft: null,\r\n        };\r\n    },\r\n\r\n    // created: function () {\r\n    //\r\n    // },\r\n    mounted: function () {\r\n        this.isMobileView = this.checkIsMobileView()\r\n        // Dialog.loading()\r\n        Remote.StandardSchedules().then(response => {\r\n            this.schedList = response.Data.filter((data: any) => data.Archive === false && data.ScheduleType === 0);\r\n            this.cloneSchedList = this.schedList.slice();\r\n            //  Dialog.clear()\r\n        })\r\n        this.$watch('schedAllocation', (newVal: any, oldVal: any) => {\r\n            if (newVal === oldVal) {\r\n                this.hasChanges = true; //ignore employee list changes.\r\n            }\r\n        }, {deep: true});\r\n    },\r\n    computed: {\r\n        selectedSched() {\r\n            if (this.schedAllocation.WorkschedId === -1) {\r\n                return false;\r\n            }\r\n\r\n            // todo: cant not use this.schedList in return\r\n            let schedList: any = this.schedList;\r\n            return schedList.find((sched: any)=> {\r\n                return sched.Id === this.schedAllocation.WorkschedId\r\n            })\r\n        },\r\n\r\n        capDate: function () {\r\n            if (!this.schedAllocation.DateFrom) {\r\n                return\r\n            }\r\n\r\n            let schedAllocation: any = this.schedAllocation\r\n\r\n            let date = moment(schedAllocation.DateFrom);\r\n            let yesterday = date.subtract(1, 'day')\r\n            return yesterday.format('DD/MM/YYYY');\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        // todo: fix calendar\r\n        // getDay(date) {\r\n        //     const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n        //\r\n        //     let i = new Date(date).getDay(date)\r\n        //     return daysOfWeek[i]\r\n        // },\r\n\r\n        navDownList() {\r\n            console.log('nav down list')\r\n        },\r\n\r\n        updateSearchList(event: any) {\r\n            if (event.key === \"ArrowDown\") {\r\n                (this.$refs.selectDropdownRef as any).focus();\r\n            }\r\n            this.cloneSchedList = this.schedList.filter(o => {\r\n                return o.Name.toLowerCase().indexOf(this.selectSearchInput.toLowerCase()) > -1\r\n            })\r\n        },\r\n\r\n        updateDateText(event: any, target: any) {\r\n            this.startDateMenu = false\r\n            this.toDateMenu = false;\r\n            target.set(moment(event, 'DD/MM/YYYY').toObject())\r\n            // todo: add check for is correct format\r\n            this.datePickerFormattedFromDate();\r\n            this.datePickerFormattedToDate();\r\n        },\r\n\r\n        datePickerFormattedFromDate() {\r\n            this.startDatePickerValue = this.schedAllocation.DateFrom ? moment(this.schedAllocation.DateFrom).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n        datePickerFormattedToDate() {\r\n            this.toDatePickerValue = this.schedAllocation.DateTo ? moment(this.schedAllocation.DateTo).format('YYYY-MM-DD') : undefined; // Date picker objects needs date in this particular format\r\n        },\r\n\r\n        updateEmpList(empList: any) {\r\n            this.bulkEmpList = empList\r\n        },\r\n        startDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.schedAllocation.DateFrom = date;\r\n            this.datePickerFormattedFromDate()\r\n        },\r\n        toDateDatePickerHandler(date: any) {\r\n            if (typeof date === 'string')\r\n                date = moment(date);\r\n            this.schedAllocation.DateTo = date;\r\n            this.datePickerFormattedToDate()\r\n        },\r\n\r\n        removeEmployee: function (emp: any) {\r\n            (this.$refs.SearchEmployeeRef as any).removeEmployee(emp)\r\n        },\r\n\r\n        clearSelectedEmployee: function () {\r\n            if (this.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'There are currently Schedule Allocation changes <br /> Do you want to discard your changes?',\r\n                    onOk: () => {\r\n                        (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n                        this.resetSchedAllocation()\r\n                    }\r\n                })\r\n            } else {\r\n                (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n            }\r\n        },\r\n\r\n        allocateEmployees: function () {\r\n            var warningMsgs = '';\r\n            if (this.selectedSchedule.Id < 1 || !this.selectedSchedule.Id) {\r\n                warningMsgs += '<br />Select a schedule that you want to allocate.';\r\n            }\r\n\r\n            if (this.schedAllocation.DateFrom && this.schedAllocation.DateTo &&\r\n                this.schedAllocation.DateFrom.diff(this.schedAllocation.DateTo) > 0) {\r\n                warningMsgs += '<br />Date To cannot be before Date From.';\r\n            }\r\n\r\n            if (warningMsgs != '') {\r\n                Dialog.alert(warningMsgs)\r\n                // emitter.emit('dialog', {\r\n                //     message: warningMsgs,\r\n                //     showButtons: true,\r\n                //     noClose: false,\r\n                //     showLoader: false\r\n                // });\r\n\r\n                return;\r\n            }\r\n\r\n            var postData = {\r\n                WorkschedId: this.selectedSchedule.Id,\r\n                EmployeeList: <any[]> [],\r\n                DateFrom: moment(this.schedAllocation.DateFrom) ? moment(this.schedAllocation.DateFrom).format('DD/MMM/YYYY') : null,\r\n                DateTo: moment(this.schedAllocation.DateTo) ? moment(this.schedAllocation.DateTo).format('DD/MMM/YYYY') : null,\r\n                Comment: this.schedAllocation.Comment,\r\n                EndExistingScheds: this.schedAllocation.EndExistingScheds\r\n            };\r\n\r\n            if (this.bulkEmpList.length > 0) {\r\n                this.bulkEmpList.forEach((emp: any) => {\r\n                    postData.EmployeeList.push(emp.EmployeeNo);\r\n                });\r\n\r\n            }\r\n\r\n            // todo: did not find this.selectedEmp ??!!\r\n            // else if (this.selectedEmp) {\r\n            //     postData.EmployeeList = [this.selectedEmp.EmployeeNo];\r\n            // }\r\n\r\n            Dialog.loading()\r\n            Remote.AllocateSchedule(postData).then(res => {\r\n                this.hasChanges = false;\r\n                this.resetSchedAllocation();\r\n                Dialog.clear()\r\n                if (this.$refs.EmployeeScheduleRef) {\r\n                    (this.$refs.EmployeeScheduleRef as any).getEmpWorkScheds()\r\n                }\r\n\r\n                // this.getEmpWorkScheds\r\n            })\r\n                .catch(err => {\r\n                    Dialog.alert(err.message)\r\n                    console.error('err', err)\r\n                })\r\n        },\r\n\r\n        closeSchedAllocation: function () {\r\n            if (this.hasChanges) {\r\n                Dialog.checkChange({\r\n                    message: 'You have unsaved changes. Are you sure to discard the changes?',\r\n                    onOk: () => {\r\n                        this.resetSchedAllocation();\r\n                        this.hasChanges = false;\r\n                        (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n                    },\r\n                })\r\n            } else {\r\n                (this.$refs.SearchEmployeeRef as any).clearSelectedEmployeeList();\r\n            }\r\n        },\r\n\r\n        showScheduleDetail: function (employee: any) {\r\n            this.selectedEmpForDetail = employee;\r\n        },\r\n\r\n        resetSelectedEmpForDetail() {\r\n            this.selectedEmpForDetail = null;\r\n        },\r\n\r\n        resetSchedAllocation: function () {\r\n            this.hasChanges = false;\r\n            this.schedAllocation = {\r\n                WorkschedId: -1,\r\n                DateFrom: moment(),\r\n                DateTo: null,\r\n                Comment: '',\r\n                EndExistingScheds: true\r\n            };\r\n        },\r\n\r\n        checkIsMobileView: function () {\r\n            if (navigator.userAgent.match(/Android/i)\r\n                || navigator.userAgent.match(/webOS/i)\r\n                || navigator.userAgent.match(/iPhone/i)\r\n                || navigator.userAgent.match(/iPad/i)\r\n                || navigator.userAgent.match(/iPod/i)\r\n                || navigator.userAgent.match(/BlackBerry/i)\r\n                || navigator.userAgent.match(/Windows Phone/i)\r\n            ) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        chooseSchedule($event: any, option: any) {\r\n            $event.target.blur()\r\n            this.selectedSchedule = option;\r\n            this.selectSearchInput = this.selectedSchedule.Name;\r\n\r\n            let a = $event.target.blur();\r\n\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n            let c = (this.$refs.selectInputRef as any);\r\n            c.blur();\r\n        },\r\n\r\n        updateDateTime($event: any, dateFrom: any, dateType: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n            this.datePickerTargetDay = dateFrom;\r\n            this.dateType = dateType;\r\n            this.openDatePicker()\r\n        },\r\n\r\n        async openDatePicker() {\r\n            // (this.$refs.DatePickerRef as any).toggleShow();\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay));\r\n            if (this.dateType === 'DateTo') {\r\n                this.schedAllocation.DateTo = result\r\n            } else if (this.dateType === 'DateFrom') {\r\n                this.schedAllocation.DateFrom = result\r\n            }\r\n\r\n        },\r\n\r\n        submitForm() {\r\n            //\r\n        }\r\n    },\r\n})\r\n","import { render } from \"./EmployeeAllocation.vue?vue&type=template&id=5fab70c5&scoped=true\"\nimport script from \"./EmployeeAllocation.vue?vue&type=script&lang=ts\"\nexport * from \"./EmployeeAllocation.vue?vue&type=script&lang=ts\"\n\nimport \"./EmployeeAllocation.vue?vue&type=style&index=0&id=5fab70c5&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-5fab70c5\"\n\nexport default script","<template>\r\n    <div class=\"d-flex mt-4 justify-space-between\">\r\n\r\n        <div class=\"ml-2\">\r\n            <flex-schedule-cell-control></flex-schedule-cell-control>\r\n        </div>\r\n        <div class=\"weekDetail d-flex align-center\">\r\n            <span class=\"arrow-height mr-4\" @click=\"getLastWeek\">\r\n                <Icon :icon=\"$icons.chevronLeft\" height=\"30\" :style=\"{ color: '#0000008a' }\" ></Icon>\r\n            </span>\r\n            <span @click=\"chooseCalendarDate\">{{$filters.ordinalSuffix(dayFocus.week())}} Week, {{ dayFocus.format('DD/MM/YYYY') }}</span>\r\n            <span class=\"arrow-height ml-4\" @click=\"getNextWeek\">\r\n                <Icon :icon=\"$icons.chevronRight\" height=\"30\" :style=\"{ color: '#0000008a' }\"></Icon>\r\n            </span>\r\n        </div>\r\n        <div class=\"d-flex align-center status-section\">\r\n\r\n            <div v-if=\"weekStatus === 'published'\">\r\n                <button class=\"blue small copy2 white--text\" @click=\"printFlexSchedule\">Print</button>\r\n            </div>\r\n            <div v-else>\r\n                <div v-if=\"!isAdmin\">\r\n                    <span>\r\n                        <div class=\"custom-select\" tabindex=\"1\" ref=\"selectRef\">\r\n                            <div>\r\n                                 <button class=\"grey small copy2 white--text\"  @click=\"changeDisplayControl\">\r\n                                    <span class=\"inline-block-middle\">Actions</span>\r\n                                    <span class=\"inline-block-middle ml-1\" style=\"height: 15px\">\r\n                                        <Icon :icon=\"$icons.chevronDown\" height=\"15\" :style=\"{ color: '#FFFF' }\"></Icon>\r\n                                    </span>\r\n                                </button>\r\n                            </div>\r\n                            <div class=\"custom-select-items\">\r\n                                <div class=\"action-buttons\">\r\n                                    <button class=\"blue small copy2 white--text\" v-if=\"weekStatus === 'draft'\" @click=\"openDraftDialog\">Copy</button>\r\n                                    <button class=\"blue small copy2 mt-2 white--text\" v-if=\"weekStatus === 'draft' || weekStatus === 'partial'\" @click=\"publishCurrentWeek\">Publish</button>\r\n                                    <button class=\"blue small copy2 mt-2 white--text\" @click=\"openAnalysisChart\">Roster</button>\r\n                                    <button class=\"blue small copy2 mt-2 white--text\" @click=\"printFlexSchedule\">Print</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            <span class=\"copy2 ml-2 text-capitalize\">\r\n                Status: {{getCurrentWeekStatus()}}\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"schedules-data-medium mt-4\" style=\"overflow:auto;\">\r\n        <div class=\"flex-sche-table\">\r\n            <div class=\"table-head\">\r\n                <div class=\"schedule-head-grid\">\r\n                    <div class=\"table-cell\"></div>\r\n                    <div class=\"table-cell\">Std Hours</div>\r\n                    <div class=\"table-cell\">Net Hours</div>\r\n                    <div class=\"table-cell\" v-for=\"weekDay in weekDays\">\r\n                        {{ weekDay.day }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <perfect-scrollbar>\r\n                <div class=\"table-body\">\r\n                    <!--                <div v-for=\"(scheduleArr, value) of scheduleWeek.entries()\">-->\r\n                    <!--                    <div>{{scheduleArr}}</div>-->\r\n                    <!--                    <div>{{value}}</div>-->\r\n                    <!--                </div>-->\r\n                    <div class=\"schedules-arr\" v-for=\"(empNo) in scheduleWeek.keys()\">\r\n                        <div class=\"content-cell content-employee-name\" @click=\"openEmployeeDetail(empNo)\">{{ scheduleWeek.get(empNo).EmployeeName }}</div>\r\n                        <div class=\"content-cell\">{{ scheduleWeek.get(empNo).StdHoursPerWeek?.toFixed(2) }}</div>\r\n                        <div class=\"content-cell\">{{getTotalHour(scheduleWeek.get(empNo).sche)}}</div>\r\n                        <div class=\"content-cell\" v-for=\"scheDay in scheduleWeek.get(empNo).sche\" v-bind:style=\"scheDay.column\">\r\n                            <dynamic-day-cell :scheDay=\"scheDay\" @openEditDialog=\"openEditDialog\"></dynamic-day-cell>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </perfect-scrollbar>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"schedules-data-medium mt-4\">\r\n        <printable-view :scheduleWeek=\"scheduleWeek\" :weekDays=\"weekDays\" ref=\"PrintableViewRef\"></printable-view>\r\n    </div>\r\n<!--    popups -->\r\n    <div>\r\n        <edit-flex-schedule ref=\"EditModalRef\" :isEdit=\"isEditingDialog\" :weekStatus=\"weekStatus\" :modalIndex=\"1999\" @reload=\"reloadAfterEdit\"></edit-flex-schedule>\r\n        <date-picker ref=\"DatePickerRef\" :top=\"datePickerTop\" :left=\"datePickerLeft\"></date-picker>\r\n        <draft-creation-dialog ref=\"DraftCreationDialogRef\" :modalIndex=\"1999\" @reload=\"reloadAfterEdit\"></draft-creation-dialog>\r\n        <extra-emp-detail ref=\"ExtraEmpDetailRef\" :externalDetail=\"externalDetail\"></extra-emp-detail>\r\n        <analysis-chart ref=\"AnalysisChartRef\" :modalIndex=\"1999\"></analysis-chart>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport {ScheduleDay} from \"./schedule-day-mock\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport EditFlexSchedule from \"@/components/FlexSchedule/EditFlexSchedule.vue\";\r\nimport DynamicDayCell from \"@/components/FlexSchedule/DynamicDayCell.vue\"\r\nimport {FlexScheduleMutation} from \"@/store/flexScheduleModule\";\r\nimport FlexScheduleCellControl from \"@/components/FlexSchedule/FlexScheduleCellControl.vue\";\r\nimport TimePicker from \"@/components/common/timePicker/TimePicker.vue\";\r\n\r\nimport {Icon} from '@iconify/vue';\r\nimport AutoComplete from \"@/components/common/AutoComplete.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {LookupActions} from \"@/store/lookupModule\";\r\nimport DraftCreationDialog from \"@/components/FlexSchedule/DraftCreationDialog.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {EmployeeActions, EmployeeGetters, ManagedEmployee} from \"@/store/employeeModule\";\r\nimport {\r\n    CFRemoteData,\r\n    FlexScheduleRequest,\r\n    FlexScheduleRequestCap\r\n} from \"@/components/FlexSchedule/FlexScheduleInterface\";\r\nimport ExtraEmpDetail from \"@/components/FlexSchedule/ExtraEmpDetail.vue\"\r\nimport PrintableView from \"@/components/FlexSchedule/Print/PrintableView.vue\";\r\nimport Chart from 'chart.js/auto';\r\nimport AnalysisChart from \"@/components/FlexSchedule/AnalysisChart.vue\";\r\n\r\ndeclare var Affinity: any\r\n\r\nexport enum WeeklyPublishStatus {\r\n    empty = '',\r\n    draft = 'draft',\r\n    published = 'published',\r\n    partial = 'partial'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"FlexSchedule\",\r\n    components: {\r\n        AnalysisChart,\r\n        PrintableView,\r\n        DraftCreationDialog,\r\n        DatePicker,\r\n        TimePicker,\r\n        EditFlexSchedule,\r\n        DynamicDayCell,\r\n        FlexScheduleCellControl,\r\n        Icon,\r\n        AutoComplete,\r\n        ExtraEmpDetail\r\n    },\r\n    data() {\r\n        return {\r\n            dayFocus: moment(),\r\n            weekDays: <any[]>[], // calendar week days name\r\n            scheduleWeek: <any[]>[], // list of data per week\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n            employeeList: <any>[],\r\n            scheduleWeekMap: new Map(),\r\n            weekStatus: WeeklyPublishStatus.empty,\r\n\r\n            //\r\n            showControl: false,\r\n            extraEmpDetail: [],\r\n            isAdmin: false,\r\n        }\r\n    },\r\n    setup() {\r\n        // const store = useStore()\r\n        // store.dispatch(FlexScheduleAction.loadTargetSchedule,6)\r\n        const DraftCreationDialogRef = ref<InstanceType<typeof DraftCreationDialog>>();\r\n        const EditModalRef = ref<InstanceType<typeof EditFlexSchedule>>();\r\n        const ExtraEmpDetailRef = ref<InstanceType<typeof ExtraEmpDetail>>();\r\n        const PrintableViewRef = ref<InstanceType<typeof PrintableView>>();\r\n        const AnalysisChartRef = ref<InstanceType<typeof AnalysisChart>>();\r\n\r\n        const isEditingDialog = ref(false);\r\n        const externalDetail = ref(<CFRemoteData[]>[])\r\n\r\n        function openDraftDialog() {\r\n            DraftCreationDialogRef.value!.toggleShow()\r\n        }\r\n\r\n        function openAnalysisChart() {\r\n            AnalysisChartRef.value!.toggleShow();\r\n        }\r\n\r\n        function openEditDialog(isEdit: false) {\r\n            isEditingDialog.value = isEdit;\r\n            EditModalRef.value!.openEdit();\r\n        }\r\n\r\n        function openEmployeeDetail(employeeNo: number) {\r\n            Dialog.loading()\r\n            Remote.GetEmployeeExtraDetail(employeeNo).then((res: CFRemoteData[]) => {\r\n                externalDetail.value = res.map((data: CFRemoteData) => {\r\n                    if (data.InputType === 'DateTime') {\r\n                        data.remoteKeyValue = data.KeyValue;\r\n                        data.remoteValue = data.Value;\r\n                        data.KeyValue = moment(data.KeyValue).format('ddd DD MMM YYYY');\r\n                        data.Value = moment(data.Value).format('ddd DD MMM YYYY');\r\n                    } else if (data.InputType === 'Double') {\r\n                        data.remoteKeyValue = data.KeyValue;\r\n                        data.remoteValue = data.Value;\r\n                        data.KeyValue = Math.round(data.KeyValue * 100) / 100;\r\n                        data.Value = Math.round(data.Value * 100) / 100;\r\n                    }\r\n                    return data\r\n                })\r\n                Dialog.clear()\r\n                ExtraEmpDetailRef.value!.toggleShow();\r\n            }, (e) => {\r\n                Dialog.clear()\r\n                Dialog.alert('Something went wrong')\r\n            })\r\n        }\r\n\r\n        function printFlexSchedule() {\r\n            PrintableViewRef.value!.printFlexSchedule();\r\n        }\r\n\r\n        return {openDraftDialog, openEditDialog, openEmployeeDetail, openAnalysisChart, printFlexSchedule,\r\n            DraftCreationDialogRef, EditModalRef, ExtraEmpDetailRef, PrintableViewRef, AnalysisChartRef,\r\n            isEditingDialog, externalDetail}\r\n    },\r\n    async mounted() {\r\n        this.$store.dispatch(LookupActions.getPositions, Affinity.user.EmployeeNo)\r\n        this.$store.dispatch(LookupActions.getShifts)\r\n        this.$store.dispatch(LookupActions.getCostElement)\r\n        this.$store.dispatch(LookupActions.getWorkTypes)\r\n\r\n        let weekStart = this.dayFocus.clone().startOf('week')\r\n        let weekEnd = this.dayFocus.clone().endOf('week')\r\n        this.loadDate(weekStart, weekEnd)\r\n\r\n        Remote.GetDefaultWorkTypes()\r\n        .then(res => {\r\n            // note default worktypes is a array\r\n            this.$store.state.FlexSchedule.defaultWorkTypes = res;\r\n        })\r\n\r\n        if (Affinity.user.EmployeeNo >= 5000000) {\r\n            this.isAdmin = true;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        reloadAfterEdit() {\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            this.loadDate(weekStart, weekEnd)\r\n        },\r\n\r\n        getCurrentWeekStatus() {\r\n            if (this.weekStatus === WeeklyPublishStatus.empty || this.weekStatus === WeeklyPublishStatus.draft) {\r\n                return 'Draft'\r\n            } else if (this.weekStatus === WeeklyPublishStatus.partial) {\r\n                return 'Partially Published'\r\n            } else if (this.weekStatus === WeeklyPublishStatus.published) {\r\n                return 'Published'\r\n            }\r\n\r\n            return this.weekStatus\r\n        },\r\n\r\n        async loadDate(weekStart: Moment, weekEnd: Moment) {\r\n            this.weekStatus = WeeklyPublishStatus.empty;\r\n            this.showControl = false;\r\n\r\n            let param = {\r\n                managerEmployeeNo: Affinity.user.EmployeeNo,\r\n                dateFrom: weekStart.format('YYYY-MM-DD'),\r\n                // dateFrom: '2020-01-01',\r\n                dateTo: weekEnd.format('YYYY-MM-DD'),\r\n                // dateTo: '2021-01-01',\r\n            }\r\n\r\n            Dialog.loading()\r\n            let [dateData, leaves, employeeList] = await Promise.all([\r\n                this.getDateData(weekStart, weekEnd),\r\n                Remote.GetManagedLeaves(param),\r\n                this.$store.dispatch(EmployeeActions.getEmployees, Affinity.user.EmployeeNo).then((res: any) => {\r\n                    return res.map((data: any) => {\r\n                        return {\r\n                            EmployeeName: data.commonName,\r\n                            EmployeeNo: data.employeeNo,\r\n                            StdHoursPerWeek: data.stdHoursPerWeek,\r\n                            PositionCode: data.positionCode\r\n                        }\r\n                    })\r\n                })\r\n            ]);\r\n            Dialog.clear()\r\n\r\n            for (let employee of employeeList) {\r\n                this.scheduleWeekMap.set(employee.EmployeeNo, employee)\r\n            }\r\n\r\n            let flexSchedulesDateData: any = dateData.flexSchedules;\r\n            for (let sche of flexSchedulesDateData) {\r\n                if (this.scheduleWeekMap.get(sche.EmployeeNo) && !this.scheduleWeekMap.get(sche.EmployeeNo).sche) {\r\n                    this.scheduleWeekMap.get(sche.EmployeeNo).sche = [sche]\r\n                } else if (this.scheduleWeekMap.get(sche.EmployeeNo)) {\r\n                    this.scheduleWeekMap.get(sche.EmployeeNo).sche.push(sche)\r\n                }\r\n            }\r\n\r\n            let newWeek = {\r\n                weekStart: weekStart,\r\n                weekEnd: weekEnd,\r\n                scheduleWeek: this.scheduleWeekMap\r\n            }\r\n\r\n            this.$store.state.FlexSchedule.calendarFocusDate = this.dayFocus;\r\n\r\n            this.getNewWeek(newWeek);\r\n\r\n            for (let leave of leaves) {\r\n                for (let leaveUnit of leave.leaveUnits) {\r\n                    let dateDiff = moment(leaveUnit.leaveDate).diff(weekStart, 'days')\r\n\r\n                    leaveUnit.calcUnit = leave.calcUnit;\r\n                    leaveUnit.leaveCode = leave.leaveCode;\r\n                    leaveUnit.leaveName = leave.leaveName;\r\n                    if (this.scheduleWeekMap.get(leave.employeeNo)?.sche[dateDiff]) {\r\n                        this.scheduleWeekMap.get(leave.employeeNo).sche[dateDiff].leaveUnit = leaveUnit\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            for (let unAva of dateData.unAvailabilities) {\r\n                let weeklyDay = moment(unAva.unavailabilityDate).day()\r\n                if (this.scheduleWeekMap.get(unAva.employeeNo)) {\r\n                    this.scheduleWeekMap.get(unAva.employeeNo).sche[weeklyDay].unAvailability = unAva\r\n                }\r\n\r\n            }\r\n\r\n            this.checkStatus(this.scheduleWeekMap)\r\n        },\r\n\r\n        checkStatus(scheduleWeekMap: any) {\r\n            let statusSet = new Set()\r\n\r\n            for (const value of scheduleWeekMap.values()) {\r\n                for (const sche of value.sche) {\r\n                    if (!sche.PublishStatus) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.empty)) statusSet.add(WeeklyPublishStatus.empty)\r\n                    } else if (sche.PublishStatus === WeeklyPublishStatus.draft) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.draft)) statusSet.add(WeeklyPublishStatus.draft)\r\n                    } else if (sche.PublishStatus === WeeklyPublishStatus.published) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.published)) statusSet.add(WeeklyPublishStatus.published)\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if no published show draft\r\n            if (!statusSet.has(WeeklyPublishStatus.published)) {\r\n                this.weekStatus = WeeklyPublishStatus.draft\r\n            } else {\r\n                // if has publish\r\n                // and has draft or empty show partial\r\n                if ((statusSet.has(WeeklyPublishStatus.draft)) || (statusSet.has(WeeklyPublishStatus.empty))) {\r\n                    this.weekStatus = WeeklyPublishStatus.partial\r\n                } else { // if has publish but no draft or empty show published\r\n                    this.weekStatus = WeeklyPublishStatus.published\r\n                }\r\n            }\r\n        },\r\n\r\n        async chooseCalendarDate($event: any) {\r\n            // console.log('event', $event)\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n            let datePickerResult;\r\n            try {\r\n                datePickerResult = await (this.$refs.DatePickerRef as any).toggleShow(this.dayFocus);\r\n            } catch (e) {\r\n                return\r\n            }\r\n            this.selectDate(datePickerResult)\r\n        },\r\n\r\n        async selectDate(date: Moment) {\r\n            this.dayFocus = date;\r\n            this.$store.state.FlexSchedule.calendarFocusDate = date\r\n            let weekStart = date.clone().startOf('week')\r\n            let weekEnd = date.clone().endOf('week')\r\n            // return this.getDateData(weekStart, weekEnd)\r\n            // this.getNewWeek(date)\r\n            await this.loadDate(weekStart, weekEnd)\r\n\r\n        },\r\n        getSelectedWeek(selectedDate: any) {\r\n            var weekStart = selectedDate.clone().startOf('week');\r\n            var weekEnd = selectedDate.clone().endOf('week');\r\n\r\n            this.weekDays = [];\r\n\r\n            for (let i = 0; i <= 6; i++) {\r\n                let momentDay = moment(weekStart).add(i, 'days')\r\n                this.weekDays.push({\r\n                    momentDay: momentDay,\r\n                    day: momentDay.format(\"ddd, MMM Do\")\r\n                })\r\n            }\r\n        },\r\n        async getDateData(startDate?: Moment, endDate?: Moment): Promise<FlexScheduleRequest> {\r\n            let param = {}\r\n            if (startDate && endDate) {\r\n                param = {\r\n                    employeeNo: Affinity.user.EmployeeNo,\r\n                    startDate: startDate.format('YYYY-MM-DD'),\r\n                    endDate: endDate.format('YYYY-MM-DD'),\r\n                    forManagedEmployees: true,\r\n                }\r\n            }\r\n\r\n            return Remote.GetFlexSchedules(param).then((res: any) => {\r\n                // console.log('res', res)\r\n                return this.reformatData(res)\r\n\r\n            })\r\n        },\r\n        scheDaysToColumn() {\r\n            // let scheduleWeekList = getScheduleWeek(12)\r\n\r\n            for (let scheduleArr of this.scheduleWeek.values()) {\r\n                let employeeName = scheduleArr.EmployeeName\r\n                let employeeNo = scheduleArr.EmployeeNo\r\n                for (let i = 0; i <= 6; i++) {\r\n\r\n                    let findResult\r\n\r\n                    if (scheduleArr.sche) {\r\n                        findResult = scheduleArr.sche.find((day: any) => {\r\n                            return day.dayInWeek === i;\r\n                        })\r\n                    } else {\r\n                        scheduleArr.sche = []\r\n                    }\r\n\r\n                    if (!findResult) {\r\n                        // if first day in array and that employee do not have flex schedule ([0].dayInWeek == undefined)\r\n                        if (i === 0 && (!scheduleArr.sche[0]\r\n                                        || (scheduleArr.sche[0].dayInWeek === null\r\n                                            || scheduleArr.sche[0].dayInWeek === undefined ))) {\r\n                            scheduleArr.sche[0] = {}\r\n                            scheduleArr.sche[0].dayInWeek = 0;\r\n                            scheduleArr.sche[0].employeeName = employeeName;\r\n                            scheduleArr.sche[0].employeeNo = employeeNo;\r\n                        } else {\r\n                            scheduleArr.sche.push({\r\n                                dayInWeek: i,\r\n                                employeeName: employeeName,\r\n                                employeeNo: employeeNo\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n\r\n                scheduleArr.sche.sort((a: any, b: any) => a.dayInWeek - b.dayInWeek)\r\n                for (let day of scheduleArr.sche) {\r\n                    day.column = `grid-column-start: ${day.dayInWeek + 4}`;\r\n                    day.editing = false;\r\n                }\r\n            }\r\n        },\r\n        getLastWeek() {\r\n            this.dayFocus.subtract(7, 'days')\r\n\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n\r\n            this.loadDate(weekStart, weekEnd)\r\n\r\n            // this.getNewWeek()\r\n        },\r\n        getNextWeek() {\r\n            this.dayFocus.add(7, 'days')\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            this.loadDate(weekStart, weekEnd)\r\n            // this.getNewWeek()\r\n        },\r\n\r\n        getNewWeek(newWeek?: any) {\r\n            let newWeekData = newWeek;\r\n            this.getSelectedWeek(newWeekData!.weekStart)\r\n            this.scheduleWeek = this.$store.state.FlexSchedule.scheduleWeek = newWeekData!.scheduleWeek\r\n            this.scheDaysToColumn();\r\n        },\r\n        moreDetail(day: ScheduleDay) {\r\n            this.$store.commit(FlexScheduleMutation.setScheduleDay, day)\r\n        },\r\n\r\n        getTotalHour(sche: ScheduleDay[]) {\r\n            let totalHours = 0;\r\n            for (let day of sche) {\r\n                if (day.hours) {\r\n                    totalHours += day.hours\r\n                }\r\n            }\r\n            return totalHours.toFixed(2)\r\n        },\r\n\r\n        confirmEdit(day: any) {\r\n            day.editing = false;\r\n        },\r\n\r\n        cancelEdit(day: any) {\r\n\r\n        },\r\n\r\n        editScheDay(day: any) {\r\n            day.editing = true\r\n        },\r\n\r\n        reformatData(res: FlexScheduleRequestCap): FlexScheduleRequest {\r\n            // // filter 0 hours schedule (this is created when user publish a week and left cell blank)\r\n            // let flexScheduleRemoteData = res.FlexSchedules.filter((data: any) => {\r\n            //     return data.StartTime !== '0001-01-01T00:00:00'\r\n            //             && data.EndTime !== '0001-01-01T00:00:00'\r\n            //             && data.Hours !== 0\r\n            // })\r\n            let flexScheduleRemoteData = res.FlexSchedules;\r\n\r\n            flexScheduleRemoteData.forEach((obj: any) => {\r\n                obj.id = obj.Id;\r\n                obj.date = obj.Date;\r\n                obj.employeeName = obj.EmployeeName;\r\n                obj.employeeNo = obj.EmployeeNo;\r\n                obj.startTime = obj.StartTime ? moment(obj.StartTime).format('HH:mm') : '00:00'\r\n                obj.endTime = obj.EndTime ? moment(obj.EndTime).format('HH:mm') : '00:00'\r\n                obj.hours = obj.Hours\r\n                obj.scheduleDetail = obj.ScheduleData\r\n                obj.scheduleDetail.breakLength = obj.scheduleDetail.BreakLength;\r\n                obj.scheduleDetail.position = obj.scheduleDetail.Position;\r\n                obj.scheduleDetail.positionTitle = obj.scheduleDetail.PositionTitle;\r\n                obj.scheduleDetail.shiftId = obj.scheduleDetail.ShiftId;\r\n                obj.scheduleDetail.costElement1 = obj.scheduleDetail.CostElement1;\r\n                obj.scheduleDetail.costElement2 = obj.scheduleDetail.CostElement2;\r\n                obj.dayInWeek = moment(obj.Date).day()\r\n            })\r\n\r\n            let unAvailabilitiesData = res.Unavailabilities.map((obj: any) => {\r\n                return {\r\n                    id: obj.EmpAvailability.Id,\r\n                    unavailabilityDate: obj.UnavailabilityDate,\r\n                    employeeNo: obj.EmpAvailability.EmployeeNo,\r\n                    startTime: obj.EmpAvailability.StartTime,\r\n                    endTime: obj.EmpAvailability.EndTime,\r\n                    reason: obj.EmpAvailability.Reason\r\n                }\r\n            })\r\n\r\n            let flexScheduleRequest = {\r\n                flexSchedules: flexScheduleRemoteData,\r\n                unAvailabilities: unAvailabilitiesData\r\n            }\r\n            return flexScheduleRequest;\r\n        },\r\n\r\n        publishCurrentWeek() {\r\n            let groupedSche: any[] = [];\r\n\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            let employees = this.$store.getters[EmployeeGetters.getEmployees].map((e: ManagedEmployee) => e.employeeNo)\r\n\r\n            console.log('employees', employees)\r\n\r\n            for (const [key, employeeData] of this.scheduleWeekMap.entries()) {\r\n                let scheWithData = employeeData.sche.filter((sche: any) => {\r\n                    return !!sche.Id\r\n                })\r\n\r\n                groupedSche = groupedSche.concat(scheWithData)\r\n            }\r\n\r\n            let data = {\r\n                EmployeeNumbers: employees,\r\n                DateFrom: weekStart.format('YYYY-MM-DD'),\r\n                DateTo: weekEnd.format('YYYY-MM-DD'),\r\n                PublishItems: groupedSche.filter(sche => {\r\n                    return sche.PublishStatus === \"draft\"\r\n                }).map(sche => {\r\n                    return {\r\n                        Id: sche.id,\r\n                        PublishStatus: \"published\"\r\n                    }\r\n                })\r\n            }\r\n\r\n            Dialog.confirmOrCancel({\r\n                message: `Are you sure you want to publish the schedule for week ${this.dayFocus.week()} ?`,\r\n                confirmButtonText: 'Yes'\r\n            }).then(() => {\r\n                Dialog.loading()\r\n                Remote.PublishFlexSchedule(data)\r\n                .then(() => {\r\n                    this.reloadAfterEdit()\r\n                    Dialog.clear()\r\n                }, (e: any) => {\r\n                    console.error(e);\r\n                    Dialog.alert('Something went wrong.')\r\n                })\r\n            })\r\n        },\r\n\r\n        changeDisplayControl() {\r\n            this.showControl = !this.showControl\r\n        }\r\n\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n$aff-blue: #00AEEF;\r\n$aff-dark-blue: #1268B3;\r\n$border-color: #cbcbcb;\r\n.schedule-head-grid {\r\n    display: grid;\r\n    width: 100%;\r\n    //grid-template-columns: 12% 12% 12% 12% 12% 12% 12% 12%;\r\n    grid-template-columns: 8% 90px 90px repeat(7, 1fr);\r\n    grid-gap: 1px;\r\n    height: 23px;\r\n    background: $border-color;\r\n}\r\n\r\n.weekDetail {\r\n    font-size: 16px;\r\n    .arrow-height {\r\n        height: 30px;\r\n        margin-top: 1px;\r\n        cursor: pointer;\r\n    }\r\n\r\n}\r\n\r\n.table-body {\r\n    display: grid;\r\n    //grid-template-rows: repeat(auto-fill, 60px);\r\n    //grid-template-rows: min-content;\r\n    grid-gap: 1px;\r\n}\r\n\r\n.table-cell {\r\n    padding: 3px 5px 3px 5px;\r\n    //background-color: white;\r\n    background: linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%);\r\n    //border: 1px solid #cbcbcb\r\n    text-align: center;\r\n}\r\n\r\n.schedules-arr {\r\n    display: grid;\r\n    width: 100%;\r\n    grid-template-columns: 8% 90px 90px repeat(7, 1fr);\r\n    //grid-template-rows: min-content;\r\n    //grid-template-rows: repeat(auto-fit, 60px);\r\n    grid-gap: 1px;\r\n\r\n}\r\n\r\n.flex-sche-table {\r\n    border: 1px solid $border-color;\r\n    font-size: 14px;\r\n    border-collapse: collapse;\r\n    background: $border-color;\r\n}\r\n\r\n.content-cell {\r\n    display: grid;\r\n    justify-items: center;\r\n    align-items: center;\r\n    background: white;\r\n    text-align: center;\r\n    min-height: 60px;\r\n}\r\n\r\n\r\n.table-head {\r\n    //background: linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%);\r\n    //padding: 3px 5px 3px 5px;\r\n    height: 23px;\r\n}\r\n\r\n.ps {\r\n     max-height: calc(100vh - 270px);\r\n     overflow: auto;\r\n}\r\n\r\n.status-section {\r\n    position: relative;\r\n}\r\n\r\n.show-control-options {\r\n    position: absolute;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 5px;\r\n    margin-top: 5px;\r\n    background: white;\r\n    z-index: 1;\r\n\r\n}\r\n\r\n.inline-block-middle {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n}\r\n\r\n.action-buttons {\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 5px 10px;\r\n}\r\n\r\n.content-employee-name {\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: $aff-blue;\r\n        color: white;\r\n    }\r\n}\r\n</style>","<!--dialog for bring up full feature of single flex schedule day to edit-->\r\n\r\n<template>\r\n    <Modal ref=\"ModalRef\">\r\n        <template v-slot:header>\r\n            <div>\r\n                <h2 class=\"bold\">\r\n                    <span v-if=\"isEdit\">Edit Schedule</span>\r\n                    <span v-else>\r\n                        <span v-if=\"weekStatus==='published'\">Create Schedule</span>\r\n                        <span v-else>Create Schedule</span>\r\n                    </span>\r\n                </h2>\r\n            </div>\r\n        </template>\r\n        <template v-slot:body>\r\n            <div>\r\n                <div class=\"edit-form mt-4 copy2\">\r\n                    <label>Date</label> <span>{{dialogDate}}</span>\r\n                    <label>Employee Name</label> <span>{{employeeDetail.employeeName}}</span>\r\n                    <label>Employee No</label> <span>{{employeeDetail.employeeNo}}</span>\r\n                    <label>Position</label>\r\n                    <div>\r\n                        <span v-if=\"positionOptions && positionOptions.length === 1\">{{positionOptions[0].positionTitle}}</span>\r\n                        <custom-select v-else-if=\"positionOptions && positionOptions.length > 1\"\r\n                                       :options=\"positionOptions\"\r\n                                       :displayKey=\"'positionTitle'\"\r\n                                       :selected=\"selectedPosition\"\r\n                                       @selectOption=\"selectPositionCustom\">\r\n\r\n                        </custom-select>\r\n                        <input v-else v-model=\"day.position\">\r\n                    </div>\r\n                    <div class=\"mt-4\"></div> <div></div>\r\n                    <label>Start Time</label><input v-model=\"day.startTime\" @change=\"updateStartTime(day)\">\r\n                    <label>Finish Time</label><input v-model=\"day.endTime\" @change=\"updateEndTime(day)\">\r\n\r\n                    <span class=\"two-column orange\" v-if=\"showUnAvaError\">Note: This schedule's time overlaps with this person's unavailability time.</span>\r\n\r\n                    <div class=\"mt-4\"></div>\r\n                    <div></div>\r\n                    <label>Break Length</label><input v-model.lazy=\"fixedBreakLength\" @change=\"calcNetHour\">\r\n                    <label>Net Hours</label><input v-model.lazy=\"fixedHours\">\r\n                    <label>Shift ID</label>\r\n                    <div>\r\n                        <custom-select v-if=\"shiftOptions && shiftOptions.length > 0\"\r\n                                       :options=\"shiftOptions\"\r\n                                       :displayKey=\"'description'\"\r\n                                       :selected=\"selectedShift\"\r\n                                       @selectOption=\"selectShift\">\r\n                        </custom-select>\r\n                    </div>\r\n\r\n\r\n<!--                    <label>CostElement 1</label>-->\r\n<!--                    <div>-->\r\n<!--                        <custom-select v-if=\"costElementOptions && costElementOptions.length > 0\"-->\r\n<!--                                       :options=\"costElementOptions\"-->\r\n<!--                                       :displayKey=\"'description'\"-->\r\n<!--                                       :selected=\"selectedCostElement1\"-->\r\n<!--                                       @selectOption=\"selectCostElement1\">-->\r\n\r\n<!--                        </custom-select>-->\r\n<!--                    </div>-->\r\n\r\n<!--                    <label>CostElement 2</label>-->\r\n<!--                    <div>-->\r\n<!--                        <custom-select v-if=\"costElementOptions && costElementOptions.length > 0\"-->\r\n<!--                                       :options=\"costElementOptions\"-->\r\n<!--                                       :displayKey=\"'description'\"-->\r\n<!--                                       :selected=\"selectedCostElement2\"-->\r\n<!--                                       @selectOption=\"selectCostElement2\">-->\r\n\r\n<!--                        </custom-select>-->\r\n<!--                    </div>-->\r\n\r\n<!--                    <label>Cost Element 1</label><input v-model=\"day.costElement1\">-->\r\n<!--                    <label>Cost Element 2</label><input v-model=\"day.costElement2\">-->\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-slot:footer>\r\n            <div class=\"mt-4 full-width d-flex justify-space-between\">\r\n                <div></div>\r\n<!--                <button class=\"grey normal copy2 white&#45;&#45;text\">Clear</button>-->\r\n                <div>\r\n                    <button v-if=\"isEdit\" class=\"blue normal copy2\" @click=\"updateSche()\"><span class=\"white\">Save</span></button>\r\n                    <button v-if=\"isEdit\" class=\"grey normal copy2 ml-2\" @click=\"confirmIfDeleteSche()\"><span class=\"white\">Delete</span></button>\r\n                    <button v-if=\"!isEdit\" class=\"blue normal copy2\" @click=\"createSche()\"><span class=\"white\">Create</span></button>\r\n\r\n                    <button class=\"ml-2 normal orange copy2\" @click=\"cancel()\"><span class=\"white\">Cancel</span></button>\r\n                </div>\r\n\r\n            </div>\r\n        </template>\r\n    </Modal>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {useStore} from \"vuex\";\r\nimport {computed, defineComponent} from \"vue\";\r\nimport {FlexScheduleDay, FlexScheduleMutation, UnAvailability} from \"@/store/flexScheduleModule\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n// import {key} from \"@/store\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {CostElement, EMPPosition, ShiftType} from \"@/store/lookupModule\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\nimport {WeeklyPublishStatus} from \"@/components/FlexSchedule/FlexSchedule.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport moment from \"moment\";\r\n\r\nexport default defineComponent({\r\n    name: \"EditFlexSchedule\",\r\n    components: {\r\n        Modal,\r\n        CustomSelect\r\n    },\r\n    props: {\r\n        isEdit: {\r\n            type: Boolean\r\n        },\r\n        weekStatus: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            flexScheduleDay: {},\r\n            unAvailability: <UnAvailability | null> null,\r\n            selectedPosition: <EMPPosition>{},\r\n            selectedShift: <ShiftType>{},\r\n            selectedCostElement1: <CostElement>{},\r\n            selectedCostElement2: <CostElement>{},\r\n            day: <FlexScheduleDay>{},\r\n            employeeDetail: <any>{},\r\n            dialogDate: <string>\"\",\r\n            showUnAvaError: false,\r\n        }\r\n    },\r\n    setup() {\r\n        // console.log('setup');\r\n        const store = useStore()\r\n        // const flexScheduleModule = getModule\r\n        // const state = reactive({\r\n        //   day: computed(() => store.state.flexSchedule.flexScheduleDay),\r\n        // });\r\n        //\r\n        // console.log('state', state)\r\n        // return {state}\r\n        return {\r\n            // day: computed(() => {\r\n            //     console.log('test', store.state)\r\n            //     return store.state.FlexSchedule.flexScheduleDay\r\n            // }),\r\n\r\n            shiftOptions: computed(() => {\r\n                let blankOption = {shiftType: \"\", description: \"\", isDefault: null, archive: \"F\"}\r\n                let shiftOption = store.state.LookUp.shifts.slice()\r\n                shiftOption.unshift(blankOption)\r\n                return shiftOption\r\n                // return store.state.LookUp.shifts\r\n            }),\r\n            costElementOptions: computed(() => {\r\n                return store.state.LookUp.costElements\r\n            }),\r\n        }\r\n    },\r\n    computed: {\r\n        positionOptions(): any {\r\n            let options = this.$store.state.LookUp.positions;\r\n            if (options.length === 1) {\r\n                (this as any).selectedPosition = options[0];\r\n            }\r\n            return options\r\n        },\r\n        fixedHours: {\r\n            get(): string {\r\n                return this.day.hours ? this.day.hours.toFixed(2) : ''\r\n            },\r\n            set(fixedHours: string) {\r\n                this.day.hours = Number(fixedHours)\r\n            }\r\n        },\r\n        fixedBreakLength: {\r\n            get (): string {\r\n                return  this.day.breakLength ? this.day.breakLength.toFixed(2) : ''\r\n            },\r\n            set (breakLengthString: string) {\r\n                this.day.breakLength = Number(breakLengthString)\r\n            }\r\n        }\r\n    },\r\n    // computed: mapState([\r\n    //   // map this.count to store.state.count\r\n    //   'flexSchedule/startTime'\r\n    // ]),\r\n    mounted() {\r\n        // let startTime = this.$store.state.FlexScheduleModule.startTime;\r\n        let startTime = this.$store;\r\n        this.day = this.$store.state.FlexSchedule.flexScheduleDay\r\n    },\r\n\r\n    // computed: {\r\n    //   ...mapState({\r\n    //     day: (state: State) => state.flexSchedule.flexScheduleDay\r\n    //   }),\r\n    // },\r\n\r\n    methods: {\r\n        selectCostElement1(costElement1: any) {\r\n            this.selectedCostElement1 = costElement1;\r\n        },\r\n        selectCostElement2(costElement2: any) {\r\n            this.selectedCostElement2 = costElement2;\r\n        },\r\n        selectShift(shift: any) {\r\n            this.selectedShift = shift;\r\n        },\r\n        selectPositionCustom(position: any) {\r\n            this.selectedPosition = position\r\n        },\r\n\r\n        selectPosition($event: any, position: EMPPosition) {\r\n            this.selectedPosition = position\r\n            $event.target.blur()\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n        },\r\n\r\n        updateStartTime(day: FlexScheduleDay) {\r\n            if (!day.startTime) {\r\n                return\r\n            }\r\n\r\n            let startTime;\r\n            if (day.startTime.includes(':')) {\r\n                startTime = moment(day.startTime, 'HH:mm')\r\n            } else {\r\n                startTime = moment(day.startTime, 'Hmm')\r\n            }\r\n\r\n            if (startTime.isValid()) {\r\n                day.startTime = startTime.format(\"HH:mm\")\r\n                this.calcNetHour()\r\n            } else {\r\n                // todo: display this in error message\r\n                day.startTime = 'Invalid Time'\r\n            }\r\n        },\r\n\r\n        updateEndTime(day: FlexScheduleDay) {\r\n            if (!day.endTime) {\r\n                return\r\n            }\r\n\r\n            let endTime;\r\n            if (day.endTime.includes(':')) {\r\n                endTime = moment(day.endTime, 'HH:mm')\r\n            } else {\r\n                endTime = moment(day.endTime, 'Hmm')\r\n            }\r\n\r\n            if (endTime.isValid()) {\r\n                day.endTime = endTime.format(\"HH:mm\")\r\n                this.calcNetHour()\r\n            } else {\r\n                // todo: display this in error message\r\n                day.endTime = 'Invalid Time'\r\n            }\r\n        },\r\n\r\n        calcNetHour() {\r\n            if (this.day.startTime === 'Invalid Time' || this.day.endTime === 'Invalid Time') {\r\n                // Invalid time in form, do not calculate\r\n                return;\r\n            }\r\n\r\n            if (!this.day.startTime || !this.day.endTime) {\r\n                // Missing value, do not calculate\r\n                return;\r\n            }\r\n\r\n            let startTime = moment(this.day.startTime, 'H:mm')\r\n            let endTime = moment(this.day.endTime, 'H:mm')\r\n\r\n            let startEndDiffTrue = endTime.diff(startTime, 'hours', true);\r\n\r\n            // if endTime is before startTime, indicate user input a next day value.\r\n            // add one day and then calculate again for net hour\r\n            // this case count as start day's schedule (not two schedule)\r\n            if (startEndDiffTrue <= 0) {\r\n                startEndDiffTrue = endTime.add(1, 'day').diff(startTime, 'hours', true);\r\n            }\r\n\r\n            let startEndDiff = Math.round(startEndDiffTrue * 100) / 100;\r\n\r\n            if (this.day.breakLength) {\r\n                this.day.hours = startEndDiff - this.day.breakLength\r\n            } else {\r\n                this.day.hours = startEndDiff\r\n            }\r\n\r\n            this.checkUnavailability()\r\n        },\r\n\r\n        checkUnavailability() {\r\n            this.showUnAvaError = false;\r\n\r\n            if (!this.day.startTime || !this.day.endTime) {\r\n                return\r\n            }\r\n\r\n            if (!this.unAvailability || !this.unAvailability.endTime || !this.unAvailability.startTime) {\r\n                return;\r\n            }\r\n\r\n            const startTime = moment(this.day.startTime, \"HH:mm\")\r\n            const endTime = moment(this.day.endTime, \"HH:mm\")\r\n            const unAvaStartTime = moment(this.unAvailability.startTime, \"HH:mm\")\r\n            const unAvaEndTime = moment(this.unAvailability.endTime, \"HH:mm\")\r\n\r\n            // Fine time overlap\r\n            // (StartA <= EndB) and (EndA >= StartB)\r\n            if (startTime <= unAvaEndTime && endTime >= unAvaStartTime) {\r\n                console.log('show error')\r\n                this.showUnAvaError = true\r\n            }\r\n        },\r\n\r\n        clearForm() {\r\n            this.$store.commit(FlexScheduleMutation.clearForm)\r\n        },\r\n\r\n        cancel() {\r\n            this.$store.commit(FlexScheduleMutation.clearForm)\r\n            this.toggleShow();\r\n        },\r\n\r\n        updateSche() {\r\n            Dialog.loading()\r\n            let putData = {\r\n                Id: this.$store.state.FlexSchedule.selectedFlexDay.id,\r\n                EmployeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,\r\n                Date: this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('MM/DD/YYYY'),\r\n                StartTime: this.day.startTime,\r\n                EndTime: this.day.endTime,\r\n                Hours: this.day.hours,\r\n                PublishStatus: this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus ? this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus : 'draft',\r\n                ScheduleData: {\r\n                    ShiftId: this.selectedShift.shiftType,\r\n                    BreakLength: this.day.breakLength,\r\n                    Position : this.selectedPosition.positionCode,\r\n                    CostElement1: this.selectedCostElement1 ? this.selectedCostElement1.id : undefined,\r\n                    CostElement2: this.selectedCostElement1 ? this.selectedCostElement2.id : undefined\r\n                }\r\n            }\r\n\r\n            // console.log('selectedFlexDay', this.$store.state.FlexSchedule.selectedFlexDay)\r\n\r\n            // Remote.UpdateFlexSchedule(this.$store.state.FlexSchedule.selectedFlexDay.id, putData).then(res => {\r\n            Remote.PatchFlexSchedule([putData]).then(res => {\r\n                //todo what happen after update\r\n                // if (res === \"OK\") {\r\n                //     console.log('res', res)\r\n                    this.$emit('reload')\r\n                    Dialog.clear()\r\n\r\n                // } else {\r\n                //     Dialog.clear()\r\n                //     Dialog.alert('Something went wrong. Update Schedule failed')\r\n                // }\r\n            }, () => {\r\n                Dialog.clear()\r\n                Dialog.alert('Something went wrong. Update Schedule failed')\r\n            })\r\n\r\n            // console.log('form', this.$store.state.FlexSchedule.flexScheduleDay)\r\n            this.$store.commit(FlexScheduleMutation.saveScheduleDayToWeek)\r\n            this.toggleShow();\r\n        },\r\n\r\n        createSche() {\r\n            Dialog.loading();\r\n            let postData = [{\r\n                EmployeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,\r\n                Date: this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('MM/DD/YYYY'),\r\n                StartTime: this.day.startTime,\r\n                EndTime: this.day.endTime,\r\n                Hours: this.day.hours,\r\n                PublishStatus: this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus ? this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus : 'draft',\r\n                ScheduleData: {\r\n                    ShiftId: this.selectedShift.shiftType ? this.selectedShift.shiftType : '',\r\n                    BreakLength: this.day.breakLength,\r\n                    Position : this.selectedPosition.positionCode,\r\n                    CostElement1: this.selectedCostElement1 ? this.selectedCostElement1.id : '',\r\n                    CostElement2: this.selectedCostElement2 ? this.selectedCostElement2.id : ''\r\n                }\r\n            }]\r\n            //\r\n            Remote.CreateFlexSchedule(postData).then(res => {\r\n                //todo what happen after create\r\n                // console.log('create res', res)\r\n                // if (res === \"Ok\") {\r\n                this.$store.commit(FlexScheduleMutation.saveScheduleDayToWeek)\r\n                Dialog.clear();\r\n                this.toggleShow();\r\n                this.$emit('reload')\r\n            }, (err) => {\r\n                Dialog.clear();\r\n                Dialog.alert('Something went wrong. Create Schedule failed')\r\n\r\n            })\r\n        },\r\n\r\n        confirmIfDeleteSche() {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this schedule?'\r\n            }).then(() => {\r\n                this.deleteSche(this.$store.state.FlexSchedule.selectedFlexDay.id)\r\n            })\r\n        },\r\n\r\n        deleteSche(id: number) {\r\n            Remote.DeleteFlexSchedule(id)\r\n            .then(res => {\r\n                //todo what happen after delete\r\n                //console.log('res', res)\r\n\r\n                // if (res === \"Deleted\") {\r\n                    this.$emit('reload')\r\n\r\n                    this.toggleShow();\r\n                // } else {\r\n                //     Dialog.alert('Something went wrong. Delete Schedule failed')\r\n                // }\r\n\r\n            }, err => {\r\n                Dialog.alert('Something went wrong. Delete Schedule failed')\r\n            }).finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n\r\n        },\r\n\r\n        openEdit() {\r\n            // todo load position\r\n\r\n            // todo load shift\r\n            let selectedShift\r\n            if (this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData) {\r\n                selectedShift = this.shiftOptions.find((option: ShiftType) => {\r\n                    return option.shiftType ===  this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId\r\n                })\r\n            }\r\n\r\n\r\n            if (selectedShift) {\r\n                this.selectedShift = selectedShift;\r\n            }\r\n\r\n            // todo load custom element\r\n\r\n            if (this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData) {\r\n                this.selectedCostElement1 = this.costElementOptions.find((option: CostElement) => {\r\n                    return option.id === this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1\r\n                })\r\n\r\n                this.selectedCostElement2 = this.costElementOptions.find((option: CostElement) => {\r\n                    return option.id === this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2\r\n                })\r\n            }\r\n\r\n            this.employeeDetail = {\r\n                employeeName: this.$store.state.FlexSchedule.selectedFlexDay.employeeName,\r\n                employeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo\r\n            }\r\n\r\n            this.dialogDate = this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('DD/MM/YYYY')\r\n\r\n            this.day = this.$store.state.FlexSchedule.flexScheduleDay;\r\n            this.unAvailability = this.$store.state.FlexSchedule.selectedFlexDay?.unAvailability;\r\n            this.checkUnavailability();\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n\r\n        },\r\n\r\n    }\r\n\r\n\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use \"../../style/colors\";\r\n\r\n.edit-form {\r\n    display: grid;\r\n    grid-template-columns: 140px 150px;\r\n    grid-template-rows: repeat(9, min-content);\r\n    row-gap: 8px;\r\n    align-items: center;\r\n\r\n    input {\r\n        height: 30px;\r\n        border-radius: 5px;\r\n        border: 1px solid colors.$grey;\r\n        padding: 0 10px;\r\n\r\n        &:focus {\r\n            outline: none;\r\n        }\r\n    }\r\n}\r\n\r\n.orange {\r\n    color: #ff5c00;\r\n}\r\n\r\n.two-column {\r\n    grid-column: span 2;\r\n}\r\n\r\n.custom-select-selected:after {\r\n    top: calc(50% - 5px);\r\n    right: 10px;\r\n}\r\n\r\n.custom-select-selected {\r\n    padding: 8px 10px;\r\n    min-height: 35px;\r\n}\r\n\r\n::v-deep(.custom-select-item) {\r\n    min-height: 25px;\r\n}\r\n\r\n</style>","// Flex Schedule data module. Store current editing schedule data\r\n\r\n// import { Module } from \"vuex\"\r\nimport {RootState} from \"./index\"\r\nimport _ from \"lodash\";\r\nimport moment, {Moment} from \"moment\";\r\nimport {ActionTree, Module, MutationTree} from \"vuex\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport {WorkType} from \"@/store/lookupModule\";\r\n\r\nexport interface DictionaryOfCheckboxes {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport interface FlexScheduleState {\r\n    selectedDate: Moment\r\n    flexScheduleDay: FlexScheduleDay,\r\n    selectedFlexDay: ScheduleDayInView | null,\r\n    scheduleWeek: ScheduleWeek[],\r\n    editFlexScheduleDayConfig: FlexScheduleDayEditConfig\r\n    flexScheduleCellSetting: FlexScheduleCellSetting\r\n    calendarFocusDate: Moment,\r\n    defaultWorkTypes: WorkType[] | null,\r\n    analysisHoursChartData: any,\r\n}\r\n\r\nexport interface ScheduleWeek {\r\n    empName: string;\r\n    scheDays: ScheduleDayInView[];\r\n}\r\n\r\nexport interface ScheduleDayInView {\r\n    scheduleDetail?: any;\r\n    employeeName?: string;\r\n    employeeNo?: number;\r\n    date?: string;\r\n    time: string,\r\n    startTime: string,\r\n    endTime: string,\r\n    hours: number,\r\n    Hours?: number,\r\n    schedule: string,\r\n    dayInWeek: number,\r\n    column?: string,\r\n    editing?: boolean,\r\n    unAvailability?: UnAvailability\r\n}\r\n\r\nexport interface UnAvailability {\r\n    employeeNo: number,\r\n    endTime: string,\r\n    id: number,\r\n    reason: string,\r\n    startTime: string,\r\n    unavailabilityDate: string\r\n}\r\n\r\nexport interface FlexScheduleDayEditConfig {\r\n    startTime: boolean,\r\n    endTime: boolean,\r\n    hours: boolean,\r\n    breakLength: boolean,\r\n    shiftId: boolean,\r\n    position: boolean,\r\n    costElement1: boolean,\r\n    costElement2: boolean,\r\n}\r\n\r\nexport interface FlexScheduleDay {\r\n    date: string,\r\n    startTime: string,\r\n    endTime: string,\r\n    hours: number,\r\n    breakLength: number,\r\n    shiftId: string,\r\n    position: string,\r\n    costElement1: string,\r\n    costElement2: string,\r\n}\r\n\r\nexport interface FlexScheduleCellSetting {\r\n    showHours: DictionaryOfCheckboxes,\r\n    showBreakLength: DictionaryOfCheckboxes,\r\n    showShiftId: DictionaryOfCheckboxes,\r\n    showPosition: DictionaryOfCheckboxes\r\n    // showCostElement1: DictionaryOfCheckboxes,\r\n    // showCostElement2: DictionaryOfCheckboxes,\r\n}\r\n\r\nconst EMPTY_FORM = {\r\n    date: '',\r\n    startTime: '',\r\n    endTime: '',\r\n    hours: 0,\r\n    breakLength: 0,\r\n    shiftId: '',\r\n    position: '',\r\n    costElement1: '',\r\n    costElement2: ''\r\n}\r\n\r\nexport enum FlexScheduleAction {\r\n    loadTargetSchedule = \"LOAD_TARGET_SCHEDULE\"\r\n}\r\n\r\nexport enum FlexScheduleMutation {\r\n    clearForm = \"CLEAR_FORM\",\r\n    setScheduleDay = \"SET_SCHEDULE_DAY\",\r\n    saveScheduleDayToWeek = \"SAVE_SCHEDULE_DAY_TO_WEEK\",\r\n    updateEditConfig = \"UPDATE_EDIT_CONFIG\",\r\n    createNewScheduleDay = \"CREATE_NEW_SCHEDULE_DAY\",\r\n    setAnalysisData = \"SET_ANALYSIS_DATA\"\r\n}\r\n\r\nconst actions: ActionTree<FlexScheduleState, RootState> = {\r\n    [FlexScheduleAction.loadTargetSchedule]({ commit }, scheduleId: number) {\r\n        console.log('scheduleId', scheduleId)\r\n        Remote.GetFlexScheduleDetail(scheduleId)\r\n            .then(res => {\r\n                console.log('GetFlexScheduleDetail', res)\r\n            })\r\n    }\r\n}\r\n\r\nconst mutations: MutationTree<FlexScheduleState> = {\r\n    [FlexScheduleMutation.clearForm](state) {\r\n        state.flexScheduleDay = EMPTY_FORM\r\n    },\r\n\r\n    [FlexScheduleMutation.createNewScheduleDay](state, day: ScheduleDayInView) {\r\n        state.flexScheduleDay = EMPTY_FORM\r\n        state.selectedFlexDay = day;\r\n    },\r\n\r\n    [FlexScheduleMutation.setScheduleDay](state, day: ScheduleDayInView) {\r\n        console.log('emit', day)\r\n        // state.flexScheduleDay = _.merge({}, state.flexScheduleDay, day)\r\n        state.selectedFlexDay = day;\r\n\r\n        state.flexScheduleDay.startTime = day.startTime;\r\n        state.flexScheduleDay.endTime = day.endTime;\r\n        state.flexScheduleDay.hours = day.Hours!;\r\n\r\n        let scheduleDetail = Object.fromEntries(\r\n                                Object.entries(day.scheduleDetail).map(\r\n                                    ([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                                );\r\n\r\n        state.flexScheduleDay = _.merge({}, state.flexScheduleDay, scheduleDetail)\r\n\r\n        console.log('state', state.flexScheduleDay)\r\n\r\n    },\r\n    [FlexScheduleMutation.saveScheduleDayToWeek](state) {\r\n        if (!state.selectedFlexDay) {\r\n            console.error('missing selected flex day');\r\n            return\r\n        }\r\n\r\n        state.selectedFlexDay.startTime = state.flexScheduleDay.startTime;\r\n        state.selectedFlexDay.endTime = state.flexScheduleDay.endTime;\r\n        state.selectedFlexDay.scheduleDetail = _.merge({}, state.selectedFlexDay.scheduleDetail, state.flexScheduleDay)\r\n\r\n        // state.FlexScheduleDay\r\n    },\r\n    [FlexScheduleMutation.updateEditConfig](state, newConfig: FlexScheduleDayEditConfig) {\r\n        state.editFlexScheduleDayConfig = _.clone(newConfig)\r\n    },\r\n\r\n    [FlexScheduleMutation.setAnalysisData](state, data) {\r\n        state.analysisHoursChartData = data;\r\n    }\r\n}\r\n\r\n\r\nconst FlexSchedule: Module<FlexScheduleState, RootState> = {\r\n    // namespaced: true as true,\r\n\r\n    state: {\r\n        selectedDate: moment(),\r\n        calendarFocusDate: moment(),\r\n        selectedFlexDay: null,\r\n        defaultWorkTypes: null,\r\n        analysisHoursChartData: null,\r\n        flexScheduleDay: { // modal\r\n            date: '',\r\n            startTime: '',\r\n            endTime: '',\r\n            hours: 0,\r\n            breakLength: 0,\r\n            shiftId: '',\r\n            position: '',\r\n            costElement1: '',\r\n            costElement2: ''\r\n        },\r\n        editFlexScheduleDayConfig: {\r\n            startTime: false,\r\n            endTime: false,\r\n            hours: false,\r\n            breakLength: false,\r\n            shiftId: false,\r\n            position: false,\r\n            costElement1: false,\r\n            costElement2: false\r\n        },\r\n        scheduleWeek: [],\r\n        //Net Hours\r\n        // Break Length\r\n        // Shift Id\r\n\r\n        flexScheduleCellSetting: {\r\n            showHours: {\r\n                value: false,\r\n                name: 'Net Hours'\r\n            },\r\n            showBreakLength: {\r\n                value: false,\r\n                name: 'Break Length'\r\n            },\r\n            showShiftId: {\r\n                value: false,\r\n                name: 'Shift ID'\r\n            },\r\n            showPosition: {\r\n                value: false,\r\n                name: 'Position'\r\n            }\r\n            // showCostElement1: {\r\n            //     value: false,\r\n            //     name: 'Cost Element 1'\r\n            // },\r\n            // showCostElement2: {\r\n            //     value: false,\r\n            //     name: 'Cost Element 2'\r\n            // },\r\n        }\r\n    },\r\n\r\n    // getters: {\r\n    //\r\n    // },\r\n    mutations: mutations,\r\n    actions: actions\r\n    // mutations: {\r\n    //     // SET_NAME(state, newName: string) {\r\n    //     //     state.name = newName\r\n    //     // },\r\n    //     clearForm(state) {\r\n    //         state.flexScheduleDay = EMPTY_FORM\r\n    //         // for( let key in state.flexScheduleDay) {\r\n    //             // state.flexScheduleDay[key] = EMPTY_FORM[key];\r\n    //             // state.flexScheduleDay.name =\r\n    //         // }\r\n    //     },\r\n    //     setScheduleDay(state, day: ScheduleDayInView) {\r\n    //         console.log('emit', day)\r\n    //         // state.flexScheduleDay = _.merge({}, state.flexScheduleDay, day)\r\n    //         state.selectedFlexDay = day;\r\n    //         state.flexScheduleDay.startTime = day.startTime;\r\n    //         state.flexScheduleDay.endTime = day.endTime;\r\n    //         state.flexScheduleDay = _.merge({}, state.flexScheduleDay, day.scheduleDetail)\r\n    //\r\n    //         console.log('state', state.flexScheduleDay)\r\n    //\r\n    //     },\r\n    //     saveScheduleDayToWeek(state) {\r\n    //         if (!state.selectedFlexDay) { console.error('missing selected flex day'); return}\r\n    //\r\n    //         state.selectedFlexDay.startTime = state.flexScheduleDay.startTime;\r\n    //         state.selectedFlexDay.endTime = state.flexScheduleDay.endTime;\r\n    //         state.selectedFlexDay.scheduleDetail = _.merge({}, state.selectedFlexDay.scheduleDetail, state.flexScheduleDay)\r\n    //\r\n    //         // state.FlexScheduleDay\r\n    //     },\r\n    //     updateEditConfig(state, newConfig: FlexScheduleDayEditConfig) {\r\n    //         state.editFlexScheduleDayConfig = _.clone(newConfig)\r\n    //     }\r\n    // },\r\n    // actions: {\r\n    // async loadName({ commit }, payload: { id: string }) {\r\n    //     const name = `Name-${payload.id}` // load it from somewhere\r\n    //     commit(\"SET_NAME\", name)\r\n    //     return { name }\r\n    // },\r\n    // }\r\n}\r\n\r\n\r\nexport default FlexSchedule;","\r\nimport {useStore} from \"vuex\";\r\nimport {computed, defineComponent} from \"vue\";\r\nimport {FlexScheduleDay, FlexScheduleMutation, UnAvailability} from \"@/store/flexScheduleModule\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n// import {key} from \"@/store\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {CostElement, EMPPosition, ShiftType} from \"@/store/lookupModule\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\nimport {WeeklyPublishStatus} from \"@/components/FlexSchedule/FlexSchedule.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport moment from \"moment\";\r\n\r\nexport default defineComponent({\r\n    name: \"EditFlexSchedule\",\r\n    components: {\r\n        Modal,\r\n        CustomSelect\r\n    },\r\n    props: {\r\n        isEdit: {\r\n            type: Boolean\r\n        },\r\n        weekStatus: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            flexScheduleDay: {},\r\n            unAvailability: <UnAvailability | null> null,\r\n            selectedPosition: <EMPPosition>{},\r\n            selectedShift: <ShiftType>{},\r\n            selectedCostElement1: <CostElement>{},\r\n            selectedCostElement2: <CostElement>{},\r\n            day: <FlexScheduleDay>{},\r\n            employeeDetail: <any>{},\r\n            dialogDate: <string>\"\",\r\n            showUnAvaError: false,\r\n        }\r\n    },\r\n    setup() {\r\n        // console.log('setup');\r\n        const store = useStore()\r\n        // const flexScheduleModule = getModule\r\n        // const state = reactive({\r\n        //   day: computed(() => store.state.flexSchedule.flexScheduleDay),\r\n        // });\r\n        //\r\n        // console.log('state', state)\r\n        // return {state}\r\n        return {\r\n            // day: computed(() => {\r\n            //     console.log('test', store.state)\r\n            //     return store.state.FlexSchedule.flexScheduleDay\r\n            // }),\r\n\r\n            shiftOptions: computed(() => {\r\n                let blankOption = {shiftType: \"\", description: \"\", isDefault: null, archive: \"F\"}\r\n                let shiftOption = store.state.LookUp.shifts.slice()\r\n                shiftOption.unshift(blankOption)\r\n                return shiftOption\r\n                // return store.state.LookUp.shifts\r\n            }),\r\n            costElementOptions: computed(() => {\r\n                return store.state.LookUp.costElements\r\n            }),\r\n        }\r\n    },\r\n    computed: {\r\n        positionOptions(): any {\r\n            let options = this.$store.state.LookUp.positions;\r\n            if (options.length === 1) {\r\n                (this as any).selectedPosition = options[0];\r\n            }\r\n            return options\r\n        },\r\n        fixedHours: {\r\n            get(): string {\r\n                return this.day.hours ? this.day.hours.toFixed(2) : ''\r\n            },\r\n            set(fixedHours: string) {\r\n                this.day.hours = Number(fixedHours)\r\n            }\r\n        },\r\n        fixedBreakLength: {\r\n            get (): string {\r\n                return  this.day.breakLength ? this.day.breakLength.toFixed(2) : ''\r\n            },\r\n            set (breakLengthString: string) {\r\n                this.day.breakLength = Number(breakLengthString)\r\n            }\r\n        }\r\n    },\r\n    // computed: mapState([\r\n    //   // map this.count to store.state.count\r\n    //   'flexSchedule/startTime'\r\n    // ]),\r\n    mounted() {\r\n        // let startTime = this.$store.state.FlexScheduleModule.startTime;\r\n        let startTime = this.$store;\r\n        this.day = this.$store.state.FlexSchedule.flexScheduleDay\r\n    },\r\n\r\n    // computed: {\r\n    //   ...mapState({\r\n    //     day: (state: State) => state.flexSchedule.flexScheduleDay\r\n    //   }),\r\n    // },\r\n\r\n    methods: {\r\n        selectCostElement1(costElement1: any) {\r\n            this.selectedCostElement1 = costElement1;\r\n        },\r\n        selectCostElement2(costElement2: any) {\r\n            this.selectedCostElement2 = costElement2;\r\n        },\r\n        selectShift(shift: any) {\r\n            this.selectedShift = shift;\r\n        },\r\n        selectPositionCustom(position: any) {\r\n            this.selectedPosition = position\r\n        },\r\n\r\n        selectPosition($event: any, position: EMPPosition) {\r\n            this.selectedPosition = position\r\n            $event.target.blur()\r\n            let b = (this.$refs.selectRef as any);\r\n            b.blur();\r\n        },\r\n\r\n        updateStartTime(day: FlexScheduleDay) {\r\n            if (!day.startTime) {\r\n                return\r\n            }\r\n\r\n            let startTime;\r\n            if (day.startTime.includes(':')) {\r\n                startTime = moment(day.startTime, 'HH:mm')\r\n            } else {\r\n                startTime = moment(day.startTime, 'Hmm')\r\n            }\r\n\r\n            if (startTime.isValid()) {\r\n                day.startTime = startTime.format(\"HH:mm\")\r\n                this.calcNetHour()\r\n            } else {\r\n                // todo: display this in error message\r\n                day.startTime = 'Invalid Time'\r\n            }\r\n        },\r\n\r\n        updateEndTime(day: FlexScheduleDay) {\r\n            if (!day.endTime) {\r\n                return\r\n            }\r\n\r\n            let endTime;\r\n            if (day.endTime.includes(':')) {\r\n                endTime = moment(day.endTime, 'HH:mm')\r\n            } else {\r\n                endTime = moment(day.endTime, 'Hmm')\r\n            }\r\n\r\n            if (endTime.isValid()) {\r\n                day.endTime = endTime.format(\"HH:mm\")\r\n                this.calcNetHour()\r\n            } else {\r\n                // todo: display this in error message\r\n                day.endTime = 'Invalid Time'\r\n            }\r\n        },\r\n\r\n        calcNetHour() {\r\n            if (this.day.startTime === 'Invalid Time' || this.day.endTime === 'Invalid Time') {\r\n                // Invalid time in form, do not calculate\r\n                return;\r\n            }\r\n\r\n            if (!this.day.startTime || !this.day.endTime) {\r\n                // Missing value, do not calculate\r\n                return;\r\n            }\r\n\r\n            let startTime = moment(this.day.startTime, 'H:mm')\r\n            let endTime = moment(this.day.endTime, 'H:mm')\r\n\r\n            let startEndDiffTrue = endTime.diff(startTime, 'hours', true);\r\n\r\n            // if endTime is before startTime, indicate user input a next day value.\r\n            // add one day and then calculate again for net hour\r\n            // this case count as start day's schedule (not two schedule)\r\n            if (startEndDiffTrue <= 0) {\r\n                startEndDiffTrue = endTime.add(1, 'day').diff(startTime, 'hours', true);\r\n            }\r\n\r\n            let startEndDiff = Math.round(startEndDiffTrue * 100) / 100;\r\n\r\n            if (this.day.breakLength) {\r\n                this.day.hours = startEndDiff - this.day.breakLength\r\n            } else {\r\n                this.day.hours = startEndDiff\r\n            }\r\n\r\n            this.checkUnavailability()\r\n        },\r\n\r\n        checkUnavailability() {\r\n            this.showUnAvaError = false;\r\n\r\n            if (!this.day.startTime || !this.day.endTime) {\r\n                return\r\n            }\r\n\r\n            if (!this.unAvailability || !this.unAvailability.endTime || !this.unAvailability.startTime) {\r\n                return;\r\n            }\r\n\r\n            const startTime = moment(this.day.startTime, \"HH:mm\")\r\n            const endTime = moment(this.day.endTime, \"HH:mm\")\r\n            const unAvaStartTime = moment(this.unAvailability.startTime, \"HH:mm\")\r\n            const unAvaEndTime = moment(this.unAvailability.endTime, \"HH:mm\")\r\n\r\n            // Fine time overlap\r\n            // (StartA <= EndB) and (EndA >= StartB)\r\n            if (startTime <= unAvaEndTime && endTime >= unAvaStartTime) {\r\n                console.log('show error')\r\n                this.showUnAvaError = true\r\n            }\r\n        },\r\n\r\n        clearForm() {\r\n            this.$store.commit(FlexScheduleMutation.clearForm)\r\n        },\r\n\r\n        cancel() {\r\n            this.$store.commit(FlexScheduleMutation.clearForm)\r\n            this.toggleShow();\r\n        },\r\n\r\n        updateSche() {\r\n            Dialog.loading()\r\n            let putData = {\r\n                Id: this.$store.state.FlexSchedule.selectedFlexDay.id,\r\n                EmployeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,\r\n                Date: this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('MM/DD/YYYY'),\r\n                StartTime: this.day.startTime,\r\n                EndTime: this.day.endTime,\r\n                Hours: this.day.hours,\r\n                PublishStatus: this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus ? this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus : 'draft',\r\n                ScheduleData: {\r\n                    ShiftId: this.selectedShift.shiftType,\r\n                    BreakLength: this.day.breakLength,\r\n                    Position : this.selectedPosition.positionCode,\r\n                    CostElement1: this.selectedCostElement1 ? this.selectedCostElement1.id : undefined,\r\n                    CostElement2: this.selectedCostElement1 ? this.selectedCostElement2.id : undefined\r\n                }\r\n            }\r\n\r\n            // console.log('selectedFlexDay', this.$store.state.FlexSchedule.selectedFlexDay)\r\n\r\n            // Remote.UpdateFlexSchedule(this.$store.state.FlexSchedule.selectedFlexDay.id, putData).then(res => {\r\n            Remote.PatchFlexSchedule([putData]).then(res => {\r\n                //todo what happen after update\r\n                // if (res === \"OK\") {\r\n                //     console.log('res', res)\r\n                    this.$emit('reload')\r\n                    Dialog.clear()\r\n\r\n                // } else {\r\n                //     Dialog.clear()\r\n                //     Dialog.alert('Something went wrong. Update Schedule failed')\r\n                // }\r\n            }, () => {\r\n                Dialog.clear()\r\n                Dialog.alert('Something went wrong. Update Schedule failed')\r\n            })\r\n\r\n            // console.log('form', this.$store.state.FlexSchedule.flexScheduleDay)\r\n            this.$store.commit(FlexScheduleMutation.saveScheduleDayToWeek)\r\n            this.toggleShow();\r\n        },\r\n\r\n        createSche() {\r\n            Dialog.loading();\r\n            let postData = [{\r\n                EmployeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo,\r\n                Date: this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('MM/DD/YYYY'),\r\n                StartTime: this.day.startTime,\r\n                EndTime: this.day.endTime,\r\n                Hours: this.day.hours,\r\n                PublishStatus: this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus ? this.$store.state.FlexSchedule.selectedFlexDay.PublishStatus : 'draft',\r\n                ScheduleData: {\r\n                    ShiftId: this.selectedShift.shiftType ? this.selectedShift.shiftType : '',\r\n                    BreakLength: this.day.breakLength,\r\n                    Position : this.selectedPosition.positionCode,\r\n                    CostElement1: this.selectedCostElement1 ? this.selectedCostElement1.id : '',\r\n                    CostElement2: this.selectedCostElement2 ? this.selectedCostElement2.id : ''\r\n                }\r\n            }]\r\n            //\r\n            Remote.CreateFlexSchedule(postData).then(res => {\r\n                //todo what happen after create\r\n                // console.log('create res', res)\r\n                // if (res === \"Ok\") {\r\n                this.$store.commit(FlexScheduleMutation.saveScheduleDayToWeek)\r\n                Dialog.clear();\r\n                this.toggleShow();\r\n                this.$emit('reload')\r\n            }, (err) => {\r\n                Dialog.clear();\r\n                Dialog.alert('Something went wrong. Create Schedule failed')\r\n\r\n            })\r\n        },\r\n\r\n        confirmIfDeleteSche() {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this schedule?'\r\n            }).then(() => {\r\n                this.deleteSche(this.$store.state.FlexSchedule.selectedFlexDay.id)\r\n            })\r\n        },\r\n\r\n        deleteSche(id: number) {\r\n            Remote.DeleteFlexSchedule(id)\r\n            .then(res => {\r\n                //todo what happen after delete\r\n                //console.log('res', res)\r\n\r\n                // if (res === \"Deleted\") {\r\n                    this.$emit('reload')\r\n\r\n                    this.toggleShow();\r\n                // } else {\r\n                //     Dialog.alert('Something went wrong. Delete Schedule failed')\r\n                // }\r\n\r\n            }, err => {\r\n                Dialog.alert('Something went wrong. Delete Schedule failed')\r\n            }).finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n\r\n        },\r\n\r\n        openEdit() {\r\n            // todo load position\r\n\r\n            // todo load shift\r\n            let selectedShift\r\n            if (this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData) {\r\n                selectedShift = this.shiftOptions.find((option: ShiftType) => {\r\n                    return option.shiftType ===  this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.ShiftId\r\n                })\r\n            }\r\n\r\n\r\n            if (selectedShift) {\r\n                this.selectedShift = selectedShift;\r\n            }\r\n\r\n            // todo load custom element\r\n\r\n            if (this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData) {\r\n                this.selectedCostElement1 = this.costElementOptions.find((option: CostElement) => {\r\n                    return option.id === this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement1\r\n                })\r\n\r\n                this.selectedCostElement2 = this.costElementOptions.find((option: CostElement) => {\r\n                    return option.id === this.$store.state.FlexSchedule.selectedFlexDay.ScheduleData.CostElement2\r\n                })\r\n            }\r\n\r\n            this.employeeDetail = {\r\n                employeeName: this.$store.state.FlexSchedule.selectedFlexDay.employeeName,\r\n                employeeNo: this.$store.state.FlexSchedule.selectedFlexDay.employeeNo\r\n            }\r\n\r\n            this.dialogDate = this.$store.state.FlexSchedule.calendarFocusDate.day(this.$store.state.FlexSchedule.selectedFlexDay.dayInWeek).format('DD/MM/YYYY')\r\n\r\n            this.day = this.$store.state.FlexSchedule.flexScheduleDay;\r\n            this.unAvailability = this.$store.state.FlexSchedule.selectedFlexDay?.unAvailability;\r\n            this.checkUnavailability();\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n\r\n        },\r\n\r\n    }\r\n\r\n\r\n})\r\n","import { render } from \"./EditFlexSchedule.vue?vue&type=template&id=42f59623&scoped=true\"\nimport script from \"./EditFlexSchedule.vue?vue&type=script&lang=ts\"\nexport * from \"./EditFlexSchedule.vue?vue&type=script&lang=ts\"\n\nimport \"./EditFlexSchedule.vue?vue&type=style&index=0&id=42f59623&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-42f59623\"\n\nexport default script","<template>\r\n    <div class=\"day-info\">\r\n        <!--    <div class=\"display-day\" @click=\"editScheDay(scheDay)\" v-if=\"!scheDay.editing\">-->\r\n        <div v-if=\"scheDay.startTime === '00:00'\r\n                     && scheDay.endTime === '00:00'\r\n                     && !scheDay.hours\"\r\n             class=\"display-day\">\r\n            <div v-if=\"scheDay.leaveUnit\" class=\"leave-unit mt-2\">\r\n                <span v-if=\"scheDay.leaveUnit.calcUnit === 'D'\">Leave: {{scheDay.leaveUnit.daysAppliedFor}} day</span>\r\n                <span v-else >Leave: {{scheDay.leaveUnit.hoursAppliedFor}} hours</span>\r\n            </div>\r\n            <div v-if=\"scheDay.unAvailability\" class=\"leave-unit mt-2\">\r\n                <div>Unavailable</div>\r\n                <span>{{scheDay.unAvailability.startTime}} - {{scheDay.unAvailability.endTime}}</span>\r\n                <div>{{scheDay.unAvailability.reason}}</div>\r\n            </div>\r\n            <div class=\"full-width\">\r\n                <button class=\" detail-button blue small mt-2\" @click=\"moreDetail(scheDay)\">\r\n                    <span class=\"white caption\">Edit</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div v-else class=\"display-day\">\r\n\r\n            <!--      start time and end time -->\r\n            <div class=\"full-width\">\r\n<!--                <div v-if=\"!editTime && (scheDay.startTime || scheDay.endTime)\" @click=\"updateEditTime(true)\">-->\r\n                <div v-if=\"!editTime && (scheDay.startTime || scheDay.endTime)\" >\r\n                    <div>{{ scheDay.startTime }} - {{ scheDay.endTime }}</div>\r\n                </div>\r\n                <div v-else-if=\"editTime\">\r\n                    <div class=\"d-flex flex-column align-center\">\r\n                        <label>Start Time</label>\r\n                        <input class=\"time-input\" v-model=\"scheDay.startTime\">\r\n                    </div>\r\n                    <div class=\"mt-2 d-flex flex-column align-center\">\r\n                        <label class=\"px-2\">End Time</label>\r\n                        <input class=\"time-input\" v-model=\"scheDay.endTime\">\r\n                    </div>\r\n                    <button class=\"mt-2\" @click=\"editTime = false; updateEditing(false)\">Confirm</button>\r\n                </div>\r\n                <!--      Cell without content -->\r\n                <div v-else class=\"create-day\" v-bind:class=\"{'create-day-show': !scheDay.time && !scheDay.schedule}\">\r\n                    <button class=\"blue small\" @click=\"createSche(scheDay)\"><span class=\"white\">Create</span></button>\r\n                </div>\r\n            </div>\r\n            <div v-if=\"!editTime\">\r\n                <editable-cell-element v-if=\"cellSettings.showHours.value && scheDay.hours\"\r\n                                       label=\"Net hours:\" :modelValue=\"scheDay.hours\"\r\n\r\n                                       @update:modelValue=\"scheDay.hours = $event; updateEditing\"></editable-cell-element>\r\n                <div v-if=\"scheDay.scheduleDetail\">\r\n                    <editable-cell-element v-if=\"cellSettings.showBreakLength.value\"\r\n                                           label=\"Break Length:\" :modelValue=\"scheDay.scheduleDetail.breakLength\"\r\n\r\n                                           @update:modelValue=\"scheDay.scheduleDetail.breakLength = $event; updateEditing\"></editable-cell-element>\r\n                    <editable-cell-element v-if=\"cellSettings.showShiftId.value\"\r\n                                           label=\"Shift ID:\" :modelValue=\"scheDay.scheduleDetail.shiftId\"\r\n\r\n                                           @update:modelValue=\"scheDay.scheduleDetail.shiftId = $event; updateEditing\">\r\n                        <template v-slot:displayValue>\r\n\r\n                        </template>\r\n                    </editable-cell-element>\r\n                    <div v-if=\"cellSettings.showPosition.value\">\r\n                        <div>Position:</div>\r\n                        <div>{{scheDay.scheduleDetail.positionTitle}}</div>\r\n                    </div>\r\n<!--                    <editable-cell-element v-if=\"cellSettings.showPosition.value\"-->\r\n<!--                                           label=\"Position:\" :modelValue=\"scheDay.scheduleDetail.positionTitle\"-->\r\n<!--                                           :fullWidthInput=\"true\"></editable-cell-element>-->\r\n<!--                    <editable-cell-element class=\"mt-1\" v-if=\"cellSettings.showCostElement1.value\"-->\r\n<!--                                           label=\"CostElement1:\" :modelValue=\"scheDay.scheduleDetail.costElement1\"-->\r\n<!--                                           :fullWidthInput=\"true\"-->\r\n<!--                                           @startedEditing=\"editing = true\"-->\r\n<!--                                           @update:modelValue=\"scheDay.scheduleDetail.costElement1 = $event; updateEditing\"></editable-cell-element>-->\r\n<!--                    <editable-cell-element class=\"mt-1\" v-if=\"cellSettings.showCostElement2.value\"-->\r\n<!--                                           label=\"CostElement2:\" :modelValue=\"scheDay.scheduleDetail.costElement2\"-->\r\n<!--                                           :fullWidthInput=\"true\"-->\r\n<!--                                           @startedEditing=\"editing = true\"-->\r\n<!--                                           @update:modelValue=\"scheDay.scheduleDetail.costElement2 = $event; updateEditing\"></editable-cell-element>-->\r\n                </div>\r\n                <!--      <div>{{ scheDay.schedule }}</div>-->\r\n            </div>\r\n            <div v-if=\"scheDay.leaveUnit\" class=\"leave-unit mt-2\">\r\n                <span v-if=\"scheDay.leaveUnit.calcUnit === 'D'\">Leave: {{scheDay.leaveUnit.daysAppliedFor}} day</span>\r\n                <span v-else >Leave: {{scheDay.leaveUnit.hoursAppliedFor}} hours</span>\r\n            </div>\r\n            <div v-if=\"scheDay.unAvailability\" class=\"leave-unit mt-2\">\r\n                <div>Unavailable</div>\r\n                <span>{{scheDay.unAvailability.startTime}} - {{scheDay.unAvailability.endTime}}</span>\r\n                <div>{{scheDay.unAvailability.reason}}</div>\r\n            </div>\r\n            <div v-if=\"!editing && (scheDay.startTime || scheDay.endTime)\">\r\n                <button class=\" detail-button blue small mt-2\" @click=\"moreDetail(scheDay)\">\r\n                    <span class=\"white caption\">Edit</span>\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {ScheduleDay} from \"@/components/FlexSchedule/schedule-day-mock\";\r\nimport {computed, defineComponent, PropType, reactive} from \"vue\";\r\nimport {FlexScheduleCellSetting, FlexScheduleMutation} from \"@/store/flexScheduleModule\";\r\nimport {useStore} from \"vuex\";\r\nimport EditableCellElement from \"@/components/FlexSchedule/EditableCellElement.vue\";\r\nimport {LookupActions, ShiftType} from \"@/store/lookupModule\";\r\n\r\nexport default defineComponent({\r\n    name: \"DynamicScheCell\",\r\n    components: {\r\n        EditableCellElement\r\n    },\r\n    props: {\r\n        scheDay: {\r\n            type: Object as PropType<ScheduleDay>\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            editTime: false,\r\n            editing: false,\r\n        }\r\n\r\n    },\r\n    setup() {\r\n        const store = useStore()\r\n\r\n        const cellSettings: FlexScheduleCellSetting = store.state.FlexSchedule.flexScheduleCellSetting\r\n\r\n        const shiftOptions = computed(() => {\r\n                return store.state.LookUp.shifts\r\n            })\r\n\r\n        const positionOptions = computed(() => {\r\n            return store.state.LookUp.positions\r\n        })\r\n\r\n\r\n        return {cellSettings,\r\n                shiftOptions,\r\n                positionOptions,\r\n                selectedShift: computed((shiftId: string) => {\r\n                    return shiftOptions.value.find((option: ShiftType) => {\r\n                        return option.shiftType === shiftId\r\n                    })\r\n                }),\r\n                // positionOptions: computed(() {\r\n                //     let options = this.$store.state.LookUp.positions;\r\n                //     if (options.length === 1) {\r\n                //         (this as any).selectedPosition = options[0];\r\n                //     }\r\n                //     return options\r\n                // }),\r\n        }\r\n    },\r\n    methods: {\r\n        updateElement($event: any, scheDay: any, key: any) {\r\n            // console.log('update event', $event)\r\n            // console.log('update target', scheDay)\r\n            // console.log('update key', key)\r\n            scheDay.startTime = $event;\r\n        },\r\n        moreDetail(day: ScheduleDay) {\r\n            // console.log('day', day)\r\n            this.$store.dispatch(LookupActions.getPositions, (day as any).EmployeeNo)\r\n            this.$store.commit(FlexScheduleMutation.setScheduleDay, day)\r\n            this.$emit('openEditDialog', true)\r\n        },\r\n\r\n        updateEditTime(isEditing: boolean) {\r\n            this.editTime = isEditing;\r\n            if (isEditing) {\r\n                this.editing = true;\r\n            }\r\n        },\r\n\r\n        createSche(scheDay: ScheduleDay) {\r\n            // this.$store.commit(FlexScheduleMutation.setTargetEmployee)\r\n            this.$store.dispatch(LookupActions.getPositions, (scheDay as any).employeeNo)\r\n            this.$store.commit(FlexScheduleMutation.createNewScheduleDay, scheDay)\r\n            this.$emit('openEditDialog', false)\r\n        },\r\n\r\n        updateEditing(isEditing?: boolean) {\r\n            if (isEditing === true || isEditing === false) {\r\n                this.editing = isEditing;\r\n            } else {\r\n                this.editing = !this.editing\r\n            }\r\n\r\n        },\r\n        startEditing() {\r\n            this.editing = true;\r\n        }\r\n\r\n        // confirmEdit(day: any) {\r\n        //   day.editing = false;\r\n        // },\r\n        //\r\n        // cancelEdit(day: any) {\r\n        //\r\n        // },\r\n        //\r\n        // editScheDay(day: any) {\r\n        //   day.editing = true\r\n        // }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.day-info {\r\n    //min-width: 100px;\r\n    //min-height: 30px;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.display-day {\r\n    position: relative;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    padding: 10px;\r\n\r\n\r\n    .create-day {\r\n        display: none;\r\n        transition: opacity linear 0.15s\r\n    }\r\n\r\n    .create-day-show {\r\n        display: block;\r\n        opacity: 0;\r\n    }\r\n\r\n    .detail-button {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 0;\r\n        display: none;\r\n    }\r\n\r\n    &:hover .create-day-show {\r\n        opacity: 1;\r\n    }\r\n\r\n    &:hover .detail-button {\r\n        display: block;\r\n    }\r\n}\r\n\r\n.leave-unit {\r\n    width: 100%;\r\n    padding: 2px 5px;\r\n    background-color: #E0E0E0\r\n}\r\n\r\n.time-input {\r\n    max-width: 120px;\r\n}\r\n</style>","<template>\r\n    <div v-if=\"editing\" class=\"d-flex flex-wrap justify-center\" v-bind:class=\"{'input-width-full': fullWidthInput}\">\r\n        <label>{{ label }}</label>\r\n        <input v-model=\"value\" class=\"input-width\"/>\r\n        <!--    <div class=\"d-flex\">-->\r\n        <button class=\"ml-1 btn-xsmall blue\" @click=\"update\">\r\n            <span class=\"icon-tick \"></span>\r\n        </button>\r\n        <button class=\"ml-1 btn-xsmall orange\" @click=\"cancel\">\r\n            <span class=\"icon-cross\"></span>\r\n        </button>\r\n        <!--    </div>-->\r\n\r\n    </div>\r\n<!--    <div v-else @click=\"changeEditing(true)\">-->\r\n    <div v-else>\r\n        <label>{{ label }}</label>\r\n        <slot name=\"displayValue\">{{ modelValue }}</slot>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"EditableCellElement\",\r\n    props: {\r\n        modelValue: {\r\n            type: [String, Number]\r\n        },\r\n        label: {\r\n            type: String\r\n        },\r\n        fullWidthInput: {\r\n            type: Boolean\r\n        }\r\n        // editing: {\r\n        //   type: Boolean\r\n        // }\r\n    },\r\n    data() {\r\n        return {\r\n            // edit\r\n            value: '',\r\n            editing: false\r\n        }\r\n    },\r\n    methods: {\r\n        changeEditing() {\r\n            this.value = this.modelValue as string;\r\n            this.editing = true;\r\n            this.$emit(\"updateEditing\", true)\r\n        },\r\n        update() {\r\n            this.$emit(\"update:modelValue\", this.value)\r\n            this.editing = false;\r\n        },\r\n        cancel() {\r\n            this.editing = false\r\n            this.$emit(\"updateEditing\", false)\r\n        }\r\n\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use \"../../style/colors\";\r\n\r\n.input-width {\r\n    width: 30px;\r\n}\r\n\r\n.input-width-full {\r\n    .input-width {\r\n        width: 120px;\r\n    }\r\n\r\n    label {\r\n        width: 120px;\r\n    }\r\n}\r\n\r\n.btn-xsmall {\r\n    background: white;\r\n    box-shadow: none;\r\n    border-radius: 5px;\r\n    padding: 1px 4px;\r\n    line-height: 0;\r\n\r\n    &.blue {\r\n        color: colors.$aff-blue;\r\n        border: 1px solid colors.$aff-blue;\r\n    }\r\n\r\n    &.orange {\r\n        color: colors.$orange;\r\n        border: 1px solid colors.$orange;\r\n    }\r\n}\r\n\r\n</style>","\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"EditableCellElement\",\r\n    props: {\r\n        modelValue: {\r\n            type: [String, Number]\r\n        },\r\n        label: {\r\n            type: String\r\n        },\r\n        fullWidthInput: {\r\n            type: Boolean\r\n        }\r\n        // editing: {\r\n        //   type: Boolean\r\n        // }\r\n    },\r\n    data() {\r\n        return {\r\n            // edit\r\n            value: '',\r\n            editing: false\r\n        }\r\n    },\r\n    methods: {\r\n        changeEditing() {\r\n            this.value = this.modelValue as string;\r\n            this.editing = true;\r\n            this.$emit(\"updateEditing\", true)\r\n        },\r\n        update() {\r\n            this.$emit(\"update:modelValue\", this.value)\r\n            this.editing = false;\r\n        },\r\n        cancel() {\r\n            this.editing = false\r\n            this.$emit(\"updateEditing\", false)\r\n        }\r\n\r\n    }\r\n})\r\n","import { render } from \"./EditableCellElement.vue?vue&type=template&id=675aa1ee&scoped=true\"\nimport script from \"./EditableCellElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EditableCellElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EditableCellElement.vue?vue&type=style&index=0&id=675aa1ee&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-675aa1ee\"\n\nexport default script","import {ActionTree, Module, MutationTree} from \"vuex\";\r\n\r\nimport {RootState} from \"@/store/index\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\n\r\nexport interface EMPPosition {\r\n    positionTitle: string;\r\n    positionCode: string;\r\n}\r\n\r\nexport interface CostElement {\r\n    id: string;\r\n    costElementType: number;\r\n    description: string\r\n}\r\n\r\nexport interface ShiftType {\r\n    archive: string\r\n    description: string\r\n    isDefault: string\r\n    shiftType: string\r\n}\r\n\r\nexport interface WorkType {\r\n    code: number;\r\n    description: string;\r\n    isSelected?: boolean;\r\n}\r\n\r\nexport interface LookupState {\r\n    shifts: ShiftType[],\r\n    positions: EMPPosition[],\r\n    costElements: CostElement[],\r\n    workTypes: WorkType[]\r\n}\r\n\r\nexport enum LookupMutations {\r\n    setShifts = \"SET_SHIFTS\",\r\n    setPosition = \"SET_POSITION\",\r\n    setCostElements = \"SET_COST_ELEMENTS\",\r\n    setWorkTypes = \"SET_WORK_TYPES\"\r\n}\r\n\r\nexport enum LookupActions {\r\n    getPositions = 'GET_POSITIONS',\r\n    getShifts = 'GET_SHIFTS',\r\n    getCostElement = 'GET_COST_ELEMENT',\r\n    getWorkTypes = \"GET_WORK_TYPES\"\r\n}\r\n\r\nconst lookupMutations: MutationTree<LookupState> = {\r\n    [LookupMutations.setShifts](state, shifts: any[]) {\r\n        state.shifts = shifts\r\n    },\r\n\r\n    [LookupMutations.setPosition](state, positions: EMPPosition[]) {\r\n        state.positions = positions\r\n    },\r\n\r\n    [LookupMutations.setCostElements](state, costElements: CostElement[]) {\r\n        state.costElements = costElements\r\n    },\r\n\r\n    [LookupMutations.setWorkTypes](state, workTypes: WorkType[]) {\r\n        state.workTypes = workTypes\r\n    }\r\n}\r\n\r\nconst lookupActions: ActionTree<LookupState, RootState> = {\r\n    [LookupActions.getPositions] ({ commit }, employeeNo: number) {\r\n        Remote.GetPosition(employeeNo).then(res => {\r\n            console.log('positon', res)\r\n            let convertedPositions = res.map((positionRemote: any) => {\r\n                return Object.fromEntries(\r\n                    Object.entries(positionRemote).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                );\r\n            })\r\n            // state.positions = res\r\n            commit(LookupMutations.setPosition, convertedPositions)\r\n        })\r\n    },\r\n\r\n    [LookupActions.getShifts] ({ commit }) {\r\n        Remote.ShiftTypes().then(res => {\r\n\r\n            let convertedShifts = res.map((shiftRemote: any) => {\r\n                return Object.fromEntries(\r\n                    Object.entries(shiftRemote).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                );\r\n            })\r\n            console.log('convertedShifts', convertedShifts)\r\n            // state.positions = res\r\n            commit(LookupMutations.setShifts, convertedShifts)\r\n        })\r\n    },\r\n\r\n    [LookupActions.getCostElement] ({ commit }) {\r\n        Remote.GetCostelements().then(res => {\r\n\r\n            let convertedCostElement = res.map((element: any) => {\r\n                return Object.fromEntries(\r\n                    Object.entries(element).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                );\r\n            })\r\n            console.log('convertedShifts', convertedCostElement)\r\n            // state.positions = res\r\n            commit(LookupMutations.setCostElements, convertedCostElement)\r\n        })\r\n    },\r\n\r\n    [LookupActions.getWorkTypes] ({ commit }) {\r\n        Remote.GetWorkTypes().then(res => {\r\n\r\n            let convertedWorkType = res.map((element: any) => {\r\n                return Object.fromEntries(\r\n                    Object.entries(element).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                );\r\n            })\r\n\r\n            convertedWorkType.map((type: WorkType) => {\r\n                type.isSelected = false;\r\n            })\r\n            console.log('convertedShifts', convertedWorkType)\r\n            // state.positions = res\r\n            commit(LookupMutations.setWorkTypes, convertedWorkType)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nconst LookupSelections: Module<LookupState, RootState> = {\r\n    state: {\r\n        shifts: [],\r\n        positions: [],\r\n        costElements: [],\r\n        workTypes: []\r\n    },\r\n    mutations: lookupMutations,\r\n    actions: lookupActions\r\n}\r\n\r\nexport default LookupSelections;\r\n","\r\nimport {ScheduleDay} from \"@/components/FlexSchedule/schedule-day-mock\";\r\nimport {computed, defineComponent, PropType, reactive} from \"vue\";\r\nimport {FlexScheduleCellSetting, FlexScheduleMutation} from \"@/store/flexScheduleModule\";\r\nimport {useStore} from \"vuex\";\r\nimport EditableCellElement from \"@/components/FlexSchedule/EditableCellElement.vue\";\r\nimport {LookupActions, ShiftType} from \"@/store/lookupModule\";\r\n\r\nexport default defineComponent({\r\n    name: \"DynamicScheCell\",\r\n    components: {\r\n        EditableCellElement\r\n    },\r\n    props: {\r\n        scheDay: {\r\n            type: Object as PropType<ScheduleDay>\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            editTime: false,\r\n            editing: false,\r\n        }\r\n\r\n    },\r\n    setup() {\r\n        const store = useStore()\r\n\r\n        const cellSettings: FlexScheduleCellSetting = store.state.FlexSchedule.flexScheduleCellSetting\r\n\r\n        const shiftOptions = computed(() => {\r\n                return store.state.LookUp.shifts\r\n            })\r\n\r\n        const positionOptions = computed(() => {\r\n            return store.state.LookUp.positions\r\n        })\r\n\r\n\r\n        return {cellSettings,\r\n                shiftOptions,\r\n                positionOptions,\r\n                selectedShift: computed((shiftId: string) => {\r\n                    return shiftOptions.value.find((option: ShiftType) => {\r\n                        return option.shiftType === shiftId\r\n                    })\r\n                }),\r\n                // positionOptions: computed(() {\r\n                //     let options = this.$store.state.LookUp.positions;\r\n                //     if (options.length === 1) {\r\n                //         (this as any).selectedPosition = options[0];\r\n                //     }\r\n                //     return options\r\n                // }),\r\n        }\r\n    },\r\n    methods: {\r\n        updateElement($event: any, scheDay: any, key: any) {\r\n            // console.log('update event', $event)\r\n            // console.log('update target', scheDay)\r\n            // console.log('update key', key)\r\n            scheDay.startTime = $event;\r\n        },\r\n        moreDetail(day: ScheduleDay) {\r\n            // console.log('day', day)\r\n            this.$store.dispatch(LookupActions.getPositions, (day as any).EmployeeNo)\r\n            this.$store.commit(FlexScheduleMutation.setScheduleDay, day)\r\n            this.$emit('openEditDialog', true)\r\n        },\r\n\r\n        updateEditTime(isEditing: boolean) {\r\n            this.editTime = isEditing;\r\n            if (isEditing) {\r\n                this.editing = true;\r\n            }\r\n        },\r\n\r\n        createSche(scheDay: ScheduleDay) {\r\n            // this.$store.commit(FlexScheduleMutation.setTargetEmployee)\r\n            this.$store.dispatch(LookupActions.getPositions, (scheDay as any).employeeNo)\r\n            this.$store.commit(FlexScheduleMutation.createNewScheduleDay, scheDay)\r\n            this.$emit('openEditDialog', false)\r\n        },\r\n\r\n        updateEditing(isEditing?: boolean) {\r\n            if (isEditing === true || isEditing === false) {\r\n                this.editing = isEditing;\r\n            } else {\r\n                this.editing = !this.editing\r\n            }\r\n\r\n        },\r\n        startEditing() {\r\n            this.editing = true;\r\n        }\r\n\r\n        // confirmEdit(day: any) {\r\n        //   day.editing = false;\r\n        // },\r\n        //\r\n        // cancelEdit(day: any) {\r\n        //\r\n        // },\r\n        //\r\n        // editScheDay(day: any) {\r\n        //   day.editing = true\r\n        // }\r\n    }\r\n})\r\n","import { render } from \"./DynamicDayCell.vue?vue&type=template&id=4c0f5fd8&scoped=true\"\nimport script from \"./DynamicDayCell.vue?vue&type=script&lang=ts\"\nexport * from \"./DynamicDayCell.vue?vue&type=script&lang=ts\"\n\nimport \"./DynamicDayCell.vue?vue&type=style&index=0&id=4c0f5fd8&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4c0f5fd8\"\n\nexport default script","<template>\r\n    <div class=\"cell-config-list\">\r\n        <div>\r\n            <div class=\"custom-select\" tabindex=\"1\" >\r\n                <div class=\"custom-select-selected\">\r\n                    Show/Hide Details\r\n                </div>\r\n                <div class=\"custom-select-items\">\r\n                    <div class=\"custom-select-item\"\r\n                         v-for=\"(option, name) of cellSettings\" :key=\"name\"\r\n                         @click=\"checkOptions(option);\">\r\n                        <div class=\"cell-config\">\r\n                            <label>{{ option.name }}</label>\r\n                            <input type=\"checkbox\" v-model=\"option.value\" @change=\"optionChanged\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport {FlexScheduleCellSetting} from \"@/store/flexScheduleModule\";\r\n\r\nexport default defineComponent({\r\n    name: \"FlexScheduleCellControl\",\r\n    setup() {\r\n        const store = useStore()\r\n        const open = ref(false)\r\n        const optionSelected = ref([])\r\n\r\n        const cellSettings: FlexScheduleCellSetting = store.state.FlexSchedule.flexScheduleCellSetting\r\n        return {open, cellSettings, optionSelected}\r\n    },\r\n    methods: {\r\n        optionChanged() {\r\n            // update user config in local storage\r\n            localStorage.setItem('flexScheduleCellSetting', JSON.stringify(this.cellSettings))\r\n        },\r\n\r\n        checkOptions(option: any) {\r\n            // todo: trigger when user click on the row\r\n        }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '../../style/_colors';\r\n\r\n.custom-select:focus-within {\r\n    .custom-select-selected {\r\n        border: none;\r\n        border-radius: 0;\r\n        border-bottom: 1px solid colors.$aff-dark-blue;\r\n    }\r\n\r\n    .custom-select-selected:after {\r\n        transform: rotate(180deg);\r\n        top: 8px;\r\n    }\r\n}\r\n\r\n.custom-select-selected {\r\n    padding: 8px 1.5em 8px 0.2em;\r\n    background: white;\r\n    border: none;\r\n    border-radius: 0;\r\n    border-bottom: 1px solid colors.$dark-blue-app;\r\n}\r\n\r\n.custom-select-items {\r\n    width: fit-content;\r\n}\r\n\r\n.custom-select-selected:after {\r\n    top: 15px;\r\n    right: 0;\r\n}\r\n\r\n.cell-config {\r\n    display: grid;\r\n    grid-template-columns: 103px 20px;\r\n    padding: 0;\r\n}\r\n\r\n.cell-config-list {\r\n    font-size: 14px;\r\n}\r\n\r\n\r\n</style>","\r\nimport {defineComponent, ref} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport {FlexScheduleCellSetting} from \"@/store/flexScheduleModule\";\r\n\r\nexport default defineComponent({\r\n    name: \"FlexScheduleCellControl\",\r\n    setup() {\r\n        const store = useStore()\r\n        const open = ref(false)\r\n        const optionSelected = ref([])\r\n\r\n        const cellSettings: FlexScheduleCellSetting = store.state.FlexSchedule.flexScheduleCellSetting\r\n        return {open, cellSettings, optionSelected}\r\n    },\r\n    methods: {\r\n        optionChanged() {\r\n            // update user config in local storage\r\n            localStorage.setItem('flexScheduleCellSetting', JSON.stringify(this.cellSettings))\r\n        },\r\n\r\n        checkOptions(option: any) {\r\n            // todo: trigger when user click on the row\r\n        }\r\n    }\r\n\r\n})\r\n","import { render } from \"./FlexScheduleCellControl.vue?vue&type=template&id=3ec2220c&scoped=true\"\nimport script from \"./FlexScheduleCellControl.vue?vue&type=script&lang=ts\"\nexport * from \"./FlexScheduleCellControl.vue?vue&type=script&lang=ts\"\n\nimport \"./FlexScheduleCellControl.vue?vue&type=style&index=0&id=3ec2220c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3ec2220c\"\n\nexport default script","\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"heading\"></div>\r\n        <div class=\"content\">\r\n            <div class=\"clock-frame\">\r\n                <canvas ref=\"clockRef\" width=\"200\" height=\"200\" style=\"background-color:white\"></canvas>\r\n            </div>\r\n            <div class=\"controls\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n// todo: click and choose time\r\n// todo: data transfer\r\nimport {defineComponent, onMounted, ref} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"TimePicker\",\r\n    // data() {\r\n    //   return {\r\n    //     clockHours: [],\r\n    //     clockMinutes: [],\r\n    //   }\r\n    // },\r\n    setup() {\r\n        const clockHours = ref<number[]>([]);\r\n        const clockMinutes = ref<number[]>([]);\r\n        const clockRef = ref<any>(null)\r\n\r\n        for (let i = 0; i < 12; i++) {\r\n            clockHours.value.push(i)\r\n        }\r\n\r\n\r\n        for (let i = 0; i <= 55; i = i + 5) {\r\n            clockMinutes.value.push(i)\r\n        }\r\n\r\n        onMounted(() => {\r\n            // the DOM element will be assigned to the ref after initial render\r\n            let canvas = clockRef.value;\r\n            let ctx = canvas.getContext('2d')\r\n            let radius = canvas.height / 2\r\n            ctx.translate(radius, radius);\r\n            radius = radius * 0.9\r\n            drawClock();\r\n\r\n\r\n            function drawClock() {\r\n                ctx.arc(0, 0, radius, 0, 2 * Math.PI);\r\n                ctx.fillStyle = \"lightGrey\";\r\n                ctx.fill();\r\n\r\n                drawFace(ctx, radius);\r\n                drawNumbers(ctx, radius);\r\n                drawTime(ctx, radius);\r\n            }\r\n\r\n            function drawFace(ctx: any, radius: number) {\r\n                ctx.beginPath();\r\n                ctx.arc(0, 0, 5, 0, 2 * Math.PI);\r\n                ctx.fillStyle = '#333';\r\n                ctx.fill();\r\n            }\r\n\r\n            function drawNumbers(ctx: any, radius: number) {\r\n                let ang, num;\r\n                ctx.font = \"18px arial\";\r\n                ctx.textBaseline = \"middle\";\r\n                ctx.textAlign = \"center\";\r\n\r\n                for (let num = 1; num < 13; num++) {\r\n                    ang = num * Math.PI / 6;\r\n                    ctx.rotate(ang);\r\n                    ctx.translate(0, -radius * 0.85);\r\n                    ctx.rotate(-ang);\r\n                    ctx.fillText(num.toString(), 0, 0);\r\n                    ctx.rotate(ang);\r\n                    ctx.translate(0, radius * 0.85);\r\n                    ctx.rotate(-ang);\r\n                }\r\n            }\r\n\r\n            function drawTime(ctx: any, radius: number) {\r\n                var now = new Date();\r\n                var hour = 5;\r\n                var minute = 15;\r\n                //hour\r\n                hour = hour % 12;\r\n                hour = (hour * Math.PI / 6);\r\n                drawHand(ctx, hour, radius * 0.5, 5);\r\n                //minute\r\n                minute = (minute * Math.PI / 30);\r\n                drawHand(ctx, minute, radius * 0.7, 3);\r\n            }\r\n\r\n            function drawHand(ctx: any, pos: any, length: number, width: number) {\r\n                ctx.beginPath();\r\n                ctx.lineWidth = width;\r\n                ctx.lineCap = \"round\";\r\n                ctx.moveTo(0, 0);\r\n                ctx.rotate(pos);\r\n                ctx.lineTo(0, -length);\r\n                ctx.stroke();\r\n                ctx.rotate(-pos);\r\n            }\r\n        })\r\n\r\n        return {\r\n            clockHours, clockMinutes, clockRef\r\n        }\r\n\r\n    },\r\n    // mounted() {\r\n    //   console.log('ref', this.$refs.clockRef)\r\n    //   let clockRef = this.$refs.clockRef;\r\n    //\r\n    // }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n\r\n</style>","\r\n// todo: click and choose time\r\n// todo: data transfer\r\nimport {defineComponent, onMounted, ref} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"TimePicker\",\r\n    // data() {\r\n    //   return {\r\n    //     clockHours: [],\r\n    //     clockMinutes: [],\r\n    //   }\r\n    // },\r\n    setup() {\r\n        const clockHours = ref<number[]>([]);\r\n        const clockMinutes = ref<number[]>([]);\r\n        const clockRef = ref<any>(null)\r\n\r\n        for (let i = 0; i < 12; i++) {\r\n            clockHours.value.push(i)\r\n        }\r\n\r\n\r\n        for (let i = 0; i <= 55; i = i + 5) {\r\n            clockMinutes.value.push(i)\r\n        }\r\n\r\n        onMounted(() => {\r\n            // the DOM element will be assigned to the ref after initial render\r\n            let canvas = clockRef.value;\r\n            let ctx = canvas.getContext('2d')\r\n            let radius = canvas.height / 2\r\n            ctx.translate(radius, radius);\r\n            radius = radius * 0.9\r\n            drawClock();\r\n\r\n\r\n            function drawClock() {\r\n                ctx.arc(0, 0, radius, 0, 2 * Math.PI);\r\n                ctx.fillStyle = \"lightGrey\";\r\n                ctx.fill();\r\n\r\n                drawFace(ctx, radius);\r\n                drawNumbers(ctx, radius);\r\n                drawTime(ctx, radius);\r\n            }\r\n\r\n            function drawFace(ctx: any, radius: number) {\r\n                ctx.beginPath();\r\n                ctx.arc(0, 0, 5, 0, 2 * Math.PI);\r\n                ctx.fillStyle = '#333';\r\n                ctx.fill();\r\n            }\r\n\r\n            function drawNumbers(ctx: any, radius: number) {\r\n                let ang, num;\r\n                ctx.font = \"18px arial\";\r\n                ctx.textBaseline = \"middle\";\r\n                ctx.textAlign = \"center\";\r\n\r\n                for (let num = 1; num < 13; num++) {\r\n                    ang = num * Math.PI / 6;\r\n                    ctx.rotate(ang);\r\n                    ctx.translate(0, -radius * 0.85);\r\n                    ctx.rotate(-ang);\r\n                    ctx.fillText(num.toString(), 0, 0);\r\n                    ctx.rotate(ang);\r\n                    ctx.translate(0, radius * 0.85);\r\n                    ctx.rotate(-ang);\r\n                }\r\n            }\r\n\r\n            function drawTime(ctx: any, radius: number) {\r\n                var now = new Date();\r\n                var hour = 5;\r\n                var minute = 15;\r\n                //hour\r\n                hour = hour % 12;\r\n                hour = (hour * Math.PI / 6);\r\n                drawHand(ctx, hour, radius * 0.5, 5);\r\n                //minute\r\n                minute = (minute * Math.PI / 30);\r\n                drawHand(ctx, minute, radius * 0.7, 3);\r\n            }\r\n\r\n            function drawHand(ctx: any, pos: any, length: number, width: number) {\r\n                ctx.beginPath();\r\n                ctx.lineWidth = width;\r\n                ctx.lineCap = \"round\";\r\n                ctx.moveTo(0, 0);\r\n                ctx.rotate(pos);\r\n                ctx.lineTo(0, -length);\r\n                ctx.stroke();\r\n                ctx.rotate(-pos);\r\n            }\r\n        })\r\n\r\n        return {\r\n            clockHours, clockMinutes, clockRef\r\n        }\r\n\r\n    },\r\n    // mounted() {\r\n    //   console.log('ref', this.$refs.clockRef)\r\n    //   let clockRef = this.$refs.clockRef;\r\n    //\r\n    // }\r\n})\r\n","import { render } from \"./TimePicker.vue?vue&type=template&id=32ef9e0d&scoped=true\"\nimport script from \"./TimePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./TimePicker.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-32ef9e0d\"\n\nexport default script","<template>\r\n    <Modal ref=\"ModalRef\">\r\n        <template v-slot:header>\r\n            <div>\r\n                <h2>\r\n                    <b>Create Draft Schedule</b>\r\n                </h2>\r\n            </div>\r\n        </template>\r\n        <template v-slot:body>\r\n            <div>\r\n                <div class=\"line-break my-4\"></div>\r\n                <form>\r\n                    <div>\r\n                        <div class=\"d-flex align-center\">\r\n                            <input type=\"radio\" name=\"source\" value=\"import\" class=\"mt-0 ml-0\" v-model=\"sourceMode\">\r\n                            <span v-tooltip.top=\"{content: 'Copies information from an employee’s personal work schedule in Affinity and pastes it into a current or future flexi schedule.',\r\n                                                  classes: 'tool-tip-width'}\">\r\n                                Copy from Affinity\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"mt-2 draft-option pa-2\">\r\n                            <div class=\"grey-wrapper\" v-if=\"sourceMode !== 'import'\"></div>\r\n                            <div>\r\n                                <span class=\"input-label\"\r\n                                      v-tooltip.top=\"{content: 'The date in the flexi schedule when copied information will start. </br> For example, if you copy a 5-day block from 1 April and start it on 11 July, it will run from 11- 15 July.'}\">Start On</span>\r\n                                <input class=\"input-box\" type=\"text\" v-model=\"scheduleStartDateText\"\r\n                                       @click=\"updateDateTime($event, 'ScheduleStartDate')\">\r\n                            </div>\r\n                            <div class=\"mt-2\">\r\n                                <span class=\"input-label\"\r\n                                      v-tooltip.top=\"{content: 'The number of days to copy.'}\">Number of Days</span>\r\n                                <input class=\"input-box\" type=\"text\" v-model=\"copyPersonalDuration\">\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"line-break my-4\"></div>\r\n                    <div>\r\n                        <div class=\"d-flex align-center\">\r\n                            <input type=\"radio\" value=\"copy\" name=\"source\" class=\"mt-0 ml-0\" v-model=\"sourceMode\">\r\n                            <span v-tooltip.top=\"{content: 'Copies information from a previous flexi schedule and pastes it into a current or future flexi schedule.',\r\n                             classes: 'tool-tip-width'}\">Copy from Flexi Schedules</span>\r\n                        </div>\r\n                        <div class=\"mt-2 draft-option pa-2\">\r\n                            <div class=\"grey-wrapper\" v-if=\"sourceMode !== 'copy'\"></div>\r\n                            <div>\r\n                                <span class=\"input-label\"\r\n                                      v-tooltip.top=\"{content: 'The date to copy from.'}\">From Date</span>\r\n                                <input class=\"input-box\" type=\"text\" v-model=\"copyFromDateText\"\r\n                                       @click=\"updateDateTime($event, 'copyFromDate')\">\r\n                            </div>\r\n                            <div class=\"mt-2\">\r\n                                <span class=\"input-label\"\r\n                                      v-tooltip.top=\"{content: 'The number of days to copy.'}\">Number of Days</span>\r\n                                <input class=\"input-box\" type=\"text\" v-model.number=\"copyToDateDuration\">\r\n                            </div>\r\n                            <div class=\"mt-2\">\r\n                                <span class=\"input-label\"\r\n                                      v-tooltip.top=\"{content: 'The date in the flexi schedule when copied information will start. </br> For example, if you copy a 5-day block from 1 April and start it on 11 July, it will run from 11- 15 July.'}\">Start On</span>\r\n                                <input class=\"input-box\" type=\"text\" v-model=\"targetDateText\"\r\n                                       @click=\"updateDateTime($event, 'targetDate')\">\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </form>\r\n\r\n                <div class=\"line-break my-4\"></div>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"container-half\">\r\n                        <div>\r\n                            Paste Options\r\n                        </div>\r\n                        <div class=\"px-2 mt-4\">\r\n                            <div class=\"d-flex align-center\">\r\n                                <input type=\"radio\" name=\"copyOption\" value=\"replace\" class=\"mt-0 ml-0\" v-model=\"copyOption\">\r\n                                <span v-tooltip.top='{content: \"When copied information is pasted in, it will replace all information on the days specified.\",\r\n                         classes: \"tool-tip-width\"}'>Replace All</span>\r\n                            </div>\r\n                            <div class=\"d-flex align-center mt-2\">\r\n                                <input type=\"radio\" name=\"copyOption\" value=\"merge\" class=\"mt-0 ml-0\" v-model=\"copyOption\">\r\n                                <span v-tooltip.top='{content: \"When copied information is pasted in, <br/> it will replace information on the days specified only if there is a conflict.\"}'>Merge</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"container-half\">\r\n                        <label>Exclude Worker Type</label>\r\n                        <multi-select class=\"mt-4 \"></multi-select>\r\n                    </div>\r\n\r\n                </div>\r\n                <date-picker ref=\"DatePickerRef\" :top=\"datePickerTop\" :left=\"datePickerLeft\"></date-picker>\r\n\r\n            </div>\r\n\r\n        </template>\r\n        <template v-slot:footer>\r\n            <div class=\"d-flex justify-end full-width mt-4\">\r\n                <button class=\"blue xsmall white--text mr-2\" @click=\"actionByMode\">Create</button>\r\n                <button class=\"orange xsmall white--text\" @click=\"cancel\">Cancel</button>\r\n            </div>\r\n        </template>\r\n\r\n    </Modal>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent} from \"vue\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport Dialog from \"@/components/dialog\";\r\nimport MultiSelect from \"@/components/common/MultiSelect.vue\";\r\nimport {WorkType} from \"@/store/lookupModule\";\r\n\r\nexport enum CopyOptions {\r\n    copy = 'replace',\r\n    merge = 'merge'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"DraftCreationDialog\",\r\n    components: {\r\n        Modal,\r\n        DatePicker,\r\n        MultiSelect\r\n    },\r\n    data() {\r\n        return {\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n            sourceMode: 'copy',\r\n            copyOption: 'replace',\r\n\r\n            //\r\n            scheduleStartDateText: '',\r\n            copyFromDateText: '',\r\n            targetDateText: '',\r\n\r\n            //\r\n            scheduleStartDate: moment(),\r\n            copyFromDate: moment(),\r\n            copyToDateDuration: 0,\r\n            targetDate: moment(),\r\n\r\n            //\r\n            dateTarget: '',\r\n            copyPersonalDuration: 0,\r\n\r\n            // multi select\r\n            selected: {},\r\n            options: [],\r\n            left: 0\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n        // this.toggleShow();\r\n        // this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n    },\r\n    methods: {\r\n        selectOption() {\r\n\r\n        },\r\n        resetData() {\r\n                this.datePickerTop = 0;\r\n                this.datePickerLeft = 0;\r\n                this.sourceMode = 'copy';\r\n                this.copyOption = 'replace';\r\n                this.scheduleStartDateText = '';\r\n                this.copyFromDateText = '';\r\n                this.targetDateText = '';\r\n                this.scheduleStartDate = moment();\r\n                this.copyFromDate = moment();\r\n                this.copyToDateDuration = 0;\r\n                this.targetDate = moment();\r\n                this.dateTarget = '';\r\n                this.copyPersonalDuration = 0;\r\n        },\r\n        toggleShow() {\r\n            this.resetData();\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        actionByMode() {\r\n            if (this.sourceMode === 'copy') {\r\n                this.createDraft();\r\n            } else {\r\n                this.importFromPersonal();\r\n            }\r\n        },\r\n\r\n        importFromPersonal() {\r\n            Dialog.loading()\r\n\r\n            let data = {\r\n                CopyFromPersonalSchedule: true,\r\n                EmployeeNumbers:  this.$store.state.EmployeeModule.employees.map((employee: any) => employee.employeeNo),\r\n                PersonalSchedCopyDurationInDays: this.copyPersonalDuration,\r\n                TargetDate: this.scheduleStartDate.format('DD/MMM/YYYY'),\r\n                CopyOption: this.copyOption,\r\n                ExcludedworkTypes: this.getExcludedWorkTypes()\r\n            }\r\n\r\n            Remote.CopyFlexSchedule(data)\r\n            .then(res => {\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n                this.$emit('reload');\r\n            })\r\n            .finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n        },\r\n\r\n        createDraft() {\r\n            Dialog.loading()\r\n\r\n            let data = {\r\n                CopyFromPersonalSchedule: false,\r\n                EmployeeNumbers: this.$store.state.EmployeeModule.employees.map((employee: any) => employee.employeeNo),\r\n\r\n                CopyFromDate: this.copyFromDate.format('DD/MMM/YYYY'),\r\n                CopyToDate: this.copyFromDate.add(this.copyToDateDuration - 1, 'days').format('DD/MMM/YYYY'),\r\n                TargetDate: this.targetDate.format('DD/MMM/YYYY'),\r\n                CopyOption: this.copyOption,\r\n                ExcludedworkTypes: this.getExcludedWorkTypes()\r\n            }\r\n            Remote.CopyFlexSchedule(data)\r\n            .then(res => {\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n                this.$emit('reload');\r\n            })\r\n            .finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n        },\r\n\r\n        getExcludedWorkTypes(): number[] {\r\n            let selectedWorkTypes = this.$store.state.LookUp.workTypes.filter((workType: WorkType) => {\r\n                return workType.isSelected\r\n            })\r\n\r\n            if ( selectedWorkTypes.length < 1 ) {\r\n                selectedWorkTypes = this.$store.state.FlexSchedule.defaultWorkTypes\r\n            }\r\n\r\n            return selectedWorkTypes.map((workType: WorkType) => {\r\n                return workType.code\r\n            })\r\n        },\r\n\r\n        async updateDateTime($event: any, selectedDateTarget: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n\r\n            try {\r\n                switch (selectedDateTarget) {\r\n                    case 'ScheduleStartDate' :\r\n                        this.scheduleStartDate = await (this.$refs.DatePickerRef as any).toggleShow(this.scheduleStartDate);\r\n                        this.scheduleStartDateText = this.scheduleStartDate.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'copyFromDate' :\r\n                        this.copyFromDate = await (this.$refs.DatePickerRef as any).toggleShow(this.copyFromDate);\r\n                        this.copyFromDateText = this.copyFromDate.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'targetDate' :\r\n                        this.targetDate = await (this.$refs.DatePickerRef as any).toggleShow(this.targetDate);\r\n                        this.targetDateText = this.targetDate.format('DD/MM/YYYY')\r\n                        return;\r\n\r\n                }\r\n            } catch (e) {\r\n                return\r\n            }\r\n        },\r\n        cancel() {\r\n            this.toggleShow();\r\n        }\r\n\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n//@use '../../style/colors';\r\n    .line-break {\r\n        border-top: 1px solid rgba(#7e7e7e, 0.5);\r\n    }\r\n\r\n    .input-label {\r\n        display: inline-block;\r\n        width: 140px;\r\n    }\r\n\r\n    .input-box {\r\n        width: 100px;\r\n        padding: 4px 12px;\r\n        border: 1px solid #767676;\r\n        font-size: 12px;\r\n        border-radius: 4px;\r\n    }\r\n\r\n    .grey-wrapper {\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        right: 0;\r\n        left: 0;\r\n        background: rgba(0,0,0,.12);\r\n        border-radius: 5px;\r\n        z-index: 1\r\n    }\r\n\r\n    .draft-option {\r\n        position: relative;\r\n    }\r\n\r\n    input[type=radio] {\r\n        cursor: pointer;\r\n    }\r\n\r\n    .container-half {\r\n        width: 50%;\r\n        flex-shrink: 0;\r\n        flex-grow: 0;\r\n    }\r\n\r\n\r\n</style>","<template>\r\n    <div>\r\n        <span>\r\n            <div class=\"custom-select\" tabindex=\"1\" ref=\"selectRef\">\r\n                <div class=\"custom-select-selected\">\r\n                    <span v-for=\"(option, index) of options\">\r\n                        <span v-if=\"option.isSelected\">{{option['description']}}</span>\r\n                    </span>\r\n                </div>\r\n                <div class=\"custom-select-items\" v-bind:style=\"{ 'left': left + 'px'}\">\r\n                    <div class=\"custom-select-item\"\r\n                         v-for=\"(option, index) of options\" :key=\"index\">\r\n                        <div class=\"cell-config\" @click=\"option.isSelected = !option.isSelected\">\r\n<!--                            <label></label>-->\r\n                            <input type=\"checkbox\" class=\"ma-0 vert-mid\" v-model=\"option.isSelected\" />\r\n                            <label class=\"ml-2 vert-mid\" >{{ option['description'] }}</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"CustomSelect\",\r\n    data() {\r\n        return {\r\n            options: [],\r\n            left: 0,\r\n            selected: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n        this.options = this.$store.state.LookUp.workTypes;\r\n\r\n    },\r\n    methods: {\r\n\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-select-selected:after {\r\n    top: calc(50% - 3px);\r\n    right: 10px;\r\n}\r\n\r\n.custom-select-selected {\r\n    padding: 8px 10px;\r\n    min-height: 35px;\r\n\r\n    //padding: 8px 10px;\r\n    //min-height: 35px;\r\n    max-width: 141px;\r\n    //overflow: hidden;\r\n    max-height: 35px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n\r\n}\r\n\r\n.custom-select-items {\r\n    position: fixed;\r\n    width: 150px;\r\n}\r\n\r\n.custom-select-empty-selected {\r\n    display: inline-block;\r\n    width: 1px;\r\n    height: 15px;\r\n}\r\n\r\n.cell-config {\r\n    label {\r\n        cursor: pointer;\r\n    }\r\n}\r\n\r\n.vert-mid {\r\n    vertical-align: middle;\r\n}\r\n</style>","\r\nimport {defineComponent, ref} from \"vue\";\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"CustomSelect\",\r\n    data() {\r\n        return {\r\n            options: [],\r\n            left: 0,\r\n            selected: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n        this.options = this.$store.state.LookUp.workTypes;\r\n\r\n    },\r\n    methods: {\r\n\r\n    }\r\n\r\n})\r\n","import { render } from \"./MultiSelect.vue?vue&type=template&id=678d974a&scoped=true\"\nimport script from \"./MultiSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./MultiSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./MultiSelect.vue?vue&type=style&index=0&id=678d974a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-678d974a\"\n\nexport default script","\r\nimport {defineComponent} from \"vue\";\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport Dialog from \"@/components/dialog\";\r\nimport MultiSelect from \"@/components/common/MultiSelect.vue\";\r\nimport {WorkType} from \"@/store/lookupModule\";\r\n\r\nexport enum CopyOptions {\r\n    copy = 'replace',\r\n    merge = 'merge'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"DraftCreationDialog\",\r\n    components: {\r\n        Modal,\r\n        DatePicker,\r\n        MultiSelect\r\n    },\r\n    data() {\r\n        return {\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n            sourceMode: 'copy',\r\n            copyOption: 'replace',\r\n\r\n            //\r\n            scheduleStartDateText: '',\r\n            copyFromDateText: '',\r\n            targetDateText: '',\r\n\r\n            //\r\n            scheduleStartDate: moment(),\r\n            copyFromDate: moment(),\r\n            copyToDateDuration: 0,\r\n            targetDate: moment(),\r\n\r\n            //\r\n            dateTarget: '',\r\n            copyPersonalDuration: 0,\r\n\r\n            // multi select\r\n            selected: {},\r\n            options: [],\r\n            left: 0\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n        // this.toggleShow();\r\n        // this.left = (this.$refs as any).selectRef.getClientRects()[0].left;\r\n    },\r\n    methods: {\r\n        selectOption() {\r\n\r\n        },\r\n        resetData() {\r\n                this.datePickerTop = 0;\r\n                this.datePickerLeft = 0;\r\n                this.sourceMode = 'copy';\r\n                this.copyOption = 'replace';\r\n                this.scheduleStartDateText = '';\r\n                this.copyFromDateText = '';\r\n                this.targetDateText = '';\r\n                this.scheduleStartDate = moment();\r\n                this.copyFromDate = moment();\r\n                this.copyToDateDuration = 0;\r\n                this.targetDate = moment();\r\n                this.dateTarget = '';\r\n                this.copyPersonalDuration = 0;\r\n        },\r\n        toggleShow() {\r\n            this.resetData();\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        actionByMode() {\r\n            if (this.sourceMode === 'copy') {\r\n                this.createDraft();\r\n            } else {\r\n                this.importFromPersonal();\r\n            }\r\n        },\r\n\r\n        importFromPersonal() {\r\n            Dialog.loading()\r\n\r\n            let data = {\r\n                CopyFromPersonalSchedule: true,\r\n                EmployeeNumbers:  this.$store.state.EmployeeModule.employees.map((employee: any) => employee.employeeNo),\r\n                PersonalSchedCopyDurationInDays: this.copyPersonalDuration,\r\n                TargetDate: this.scheduleStartDate.format('DD/MMM/YYYY'),\r\n                CopyOption: this.copyOption,\r\n                ExcludedworkTypes: this.getExcludedWorkTypes()\r\n            }\r\n\r\n            Remote.CopyFlexSchedule(data)\r\n            .then(res => {\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n                this.$emit('reload');\r\n            })\r\n            .finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n        },\r\n\r\n        createDraft() {\r\n            Dialog.loading()\r\n\r\n            let data = {\r\n                CopyFromPersonalSchedule: false,\r\n                EmployeeNumbers: this.$store.state.EmployeeModule.employees.map((employee: any) => employee.employeeNo),\r\n\r\n                CopyFromDate: this.copyFromDate.format('DD/MMM/YYYY'),\r\n                CopyToDate: this.copyFromDate.add(this.copyToDateDuration - 1, 'days').format('DD/MMM/YYYY'),\r\n                TargetDate: this.targetDate.format('DD/MMM/YYYY'),\r\n                CopyOption: this.copyOption,\r\n                ExcludedworkTypes: this.getExcludedWorkTypes()\r\n            }\r\n            Remote.CopyFlexSchedule(data)\r\n            .then(res => {\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n                this.$emit('reload');\r\n            })\r\n            .finally(() => {\r\n                // Dialog.clear();\r\n            })\r\n        },\r\n\r\n        getExcludedWorkTypes(): number[] {\r\n            let selectedWorkTypes = this.$store.state.LookUp.workTypes.filter((workType: WorkType) => {\r\n                return workType.isSelected\r\n            })\r\n\r\n            if ( selectedWorkTypes.length < 1 ) {\r\n                selectedWorkTypes = this.$store.state.FlexSchedule.defaultWorkTypes\r\n            }\r\n\r\n            return selectedWorkTypes.map((workType: WorkType) => {\r\n                return workType.code\r\n            })\r\n        },\r\n\r\n        async updateDateTime($event: any, selectedDateTarget: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n\r\n            try {\r\n                switch (selectedDateTarget) {\r\n                    case 'ScheduleStartDate' :\r\n                        this.scheduleStartDate = await (this.$refs.DatePickerRef as any).toggleShow(this.scheduleStartDate);\r\n                        this.scheduleStartDateText = this.scheduleStartDate.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'copyFromDate' :\r\n                        this.copyFromDate = await (this.$refs.DatePickerRef as any).toggleShow(this.copyFromDate);\r\n                        this.copyFromDateText = this.copyFromDate.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'targetDate' :\r\n                        this.targetDate = await (this.$refs.DatePickerRef as any).toggleShow(this.targetDate);\r\n                        this.targetDateText = this.targetDate.format('DD/MM/YYYY')\r\n                        return;\r\n\r\n                }\r\n            } catch (e) {\r\n                return\r\n            }\r\n        },\r\n        cancel() {\r\n            this.toggleShow();\r\n        }\r\n\r\n    }\r\n})\r\n","import { render } from \"./DraftCreationDialog.vue?vue&type=template&id=2983fbc4&scoped=true\"\nimport script from \"./DraftCreationDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./DraftCreationDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./DraftCreationDialog.vue?vue&type=style&index=0&id=2983fbc4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2983fbc4\"\n\nexport default script","<template>\r\n    <Modal ref=\"ModalRef\">\r\n        <template v-slot:header>\r\n            <h2 class=\"bold\">Employee Details</h2>\r\n        </template>\r\n        <template v-slot:body>\r\n            <div class=\"mt-4\">\r\n                <cf-widget :title=\"title\" icon=\"\" class=\"my-pay-widget\" :data=\"externalDetail\" :loading=\"loading\" :error=\"error\"></cf-widget>\r\n            </div>\r\n\r\n\r\n        </template>\r\n        <template v-slot:footer>\r\n            <div class=\"mt-4\">\r\n                <button class=\"grey small white--text\" @click=\"toggleShow\">Close</button>\r\n            </div>\r\n\r\n        </template>\r\n\r\n    </Modal>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport {defineComponent} from \"vue\";\r\nimport CfWidget from './Search/cf-widget/index.vue';\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"TestEmployeeList\",\r\n    components: {\r\n        Modal,\r\n        CfWidget\r\n    },\r\n    props: {\r\n        externalDetail: {\r\n            type: Array\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            // extraDetail: [],\r\n            title: 'data title',\r\n            loading: false,\r\n            error: null\r\n        }\r\n    },\r\n    mounted() {\r\n        // Remote.GetEmployeeExtraDetail(102).then(res => {\r\n        //     console.log('res', res)\r\n        //     this.extraDetail = res\r\n        //\r\n        // })\r\n    },\r\n    methods: {\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n    .my-pay-widget {\r\n        min-width: 410px;\r\n    }\r\n</style>","<template>\r\n    <div class=\"cf-widget\">\r\n        <component\r\n            v-for=\"(item, index) in items\"\r\n            :is=\"item.Type\"\r\n            :data=\"item\"\r\n            class=\"item\"\r\n            :key=\"index\">\r\n        </component>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport FieldDisplay from \"./field-display.vue\";\r\nimport Separator from \"./separator-line.vue\";\r\nimport YoutubeInput from \"./youtube-input.vue\";\r\nimport Paragraph from \"./paragraph.vue\";\r\nimport Explanation from \"./explanation-text.vue\";\r\nimport AttachFile from \"./attach-file.vue\";\r\nimport Subheading from \"./subheading.vue\";\r\nimport Link from \"./url-link.vue\";\r\n\r\nexport default {\r\n  props: [\"title\", \"icon\", \"data\", \"loading\", \"error\"],\r\n  components: {\r\n    FieldDisplay,\r\n    Separator,\r\n    YoutubeInput,\r\n    Paragraph,\r\n    Explanation,\r\n    AttachFile,\r\n    Subheading,\r\n    Link\r\n  },\r\n  computed: {\r\n    items() {\r\n      if (this.data) {\r\n        return this.data.filter(item => {\r\n          return (\r\n            item.Type === \"Separator\" ||\r\n            item.Type === \"Subheading\" ||\r\n            item.Type === \"Explanation\" ||\r\n            item.Type === \"Paragraph\" ||\r\n            item.Type === \"YoutubeInput\" ||\r\n            item.Type === \"Link\" ||\r\n            item.Value\r\n          );\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n.cf-widget {\r\n  .item {\r\n    display: table;\r\n    width: 100%;\r\n    height: 20px;\r\n  }\r\n\r\n  .label {\r\n    display: table-cell;\r\n  }\r\n\r\n  .value {\r\n    display: table-cell;\r\n    text-align: right;\r\n  }\r\n\r\n  .subheading .label {\r\n    font-weight: bold;\r\n  }\r\n\r\n  .youtube-input {\r\n    display: block;\r\n    height: auto;\r\n    text-align: center;\r\n  }\r\n\r\n  .explanation {\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    background: #ccc;\r\n    margin: 0;\r\n  }\r\n}\r\n</style>\r\n","\r\n<template>\r\n    <div class=\"field-display\">\r\n        <div class=\"label\">{{ data.Label }}</div>\r\n        <a v-if=\"email\" :href=\"email\" class=\"value\">{{ data.Value }}</a>\r\n        <a v-if=\"!email && tel\" :href=\"tel\" class=\"value\">{{ data.Value }}</a>\r\n        <div v-if=\"!email && !tel\" class=\"value\">{{ data.Value }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['data'],\r\n        computed: {\r\n            tel() {\r\n                return typeof this.data.Key == 'string'\r\n                    && (this.data.Key.includes('Phone') || this.data.Key.includes('Mobile'))\r\n                        ? `tel:${ this.data.Value }` : null;\r\n\r\n                return null;\r\n            },\r\n            email() {\r\n                return typeof this.data.Value == 'string' && this.data.Value.includes('@')\r\n                    ? `mailto:${ this.data.Value }` : null;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import { render } from \"./field-display.vue?vue&type=template&id=75aa3684\"\nimport script from \"./field-display.vue?vue&type=script&lang=js\"\nexport * from \"./field-display.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","\r\n<template>\r\n    <div class=\"separator\"></div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n\r\n    }\r\n</script>\r\n","import { render } from \"./separator-line.vue?vue&type=template&id=32d12991\"\nimport script from \"./separator-line.vue?vue&type=script&lang=js\"\nexport * from \"./separator-line.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n    <div class=\"youtube-input\">\r\n        <iframe class=\"video-frame\" :src=\"'//www.youtube.com/embed/' + data.Value + '?autoplay=0&controls=1&rel=0&showinfo=0&theme=light&modestbranding=1'\"></iframe>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['data']\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .youtube-input {\r\n        display: block;\r\n        height: auto;\r\n        text-align: center;\r\n    }\r\n</style>\r\n","import { render } from \"./youtube-input.vue?vue&type=template&id=04262304\"\nimport script from \"./youtube-input.vue?vue&type=script&lang=js\"\nexport * from \"./youtube-input.vue?vue&type=script&lang=js\"\n\nimport \"./youtube-input.vue?vue&type=style&index=0&id=04262304&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n    <p>\r\n        {{ data.Label }}\r\n    </p>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['data']\r\n    }\r\n</script>\r\n\r\n\r\n","import { render } from \"./paragraph.vue?vue&type=template&id=1a3d454b\"\nimport script from \"./paragraph.vue?vue&type=script&lang=js\"\nexport * from \"./paragraph.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n    <p class=\"explanation\">\r\n        {{ data.Label }}\r\n    </p>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['data']\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .explanation {\r\n        padding: 10px;\r\n        box-sizing: border-box;\r\n        background: #ccc;\r\n        margin: 0;\r\n    }\r\n</style>\r\n","import { render } from \"./explanation-text.vue?vue&type=template&id=2c2f0c77\"\nimport script from \"./explanation-text.vue?vue&type=script&lang=js\"\nexport * from \"./explanation-text.vue?vue&type=script&lang=js\"\n\nimport \"./explanation-text.vue?vue&type=style&index=0&id=2c2f0c77&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n    <div class=\"attachment\">\r\n        <div class=\"label\">{{ data.Label }}</div>\r\n        <div class=\"value\">\r\n            <a href=\"#\">{{ data.Value.Display }}</a>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    export default {\r\n        props: ['data']\r\n    }\r\n</script>\r\n","import { render } from \"./attach-file.vue?vue&type=template&id=b6663116\"\nimport script from \"./attach-file.vue?vue&type=script&lang=js\"\nexport * from \"./attach-file.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","\r\n<template>\r\n    <div class=\"subheading\">\r\n        <div class=\"label\">{{ data.Label }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props: ['data']\r\n    }\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n    .subheading {\r\n        .label {\r\n            font-weight: bold;\r\n        }\r\n    }\r\n</style>\r\n","import { render } from \"./subheading.vue?vue&type=template&id=4f6ee34e\"\nimport script from \"./subheading.vue?vue&type=script&lang=js\"\nexport * from \"./subheading.vue?vue&type=script&lang=js\"\n\nimport \"./subheading.vue?vue&type=style&index=0&id=4f6ee34e&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n    <a v-bind:href=\"data.Value\">{{ data.Label }}</a>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"data\"]\r\n};\r\n</script>\r\n","import { render } from \"./url-link.vue?vue&type=template&id=33a826da\"\nimport script from \"./url-link.vue?vue&type=script&lang=js\"\nexport * from \"./url-link.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=8ad9aaf2\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=8ad9aaf2&lang=scss\"\nscript.render = render\n\nexport default script","\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport {defineComponent} from \"vue\";\r\nimport CfWidget from './Search/cf-widget/index.vue';\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"TestEmployeeList\",\r\n    components: {\r\n        Modal,\r\n        CfWidget\r\n    },\r\n    props: {\r\n        externalDetail: {\r\n            type: Array\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            // extraDetail: [],\r\n            title: 'data title',\r\n            loading: false,\r\n            error: null\r\n        }\r\n    },\r\n    mounted() {\r\n        // Remote.GetEmployeeExtraDetail(102).then(res => {\r\n        //     console.log('res', res)\r\n        //     this.extraDetail = res\r\n        //\r\n        // })\r\n    },\r\n    methods: {\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ExtraEmpDetail.vue?vue&type=template&id=3e8387ea&scoped=true\"\nimport script from \"./ExtraEmpDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ExtraEmpDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ExtraEmpDetail.vue?vue&type=style&index=0&id=3e8387ea&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3e8387ea\"\n\nexport default script","<template>\r\n    <table class=\"flex-sche-table print-only\" id=\"FlexSchedules\">\r\n        <thead>\r\n            <tr class=\"table-head\">\r\n                <th class=\"table-cell\"></th>\r\n                <th class=\"table-cell\">Std Hours</th>\r\n                <th class=\"table-cell\">Net Hours</th>\r\n                <th class=\"table-cell\" v-for=\"weekDay in weekDays\">\r\n                    {{ weekDay.day }}\r\n                </th>\r\n\r\n            </tr>\r\n        </thead>\r\n        <tbody class=\"table-body\">\r\n            <tr class=\"schedules-arr\" v-for=\"(empNo) in scheduleWeek.keys()\">\r\n                <td class=\"content-cell content-employee-name\" @click=\"openEmployeeDetail(empNo)\">{{ scheduleWeek.get(empNo).EmployeeName }}</td>\r\n                <td class=\"content-cell\">{{ scheduleWeek.get(empNo).StdHoursPerWeek.toFixed(2) }}</td>\r\n                <td class=\"content-cell\">{{getTotalHour(scheduleWeek.get(empNo).sche)}}</td>\r\n                <td class=\"content-cell\" v-for=\"scheDay in scheduleWeek.get(empNo).sche\" v-bind:style=\"scheDay.column\">\r\n<!--                    <dynamic-day-cell :scheDay=\"scheDay\" @openEditDialog=\"openEditDialog\"></dynamic-day-cell>-->\r\n                    <div>{{ scheDay.startTime }} - {{ scheDay.endTime }}</div>\r\n                    <div v-if=\"scheDay.leaveUnit\" class=\"leave-unit mt-2\">\r\n                        <span v-if=\"scheDay.leaveUnit.calcUnit === 'D'\">Leave: {{scheDay.leaveUnit.daysAppliedFor}} day</span>\r\n                        <span v-else >Leave: {{scheDay.leaveUnit.hoursAppliedFor}} hours</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {ScheduleDay} from \"@/components/FlexSchedule/schedule-day-mock\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"PrintableView\",\r\n    props: {\r\n        scheduleWeek: {\r\n            type: Object\r\n        },\r\n        weekDays: {\r\n            type: Array\r\n        }\r\n    },\r\n    methods: {\r\n        getTotalHour(sche: ScheduleDay[]) {\r\n            let totalHours = 0;\r\n            for (let day of sche) {\r\n                if (day.hours) {\r\n                    totalHours += day.hours\r\n                }\r\n            }\r\n            return totalHours.toFixed(2)\r\n        },\r\n\r\n        printFlexSchedule() {\r\n            var args = \"left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1\";\r\n            var content = (document as any).getElementById(\"FlexSchedules\").outerHTML;\r\n            var mywindow: any = window.open('', 'Print', args);\r\n\r\n            // https://stackoverflow.com/questions/65569790/import-scss-as-string\r\n            const printStyle = require(\"!!css-loader!sass-loader!./PrintableView.scss\").toString();\r\n\r\n            mywindow.document.write('<html>');\r\n            mywindow.document.write('<head>');\r\n            mywindow.document.write('<style type=\"text/css\">table {border-collapse: collapse;}</style>');\r\n            mywindow.document.write('<style type=\"text/css\">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>');\r\n            mywindow.document.write(`<style type=\"text/css\">${printStyle}</style>`);\r\n            mywindow.document.write('</head>');\r\n            mywindow.document.write('<body>');\r\n            mywindow.document.write(content);\r\n            mywindow.document.write('</body></html>');\r\n\r\n            mywindow.document.close();\r\n            mywindow.focus()\r\n            mywindow.print();\r\n            mywindow.close();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use 'PrintableView';\r\n</style>","\r\nimport {ScheduleDay} from \"@/components/FlexSchedule/schedule-day-mock\";\r\nimport {defineComponent} from \"vue\";\r\n\r\nexport default defineComponent({\r\n    name: \"PrintableView\",\r\n    props: {\r\n        scheduleWeek: {\r\n            type: Object\r\n        },\r\n        weekDays: {\r\n            type: Array\r\n        }\r\n    },\r\n    methods: {\r\n        getTotalHour(sche: ScheduleDay[]) {\r\n            let totalHours = 0;\r\n            for (let day of sche) {\r\n                if (day.hours) {\r\n                    totalHours += day.hours\r\n                }\r\n            }\r\n            return totalHours.toFixed(2)\r\n        },\r\n\r\n        printFlexSchedule() {\r\n            var args = \"left=5,top=5,resizable=yes,height=600,width=700,scrollbars=yes,status=1\";\r\n            var content = (document as any).getElementById(\"FlexSchedules\").outerHTML;\r\n            var mywindow: any = window.open('', 'Print', args);\r\n\r\n            // https://stackoverflow.com/questions/65569790/import-scss-as-string\r\n            const printStyle = require(\"!!css-loader!sass-loader!./PrintableView.scss\").toString();\r\n\r\n            mywindow.document.write('<html>');\r\n            mywindow.document.write('<head>');\r\n            mywindow.document.write('<style type=\"text/css\">table {border-collapse: collapse;}</style>');\r\n            mywindow.document.write('<style type=\"text/css\">table, th, td {border: 1px solid #cbcbcb;text-align: center;}</style>');\r\n            mywindow.document.write(`<style type=\"text/css\">${printStyle}</style>`);\r\n            mywindow.document.write('</head>');\r\n            mywindow.document.write('<body>');\r\n            mywindow.document.write(content);\r\n            mywindow.document.write('</body></html>');\r\n\r\n            mywindow.document.close();\r\n            mywindow.focus()\r\n            mywindow.print();\r\n            mywindow.close();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./PrintableView.vue?vue&type=template&id=9f124e66&scoped=true\"\nimport script from \"./PrintableView.vue?vue&type=script&lang=ts\"\nexport * from \"./PrintableView.vue?vue&type=script&lang=ts\"\n\nimport \"./PrintableView.vue?vue&type=style&index=0&id=9f124e66&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-9f124e66\"\n\nexport default script","<template>\r\n    <Modal ref=\"ModalRef\" @cancel=\"cancelModal\" :modalIndex=\"modalIndex\">\r\n        <template v-slot:header>\r\n            <div class=\"d-flex justify-center\">\r\n                <h3>Roster Analysis</h3>\r\n            </div>\r\n        </template>\r\n        <template v-slot:body>\r\n            <div class=\"mt-4 full-width\">\r\n                <div>\r\n                    <label>Choose Date:</label>\r\n                    <input :value=\"$filters.reformatDate(selectedDate)\"\r\n                           class=\"d-inline-flex ma-0 pa-0 mr-2 ml-2 caption analysis-date-input\" style=\"max-width:120px\"\r\n                           @change=\"updateDateText($event, selectedDate)\"\r\n                           @click=\"updateDateTime($event, selectedDate )\"\r\n                           @click:clear=\"toDate = null\">\r\n                </div>\r\n\r\n                <div v-if=\"chartDatasets.length === 0\" class=\"d-flex justify-center mt-4\">\r\n                    <h3 v-if=\"selectedDate === null\" class=\"choose-date-info\">Choose a day above to view the roster</h3>\r\n                    <h3 v-else-if=\"chartDatasets.length === 0\" class=\"choose-date-info\">There's no one rostered on this day. Please choose another day.</h3>\r\n                </div>\r\n\r\n                <div class=\"analysisChart\" v-show=\"chartDatasets.length > 0\">\r\n                    <canvas class=\"axis-canvas\" id=\"myChartHeader\" height=\"39\" ref=\"myChartHeaderRef\"></canvas>\r\n                    <div class=\"main-canvas-wrapper\">\r\n                        <div class=\"myChart-wrapper\" v-bind:style=\"{height: canvasHeight + 'px'}\">\r\n                            <canvas class=\"main-canvas\" ref=\"myChartRef\" id=\"myChart\" colours=\"[ { fillColor: '#ffff00' }, { fillColor: '#0066ff' } ]\" ></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n    </Modal>\r\n    <date-picker ref=\"DatePickerRef\"\r\n                 :top=\"dateModalTop\"\r\n                 :leftInput=\"dateModalLeft\"\r\n                 :date=\"datePickerTargetDay\"></date-picker>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Chart from \"chart.js/auto\";\r\nimport 'chartjs-adapter-moment';\r\n\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {AnimationEvent} from \"chart.js/types/animation\";\r\nimport {ChartConfiguration} from \"chart.js\";\r\nimport {FlexScheduleRequest} from \"@/components/FlexSchedule/FlexScheduleInterface\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport Dialog from \"@/components/dialog\";\r\ndeclare var Affinity: any\r\n\r\nlet MyChart = <any>null;\r\n\r\nexport default defineComponent ({\r\n    name: \"AnalysisChart\",\r\n    components: {\r\n        Modal,\r\n        DatePicker,\r\n    },\r\n    props: {\r\n        modalIndex: {\r\n            type: Number\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            selectedDate: <Moment | null> null,\r\n            dateModal: false,\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n            datePickerTargetDay: <Moment | null> moment(),\r\n\r\n            chartLabels: <any[]>[],\r\n            chartDatasets: <any[]>[],\r\n            min: 0,\r\n            max: 100,\r\n\r\n            canvasHeight: 1,\r\n            // myChart: <any>null,\r\n            myChartHeader: <any>null,\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        const myChartRef = ref<InstanceType<typeof HTMLCanvasElement>>();\r\n        const myChartHeaderRef = ref<InstanceType<typeof HTMLCanvasElement>>();\r\n\r\n        return {myChartRef, myChartHeaderRef}\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // var ctx = (document as any).getElementById('myChart')\r\n        },\r\n        updateDateText(event: any, target: any) {\r\n            this.selectedDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            this.dateModal = false;\r\n            // todo: add check for is correct format\r\n        },\r\n        updateDateTime($event: any, d: any) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n\r\n            this.datePickerTargetDay = this.selectedDate;\r\n\r\n            this.dateModal = true;\r\n            this.openDatePicker().then(res => {\r\n                this.prepareChartData();\r\n            }).catch(err => {\r\n                console.log('err', err)\r\n            })\r\n\r\n        },\r\n        async openDatePicker() {\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay)) as Promise<any>;\r\n            this.selectedDate = result as any\r\n            return result;\r\n        },\r\n\r\n        getData(targetDate: Moment) {\r\n            return this.getDateData(targetDate, targetDate)\r\n        },\r\n\r\n        async getDateData(startDate?: Moment, endDate?: Moment): Promise<any> {\r\n            let param = {}\r\n            if (startDate && endDate) {\r\n                param = {\r\n                    employeeNo: Affinity.user.EmployeeNo,\r\n                    startDate: startDate.format('YYYY-MM-DD'),\r\n                    endDate: endDate.format('YYYY-MM-DD'),\r\n                    forManagedEmployees: true,\r\n                }\r\n            }\r\n\r\n            return Remote.GetFlexSchedules(param).then((res: any) => {\r\n                return res.FlexSchedules\r\n            })\r\n        },\r\n\r\n        staticWorkersPerHour(dataSet: string[][]) {\r\n            let timeDataSet: Moment[][] = dataSet.map((dataSet: string[]) => {\r\n                return [moment(dataSet[0]), moment(dataSet[1])]\r\n            })\r\n\r\n            let staticList = Array(24).fill(0);\r\n\r\n            for (let timeRange of timeDataSet) {\r\n                let startTime = timeRange[0];\r\n                let endTime = timeRange[1];\r\n\r\n                let startWorkingHour = startTime.hour();\r\n                let workingLength =  endTime.diff(startTime, 'hour');\r\n\r\n                for (let i = 0; i < startWorkingHour + workingLength; i++) {\r\n                    if (i >= startWorkingHour) {\r\n                        staticList[i] = staticList[i] + 1;\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            return staticList;\r\n\r\n        },\r\n\r\n        prepareChartData() {\r\n            let testDate = moment(this.selectedDate);\r\n            Dialog.loading()\r\n\r\n            // return;\r\n            this.getData(testDate).then(res => {\r\n                Dialog.clear()\r\n                let schedules = res\r\n\r\n                let chartData = new Map();\r\n\r\n                for (const schedule of schedules) {\r\n                    if (schedule) {\r\n                        let employeeName = schedule.EmployeeName\r\n                        let originStartTime = moment(schedule.StartTime);\r\n                        let originEndTimeTime = moment(schedule.EndTime);\r\n\r\n                        let cleanStartTime = testDate.clone()\r\n                        cleanStartTime.hour(originStartTime.hour())\r\n                        cleanStartTime.minutes(originStartTime.minutes())\r\n\r\n                        let cleanEndTime = testDate.clone();\r\n                        cleanEndTime.hour(originEndTimeTime.hours());\r\n                        cleanEndTime.minutes(originEndTimeTime.minutes());\r\n\r\n                        let cleanSche = [\r\n                            cleanStartTime.toISOString(), cleanEndTime.toISOString()\r\n                        ]\r\n\r\n                        chartData.set(employeeName, cleanSche)\r\n                    }\r\n                }\r\n\r\n                let chartLabels = [...chartData.keys()];\r\n                let chartDatasets = [ ...chartData.values() ];\r\n                this.chartDatasets = chartDatasets;\r\n\r\n                let staticList = this.staticWorkersPerHour(chartDatasets)\r\n\r\n                let chartMin = moment(testDate).startOf('day').valueOf()\r\n                let chartMax = moment(testDate).endOf('day').valueOf()\r\n\r\n                this.canvasHeight = chartLabels.length * 20 + 100\r\n\r\n                if (MyChart) {\r\n                    if (chartLabels.length <= 0) {\r\n                        let targetCtx = this.myChartHeaderRef!.getContext(\"2d\");\r\n                        targetCtx!.clearRect(0, 0, this.myChartHeaderRef!.width, this.myChartHeaderRef!.height);\r\n\r\n                        console.info('destroy chart')\r\n                        MyChart.destroy();\r\n                        MyChart = null;\r\n                    } else {\r\n                        console.info('update chart')\r\n\r\n                        MyChart.options.scales.x.min = chartMin\r\n                        MyChart.options.scales.x.max = chartMax;\r\n                        MyChart.options.scales.x1.ticks = {\r\n                            callback: (value: any, index: any, values: any) => {\r\n                                return staticList[index];\r\n                            }\r\n                        };\r\n                        MyChart.data.labels = chartLabels\r\n                        MyChart.data.datasets[0].data = chartDatasets\r\n\r\n                        if (chartLabels.length <= 0) {\r\n                            MyChart.data.labels = [];\r\n                            MyChart.data.datasets = [];\r\n                            MyChart.options.scales.x.min = 0;\r\n                            MyChart.options.scales.x.max = 1;\r\n                        }\r\n                        MyChart.update();\r\n                    }\r\n                } else if (chartLabels.length <= 0) {\r\n                    // do nothing\r\n                } else {\r\n                    // create new\r\n                    console.info('create new chart')\r\n\r\n                    let ctx = (document as any).getElementById('myChart').getContext('2d');\r\n                    let _this = this;\r\n                    let config = {\r\n                        type: 'bar',\r\n                        data: {\r\n                            labels: chartLabels,\r\n                            datasets: [{\r\n                                label: 'Work Hours',\r\n                                data: chartDatasets,\r\n\r\n                                backgroundColor: [\r\n                                    'rgba(255, 99, 132, 0.2)',\r\n                                    'rgba(54, 162, 235, 0.2)',\r\n                                ],\r\n                                borderColor: [\r\n                                    'rgba(255, 99, 132, 1)',\r\n                                    'rgba(54, 162, 235, 1)',\r\n                                ],\r\n                                borderWidth: 2,\r\n                                borderSkipped: false\r\n                            }]\r\n                        },\r\n                        options: {\r\n                            responsive: true,\r\n                            maintainAspectRatio: false,\r\n                            indexAxis: 'y',\r\n                            scales: {\r\n                                x: {\r\n                                    id:'xAxis2',\r\n                                    backgroundColor: '#ffffff',\r\n                                    position: 'top',\r\n                                    type: 'time',\r\n                                    time: {\r\n                                        unit: 'hour',\r\n                                        displayFormats: {\r\n                                            hour: 'HH:mm'\r\n                                        }\r\n                                    },\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Time',\r\n                                    },\r\n                                    min: chartMin,\r\n                                    max: chartMax,\r\n                                    ticks: {\r\n                                        stepSize: 500000\r\n                                    }\r\n                                },\r\n                                x1: {\r\n                                    id:'xAxis1',\r\n                                    type:\"time\",\r\n                                    position: 'bottom',\r\n                                    gridLines: {\r\n                                        drawOnChartArea: false, // only want the grid lines for one axis to show up\r\n                                    },\r\n                                    time: {\r\n                                        unit: 'hour',\r\n                                        displayFormats: {\r\n                                            hour: 'HH:mm:ss'\r\n                                        }\r\n                                    },\r\n                                    min: chartMin,\r\n                                    max: chartMax,\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Working Employees / Hour',\r\n                                    },\r\n                                    ticks: {\r\n                                        callback: (value: any, index: any, values: any) => {\r\n                                            return staticList[index];\r\n                                        }\r\n                                    }\r\n                                },\r\n                            },\r\n                            plugins: {\r\n                                title: {\r\n                                    display: false,\r\n                                },\r\n                                legend: {\r\n                                    display: false,\r\n                                },\r\n                                tooltip: {\r\n                                    usePointStyle: true,\r\n                                    callbacks: {\r\n                                        label: function(tooltipItem: any) {\r\n                                            let timeRange = tooltipItem.raw;\r\n                                            return ` ${moment(timeRange[0]).format('HH:mm')} - ${moment(timeRange[1]).format('HH:mm')}`\r\n                                        },\r\n                                        labelPointStyle: function(context: any) {\r\n                                            return {\r\n                                                pointStyle: 'triangle',\r\n                                                rotation: 0\r\n                                            };\r\n                                        }\r\n                                    }\r\n                                },\r\n                            },\r\n                            animation: {\r\n                                onComplete: function (event: AnimationEvent) {\r\n                                    let sourceCanvas = (this as any).ctx.canvas;\r\n                                    let copyWidth = (this as any).canvas.width;\r\n                                    let copyHeight = (this as any).scales.x.height - 5;\r\n                                    let targetCtx = (_this as any).myChartHeaderRef!.getContext(\"2d\");\r\n                                    targetCtx.canvas.width = (this as any).canvas.width;\r\n                                    targetCtx.canvas.height = copyHeight;\r\n                                    targetCtx.drawImage(sourceCanvas, 0, 0, copyWidth, copyHeight, 0, 0, copyWidth, copyHeight);\r\n                                }\r\n                            }\r\n                        },\r\n                    }\r\n                    MyChart = new Chart(ctx!, config as any ) as any;\r\n                }\r\n\r\n            })\r\n            .catch(() => {\r\n                Dialog.clear();\r\n                Dialog.alert('Something Wrong. Please try again later')\r\n            });\r\n        },\r\n\r\n        cancelModal() {\r\n            if(MyChart) {\r\n                MyChart.destroy();\r\n                MyChart = null;\r\n                this.canvasHeight = 1;\r\n                console.log('destroy', MyChart)\r\n            }\r\n        }\r\n    },\r\n\r\n    beforeUnmount () {\r\n        if(MyChart) {\r\n            MyChart.destroy();\r\n            MyChart = null;\r\n            this.canvasHeight = 1;\r\n            console.log('destroy', MyChart)\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '../../style/colors';\r\n\r\n.choose-date-info {\r\n    font-weight: normal;\r\n    padding: 20px;\r\n    color: darken(colors.$dark-green, 30%);\r\n    background:  rgba(colors.$green, 0.5);\r\n    border: 1px solid rgba(colors.$green, 1);\r\n    border-radius: 3px;\r\n}\r\n\r\n#canvas {\r\n    width: 100%;\r\n    height: auto;\r\n    position: relative;\r\n    z-index: 0;\r\n}\r\n\r\n.analysisChart {\r\n    position: relative;\r\n    height: calc(100% - 25px);\r\n}\r\n\r\n.analysis-date-input {\r\n    padding: 4px 12px;\r\n    border: 1px solid #767676;\r\n    font-size: 12px;\r\n    border-radius: 4px;\r\n    width: 100px;\r\n}\r\n\r\n.axis-canvas {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    background: #ffffff;\r\n    pointer-events:none;\r\n    z-index: 1;\r\n}\r\n\r\n.main-canvas {\r\n    position: relative;\r\n}\r\n\r\n.myChart-wrapper {\r\n    min-height: 200px;\r\n    height: 100%;\r\n}\r\n\r\n.ml-2 {\r\n    margin-left: 8px;\r\n}\r\n\r\n.main-canvas-wrapper {\r\n    width: 820px;\r\n    height: 100%;\r\n    overflow: auto;\r\n}\r\n</style>","\r\nimport Chart from \"chart.js/auto\";\r\nimport 'chartjs-adapter-moment';\r\n\r\nimport Modal from \"@/components/common/Modal.vue\";\r\n\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport {AnimationEvent} from \"chart.js/types/animation\";\r\nimport {ChartConfiguration} from \"chart.js\";\r\nimport {FlexScheduleRequest} from \"@/components/FlexSchedule/FlexScheduleInterface\";\r\nimport Remote from \"@/remote/scheduleRequest\";\r\nimport Dialog from \"@/components/dialog\";\r\ndeclare var Affinity: any\r\n\r\nlet MyChart = <any>null;\r\n\r\nexport default defineComponent ({\r\n    name: \"AnalysisChart\",\r\n    components: {\r\n        Modal,\r\n        DatePicker,\r\n    },\r\n    props: {\r\n        modalIndex: {\r\n            type: Number\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            selectedDate: <Moment | null> null,\r\n            dateModal: false,\r\n            dateModalTop: 0,\r\n            dateModalLeft: 0,\r\n            datePickerTargetDay: <Moment | null> moment(),\r\n\r\n            chartLabels: <any[]>[],\r\n            chartDatasets: <any[]>[],\r\n            min: 0,\r\n            max: 100,\r\n\r\n            canvasHeight: 1,\r\n            // myChart: <any>null,\r\n            myChartHeader: <any>null,\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        const myChartRef = ref<InstanceType<typeof HTMLCanvasElement>>();\r\n        const myChartHeaderRef = ref<InstanceType<typeof HTMLCanvasElement>>();\r\n\r\n        return {myChartRef, myChartHeaderRef}\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n            // var ctx = (document as any).getElementById('myChart')\r\n        },\r\n        updateDateText(event: any, target: any) {\r\n            this.selectedDate = moment(event.target.value, 'DD/MM/YYYY')\r\n            this.dateModal = false;\r\n            // todo: add check for is correct format\r\n        },\r\n        updateDateTime($event: any, d: any) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.dateModalTop = element.bottom;\r\n            this.dateModalLeft = element.left;\r\n\r\n            this.datePickerTargetDay = this.selectedDate;\r\n\r\n            this.dateModal = true;\r\n            this.openDatePicker().then(res => {\r\n                this.prepareChartData();\r\n            }).catch(err => {\r\n                console.log('err', err)\r\n            })\r\n\r\n        },\r\n        async openDatePicker() {\r\n            let result = await ((this.$refs.DatePickerRef as any).toggleShow(this.datePickerTargetDay)) as Promise<any>;\r\n            this.selectedDate = result as any\r\n            return result;\r\n        },\r\n\r\n        getData(targetDate: Moment) {\r\n            return this.getDateData(targetDate, targetDate)\r\n        },\r\n\r\n        async getDateData(startDate?: Moment, endDate?: Moment): Promise<any> {\r\n            let param = {}\r\n            if (startDate && endDate) {\r\n                param = {\r\n                    employeeNo: Affinity.user.EmployeeNo,\r\n                    startDate: startDate.format('YYYY-MM-DD'),\r\n                    endDate: endDate.format('YYYY-MM-DD'),\r\n                    forManagedEmployees: true,\r\n                }\r\n            }\r\n\r\n            return Remote.GetFlexSchedules(param).then((res: any) => {\r\n                return res.FlexSchedules\r\n            })\r\n        },\r\n\r\n        staticWorkersPerHour(dataSet: string[][]) {\r\n            let timeDataSet: Moment[][] = dataSet.map((dataSet: string[]) => {\r\n                return [moment(dataSet[0]), moment(dataSet[1])]\r\n            })\r\n\r\n            let staticList = Array(24).fill(0);\r\n\r\n            for (let timeRange of timeDataSet) {\r\n                let startTime = timeRange[0];\r\n                let endTime = timeRange[1];\r\n\r\n                let startWorkingHour = startTime.hour();\r\n                let workingLength =  endTime.diff(startTime, 'hour');\r\n\r\n                for (let i = 0; i < startWorkingHour + workingLength; i++) {\r\n                    if (i >= startWorkingHour) {\r\n                        staticList[i] = staticList[i] + 1;\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            return staticList;\r\n\r\n        },\r\n\r\n        prepareChartData() {\r\n            let testDate = moment(this.selectedDate);\r\n            Dialog.loading()\r\n\r\n            // return;\r\n            this.getData(testDate).then(res => {\r\n                Dialog.clear()\r\n                let schedules = res\r\n\r\n                let chartData = new Map();\r\n\r\n                for (const schedule of schedules) {\r\n                    if (schedule) {\r\n                        let employeeName = schedule.EmployeeName\r\n                        let originStartTime = moment(schedule.StartTime);\r\n                        let originEndTimeTime = moment(schedule.EndTime);\r\n\r\n                        let cleanStartTime = testDate.clone()\r\n                        cleanStartTime.hour(originStartTime.hour())\r\n                        cleanStartTime.minutes(originStartTime.minutes())\r\n\r\n                        let cleanEndTime = testDate.clone();\r\n                        cleanEndTime.hour(originEndTimeTime.hours());\r\n                        cleanEndTime.minutes(originEndTimeTime.minutes());\r\n\r\n                        let cleanSche = [\r\n                            cleanStartTime.toISOString(), cleanEndTime.toISOString()\r\n                        ]\r\n\r\n                        chartData.set(employeeName, cleanSche)\r\n                    }\r\n                }\r\n\r\n                let chartLabels = [...chartData.keys()];\r\n                let chartDatasets = [ ...chartData.values() ];\r\n                this.chartDatasets = chartDatasets;\r\n\r\n                let staticList = this.staticWorkersPerHour(chartDatasets)\r\n\r\n                let chartMin = moment(testDate).startOf('day').valueOf()\r\n                let chartMax = moment(testDate).endOf('day').valueOf()\r\n\r\n                this.canvasHeight = chartLabels.length * 20 + 100\r\n\r\n                if (MyChart) {\r\n                    if (chartLabels.length <= 0) {\r\n                        let targetCtx = this.myChartHeaderRef!.getContext(\"2d\");\r\n                        targetCtx!.clearRect(0, 0, this.myChartHeaderRef!.width, this.myChartHeaderRef!.height);\r\n\r\n                        console.info('destroy chart')\r\n                        MyChart.destroy();\r\n                        MyChart = null;\r\n                    } else {\r\n                        console.info('update chart')\r\n\r\n                        MyChart.options.scales.x.min = chartMin\r\n                        MyChart.options.scales.x.max = chartMax;\r\n                        MyChart.options.scales.x1.ticks = {\r\n                            callback: (value: any, index: any, values: any) => {\r\n                                return staticList[index];\r\n                            }\r\n                        };\r\n                        MyChart.data.labels = chartLabels\r\n                        MyChart.data.datasets[0].data = chartDatasets\r\n\r\n                        if (chartLabels.length <= 0) {\r\n                            MyChart.data.labels = [];\r\n                            MyChart.data.datasets = [];\r\n                            MyChart.options.scales.x.min = 0;\r\n                            MyChart.options.scales.x.max = 1;\r\n                        }\r\n                        MyChart.update();\r\n                    }\r\n                } else if (chartLabels.length <= 0) {\r\n                    // do nothing\r\n                } else {\r\n                    // create new\r\n                    console.info('create new chart')\r\n\r\n                    let ctx = (document as any).getElementById('myChart').getContext('2d');\r\n                    let _this = this;\r\n                    let config = {\r\n                        type: 'bar',\r\n                        data: {\r\n                            labels: chartLabels,\r\n                            datasets: [{\r\n                                label: 'Work Hours',\r\n                                data: chartDatasets,\r\n\r\n                                backgroundColor: [\r\n                                    'rgba(255, 99, 132, 0.2)',\r\n                                    'rgba(54, 162, 235, 0.2)',\r\n                                ],\r\n                                borderColor: [\r\n                                    'rgba(255, 99, 132, 1)',\r\n                                    'rgba(54, 162, 235, 1)',\r\n                                ],\r\n                                borderWidth: 2,\r\n                                borderSkipped: false\r\n                            }]\r\n                        },\r\n                        options: {\r\n                            responsive: true,\r\n                            maintainAspectRatio: false,\r\n                            indexAxis: 'y',\r\n                            scales: {\r\n                                x: {\r\n                                    id:'xAxis2',\r\n                                    backgroundColor: '#ffffff',\r\n                                    position: 'top',\r\n                                    type: 'time',\r\n                                    time: {\r\n                                        unit: 'hour',\r\n                                        displayFormats: {\r\n                                            hour: 'HH:mm'\r\n                                        }\r\n                                    },\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Time',\r\n                                    },\r\n                                    min: chartMin,\r\n                                    max: chartMax,\r\n                                    ticks: {\r\n                                        stepSize: 500000\r\n                                    }\r\n                                },\r\n                                x1: {\r\n                                    id:'xAxis1',\r\n                                    type:\"time\",\r\n                                    position: 'bottom',\r\n                                    gridLines: {\r\n                                        drawOnChartArea: false, // only want the grid lines for one axis to show up\r\n                                    },\r\n                                    time: {\r\n                                        unit: 'hour',\r\n                                        displayFormats: {\r\n                                            hour: 'HH:mm:ss'\r\n                                        }\r\n                                    },\r\n                                    min: chartMin,\r\n                                    max: chartMax,\r\n                                    title: {\r\n                                        display: true,\r\n                                        text: 'Working Employees / Hour',\r\n                                    },\r\n                                    ticks: {\r\n                                        callback: (value: any, index: any, values: any) => {\r\n                                            return staticList[index];\r\n                                        }\r\n                                    }\r\n                                },\r\n                            },\r\n                            plugins: {\r\n                                title: {\r\n                                    display: false,\r\n                                },\r\n                                legend: {\r\n                                    display: false,\r\n                                },\r\n                                tooltip: {\r\n                                    usePointStyle: true,\r\n                                    callbacks: {\r\n                                        label: function(tooltipItem: any) {\r\n                                            let timeRange = tooltipItem.raw;\r\n                                            return ` ${moment(timeRange[0]).format('HH:mm')} - ${moment(timeRange[1]).format('HH:mm')}`\r\n                                        },\r\n                                        labelPointStyle: function(context: any) {\r\n                                            return {\r\n                                                pointStyle: 'triangle',\r\n                                                rotation: 0\r\n                                            };\r\n                                        }\r\n                                    }\r\n                                },\r\n                            },\r\n                            animation: {\r\n                                onComplete: function (event: AnimationEvent) {\r\n                                    let sourceCanvas = (this as any).ctx.canvas;\r\n                                    let copyWidth = (this as any).canvas.width;\r\n                                    let copyHeight = (this as any).scales.x.height - 5;\r\n                                    let targetCtx = (_this as any).myChartHeaderRef!.getContext(\"2d\");\r\n                                    targetCtx.canvas.width = (this as any).canvas.width;\r\n                                    targetCtx.canvas.height = copyHeight;\r\n                                    targetCtx.drawImage(sourceCanvas, 0, 0, copyWidth, copyHeight, 0, 0, copyWidth, copyHeight);\r\n                                }\r\n                            }\r\n                        },\r\n                    }\r\n                    MyChart = new Chart(ctx!, config as any ) as any;\r\n                }\r\n\r\n            })\r\n            .catch(() => {\r\n                Dialog.clear();\r\n                Dialog.alert('Something Wrong. Please try again later')\r\n            });\r\n        },\r\n\r\n        cancelModal() {\r\n            if(MyChart) {\r\n                MyChart.destroy();\r\n                MyChart = null;\r\n                this.canvasHeight = 1;\r\n                console.log('destroy', MyChart)\r\n            }\r\n        }\r\n    },\r\n\r\n    beforeUnmount () {\r\n        if(MyChart) {\r\n            MyChart.destroy();\r\n            MyChart = null;\r\n            this.canvasHeight = 1;\r\n            console.log('destroy', MyChart)\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./AnalysisChart.vue?vue&type=template&id=b0cd3b0c&scoped=true\"\nimport script from \"./AnalysisChart.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisChart.vue?vue&type=script&lang=ts\"\n\nimport \"./AnalysisChart.vue?vue&type=style&index=0&id=b0cd3b0c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-b0cd3b0c\"\n\nexport default script","\r\nimport {defineComponent, ref} from \"vue\";\r\nimport moment, {Moment} from \"moment\";\r\nimport {ScheduleDay} from \"./schedule-day-mock\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport EditFlexSchedule from \"@/components/FlexSchedule/EditFlexSchedule.vue\";\r\nimport DynamicDayCell from \"@/components/FlexSchedule/DynamicDayCell.vue\"\r\nimport {FlexScheduleMutation} from \"@/store/flexScheduleModule\";\r\nimport FlexScheduleCellControl from \"@/components/FlexSchedule/FlexScheduleCellControl.vue\";\r\nimport TimePicker from \"@/components/common/timePicker/TimePicker.vue\";\r\n\r\nimport {Icon} from '@iconify/vue';\r\nimport AutoComplete from \"@/components/common/AutoComplete.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport {LookupActions} from \"@/store/lookupModule\";\r\nimport DraftCreationDialog from \"@/components/FlexSchedule/DraftCreationDialog.vue\";\r\nimport Dialog from \"@/components/dialog\";\r\nimport {EmployeeActions, EmployeeGetters, ManagedEmployee} from \"@/store/employeeModule\";\r\nimport {\r\n    CFRemoteData,\r\n    FlexScheduleRequest,\r\n    FlexScheduleRequestCap\r\n} from \"@/components/FlexSchedule/FlexScheduleInterface\";\r\nimport ExtraEmpDetail from \"@/components/FlexSchedule/ExtraEmpDetail.vue\"\r\nimport PrintableView from \"@/components/FlexSchedule/Print/PrintableView.vue\";\r\nimport Chart from 'chart.js/auto';\r\nimport AnalysisChart from \"@/components/FlexSchedule/AnalysisChart.vue\";\r\n\r\ndeclare var Affinity: any\r\n\r\nexport enum WeeklyPublishStatus {\r\n    empty = '',\r\n    draft = 'draft',\r\n    published = 'published',\r\n    partial = 'partial'\r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"FlexSchedule\",\r\n    components: {\r\n        AnalysisChart,\r\n        PrintableView,\r\n        DraftCreationDialog,\r\n        DatePicker,\r\n        TimePicker,\r\n        EditFlexSchedule,\r\n        DynamicDayCell,\r\n        FlexScheduleCellControl,\r\n        Icon,\r\n        AutoComplete,\r\n        ExtraEmpDetail\r\n    },\r\n    data() {\r\n        return {\r\n            dayFocus: moment(),\r\n            weekDays: <any[]>[], // calendar week days name\r\n            scheduleWeek: <any[]>[], // list of data per week\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n            employeeList: <any>[],\r\n            scheduleWeekMap: new Map(),\r\n            weekStatus: WeeklyPublishStatus.empty,\r\n\r\n            //\r\n            showControl: false,\r\n            extraEmpDetail: [],\r\n            isAdmin: false,\r\n        }\r\n    },\r\n    setup() {\r\n        // const store = useStore()\r\n        // store.dispatch(FlexScheduleAction.loadTargetSchedule,6)\r\n        const DraftCreationDialogRef = ref<InstanceType<typeof DraftCreationDialog>>();\r\n        const EditModalRef = ref<InstanceType<typeof EditFlexSchedule>>();\r\n        const ExtraEmpDetailRef = ref<InstanceType<typeof ExtraEmpDetail>>();\r\n        const PrintableViewRef = ref<InstanceType<typeof PrintableView>>();\r\n        const AnalysisChartRef = ref<InstanceType<typeof AnalysisChart>>();\r\n\r\n        const isEditingDialog = ref(false);\r\n        const externalDetail = ref(<CFRemoteData[]>[])\r\n\r\n        function openDraftDialog() {\r\n            DraftCreationDialogRef.value!.toggleShow()\r\n        }\r\n\r\n        function openAnalysisChart() {\r\n            AnalysisChartRef.value!.toggleShow();\r\n        }\r\n\r\n        function openEditDialog(isEdit: false) {\r\n            isEditingDialog.value = isEdit;\r\n            EditModalRef.value!.openEdit();\r\n        }\r\n\r\n        function openEmployeeDetail(employeeNo: number) {\r\n            Dialog.loading()\r\n            Remote.GetEmployeeExtraDetail(employeeNo).then((res: CFRemoteData[]) => {\r\n                externalDetail.value = res.map((data: CFRemoteData) => {\r\n                    if (data.InputType === 'DateTime') {\r\n                        data.remoteKeyValue = data.KeyValue;\r\n                        data.remoteValue = data.Value;\r\n                        data.KeyValue = moment(data.KeyValue).format('ddd DD MMM YYYY');\r\n                        data.Value = moment(data.Value).format('ddd DD MMM YYYY');\r\n                    } else if (data.InputType === 'Double') {\r\n                        data.remoteKeyValue = data.KeyValue;\r\n                        data.remoteValue = data.Value;\r\n                        data.KeyValue = Math.round(data.KeyValue * 100) / 100;\r\n                        data.Value = Math.round(data.Value * 100) / 100;\r\n                    }\r\n                    return data\r\n                })\r\n                Dialog.clear()\r\n                ExtraEmpDetailRef.value!.toggleShow();\r\n            }, (e) => {\r\n                Dialog.clear()\r\n                Dialog.alert('Something went wrong')\r\n            })\r\n        }\r\n\r\n        function printFlexSchedule() {\r\n            PrintableViewRef.value!.printFlexSchedule();\r\n        }\r\n\r\n        return {openDraftDialog, openEditDialog, openEmployeeDetail, openAnalysisChart, printFlexSchedule,\r\n            DraftCreationDialogRef, EditModalRef, ExtraEmpDetailRef, PrintableViewRef, AnalysisChartRef,\r\n            isEditingDialog, externalDetail}\r\n    },\r\n    async mounted() {\r\n        this.$store.dispatch(LookupActions.getPositions, Affinity.user.EmployeeNo)\r\n        this.$store.dispatch(LookupActions.getShifts)\r\n        this.$store.dispatch(LookupActions.getCostElement)\r\n        this.$store.dispatch(LookupActions.getWorkTypes)\r\n\r\n        let weekStart = this.dayFocus.clone().startOf('week')\r\n        let weekEnd = this.dayFocus.clone().endOf('week')\r\n        this.loadDate(weekStart, weekEnd)\r\n\r\n        Remote.GetDefaultWorkTypes()\r\n        .then(res => {\r\n            // note default worktypes is a array\r\n            this.$store.state.FlexSchedule.defaultWorkTypes = res;\r\n        })\r\n\r\n        if (Affinity.user.EmployeeNo >= 5000000) {\r\n            this.isAdmin = true;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        reloadAfterEdit() {\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            this.loadDate(weekStart, weekEnd)\r\n        },\r\n\r\n        getCurrentWeekStatus() {\r\n            if (this.weekStatus === WeeklyPublishStatus.empty || this.weekStatus === WeeklyPublishStatus.draft) {\r\n                return 'Draft'\r\n            } else if (this.weekStatus === WeeklyPublishStatus.partial) {\r\n                return 'Partially Published'\r\n            } else if (this.weekStatus === WeeklyPublishStatus.published) {\r\n                return 'Published'\r\n            }\r\n\r\n            return this.weekStatus\r\n        },\r\n\r\n        async loadDate(weekStart: Moment, weekEnd: Moment) {\r\n            this.weekStatus = WeeklyPublishStatus.empty;\r\n            this.showControl = false;\r\n\r\n            let param = {\r\n                managerEmployeeNo: Affinity.user.EmployeeNo,\r\n                dateFrom: weekStart.format('YYYY-MM-DD'),\r\n                // dateFrom: '2020-01-01',\r\n                dateTo: weekEnd.format('YYYY-MM-DD'),\r\n                // dateTo: '2021-01-01',\r\n            }\r\n\r\n            Dialog.loading()\r\n            let [dateData, leaves, employeeList] = await Promise.all([\r\n                this.getDateData(weekStart, weekEnd),\r\n                Remote.GetManagedLeaves(param),\r\n                this.$store.dispatch(EmployeeActions.getEmployees, Affinity.user.EmployeeNo).then((res: any) => {\r\n                    return res.map((data: any) => {\r\n                        return {\r\n                            EmployeeName: data.commonName,\r\n                            EmployeeNo: data.employeeNo,\r\n                            StdHoursPerWeek: data.stdHoursPerWeek,\r\n                            PositionCode: data.positionCode\r\n                        }\r\n                    })\r\n                })\r\n            ]);\r\n            Dialog.clear()\r\n\r\n            for (let employee of employeeList) {\r\n                this.scheduleWeekMap.set(employee.EmployeeNo, employee)\r\n            }\r\n\r\n            let flexSchedulesDateData: any = dateData.flexSchedules;\r\n            for (let sche of flexSchedulesDateData) {\r\n                if (this.scheduleWeekMap.get(sche.EmployeeNo) && !this.scheduleWeekMap.get(sche.EmployeeNo).sche) {\r\n                    this.scheduleWeekMap.get(sche.EmployeeNo).sche = [sche]\r\n                } else if (this.scheduleWeekMap.get(sche.EmployeeNo)) {\r\n                    this.scheduleWeekMap.get(sche.EmployeeNo).sche.push(sche)\r\n                }\r\n            }\r\n\r\n            let newWeek = {\r\n                weekStart: weekStart,\r\n                weekEnd: weekEnd,\r\n                scheduleWeek: this.scheduleWeekMap\r\n            }\r\n\r\n            this.$store.state.FlexSchedule.calendarFocusDate = this.dayFocus;\r\n\r\n            this.getNewWeek(newWeek);\r\n\r\n            for (let leave of leaves) {\r\n                for (let leaveUnit of leave.leaveUnits) {\r\n                    let dateDiff = moment(leaveUnit.leaveDate).diff(weekStart, 'days')\r\n\r\n                    leaveUnit.calcUnit = leave.calcUnit;\r\n                    leaveUnit.leaveCode = leave.leaveCode;\r\n                    leaveUnit.leaveName = leave.leaveName;\r\n                    if (this.scheduleWeekMap.get(leave.employeeNo)?.sche[dateDiff]) {\r\n                        this.scheduleWeekMap.get(leave.employeeNo).sche[dateDiff].leaveUnit = leaveUnit\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            for (let unAva of dateData.unAvailabilities) {\r\n                let weeklyDay = moment(unAva.unavailabilityDate).day()\r\n                if (this.scheduleWeekMap.get(unAva.employeeNo)) {\r\n                    this.scheduleWeekMap.get(unAva.employeeNo).sche[weeklyDay].unAvailability = unAva\r\n                }\r\n\r\n            }\r\n\r\n            this.checkStatus(this.scheduleWeekMap)\r\n        },\r\n\r\n        checkStatus(scheduleWeekMap: any) {\r\n            let statusSet = new Set()\r\n\r\n            for (const value of scheduleWeekMap.values()) {\r\n                for (const sche of value.sche) {\r\n                    if (!sche.PublishStatus) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.empty)) statusSet.add(WeeklyPublishStatus.empty)\r\n                    } else if (sche.PublishStatus === WeeklyPublishStatus.draft) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.draft)) statusSet.add(WeeklyPublishStatus.draft)\r\n                    } else if (sche.PublishStatus === WeeklyPublishStatus.published) {\r\n                        if (!statusSet.has(WeeklyPublishStatus.published)) statusSet.add(WeeklyPublishStatus.published)\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if no published show draft\r\n            if (!statusSet.has(WeeklyPublishStatus.published)) {\r\n                this.weekStatus = WeeklyPublishStatus.draft\r\n            } else {\r\n                // if has publish\r\n                // and has draft or empty show partial\r\n                if ((statusSet.has(WeeklyPublishStatus.draft)) || (statusSet.has(WeeklyPublishStatus.empty))) {\r\n                    this.weekStatus = WeeklyPublishStatus.partial\r\n                } else { // if has publish but no draft or empty show published\r\n                    this.weekStatus = WeeklyPublishStatus.published\r\n                }\r\n            }\r\n        },\r\n\r\n        async chooseCalendarDate($event: any) {\r\n            // console.log('event', $event)\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n            let datePickerResult;\r\n            try {\r\n                datePickerResult = await (this.$refs.DatePickerRef as any).toggleShow(this.dayFocus);\r\n            } catch (e) {\r\n                return\r\n            }\r\n            this.selectDate(datePickerResult)\r\n        },\r\n\r\n        async selectDate(date: Moment) {\r\n            this.dayFocus = date;\r\n            this.$store.state.FlexSchedule.calendarFocusDate = date\r\n            let weekStart = date.clone().startOf('week')\r\n            let weekEnd = date.clone().endOf('week')\r\n            // return this.getDateData(weekStart, weekEnd)\r\n            // this.getNewWeek(date)\r\n            await this.loadDate(weekStart, weekEnd)\r\n\r\n        },\r\n        getSelectedWeek(selectedDate: any) {\r\n            var weekStart = selectedDate.clone().startOf('week');\r\n            var weekEnd = selectedDate.clone().endOf('week');\r\n\r\n            this.weekDays = [];\r\n\r\n            for (let i = 0; i <= 6; i++) {\r\n                let momentDay = moment(weekStart).add(i, 'days')\r\n                this.weekDays.push({\r\n                    momentDay: momentDay,\r\n                    day: momentDay.format(\"ddd, MMM Do\")\r\n                })\r\n            }\r\n        },\r\n        async getDateData(startDate?: Moment, endDate?: Moment): Promise<FlexScheduleRequest> {\r\n            let param = {}\r\n            if (startDate && endDate) {\r\n                param = {\r\n                    employeeNo: Affinity.user.EmployeeNo,\r\n                    startDate: startDate.format('YYYY-MM-DD'),\r\n                    endDate: endDate.format('YYYY-MM-DD'),\r\n                    forManagedEmployees: true,\r\n                }\r\n            }\r\n\r\n            return Remote.GetFlexSchedules(param).then((res: any) => {\r\n                // console.log('res', res)\r\n                return this.reformatData(res)\r\n\r\n            })\r\n        },\r\n        scheDaysToColumn() {\r\n            // let scheduleWeekList = getScheduleWeek(12)\r\n\r\n            for (let scheduleArr of this.scheduleWeek.values()) {\r\n                let employeeName = scheduleArr.EmployeeName\r\n                let employeeNo = scheduleArr.EmployeeNo\r\n                for (let i = 0; i <= 6; i++) {\r\n\r\n                    let findResult\r\n\r\n                    if (scheduleArr.sche) {\r\n                        findResult = scheduleArr.sche.find((day: any) => {\r\n                            return day.dayInWeek === i;\r\n                        })\r\n                    } else {\r\n                        scheduleArr.sche = []\r\n                    }\r\n\r\n                    if (!findResult) {\r\n                        // if first day in array and that employee do not have flex schedule ([0].dayInWeek == undefined)\r\n                        if (i === 0 && (!scheduleArr.sche[0]\r\n                                        || (scheduleArr.sche[0].dayInWeek === null\r\n                                            || scheduleArr.sche[0].dayInWeek === undefined ))) {\r\n                            scheduleArr.sche[0] = {}\r\n                            scheduleArr.sche[0].dayInWeek = 0;\r\n                            scheduleArr.sche[0].employeeName = employeeName;\r\n                            scheduleArr.sche[0].employeeNo = employeeNo;\r\n                        } else {\r\n                            scheduleArr.sche.push({\r\n                                dayInWeek: i,\r\n                                employeeName: employeeName,\r\n                                employeeNo: employeeNo\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n\r\n                scheduleArr.sche.sort((a: any, b: any) => a.dayInWeek - b.dayInWeek)\r\n                for (let day of scheduleArr.sche) {\r\n                    day.column = `grid-column-start: ${day.dayInWeek + 4}`;\r\n                    day.editing = false;\r\n                }\r\n            }\r\n        },\r\n        getLastWeek() {\r\n            this.dayFocus.subtract(7, 'days')\r\n\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n\r\n            this.loadDate(weekStart, weekEnd)\r\n\r\n            // this.getNewWeek()\r\n        },\r\n        getNextWeek() {\r\n            this.dayFocus.add(7, 'days')\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            this.loadDate(weekStart, weekEnd)\r\n            // this.getNewWeek()\r\n        },\r\n\r\n        getNewWeek(newWeek?: any) {\r\n            let newWeekData = newWeek;\r\n            this.getSelectedWeek(newWeekData!.weekStart)\r\n            this.scheduleWeek = this.$store.state.FlexSchedule.scheduleWeek = newWeekData!.scheduleWeek\r\n            this.scheDaysToColumn();\r\n        },\r\n        moreDetail(day: ScheduleDay) {\r\n            this.$store.commit(FlexScheduleMutation.setScheduleDay, day)\r\n        },\r\n\r\n        getTotalHour(sche: ScheduleDay[]) {\r\n            let totalHours = 0;\r\n            for (let day of sche) {\r\n                if (day.hours) {\r\n                    totalHours += day.hours\r\n                }\r\n            }\r\n            return totalHours.toFixed(2)\r\n        },\r\n\r\n        confirmEdit(day: any) {\r\n            day.editing = false;\r\n        },\r\n\r\n        cancelEdit(day: any) {\r\n\r\n        },\r\n\r\n        editScheDay(day: any) {\r\n            day.editing = true\r\n        },\r\n\r\n        reformatData(res: FlexScheduleRequestCap): FlexScheduleRequest {\r\n            // // filter 0 hours schedule (this is created when user publish a week and left cell blank)\r\n            // let flexScheduleRemoteData = res.FlexSchedules.filter((data: any) => {\r\n            //     return data.StartTime !== '0001-01-01T00:00:00'\r\n            //             && data.EndTime !== '0001-01-01T00:00:00'\r\n            //             && data.Hours !== 0\r\n            // })\r\n            let flexScheduleRemoteData = res.FlexSchedules;\r\n\r\n            flexScheduleRemoteData.forEach((obj: any) => {\r\n                obj.id = obj.Id;\r\n                obj.date = obj.Date;\r\n                obj.employeeName = obj.EmployeeName;\r\n                obj.employeeNo = obj.EmployeeNo;\r\n                obj.startTime = obj.StartTime ? moment(obj.StartTime).format('HH:mm') : '00:00'\r\n                obj.endTime = obj.EndTime ? moment(obj.EndTime).format('HH:mm') : '00:00'\r\n                obj.hours = obj.Hours\r\n                obj.scheduleDetail = obj.ScheduleData\r\n                obj.scheduleDetail.breakLength = obj.scheduleDetail.BreakLength;\r\n                obj.scheduleDetail.position = obj.scheduleDetail.Position;\r\n                obj.scheduleDetail.positionTitle = obj.scheduleDetail.PositionTitle;\r\n                obj.scheduleDetail.shiftId = obj.scheduleDetail.ShiftId;\r\n                obj.scheduleDetail.costElement1 = obj.scheduleDetail.CostElement1;\r\n                obj.scheduleDetail.costElement2 = obj.scheduleDetail.CostElement2;\r\n                obj.dayInWeek = moment(obj.Date).day()\r\n            })\r\n\r\n            let unAvailabilitiesData = res.Unavailabilities.map((obj: any) => {\r\n                return {\r\n                    id: obj.EmpAvailability.Id,\r\n                    unavailabilityDate: obj.UnavailabilityDate,\r\n                    employeeNo: obj.EmpAvailability.EmployeeNo,\r\n                    startTime: obj.EmpAvailability.StartTime,\r\n                    endTime: obj.EmpAvailability.EndTime,\r\n                    reason: obj.EmpAvailability.Reason\r\n                }\r\n            })\r\n\r\n            let flexScheduleRequest = {\r\n                flexSchedules: flexScheduleRemoteData,\r\n                unAvailabilities: unAvailabilitiesData\r\n            }\r\n            return flexScheduleRequest;\r\n        },\r\n\r\n        publishCurrentWeek() {\r\n            let groupedSche: any[] = [];\r\n\r\n            let weekStart = this.dayFocus.clone().startOf('week')\r\n            let weekEnd = this.dayFocus.clone().endOf('week')\r\n            let employees = this.$store.getters[EmployeeGetters.getEmployees].map((e: ManagedEmployee) => e.employeeNo)\r\n\r\n            console.log('employees', employees)\r\n\r\n            for (const [key, employeeData] of this.scheduleWeekMap.entries()) {\r\n                let scheWithData = employeeData.sche.filter((sche: any) => {\r\n                    return !!sche.Id\r\n                })\r\n\r\n                groupedSche = groupedSche.concat(scheWithData)\r\n            }\r\n\r\n            let data = {\r\n                EmployeeNumbers: employees,\r\n                DateFrom: weekStart.format('YYYY-MM-DD'),\r\n                DateTo: weekEnd.format('YYYY-MM-DD'),\r\n                PublishItems: groupedSche.filter(sche => {\r\n                    return sche.PublishStatus === \"draft\"\r\n                }).map(sche => {\r\n                    return {\r\n                        Id: sche.id,\r\n                        PublishStatus: \"published\"\r\n                    }\r\n                })\r\n            }\r\n\r\n            Dialog.confirmOrCancel({\r\n                message: `Are you sure you want to publish the schedule for week ${this.dayFocus.week()} ?`,\r\n                confirmButtonText: 'Yes'\r\n            }).then(() => {\r\n                Dialog.loading()\r\n                Remote.PublishFlexSchedule(data)\r\n                .then(() => {\r\n                    this.reloadAfterEdit()\r\n                    Dialog.clear()\r\n                }, (e: any) => {\r\n                    console.error(e);\r\n                    Dialog.alert('Something went wrong.')\r\n                })\r\n            })\r\n        },\r\n\r\n        changeDisplayControl() {\r\n            this.showControl = !this.showControl\r\n        }\r\n\r\n    }\r\n})\r\n","import { render } from \"./FlexSchedule.vue?vue&type=template&id=4efb6776&scoped=true\"\nimport script from \"./FlexSchedule.vue?vue&type=script&lang=ts\"\nexport * from \"./FlexSchedule.vue?vue&type=script&lang=ts\"\n\nimport \"./FlexSchedule.vue?vue&type=style&index=0&id=4efb6776&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4efb6776\"\n\nexport default script","<template>\r\n    <div>\r\n        <p class=\"mt-4\">I am <b>unavailable</b> during these times:</p>\r\n        <div class=\"available-table mt-4\">\r\n            <div class=\"service-grid\">\r\n                <div class=\"grid-heading\">Day of Week</div>\r\n                <div class=\"grid-heading\">Start Time</div>\r\n                <div class=\"grid-heading\">End Time</div>\r\n                <div class=\"grid-heading\">Repeat</div>\r\n                <div class=\"grid-heading\">Starts On</div>\r\n                <div class=\"grid-heading\">Ends On</div>\r\n                <div class=\"grid-heading\">Actions</div>\r\n                <div class=\"grid-heading\">Reason</div>\r\n                <template v-for=\"data of girdData\">\r\n                    <div class=\"grid-item\">{{data.dayOfWeek}}</div>\r\n                    <div class=\"grid-item\">{{data.startTime}}</div>\r\n                    <div class=\"grid-item\">{{data.endTime}}</div>\r\n                    <div class=\"grid-item\">{{data.frequencyType}}</div>\r\n                    <div class=\"grid-item\">{{data.startDate}}</div>\r\n                    <div class=\"grid-item\">{{data.endDate}}</div>\r\n                    <div class=\"grid-item\">\r\n                        <button class=\"green white--text xsmall\" @click=\"openEditDialog(true, data)\">Edit</button>\r\n                        <button class=\"grey white--text xsmall ml-2\" @click=\"confirmDelete(data)\">Delete</button>\r\n                    </div>\r\n                    <div class=\"grid-item\">{{data.reason}}</div>\r\n                </template>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex justify-end mt-4\">\r\n            <button class=\"green small white--text\" @click=\"openEditDialog(false)\">Create</button>\r\n        </div>\r\n    </div>\r\n<!--    popups  -->\r\n    <edit-availability ref=\"EditAvailabilityRef\" :isEdit=\"isEditingDialog\" @reload=\"loadAvailability\" :modalIndex=\"1999\"></edit-availability>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, onMounted, ref} from 'vue'\r\nimport EditAvailability from \"@/components/Availability/EditAvailability.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport moment from \"moment\";\r\nimport AvailabilityLookup from \"@/components/Availability/AvailabilityLookUp\";\r\nimport Dialog from \"@/components/dialog\";\r\ndeclare var Affinity: any\r\n\r\nexport default defineComponent({\r\n    components: {EditAvailability},\r\n    data() {\r\n        return {\r\n            // girdData: [{\r\n            //         dayOfWeek: 'Monday',\r\n            //         startTime: '9:00',\r\n            //         endTime: '12:00',\r\n            //         recurrence: 'Every week',\r\n            //         startDay: '12/02/2021',\r\n            //         endDay: '02/05/2021',\r\n            //         reason: 'UniversityClasses'\r\n            //     }, {\r\n            //         dayOfWeek: 'Monday',\r\n            //         startTime: '9:00',\r\n            //         endTime: '12:00',\r\n            //         recurrence: 'Every week',\r\n            //         startDay: '12/02/2021',\r\n            //         endDay: '02/05/2021',\r\n            //         reason: 'UniversityClasses'\r\n            //     }\r\n            // ],\r\n\r\n        }\r\n    },\r\n\r\n    setup () {\r\n        const isEditingDialog = ref(false);\r\n        const EditAvailabilityRef = ref<InstanceType<typeof EditAvailability>>();\r\n        const girdData = ref([]);\r\n        const selectedAva = ref();\r\n\r\n        function openEditDialog(isEdit: boolean, selectedData?: any) {\r\n            isEditingDialog.value = isEdit;\r\n            EditAvailabilityRef.value!.openEditDialog(selectedData);\r\n        }\r\n\r\n        function loadAvailability() {\r\n            Remote.GetAvailabilities(Affinity.user.EmployeeNo).then((res) => {\r\n                let availabilities = res.map((availability: any) => {\r\n                    return Object.fromEntries(\r\n                        Object.entries(availability).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                    );\r\n                })\r\n\r\n                girdData.value = availabilities.map((availabilities: any) => {\r\n                    availabilities.startDate = moment(availabilities.startDate).format('DD/MM/YYYY')\r\n                    if (availabilities.endDate) {\r\n                        availabilities.endDate = moment(availabilities.endDate).format('DD/MM/YYYY')\r\n                    }\r\n                    availabilities.dayOfWeek = AvailabilityLookup.findFullDaysByShort(availabilities.dayOfWeek)\r\n\r\n                    return availabilities\r\n                })\r\n            })\r\n        }\r\n\r\n        onMounted(() => {\r\n            loadAvailability();\r\n        })\r\n\r\n        // openEditDialog()\r\n        return { girdData, openEditDialog, selectedAva, loadAvailability,\r\n            isEditingDialog, EditAvailabilityRef }\r\n    },\r\n\r\n    mounted() {\r\n\r\n    },\r\n\r\n    methods: {\r\n        confirmDelete(data: any) {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this period of unavailability?'\r\n            }).then(() => {\r\n                this.deleteAva(data.id)\r\n            })\r\n        },\r\n\r\n        deleteAva(id: number) {\r\n            Remote.DeleteAvailabilities(id)\r\n                .then(res => {\r\n                   this.loadAvailability()\r\n                }, err => {\r\n                    Dialog.alert('Something went wrong. Delete Availability failed')\r\n                })\r\n\r\n        },\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n$border-color: #cbcbcb;\r\n\r\n.available-table {\r\n    // width: 1200px;\r\n}\r\n.service-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(8, 1fr) ;\r\n    //border: 1px solid #fff;\r\n    grid-gap: 1px;\r\n    border-collapse: collapse;\r\n    border: 1px solid $border-color;\r\n    background: $border-color;\r\n}\r\n\r\n.grid-heading {\r\n    //background-color: #80cbc4;\r\n    //border: 0.5px solid $border-color;\r\n    padding: 5px;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    border-collapse: collapse;\r\n    background: linear-gradient(to bottom, #fcfcfc 0%, #efefef 49%, #e2e2e2 51%, #d6d6d6 100%);\r\n}\r\n\r\n.grid-item {\r\n    //border: 0.5px solid $border-color;\r\n    padding: 5px;\r\n    background: white;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    border-collapse: collapse;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n}\r\n</style>","<template>\r\n    <Modal ref=\"ModalRef\">\r\n        <template v-slot:header>\r\n            <div>\r\n                <h2 class=\"bold\">\r\n                    <span v-if=\"isEdit\">Edit Unavailability</span>\r\n                    <span v-else>Create Unavailability</span>\r\n                </h2>\r\n            </div>\r\n        </template>\r\n        <template v-slot:body>\r\n            <div>\r\n                <div class=\"edit-form mt-4 copy2\">\r\n                    <div>\r\n                        <label class=\"form-label\">Start Time </label>\r\n                        <input type=\"text\" v-model=\"startTime\" @change=\"updateStartTime\">\r\n                    </div>\r\n                    <div class=\"mt-2\">\r\n                        <label class=\"form-label\">End Time </label>\r\n                        <input type=\"text\" v-model=\"endTime\" @change=\"updateEndTime\">\r\n                    </div>\r\n                    <div class=\"mt-4\">\r\n                        <label class=\"form-label\">Day of Week</label>\r\n                        <div class=\"select-day-of-week\">\r\n                            <custom-select :options=\"dayOfWeekOption\" v-model.modelValue=\"selectedDayOfWeek\"></custom-select>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"mt-2\">\r\n                        <label class=\"form-label\">Repeat</label>\r\n                        <div class=\"select-repeat\">\r\n                            <custom-select :options=\"repeatOption\" v-model.modelValue=\"selectedRepeat\"  @update:modelValue=\"updateRepeat\"></custom-select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mt-4\">\r\n                        <label class=\"form-label\">Start On</label>\r\n                        <input class=\"input-box\" type=\"text\" v-model=\"startDateText\"\r\n                               @change=\"updateDateTimeText('startDate')\"\r\n                               @click=\"updateDateTime($event, 'startDate')\">\r\n                    </div>\r\n                    <div class=\"mt-2 endDateWidth\">\r\n                        <div v-if=\"!endDateDisable\">\r\n                            <label class=\"form-label\">End On</label>\r\n                            <input class=\"input-box\" type=\"text\" v-model=\"endDateText\"\r\n                                   @change=\"updateDateTimeText('endDate')\"\r\n                                   @click=\"updateDateTime($event, 'endDate')\">\r\n                            <span class=\"ml-2\">\r\n                            <input type=\"checkbox\" v-model=\"noEndDate\"\r\n                                   @click=\"clickedNoEndDate\">\r\n                            <label class=\"checkbox-label\">No End Date</label>\r\n                        </span>\r\n                        </diV>\r\n\r\n\r\n                    </div>\r\n                    <div class=\"mt-2\">\r\n                        <label class=\"form-label\">Reason</label>\r\n                        <textarea v-model=\"reason\"></textarea>\r\n                    </div>\r\n                </div>\r\n                <date-picker ref=\"DatePickerRef\" :top=\"datePickerTop\" :left=\"datePickerLeft\"></date-picker>\r\n\r\n            </div>\r\n        </template>\r\n        <template v-slot:footer>\r\n            <div class=\"mt-4 full-width d-flex justify-end\">\r\n                <button v-if=\"isEdit\" class=\"blue normal copy2\" @click=\"updateAvailability()\"><span class=\"white\">Save</span></button>\r\n                <button v-if=\"isEdit\" class=\"grey normal copy2 ml-2\" @click=\"confirmDelete()\"><span class=\"white\">Delete</span></button>\r\n                <button v-if=\"!isEdit\" class=\"blue normal copy2\" @click=\"createAvailability()\"><span class=\"white\">Create</span></button>\r\n\r\n                <button class=\"ml-2 normal orange copy2\" @click=\"cancel()\"><span class=\"white\">Cancel</span></button>\r\n            </div>\r\n        </template>\r\n    </Modal>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, ref} from 'vue'\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\nimport AvailabilityLookup from \"@/components/Availability/AvailabilityLookUp\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport Common from \"@/components/common/script\";\r\nimport Remote from '@/remote/scheduleRequest';\r\nimport Dialog from \"@/components/dialog\";\r\n\r\ndeclare var Affinity: any\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"EditAvailability\",\r\n    components: {\r\n        Modal,\r\n        CustomSelect,\r\n        DatePicker\r\n    },\r\n    props: {\r\n        isEdit: {\r\n            type: Boolean\r\n        },\r\n        weekStatus: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            ava: <any>null,\r\n            employeeNo: 0,\r\n            startTime: '',\r\n            endTime: '',\r\n            dayOfWeekOption: AvailabilityLookup.fullWeekDays,\r\n            selectedDayOfWeek: 'Monday',\r\n\r\n            repeatOption: AvailabilityLookup.frequencyCycle,\r\n            selectedRepeat: 'Weekly',\r\n\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n\r\n            startDate: <Moment | null>moment(),\r\n            startDateText: '',\r\n            endDate: <Moment | null>moment(),\r\n            endDateText: '',\r\n            reason: '',\r\n            //\r\n            noEndDate: false,\r\n            endDateDisable: false\r\n        }\r\n    },\r\n    setup () {\r\n\r\n\r\n        return {}\r\n    },\r\n    watch: {\r\n        selectedDayOfWeek(value1, value2) {\r\n            console.log(value1, value2)\r\n        }\r\n    },\r\n    methods: {\r\n        updateStartTime() {\r\n            this.startTime = Common.parseTimeColumn(this.startTime)\r\n        },\r\n        updateEndTime() {\r\n            this.endTime = Common.parseTimeColumn(this.endTime)\r\n        },\r\n        updateRepeat() {\r\n            if (this.selectedRepeat === 'Once') {\r\n                this.endDateDisable = true;\r\n            } else {\r\n                this.endDateDisable = false;\r\n            }\r\n\r\n        },\r\n        clickedNoEndDate() {\r\n            this.endDateText = '';\r\n            this.endDate = null;\r\n        },\r\n\r\n        createAvailability() {\r\n            Dialog.loading()\r\n\r\n            let endDate = this.endDateText ? this.endDate!.format('DD/MMM/YYYY') : null\r\n            endDate = (this.noEndDate || this.endDateDisable) ? null : endDate;\r\n\r\n            let data = [{\r\n                employeeNo: Affinity.user.EmployeeNo,\r\n                startTime: this.startTime,\r\n                endTime: this.endTime,\r\n                dayOfWeek: AvailabilityLookup.findShortDayByFull(this.selectedDayOfWeek),\r\n                dayOfMonth: null,\r\n                frequencyType: this.selectedRepeat,\r\n                startDate: this.startDate!.format('DD/MMM/YYYY'),\r\n                endDate: endDate,\r\n                reason: this.reason\r\n            }]\r\n\r\n            Remote.CreateAvailability(data).then(res => {\r\n                Dialog.clear()\r\n                this.$emit('reload');\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n            })\r\n        },\r\n        updateDateTimeText(type: any) {\r\n            if (type === 'endDate') {\r\n                if (this.endDateText === '') {\r\n                    this.endDate = null;\r\n                }\r\n\r\n            } else if (type === 'startDate') {\r\n                if (this.startDateText === '') {\r\n                    this.startDate = null\r\n                }\r\n\r\n            }\r\n        },\r\n        confirmDelete() {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this period of unavailability?'\r\n            }).then(() => {\r\n                Remote.DeleteAvailabilities(this.ava!.id)\r\n                    .then(res => {\r\n                        this.$emit('reload');\r\n                        (this.$refs.ModalRef as any).toggleShow();\r\n                    }, err => {\r\n                        Dialog.alert('Something went wrong. Delete Availability failed')\r\n                    })\r\n            })\r\n        },\r\n        updateAvailability() {\r\n            let endDate = this.endDateText ? this.endDate!.format('DD/MMM/YYYY') : null\r\n            endDate = (this.noEndDate || this.endDateDisable)  ? null : endDate;\r\n\r\n            Dialog.loading()\r\n            let data = [{\r\n                Id: this.ava!.id,\r\n                StartTime: this.startTime,\r\n                EndTime: this.endTime,\r\n                DayOfWeek: AvailabilityLookup.findShortDayByFull(this.selectedDayOfWeek),\r\n                DayOfMonth: null,\r\n                FrequencyType: this.selectedRepeat ,\r\n                StartDate: this.startDate!.format('DD/MMM/YYYY'),\r\n                EndDate: endDate,\r\n                Reason: this.reason\r\n            }]\r\n            Remote.PatchAvailabilities(data).then(res => {\r\n                Dialog.clear();\r\n                this.$emit('reload');\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n\r\n            })\r\n        },\r\n\r\n        async updateDateTime($event: any, selectedDateTarget: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n\r\n            try {\r\n                switch (selectedDateTarget) {\r\n                    case 'startDate' :\r\n                        this.startDate = await (this.$refs.DatePickerRef as any).toggleShow(this.startDate);\r\n                        this.startDateText = this.startDate!.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'endDate' :\r\n                        if (!this.endDate || !this.endDate.isValid()) {\r\n                            this.endDate = moment();\r\n                        }\r\n                        this.endDate = await (this.$refs.DatePickerRef as any).toggleShow(this.endDate);\r\n                        this.endDateText = this.endDate!.format('DD/MM/YYYY')\r\n                        return;\r\n                }\r\n            } catch (e) {\r\n                return\r\n            }\r\n        },\r\n\r\n        openEditDialog(avaInput: any) {\r\n            if (avaInput) {\r\n                this.ava = avaInput;\r\n                this.employeeNo = Affinity.user.EmployeeNo;\r\n                this.startTime = avaInput.startTime\r\n                this.endTime = avaInput.endTime\r\n                this.selectedDayOfWeek = avaInput.dayOfWeek\r\n                this.selectedRepeat = avaInput.frequencyType\r\n                this.startDateText = avaInput.startDate\r\n                this.startDate = moment(this.startDateText, 'DD/MM/YYYY')\r\n                this.endDateText = avaInput.endDate ? avaInput.endDate : ''\r\n                this.endDate = moment(this.endDateText, 'DD/MM/YYYY')\r\n                this.reason = avaInput.reason\r\n            }\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        cancel() {\r\n            this.toggleShow()\r\n        },\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n\r\n        },\r\n\r\n\r\n\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    $border-color: rgba(0,0,0,.42);;\r\n    .edit-form {\r\n       //  display: flex;\r\n        input[type=text] {\r\n            height: 30px;\r\n            width: 150px;\r\n            padding: 0 10px;\r\n            border-radius: 4px;\r\n            border: 1px solid $border-color;\r\n        }\r\n\r\n        input[type=checkbox] {\r\n            display: inline-block;\r\n            vertical-align: middle;\r\n        }\r\n\r\n        .checkbox-label {\r\n            vertical-align: middle;\r\n            line-height: 14px;\r\n        }\r\n\r\n        textarea {\r\n            padding: 4px 10px;\r\n            border: 1px solid $border-color;\r\n            border-radius: 4px;\r\n            vertical-align: top;\r\n        }\r\n    }\r\n\r\n    .form-label {\r\n        display: inline-block;\r\n        width: 100px;\r\n    }\r\n\r\n    .select-day-of-week {\r\n        display: inline-block;\r\n        min-width: 120px;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .custom-select-selected:after {\r\n        top: calc(50% - 2px);\r\n    }\r\n\r\n    .select-repeat {\r\n        display: inline-block;\r\n        min-width: 120px;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .disable {\r\n        opacity: 0.5;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .endDateWidth {\r\n        width: 389px;\r\n    }\r\n</style>","const shortWeekDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\nconst fullWeekDays = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\r\nconst frequencyCycle = ['Once', 'Weekly', 'Fortnightly']\r\n\r\nfunction findFullDaysByShort(shortDay: string) {\r\n    return fullWeekDays[shortWeekDays.indexOf(shortDay)]\r\n}\r\n\r\nfunction findShortDayByFull(fullDay: string) {\r\n    return shortWeekDays[fullWeekDays.indexOf(fullDay)]\r\n}\r\n\r\nconst AvailabilityLookup = {\r\n    shortWeekDays,\r\n    fullWeekDays,\r\n    frequencyCycle,\r\n    findFullDaysByShort,\r\n    findShortDayByFull\r\n}\r\n\r\nexport default AvailabilityLookup;","import moment from \"moment\";\r\n\r\n// parse time string and insert column automatic\r\nexport function parseTimeColumn(input: string) {\r\n    if (!input) {\r\n        return '';\r\n    }\r\n\r\n    let parseFormat = 'Hmm';\r\n    if (input.includes(\":\")) {\r\n        parseFormat = 'H:mm'\r\n    }\r\n\r\n    let time = moment(input, parseFormat)\r\n    if (time.isValid()) {\r\n        return time.format(\"HH:mm\")\r\n    } else {\r\n        return 'Invalid Time'\r\n    }\r\n}\r\n\r\nexport default {\r\n    parseTimeColumn\r\n}","\r\nimport {defineComponent, ref} from 'vue'\r\nimport Modal from \"@/components/common/Modal.vue\";\r\nimport CustomSelect from \"@/components/common/CustomSelect.vue\";\r\nimport AvailabilityLookup from \"@/components/Availability/AvailabilityLookUp\";\r\nimport moment, {Moment} from \"moment\";\r\nimport DatePicker from \"@/components/common/DatePicker.vue\";\r\nimport Common from \"@/components/common/script\";\r\nimport Remote from '@/remote/scheduleRequest';\r\nimport Dialog from \"@/components/dialog\";\r\n\r\ndeclare var Affinity: any\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"EditAvailability\",\r\n    components: {\r\n        Modal,\r\n        CustomSelect,\r\n        DatePicker\r\n    },\r\n    props: {\r\n        isEdit: {\r\n            type: Boolean\r\n        },\r\n        weekStatus: {\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            ava: <any>null,\r\n            employeeNo: 0,\r\n            startTime: '',\r\n            endTime: '',\r\n            dayOfWeekOption: AvailabilityLookup.fullWeekDays,\r\n            selectedDayOfWeek: 'Monday',\r\n\r\n            repeatOption: AvailabilityLookup.frequencyCycle,\r\n            selectedRepeat: 'Weekly',\r\n\r\n            datePickerTop: 0,\r\n            datePickerLeft: 0,\r\n\r\n            startDate: <Moment | null>moment(),\r\n            startDateText: '',\r\n            endDate: <Moment | null>moment(),\r\n            endDateText: '',\r\n            reason: '',\r\n            //\r\n            noEndDate: false,\r\n            endDateDisable: false\r\n        }\r\n    },\r\n    setup () {\r\n\r\n\r\n        return {}\r\n    },\r\n    watch: {\r\n        selectedDayOfWeek(value1, value2) {\r\n            console.log(value1, value2)\r\n        }\r\n    },\r\n    methods: {\r\n        updateStartTime() {\r\n            this.startTime = Common.parseTimeColumn(this.startTime)\r\n        },\r\n        updateEndTime() {\r\n            this.endTime = Common.parseTimeColumn(this.endTime)\r\n        },\r\n        updateRepeat() {\r\n            if (this.selectedRepeat === 'Once') {\r\n                this.endDateDisable = true;\r\n            } else {\r\n                this.endDateDisable = false;\r\n            }\r\n\r\n        },\r\n        clickedNoEndDate() {\r\n            this.endDateText = '';\r\n            this.endDate = null;\r\n        },\r\n\r\n        createAvailability() {\r\n            Dialog.loading()\r\n\r\n            let endDate = this.endDateText ? this.endDate!.format('DD/MMM/YYYY') : null\r\n            endDate = (this.noEndDate || this.endDateDisable) ? null : endDate;\r\n\r\n            let data = [{\r\n                employeeNo: Affinity.user.EmployeeNo,\r\n                startTime: this.startTime,\r\n                endTime: this.endTime,\r\n                dayOfWeek: AvailabilityLookup.findShortDayByFull(this.selectedDayOfWeek),\r\n                dayOfMonth: null,\r\n                frequencyType: this.selectedRepeat,\r\n                startDate: this.startDate!.format('DD/MMM/YYYY'),\r\n                endDate: endDate,\r\n                reason: this.reason\r\n            }]\r\n\r\n            Remote.CreateAvailability(data).then(res => {\r\n                Dialog.clear()\r\n                this.$emit('reload');\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n            })\r\n        },\r\n        updateDateTimeText(type: any) {\r\n            if (type === 'endDate') {\r\n                if (this.endDateText === '') {\r\n                    this.endDate = null;\r\n                }\r\n\r\n            } else if (type === 'startDate') {\r\n                if (this.startDateText === '') {\r\n                    this.startDate = null\r\n                }\r\n\r\n            }\r\n        },\r\n        confirmDelete() {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this period of unavailability?'\r\n            }).then(() => {\r\n                Remote.DeleteAvailabilities(this.ava!.id)\r\n                    .then(res => {\r\n                        this.$emit('reload');\r\n                        (this.$refs.ModalRef as any).toggleShow();\r\n                    }, err => {\r\n                        Dialog.alert('Something went wrong. Delete Availability failed')\r\n                    })\r\n            })\r\n        },\r\n        updateAvailability() {\r\n            let endDate = this.endDateText ? this.endDate!.format('DD/MMM/YYYY') : null\r\n            endDate = (this.noEndDate || this.endDateDisable)  ? null : endDate;\r\n\r\n            Dialog.loading()\r\n            let data = [{\r\n                Id: this.ava!.id,\r\n                StartTime: this.startTime,\r\n                EndTime: this.endTime,\r\n                DayOfWeek: AvailabilityLookup.findShortDayByFull(this.selectedDayOfWeek),\r\n                DayOfMonth: null,\r\n                FrequencyType: this.selectedRepeat ,\r\n                StartDate: this.startDate!.format('DD/MMM/YYYY'),\r\n                EndDate: endDate,\r\n                Reason: this.reason\r\n            }]\r\n            Remote.PatchAvailabilities(data).then(res => {\r\n                Dialog.clear();\r\n                this.$emit('reload');\r\n                (this.$refs.ModalRef as any).toggleShow();\r\n\r\n            })\r\n        },\r\n\r\n        async updateDateTime($event: any, selectedDateTarget: string) {\r\n            let element = $event.target.getClientRects()[0]\r\n            this.datePickerTop = element.bottom;\r\n            this.datePickerLeft = element.left;\r\n\r\n            try {\r\n                switch (selectedDateTarget) {\r\n                    case 'startDate' :\r\n                        this.startDate = await (this.$refs.DatePickerRef as any).toggleShow(this.startDate);\r\n                        this.startDateText = this.startDate!.format('DD/MM/YYYY')\r\n                        return;\r\n                    case 'endDate' :\r\n                        if (!this.endDate || !this.endDate.isValid()) {\r\n                            this.endDate = moment();\r\n                        }\r\n                        this.endDate = await (this.$refs.DatePickerRef as any).toggleShow(this.endDate);\r\n                        this.endDateText = this.endDate!.format('DD/MM/YYYY')\r\n                        return;\r\n                }\r\n            } catch (e) {\r\n                return\r\n            }\r\n        },\r\n\r\n        openEditDialog(avaInput: any) {\r\n            if (avaInput) {\r\n                this.ava = avaInput;\r\n                this.employeeNo = Affinity.user.EmployeeNo;\r\n                this.startTime = avaInput.startTime\r\n                this.endTime = avaInput.endTime\r\n                this.selectedDayOfWeek = avaInput.dayOfWeek\r\n                this.selectedRepeat = avaInput.frequencyType\r\n                this.startDateText = avaInput.startDate\r\n                this.startDate = moment(this.startDateText, 'DD/MM/YYYY')\r\n                this.endDateText = avaInput.endDate ? avaInput.endDate : ''\r\n                this.endDate = moment(this.endDateText, 'DD/MM/YYYY')\r\n                this.reason = avaInput.reason\r\n            }\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n        },\r\n\r\n        cancel() {\r\n            this.toggleShow()\r\n        },\r\n        toggleShow() {\r\n            (this.$refs.ModalRef as any).toggleShow();\r\n\r\n        },\r\n\r\n\r\n\r\n    }\r\n})\r\n","import { render } from \"./EditAvailability.vue?vue&type=template&id=880bb710&scoped=true\"\nimport script from \"./EditAvailability.vue?vue&type=script&lang=ts\"\nexport * from \"./EditAvailability.vue?vue&type=script&lang=ts\"\n\nimport \"./EditAvailability.vue?vue&type=style&index=0&id=880bb710&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-880bb710\"\n\nexport default script","\r\nimport {defineComponent, onMounted, ref} from 'vue'\r\nimport EditAvailability from \"@/components/Availability/EditAvailability.vue\";\r\nimport Remote from '@/remote/scheduleRequest'\r\nimport moment from \"moment\";\r\nimport AvailabilityLookup from \"@/components/Availability/AvailabilityLookUp\";\r\nimport Dialog from \"@/components/dialog\";\r\ndeclare var Affinity: any\r\n\r\nexport default defineComponent({\r\n    components: {EditAvailability},\r\n    data() {\r\n        return {\r\n            // girdData: [{\r\n            //         dayOfWeek: 'Monday',\r\n            //         startTime: '9:00',\r\n            //         endTime: '12:00',\r\n            //         recurrence: 'Every week',\r\n            //         startDay: '12/02/2021',\r\n            //         endDay: '02/05/2021',\r\n            //         reason: 'UniversityClasses'\r\n            //     }, {\r\n            //         dayOfWeek: 'Monday',\r\n            //         startTime: '9:00',\r\n            //         endTime: '12:00',\r\n            //         recurrence: 'Every week',\r\n            //         startDay: '12/02/2021',\r\n            //         endDay: '02/05/2021',\r\n            //         reason: 'UniversityClasses'\r\n            //     }\r\n            // ],\r\n\r\n        }\r\n    },\r\n\r\n    setup () {\r\n        const isEditingDialog = ref(false);\r\n        const EditAvailabilityRef = ref<InstanceType<typeof EditAvailability>>();\r\n        const girdData = ref([]);\r\n        const selectedAva = ref();\r\n\r\n        function openEditDialog(isEdit: boolean, selectedData?: any) {\r\n            isEditingDialog.value = isEdit;\r\n            EditAvailabilityRef.value!.openEditDialog(selectedData);\r\n        }\r\n\r\n        function loadAvailability() {\r\n            Remote.GetAvailabilities(Affinity.user.EmployeeNo).then((res) => {\r\n                let availabilities = res.map((availability: any) => {\r\n                    return Object.fromEntries(\r\n                        Object.entries(availability).map(([k,v]) => [k.charAt(0).toLowerCase() + k.slice(1), v])\r\n                    );\r\n                })\r\n\r\n                girdData.value = availabilities.map((availabilities: any) => {\r\n                    availabilities.startDate = moment(availabilities.startDate).format('DD/MM/YYYY')\r\n                    if (availabilities.endDate) {\r\n                        availabilities.endDate = moment(availabilities.endDate).format('DD/MM/YYYY')\r\n                    }\r\n                    availabilities.dayOfWeek = AvailabilityLookup.findFullDaysByShort(availabilities.dayOfWeek)\r\n\r\n                    return availabilities\r\n                })\r\n            })\r\n        }\r\n\r\n        onMounted(() => {\r\n            loadAvailability();\r\n        })\r\n\r\n        // openEditDialog()\r\n        return { girdData, openEditDialog, selectedAva, loadAvailability,\r\n            isEditingDialog, EditAvailabilityRef }\r\n    },\r\n\r\n    mounted() {\r\n\r\n    },\r\n\r\n    methods: {\r\n        confirmDelete(data: any) {\r\n            Dialog.confirmOrCancel({\r\n                message: 'Are you sure you want to delete this period of unavailability?'\r\n            }).then(() => {\r\n                this.deleteAva(data.id)\r\n            })\r\n        },\r\n\r\n        deleteAva(id: number) {\r\n            Remote.DeleteAvailabilities(id)\r\n                .then(res => {\r\n                   this.loadAvailability()\r\n                }, err => {\r\n                    Dialog.alert('Something went wrong. Delete Availability failed')\r\n                })\r\n\r\n        },\r\n    }\r\n})\r\n","import { render } from \"./Availability.vue?vue&type=template&id=69f9b2fb&scoped=true\"\nimport script from \"./Availability.vue?vue&type=script&lang=ts\"\nexport * from \"./Availability.vue?vue&type=script&lang=ts\"\n\nimport \"./Availability.vue?vue&type=style&index=0&id=69f9b2fb&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-69f9b2fb\"\n\nexport default script","<template>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1\" crossorigin=\"anonymous\">\r\n    <aside class=\"col-sm-4\">\r\n        <p>Login form style 3</p>\r\n\r\n        <div class=\"card\">\r\n            <article class=\"card-body\">\r\n                <h4 class=\"card-title text-center mb-4 mt-1\">Sign in</h4>\r\n                <hr>\r\n                <p class=\"text-success text-center\">Some message goes here</p>\r\n                <form v-on:submit.prevent=\"login\">\r\n                    <div class=\"form-group\">\r\n                        <div class=\"input-group\">\r\n                            <input name=\"\" class=\"form-control\" placeholder=\"Email or login\" v-model=\"username\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group mt-2\">\r\n                        <div class=\"input-group\">\r\n                            <input class=\"form-control\" placeholder=\"******\" type=\"password\" v-model=\"password\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group mt-4\">\r\n                        <button type=\"submit\" class=\"btn btn-primary btn-block\"> Login  </button>\r\n                    </div>\r\n\r\n                </form>\r\n            </article>\r\n        </div> <!-- card.// -->\r\n\r\n    </aside>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n    name: \"Login\",\r\n    data() {\r\n        return {\r\n            username: '',\r\n            password: ''\r\n        }\r\n    },\r\n    methods: {\r\n        login() {\r\n            console.log('login')\r\n            console.log(this.username)\r\n            console.log(this.password)\r\n\r\n            axios.post('http://localhost:61160/api/Authentication/post', {\r\n                username: this.username,\r\n                password: this.password\r\n            }).then(res => {\r\n                console.log('res', res)\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=71c5192d&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-71c5192d\"\n\nexport default script","// import Vue from 'vue'\r\nimport {createWebHistory, createRouter, RouteRecordRaw} from 'vue-router'\r\nimport mySchedules from \"../components/mySchedules/MySchedules.vue\";\r\nimport SchedulesManagement from \"../components/schedulesManagement/SchedulesManagement.vue\";\r\nimport employeeAllocation from \"../components/employeeAllocation/EmployeeAllocation.vue\";\r\nimport FlexSchedule from \"@/components/FlexSchedule/FlexSchedule.vue\";\r\nimport Availability from \"@/components/Availability/Availability.vue\";\r\nimport Login from \"@/components/Login/Login.vue\";\r\n\r\n// Vue.use(VueRouter)\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n    {\r\n        path: '/login',\r\n        name: 'Login',\r\n        component: Login\r\n    },\r\n    {\r\n        path: '/my-schedules',\r\n        name: 'My Schedule',\r\n        component: mySchedules\r\n    },\r\n    {\r\n        path: '/availability',\r\n        name: 'Availability',\r\n        component: Availability\r\n    },\r\n    {\r\n        path: '/flex-schedule',\r\n        name: 'Flex Schedule',\r\n        component: FlexSchedule\r\n    },\r\n\r\n    {\r\n        path: '/team-schedules',\r\n        name: 'Schedule Management',\r\n        component: SchedulesManagement\r\n    },\r\n\r\n    {\r\n        path: '/employee-allocations',\r\n        name: 'Employee Allocation',\r\n        component: employeeAllocation\r\n    },\r\n    {\r\n        path: '/',\r\n        name: 'Home',\r\n        component: mySchedules\r\n    },\r\n]\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(process.env.BASE_URL),\r\n    // base: process.env.BASE_URL,\r\n    routes\r\n})\r\n\r\nexport default router\r\n","import Vuex, {StoreOptions} from 'vuex'\r\nimport FlexSchedule from \"@/store/flexScheduleModule\";\r\nimport LookUp from \"@/store/lookupModule\";\r\nimport EmployeeModule from \"@/store/employeeModule\";\r\n\r\nexport interface RootState {\r\n    magic: number,\r\n}\r\n\r\nconst store: StoreOptions<RootState> = {\r\n    state: {\r\n        magic: 123\r\n    },\r\n    modules: {\r\n        FlexSchedule,\r\n        LookUp,\r\n        EmployeeModule\r\n    }\r\n}\r\n\r\nexport default new Vuex.Store<RootState>(store);","import moment from \"moment\";\r\n\r\nconst filters = {\r\n    reformatDate(input: any) {\r\n        if (!input) return input\r\n\r\n        if (typeof input === \"string\") return input\r\n\r\n        // console.log('input', input)\r\n        if (typeof input === 'object' && input.constructor?.name === \"Date\") {\r\n            let date = moment(input);\r\n\r\n            return date.format('DD/MM/YYYY')\r\n        }\r\n\r\n        if (input.isValid()) {\r\n            let date = moment(input);\r\n            if (date == null || !date.isValid()) {\r\n                return input;\r\n            }\r\n\r\n            // console.log('date', date)\r\n            return date.format('DD/MM/YYYY')\r\n        } else {\r\n            return input\r\n        }\r\n    },\r\n\r\n    reformatDateString(input: any, format: string) {\r\n        if (!input || typeof input !== \"string\") return input\r\n\r\n        return moment(input, format).format('DD/MM/YYYY')\r\n    },\r\n\r\n    reformatTime(input: any) {\r\n        if (!input) return input\r\n\r\n        let date = moment(input);\r\n        if (date == null || !date.isValid()) {\r\n\r\n            let time = moment(input, 'h:m');\r\n            if (time == null || !time.isValid()) {\r\n                return input;\r\n            } else {\r\n                return time.format('HH:mm')\r\n            }\r\n            return input;\r\n        }\r\n\r\n        return date.format('HH:mm')\r\n    },\r\n\r\n    ordinalSuffix(i: number) {\r\n        let j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n}\r\n\r\nexport default filters","import chevronUp from \"@iconify-icons/mdi/chevron-up\";\r\nimport chevronLeft from '@iconify-icons/mdi/chevron-left';\r\nimport chevronRight from '@iconify-icons/mdi/chevron-right';\r\nimport chevronDown from '@iconify-icons/mdi/chevron-down';\r\n\r\nconst icons = {\r\n    chevronUp: chevronUp,\r\n    chevronLeft: chevronLeft,\r\n    chevronRight: chevronRight,\r\n    chevronDown: chevronDown,\r\n}\r\n\r\nexport default icons;","import { App } from 'vue';\r\n\r\nconst CompanyConfig: any = {}\r\n\r\nexport interface CompanyConfigInterface {\r\n    setAllowPersonal: (allow: boolean) => void,\r\n    getAllowPersonal: () => boolean\r\n}\r\n\r\n/*\r\n    Company Config plugin, build to manage global properties company config.\r\n */\r\n\r\nexport default {\r\n    install: (app: App) => {\r\n        function setAllowPersonal(allow: boolean): void {\r\n            if (!app.config.globalProperties.$CompanyConfig) {\r\n                app.config.globalProperties.$CompanyConfig = {\r\n                    isAllowPersonal: allow\r\n                }\r\n            } else {\r\n                app.config.globalProperties.$CompanyConfig.isAllowPersonal = allow\r\n            }\r\n        }\r\n\r\n        function getAllowPersonal(): boolean {\r\n            return app.config.globalProperties.$CompanyConfig ? app.config.globalProperties.$CompanyConfig.isAllowPersonal : null;\r\n        }\r\n\r\n        CompanyConfig.setAllowPersonal = setAllowPersonal;\r\n        CompanyConfig.getAllowPersonal = getAllowPersonal;\r\n\r\n        app.provide('MANAGE_COMPANY_CONFIG', CompanyConfig)\r\n    }\r\n}","// import 'babel-polyfill'\r\n// import Vue from 'vue'\r\nimport {createApp} from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n// import store, {key} from './store'\r\nimport store from './store'\r\n// import vuetify from './plugins/vuetify';\r\n// import Dashboard from '../external-lib/dashboard/index.vue'\r\n// import './components/directive';\r\nimport './assets/fonts/ui.font.icons.scss';\r\nimport './style/index.scss';\r\nimport moment from 'moment'\r\nimport mitt, {Emitter} from \"mitt\";\r\nimport VTooltip from 'v-tooltip';\r\nimport customFilters from \"@/plugins/filters\";\r\nimport iconifyIcons from './plugins/iconifyIcons';\r\nimport companyConfig from \"@/plugins/companyConfig\";\r\nimport PerfectScrollbar from 'vue3-perfect-scrollbar'\r\n\r\nimport 'vue3-perfect-scrollbar/dist/vue3-perfect-scrollbar.css'\r\n\r\nexport const emitter: Emitter = mitt();\r\n\r\n\r\n// Vue.use(VTooltip, {\r\n//     defaultBoundariesElement: 'window'\r\n// })\r\n\r\n// VTooltip.enabled = window.innerWidth > 768\r\n\r\n\r\nnavigator.serviceWorker.getRegistrations().then(function (registrations) {\r\n    for (let registration of registrations) {\r\n        registration.unregister()\r\n    }\r\n})\r\n\r\nlet app = createApp(App)\r\napp.config.globalProperties.emitter = emitter\r\napp.use(VTooltip)\r\napp.use(PerfectScrollbar)\r\napp.use(companyConfig)\r\n\r\n// app.use(store, key).use(router).mount('#app')\r\napp.use(store).use(router).mount('#app')\r\n\r\n\r\n\r\napp.config.globalProperties.$filters = customFilters\r\napp.config.globalProperties.$icons = iconifyIcons\r\n\r\n// Vue.config.productionTip = false\r\n// export const emitter = new Vue();\r\n// console.log('main file')\r\n// Vue.filter('date', function (value) {\r\n//   if (!value) return ''\r\n//   let date = moment(value);\r\n//   if (!date.isValid()) return ''\r\n//   return date.format('DD/MM/YYYY')\r\n// })\r\n//\r\n// Vue.filter('time', function (value) {\r\n//   if (!value) return ''\r\n//   let date = moment(value);\r\n//   if (!date.isValid()) return ''\r\n//   return date.format('HH:mm')\r\n// })\r\n//\r\n// Vue.component(\"dashboard\", Dashboard);\r\n//\r\n// new Vue({\r\n//   router,\r\n//   store,\r\n//   vuetify,\r\n//   render: h => h(App)\r\n// }).$mount('#app')\r\n\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FlexSchedule.vue?vue&type=style&index=0&id=4efb6776&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CustomSelect.vue?vue&type=style&index=0&id=7e952b10&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./alert.vue?vue&type=style&index=0&id=9b88c2bc&scoped=true&lang=css\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./youtube-input.vue?vue&type=style&index=0&id=04262304&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./mySchedules.scss?vue&type=style&index=0&lang=scss\""],"sourceRoot":""}